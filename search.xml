<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å­¦ä¹ goçš„å‡†å¤‡å·¥ä½œ</title>
    <url>/2023/06/01/Go/1/</url>
    <content><![CDATA[<h2 id="ä¸€-golangç¯å¢ƒé…ç½®"><a href="#ä¸€-golangç¯å¢ƒé…ç½®" class="headerlink" title="ä¸€.golangç¯å¢ƒé…ç½®"></a>ä¸€.golangç¯å¢ƒé…ç½®</h2><ol>
<li><p><strong>ä¸‹è½½SDK</strong></p>
<p>ç”±äºæˆ‘ç”¨çš„æ˜¯golandä¸“ä¸šç‰ˆï¼Œå¯ä»¥ç›´æ¥åœ¨ä¸Šé¢ä¸‹è½½Go SDKï¼Œå¾ˆæ–¹ä¾¿ä¹Ÿä¸éœ€è¦è§£å‹</p>
<p>ä¹Ÿå¯ä»¥å»å®˜ç½‘å®‰è£…ï¼Œ<strong><a href="https://golang.google.cn/dl/">https://golang.google.cn/dl/</a></strong></p>
<p><em><strong>ğŸ¤¡å…¶å®sdkå’Œä¸‹æ–‡Gopathè·¯å¾„ç®€æ´ä¸€ç‚¹æ›´åŠ æ–¹ä¾¿~</strong></em></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f0639cd12d544b5a19868c934ad34b4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512213759389.png"></p>
</li>
<li><p><strong>å°†goçš„binè·¯å¾„æ·»åŠ è‡³Pathç¯å¢ƒå˜é‡ä¸­</strong></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5390cc87df4744d9950fa570b1b99604~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512214558987.png"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e1571d984c048b9bdbcadf2ac0cd68d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512214829533.png"></p>
</li>
<li><p><strong>æ–°å»ºå·¥ä½œç›®å½•go_workspaceï¼Œæµ‹è¯•ç¯å¢ƒ</strong></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2001ee1accac4628b96c8515a23edd46~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512215418478.png"></p>
<p>â€‹	åœ¨è¯¥ç›®å½•é‡Œåˆ›å»ºtest.txtæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123; </span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello, world!&quot;</span>) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8a01a5064104a60b490755a1b2f0fd2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512215631547"></p>
<p>â€‹	å°†æ–‡ä»¶åç¼€åæ”¹ä¸ºgo</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0031456c4f894df5b7e1810e74d56e09~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512215705515"></p>
<p>â€‹	æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥go_workspaceçš„ç›®å½•</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0af7b34cb1224a6dab550296b0f3ae83~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512220156250.png"></p>
<p>â€‹	è¾“å…¥ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go run test.go</span></span><br></pre></td></tr></table></figure>

<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0af7b34cb1224a6dab550296b0f3ae83~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512220740795"></p>
<p>â€‹	è¾“å‡ºHello world!ï¼Œè¯æ˜ç¯å¢ƒé…ç½®æˆåŠŸ</p>
<ol start="4">
<li><p><strong>è®¾ç½®æ¨¡å—ä»£ç†</strong></p>
<p>å¦‚æœè®¿é—® github é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œå»ºè®®é…ç½® go mod proxyï¼Œä¸‹è½½ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…çš„é€Ÿåº¦å¯ä»¥å¤§å¤§åŠ å¿«</p>
</li>
</ol>
<blockquote>
<ol>
<li>æ‰“å¼€â€œå¼€å§‹â€å¹¶æœç´¢â€œenvâ€ </li>
<li>é€‰æ‹©â€œç¼–è¾‘ç³»ç»Ÿç¯å¢ƒå˜é‡â€ </li>
<li>ç‚¹å‡»â€œç¯å¢ƒå˜é‡â€¦â€æŒ‰é’® </li>
<li>åœ¨â€œ&lt;**ä½ çš„ç”¨æˆ·å**&gt; çš„ç”¨æˆ·å˜é‡â€ç« èŠ‚ä¸‹ï¼ˆä¸ŠåŠéƒ¨åˆ†ï¼‰</li>
<li>ç‚¹å‡»â€œæ–°å»ºâ€¦â€æŒ‰é’®</li>
<li>é€‰æ‹©â€œå˜é‡åâ€è¾“å…¥æ¡†å¹¶è¾“å…¥â€œGO111MODULEâ€ </li>
<li>é€‰æ‹©â€œå˜é‡å€¼â€è¾“å…¥æ¡†å¹¶è¾“å…¥â€œonâ€ </li>
<li>ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’® </li>
<li>ç‚¹å‡»â€œæ–°å»ºâ€¦â€æŒ‰é’® </li>
<li>é€‰æ‹©â€œå˜é‡åâ€è¾“å…¥æ¡†å¹¶è¾“å…¥â€œGOPROXYâ€ </li>
<li>é€‰æ‹©â€œå˜é‡å€¼â€è¾“å…¥æ¡†å¹¶è¾“å…¥â€œ<a href="https://goproxy.cnâ€/">https://goproxy.cnâ€</a> </li>
<li>ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®</li>
</ol>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2906b6d25e1743d08166f72c5fb8abdc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230513094942468"></p>
<p>æˆ–è€…æ‰“å¼€ç»ˆç«¯å¹¶æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go <span class="built_in">env</span> -w GO111MODULE=on</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go <span class="built_in">env</span> -w GOPROXY=https://goproxy.cn,direct</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸æ”¾å¿ƒé…ç½®æ˜¯å¦å‡†ç¡®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å‘½ä»¤è¡Œè¾“å…¥go envæ£€éªŒ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7da62670712f41b487dfefbaa7be4a70~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230513100243945"></p>
<p><em><strong>å½“ç„¶è¿˜å¯ä»¥è®¾ç½®è‡ªæ‰˜ç®¡goæ¨¡å—ä»£ç†</strong></em>ï¼Œå‚ç…§<a href="https://goproxy.cn/">https://goproxy.cn/</a></p>
<p>â€‹	ä»¥ä¸‹åˆ—å‡ºè‡ªæ‰˜ç®¡goæ¨¡å—ä»£ç†çš„ä¸€äº›å¥½å¤„ï¼š</p>
<ul>
<li>åœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹ä½¿ç”¨ä»£ç ï¼Œå› ä¸ºä»£ç å’Œä¾èµ–é¡¹éƒ½åœ¨æœ¬åœ°å­˜å‚¨ã€‚</li>
<li>æ›´å¥½åœ°æ§åˆ¶ä½ çš„ä»£ç å’Œä¾èµ–é¡¹ï¼Œå› ä¸ºå®ƒä»¬éƒ½åœ¨æœ¬åœ°å­˜å‚¨ã€‚</li>
<li>æ›´å¥½åœ°ä¿æŠ¤ä½ çš„ä»£ç å’Œä¾èµ–é¡¹ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šè¢«å¤–éƒ¨è®¿é—®ã€‚</li>
<li>æ›´å¿«åœ°æ„å»ºå’Œæµ‹è¯•ä»£ç ï¼Œå› ä¸ºå®ƒä»¬ä¸éœ€è¦ä»è¿œç¨‹æœåŠ¡å™¨ä¸‹è½½ä¾èµ–é¡¹ã€‚</li>
</ul>
</li>
</ol>
<h2 id="äºŒ-golandé…ç½®"><a href="#äºŒ-golandé…ç½®" class="headerlink" title="äºŒ.golandé…ç½®"></a>äºŒ.golandé…ç½®</h2><p><strong>ç³»ç»Ÿå˜é‡</strong>ä¸­æ–°å»ºGOROOTå’ŒGOPATHï¼ŒGOROOTä¸ºgoçš„å®‰è£…è·¯å¾„ï¼ˆGoè¯­è¨€å®‰è£…ç›®å½•ï¼‰ï¼ŒGOPATHä¸ºgo_workspaceçš„è·¯å¾„</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/922f246f49bc482f805f451d9fcd1120~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512223852340.png"></p>
<p>å¹¶å°†<strong>ç”¨æˆ·å˜é‡</strong>ä¸­çš„GOPATHæ”¹ä¸ºgo_workspaceçš„è·¯å¾„</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/98d3ba81f6e9403eadd02764531eb944~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512224220984.png"></p>
<p>å‘½ä»¤è¡Œè¾“å…¥go envï¼Œé…ç½®æˆåŠŸ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f3da83af8fa14d5e95df99a62efabccf~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230512224355670.png"></p>
<p>æ–°å»ºgoå·¥ç¨‹ï¼ŒGOROOTä¸ºgoè¯­è¨€å®‰è£…ç›®å½•</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/309a90dc08704cb096f68bd1ba1003fd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230513082400448.png"></p>
<p>æ–°å»ºmainç›®å½•ï¼Œåˆ›å»ºtest.goæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å³é”®å¹¶å•å‡»è¿è¡Œ</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e97edf2697f44c9ac6989f149b432a6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20230513084354777.png"></p>
<p>è¾“å‡ºHello worldï¼é…ç½®æˆåŠŸ</p>
<h2 id="ä¸‰-golandå¸¸ç”¨å¿«æ·é”®"><a href="#ä¸‰-golandå¸¸ç”¨å¿«æ·é”®" class="headerlink" title="ä¸‰.golandå¸¸ç”¨å¿«æ·é”®"></a>ä¸‰.golandå¸¸ç”¨å¿«æ·é”®</h2><p>æ–‡ä»¶ç›¸å…³å¿«æ·é”®ï¼š</p>
<blockquote>
<p>CTRL+Eï¼Œæ‰“å¼€æœ€è¿‘æµè§ˆè¿‡çš„æ–‡ä»¶ã€‚<br>CTRL+SHIFT+Eï¼Œæ‰“å¼€æœ€è¿‘æ›´æ”¹çš„æ–‡ä»¶ã€‚<br>CTRL+Nï¼Œå¯ä»¥å¿«é€Ÿæ‰“å¼€structç»“æ„ä½“ã€‚<br>CTRL+SHIFT+Nï¼Œå¯ä»¥å¿«é€Ÿæ‰“å¼€æ–‡ä»¶ã€‚</p>
</blockquote>
<p>ä»£ç æ ¼å¼åŒ–ï¼š</p>
<blockquote>
<p>CTRL+ALT+Tï¼Œå¯ä»¥æŠŠä»£ç åŒ…åœ¨ä¸€ä¸ªå—å†…ï¼Œä¾‹å¦‚if{â€¦}else{â€¦}ã€‚<br>CTRL+ALT+Lï¼Œæ ¼å¼åŒ–ä»£ç ã€‚<br>CTRL+ç©ºæ ¼ï¼Œä»£ç æç¤ºã€‚<br>CTRL+&#x2F;ï¼Œå•è¡Œæ³¨é‡Šã€‚CTRL+SHIFT+&#x2F;ï¼Œè¿›è¡Œå¤šè¡Œæ³¨é‡Šã€‚<br>CTRL+Bï¼Œå¿«é€Ÿæ‰“å¼€å…‰æ ‡å¤„çš„ç»“æ„ä½“æˆ–æ–¹æ³•ï¼ˆè·³è½¬åˆ°å®šä¹‰å¤„ï¼‰ã€‚<br>CTRL+â€œ+&#x2F;-â€ï¼Œå¯ä»¥å°†å½“å‰æ–¹æ³•è¿›è¡Œå±•å¼€æˆ–æŠ˜å ã€‚</p>
</blockquote>
<p>æŸ¥æ‰¾å’Œå®šä½:</p>
<blockquote>
<p>CTRL+Rï¼Œæ›¿æ¢æ–‡æœ¬ã€‚<br>CTRL+Fï¼ŒæŸ¥æ‰¾æ–‡æœ¬ã€‚<br>CTRL+SHIFT+Fï¼Œè¿›è¡Œå…¨å±€æŸ¥æ‰¾ã€‚<br>CTRL+Gï¼Œå¿«é€Ÿå®šä½åˆ°æŸè¡Œã€‚</p>
</blockquote>
<p>ä»£ç ç¼–è¾‘:</p>
<blockquote>
<p>ALT+Qï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æ–¹æ³•çš„å£°æ˜ã€‚<br>CTRL+Backspaceï¼ŒæŒ‰å•è¯è¿›è¡Œåˆ é™¤ã€‚<br>SHIFT+ENTERï¼Œå¯ä»¥å‘ä¸‹æ’å…¥æ–°è¡Œï¼Œå³ä½¿å…‰æ ‡åœ¨å½“å‰è¡Œçš„ä¸­é—´ã€‚<br>CTRL+Xï¼Œåˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œã€‚<br>CTRL+Dï¼Œå¤åˆ¶å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œã€‚<br>ALT+SHIFT+UP&#x2F;DOWNï¼Œå¯ä»¥å°†å…‰æ ‡æ‰€åœ¨è¡Œçš„ä»£ç ä¸Šä¸‹ç§»åŠ¨ã€‚<br>CTRL+SHIFT+Uï¼Œå¯ä»¥å°†é€‰ä¸­å†…å®¹è¿›è¡Œå¤§å°å†™è½¬åŒ–ã€‚</p>
</blockquote>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://juejin.cn/post/7232459954580947000">Windowsç³»ç»Ÿä¸‹golangå’Œgolandè¯¦ç»†é…ç½®|é’è®­è¥ç¬”è®° - æ˜é‡‘ (juejin.cn)</a></p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–¹æ³•ä¸æ¥å£</title>
    <url>/2023/06/06/Go/10/</url>
    <content><![CDATA[<h1 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h1><h2 id="ä»€ä¹ˆæ˜¯æ–¹æ³•"><a href="#ä»€ä¹ˆæ˜¯æ–¹æ³•" class="headerlink" title="ä»€ä¹ˆæ˜¯æ–¹æ³•"></a>ä»€ä¹ˆæ˜¯æ–¹æ³•</h2><p>Go è¯­è¨€ä¸­åŒæ—¶æœ‰å‡½æ•°å’Œæ–¹æ³•ã€‚ä¸€ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ªåŒ…å«äº†æ¥å—è€…çš„å‡½æ•°ï¼Œæ¥å—è€…å¯ä»¥æ˜¯å‘½åç±»å‹æˆ–è€…ç»“æ„ä½“ç±»å‹çš„ä¸€ä¸ªå€¼æˆ–è€…æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚æ‰€æœ‰ç»™å®šç±»å‹çš„æ–¹æ³•å±äºè¯¥ç±»å‹çš„æ–¹æ³•é›†ã€‚</p>
<p>æ–¹æ³•åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ¥æ”¶å™¨ç±»å‹ï¼Œå®ƒæ˜¯åœ¨funcå…³é”®å­—å’Œæ–¹æ³•åä¹‹é—´ç¼–å†™çš„ã€‚æ¥æ”¶å™¨å¯ä»¥æ˜¯structç±»å‹æˆ–éstructç±»å‹ã€‚æ¥æ”¶æ–¹å¯ä»¥åœ¨æ–¹æ³•å†…éƒ¨è®¿é—®ã€‚</p>
<h2 id="æ–¹æ³•çš„è¯­æ³•"><a href="#æ–¹æ³•çš„è¯­æ³•" class="headerlink" title="æ–¹æ³•çš„è¯­æ³•"></a>æ–¹æ³•çš„è¯­æ³•</h2><p>å®šä¹‰æ–¹æ³•çš„è¯­æ³•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t Type)</span></span> methodName(parameter list)(<span class="keyword">return</span> list) &#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funcName</span><span class="params">(parameter list)</span></span>(<span class="keyword">return</span> list)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;  </span><br><span class="line">    name     <span class="type">string</span></span><br><span class="line">    salary   <span class="type">int</span></span><br><span class="line">    currency <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> displaySalary() method has Employee as the receiver type</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e Employee)</span></span> displaySalary() &#123;  </span><br><span class="line">    fmt.Printf(<span class="string">&quot;Salary of %s is %s%d&quot;</span>, e.name, e.currency, e.salary)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    emp1 := Employee &#123;</span><br><span class="line">        name:     <span class="string">&quot;Sam Adolf&quot;</span>,</span><br><span class="line">        salary:   <span class="number">5000</span>,</span><br><span class="line">        currency: <span class="string">&quot;$&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    emp1.displaySalary() <span class="comment">//Calling displaySalary() method of Employee type</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¯ä»¥å®šä¹‰ç›¸åŒçš„æ–¹æ³•å</strong></p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</span><br><span class="line">	width, height <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Circle <span class="keyword">struct</span> &#123;</span><br><span class="line">	radius <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Rectangle)</span></span> area() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> r.width * r.height</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¯¥ method å±äº Circle ç±»å‹å¯¹è±¡ä¸­çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Circle)</span></span> area() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> c.radius * c.radius * math.Pi</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r1 := Rectangle&#123;<span class="number">12</span>, <span class="number">2</span>&#125;</span><br><span class="line">	r2 := Rectangle&#123;<span class="number">9</span>, <span class="number">4</span>&#125;</span><br><span class="line">	c1 := Circle&#123;<span class="number">10</span>&#125;</span><br><span class="line">	c2 := Circle&#123;<span class="number">25</span>&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Area of r1 is: &quot;</span>, r1.area())</span><br><span class="line">	fmt.Println(<span class="string">&quot;Area of r2 is: &quot;</span>, r2.area())</span><br><span class="line">	fmt.Println(<span class="string">&quot;Area of c1 is: &quot;</span>, c1.area())</span><br><span class="line">	fmt.Println(<span class="string">&quot;Area of c2 is: &quot;</span>, c2.area())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Area of r1 is:  24</span><br><span class="line">Area of r2 is:  36</span><br><span class="line">Area of c1 is:  314.1592653589793</span><br><span class="line">Area of c2 is:  1963.4954084936207</span><br></pre></td></tr></table></figure>

<ul>
<li>è™½ç„¶methodçš„åå­—ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœæ¥æ”¶è€…ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆmethodå°±ä¸ä¸€æ ·</li>
<li>methodé‡Œé¢å¯ä»¥è®¿é—®æ¥æ”¶è€…çš„å­—æ®µ</li>
<li>è°ƒç”¨methodé€šè¿‡.è®¿é—®ï¼Œå°±åƒstructé‡Œé¢è®¿é—®å­—æ®µä¸€æ ·</li>
</ul>
<h2 id="æ–¹æ³•å’Œå‡½æ•°"><a href="#æ–¹æ³•å’Œå‡½æ•°" class="headerlink" title="æ–¹æ³•å’Œå‡½æ•°"></a>æ–¹æ³•å’Œå‡½æ•°</h2><p>æ—¢ç„¶æˆ‘ä»¬å·²ç»æœ‰äº†å‡½æ•°ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨æ–¹æ³•ï¼Ÿ</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;  </span><br><span class="line">    name     <span class="type">string</span></span><br><span class="line">    salary   <span class="type">int</span></span><br><span class="line">    currency <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> displaySalary() method converted to function with Employee as parameter</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">displaySalary</span><span class="params">(e Employee)</span></span> &#123;  </span><br><span class="line">    fmt.Printf(<span class="string">&quot;Salary of %s is %s%d&quot;</span>, e.name, e.currency, e.salary)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    emp1 := Employee&#123;</span><br><span class="line">        name:     <span class="string">&quot;Sam Adolf&quot;</span>,</span><br><span class="line">        salary:   <span class="number">5000</span>,</span><br><span class="line">        currency: <span class="string">&quot;$&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    displaySalary(emp1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼ŒdisplaySalaryæ–¹æ³•è¢«è½¬æ¢ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè€ŒEmployee structä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚è¿™ä¸ªç¨‹åºä¹Ÿäº§ç”Ÿäº†ç›¸åŒçš„è¾“å‡ºï¼šSalary of Sam Adolf is $5000.ã€‚</p>
</blockquote>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°æ¥å†™ç›¸åŒçš„ç¨‹åºå‘¢?æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› </p>
<ol>
<li>Goä¸æ˜¯ä¸€ç§çº¯ç²¹é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä¸æ”¯æŒç±»ã€‚å› æ­¤ï¼Œç±»å‹çš„æ–¹æ³•æ˜¯ä¸€ç§å®ç°ç±»ä¼¼äºç±»çš„è¡Œä¸ºçš„æ–¹æ³•ã€‚</li>
<li>ç›¸åŒåç§°çš„æ–¹æ³•å¯ä»¥åœ¨ä¸åŒçš„ç±»å‹ä¸Šå®šä¹‰ï¼Œè€Œå…·æœ‰ç›¸åŒåç§°çš„å‡½æ•°æ˜¯ä¸å…è®¸çš„ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ­£æ–¹å½¢å’Œåœ†å½¢çš„ç»“æ„ã€‚å¯ä»¥åœ¨æ­£æ–¹å½¢å’Œåœ†å½¢ä¸Šå®šä¹‰ä¸€ä¸ªåä¸ºAreaçš„æ–¹æ³•ã€‚</li>
</ol>
<h2 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä½œç”¨åŸŸ"></a>å˜é‡ä½œç”¨åŸŸ</h2><p>ä½œç”¨åŸŸä¸ºå·²å£°æ˜æ ‡è¯†ç¬¦æ‰€è¡¨ç¤ºçš„å¸¸é‡ã€ç±»å‹ã€å˜é‡ã€å‡½æ•°æˆ–åŒ…åœ¨æºä»£ç ä¸­çš„ä½œç”¨èŒƒå›´ã€‚</p>
<p>Go è¯­è¨€ä¸­å˜é‡å¯ä»¥åœ¨ä¸‰ä¸ªåœ°æ–¹å£°æ˜ï¼š</p>
<ul>
<li>å‡½æ•°å†…å®šä¹‰çš„å˜é‡ç§°ä¸ºå±€éƒ¨å˜é‡</li>
<li>å‡½æ•°å¤–å®šä¹‰çš„å˜é‡ç§°ä¸ºå…¨å±€å˜é‡</li>
<li>å‡½æ•°å®šä¹‰ä¸­çš„å˜é‡ç§°ä¸ºå½¢å¼å‚æ•°</li>
</ul>
<p><strong>å±€éƒ¨å˜é‡</strong></p>
<p>åœ¨å‡½æ•°ä½“å†…å£°æ˜çš„å˜é‡ç§°ä¹‹ä¸ºå±€éƒ¨å˜é‡ï¼Œå®ƒä»¬çš„ä½œç”¨åŸŸåªåœ¨å‡½æ•°ä½“å†…ï¼Œå‚æ•°å’Œè¿”å›å€¼å˜é‡ä¹Ÿæ˜¯å±€éƒ¨å˜é‡ã€‚</p>
<p><strong>å…¨å±€å˜é‡</strong></p>
<p>åœ¨å‡½æ•°ä½“å¤–å£°æ˜çš„å˜é‡ç§°ä¹‹ä¸ºå…¨å±€å˜é‡ï¼Œé¦–å­—æ¯å¤§å†™å…¨å±€å˜é‡å¯ä»¥åœ¨æ•´ä¸ªåŒ…ç”šè‡³å¤–éƒ¨åŒ…ï¼ˆè¢«å¯¼å‡ºåï¼‰ä½¿ç”¨ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å£°æ˜å…¨å±€å˜é‡ */</span></span><br><span class="line"><span class="keyword">var</span> g <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* å£°æ˜å±€éƒ¨å˜é‡ */</span></span><br><span class="line">   <span class="keyword">var</span> a, b <span class="type">int</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* åˆå§‹åŒ–å‚æ•° */</span></span><br><span class="line">   a = <span class="number">10</span></span><br><span class="line">   b = <span class="number">20</span></span><br><span class="line">   g = a + b</span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">&quot;ç»“æœï¼š a = %d, b = %d and g = %d\n&quot;</span>, a, b, g)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç»“æœï¼š a = 10, b = 20 and g = 30</span><br></pre></td></tr></table></figure>

<p><strong>å½¢å¼å‚æ•°</strong></p>
<p>å½¢å¼å‚æ•°ä¼šä½œä¸ºå‡½æ•°çš„å±€éƒ¨å˜é‡æ¥ä½¿ç”¨</p>
<p><strong>æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…</strong></p>
<p>è‹¥ä¸æ˜¯ä»¥æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…ï¼Œå®é™…åªæ˜¯è·å–äº†ä¸€ä¸ªcopyï¼Œè€Œä¸èƒ½çœŸæ­£æ”¹å˜æ¥æ”¶è€…çš„ä¸­çš„æ•°æ®</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Box)</span></span> SetColor(c Color) &#123;</span><br><span class="line">	b.color = c</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</span><br><span class="line">	width, height <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Rectangle)</span></span> setVal() &#123;</span><br><span class="line">	r.height = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := Rectangle&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	s := p</span><br><span class="line">	p.setVal()</span><br><span class="line">	fmt.Println(p.height, s.height)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">20 2</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰é‚£ä¸ª*ï¼Œåˆ™å€¼å°±æ˜¯<code>2 2</code></p>
<h2 id="methodç»§æ‰¿"><a href="#methodç»§æ‰¿" class="headerlink" title="methodç»§æ‰¿"></a>methodç»§æ‰¿</h2><p>methodæ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œå¦‚æœåŒ¿åå­—æ®µå®ç°äº†ä¸€ä¸ªmethodï¼Œé‚£ä¹ˆåŒ…å«è¿™ä¸ªåŒ¿åå­—æ®µçš„structä¹Ÿèƒ½è°ƒç”¨è¯¥method</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Human <span class="keyword">struct</span> &#123;</span><br><span class="line">	name  <span class="type">string</span></span><br><span class="line">	age   <span class="type">int</span></span><br><span class="line">	phone <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human  <span class="comment">//åŒ¿åå­—æ®µ</span></span><br><span class="line">	school <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human   <span class="comment">//åŒ¿åå­—æ®µ</span></span><br><span class="line">	company <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *Human)</span></span> SayHi() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Hi, I am %s you can call me on %s\n&quot;</span>, h.name, h.phone)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	mark := Student&#123;Human&#123;<span class="string">&quot;Mark&quot;</span>, <span class="number">25</span>, <span class="string">&quot;222-222-YYYY&quot;</span>&#125;, <span class="string">&quot;MIT&quot;</span>&#125;</span><br><span class="line">	sam := Employee&#123;Human&#123;<span class="string">&quot;Sam&quot;</span>, <span class="number">45</span>, <span class="string">&quot;111-888-XXXX&quot;</span>&#125;, <span class="string">&quot;Golang Inc&quot;</span>&#125;</span><br><span class="line">	mark.SayHi()</span><br><span class="line">	sam.SayHi()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Hi, I am Mark you can call me on <span class="number">222</span><span class="number">-222</span>-YYYY</span><br><span class="line">Hi, I am Sam you can call me on <span class="number">111</span><span class="number">-888</span>-XXXX</span><br></pre></td></tr></table></figure>

<h2 id="methodé‡å†™"><a href="#methodé‡å†™" class="headerlink" title="methodé‡å†™"></a>methodé‡å†™</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Human <span class="keyword">struct</span> &#123;</span><br><span class="line">	name  <span class="type">string</span></span><br><span class="line">	age   <span class="type">int</span></span><br><span class="line">	phone <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human  <span class="comment">//åŒ¿åå­—æ®µ</span></span><br><span class="line">	school <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human   <span class="comment">//åŒ¿åå­—æ®µ</span></span><br><span class="line">	company <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Humanå®šä¹‰method</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *Human)</span></span> SayHi() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Hi, I am %s you can call me on %s\n&quot;</span>, h.name, h.phone)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Employeeçš„methodé‡å†™Humançš„method</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *Employee)</span></span> SayHi() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Hi, I am %s, I work at %s. Call me on %s\n&quot;</span>, e.name,</span><br><span class="line">		e.company, e.phone) <span class="comment">//Yes you can split into 2 lines here.</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	mark := Student&#123;Human&#123;<span class="string">&quot;Mark&quot;</span>, <span class="number">25</span>, <span class="string">&quot;222-222-YYYY&quot;</span>&#125;, <span class="string">&quot;MIT&quot;</span>&#125;</span><br><span class="line">	sam := Employee&#123;Human&#123;<span class="string">&quot;Sam&quot;</span>, <span class="number">45</span>, <span class="string">&quot;111-888-XXXX&quot;</span>&#125;, <span class="string">&quot;Golang Inc&quot;</span>&#125;</span><br><span class="line">	mark.SayHi()</span><br><span class="line">	sam.SayHi()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Hi, I am Mark you can call me on 222-222-YYYY</span><br><span class="line">Hi, I am Sam, I work at Golang Inc. Call me on 111-888-XXXX</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–¹æ³•æ˜¯å¯ä»¥ç»§æ‰¿å’Œé‡å†™çš„</li>
<li>å­˜åœ¨ç»§æ‰¿å…³ç³»æ—¶ï¼ŒæŒ‰ç…§å°±è¿‘åŸåˆ™ï¼Œè¿›è¡Œè°ƒç”¨</li>
</ul>
<h1 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h1><h2 id="ä»€ä¹ˆæ˜¯æ¥å£"><a href="#ä»€ä¹ˆæ˜¯æ¥å£" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¥å£"></a>ä»€ä¹ˆæ˜¯æ¥å£</h2><p>é¢å‘å¯¹è±¡ä¸–ç•Œä¸­çš„æ¥å£çš„ä¸€èˆ¬å®šä¹‰æ˜¯â€œæ¥å£å®šä¹‰å¯¹è±¡çš„è¡Œä¸ºâ€ã€‚å®ƒè¡¨ç¤ºè®©æŒ‡å®šå¯¹è±¡åº”è¯¥åšä»€ä¹ˆã€‚å®ç°è¿™ç§è¡Œä¸ºçš„æ–¹æ³•(å®ç°ç»†èŠ‚)æ˜¯é’ˆå¯¹å¯¹è±¡çš„ã€‚</p>
<p>åœ¨Goä¸­ï¼Œæ¥å£æ˜¯ä¸€ç»„æ–¹æ³•ç­¾åã€‚å½“ç±»å‹ä¸ºæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•æä¾›å®šä¹‰æ—¶ï¼Œå®ƒè¢«ç§°ä¸ºå®ç°æ¥å£ã€‚å®ƒä¸OOPéå¸¸ç›¸ä¼¼ã€‚æ¥å£æŒ‡å®šäº†ç±»å‹åº”è¯¥å…·æœ‰çš„æ–¹æ³•ï¼Œç±»å‹å†³å®šäº†å¦‚ä½•å®ç°è¿™äº›æ–¹æ³•ã€‚</p>
<blockquote>
<p> å®ƒæŠŠæ‰€æœ‰çš„å…·æœ‰å…±æ€§çš„æ–¹æ³•å®šä¹‰åœ¨ä¸€èµ·ï¼Œä»»ä½•å…¶ä»–ç±»å‹åªè¦å®ç°äº†è¿™äº›æ–¹æ³•å°±æ˜¯å®ç°äº†è¿™ä¸ªæ¥å£</p>
<p> æ¥å£å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡å®ç°äº†æŸä¸ªæ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œåˆ™æ­¤å¯¹è±¡å°±å®ç°äº†è¯¥æ¥å£ã€‚</p>
</blockquote>
<h2 id="æ¥å£çš„å®šä¹‰è¯­æ³•"><a href="#æ¥å£çš„å®šä¹‰è¯­æ³•" class="headerlink" title="æ¥å£çš„å®šä¹‰è¯­æ³•"></a>æ¥å£çš„å®šä¹‰è¯­æ³•</h2><p>å®šä¹‰æ¥å£</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å®šä¹‰æ¥å£ */</span></span><br><span class="line"><span class="keyword">type</span> interface_name <span class="keyword">interface</span> &#123;</span><br><span class="line">   method_name1 [return_type]</span><br><span class="line">   method_name2 [return_type]</span><br><span class="line">   method_name3 [return_type]</span><br><span class="line">   ...</span><br><span class="line">   method_namen [return_type]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å®šä¹‰ç»“æ„ä½“ */</span></span><br><span class="line"><span class="keyword">type</span> struct_name <span class="keyword">struct</span> &#123;</span><br><span class="line">   <span class="comment">/* variables */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å®ç°æ¥å£æ–¹æ³• */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(struct_name_variable struct_name)</span></span> method_name1() [return_type] &#123;</span><br><span class="line">   <span class="comment">/* æ–¹æ³•å®ç° */</span></span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(struct_name_variable struct_name)</span></span> method_namen() [return_type] &#123;</span><br><span class="line">   <span class="comment">/* æ–¹æ³•å®ç°*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Phone <span class="keyword">interface</span> &#123;</span><br><span class="line">    call()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> NokiaPhone <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(nokiaPhone NokiaPhone)</span></span> call() &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;I am Nokia, I can call you!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IPhone <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(iPhone IPhone)</span></span> call() &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;I am iPhone, I can call you!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> phone Phone</span><br><span class="line"></span><br><span class="line">    phone = <span class="built_in">new</span>(NokiaPhone)</span><br><span class="line">    phone.call()</span><br><span class="line"></span><br><span class="line">    phone = <span class="built_in">new</span>(IPhone)</span><br><span class="line">    phone.call()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äº<code>NokiaPhone</code>ç»“æ„ä½“å®ç°äº†<code>Phone</code>æ¥å£ä¸­çš„æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥å°†å…¶èµ‹å€¼ç»™<code>phone</code>ã€‚</p>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">I am Nokia, I can call you!</span><br><span class="line">I am iPhone, I can call you!</span><br></pre></td></tr></table></figure>

<ul>
<li>interfaceå¯ä»¥è¢«ä»»æ„çš„å¯¹è±¡å®ç°</li>
<li>ä¸€ä¸ªå¯¹è±¡å¯ä»¥å®ç°ä»»æ„å¤šä¸ªinterface</li>
<li>ä»»æ„çš„ç±»å‹éƒ½å®ç°äº†ç©ºinterface(æˆ‘ä»¬è¿™æ ·å®šä¹‰ï¼šinterface{})ï¼Œä¹Ÿå°±æ˜¯åŒ…å«0ä¸ªmethodçš„interface</li>
</ul>
<h2 id="interfaceå€¼"><a href="#interfaceå€¼" class="headerlink" title="interfaceå€¼"></a>interfaceå€¼</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Human <span class="keyword">struct</span> &#123;</span><br><span class="line">	name  <span class="type">string</span></span><br><span class="line">	age   <span class="type">int</span></span><br><span class="line">	phone <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human  <span class="comment">//åŒ¿åå­—æ®µ</span></span><br><span class="line">	school <span class="type">string</span></span><br><span class="line">	loan   <span class="type">float32</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human   <span class="comment">//åŒ¿åå­—æ®µ</span></span><br><span class="line">	company <span class="type">string</span></span><br><span class="line">	money   <span class="type">float32</span></span><br><span class="line">&#125; <span class="comment">//Humanå®ç°Sayhiæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h Human)</span></span> SayHi() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Hi, I am %s you can call me on %s\n&quot;</span>, h.name, h.phone)</span><br><span class="line">&#125; <span class="comment">//Humanå®ç°Singæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h Human)</span></span> Sing(lyrics <span class="type">string</span>) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;La la la la...&quot;</span>, lyrics)</span><br><span class="line">&#125; <span class="comment">//Employeeé‡å†™Humançš„SayHiæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e Employee)</span></span> SayHi() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Hi, I am %s, I work at %s. Call me on %s\n&quot;</span>, e.name,</span><br><span class="line">		e.company, e.phone) <span class="comment">//Yes you can split into 2 lines here.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Interface Menè¢«Human,Studentå’ŒEmployeeå®ç°</span></span><br><span class="line"><span class="comment">// å› ä¸ºè¿™ä¸‰ä¸ªç±»å‹éƒ½å®ç°äº†è¿™ä¸¤ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="keyword">type</span> Men <span class="keyword">interface</span> &#123;</span><br><span class="line">	SayHi()</span><br><span class="line">	Sing(lyrics <span class="type">string</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	mike := Student&#123;Human&#123;<span class="string">&quot;Mike&quot;</span>, <span class="number">25</span>, <span class="string">&quot;222-222-XXX&quot;</span>&#125;, <span class="string">&quot;MIT&quot;</span>, <span class="number">0.00</span>&#125;</span><br><span class="line">	paul := Student&#123;Human&#123;<span class="string">&quot;Paul&quot;</span>, <span class="number">26</span>, <span class="string">&quot;111-222-XXX&quot;</span>&#125;, <span class="string">&quot;Harvard&quot;</span>, <span class="number">100</span>&#125;</span><br><span class="line">	sam := Employee&#123;Human&#123;<span class="string">&quot;Sam&quot;</span>, <span class="number">36</span>, <span class="string">&quot;444-222-XXX&quot;</span>&#125;, <span class="string">&quot;Golang Inc.&quot;</span>, <span class="number">1000</span>&#125;</span><br><span class="line">	Tom := Employee&#123;Human&#123;<span class="string">&quot;Sam&quot;</span>, <span class="number">36</span>, <span class="string">&quot;444-222-XXX&quot;</span>&#125;, <span class="string">&quot;Things Ltd.&quot;</span>, <span class="number">5000</span>&#125;</span><br><span class="line">	<span class="comment">//å®šä¹‰Menç±»å‹çš„å˜é‡i</span></span><br><span class="line">	<span class="keyword">var</span> i Men</span><br><span class="line">	<span class="comment">//ièƒ½å­˜å‚¨Student</span></span><br><span class="line">	i = mike</span><br><span class="line">	fmt.Println(<span class="string">&quot;This is Mike, a Student:&quot;</span>)</span><br><span class="line">	i.SayHi()</span><br><span class="line">	i.Sing(<span class="string">&quot;November rain&quot;</span>)</span><br><span class="line">	<span class="comment">//iä¹Ÿèƒ½å­˜å‚¨Employee</span></span><br><span class="line">	i = Tom</span><br><span class="line">	fmt.Println(<span class="string">&quot;This is Tom, an Employee:&quot;</span>)</span><br><span class="line">	i.SayHi()</span><br><span class="line">	i.Sing(<span class="string">&quot;Born to be wild&quot;</span>)</span><br><span class="line">	<span class="comment">//å®šä¹‰äº†slice Men</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Let&#x27;s use a slice of Men and see what happens&quot;</span>)</span><br><span class="line">	x := <span class="built_in">make</span>([]Men, <span class="number">3</span>)</span><br><span class="line">	<span class="comment">//Tè¿™ä¸‰ä¸ªéƒ½æ˜¯ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œä½†æ˜¯ä»–ä»¬å®ç°äº†interfaceåŒä¸€ä¸ªæ¥å£</span></span><br><span class="line">	x[<span class="number">0</span>], x[<span class="number">1</span>], x[<span class="number">2</span>] = paul, sam, mike</span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> x &#123;</span><br><span class="line">		value.SayHi()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">This is Mike, a Student:</span><br><span class="line">Hi, I am Mike you can call me on 222-222-XXX</span><br><span class="line">La la la la... November rain</span><br><span class="line">This is Tom, an Employee:</span><br><span class="line">Hi, I am Sam, I work at Things Ltd.. Call me on 444-222-XXX</span><br><span class="line">La la la la... Born to be wild</span><br><span class="line">Let&#x27;s use a slice of Men and see what happens</span><br><span class="line">Hi, I am Paul you can call me on 111-222-XXX</span><br><span class="line">Hi, I am Sam, I work at Golang Inc.. Call me on 444-222-XXX</span><br><span class="line">Hi, I am Mike you can call me on 222-222-XXX</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆinterfaceé‡Œé¢åˆ°åº•èƒ½å­˜ä»€ä¹ˆå€¼å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªinterfaceçš„å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡é‡Œé¢å¯ä»¥å­˜å®ç°è¿™ä¸ªinterfaceçš„ä»»æ„ç±»å‹çš„å¯¹è±¡ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªMen interfaceç±»å‹çš„å˜é‡mï¼Œé‚£ä¹ˆmé‡Œé¢å¯ä»¥å­˜Humanã€Studentæˆ–è€…Employeeå€¼</p>
<blockquote>
<p>å½“ç„¶ï¼Œä½¿ç”¨æŒ‡é’ˆçš„æ–¹å¼ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„</p>
<p>ä½†æ˜¯ï¼Œæ¥å£å¯¹è±¡ä¸èƒ½è°ƒç”¨å®ç°å¯¹è±¡çš„å±æ€§</p>
</blockquote>
<p><strong>interfaceå‡½æ•°å‚æ•°</strong></p>
<p>interfaceçš„å˜é‡å¯ä»¥æŒæœ‰ä»»æ„å®ç°è¯¥interfaceç±»å‹çš„å¯¹è±¡ï¼Œè¿™ç»™æˆ‘ä»¬ç¼–å†™å‡½æ•°(åŒ…æ‹¬method)æä¾›äº†ä¸€äº›é¢å¤–çš„æ€è€ƒï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å®šä¹‰interfaceå‚æ•°ï¼Œè®©å‡½æ•°æ¥å—å„ç§ç±»å‹çš„å‚æ•°</p>
<p><strong>åµŒå…¥interface</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Human <span class="keyword">interface</span> &#123;</span><br><span class="line">	Len()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">interface</span> &#123;</span><br><span class="line">	Human</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Test <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *Test)</span></span> Len() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æˆåŠŸ&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s Student</span><br><span class="line">	s = <span class="built_in">new</span>(Test)</span><br><span class="line">	s.Len()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰äº†ä¸€ä¸ª<code>Student</code>æ¥å£ï¼Œå®ƒé€šè¿‡åµŒå¥—<code>Human</code>æ¥å£ï¼Œç»§æ‰¿äº†<code>Human</code>æ¥å£ä¸­çš„æ–¹æ³•ã€‚åœ¨<code>Test</code>ç»“æ„ä½“ä¸Šå®šä¹‰äº†ä¸€ä¸ªæŒ‡é’ˆæ¥æ”¶è€…çš„<code>Len</code>æ–¹æ³•ã€‚è¯¥æ–¹æ³•å®ç°äº†<code>Human</code>æ¥å£ä¸­çš„<code>Len</code>æ–¹æ³•ã€‚é€šè¿‡<code>s.Len()</code>è°ƒç”¨äº†<code>Test</code>ç»“æ„ä½“ä¸­å®ç°çš„<code>Len</code>æ–¹æ³•ï¼Œå¹¶è¾“å‡ºâ€æˆåŠŸâ€ã€‚è¿™æ ·ï¼Œé€šè¿‡æ¥å£çš„åµŒå¥—ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ¥å£ä¸­ç»„åˆå¤šä¸ªå…¶ä»–æ¥å£ï¼Œå¹¶ä¸”å®ç°äº†åµŒå¥—æ¥å£çš„æ–¹æ³•çš„ç»“æ„ä½“ä¹Ÿè¢«è®¤ä¸ºæ˜¯å®ç°äº†åµŒå¥—æ¥å£ã€‚è¿™æ ·å¯ä»¥å®ç°æ¥å£çš„æ‰©å±•å’Œå¤ç”¨ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Controller <span class="keyword">struct</span> &#123;</span><br><span class="line">	M <span class="type">int32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Something <span class="keyword">interface</span> &#123;</span><br><span class="line">	Get()</span><br><span class="line">	Post()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Controller)</span></span> Get() &#123;</span><br><span class="line">	fmt.Print(<span class="string">&quot;GET&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Controller)</span></span> Post() &#123;</span><br><span class="line">	fmt.Print(<span class="string">&quot;POST&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;test&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123;</span><br><span class="line">	test.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *T)</span></span> Get() &#123;</span><br><span class="line">	<span class="comment">//new(test.Controller).Get()</span></span><br><span class="line">	fmt.Print(<span class="string">&quot;T&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *T)</span></span> Post() &#123;</span><br><span class="line">	fmt.Print(<span class="string">&quot;T&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> something test.Something</span><br><span class="line">	something = <span class="built_in">new</span>(T)</span><br><span class="line">	<span class="keyword">var</span> t T</span><br><span class="line">	t.M = <span class="number">1</span></span><br><span class="line">	<span class="comment">//	t.Controller.M = 1</span></span><br><span class="line">	something.Get()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Controllerå®ç°äº†æ‰€æœ‰çš„Somethingæ¥å£æ–¹æ³•ï¼Œå½“ç»“æ„ä½“Tä¸­è°ƒç”¨Controllerç»“æ„ä½“çš„æ—¶å€™ï¼ŒTå°±ç›¸å½“äºJavaä¸­çš„ç»§æ‰¿ï¼ŒTç»§æ‰¿äº†Controllerï¼Œå› æ­¤ï¼ŒTå¯ä»¥ä¸ç”¨é‡å†™æ‰€æœ‰çš„Somethingæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå› ä¸ºçˆ¶æ„é€ å™¨å·²ç»å®ç°äº†æ¥å£ã€‚</p>
<p>å¦‚æœControlleræ²¡æœ‰å®ç°Somethingæ¥å£æ–¹æ³•ï¼Œåˆ™Tè¦è°ƒç”¨Somethingä¸­æ–¹æ³•ï¼Œå°±è¦å®ç°å…¶æ‰€æœ‰æ–¹æ³•ã€‚</p>
<p>å¦‚æœ<code>something = new(test.Controller)</code>åˆ™è°ƒç”¨çš„æ˜¯Controllerä¸­çš„Getæ–¹æ³•ï¼ŒTå¯ä»¥ä½¿ç”¨Controllerç»“æ„ä½“ä¸­å®šä¹‰çš„å˜é‡</p>
<p>æ€»ä¹‹ï¼Œæ¥å£å¯¹è±¡ä¸èƒ½è°ƒç”¨æ¥å£å®ç°å¯¹è±¡çš„å±æ€§</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>typeå…³é”®å­—ä¸é”™è¯¯å¤„ç†</title>
    <url>/2023/06/09/Go/12/</url>
    <content><![CDATA[<h1 id="typeå…³é”®å­—"><a href="#typeå…³é”®å­—" class="headerlink" title="typeå…³é”®å­—"></a>typeå…³é”®å­—</h1><p>typeï¼šç”¨äºç±»å‹å®šä¹‰å’Œç±»å‹åˆ«å</p>
<ul>
<li>ç±»å‹å®šä¹‰ï¼štype ç±»å‹å Type</li>
<li>ç±»å‹åˆ«åï¼štype  ç±»å‹å &#x3D; Type</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i1 myint</span><br><span class="line">	<span class="keyword">var</span> i2 = <span class="number">100</span> <span class="comment">//int</span></span><br><span class="line">	i1 = <span class="number">200</span></span><br><span class="line">	fmt.Println(i1, i2)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> name mystr</span><br><span class="line">	name = <span class="string">&quot;ç‹äºŒç‹—&quot;</span></span><br><span class="line">	<span class="keyword">var</span> s1 <span class="type">string</span></span><br><span class="line">	s1 = <span class="string">&quot;æå°èŠ±&quot;</span></span><br><span class="line">	fmt.Println(name, s1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//i1 = i2 //cannot use i2 (type int) as type myint in assignment</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//name = s1 //cannot use s1 (type string) as type mystr in assignment</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%T,%T,%T\n&quot;</span>, i1, i2, name, s1) <span class="comment">//main.myint,int,main.mystr,string</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;----------------------------------&quot;</span>)</span><br><span class="line">	res1 := fun1()</span><br><span class="line">	fmt.Println(res1(<span class="number">10</span>, <span class="number">20</span>))</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;----------------------------------&quot;</span>)</span><br><span class="line">	<span class="keyword">var</span> i3 myint2</span><br><span class="line">	i3 = <span class="number">1000</span></span><br><span class="line">	fmt.Println(i3)</span><br><span class="line">	i3 = i2</span><br><span class="line">	fmt.Println(i3)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%T,%T\n&quot;</span>, i1, i2, i3) <span class="comment">//main.myint,int,int</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.å®šä¹‰ä¸€ä¸ªæ–°çš„ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> myint <span class="type">int</span></span><br><span class="line"><span class="keyword">type</span> mystr <span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.å®šä¹‰å‡½æ•°ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> myfun <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span></span> <span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun1</span><span class="params">()</span></span> myfun &#123; <span class="comment">//fun1()å‡½æ•°çš„è¿”å›å€¼æ˜¯myfunç±»å‹</span></span><br><span class="line">	fun := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">		s := strconv.Itoa(a) + strconv.Itoa(b)</span><br><span class="line">		<span class="keyword">return</span> s</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> fun</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.ç±»å‹åˆ«å</span></span><br><span class="line"><span class="keyword">type</span> myint2 = <span class="type">int</span> <span class="comment">//ä¸æ˜¯é‡æ–°å®šä¹‰æ–°çš„æ•°æ®ç±»å‹ï¼Œåªæ˜¯ç»™intèµ·åˆ«åï¼Œå’Œintå¯ä»¥é€šç”¨</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">200 100</span><br><span class="line">ç‹äºŒç‹— æå°èŠ±</span><br><span class="line">main.myint,int,main.mystr,string</span><br><span class="line">----------------------------------</span><br><span class="line">1020</span><br><span class="line">----------------------------------</span><br><span class="line">1000</span><br><span class="line">100</span><br><span class="line">main.myint,int,int</span><br></pre></td></tr></table></figure>

<p>å°½ç®¡ç±»å‹åˆ«åå¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨ç°æœ‰ç±»å‹ï¼Œä½†å®ƒä»¬ä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹ã€‚å› æ­¤ï¼Œæ— æ³•åœ¨ç±»å‹åˆ«åä¸Šå®šä¹‰æ–°æ–¹æ³•ã€‚åªæœ‰åœ¨æœ¬åœ°ç±»å‹ä¸Šæ‰èƒ½å®šä¹‰æ–°æ–¹æ³•ã€‚</p>
<p>é”™è¯¯ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyDuration = time.Duration</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m MyDuration)</span></span> SimpleSet() &#123; <span class="comment">//cannot define new methods on non-local type time.Duration</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¦ä¹ˆåœ¨timeåŒ…ä¸‹å®šä¹‰æ–°æ–¹æ³•ï¼Œè¦ä¹ˆå»ºä¸€ä¸ªæ–°çš„å‘½åç±»å‹ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç±»å‹åˆ«åã€‚</p>
<p>ä¿®æ­£ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyDuration time.Duration</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m MyDuration)</span></span> SimpleSet() &#123;</span><br><span class="line">	<span class="comment">// åœ¨è¿™é‡Œå®ç°SimpleSetæ–¹æ³•</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// åœ¨è¿™é‡Œä½¿ç”¨MyDurationç±»å‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ç»“æ„ä½“æˆå‘˜åµŒå…¥æ—¶ä½¿ç”¨åˆ«åï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> show() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Person---&gt;&quot;</span>, p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// People ç±»å‹åˆ«å</span></span><br><span class="line"><span class="keyword">type</span> People = Person</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p People)</span></span> show2() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;People---&gt;&quot;</span>, p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">//åµŒå…¥ä¸¤ä¸ªç»“æ„ä½“</span></span><br><span class="line">	Person</span><br><span class="line">	People</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s Student</span><br><span class="line">	<span class="comment">//s.name = &quot;ç‹äºŒç‹—&quot; //ambiguous selector s.name</span></span><br><span class="line">	s.Person.name = <span class="string">&quot;ç‹äºŒç‹—&quot;</span></span><br><span class="line">	<span class="comment">//s.show() //ambiguous selector s.show</span></span><br><span class="line">	s.Person.show()</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%T\n&quot;</span>, s.Person, s.People) <span class="comment">//main.Person,main.Person</span></span><br><span class="line"></span><br><span class="line">	s.People.name = <span class="string">&quot;æå°èŠ±&quot;</span></span><br><span class="line">	s.People.show2()</span><br><span class="line"></span><br><span class="line">	s.Person.show()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Person---&gt; ç‹äºŒç‹—</span><br><span class="line">main.Person,main.Person</span><br><span class="line">People---&gt; æå°èŠ±</span><br><span class="line">Person---&gt; ç‹äºŒç‹—</span><br></pre></td></tr></table></figure>

<h1 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h1><p>åœ¨å®é™…å·¥ç¨‹é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ç¨‹åºçš„é”™è¯¯ä¿¡æ¯å¿«é€Ÿå®šä½é—®é¢˜ï¼Œä½†æ˜¯åˆä¸å–œæ¬¢é”™è¯¯å¤„ç†ä»£ç å†™çš„å†—ä½™è€Œåˆå•°å—¦ã€‚Goè¯­è¨€æ²¡æœ‰æä¾›åƒJavaã€c#è¯­è¨€ä¸­çš„tryâ€¦catchå¼‚å¸¸å¤„ç†æ–¹å¼ï¼Œè€Œæ˜¯é€šè¿‡å‡½æ•°è¿”å›å€¼é€å±‚å¾€ä¸ŠæŠ›ã€‚è¿™ç§è®¾è®¡ï¼Œé¼“åŠ±å·¥ç¨‹å¸ˆåœ¨ä»£ç ä¸­æ˜¾å¼çš„æ£€æŸ¥é”™è¯¯ï¼Œè€Œéå¿½ç•¥é”™è¯¯ï¼Œå¥½å¤„å°±æ˜¯é¿å…æ¼æ‰æœ¬åº”å¤„ç†çš„é”™è¯¯ã€‚ä½†æ˜¯å¸¦æ¥ä¸€ä¸ªå¼Šç«¯,è®©ä»£ç å•°å—¦ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯é”™è¯¯"><a href="#ä»€ä¹ˆæ˜¯é”™è¯¯" class="headerlink" title="ä»€ä¹ˆæ˜¯é”™è¯¯"></a>ä»€ä¹ˆæ˜¯é”™è¯¯</h2><p>é”™è¯¯æ˜¯ä»€ä¹ˆ?<br>é”™è¯¯æŒ‡çš„æ˜¯å¯èƒ½å‡ºç°é—®é¢˜çš„åœ°æ–¹å‡ºç°äº†é—®é¢˜ã€‚æ¯”å¦‚æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶å¤±è´¥ï¼Œè¿™ç§æƒ…å†µåœ¨äººä»¬çš„æ„æ–™ä¹‹ä¸­ã€‚<br>è€Œå¼‚å¸¸æŒ‡çš„æ˜¯ä¸åº”è¯¥å‡ºç°é—®é¢˜çš„åœ°æ–¹å‡ºç°äº†é—®é¢˜ã€‚æ¯”å¦‚å¼•ç”¨äº†ç©ºæŒ‡é’ˆï¼Œè¿™ç§æƒ…å†µåœ¨äººä»¬çš„æ„æ–™ä¹‹å¤–ã€‚å¯è§ï¼Œé”™è¯¯æ˜¯ä¸šåŠ¡è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†,è€Œå¼‚å¸¸ä¸æ˜¯ã€‚<br>Goä¸­çš„é”™è¯¯ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ã€‚é”™è¯¯ç”¨å†…ç½®çš„errorç±»å‹è¡¨ç¤ºã€‚å°±åƒå…¶ä»–ç±»å‹çš„ï¼Œå¦‚intï¼Œfloat64ã€‚é”™è¯¯å€¼å¯ä»¥å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œä»å‡½æ•°ä¸­è¿”å›ï¼Œç­‰ç­‰ã€‚</p>
<h2 id="æ¼”ç¤ºé”™è¯¯"><a href="#æ¼”ç¤ºé”™è¯¯" class="headerlink" title="æ¼”ç¤ºé”™è¯¯"></a>æ¼”ç¤ºé”™è¯¯</h2><p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªç¤ºä¾‹ç¨‹åºå¼€å§‹,è¿™ä¸ªç¨‹åºå°è¯•æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ã€‚</p>
<p>ç¤ºä¾‹ä»£ç :</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f, err := os.Open(<span class="string">&quot;test.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//log.Fatal(err)</span></span><br><span class="line">		fmt.Println(err) <span class="comment">//open test.txt: no such file or directory</span></span><br><span class="line">		<span class="keyword">if</span> ins, ok := err.(*os.PathError); ok &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;1.Op:&quot;</span>, ins.Op)</span><br><span class="line">			fmt.Println(<span class="string">&quot;2.Path:&quot;</span>, ins.Path)</span><br><span class="line">			fmt.Println(<span class="string">&quot;3.Err:&quot;</span>, ins.Err)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(f.Name(), <span class="string">&quot;æ‰“å¼€æ–‡ä»¶æˆåŠŸã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">open test.txt: The system cannot find the file specified.</span><br><span class="line">1.Op: open</span><br><span class="line">2.Path: test.txt</span><br><span class="line">3.Err: The system cannot find the file specified.</span><br></pre></td></tr></table></figure>

<p>è¿™è¡Œä»£ç å°è¯•å°†é”™è¯¯å€¼ <code>err</code> è½¬æ¢ä¸º <code>*os.PathError</code> ç±»å‹ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨å˜é‡ <code>ins</code> ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªç±»å‹æ–­è¨€çš„ç¤ºä¾‹ï¼Œå®ƒæ£€æŸ¥é”™è¯¯ç±»å‹æ˜¯å¦æ˜¯ <code>*os.PathError</code>ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ <code>ok</code> è¡¨ç¤ºæ˜¯å¦æˆåŠŸè¿›è¡Œäº†ç±»å‹è½¬æ¢ã€‚å¦‚æœç±»å‹æ–­è¨€æˆåŠŸï¼Œè¿™äº›ä»£ç å°†æ‰“å° <code>*os.PathError</code> ç±»å‹çš„ç‰¹å®šå­—æ®µä¿¡æ¯ã€‚<code>Op</code> å­—æ®µè¡¨ç¤ºæ“ä½œç±»å‹ï¼Œ<code>Path</code> å­—æ®µè¡¨ç¤ºæ“ä½œçš„è·¯å¾„ï¼Œ<code>Err</code> å­—æ®µè¡¨ç¤ºåº•å±‚é”™è¯¯ã€‚</p>
<h2 id="è‡ªå®šä¹‰å‡½æ•°è¿”å›é”™è¯¯"><a href="#è‡ªå®šä¹‰å‡½æ•°è¿”å›é”™è¯¯" class="headerlink" title="è‡ªå®šä¹‰å‡½æ•°è¿”å›é”™è¯¯"></a>è‡ªå®šä¹‰å‡½æ•°è¿”å›é”™è¯¯</h2><p>errorï¼šå†…ç½®çš„æ•°æ®ç±»å‹ï¼Œå†…ç½®çš„æ¥å£<br>å®šä¹‰æ–¹æ³•ï¼šError() string</p>
<p>ä½¿ç”¨goè¯­è¨€æä¾›å¥½çš„åŒ…ï¼š<br>errorsåŒ…ä¸‹çš„å‡½æ•°ï¼šNew()ï¼Œåˆ›å»ºä¸€ä¸ªerrorå¯¹è±¡ï¼ŒfmtåŒ…ä¸‹çš„Errorf()å‡½æ•°ï¼š<br>func Errorf(format string, a â€¦interface{}) error</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//1.åˆ›å»ºä¸€ä¸ªerroræ•°æ®</span></span><br><span class="line">	err1 := errors.New(<span class="string">&quot;è‡ªå·±åˆ›å»ºç©çš„ã€‚ã€‚&quot;</span>)</span><br><span class="line">	fmt.Println(err1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, err1) <span class="comment">//*errors.errorString</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.å¦ä¸€ä¸ªåˆ›å»ºerrorçš„æ–¹æ³•</span></span><br><span class="line">	err2 := fmt.Errorf(<span class="string">&quot;é”™è¯¯çš„ä¿¡æ¯ç :%d&quot;</span>, <span class="number">100</span>)</span><br><span class="line">	fmt.Println(err2)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, err2)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;-----------------&quot;</span>)</span><br><span class="line">	err3 := checkAge(<span class="number">-30</span>)</span><br><span class="line">	<span class="keyword">if</span> err3 != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err3)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;ç¨‹åºã€‚ã€‚ã€‚go onã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼šéªŒè¯å¹´é¾„æ˜¯å¦åˆæ³•ï¼Œå¦‚æœä¸ºè´Ÿæ•°ï¼Œå°±è¿”å›ä¸€ä¸ªerror</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkAge</span><span class="params">(age <span class="type">int</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> age &lt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="comment">//è¿”å›errorå¯¹è±¡</span></span><br><span class="line">		<span class="comment">//return errors.New(&quot;å¹´é¾„ä¸åˆæ³•&quot;)</span></span><br><span class="line">		err := fmt.Errorf(<span class="string">&quot;æ‚¨ç»™å®šçš„å¹´é¾„æ˜¯ï¼š%d,ä¸åˆæ³•&quot;</span>, age)</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;å¹´é¾„æ˜¯ï¼š&quot;</span>, age)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è‡ªå·±åˆ›å»ºç©çš„ã€‚ã€‚</span><br><span class="line">*errors.errorString</span><br><span class="line">é”™è¯¯çš„ä¿¡æ¯ç :100</span><br><span class="line">*errors.errorString</span><br><span class="line">-----------------</span><br><span class="line">æ‚¨ç»™å®šçš„å¹´é¾„æ˜¯ï¼š-30,ä¸åˆæ³•</span><br></pre></td></tr></table></figure>

<h2 id="é”™è¯¯çš„ç±»å‹è¡¨ç¤º"><a href="#é”™è¯¯çš„ç±»å‹è¡¨ç¤º" class="headerlink" title="é”™è¯¯çš„ç±»å‹è¡¨ç¤º"></a>é”™è¯¯çš„ç±»å‹è¡¨ç¤º</h2><ol>
<li></li>
</ol>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> ins, ok := err.(*os.PathError); ok &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;1.Op:&quot;</span>, ins.Op)</span><br><span class="line">			fmt.Println(<span class="string">&quot;2.Path:&quot;</span>, ins.Path)</span><br><span class="line">			fmt.Println(<span class="string">&quot;3.Err:&quot;</span>, ins.Err)</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>è·å¾—æ›´å¤šä¿¡æ¯çš„ç¬¬äºŒç§æ–¹æ³•æ˜¯æ–­è¨€åº•å±‚ç±»å‹ï¼Œå¹¶é€šè¿‡è°ƒç”¨structç±»å‹çš„æ–¹æ³•è·å–æ›´å¤šä¿¡æ¯ã€‚</li>
</ol>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;net&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	addr, err := net.LookupHost(<span class="string">&quot;www.baidu.com&quot;</span>)</span><br><span class="line">	fmt.Println(err)</span><br><span class="line">	<span class="keyword">if</span> ins, ok := err.(*net.DNSError); ok &#123;</span><br><span class="line">		<span class="keyword">if</span> ins.Timeout() &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;æ“ä½œè¶…æ—¶ã€‚ã€‚&quot;</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> ins.Temporary() &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;ä¸´æ—¶æ€§é”™è¯¯ã€‚ã€‚&quot;</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;é€šå¸¸é”™è¯¯ã€‚ã€‚&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(addr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;nil&gt;</span><br><span class="line">[182.61.200.6 182.61.200.7]</span><br></pre></td></tr></table></figure>

<p>3.ç›´æ¥æ¯”è¾ƒ<br>è·å¾—æ›´å¤šå…³äºé”™è¯¯çš„è¯¦ç»†ä¿¡æ¯çš„ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯ç›´æ¥ä¸ç±»å‹é”™è¯¯çš„å˜é‡è¿›è¡Œæ¯”è¾ƒã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£è¿™ä¸ªé—®é¢˜ã€‚<br>filepathåŒ…çš„Globå‡½æ•°ç”¨äºè¿”å›ä¸æ¨¡å¼åŒ¹é…çš„æ‰€æœ‰æ–‡ä»¶çš„åç§°ã€‚å½“æ¨¡å¼å‡ºç°é”™è¯¯æ—¶ï¼Œè¯¥å‡½æ•°å°†è¿”å›ä¸€ä¸ªé”™è¯¯ErrBadPatternã€‚<br>åœ¨filepathåŒ…ä¸­å®šä¹‰äº†ErrBadPatternï¼Œå¦‚ä¸‹æ‰€è¿°:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ErrBadPattern = errors.New(<span class="string">&quot;syntax error in pattern&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>errors.New()ç”¨äºåˆ›å»ºæ–°çš„é”™è¯¯ã€‚<br>å½“æ¨¡å¼å‡ºç°é”™è¯¯æ—¶,ç”±Globå‡½æ•°è¿”å›ErrBadPatternã€‚</p>
<p>è®©æˆ‘ä»¬å†™ä¸€ä¸ªå°ç¨‹åºæ¥æ£€æŸ¥è¿™ä¸ªé”™è¯¯:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;path/filepath&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	files, err := filepath.Glob(<span class="string">&quot;[&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &amp;&amp; err == filepath.ErrBadPattern &#123;</span><br><span class="line">		fmt.Println(err) <span class="comment">//syntax error in pattern</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;files:&quot;</span>, files)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">syntax error in pattern</span><br></pre></td></tr></table></figure>

<p>è®°ä½æ°¸è¿œä¸è¦å¿½ç•¥ä¸€ä¸ªé”™è¯¯ã€‚å¿½è§†é”™è¯¯ä¼šæ‹›è‡´éº»çƒ¦ã€‚</p>
<h2 id="è‡ªå®šä¹‰é”™è¯¯"><a href="#è‡ªå®šä¹‰é”™è¯¯" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯"></a>è‡ªå®šä¹‰é”™è¯¯</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	radius := <span class="number">-3.0</span></span><br><span class="line">	area, err := circleArea(radius)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">if</span> err, ok := err.(*areaError); ok &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;åŠå¾„æ˜¯ï¼š%.2f\n&quot;</span>, err.radius)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;åœ†å½¢çš„é¢ç§¯æ˜¯ï¼š&quot;</span>, area)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œè¡¨ç¤ºé”™è¯¯çš„ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> areaError <span class="keyword">struct</span> &#123;</span><br><span class="line">	msg    <span class="type">string</span></span><br><span class="line">	radius <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.å®ç°erroræ¥å£ï¼Œå°±æ˜¯å®ç°Error()æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *areaError)</span></span> Error() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;errorï¼šåŠå¾„ï¼Œ%.2fï¼Œ%s&quot;</span>, e.radius, e.msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">circleArea</span><span class="params">(radius <span class="type">float64</span>)</span></span> (<span class="type">float64</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> radius &lt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, &amp;areaError&#123;<span class="string">&quot;åŠå¾„æ˜¯éæ³•çš„&quot;</span>, radius&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> math.Pi * radius * radius, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">errorï¼šåŠå¾„ï¼Œ-3.00ï¼ŒåŠå¾„æ˜¯éæ³•çš„</span><br><span class="line">åŠå¾„æ˜¯ï¼š-3.00</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	length, width := <span class="number">-6.7</span>, <span class="number">-9.1</span></span><br><span class="line">	area, err := rectArea(length, width)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">if</span> err, ok := err.(*areaError); ok &#123;</span><br><span class="line">			<span class="keyword">if</span> err.legnthNegative() &#123;</span><br><span class="line">				fmt.Printf(<span class="string">&quot;errorï¼šé•¿åº¦ï¼Œ%.2fï¼Œå°äºé›¶\n&quot;</span>, err.length)</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> err.widthNegative() &#123;</span><br><span class="line">				fmt.Printf(<span class="string">&quot;errorï¼šå®½åº¦ï¼Œ%.2fï¼Œå°äºé›¶\n&quot;</span>, err.width)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;çŸ©å½¢çš„é¢ç§¯æ˜¯ï¼š&quot;</span>, area)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> areaError <span class="keyword">struct</span> &#123;</span><br><span class="line">	msg    <span class="type">string</span>  <span class="comment">//é”™è¯¯çš„æè¿°</span></span><br><span class="line">	length <span class="type">float64</span> <span class="comment">//å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼ŒçŸ©å½¢çš„é•¿åº¦</span></span><br><span class="line">	width  <span class="type">float64</span> <span class="comment">//å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼ŒçŸ©å½¢çš„å®½åº¦</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *areaError)</span></span> Error() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> e.msg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *areaError)</span></span> legnthNegative() <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> e.length &lt; <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *areaError)</span></span> widthNegative() <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> e.width &lt; <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rectArea</span><span class="params">(length, width <span class="type">float64</span>)</span></span> (<span class="type">float64</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	msg := <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="keyword">if</span> length &lt; <span class="number">0</span> &#123;</span><br><span class="line">		msg = <span class="string">&quot;é•¿åº¦å°äºé›¶&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> width &lt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> msg == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">			msg = <span class="string">&quot;å®½åº¦å°äºé›¶&quot;</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			msg += <span class="string">&quot;ï¼Œå®½åº¦ä¹Ÿå°äºé›¶&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> msg != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, &amp;areaError&#123;msg, length, width&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> length * width, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é•¿åº¦å°äºé›¶ï¼Œå®½åº¦ä¹Ÿå°äºé›¶</span><br><span class="line">errorï¼šé•¿åº¦ï¼Œ-6.70ï¼Œå°äºé›¶</span><br><span class="line">errorï¼šå®½åº¦ï¼Œ-9.10ï¼Œå°äºé›¶</span><br></pre></td></tr></table></figure>

<h2 id="panicå’Œrecover"><a href="#panicå’Œrecover" class="headerlink" title="panicå’Œrecover"></a>panicå’Œrecover</h2><p>Golangä¸­å¼•å…¥ä¸¤ä¸ªå†…ç½®å‡½æ•°panicå’Œrecoveræ¥è§¦å‘å’Œç»ˆæ­¢å¼‚å¸¸å¤„ç†æµç¨‹ï¼ŒåŒæ—¶å¼•å…¥å…³é”®å­—deferæ¥å»¶è¿Ÿæ‰§è¡Œdeferåé¢çš„å‡½æ•°ã€‚<br>ä¸€ç›´ç­‰åˆ°åŒ…å«deferè¯­å¥çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå»¶è¿Ÿå‡½æ•°(deferåçš„å‡½æ•°ï¼‰æ‰ä¼šè¢«æ‰§è¡Œï¼Œè€Œä¸ç®¡åŒ…å«deferè¯­å¥çš„å‡½æ•°æ˜¯é€šè¿‡returnçš„æ­£å¸¸ç»“æŸï¼Œè¿˜æ˜¯ç”±äºpanicå¯¼è‡´çš„å¼‚å¸¸ç»“æŸã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ‰§è¡Œå¤šæ¡deferè¯­å¥ï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºä¸å£°æ˜é¡ºåºç›¸åã€‚<br>å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œå¦‚æœé‡åˆ°å¼•ç”¨ç©ºæŒ‡é’ˆã€ä¸‹æ ‡è¶Šç•Œæˆ–æ˜¾å¼è°ƒç”¨panicå‡½æ•°ç­‰æƒ…å†µï¼Œåˆ™å…ˆè§¦å‘panicå‡½æ•°çš„æ‰§è¡Œï¼Œç„¶åè°ƒç”¨å»¶è¿Ÿå‡½æ•°ã€‚è°ƒç”¨è€…ç»§ç»­ä¼ é€’panicï¼Œå› æ­¤è¯¥è¿‡ç¨‹ä¸€ç›´åœ¨è°ƒç”¨æ ˆä¸­é‡å¤å‘ç”Ÿ:å‡½æ•°åœæ­¢æ‰§è¡Œï¼Œè°ƒç”¨å»¶è¿Ÿæ‰§è¡Œå‡½æ•°ç­‰ã€‚å¦‚æœä¸€è·¯åœ¨å»¶è¿Ÿå‡½æ•°ä¸­æ²¡æœ‰recoverå‡½æ•°çš„è°ƒç”¨ï¼Œåˆ™ä¼šåˆ°è¾¾è¯¥åç¨‹çš„èµ·ç‚¹ï¼Œè¯¥åç¨‹ç»“æŸï¼Œç„¶åç»ˆæ­¢å…¶ä»–æ‰€æœ‰åç¨‹,åŒ…æ‹¬ä¸»åç¨‹(ç±»ä¼¼äºCè¯­è¨€ä¸­çš„ä¸»çº¿ç¨‹,è¯¥åç¨‹IDä¸º1)ã€‚<br><strong>panic</strong>:</p>
<ol>
<li><p>å†…å»ºå‡½æ•°</p>
</li>
<li><p>å‡å¦‚å‡½æ•°Fä¸­ä¹¦å†™äº†panicè¯­å¥ï¼Œä¼šç»ˆæ­¢å…¶åè¦æ‰§è¡Œçš„ä»£ç ï¼Œåœ¨panicæ‰€åœ¨å‡½æ•°Få†…å¦‚æœå­˜åœ¨è¦æ‰§è¡Œçš„deferå‡½æ•°åˆ—è¡¨,æŒ‰ç…§deferçš„é€†åºæ‰§è¡Œ</p>
</li>
<li><p>è¿”å›å‡½æ•°Fçš„è°ƒç”¨è€…Gï¼Œåœ¨Gä¸­ï¼Œè°ƒç”¨å‡½æ•°Fè¯­å¥ä¹‹åçš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼Œå‡å¦‚å‡½æ•°Gä¸­å­˜åœ¨è¦æ‰§è¡Œçš„deferå‡½æ•°åˆ—è¡¨ï¼ŒæŒ‰ç…§deferçš„é€†åºæ‰§è¡Œï¼Œè¿™é‡Œçš„deferæœ‰ç‚¹ç±»ä¼¼ try-catch-finallyä¸­çš„finally</p>
</li>
<li><p>ç›´åˆ°goroutineæ•´ä¸ªé€€å‡ºï¼Œå¹¶æŠ¥å‘Šé”™è¯¯</p>
</li>
</ol>
<p><strong>recover</strong>:</p>
<ol>
<li>å†…å»ºå‡½æ•°</li>
<li>ç”¨æ¥æ§åˆ¶ä¸€ä¸ªgoroutineçš„panickingè¡Œä¸ºï¼Œæ•è·panicï¼Œä»è€Œå½±å“åº”ç”¨çš„è¡Œä¸º</li>
<li>ä¸€èˆ¬çš„è°ƒç”¨å»ºè®®<br>a).åœ¨deferå‡½æ•°ä¸­ï¼Œé€šè¿‡recoveræ¥ç»ˆæ­¢ä¸€ä¸ªgojroutineçš„panickingè¿‡ç¨‹ï¼Œä»è€Œæ¢å¤æ­£å¸¸ä»£ç çš„æ‰§è¡Œ<br>b).å¯ä»¥è·å–é€šè¿‡panicä¼ é€’çš„error</li>
</ol>
<p><em><strong>ç®€å•æ¥è®²: goä¸­å¯ä»¥æŠ›å‡ºä¸€ä¸ªpanicçš„å¼‚å¸¸ï¼Œç„¶ååœ¨deferä¸­é€šè¿‡recoveræ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œç„¶åæ­£å¸¸å¤„ç†</strong></em>ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">if</span> msg := <span class="built_in">recover</span>(); msg != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(msg, <span class="string">&quot;ç¨‹åºæ¢å¤å•¦ã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	funA()</span><br><span class="line">	<span class="keyword">defer</span> myprint(<span class="string">&quot;defer mainï¼š3.....&quot;</span>)</span><br><span class="line">	funB()</span><br><span class="line">	<span class="keyword">defer</span> myprint(<span class="string">&quot;defer mainï¼š4.....&quot;</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;main..overã€‚ã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myprint</span><span class="params">(s <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funA</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æˆ‘æ˜¯ä¸€ä¸ªå‡½æ•°funA()....&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funB</span><span class="params">()</span></span> &#123; <span class="comment">//å¤–å›´å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;æˆ‘æ˜¯å‡½æ•°funB()...&quot;</span>)</span><br><span class="line">	<span class="keyword">defer</span> myprint(<span class="string">&quot;defer funB()ï¼š1.....&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;i:&quot;</span>, i)</span><br><span class="line">		<span class="keyword">if</span> i == <span class="number">5</span> &#123;</span><br><span class="line">			<span class="comment">//è®©ç¨‹åºä¸­æ–­</span></span><br><span class="line">			<span class="built_in">panic</span>(<span class="string">&quot;funBå‡½æ•°ï¼Œææ…Œäº†&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="comment">//å½“å¤–å›´å‡½æ•°çš„ä»£ç ä¸­å‘ç”Ÿäº†è¿è¡Œææ…Œï¼Œåªæœ‰å…¶ä¸­æ‰€æœ‰çš„å·²ç»deferçš„å‡½æ•°å…¨éƒ¨éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥è¿è¡Œææ…Œæ‰ä¼šçœŸæ­£è¢«æ‰©å±•è‡³è°ƒç”¨å¤„ã€‚</span></span><br><span class="line">	<span class="keyword">defer</span> myprint(<span class="string">&quot;defer funB()ï¼š2.....&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æˆ‘æ˜¯ä¸€ä¸ªå‡½æ•°funA()....</span><br><span class="line">æˆ‘æ˜¯å‡½æ•°funB()...</span><br><span class="line">i: 1</span><br><span class="line">i: 2</span><br><span class="line">i: 3</span><br><span class="line">i: 4</span><br><span class="line">i: 5</span><br><span class="line">defer funB()ï¼š1.....</span><br><span class="line">defer mainï¼š3.....</span><br><span class="line">funBå‡½æ•°ï¼Œææ…Œäº† ç¨‹åºæ¢å¤å•¦ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<p>ç”±äºææ…Œå‘ç”Ÿåœ¨å¾ªç¯å†…éƒ¨ï¼Œä¹‹åçš„è¯­å¥å°†ä¸ä¼šæ‰§è¡Œã€‚ç„¶è€Œï¼Œä¹‹å‰å·²ç»è¢«<code>defer</code>å…³é”®å­—å»¶è¿Ÿæ‰§è¡Œçš„<code>myprint</code>å‡½æ•°ä»ç„¶ä¼šæ‰§è¡Œã€‚å› æ­¤ï¼Œâ€defer funB()ï¼š1â€¦..â€ä¼šè¢«è¾“å‡ºã€‚funBå‡½æ•°çš„æ‰§è¡Œå®Œæ¯•åï¼Œææ…Œä¼šè¢«ä¼ æ’­åˆ°è°ƒç”¨å¤„ï¼Œä¹Ÿå°±æ˜¯<code>main</code>å‡½æ•°ä¸­çš„åŒ¿åå‡½æ•°ã€‚åœ¨è¿™ä¸ªåŒ¿åå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>recover</code>å‡½æ•°æ£€æµ‹åˆ°äº†ææ…Œï¼Œæ‰€ä»¥ä¼šè¾“å‡ºææ…Œä¿¡æ¯ï¼šâ€funBå‡½æ•°ï¼Œææ…Œäº†â€ï¼Œå¹¶æ‰“å°â€ç¨‹åºæ¢å¤å•¦ã€‚ã€‚ã€‚â€ã€‚</p>
<p>é”™è¯¯å’Œå¼‚å¸¸ä»Golangæœºåˆ¶ä¸Šè®²ï¼Œå°±æ˜¯errorå’Œpanicçš„åŒºåˆ«ã€‚å¾ˆå¤šå…¶ä»–è¯­è¨€ä¹Ÿä¸€æ ·,<br>æ¯”C++&#x2F;Java,æ²¡æœ‰erroræœ‰errnoï¼Œæ²¡æœ‰panicä½†æœ‰throwã€‚<br>Golangé”™è¯¯å’Œå¼‚å¸¸æ˜¯å¯ä»¥äº’ç›¸è½¬æ¢çš„:<br>1ï¼é”™è¯¯è½¬å¼‚å¸¸ï¼Œæ¯”å¦‚ç¨‹åºé€»è¾‘ä¸Šå°è¯•è¯·æ±‚æŸä¸ªURLï¼Œæœ€å¤šå°è¯•ä¸‰æ¬¡ï¼Œå°è¯•ä¸‰æ¬¡çš„è¿‡ç¨‹ä¸­è¯·æ±‚å¤±è´¥æ˜¯é”™è¯¯ï¼Œå°è¯•å®Œç¬¬ä¸‰æ¬¡è¿˜ä¸æˆåŠŸçš„è¯ï¼Œå¤±è´¥å°±è¢«æå‡ä¸ºå¼‚å¸¸äº†ã€‚<br>2ï¼å¼‚å¸¸è½¬é”™è¯¯ï¼Œæ¯”å¦‚panicè§¦å‘çš„å¼‚å¸¸è¢«recoveræ¢å¤åï¼Œå°†è¿”å›å€¼ä¸­errorç±»å‹çš„å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œä»¥ä¾¿ä¸Šå±‚å‡½æ•°ç»§ç»­èµ°é”™è¯¯å¤„ç†æµç¨‹ã€‚</p>
<p>ä»€ä¹ˆæƒ…å†µä¸‹ç”¨é”™è¯¯è¡¨è¾¾ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨å¼‚å¸¸è¡¨è¾¾ï¼Œå°±å¾—æœ‰ä¸€å¥—è§„åˆ™ï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºç°ä¸€åˆ‡çš†é”™è¯¯æˆ–ä¸€åˆ‡çš†å¼‚å¸¸çš„æƒ…å†µã€‚<br>ä»¥ä¸‹ç»™å‡ºå¼‚å¸¸å¤„ç†çš„ä½œç”¨åŸŸ(åœºæ™¯)âˆ¶</p>
<blockquote>
<p>1ï¼ç©ºæŒ‡é’ˆå¼•ç”¨<br>2ï¼ä¸‹æ ‡è¶Šç•Œ<br>3ï¼é™¤æ•°ä¸º0<br>4ï¼ä¸åº”è¯¥å‡ºç°çš„åˆ†æ”¯ï¼Œæ¯”å¦‚default<br>5ï¼è¾“å…¥ä¸åº”è¯¥å¼•èµ·å‡½æ•°é”™è¯¯</p>
</blockquote>
<p>å…¶ä»–åœºæ™¯æˆ‘ä»¬ä½¿ç”¨é”™è¯¯å¤„ç†ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬çš„å‡½æ•°æ¥å£å¾ˆç²¾ç‚¼ã€‚å¯¹äºå¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨ä¸€ä¸ªåˆé€‚çš„ä¸Šæ¸¸å»recoverï¼Œå¹¶æ‰“å°å †æ ˆä¿¡æ¯ï¼Œä½¿å¾—éƒ¨ç½²åçš„ç¨‹åºä¸ä¼šç»ˆæ­¢ã€‚</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒ…çš„ä½¿ç”¨å’ŒtimeåŒ…</title>
    <url>/2023/06/10/Go/13/</url>
    <content><![CDATA[<h1 id="åŒ…çš„ä½¿ç”¨"><a href="#åŒ…çš„ä½¿ç”¨" class="headerlink" title="åŒ…çš„ä½¿ç”¨"></a>åŒ…çš„ä½¿ç”¨</h1><p>Goè¯­è¨€ä½¿ç”¨åŒ…ï¼ˆpackageï¼‰è¿™ç§è¯­æ³•å…ƒç´ æ¥ç»„ç»‡æºç ï¼Œæ‰€æœ‰è¯­æ³•å¯è§æ€§å‡å®šä¹‰åœ¨packageè¿™ä¸ªçº§åˆ«ï¼Œä¸Java ã€pythonç­‰è¯­è¨€ç›¸æ¯”ï¼Œè¿™ç®—ä¸ä¸Šä»€ä¹ˆåˆ›æ–°ï¼Œä½†ä¸Cä¼ ç»Ÿçš„includeç›¸æ¯”ï¼Œåˆ™æ˜¯æ˜¾å¾—â€œå…ˆè¿›â€äº†è®¸å¤šã€‚</p>
<p>Go è¯­è¨€çš„æºç å¤ç”¨å»ºç«‹åœ¨åŒ…ï¼ˆpackageï¼‰åŸºç¡€ä¹‹ä¸Šã€‚åŒ…é€šè¿‡ package, import, GOPATH æ“ä½œå®Œæˆã€‚</p>
<h2 id="mainåŒ…"><a href="#mainåŒ…" class="headerlink" title="mainåŒ…"></a>mainåŒ…</h2><p>Go è¯­è¨€çš„å…¥å£ main() å‡½æ•°æ‰€åœ¨çš„åŒ…ï¼ˆpackageï¼‰å« mainï¼Œmain åŒ…æƒ³è¦å¼•ç”¨åˆ«çš„ä»£ç ï¼Œéœ€è¦importå¯¼å…¥ï¼</p>
<h2 id="package"><a href="#package" class="headerlink" title="package"></a>package</h2><p>src ç›®å½•æ˜¯ä»¥ä»£ç åŒ…çš„å½¢å¼ç»„ç»‡å¹¶ä¿å­˜ Go æºç æ–‡ä»¶çš„ã€‚æ¯ä¸ªä»£ç åŒ…éƒ½å’Œ src ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ä¸€ä¸€å¯¹åº”ã€‚æ¯ä¸ªå­ç›®å½•éƒ½æ˜¯ä¸€ä¸ªä»£ç åŒ…ã€‚</p>
<blockquote>
<p>ä»£ç åŒ…åŒ…åå’Œæ–‡ä»¶ç›®å½•åï¼Œä¸è¦æ±‚ä¸€è‡´ã€‚æ¯”å¦‚æ–‡ä»¶ç›®å½•å« helloï¼Œä½†æ˜¯ä»£ç åŒ…åŒ…åå¯ä»¥å£°æ˜ä¸º â€œmainâ€ï¼Œä½†æ˜¯åŒä¸€ä¸ªç›®å½•ä¸‹çš„æºç æ–‡ä»¶ç¬¬ä¸€è¡Œå£°æ˜çš„æ‰€å±åŒ…ï¼Œå¿…é¡»ä¸€è‡´ï¼</p>
</blockquote>
<p>åŒä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰.goæ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ·»åŠ  åŒ…å®šä¹‰ï¼Œä»¥æ ‡è®°è¯¥æ–‡ä»¶å½’å±çš„åŒ…ï¼Œæ¼”ç¤ºè¯­æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> åŒ…å</span><br></pre></td></tr></table></figure>

<p>åŒ…éœ€è¦æ»¡è¶³ï¼š</p>
<ul>
<li>ä¸€ä¸ªç›®å½•ä¸‹çš„åŒçº§æ–‡ä»¶å½’å±ä¸€ä¸ªåŒ…ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒä¸€ä¸ªåŒ…ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶çš„packageåï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</li>
<li>åœ¨åŒä¸€ä¸ªåŒ…ä¸‹é¢çš„æ–‡ä»¶<code>package</code>åéƒ½å»ºè®®è®¾ä¸ºæ˜¯è¯¥ç›®å½•åï¼Œä½†ä¹Ÿå¯ä»¥ä¸æ˜¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒ…åå¯ä»¥ä¸å…¶ç›®å½•ä¸åŒåã€‚</li>
<li>åŒ…åä¸º main çš„åŒ…ä¸ºåº”ç”¨ç¨‹åºçš„å…¥å£åŒ…ï¼Œå…¶ä»–åŒ…ä¸èƒ½ä½¿ç”¨ã€‚</li>
</ul>
<blockquote>
<p>åœ¨åŒä¸€ä¸ªåŒ…ä¸‹é¢çš„æ–‡ä»¶å±äºåŒä¸€ä¸ªå·¥ç¨‹æ–‡ä»¶ï¼Œä¸ç”¨<code>import</code>åŒ…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</p>
</blockquote>
<p>åŒ…å¯ä»¥åµŒå¥—å®šä¹‰ï¼Œå¯¹åº”çš„å°±æ˜¯åµŒå¥—ç›®å½•ï¼Œä½†åŒ…ååº”è¯¥ä¸æ‰€åœ¨çš„ç›®å½•ä¸€è‡´ã€‚</p>
<p>åŒ…ä¸­ï¼Œé€šè¿‡æ ‡è¯†ç¬¦é¦–å­—æ¯æ˜¯å¦å¤§å†™ï¼Œæ¥ç¡®å®šæ˜¯å¦å¯ä»¥è¢«å¯¼å‡ºã€‚é¦–å­—æ¯å¤§å†™æ‰å¯ä»¥è¢«å¯¼å‡ºï¼Œè§†ä¸º public å…¬å…±çš„èµ„æºã€‚</p>
<h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><p>è¦å¼•ç”¨å…¶ä»–åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ import å…³é”®å­—ï¼Œå¯ä»¥å•ä¸ªå¯¼å…¥æˆ–è€…æ‰¹é‡å¯¼å…¥ï¼Œè¯­æ³•æ¼”ç¤ºï¼š</p>
<p>Aï¼šé€šå¸¸å¯¼å…¥</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å•ä¸ªå¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;package&quot;</span></span><br><span class="line"><span class="comment">// æ‰¹é‡å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;package1&quot;</span></span><br><span class="line">  <span class="string">&quot;package2&quot;</span></span><br><span class="line">  )</span><br></pre></td></tr></table></figure>

<p>Bï¼šç‚¹æ“ä½œ<br>æˆ‘ä»¬æœ‰æ—¶å€™ä¼šçœ‹åˆ°å¦‚ä¸‹çš„æ–¹å¼å¯¼å…¥åŒ…</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>(</span><br><span class="line">	. <span class="string">&quot;fmt&quot;</span></span><br><span class="line">) </span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªç‚¹æ“ä½œçš„å«ä¹‰å°±æ˜¯è¿™ä¸ªåŒ…å¯¼å…¥ä¹‹ååœ¨ä½ è°ƒç”¨è¿™ä¸ªåŒ…çš„å‡½æ•°æ—¶ï¼Œä½ å¯ä»¥çœç•¥å‰ç¼€çš„åŒ…åã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	. <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> S <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s S)</span></span> p(n <span class="type">int</span>) S &#123;</span><br><span class="line">	Print(n)</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s S</span><br><span class="line">	<span class="keyword">defer</span> s.p(<span class="number">1</span>).p(<span class="number">2</span>)</span><br><span class="line">	Print(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Cï¼šèµ·åˆ«å</p>
<p>åˆ«åæ“ä½œé¡¾åæ€ä¹‰æˆ‘ä»¬å¯ä»¥æŠŠåŒ…å‘½åæˆå¦ä¸€ä¸ªæˆ‘ä»¬ç”¨èµ·æ¥å®¹æ˜“è®°å¿†çš„åå­—ã€‚å¯¼å…¥æ—¶ï¼Œå¯ä»¥ä¸ºåŒ…å®šä¹‰åˆ«åï¼Œè¯­æ³•æ¼”ç¤ºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  p1 <span class="string">&quot;package1&quot;</span></span><br><span class="line">  p2 <span class="string">&quot;package2&quot;</span></span><br><span class="line">  )</span><br><span class="line"><span class="comment">// ä½¿ç”¨æ—¶ï¼šåˆ«åæ“ä½œï¼Œè°ƒç”¨åŒ…å‡½æ•°æ—¶å‰ç¼€å˜æˆäº†æˆ‘ä»¬çš„å‰ç¼€</span></span><br><span class="line">p1.Method()</span><br></pre></td></tr></table></figure>

<p>Dï¼š_æ“ä½œ<br>å¦‚æœä»…ä»…éœ€è¦å¯¼å…¥åŒ…æ—¶æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œå¹¶ä¸éœ€è¦ä½¿ç”¨åŒ…å†…çš„å…¶ä»–å‡½æ•°ï¼Œå¸¸é‡ç­‰èµ„æºã€‚åˆ™å¯ä»¥åœ¨å¯¼å…¥åŒ…æ—¶ï¼ŒåŒ¿åå¯¼å…¥ã€‚</p>
<p>è¿™ä¸ªæ“ä½œç»å¸¸æ˜¯è®©å¾ˆå¤šäººè´¹è§£çš„ä¸€ä¸ªæ“ä½œç¬¦ï¼Œè¯·çœ‹ä¸‹é¢è¿™ä¸ªimportï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;database/sql&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">	_ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	db, err := sql.Open(<span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;root:@tcp(127.0.0.1:3306)/flask_meeting?charset=utf8mb4&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;é”™è¯¯ä¿¡æ¯&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;è¿æ¥æˆåŠŸ&quot;</span>, db)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>_æ“ä½œå…¶å®æ˜¯å¼•å…¥è¯¥åŒ…ï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨åŒ…é‡Œé¢çš„å‡½æ•°ï¼Œè€Œæ˜¯è°ƒç”¨äº†è¯¥åŒ…é‡Œé¢çš„initå‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿ä½œä¸ºåŒ…çš„åˆ«åï¼Œä¼šä»…ä»…æ‰§è¡Œinit()ã€‚</p>
<blockquote>
<p>å¯¼å…¥çš„åŒ…çš„è·¯å¾„åï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œæ¨èä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆèµ·å§‹äºå·¥ç¨‹æ ¹ç›®å½•ï¼‰ã€‚</p>
</blockquote>
<h2 id="GOPATHç¯å¢ƒå˜é‡"><a href="#GOPATHç¯å¢ƒå˜é‡" class="headerlink" title="GOPATHç¯å¢ƒå˜é‡"></a>GOPATHç¯å¢ƒå˜é‡</h2><p>importå¯¼å…¥æ—¶ï¼Œä¼šä»GOçš„å®‰è£…ç›®å½•ï¼ˆä¹Ÿå°±æ˜¯GOROOTç¯å¢ƒå˜é‡è®¾ç½®çš„ç›®å½•ï¼‰å’ŒGOPATHç¯å¢ƒå˜é‡è®¾ç½®çš„ç›®å½•ä¸­ï¼Œæ£€ç´¢ src&#x2F;package æ¥å¯¼å…¥åŒ…ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å¯¼å…¥å¤±è´¥ã€‚<br>GOROOTï¼Œå°±æ˜¯GOå†…ç½®çš„åŒ…æ‰€åœ¨çš„ä½ç½®ã€‚<br>GOPATHï¼Œå°±æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„åŒ…çš„ä½ç½®ã€‚</p>
<p>é€šå¸¸æˆ‘ä»¬åœ¨å¼€å‘Goé¡¹ç›®æ—¶ï¼Œè°ƒè¯•æˆ–è€…ç¼–è¯‘æ„å»ºæ—¶ï¼Œéœ€è¦è®¾ç½®GOPATHæŒ‡å‘æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ï¼Œç›®å½•ä¸­çš„srcç›®å½•ä¸­çš„åŒ…å°±å¯ä»¥è¢«å¯¼å…¥äº†ã€‚</p>
<h2 id="init-åŒ…åˆå§‹åŒ–"><a href="#init-åŒ…åˆå§‹åŒ–" class="headerlink" title="init() åŒ…åˆå§‹åŒ–"></a>init() åŒ…åˆå§‹åŒ–</h2><p>ä¸‹é¢æˆ‘ä»¬è¯¦ç»†çš„æ¥ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªå‡½æ•°ï¼šinit()ã€main() æ˜¯ go è¯­è¨€ä¸­çš„ä¿ç•™å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æºç ä¸­ï¼Œå®šä¹‰ init() å‡½æ•°ã€‚æ­¤å‡½æ•°ä¼šåœ¨åŒ…è¢«å¯¼å…¥æ—¶æ‰§è¡Œï¼Œä¾‹å¦‚å¦‚æœæ˜¯åœ¨ main ä¸­å¯¼å…¥åŒ…ï¼ŒåŒ…ä¸­å­˜åœ¨ init()ï¼Œé‚£ä¹ˆ init() ä¸­çš„ä»£ç ä¼šåœ¨ main() å‡½æ•°æ‰§è¡Œå‰æ‰§è¡Œï¼Œç”¨äºåˆå§‹åŒ–åŒ…æ‰€éœ€è¦çš„ç‰¹å®šèµ„æ–™ã€‚ä¾‹å¦‚ï¼š<br>åŒ…æºç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//src/userPackage/tool.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> userPackage</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">&quot;tool init&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸»å‡½æ•°æºç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//src/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;userPackage&quot;</span></span><br><span class="line">  )</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">&quot;main run&quot;</span>)</span><br><span class="line">  <span class="comment">// ä½¿ç”¨userPackage</span></span><br><span class="line">  userPackage.SomeFunc()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆè¾“å‡º â€œtool initâ€ï¼Œå†è¾“å‡º â€œmain runâ€ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬è¯¦ç»†çš„æ¥ä»‹ç»ä¸€ä¸‹init()ã€main() è¿™ä¸¤ä¸ªå‡½æ•°ã€‚åœ¨ go è¯­è¨€ä¸­çš„åŒºåˆ«å¦‚ä¸‹ï¼š<br>ç›¸åŒç‚¹ï¼š</p>
<p>ä¸¤ä¸ªå‡½æ•°åœ¨å®šä¹‰æ—¶ä¸èƒ½æœ‰ä»»ä½•çš„å‚æ•°å’Œè¿”å›å€¼ã€‚<br>è¯¥å‡½æ•°åªèƒ½ç”± go ç¨‹åºè‡ªåŠ¨è°ƒç”¨ï¼Œä¸å¯ä»¥è¢«å¼•ç”¨ã€‚</p>
<p>ä¸åŒç‚¹ï¼š</p>
<p>init å¯ä»¥åº”ç”¨äºä»»æ„åŒ…ä¸­ï¼Œä¸”å¯ä»¥é‡å¤å®šä¹‰å¤šä¸ªã€‚<br>main å‡½æ•°åªèƒ½ç”¨äº main åŒ…ä¸­ï¼Œä¸”åªèƒ½å®šä¹‰ä¸€ä¸ªã€‚</p>
<p>ä¸¤ä¸ªå‡½æ•°çš„æ‰§è¡Œé¡ºåºï¼š</p>
<p>åœ¨ main åŒ…ä¸­çš„ go æ–‡ä»¶é»˜è®¤æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚</p>
<ul>
<li><p>å¯¹åŒä¸€ä¸ª go æ–‡ä»¶çš„ init( ) è°ƒç”¨é¡ºåºæ˜¯ä»ä¸Šåˆ°ä¸‹çš„ã€‚</p>
</li>
<li><p>å¯¹åŒä¸€ä¸ª package ä¸­çš„ä¸åŒæ–‡ä»¶ï¼Œå°†æ–‡ä»¶åæŒ‰å­—ç¬¦ä¸²è¿›è¡Œâ€œä»å°åˆ°å¤§â€æ’åºï¼Œä¹‹åé¡ºåºè°ƒç”¨å„æ–‡ä»¶ä¸­çš„init()å‡½æ•°ã€‚</p>
</li>
<li><p>å¯¹äºä¸åŒçš„ packageï¼Œå¦‚æœä¸ç›¸äº’ä¾èµ–çš„è¯ï¼ŒæŒ‰ç…§ main åŒ…ä¸­ import çš„é¡ºåºè°ƒç”¨å…¶åŒ…ä¸­çš„ init() å‡½æ•°ã€‚</p>
</li>
<li><p>å¦‚æœ package å­˜åœ¨ä¾èµ–ï¼Œè°ƒç”¨é¡ºåºä¸ºæœ€åè¢«ä¾èµ–çš„æœ€å…ˆè¢«åˆå§‹åŒ–ï¼Œä¾‹å¦‚ï¼šå¯¼å…¥é¡ºåº main â€“&gt; A â€“&gt; B â€“&gt; Cï¼Œåˆ™åˆå§‹åŒ–é¡ºåºä¸º C â€“&gt; B â€“&gt; A â€“&gt; mainï¼Œä¸€æ¬¡æ‰§è¡Œå¯¹åº”çš„ init æ–¹æ³•ã€‚main åŒ…æ€»æ˜¯è¢«æœ€åä¸€ä¸ªåˆå§‹åŒ–ï¼Œå› ä¸ºå®ƒæ€»æ˜¯ä¾èµ–åˆ«çš„åŒ…</p>
</li>
</ul>
<p>é¿å…å‡ºç°å¾ªç¯ importï¼Œä¾‹å¦‚ï¼šA â€“&gt; B â€“&gt; C â€“&gt; Aã€‚</p>
<p>ä¸€ä¸ªåŒ…è¢«å…¶å®ƒå¤šä¸ªåŒ… importï¼Œä½†åªèƒ½è¢«åˆå§‹åŒ–ä¸€æ¬¡</p>
<h2 id="ç®¡ç†å¤–éƒ¨åŒ…"><a href="#ç®¡ç†å¤–éƒ¨åŒ…" class="headerlink" title="ç®¡ç†å¤–éƒ¨åŒ…"></a>ç®¡ç†å¤–éƒ¨åŒ…</h2><p>goå…è®¸importä¸åŒä»£ç åº“çš„ä»£ç ã€‚å¯¹äºimportè¦å¯¼å…¥çš„å¤–éƒ¨çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ go get å‘½ä»¤å–ä¸‹æ¥æ”¾åˆ°GOPATHå¯¹åº”çš„ç›®å½•ä¸­å»ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬æƒ³é€šè¿‡goè¯­è¨€è¿æ¥mysqlæ•°æ®åº“ï¼Œé‚£ä¹ˆéœ€è¦å…ˆä¸‹è½½mysqlçš„æ•°æ®åŒ…ï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go get github.com/go-sql-driver/mysql</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºgoè¯­è¨€æ¥è®²ï¼Œå…¶å®å¹¶ä¸å…³å¿ƒä½ çš„ä»£ç æ˜¯å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨çš„ï¼Œæ€»ä¹‹éƒ½åœ¨GOPATHé‡Œï¼Œä»»ä½•importåŒ…çš„è·¯å¾„éƒ½æ˜¯ä»GOPATHå¼€å§‹çš„ï¼›å”¯ä¸€çš„åŒºåˆ«ï¼Œå°±æ˜¯å†…éƒ¨ä¾èµ–çš„åŒ…æ˜¯å¼€å‘è€…è‡ªå·±å†™çš„ï¼Œå¤–éƒ¨ä¾èµ–çš„åŒ…æ˜¯go getä¸‹æ¥çš„ã€‚</p>
</blockquote>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡go install æ¥ç¼–è¯‘åŒ…æ–‡ä»¶ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªémainåŒ…åœ¨ç¼–è¯‘åä¼šç”Ÿæˆä¸€ä¸ª.aæ–‡ä»¶ï¼ˆåœ¨ä¸´æ—¶ç›®å½•ä¸‹ç”Ÿæˆï¼Œé™¤éä½¿ç”¨go installå®‰è£…åˆ°$GOROOTæˆ–$GOPATHä¸‹ï¼Œå¦åˆ™ä½ çœ‹ä¸åˆ°.aï¼‰ï¼Œç”¨äºåç»­å¯æ‰§è¡Œç¨‹åºé“¾æ¥ä½¿ç”¨ã€‚</p>
<p>æ¯”å¦‚Goæ ‡å‡†åº“ä¸­çš„åŒ…å¯¹åº”çš„æºç éƒ¨åˆ†è·¯å¾„åœ¨ï¼š$GOROOT&#x2F;srcï¼Œè€Œæ ‡å‡†åº“ä¸­åŒ…ç¼–è¯‘åçš„.aæ–‡ä»¶è·¯å¾„åœ¨$GOROOT&#x2F;pkg&#x2F;darwin_amd64ä¸‹ã€‚</p>
<ul>
<li>pkg ç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾é€šè¿‡ go install å‘½ä»¤å®‰è£…åçš„ä»£ç åŒ…çš„å½’æ¡£æ–‡ä»¶(.a æ–‡ä»¶)ã€‚å½’æ¡£æ–‡ä»¶çš„åå­—å°±æ˜¯ä»£ç åŒ…çš„åå­—ã€‚æ‰€æœ‰å½’æ¡£æ–‡ä»¶éƒ½ä¼šè¢«å­˜æ”¾åˆ°è¯¥ç›®å½•ä¸‹çš„å¹³å°ç›¸å…³ç›®å½•ä¸­ï¼Œå³åœ¨ <code>$GOPATH/pkg/$GOOS_$GOARCH</code> ä¸­ï¼ŒåŒæ ·ä»¥ä»£ç åŒ…ä¸ºç»„ç»‡å½¢å¼ã€‚</li>
</ul>
<h1 id="timeåŒ…"><a href="#timeåŒ…" class="headerlink" title="timeåŒ…"></a>timeåŒ…</h1><p>timeåŒ…ï¼š<br>       1å¹´&#x3D;365å¤©ï¼Œday<br>       1å¤©&#x3D;24å°æ—¶ï¼Œhour<br>       1å°æ—¶&#x3D;60åˆ†é’Ÿï¼Œminute<br>       1åˆ†é’Ÿ&#x3D;60ç§’ï¼Œsecond<br>       1ç§’é’Ÿ&#x3D;1000æ¯«ç§’ï¼Œmillisecond<br>       1æ¯«ç§’&#x3D;1000å¾®ç§’ï¼Œmicrosecondâ€“&gt;Î¼s<br>       1å¾®ç§’&#x3D;1000çº³ç§’ï¼Œnanosecondâ€“&gt;ns<br>       1çº³ç§’&#x3D;1000çš®ç§’ï¼Œpicosecondâ€“&gt;ps</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.è·å–å½“å‰çš„æ—¶é—´</span></span><br><span class="line">	t1 := time.Now()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, t1) <span class="comment">//time.Time</span></span><br><span class="line">	fmt.Println(t1)        <span class="comment">//2023-06-10 11:16:15.340273 +0800 CST m=+0.003384001</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.è·å–æŒ‡å®šçš„æ—¶é—´</span></span><br><span class="line">	t2 := time.Date(<span class="number">2008</span>, <span class="number">7</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">30</span>, <span class="number">28</span>, <span class="number">0</span>, time.Local)</span><br><span class="line">	fmt.Println(t2) <span class="comment">//2008-07-15 16:30:28 +0800 CST</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.time--&gt;stringä¹‹é—´çš„è½¬æ¢</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 t1.Format(&quot;æ ¼å¼æ¨¡æ¿&quot;)--&gt;string</span></span><br><span class="line"><span class="comment">		æ¨¡æ¿çš„æ—¥æœŸå¿…é¡»æ˜¯å›ºå®šï¼š06-1-2-3-4-5</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	s1 := t1.Format(<span class="string">&quot;2006-1-2 15:04:05&quot;</span>)</span><br><span class="line">	fmt.Println(s1) <span class="comment">//2023-6-10 11:16:15</span></span><br><span class="line"></span><br><span class="line">	s2 := t1.Format(<span class="string">&quot;2006/01/02&quot;</span>)</span><br><span class="line">	fmt.Println(s2) <span class="comment">//2023/06/10</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//string--&gt;time</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 time.Parse(&quot;æ¨¡æ¿&quot;,str)--&gt;time,err</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	s3 := <span class="string">&quot;1999å¹´10æœˆ10æ—¥&quot;</span> <span class="comment">//string</span></span><br><span class="line">	t3, err := time.Parse(<span class="string">&quot;2006å¹´01æœˆ02æ—¥&quot;</span>, s3)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;err:&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(t3)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, t3)</span><br><span class="line"></span><br><span class="line">	fmt.Println(t1.String())</span><br><span class="line"></span><br><span class="line">	<span class="comment">//4.æ ¹æ®å½“å‰æ—¶é—´ï¼Œè·å–æŒ‡å®šçš„å†…å®¹</span></span><br><span class="line">	year, month, day := t1.Date() <span class="comment">//å¹´ï¼Œæœˆï¼Œæ—¥</span></span><br><span class="line">	fmt.Println(year, month, day) <span class="comment">//2023 June 10</span></span><br><span class="line"></span><br><span class="line">	hour, min, sec := t1.Clock()</span><br><span class="line">	fmt.Println(hour, min, sec) <span class="comment">//æ—¶ï¼Œåˆ†ï¼Œç§’</span></span><br><span class="line"></span><br><span class="line">	year2 := t1.Year()</span><br><span class="line">	fmt.Println(<span class="string">&quot;å¹´ï¼š&quot;</span>, year2)</span><br><span class="line">	fmt.Println(t1.YearDay())</span><br><span class="line"></span><br><span class="line">	month2 := t1.Month()</span><br><span class="line">	fmt.Println(<span class="string">&quot;æœˆï¼š&quot;</span>, month2)</span><br><span class="line">	fmt.Println(<span class="string">&quot;æ—¥ï¼š&quot;</span>, t1.Day())</span><br><span class="line">	fmt.Println(<span class="string">&quot;æ—¶ï¼š&quot;</span>, t1.Hour())</span><br><span class="line">	fmt.Println(<span class="string">&quot;åˆ†é’Ÿï¼š&quot;</span>, t1.Minute())</span><br><span class="line">	fmt.Println(<span class="string">&quot;ç§’ï¼š&quot;</span>, t1.Second())</span><br><span class="line">	fmt.Println(<span class="string">&quot;çº³ç§’ï¼š&quot;</span>, t1.Nanosecond())</span><br><span class="line"></span><br><span class="line">	fmt.Println(t1.Weekday()) <span class="comment">//Wednesday</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//5.æ—¶é—´æˆ³ï¼šæŒ‡å®šçš„æ—¥æœŸï¼Œè·ç¦»1970å¹´1æœˆ1æ—¥0ç‚¹0æ—¶0åˆ†0ç§’çš„æ—¶é—´å·®å€¼ï¼šç§’ï¼Œçº³ç§’</span></span><br><span class="line"></span><br><span class="line">	t4 := time.Date(<span class="number">1970</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, time.UTC)</span><br><span class="line">	timeStamp1 := t4.Unix() <span class="comment">//ç§’çš„å·®å€¼</span></span><br><span class="line">	fmt.Println(timeStamp1)</span><br><span class="line">	timeStamp2 := t1.Unix()</span><br><span class="line">	fmt.Println(timeStamp2)</span><br><span class="line"></span><br><span class="line">	timeStamp3 := t4.UnixNano()</span><br><span class="line">	fmt.Println(timeStamp3) <span class="comment">//3600 000 000 000</span></span><br><span class="line">	timeStamp4 := t1.UnixNano()</span><br><span class="line">	fmt.Println(timeStamp4)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//6.æ—¶é—´é—´éš”</span></span><br><span class="line">	t5 := t1.Add(time.Minute)</span><br><span class="line">	fmt.Println(t1)</span><br><span class="line">	fmt.Println(t5)</span><br><span class="line">	fmt.Println(t1.Add(<span class="number">24</span> * time.Hour))</span><br><span class="line"></span><br><span class="line">	t6 := t1.AddDate(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	fmt.Println(t6)</span><br><span class="line"></span><br><span class="line">	d1 := t5.Sub(t1)</span><br><span class="line">	fmt.Println(d1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//7.ç¡çœ </span></span><br><span class="line">	time.Sleep(<span class="number">3</span> * time.Second) <span class="comment">//è®©å½“å‰çš„ç¨‹åºè¿›å…¥ç¡çœ çŠ¶æ€</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;mainã€‚ã€‚ã€‚overã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ç¡çœ [1-10]çš„éšæœºç§’æ•°</span></span><br><span class="line">	rand.Seed(time.Now().UnixNano())</span><br><span class="line">	randNum := rand.Intn(<span class="number">10</span>) + <span class="number">1</span> <span class="comment">//int</span></span><br><span class="line">	fmt.Println(randNum)</span><br><span class="line">	time.Sleep(time.Duration(randNum) * time.Second)</span><br><span class="line">	fmt.Println(<span class="string">&quot;ç¡é†’äº†ã€‚ã€‚&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">time.Time</span><br><span class="line">2023-06-10 11:24:17.1424817 +0800 CST m=+0.003008901</span><br><span class="line">2008-07-15 16:30:28 +0800 CST</span><br><span class="line">2023-6-10 11:24:17</span><br><span class="line">2023/06/10</span><br><span class="line">1999-10-10 00:00:00 +0000 UTC</span><br><span class="line">time.Time</span><br><span class="line">2023-06-10 11:24:17.1424817 +0800 CST m=+0.003008901</span><br><span class="line">2023 June 10</span><br><span class="line">11 24 17</span><br><span class="line">å¹´ï¼š 2023</span><br><span class="line">161</span><br><span class="line">æœˆï¼š June</span><br><span class="line">æ—¥ï¼š 10</span><br><span class="line">æ—¶ï¼š 11</span><br><span class="line">åˆ†é’Ÿï¼š 24</span><br><span class="line">ç§’ï¼š 17</span><br><span class="line">çº³ç§’ï¼š 142481700</span><br><span class="line">Saturday</span><br><span class="line">3600</span><br><span class="line">1686367457</span><br><span class="line">3600000000000</span><br><span class="line">1686367457142481700</span><br><span class="line">2023-06-10 11:24:17.1424817 +0800 CST m=+0.003008901</span><br><span class="line">2023-06-10 11:25:17.1424817 +0800 CST m=+60.003008901</span><br><span class="line">2023-06-11 11:24:17.1424817 +0800 CST m=+86400.003008901</span><br><span class="line">2024-06-10 11:24:17.1424817 +0800 CST</span><br><span class="line">1m0s</span><br><span class="line">mainã€‚ã€‚ã€‚overã€‚ã€‚ã€‚ã€‚ã€‚</span><br><span class="line">7</span><br><span class="line">ç¡é†’äº†ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h1 id="json"><a href="#json" class="headerlink" title="json"></a>json</h1><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> userInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="type">string</span></span><br><span class="line">	Age   <span class="type">int</span> <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">	Hobby []<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := userInfo&#123;Name: <span class="string">&quot;wang&quot;</span>, Age: <span class="number">18</span>, Hobby: []<span class="type">string</span>&#123;<span class="string">&quot;Golang&quot;</span>, <span class="string">&quot;TypeScript&quot;</span>&#125;&#125;</span><br><span class="line">	buf, err := json.Marshal(a)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(buf)         <span class="comment">// [123 34 78 97...]</span></span><br><span class="line">	fmt.Println(<span class="type">string</span>(buf)) <span class="comment">// &#123;&quot;Name&quot;:&quot;wang&quot;,&quot;age&quot;:18,&quot;Hobby&quot;:[&quot;Golang&quot;,&quot;TypeScript&quot;]&#125;</span></span><br><span class="line"></span><br><span class="line">	buf, err = json.MarshalIndent(a, <span class="string">&quot;&quot;</span>, <span class="string">&quot;\t&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="type">string</span>(buf))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b userInfo</span><br><span class="line">	err = json.Unmarshal(buf, &amp;b)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, b) <span class="comment">// main.userInfo&#123;Name:&quot;wang&quot;, Age:18, Hobby:[]string&#123;&quot;Golang&quot;, &quot;TypeScript&quot;&#125;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[123 34 78 97 109 101 34 58 34 119 97 110 103 34 44 34 97 103 101 34 58 49 56 44 34 72 111 98 98 121 34 58 91 34 71 111 108 97 110 103 34 44 34 84 121 112 101 83 99 114 105 112 116 34 93 125]</span><br><span class="line">&#123;&quot;Name&quot;:&quot;wang&quot;,&quot;age&quot;:18,&quot;Hobby&quot;:[&quot;Golang&quot;,&quot;TypeScript&quot;]&#125;</span><br><span class="line">&#123;</span><br><span class="line">	&quot;Name&quot;: &quot;wang&quot;,</span><br><span class="line">	&quot;age&quot;: 18,</span><br><span class="line">	&quot;Hobby&quot;: [</span><br><span class="line">		&quot;Golang&quot;,</span><br><span class="line">		&quot;TypeScript&quot;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br><span class="line">main.userInfo&#123;Name:&quot;wang&quot;, Age:18, Hobby:[]string&#123;&quot;Golang&quot;, &quot;TypeScript&quot;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<p>ä»£ç å®šä¹‰äº†ä¸€ä¸ª userInfo ç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“å…·æœ‰ä¸‰ä¸ªå­—æ®µï¼šNameã€Age å’Œ Hobbyï¼Œåˆ†åˆ«è¡¨ç¤ºç”¨æˆ·åã€å¹´é¾„å’Œå…´è¶£çˆ±å¥½ã€‚Age å­—æ®µä½¿ç”¨ <code>json:&quot;age&quot;</code> çš„æ ‡ç­¾ï¼ŒæŒ‡ç¤ºåœ¨ JSON åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œå°†å…¶<code>æ˜ å°„åˆ°åä¸º age çš„å­—æ®µ</code>ã€‚<br>åœ¨ main å‡½æ•°ä¸­ï¼Œé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª userInfo ç»“æ„ä½“å®ä¾‹ aï¼Œèµ‹äºˆäº†ç›¸åº”çš„å­—æ®µå€¼ã€‚ç„¶åä½¿ç”¨ json.Marshal å°†ç»“æ„ä½“å®ä¾‹ a åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²ï¼Œå¾—åˆ°ä¸€ä¸ª<code>å­—èŠ‚æ•°ç»„ buf</code>ã€‚fmt.Println(buf) æ‰“å°äº†å­—èŠ‚æ•°ç»„çš„å†…å®¹ï¼Œç”±äºæ˜¯å­—èŠ‚çš„ ASCII è¡¨ç¤ºï¼Œæ‰€ä»¥ä¼šæ‰“å°ä¸€ç³»åˆ—æ•°å­—ã€‚æ¥ç€ä½¿ç”¨ fmt.Println(string(buf)) å°†å­—èŠ‚æ•°ç»„<code>è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶æ‰“å°</code>ï¼Œå¾—åˆ° JSON æ ¼å¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ json.MarshalIndent è¿›è¡Œæ ¼å¼åŒ–åºåˆ—åŒ–ï¼Œç”Ÿæˆ<code>å¸¦ç¼©è¿›çš„ JSON å­—ç¬¦ä¸²</code>ï¼Œå¹¶å°†å…¶æ‰“å°å‡ºæ¥ã€‚ç„¶åï¼Œå®šä¹‰äº†ä¸€ä¸ªç©ºçš„ userInfo ç»“æ„ä½“å˜é‡ bï¼Œä½¿ç”¨ json.Unmarshal å°† JSON å­—ç¬¦ä¸² buf ååºåˆ—åŒ–ä¸ºç»“æ„ä½“å®ä¾‹ bã€‚ååºåˆ—åŒ–çš„ç»“æœå­˜å‚¨åœ¨ b ä¸­ã€‚<code>%#v </code>ç”¨äºæ‰“å°å˜é‡ b çš„è¯¦ç»†ä¿¡æ¯ã€‚å®ƒä¼šæ‰“å°å‡ºç»“æ„ä½“ç±»å‹çš„åç§°ä»¥åŠå­—æ®µçš„åç§°å’Œå¯¹åº”çš„å€¼ã€‚è¿™ç§æ ¼å¼åŒ–è¾“å‡ºå¯¹äºè°ƒè¯•å’Œç†è§£å˜é‡çš„ç»“æ„éå¸¸æœ‰ç”¨ã€‚</p>
<h1 id="env"><a href="#env" class="headerlink" title="env"></a>env</h1><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;os/exec&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	fmt.Println(os.Args)</span><br><span class="line">	fmt.Println(os.Getenv(<span class="string">&quot;PATH&quot;</span>))</span><br><span class="line">	fmt.Println(os.Setenv(<span class="string">&quot;AA&quot;</span>, <span class="string">&quot;BB&quot;</span>))</span><br><span class="line"></span><br><span class="line">	buf, err := exec.Command(<span class="string">&quot;grep&quot;</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="string">&quot;/etc/hosts&quot;</span>).CombinedOutput()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="type">string</span>(buf))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<p>åœ¨ main å‡½æ•°ä¸­ï¼Œé¦–å…ˆä½¿ç”¨ fmt.Println(os.Args) æ‰“å°å‡ºç¨‹åºæ¥æ”¶åˆ°çš„å‘½ä»¤è¡Œå‚æ•°ã€‚os.Args æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ŒåŒ…å«äº†ç¨‹åºè¿è¡Œæ—¶ä¼ é€’çš„å‘½ä»¤è¡Œå‚æ•°ã€‚<br>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ os.Getenv(â€œPATHâ€) è·å–åä¸º â€œPATHâ€ çš„ç¯å¢ƒå˜é‡çš„å€¼ï¼Œå¹¶ä½¿ç”¨ fmt.Println æ‰“å°å‡ºæ¥ã€‚os.Getenv å‡½æ•°ç”¨äºè·å–ç¯å¢ƒå˜é‡çš„å€¼ã€‚<br>ç„¶åï¼Œä½¿ç”¨ os.Setenv(â€œAAâ€, â€œBBâ€) å°†åä¸º â€œAAâ€ çš„ç¯å¢ƒå˜é‡çš„å€¼è®¾ç½®ä¸º â€œBBâ€ã€‚os.Setenv å‡½æ•°ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡çš„å€¼ã€‚æœ€åï¼Œä½¿ç”¨ exec.Command å‡½æ•°åˆ›å»ºä¸€ä¸ªå‘½ä»¤å¯¹è±¡ï¼Œå¹¶æŒ‡å®šè¦æ‰§è¡Œçš„å‘½ä»¤ä¸º â€œgrepâ€ï¼Œå‚æ•°ä¸º â€œ127.0.0.1â€ å’Œ â€œ&#x2F;etc&#x2F;hostsâ€ã€‚ç„¶åï¼Œä½¿ç”¨ CombinedOutput æ–¹æ³•æ‰§è¡Œå‘½ä»¤å¹¶æ•è·å‘½ä»¤çš„è¾“å‡ºç»“æœï¼ˆåŒ…æ‹¬æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ï¼‰ã€‚æ•è·çš„è¾“å‡ºç»“æœå­˜å‚¨åœ¨ buf å˜é‡ä¸­ã€‚å¦‚æœæ‰§è¡Œå‘½ä»¤è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä»£ç ä¼šä½¿ç”¨ panic å‡½æ•°æŠ›å‡ºå¼‚å¸¸ã€‚æœ€åï¼Œä½¿ç”¨ fmt.Println(string(buf)) æ‰“å°å‡ºå‘½ä»¤çš„è¾“å‡ºç»“æœã€‚</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>è¡¥å……å‡½æ•°ä¸å­—ç¬¦ä¸²</title>
    <url>/2023/06/08/Go/11/</url>
    <content><![CDATA[<p>è¡¥å……å…³äºé—­åŒ…ï¼Œé€’å½’ï¼ŒåŒ¿åå‡½æ•°ï¼Œå›è°ƒå‡½æ•°ï¼ŒstringsåŒ…ã€strconvåŒ…çš„ä½¿ç”¨ã€‚</p>
<h1 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h1><p>goè¯­è¨€æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼š<br>æ”¯æŒå°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œä¹Ÿæ”¯æŒå°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<p>é—­åŒ…(closure)ï¼š<br> ä¸€ä¸ªå¤–å±‚å‡½æ•°ä¸­ï¼Œæœ‰å†…å±‚å‡½æ•°ï¼Œè¯¥å†…å±‚å‡½æ•°ä¸­ï¼Œä¼šæ“ä½œå¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡(å¤–å±‚å‡½æ•°ä¸­çš„å‚æ•°ï¼Œæˆ–è€…å¤–å±‚å‡½æ•°ä¸­ç›´æ¥å®šä¹‰çš„å˜é‡)ï¼Œå¹¶ä¸”è¯¥å¤–å±‚å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯è¿™ä¸ªå†…å±‚å‡½æ•°ã€‚è¿™ä¸ªå†…å±‚å‡½æ•°å’Œå¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œç»Ÿç§°ä¸ºé—­åŒ…ç»“æ„ã€‚</p>
<p>å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ­£å¸¸çš„å±€éƒ¨å˜é‡éšç€å‡½æ•°è°ƒç”¨è€Œåˆ›å»ºï¼Œéšç€å‡½æ•°çš„ç»“æŸè€Œé”€æ¯ã€‚<br>ä½†æ˜¯é—­åŒ…ç»“æ„ä¸­çš„å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡å¹¶ä¸ä¼šéšç€å¤–å±‚å‡½æ•°çš„ç»“æŸè€Œé”€æ¯ï¼Œå› ä¸ºå†…å±‚å‡½æ•°è¿˜è¦ç»§ç»­ä½¿ç”¨ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    res1 := increment()      <span class="comment">//res1 = fun</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, res1) <span class="comment">//func() int</span></span><br><span class="line">    fmt.Println(res1)</span><br><span class="line">    v1 := res1()</span><br><span class="line">    fmt.Println(v1) <span class="comment">//1</span></span><br><span class="line">    v2 := res1()</span><br><span class="line">    fmt.Println(v2) <span class="comment">//2</span></span><br><span class="line">    fmt.Println(res1())</span><br><span class="line">    fmt.Println(res1())</span><br><span class="line">    fmt.Println(res1())</span><br><span class="line">    fmt.Println(res1())</span><br><span class="line"></span><br><span class="line">    res2 := increment()</span><br><span class="line">    fmt.Println(res2)</span><br><span class="line">    v3 := res2()</span><br><span class="line">    fmt.Println(v3) <span class="comment">//1</span></span><br><span class="line">    fmt.Println(res2())</span><br><span class="line"></span><br><span class="line">    fmt.Println(res1())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123; <span class="comment">//å¤–å±‚å‡½æ•°</span></span><br><span class="line">    <span class="comment">//1.å®šä¹‰äº†ä¸€ä¸ªå±€éƒ¨å˜é‡</span></span><br><span class="line">    i := <span class="number">0</span></span><br><span class="line">    <span class="comment">//2.å®šä¹‰äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œç»™å˜é‡è‡ªå¢å¹¶è¿”å›</span></span><br><span class="line">    fun := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123; <span class="comment">//å†…å±‚å‡½æ•°</span></span><br><span class="line">       i++</span><br><span class="line">       <span class="keyword">return</span> i</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3.è¿”å›è¯¥åŒ¿åå‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> fun</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">func() int</span><br><span class="line">0xdbfd60</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">0xdbfd40</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">7</span><br></pre></td></tr></table></figure>

<h1 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h1><p>é€’å½’å‡½æ•°(recursion)ï¼šä¸€ä¸ªå‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œå°±å«åšé€’å½’å‡½æ•°ã€‚<br>ä¸€ä¸ªå‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œå°±å«åšé€’å½’è°ƒç”¨ï¼Œä¸€ä¸ªé€’å½’å‡½æ•°ä¸€å®šè¦æœ‰å‡ºå£ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	sum := getSum(<span class="number">5</span>)</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line"></span><br><span class="line">	res := getFibonacci(<span class="number">12</span>)</span><br><span class="line">	fmt.Println(res)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getFibonacci</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">1</span> || n == <span class="number">2</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> getFibonacci(n<span class="number">-1</span>) + getFibonacci(n<span class="number">-2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getSum</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;**********&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> getSum(n<span class="number">-1</span>) + n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">**********</span><br><span class="line">**********</span><br><span class="line">**********</span><br><span class="line">**********</span><br><span class="line">**********</span><br><span class="line">15</span><br><span class="line">144</span><br></pre></td></tr></table></figure>

<h1 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h1><p>åŒ¿åï¼šæ²¡æœ‰åå­—<br>åŒ¿åå‡½æ•°ï¼šæ²¡æœ‰åå­—çš„å‡½æ•°ã€‚</p>
<p>å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œç›´æ¥è¿›è¡Œè°ƒç”¨ã€‚é€šå¸¸åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°èµ‹å€¼ç»™æŸä¸ªå‡½æ•°å˜é‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥è°ƒç”¨å¤šæ¬¡äº†ã€‚</p>
<p>åŒ¿åå‡½æ•°ï¼š<br>Goè¯­è¨€æ˜¯æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼š</p>
<p>å°†åŒ¿åå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œå›è°ƒå‡½æ•°<br>å°†åŒ¿åå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œå¯ä»¥å½¢æˆé—­åŒ…ç»“æ„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fun1()</span><br><span class="line">	fun1()</span><br><span class="line">	fun2 := fun1</span><br><span class="line">	fun2()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åŒ¿åå‡½æ•°</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;æˆ‘æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ã€‚&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	fun3 := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;æˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ã€‚&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	fun3()</span><br><span class="line">	fun3()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å®šä¹‰å¸¦å‚æ•°çš„åŒ¿åå‡½æ•°</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">		fmt.Println(a, b)</span><br><span class="line">	&#125;(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å®šä¹‰å¸¦è¿”å›å€¼çš„åŒ¿åå‡½æ•°</span></span><br><span class="line">	res1 := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> a + b</span><br><span class="line">	&#125;(<span class="number">10</span>, <span class="number">20</span>) <span class="comment">//åŒ¿åå‡½æ•°è°ƒç”¨äº†ï¼Œå°†æ‰§è¡Œç»“æœç»™res1</span></span><br><span class="line">	fmt.Println(res1)</span><br><span class="line"></span><br><span class="line">	res2 := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> a + b</span><br><span class="line">	&#125; <span class="comment">//å°†åŒ¿åå‡½æ•°çš„å€¼ï¼Œèµ‹å€¼ç»™res2</span></span><br><span class="line">	fmt.Println(res2)</span><br><span class="line"></span><br><span class="line">	fmt.Println(res2(<span class="number">100</span>, <span class="number">200</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æˆ‘æ˜¯fun1()å‡½æ•°ã€‚ã€‚&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æˆ‘æ˜¯fun1()å‡½æ•°ã€‚ã€‚</span><br><span class="line">æˆ‘æ˜¯fun1()å‡½æ•°ã€‚ã€‚</span><br><span class="line">æˆ‘æ˜¯fun1()å‡½æ•°ã€‚ã€‚</span><br><span class="line">æˆ‘æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ã€‚</span><br><span class="line">æˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ã€‚</span><br><span class="line">æˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ã€‚</span><br><span class="line">1 2</span><br><span class="line">30</span><br><span class="line">0x63e160</span><br><span class="line">300</span><br></pre></td></tr></table></figure>

<h1 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h1><p>é«˜é˜¶å‡½æ•°ï¼š<br>æ ¹æ®goè¯­è¨€çš„æ•°æ®ç±»å‹çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚</p>
<p>fun1(),fun2()<br>å°†fun1å‡½æ•°ä½œä¸ºäº†fun2è¿™ä¸ªå‡½æ•°çš„å‚æ•°ã€‚</p>
<p>fun2å‡½æ•°ï¼šå°±å«é«˜é˜¶å‡½æ•°<br>æ¥æ”¶äº†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œé«˜é˜¶å‡½æ•°</p>
<p>fun1å‡½æ•°ï¼šå›è°ƒå‡½æ•°<br>ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°çš„å‡½æ•°ï¼Œå«åšå›è°ƒå‡½æ•°ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ±‚ä¸¤ä¸ªæ•´æ•°çš„åŠ å‡ä¹˜é™¤è¿ç®—</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, add)  <span class="comment">//func(int, int) int</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, oper) <span class="comment">//func(int, int, func(int, int) int) int</span></span><br><span class="line"></span><br><span class="line">	res1 := add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">	fmt.Println(res1)</span><br><span class="line"></span><br><span class="line">	res2 := oper(<span class="number">10</span>, <span class="number">20</span>, add)</span><br><span class="line">	fmt.Println(res2)</span><br><span class="line"></span><br><span class="line">	res3 := oper(<span class="number">5</span>, <span class="number">2</span>, sub)</span><br><span class="line">	fmt.Println(res3)</span><br><span class="line"></span><br><span class="line">	fun1 := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> a * b</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	res4 := oper(<span class="number">10</span>, <span class="number">4</span>, fun1)</span><br><span class="line">	fmt.Println(res4)</span><br><span class="line"></span><br><span class="line">	res5 := oper(<span class="number">100</span>, <span class="number">8</span>, <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> b == <span class="number">0</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸ºé›¶&quot;</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> a / b</span><br><span class="line">	&#125;)</span><br><span class="line">	fmt.Println(res5)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">oper</span><span class="params">(a, b <span class="type">int</span>, fun <span class="keyword">func</span>(<span class="type">int</span>, <span class="type">int</span>)</span></span> <span class="type">int</span>) <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Println(a, b, fun) <span class="comment">//æ‰“å°3ä¸ªå‚æ•°</span></span><br><span class="line">	res := fun(a, b)</span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ æ³•è¿ç®—</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sub</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">func(int, int) int</span><br><span class="line">func(int, int, func(int, int) int) int</span><br><span class="line">3</span><br><span class="line">10 20 0xb8fc20</span><br><span class="line">30</span><br><span class="line">5 2 0xb8fc40</span><br><span class="line">3</span><br><span class="line">10 4 0xb8fc60</span><br><span class="line">40</span><br><span class="line">100 8 0xb8fc80</span><br><span class="line">12</span><br></pre></td></tr></table></figure>

<h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><p>Goä¸­çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå­—èŠ‚çš„åˆ‡ç‰‡ã€‚<br>å¯ä»¥é€šè¿‡å°†å…¶å†…å®¹å°è£…åœ¨â€œâ€ä¸­æ¥åˆ›å»ºå­—ç¬¦ä¸²ã€‚Goä¸­çš„å­—ç¬¦ä¸²æ˜¯Unicodeå…¼å®¹çš„ï¼Œå¹¶ä¸”æ˜¯UTF-8ç¼–ç çš„ã€‚</p>
<p>å­—ç¬¦ä¸²æ˜¯ä¸€äº›å­—èŠ‚çš„é›†åˆã€‚ç†è§£ä¸ºä¸€ä¸ªå­—ç¬¦çš„åºåˆ—ã€‚<br>æ¯ä¸ªå­—ç¬¦éƒ½æœ‰å›ºå®šçš„ä½ç½®(ç´¢å¼•ï¼Œä¸‹æ ‡ï¼Œindexï¼šä»0å¼€å§‹ï¼Œåˆ°é•¿åº¦å‡1)<br>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//1.å®šä¹‰å­—ç¬¦ä¸²</span></span><br><span class="line">	s1 := <span class="string">&quot;helloä¸­å›½&quot;</span></span><br><span class="line">	s2 := <span class="string">`hello world`</span></span><br><span class="line">	fmt.Println(s1)</span><br><span class="line">	fmt.Println(s2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.å­—ç¬¦ä¸²çš„é•¿åº¦ï¼šè¿”å›çš„æ˜¯å­—èŠ‚çš„ä¸ªæ•°</span></span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(s1))</span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(s2))</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.è·å–æŸä¸ªå­—èŠ‚</span></span><br><span class="line">	fmt.Println(s2[<span class="number">0</span>]) <span class="comment">//è·å–å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå­—èŠ‚</span></span><br><span class="line">	a := <span class="string">&#x27;h&#x27;</span></span><br><span class="line">	b := <span class="number">104</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%c,%c,%c\n&quot;</span>, s2[<span class="number">0</span>], a, b)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//4.å­—ç¬¦ä¸²çš„éå†</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s2); i++ &#123;</span><br><span class="line">		<span class="comment">//fmt.Println(s2[i])</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;%c\t&quot;</span>, s2[i])</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//for range</span></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> s2 &#123;</span><br><span class="line">		<span class="comment">//fmt.Println(i,v)</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;%c&quot;</span>, v)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//5.å­—ç¬¦ä¸²æ˜¯å­—èŠ‚çš„é›†åˆ</span></span><br><span class="line">	slice1 := []<span class="type">byte</span>&#123;<span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>&#125;</span><br><span class="line">	s3 := <span class="type">string</span>(slice1) <span class="comment">//æ ¹æ®ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ï¼Œæ„å»ºå­—ç¬¦ä¸²</span></span><br><span class="line">	fmt.Println(s3)</span><br><span class="line"></span><br><span class="line">	s4 := <span class="string">&quot;abcdef&quot;</span></span><br><span class="line">	slice2 := []<span class="type">byte</span>(s4) <span class="comment">//æ ¹æ®å­—ç¬¦ä¸²ï¼Œè·å–å¯¹åº”çš„å­—èŠ‚åˆ‡ç‰‡</span></span><br><span class="line">	fmt.Println(slice2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//6.å­—ç¬¦ä¸²ä¸èƒ½ä¿®æ”¹</span></span><br><span class="line">	fmt.Println(s4)</span><br><span class="line">	<span class="comment">//s4[2] = &#x27;B&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">helloä¸­å›½</span><br><span class="line">hello world</span><br><span class="line">11</span><br><span class="line">11</span><br><span class="line">104</span><br><span class="line">h,h,h</span><br><span class="line">h       e       l       l       o               w       o       r       l      d</span><br><span class="line">hello world</span><br><span class="line">ABCDE</span><br><span class="line">[97 98 99 100 101 102]</span><br><span class="line">abcdef</span><br></pre></td></tr></table></figure>

<h2 id="stringsåŒ…"><a href="#stringsåŒ…" class="headerlink" title="stringsåŒ…"></a>stringsåŒ…</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">&quot;helloworld&quot;</span></span><br><span class="line">	<span class="comment">//1.æ˜¯å¦åŒ…å«æŒ‡å®šçš„å†…å®¹--&gt;bool</span></span><br><span class="line">	fmt.Println(strings.Contains(s1, <span class="string">&quot;abc&quot;</span>))</span><br><span class="line">	<span class="comment">//2.æ˜¯å¦åŒ…å«charsä¸­ä»»æ„çš„ä¸€ä¸ªå­—ç¬¦å³å¯</span></span><br><span class="line">	fmt.Println(strings.ContainsAny(s1, <span class="string">&quot;abcd&quot;</span>))</span><br><span class="line">	<span class="comment">//3.ç»Ÿè®¡substråœ¨sä¸­å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">	fmt.Println(strings.Count(s1, <span class="string">&quot;lloo&quot;</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">//4.ä»¥xxxå‰ç¼€å¼€å¤´ï¼Œä»¥xxxåç¼€ç»“å°¾</span></span><br><span class="line">	s2 := <span class="string">&quot;20230525è¯¾å ‚ç¬”è®°.txt&quot;</span></span><br><span class="line">	<span class="keyword">if</span> strings.HasPrefix(s2, <span class="string">&quot;202305&quot;</span>) &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;23å¹´5æœˆçš„æ–‡ä»¶ã€‚ã€‚&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> strings.HasSuffix(s2, <span class="string">&quot;.txt&quot;</span>) &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;æ–‡æœ¬æ–‡æ¡£ã€‚ã€‚&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ç´¢å¼•</span></span><br><span class="line">	<span class="comment">//helloworld</span></span><br><span class="line">	fmt.Println(strings.Index(s1, <span class="string">&quot;lloo&quot;</span>))     <span class="comment">//æŸ¥æ‰¾substråœ¨sä¸­çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨å°±è¿”å›-1</span></span><br><span class="line">	fmt.Println(strings.IndexAny(s1, <span class="string">&quot;abcdh&quot;</span>)) <span class="comment">//æŸ¥æ‰¾charsä¸­ä»»æ„çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå‡ºç°åœ¨sä¸­çš„ä½ç½®</span></span><br><span class="line">	fmt.Println(strings.LastIndex(s1, <span class="string">&quot;l&quot;</span>))    <span class="comment">//æŸ¥æ‰¾substråœ¨sä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//å­—ç¬¦ä¸²çš„æ‹¼æ¥</span></span><br><span class="line">	ss1 := []<span class="type">string</span>&#123;<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;world&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;ruby&quot;</span>&#125;</span><br><span class="line">	s3 := strings.Join(ss1, <span class="string">&quot;-&quot;</span>)</span><br><span class="line">	fmt.Println(s3)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆ‡å‰²</span></span><br><span class="line">	s4 := <span class="string">&quot;123,4563,aaa,49595,45&quot;</span></span><br><span class="line">	ss2 := strings.Split(s4, <span class="string">&quot;,&quot;</span>)	<span class="comment">//æ•°ç»„</span></span><br><span class="line">	<span class="comment">//fmt.Println(ss2)</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(ss2); i++ &#123;</span><br><span class="line">		fmt.Println(ss2[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//é‡å¤ï¼Œè‡ªå·±æ‹¼æ¥è‡ªå·±countæ¬¡</span></span><br><span class="line">	s5 := strings.Repeat(<span class="string">&quot;hello&quot;</span>, <span class="number">5</span>)</span><br><span class="line">	fmt.Println(s5)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ›¿æ¢</span></span><br><span class="line">	<span class="comment">//helloworld</span></span><br><span class="line">	s6 := strings.Replace(s1, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;*&quot;</span>, <span class="number">-1</span>)</span><br><span class="line">	fmt.Println(s6)</span><br><span class="line">	<span class="comment">//fmt.Println(strings.Repeat(&quot;hello&quot;,5))</span></span><br><span class="line"></span><br><span class="line">	s7 := <span class="string">&quot;heLLo WOrlD**123..&quot;</span></span><br><span class="line">	fmt.Println(strings.ToLower(s7))</span><br><span class="line">	fmt.Println(strings.ToUpper(s7))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		æˆªå–å­ä¸²ï¼š</span></span><br><span class="line"><span class="comment">		substring(start,end)--&gt;substr</span></span><br><span class="line"><span class="comment">		str[start:end]--&gt;substr</span></span><br><span class="line"><span class="comment">			åŒ…å«startï¼Œä¸åŒ…å«endä¸‹æ ‡</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Println(s1)</span><br><span class="line">	s8 := s1[:<span class="number">5</span>]</span><br><span class="line">	fmt.Println(s8)</span><br><span class="line">	fmt.Println(s1[<span class="number">5</span>:])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">false</span><br><span class="line">true</span><br><span class="line">0</span><br><span class="line">23å¹´5æœˆçš„æ–‡ä»¶ã€‚ã€‚</span><br><span class="line">æ–‡æœ¬æ–‡æ¡£ã€‚ã€‚</span><br><span class="line">-1</span><br><span class="line">0</span><br><span class="line">8</span><br><span class="line">abc-world-hello-ruby</span><br><span class="line">123</span><br><span class="line">4563</span><br><span class="line">aaa</span><br><span class="line">49595</span><br><span class="line">45</span><br><span class="line">hellohellohellohellohello</span><br><span class="line">he**owor*d</span><br><span class="line">hello world**123..</span><br><span class="line">HELLO WORLD**123..</span><br><span class="line">helloworld</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure>

<h2 id="strconvåŒ…"><a href="#strconvåŒ…" class="headerlink" title="strconvåŒ…"></a>strconvåŒ…</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//1.boolç±»å‹</span></span><br><span class="line">	s1 := <span class="string">&quot;true&quot;</span></span><br><span class="line">	b1, err := strconv.ParseBool(s1)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%t\n&quot;</span>, b1, b1)	<span class="comment">//%tæ˜¯boolç±»å‹</span></span><br><span class="line"></span><br><span class="line">	ss1 := strconv.FormatBool(b1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%s\n&quot;</span>, ss1, ss1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.æ•´æ•°</span></span><br><span class="line">	s2 := <span class="string">&quot;100&quot;</span></span><br><span class="line">	i2, err := strconv.ParseInt(s2, <span class="number">2</span>, <span class="number">64</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%d\n&quot;</span>, i2, i2)</span><br><span class="line"></span><br><span class="line">	ss2 := strconv.FormatInt(i2, <span class="number">10</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%s\n&quot;</span>, ss2, ss2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//itoa(),atoi()</span></span><br><span class="line">	i3, err := strconv.Atoi(<span class="string">&quot;-42&quot;</span>) <span class="comment">//è½¬ä¸ºintç±»å‹</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%d\n&quot;</span>, i3, i3)</span><br><span class="line">	ss3 := strconv.Itoa(<span class="number">-42</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%s\n&quot;</span>, ss3, ss3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bool,true</span><br><span class="line">string,true</span><br><span class="line">int64,4</span><br><span class="line">string,4</span><br><span class="line">int,-42</span><br><span class="line">string,-42</span><br></pre></td></tr></table></figure>

<p>â€œstrconvâ€ç”¨äºè¿›è¡Œå­—ç¬¦ä¸²å’ŒåŸºæœ¬ç±»å‹ä¹‹é—´çš„è½¬æ¢ã€‚åœ¨mainå‡½æ•°ä¸­ï¼Œé¦–å…ˆæ¼”ç¤ºäº†å¸ƒå°”ç±»å‹çš„è½¬æ¢ã€‚ä½¿ç”¨strconv.ParseBoolå‡½æ•°å°†s1è½¬æ¢ä¸ºboolç±»å‹çš„å˜é‡b1ã€‚å¦‚æœè½¬æ¢è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œåˆ™ä¼šæ‰“å°é”™è¯¯ä¿¡æ¯å¹¶è¿”å›ã€‚å¦åˆ™ï¼Œä½¿ç”¨fmt.Printfå‡½æ•°è¾“å‡ºb1çš„ç±»å‹å’Œå€¼ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨strconv.FormatBoolå‡½æ•°å°†b1è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å˜é‡ss1ï¼Œæ¼”ç¤ºäº†æ•´æ•°ç±»å‹çš„è½¬æ¢ï¼Œä½¿ç”¨strconv.ParseIntå‡½æ•°å°†s2æŒ‰ç…§äºŒè¿›åˆ¶è§£æä¸ºint64ç±»å‹çš„å˜é‡i2ã€‚ä½¿ç”¨strconv.FormatIntå‡½æ•°å°†i2æŒ‰ç…§åè¿›åˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å˜é‡ss2ï¼Œä½¿ç”¨strconv.Atoiå‡½æ•°å°†å­—ç¬¦ä¸²â€-42â€è½¬æ¢ä¸ºintç±»å‹çš„å˜é‡i3ï¼Œä½¿ç”¨strconv.Itoaå‡½æ•°å°†æ•´æ•°-42è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å˜é‡ss3ã€‚</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–‡ä»¶è¯¦ç»†æ“ä½œ</title>
    <url>/2023/06/11/Go/14/</url>
    <content><![CDATA[<h1 id="Fileæ–‡ä»¶æ“ä½œ"><a href="#Fileæ–‡ä»¶æ“ä½œ" class="headerlink" title="Fileæ–‡ä»¶æ“ä½œ"></a>Fileæ–‡ä»¶æ“ä½œ</h1><p>é¦–å…ˆï¼Œfileç±»æ˜¯åœ¨osåŒ…ä¸­çš„ï¼Œå°è£…äº†åº•å±‚çš„æ–‡ä»¶æè¿°ç¬¦å’Œç›¸å…³ä¿¡æ¯ï¼ŒåŒæ—¶å°è£…äº†Readå’ŒWriteçš„å®ç°</p>
<h2 id="FileInfoæ¥å£"><a href="#FileInfoæ¥å£" class="headerlink" title="FileInfoæ¥å£"></a>FileInfoæ¥å£</h2><p>FileInfoæ¥å£ä¸­å®šä¹‰äº†Fileä¿¡æ¯ç›¸å…³çš„æ–¹æ³•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> FileInfo <span class="keyword">interface</span> &#123;</span><br><span class="line">	Name() <span class="type">string</span>       <span class="comment">// base name of the file æ–‡ä»¶å.æ‰©å±•å 1.txt</span></span><br><span class="line">	Size() <span class="type">int64</span>        <span class="comment">// æ–‡ä»¶å¤§å°ï¼Œå­—èŠ‚æ•° 12540</span></span><br><span class="line">	Mode() FileMode     <span class="comment">// æ–‡ä»¶æƒé™ -rw-rw-rw-</span></span><br><span class="line">	ModTime() time.Time <span class="comment">// ä¿®æ”¹æ—¶é—´ 2018-04-13 16:30:53 +0800 CST</span></span><br><span class="line">	IsDir() <span class="type">bool</span>        <span class="comment">// æ˜¯å¦æ–‡ä»¶å¤¹</span></span><br><span class="line">	Sys() <span class="keyword">interface</span>&#123;&#125;   <span class="comment">// åŸºç¡€æ•°æ®æºæ¥å£(can return nil)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fileInfo, err := os.Stat(<span class="string">&quot;main/1.md&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;err :&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, fileInfo)</span><br><span class="line">	<span class="comment">//æ–‡ä»¶å</span></span><br><span class="line">	fmt.Println(fileInfo.Name())</span><br><span class="line">	<span class="comment">//æ–‡ä»¶å¤§å°</span></span><br><span class="line">	fmt.Println(fileInfo.Size())</span><br><span class="line">	<span class="comment">//æ˜¯å¦æ˜¯ç›®å½•</span></span><br><span class="line">	fmt.Println(fileInfo.IsDir()) <span class="comment">//IsDirectory</span></span><br><span class="line">	<span class="comment">//ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">	fmt.Println(fileInfo.ModTime())</span><br><span class="line">	<span class="comment">//æƒé™</span></span><br><span class="line">	fmt.Println(fileInfo.Mode()) <span class="comment">//-rw-r--r--</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*os.fileStat</span><br><span class="line">1.md</span><br><span class="line">47</span><br><span class="line">false</span><br><span class="line">2023-06-10 21:30:41.7576415 +0800 CST</span><br><span class="line">-rw-rw-rw-</span><br></pre></td></tr></table></figure>

<h2 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h2><p>è‡³äºæ“ä½œæƒé™permï¼Œé™¤éåˆ›å»ºæ–‡ä»¶æ—¶æ‰éœ€è¦æŒ‡å®šï¼Œä¸éœ€è¦åˆ›å»ºæ–°æ–‡ä»¶æ—¶å¯ä»¥å°†å…¶è®¾å®šä¸ºï¼ã€‚è™½ç„¶goè¯­è¨€ç»™permæƒé™è®¾å®šäº†å¾ˆå¤šçš„å¸¸é‡ï¼Œä½†æ˜¯ä¹ æƒ¯ä¸Šä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ•°å­—ï¼Œå¦‚0666(å…·ä½“å«ä¹‰å’ŒUnixç³»ç»Ÿçš„ä¸€è‡´)ã€‚</p>
<p>æƒé™æ§åˆ¶ï¼š</p>
<p>linux ä¸‹æœ‰2ç§æ–‡ä»¶æƒé™è¡¨ç¤ºæ–¹å¼ï¼Œå³â€œç¬¦å·è¡¨ç¤ºâ€å’Œâ€œå…«è¿›åˆ¶è¡¨ç¤ºâ€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰ç¬¦å·è¡¨ç¤ºæ–¹å¼:</span><br><span class="line"></span><br><span class="line">-      ---         ---        ---</span><br><span class="line"></span><br><span class="line">type   owner       group      others</span><br><span class="line">æ–‡ä»¶çš„æƒé™æ˜¯è¿™æ ·å­åˆ†é…çš„ è¯» å†™ å¯æ‰§è¡Œ åˆ†åˆ«å¯¹åº”çš„æ˜¯ r w x å¦‚æœæ²¡æœ‰é‚£ä¸€ä¸ªæƒé™ï¼Œç”¨ - ä»£æ›¿</span><br><span class="line">(-æ–‡ä»¶ dç›®å½• |è¿æ¥ç¬¦å·)</span><br><span class="line">ä¾‹å¦‚ï¼š-rwxr-xr-x</span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰å…«è¿›åˆ¶è¡¨ç¤ºæ–¹å¼ï¼š	</span><br><span class="line">r â€”â€”&gt; 004</span><br><span class="line">w â€”â€”&gt; 002</span><br><span class="line">x â€”â€”&gt; 001</span><br><span class="line">- â€”â€”&gt; 000</span><br><span class="line"></span><br><span class="line">0755</span><br><span class="line">0777ï¼ˆownerï¼Œgroupï¼Œotherséƒ½æ˜¯å¯è¯»å¯å†™å¯æ‰§è¡Œï¼‰</span><br><span class="line">0555</span><br><span class="line">0444</span><br><span class="line">0666</span><br></pre></td></tr></table></figure>

<h2 id="æ‰“å¼€æ¨¡å¼"><a href="#æ‰“å¼€æ¨¡å¼" class="headerlink" title="æ‰“å¼€æ¨¡å¼"></a>æ‰“å¼€æ¨¡å¼</h2><p>æ–‡ä»¶æ‰“å¼€æ¨¡å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    O_RDONLY <span class="type">int</span> = syscall.O_RDONLY <span class="comment">// åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    O_WRONLY <span class="type">int</span> = syscall.O_WRONLY <span class="comment">// åªå†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    O_RDWR   <span class="type">int</span> = syscall.O_RDWR   <span class="comment">// è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    O_APPEND <span class="type">int</span> = syscall.O_APPEND <span class="comment">// å†™æ“ä½œæ—¶å°†æ•°æ®é™„åŠ åˆ°æ–‡ä»¶å°¾éƒ¨</span></span><br><span class="line">    O_CREATE <span class="type">int</span> = syscall.O_CREAT  <span class="comment">// å¦‚æœä¸å­˜åœ¨å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶</span></span><br><span class="line">    O_EXCL   <span class="type">int</span> = syscall.O_EXCL   <span class="comment">// å’ŒO_CREATEé…åˆä½¿ç”¨ï¼Œæ–‡ä»¶å¿…é¡»ä¸å­˜åœ¨</span></span><br><span class="line">    O_SYNC   <span class="type">int</span> = syscall.O_SYNC   <span class="comment">// æ‰“å¼€æ–‡ä»¶ç”¨äºåŒæ­¥I/O</span></span><br><span class="line">    O_TRUNC  <span class="type">int</span> = syscall.O_TRUNC  <span class="comment">// å¦‚æœå¯èƒ½ï¼Œæ‰“å¼€æ—¶æ¸…ç©ºæ–‡ä»¶</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="Fileæ“ä½œ"><a href="#Fileæ“ä½œ" class="headerlink" title="Fileæ“ä½œ"></a>Fileæ“ä½œ</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> File</span><br><span class="line"><span class="comment">//Fileä»£è¡¨ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶å¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Create</span><span class="params">(name <span class="type">string</span>)</span></span> (file *File, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Createé‡‡ç”¨æ¨¡å¼0666ï¼ˆä»»ä½•äººéƒ½å¯è¯»å†™ï¼Œä¸å¯æ‰§è¡Œï¼‰åˆ›å»ºä¸€ä¸ªåä¸ºnameçš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²å­˜åœ¨ä¼šæˆªæ–­å®ƒï¼ˆä¸ºç©ºæ–‡ä»¶ï¼‰ã€‚å¦‚æœæˆåŠŸï¼Œè¿”å›çš„æ–‡ä»¶å¯¹è±¡å¯ç”¨äºI/Oï¼›å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦å…·æœ‰O_RDWRæ¨¡å¼ã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Open</span><span class="params">(name <span class="type">string</span>)</span></span> (file *File, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Openæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å–ã€‚å¦‚æœæ“ä½œæˆåŠŸï¼Œè¿”å›çš„æ–‡ä»¶å¯¹è±¡çš„æ–¹æ³•å¯ç”¨äºè¯»å–æ•°æ®ï¼›å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦å…·æœ‰O_RDONLYæ¨¡å¼ã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">OpenFile</span><span class="params">(name <span class="type">string</span>, flag <span class="type">int</span>, perm FileMode)</span></span> (file *File, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//OpenFileæ˜¯ä¸€ä¸ªæ›´ä¸€èˆ¬æ€§çš„æ–‡ä»¶æ‰“å¼€å‡½æ•°ï¼Œå¤§å¤šæ•°è°ƒç”¨è€…éƒ½åº”ç”¨Openæˆ–Createä»£æ›¿æœ¬å‡½æ•°ã€‚å®ƒä¼šä½¿ç”¨æŒ‡å®šçš„é€‰é¡¹ï¼ˆå¦‚O_RDONLYç­‰ï¼‰ã€æŒ‡å®šçš„æ¨¡å¼ï¼ˆå¦‚0666ç­‰ï¼‰æ‰“å¼€æŒ‡å®šåç§°çš„æ–‡ä»¶ã€‚å¦‚æœæ“ä½œæˆåŠŸï¼Œè¿”å›çš„æ–‡ä»¶å¯¹è±¡å¯ç”¨äºI/Oã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewFile</span><span class="params">(fd <span class="type">uintptr</span>, name <span class="type">string</span>)</span></span> *File</span><br><span class="line"><span class="comment">//NewFileä½¿ç”¨ç»™å‡ºçš„Unixæ–‡ä»¶æè¿°ç¬¦å’Œåç§°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Pipe</span><span class="params">()</span></span> (r *File, w *File, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Pipeè¿”å›ä¸€å¯¹å…³è”çš„æ–‡ä»¶å¯¹è±¡ã€‚ä»rçš„è¯»å–å°†è¿”å›å†™å…¥wçš„æ•°æ®ã€‚æœ¬å‡½æ•°ä¼šè¿”å›ä¸¤ä¸ªæ–‡ä»¶å¯¹è±¡å’Œå¯èƒ½çš„é”™è¯¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Name() <span class="type">string</span></span><br><span class="line"><span class="comment">//Nameæ–¹æ³•è¿”å›ï¼ˆæä¾›ç»™Open/Createç­‰æ–¹æ³•çš„ï¼‰æ–‡ä»¶åç§°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Stat() (fi FileInfo, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Statè¿”å›æè¿°æ–‡ä»¶fçš„FileInfoç±»å‹å€¼ã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Fd() <span class="type">uintptr</span></span><br><span class="line"><span class="comment">//Fdè¿”å›ä¸æ–‡ä»¶få¯¹åº”çš„æ•´æ•°ç±»å‹çš„Unixæ–‡ä»¶æè¿°ç¬¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Chdir() <span class="type">error</span></span><br><span class="line"><span class="comment">//Chdirå°†å½“å‰å·¥ä½œç›®å½•ä¿®æ”¹ä¸ºfï¼Œfå¿…é¡»æ˜¯ä¸€ä¸ªç›®å½•ã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Chmod(mode FileMode) <span class="type">error</span></span><br><span class="line"><span class="comment">//Chmodä¿®æ”¹æ–‡ä»¶çš„æ¨¡å¼ã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Chown(uid, gid <span class="type">int</span>) <span class="type">error</span></span><br><span class="line"><span class="comment">//Chownä¿®æ”¹æ–‡ä»¶çš„ç”¨æˆ·IDå’Œç»„IDã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Close() <span class="type">error</span></span><br><span class="line"><span class="comment">//Closeå…³é—­æ–‡ä»¶fï¼Œä½¿æ–‡ä»¶ä¸èƒ½ç”¨äºè¯»å†™ã€‚å®ƒè¿”å›å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;path/filepath&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.è·¯å¾„</span></span><br><span class="line">	fileName1 := <span class="string">&quot;C:\\GolandProjects\\GoProject1\\main\\1.md&quot;</span></span><br><span class="line">	fileName2 := <span class="string">&quot;main/1.md&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„</span></span><br><span class="line">	fmt.Println(filepath.IsAbs(fileName1)) <span class="comment">//true</span></span><br><span class="line">	fmt.Println(filepath.IsAbs(fileName2)) <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//è½¬åŒ–ä¸ºç»å¯¹è·¯å¾„</span></span><br><span class="line">	<span class="comment">//fmt.Println(filepath.Abs(fileName1))</span></span><br><span class="line">	<span class="comment">//fmt.Println(filepath.Abs(fileName2)) // C:\GolandProjects\GoProject1\main\1.md &lt;nil&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.è·å–ç›®å½•</span></span><br><span class="line">	<span class="comment">//fmt.Println(&quot;è·å–çˆ¶ç›®å½•ï¼š&quot;, filepath.Join(fileName1, &quot;..&quot;))</span></span><br><span class="line">	<span class="comment">//fmt.Println(&quot;è·å–çˆ¶ç›®å½•ï¼š&quot;, filepath.Dir(fileName1))</span></span><br><span class="line">	<span class="comment">//fmt.Println(&quot;è·å–å½“å‰ç›®å½•ï¼š&quot;, filepath.Join(fileName1, &quot;.&quot;))</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.åˆ›å»ºç›®å½•</span></span><br><span class="line">	err := os.Mkdir(<span class="string">&quot;main/app&quot;</span>, os.ModePerm) <span class="comment">//æƒé™0777</span></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//err := os.MkdirAll(&quot;main/a/b/c&quot;, os.ModePerm)</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(&quot;err:&quot;, err)</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">//fmt.Println(&quot;å¤šå±‚æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ&quot;)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.åˆ›å»ºæ–‡ä»¶:Createé‡‡ç”¨æ¨¡å¼0666ï¼ˆä»»ä½•äººéƒ½å¯è¯»å†™ï¼Œä¸å¯æ‰§è¡Œï¼‰åˆ›å»ºä¸€ä¸ªåä¸ºnameçš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²å­˜åœ¨ä¼šæˆªæ–­å®ƒï¼ˆä¸ºç©ºæ–‡ä»¶ï¼‰</span></span><br><span class="line">	<span class="comment">//file1, err := os.Create(fileName1)</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(&quot;errï¼š&quot;, err)</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">//fmt.Println(file1)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//file2, err := os.Create(fileName2) //åˆ›å»ºç›¸å¯¹è·¯å¾„çš„æ–‡ä»¶ï¼Œæ˜¯ä»¥å½“å‰å·¥ç¨‹ä¸ºå‚ç…§çš„</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(&quot;err :&quot;, err)</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">//fmt.Println(file2)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//4.æ‰“å¼€æ–‡ä»¶ï¼š</span></span><br><span class="line">	<span class="comment">//file3, err := os.Open(fileName1) //åªè¯»çš„</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(&quot;err:&quot;, err)</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">//fmt.Println(file3)</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–‡ä»¶åç§°</span></span><br><span class="line"><span class="comment">		ç¬¬äºŒä¸ªå‚æ•°ï¼šæ–‡ä»¶çš„æ‰“å¼€æ–¹å¼</span></span><br><span class="line"><span class="comment">			const (</span></span><br><span class="line"><span class="comment">		// Exactly one of O_RDONLY, O_WRONLY, or O_RDWR must be specified.</span></span><br><span class="line"><span class="comment">			O_RDONLY int = syscall.O_RDONLY // open the file read-only.</span></span><br><span class="line"><span class="comment">			O_WRONLY int = syscall.O_WRONLY // open the file write-only.</span></span><br><span class="line"><span class="comment">			O_RDWR   int = syscall.O_RDWR   // open the file read-write.</span></span><br><span class="line"><span class="comment">			// The remaining values may be or&#x27;ed in to control behavior.</span></span><br><span class="line"><span class="comment">			O_APPEND int = syscall.O_APPEND // append data to the file when writing.</span></span><br><span class="line"><span class="comment">			O_CREATE int = syscall.O_CREAT  // create a new file if none exists.</span></span><br><span class="line"><span class="comment">			O_EXCL   int = syscall.O_EXCL   // used with O_CREATE, file must not exist.</span></span><br><span class="line"><span class="comment">			O_SYNC   int = syscall.O_SYNC   // open for synchronous I/O.</span></span><br><span class="line"><span class="comment">			O_TRUNC  int = syscall.O_TRUNC  // truncate regular writable file when opened.</span></span><br><span class="line"><span class="comment">		)</span></span><br><span class="line"><span class="comment">		ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ–‡ä»¶çš„æƒé™ï¼šæ–‡ä»¶ä¸å­˜åœ¨åˆ›å»ºæ–‡ä»¶ï¼Œéœ€è¦æŒ‡å®šæƒé™</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//file4, err := os.OpenFile(fileName1, os.O_RDONLY|os.O_WRONLY, os.ModePerm)</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(&quot;err:&quot;, err)</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">//fmt.Println(file4)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//5å…³é—­æ–‡ä»¶ï¼Œ</span></span><br><span class="line">	<span class="comment">//err := file4.Close()</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//6.åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼š</span></span><br><span class="line">	<span class="comment">//åˆ é™¤æ–‡ä»¶(è¯¥æ–¹æ³•ä¹Ÿå¯ä»¥åˆ é™¤ç©ºç›®å½•)</span></span><br><span class="line">	<span class="comment">//err := os.Remove(&quot;main/1.md&quot;)</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(&quot;err:&quot;, err)</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">//fmt.Println(&quot;åˆ é™¤æ–‡ä»¶æˆåŠŸã€‚ã€‚&quot;)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆ é™¤ç›®å½•</span></span><br><span class="line">	<span class="comment">//err := os.RemoveAll(&quot;main/a/b/c&quot;)</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(&quot;err:&quot;, err)</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">//fmt.Println(&quot;åˆ é™¤ç›®å½•æˆåŠŸã€‚ã€‚</span></span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶è¯»å–"><a href="#æ–‡ä»¶è¯»å–" class="headerlink" title="æ–‡ä»¶è¯»å–"></a>æ–‡ä»¶è¯»å–</h2><p>æ–‡ä»¶çš„æ“ä½œå‡½æ•°å’Œæ–¹æ³•çš„ä»‹ç»ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Readdir(n <span class="type">int</span>) (fi []FileInfo, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Readdirè¯»å–ç›®å½•fçš„å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªæœ‰nä¸ªæˆå‘˜çš„[]FileInfoï¼Œè¿™äº›FileInfoæ˜¯è¢«Lstatè¿”å›çš„ï¼Œé‡‡ç”¨ç›®å½•é¡ºåºã€‚å¯¹æœ¬å‡½æ•°çš„ä¸‹ä¸€æ¬¡è°ƒç”¨ä¼šè¿”å›ä¸Šä¸€æ¬¡è°ƒç”¨å‰©ä½™æœªè¯»å–çš„å†…å®¹çš„ä¿¡æ¯ã€‚å¦‚æœn&gt;0ï¼ŒReaddirå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæœ€å¤šnä¸ªæˆå‘˜çš„åˆ‡ç‰‡ã€‚è¿™æ—¶ï¼Œå¦‚æœReaddirè¿”å›ä¸€ä¸ªç©ºåˆ‡ç‰‡ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªénilçš„é”™è¯¯è¯´æ˜åŸå› ã€‚å¦‚æœåˆ°è¾¾äº†ç›®å½•fçš„ç»“å°¾ï¼Œè¿”å›å€¼errä¼šæ˜¯io.EOFã€‚å¦‚æœn&lt;=0ï¼ŒReaddirå‡½æ•°è¿”å›ç›®å½•ä¸­å‰©ä½™æ‰€æœ‰æ–‡ä»¶å¯¹è±¡çš„FileInfoæ„æˆçš„åˆ‡ç‰‡ã€‚æ­¤æ—¶ï¼Œå¦‚æœReaddirè°ƒç”¨æˆåŠŸï¼ˆè¯»å–æ‰€æœ‰å†…å®¹ç›´åˆ°ç»“å°¾ï¼‰ï¼Œå®ƒä¼šè¿”å›è¯¥åˆ‡ç‰‡å’Œnilçš„é”™è¯¯å€¼ã€‚å¦‚æœåœ¨åˆ°è¾¾ç»“å°¾å‰é‡åˆ°é”™è¯¯ï¼Œä¼šè¿”å›ä¹‹å‰æˆåŠŸè¯»å–çš„FileInfoæ„æˆçš„åˆ‡ç‰‡å’Œè¯¥é”™è¯¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Readdirnames(n <span class="type">int</span>) (names []<span class="type">string</span>, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Readdirè¯»å–ç›®å½•fçš„å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªæœ‰nä¸ªæˆå‘˜çš„[]stringï¼Œåˆ‡ç‰‡æˆå‘˜ä¸ºç›®å½•ä¸­æ–‡ä»¶å¯¹è±¡çš„åå­—ï¼Œé‡‡ç”¨ç›®å½•é¡ºåºã€‚å¯¹æœ¬å‡½æ•°çš„ä¸‹ä¸€æ¬¡è°ƒç”¨ä¼šè¿”å›ä¸Šä¸€æ¬¡è°ƒç”¨å‰©ä½™æœªè¯»å–çš„å†…å®¹çš„ä¿¡æ¯ã€‚å¦‚æœn&gt;0ï¼ŒReaddirå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæœ€å¤šnä¸ªæˆå‘˜çš„åˆ‡ç‰‡ã€‚è¿™æ—¶ï¼Œå¦‚æœReaddirè¿”å›ä¸€ä¸ªç©ºåˆ‡ç‰‡ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªénilçš„é”™è¯¯è¯´æ˜åŸå› ã€‚å¦‚æœåˆ°è¾¾äº†ç›®å½•fçš„ç»“å°¾ï¼Œè¿”å›å€¼errä¼šæ˜¯io.EOFã€‚å¦‚æœn&lt;=0ï¼ŒReaddirå‡½æ•°è¿”å›ç›®å½•ä¸­å‰©ä½™æ‰€æœ‰æ–‡ä»¶å¯¹è±¡çš„åå­—æ„æˆçš„åˆ‡ç‰‡ã€‚æ­¤æ—¶ï¼Œå¦‚æœReaddirè°ƒç”¨æˆåŠŸï¼ˆè¯»å–æ‰€æœ‰å†…å®¹ç›´åˆ°ç»“å°¾ï¼‰ï¼Œå®ƒä¼šè¿”å›è¯¥åˆ‡ç‰‡å’Œnilçš„é”™è¯¯å€¼ã€‚å¦‚æœåœ¨åˆ°è¾¾ç»“å°¾å‰é‡åˆ°é”™è¯¯ï¼Œä¼šè¿”å›ä¹‹å‰æˆåŠŸè¯»å–çš„åå­—æ„æˆçš„åˆ‡ç‰‡å’Œè¯¥é”™è¯¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Truncate(size <span class="type">int64</span>) <span class="type">error</span></span><br><span class="line"><span class="comment">//Truncateæ”¹å˜æ–‡ä»¶çš„å¤§å°ï¼Œå®ƒä¸ä¼šæ”¹å˜I/Oçš„å½“å‰ä½ç½®ã€‚ å¦‚æœæˆªæ–­æ–‡ä»¶ï¼Œå¤šå‡ºçš„éƒ¨åˆ†å°±ä¼šè¢«ä¸¢å¼ƒã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Read(b []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Readæ–¹æ³•ä»fä¸­è¯»å–æœ€å¤šlen(b)å­—èŠ‚æ•°æ®å¹¶å†™å…¥bã€‚å®ƒè¿”å›è¯»å–çš„å­—èŠ‚æ•°å’Œå¯èƒ½é‡åˆ°çš„ä»»ä½•é”™è¯¯ã€‚æ–‡ä»¶ç»ˆæ­¢æ ‡å¿—æ˜¯è¯»å–0ä¸ªå­—èŠ‚ä¸”è¿”å›å€¼errä¸ºio.EOFã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> ReadAt(b []<span class="type">byte</span>, off <span class="type">int64</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//ReadAtä»æŒ‡å®šçš„ä½ç½®ï¼ˆç›¸å¯¹äºæ–‡ä»¶å¼€å§‹ä½ç½®ï¼‰è¯»å–len(b)å­—èŠ‚æ•°æ®å¹¶å†™å…¥bã€‚å®ƒè¿”å›è¯»å–çš„å­—èŠ‚æ•°å’Œå¯èƒ½é‡åˆ°çš„ä»»ä½•é”™è¯¯ã€‚å½“n&lt;len(b)æ—¶ï¼Œæœ¬æ–¹æ³•æ€»æ˜¯ä¼šè¿”å›é”™è¯¯ï¼›å¦‚æœæ˜¯å› ä¸ºåˆ°è¾¾æ–‡ä»¶ç»“å°¾ï¼Œè¿”å›å€¼errä¼šæ˜¯io.EOFã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Write(b []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Writeå‘æ–‡ä»¶ä¸­å†™å…¥len(b)å­—èŠ‚æ•°æ®ã€‚å®ƒè¿”å›å†™å…¥çš„å­—èŠ‚æ•°å’Œå¯èƒ½é‡åˆ°çš„ä»»ä½•é”™è¯¯ã€‚å¦‚æœè¿”å›å€¼n!=len(b)ï¼Œæœ¬æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªénilçš„é”™è¯¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> WriteString(s <span class="type">string</span>) (ret <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//WriteStringç±»ä¼¼Writeï¼Œä½†æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> WriteAt(b []<span class="type">byte</span>, off <span class="type">int64</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//WriteAtåœ¨æŒ‡å®šçš„ä½ç½®ï¼ˆç›¸å¯¹äºæ–‡ä»¶å¼€å§‹ä½ç½®ï¼‰å†™å…¥len(b)å­—èŠ‚æ•°æ®ã€‚å®ƒè¿”å›å†™å…¥çš„å­—èŠ‚æ•°å’Œå¯èƒ½é‡åˆ°çš„ä»»ä½•é”™è¯¯ã€‚å¦‚æœè¿”å›å€¼n!=len(b)ï¼Œæœ¬æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªénilçš„é”™è¯¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Seek(offset <span class="type">int64</span>, whence <span class="type">int</span>) (ret <span class="type">int64</span>, err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Seekè®¾ç½®ä¸‹ä¸€æ¬¡è¯»/å†™çš„ä½ç½®ã€‚offsetä¸ºç›¸å¯¹åç§»é‡ï¼Œè€Œwhenceå†³å®šç›¸å¯¹ä½ç½®ï¼š0ä¸ºç›¸å¯¹æ–‡ä»¶å¼€å¤´ï¼Œ1ä¸ºç›¸å¯¹å½“å‰ä½ç½®ï¼Œ2ä¸ºç›¸å¯¹æ–‡ä»¶ç»“å°¾ã€‚å®ƒè¿”å›æ–°çš„åç§»é‡ï¼ˆç›¸å¯¹å¼€å¤´ï¼‰å’Œå¯èƒ½çš„é”™è¯¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span></span> Sync() (err <span class="type">error</span>)</span><br><span class="line"><span class="comment">//Syncé€’äº¤æ–‡ä»¶çš„å½“å‰å†…å®¹è¿›è¡Œç¨³å®šçš„å­˜å‚¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™è¡¨ç¤ºå°†æ–‡ä»¶ç³»ç»Ÿçš„æœ€è¿‘å†™å…¥çš„æ•°æ®åœ¨å†…å­˜ä¸­çš„æ‹·è´åˆ·æ–°åˆ°ç¡¬ç›˜ä¸­ç¨³å®šä¿å­˜ã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="I-Oæ“ä½œ"><a href="#I-Oæ“ä½œ" class="headerlink" title="I&#x2F;Oæ“ä½œ"></a>I&#x2F;Oæ“ä½œ</h1><p>I&#x2F;Oæ“ä½œä¹Ÿå«è¾“å…¥è¾“å‡ºæ“ä½œã€‚å…¶ä¸­Iæ˜¯æŒ‡Inputï¼ŒOæ˜¯æŒ‡Outputï¼Œç”¨äºè¯»æˆ–è€…å†™æ•°æ®çš„ï¼Œæœ‰äº›è¯­è¨€ä¸­ä¹Ÿå«æµæ“ä½œï¼Œæ˜¯æŒ‡æ•°æ®é€šä¿¡çš„é€šé“ã€‚</p>
<p>Golang æ ‡å‡†åº“å¯¹ IO çš„æŠ½è±¡éå¸¸ç²¾å·§ï¼Œå„ä¸ªç»„ä»¶å¯ä»¥éšæ„ç»„åˆï¼Œå¯ä»¥ä½œä¸ºæ¥å£è®¾è®¡çš„å…¸èŒƒã€‚</p>
<h2 id="ioåŒ…"><a href="#ioåŒ…" class="headerlink" title="ioåŒ…"></a>ioåŒ…</h2><p>ioåŒ…ä¸­æä¾›I&#x2F;OåŸå§‹æ“ä½œçš„ä¸€ç³»åˆ—æ¥å£ã€‚å®ƒä¸»è¦åŒ…è£…äº†ä¸€äº›å·²æœ‰çš„å®ç°ï¼Œå¦‚ os åŒ…ä¸­çš„é‚£äº›ï¼Œå¹¶å°†è¿™äº›æŠ½è±¡æˆä¸ºå®ç”¨æ€§çš„åŠŸèƒ½å’Œä¸€äº›å…¶ä»–ç›¸å…³çš„æ¥å£ã€‚</p>
<p>ç”±äºè¿™äº›æ¥å£å’ŒåŸå§‹çš„æ“ä½œä»¥ä¸åŒçš„å®ç°åŒ…è£…äº†ä½çº§æ“ä½œï¼Œå®¢æˆ·ä¸åº”å‡å®šå®ƒä»¬å¯¹äºå¹¶è¡Œæ‰§è¡Œæ˜¯å®‰å…¨çš„ã€‚</p>
<p>åœ¨ioåŒ…ä¸­æœ€é‡è¦çš„æ˜¯ä¸¤ä¸ªæ¥å£ï¼šReaderå’ŒWriteræ¥å£ï¼Œé¦–å…ˆæ¥ä»‹ç»è¿™ä¸¤ä¸ªæ¥å£ã€‚</p>
<p>Readeræ¥å£çš„å®šä¹‰ï¼ŒRead()æ–¹æ³•ç”¨äºè¯»å–æ•°æ®ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">        Read(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Read å°† len(p) ä¸ªå­—èŠ‚è¯»å–åˆ° p ä¸­ã€‚å®ƒè¿”å›è¯»å–çš„å­—èŠ‚æ•° nï¼ˆ0 &lt;&#x3D; n &lt;&#x3D; len(p)ï¼‰ä»¥åŠä»»ä½•é‡åˆ°çš„é”™è¯¯ã€‚å³ä½¿ Read è¿”å›çš„ n &lt; len(p)ï¼Œå®ƒä¹Ÿä¼šåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ä½¿ç”¨ pçš„å…¨éƒ¨ä½œä¸ºæš‚å­˜ç©ºé—´ã€‚è‹¥ä¸€äº›æ•°æ®å¯ç”¨ä½†ä¸åˆ° len(p) ä¸ªå­—èŠ‚ï¼ŒRead ä¼šç…§ä¾‹è¿”å›å¯ç”¨çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯ç­‰å¾…æ›´å¤šã€‚</p>
<p>å½“ Read åœ¨æˆåŠŸè¯»å– n &gt; 0 ä¸ªå­—èŠ‚åé‡åˆ°ä¸€ä¸ªé”™è¯¯æˆ– EOF æƒ…å†µï¼Œå®ƒå°±ä¼šè¿”å›è¯»å–çš„å­—èŠ‚æ•°ã€‚å®ƒä¼šä»ç›¸åŒçš„è°ƒç”¨ä¸­è¿”å›ï¼ˆénilçš„ï¼‰é”™è¯¯æˆ–ä»éšåçš„è°ƒç”¨ä¸­è¿”å›é”™è¯¯ï¼ˆå’Œ n &#x3D;&#x3D; 0ï¼‰ã€‚è¿™ç§ä¸€èˆ¬æƒ…å†µçš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ Reader åœ¨è¾“å…¥æµç»“æŸæ—¶ä¼šè¿”å›ä¸€ä¸ªéé›¶çš„å­—èŠ‚æ•°ï¼Œå¯èƒ½çš„è¿”å›ä¸æ˜¯ err &#x3D;&#x3D; EOF å°±æ˜¯ err &#x3D;&#x3D; nilã€‚æ— è®ºå¦‚ä½•ï¼Œä¸‹ä¸€ä¸ª Read éƒ½åº”å½“è¿”å› 0, EOFã€‚</p>
<p>è°ƒç”¨è€…åº”å½“æ€»åœ¨è€ƒè™‘åˆ°é”™è¯¯ err å‰å¤„ç† n &gt; 0 çš„å­—èŠ‚ã€‚è¿™æ ·åšå¯ä»¥åœ¨è¯»å–ä¸€äº›å­—èŠ‚ï¼Œä»¥åŠå…è®¸çš„ EOF è¡Œä¸ºåæ­£ç¡®åœ°å¤„ç†I&#x2F;Oé”™è¯¯ã€‚</p>
<p>Read çš„å®ç°ä¼šé˜»æ­¢è¿”å›é›¶å­—èŠ‚çš„è®¡æ•°å’Œä¸€ä¸ª nil é”™è¯¯ï¼Œè°ƒç”¨è€…åº”å°†è¿™ç§æƒ…å†µè§†ä½œç©ºæ“ä½œã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		è¯»å–æ•°æ®ï¼š</span></span><br><span class="line"><span class="comment">			Readeræ¥å£ï¼š</span></span><br><span class="line"><span class="comment">				Read(p []byte)(n int, error)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//è¯»å–æœ¬åœ°1.txtæ–‡ä»¶ä¸­çš„æ•°æ®</span></span><br><span class="line">	<span class="comment">//step1ï¼šæ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">	fileName := <span class="string">&quot;main/1.txt&quot;</span></span><br><span class="line">	file, err := os.Open(fileName)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//step3ï¼šå…³é—­æ–‡ä»¶</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">(file *os.File)</span></span> &#123;</span><br><span class="line">		err := file.Close()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;(file)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//step2ï¼šè¯»å–æ•°æ®</span></span><br><span class="line">	bs := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		//ç¬¬ä¸€æ¬¡è¯»å–</span></span><br><span class="line"><span class="comment">		n, err := file.Read(bs)</span></span><br><span class="line"><span class="comment">		fmt.Println(err)        //&lt;nil&gt;</span></span><br><span class="line"><span class="comment">		fmt.Println(n)          //4</span></span><br><span class="line"><span class="comment">		fmt.Println(bs)         //[97 98 99 100]</span></span><br><span class="line"><span class="comment">		fmt.Println(string(bs)) //abcd</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		//ç¬¬äºŒæ¬¡è¯»å–</span></span><br><span class="line"><span class="comment">		n, err = file.Read(bs)</span></span><br><span class="line"><span class="comment">		fmt.Println(err)        //&lt;nil&gt;</span></span><br><span class="line"><span class="comment">		fmt.Println(n)          //4</span></span><br><span class="line"><span class="comment">		fmt.Println(bs)         //[101 102 103 104]</span></span><br><span class="line"><span class="comment">		fmt.Println(string(bs)) //efgh</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		//ç¬¬ä¸‰æ¬¡è¯»å–</span></span><br><span class="line"><span class="comment">		n, err = file.Read(bs)</span></span><br><span class="line"><span class="comment">		fmt.Println(err)        //&lt;nil&gt;</span></span><br><span class="line"><span class="comment">		fmt.Println(n)          //2</span></span><br><span class="line"><span class="comment">		fmt.Println(bs)         //[105 106 103 104]</span></span><br><span class="line"><span class="comment">		fmt.Println(string(bs)) //ijgh</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		//ç¬¬å››æ¬¡è¯»å–</span></span><br><span class="line"><span class="comment">		n, err = file.Read(bs)</span></span><br><span class="line"><span class="comment">		fmt.Println(err) //EOFï¼Œæ–‡ä»¶çš„æœ«å°¾</span></span><br><span class="line"><span class="comment">		fmt.Println(n)   //0</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	n := <span class="number">-1</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		n, err = file.Read(bs)</span><br><span class="line">		<span class="keyword">if</span> n == <span class="number">0</span> || err == io.EOF &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;è¯»å–åˆ°äº†æ–‡ä»¶çš„æœ«å°¾ï¼Œç»“æŸè¯»å–æ“ä½œã€‚ã€‚&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(n)</span><br><span class="line">		fmt.Println(<span class="type">string</span>(bs[:n]))</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		abcd</span></span><br><span class="line"><span class="comment">		efgh</span></span><br><span class="line"><span class="comment">		ij</span></span><br><span class="line"><span class="comment">		è¯»å–åˆ°äº†æ–‡ä»¶çš„æœ«å°¾ï¼Œç»“æŸè¯»å–æ“ä½œã€‚ã€‚</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Writeræ¥å£çš„å®šä¹‰ï¼ŒWrite()æ–¹æ³•ç”¨äºå†™å‡ºæ•°æ®ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">        Write(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Write å°† len(p) ä¸ªå­—èŠ‚ä» p ä¸­å†™å…¥åˆ°åŸºæœ¬æ•°æ®æµä¸­ã€‚å®ƒè¿”å›ä» p ä¸­è¢«å†™å…¥çš„å­—èŠ‚æ•°nï¼ˆ0 &lt;&#x3D; n &lt;&#x3D; len(p)ï¼‰ä»¥åŠä»»ä½•é‡åˆ°çš„å¼•èµ·å†™å…¥æå‰åœæ­¢çš„é”™è¯¯ã€‚è‹¥ Write è¿”å›çš„n &lt; len(p)ï¼Œå®ƒå°±å¿…é¡»è¿”å›ä¸€ä¸ªénilçš„é”™è¯¯ã€‚Write ä¸èƒ½ä¿®æ”¹æ­¤åˆ‡ç‰‡çš„æ•°æ®ï¼Œå³ä¾¿å®ƒæ˜¯ä¸´æ—¶çš„ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	fileName := <span class="string">&quot;main/1.txt&quot;</span></span><br><span class="line">	<span class="comment">//step1ï¼šæ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">	<span class="comment">//step2ï¼šå†™å‡ºæ•°æ®</span></span><br><span class="line">	<span class="comment">//step3ï¼šå…³é—­æ–‡ä»¶</span></span><br><span class="line">	<span class="comment">//file, err := os.Open(fileName)</span></span><br><span class="line">	file, err := os.OpenFile(fileName, os.O_CREATE|os.O_WRONLY|os.O_APPEND, os.ModePerm)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å†™å‡ºæ•°æ®</span></span><br><span class="line">	<span class="comment">//bs := []byte&#123;65, 66, 67, 68, 69, 70&#125; //A,B,C,D,E,F</span></span><br><span class="line">	<span class="comment">//bs := []byte&#123;97, 98, 99, 100&#125; //a,b,c,d</span></span><br><span class="line">	<span class="comment">//n,err := file.Write(bs)</span></span><br><span class="line">	<span class="comment">//n, err := file.Write(bs[:2])</span></span><br><span class="line">	<span class="comment">//fmt.Println(n)</span></span><br><span class="line">	<span class="comment">//HandleErr(err)</span></span><br><span class="line">	<span class="comment">//file.WriteString(&quot;\n&quot;)</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//ç›´æ¥å†™å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line">	<span class="comment">//n, err := file.WriteString(&quot;HelloWorld&quot;)</span></span><br><span class="line">	<span class="comment">//fmt.Println(n)</span></span><br><span class="line">	<span class="comment">//HandleErr(err)</span></span><br><span class="line">	<span class="comment">////</span></span><br><span class="line">	file.WriteString(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">	n, err := file.Write([]<span class="type">byte</span>(<span class="string">&quot;today&quot;</span>))</span><br><span class="line">	fmt.Println(n)</span><br><span class="line">	HandleErr(err)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">HandleErr</span><span class="params">(err <span class="type">error</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Seekeræ¥å£çš„å®šä¹‰ï¼Œå°è£…äº†åŸºæœ¬çš„ Seek æ–¹æ³•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Seeker <span class="keyword">interface</span> &#123;</span><br><span class="line">        Seek(offset <span class="type">int64</span>, whence <span class="type">int</span>) (<span class="type">int64</span>, <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Seeker ç”¨æ¥ç§»åŠ¨æ•°æ®çš„è¯»å†™æŒ‡é’ˆ<br>Seek è®¾ç½®ä¸‹ä¸€æ¬¡è¯»å†™æ“ä½œçš„æŒ‡é’ˆä½ç½®ï¼Œæ¯æ¬¡çš„è¯»å†™æ“ä½œéƒ½æ˜¯ä»æŒ‡é’ˆä½ç½®å¼€å§‹çš„<br>whence çš„å«ä¹‰ï¼š<br>    å¦‚æœ whence ä¸º 0ï¼šè¡¨ç¤ºä»æ•°æ®çš„å¼€å¤´å¼€å§‹ç§»åŠ¨æŒ‡é’ˆ<br>    å¦‚æœ whence ä¸º 1ï¼šè¡¨ç¤ºä»æ•°æ®çš„å½“å‰æŒ‡é’ˆä½ç½®å¼€å§‹ç§»åŠ¨æŒ‡é’ˆ<br>    å¦‚æœ whence ä¸º 2ï¼šè¡¨ç¤ºä»æ•°æ®çš„å°¾éƒ¨å¼€å§‹ç§»åŠ¨æŒ‡é’ˆ<br>offset æ˜¯æŒ‡é’ˆç§»åŠ¨çš„åç§»é‡<br>    è¿”å›ç§»åŠ¨åçš„æŒ‡é’ˆä½ç½®å’Œç§»åŠ¨è¿‡ç¨‹ä¸­é‡åˆ°çš„ä»»ä½•é”™è¯¯</p>
</blockquote>
<p> ReaderFromæ¥å£çš„å®šä¹‰ï¼Œå°è£…äº†åŸºæœ¬çš„ ReadFrom æ–¹æ³•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ReaderFrom <span class="keyword">interface</span> &#123;</span><br><span class="line">        ReadFrom(r Reader) (n <span class="type">int64</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadFrom ä» r ä¸­è¯»å–æ•°æ®åˆ°å¯¹è±¡çš„æ•°æ®æµä¸­<br>    ç›´åˆ° r è¿”å› EOF æˆ– r å‡ºç°è¯»å–é”™è¯¯ä¸ºæ­¢<br>    è¿”å›å€¼ n æ˜¯è¯»å–çš„å­—èŠ‚æ•°<br>    è¿”å›å€¼ err å°±æ˜¯ r çš„è¿”å›å€¼ err</p>
</blockquote>
<p>WriterToæ¥å£çš„å®šä¹‰ï¼Œå°è£…äº†åŸºæœ¬çš„ WriteTo æ–¹æ³•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> WriterTo <span class="keyword">interface</span> &#123;</span><br><span class="line">        WriteTo(w Writer) (n <span class="type">int64</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>WriterTo å°†å¯¹è±¡çš„æ•°æ®æµå†™å…¥åˆ° w ä¸­<br>    ç›´åˆ°å¯¹è±¡çš„æ•°æ®æµå…¨éƒ¨å†™å…¥å®Œæ¯•æˆ–é‡åˆ°å†™å…¥é”™è¯¯ä¸ºæ­¢<br>    è¿”å›å€¼ n æ˜¯å†™å…¥çš„å­—èŠ‚æ•°<br>    è¿”å›å€¼ err å°±æ˜¯ w çš„è¿”å›å€¼ err</p>
<p>å®šä¹‰ReaderAtæ¥å£ï¼ŒReaderAt æ¥å£å°è£…äº†åŸºæœ¬çš„ ReadAt æ–¹æ³•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ReaderAt <span class="keyword">interface</span> &#123;</span><br><span class="line">        ReadAt(p []<span class="type">byte</span>, off <span class="type">int64</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadAt ä»å¯¹è±¡æ•°æ®æµçš„ off å¤„è¯»å‡ºæ•°æ®åˆ° p ä¸­<br>    å¿½ç•¥æ•°æ®çš„è¯»å†™æŒ‡é’ˆï¼Œä»æ•°æ®çš„èµ·å§‹ä½ç½®åç§» off å¤„å¼€å§‹è¯»å–<br>    å¦‚æœå¯¹è±¡çš„æ•°æ®æµåªæœ‰éƒ¨åˆ†å¯ç”¨ï¼Œä¸è¶³ä»¥å¡«æ»¡ p<br>    åˆ™ ReadAt å°†ç­‰å¾…æ‰€æœ‰æ•°æ®å¯ç”¨ä¹‹åï¼Œç»§ç»­å‘ p ä¸­å†™å…¥<br>    ç›´åˆ°å°† p å¡«æ»¡åå†è¿”å›<br>    åœ¨è¿™ç‚¹ä¸Š ReadAt è¦æ¯” Read æ›´ä¸¥æ ¼<br>    è¿”å›è¯»å–çš„å­—èŠ‚æ•° n å’Œè¯»å–æ—¶é‡åˆ°çš„é”™è¯¯<br>    å¦‚æœ n &lt; len(p)ï¼Œåˆ™éœ€è¦è¿”å›ä¸€ä¸ª err å€¼æ¥è¯´æ˜<br>    ä¸ºä»€ä¹ˆæ²¡æœ‰å°† p å¡«æ»¡ï¼ˆæ¯”å¦‚ EOFï¼‰<br>    å¦‚æœ n &#x3D; len(p)ï¼Œè€Œä¸”å¯¹è±¡çš„æ•°æ®æ²¡æœ‰å…¨éƒ¨è¯»å®Œï¼Œåˆ™<br>    err å°†è¿”å› nil<br>    å¦‚æœ n &#x3D; len(p)ï¼Œè€Œä¸”å¯¹è±¡çš„æ•°æ®åˆšå¥½å…¨éƒ¨è¯»å®Œï¼Œåˆ™<br>    err å°†è¿”å› EOF æˆ–è€… nilï¼ˆä¸ç¡®å®šï¼‰</p>
</blockquote>
<p>å®šä¹‰WriterAtæ¥å£ï¼ŒWriterAt æ¥å£å°è£…äº†åŸºæœ¬çš„ WriteAt æ–¹æ³•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> WriterAt <span class="keyword">interface</span> &#123;</span><br><span class="line">        WriteAt(p []<span class="type">byte</span>, off <span class="type">int64</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>WriteAt å°† p ä¸­çš„æ•°æ®å†™å…¥åˆ°å¯¹è±¡æ•°æ®æµçš„ off å¤„<br>    å¿½ç•¥æ•°æ®çš„è¯»å†™æŒ‡é’ˆï¼Œä»æ•°æ®çš„èµ·å§‹ä½ç½®åç§» off å¤„å¼€å§‹å†™å…¥<br>    è¿”å›å†™å…¥çš„å­—èŠ‚æ•°å’Œå†™å…¥æ—¶é‡åˆ°çš„é”™è¯¯<br>    å¦‚æœ n &lt; len(p)ï¼Œåˆ™å¿…é¡»è¿”å›ä¸€ä¸ª err å€¼æ¥è¯´æ˜<br>    ä¸ºä»€ä¹ˆæ²¡æœ‰å°† p å®Œå…¨å†™å…¥</p>
</blockquote>
<h1 id="æ–‡ä»¶å¤åˆ¶"><a href="#æ–‡ä»¶å¤åˆ¶" class="headerlink" title="æ–‡ä»¶å¤åˆ¶"></a>æ–‡ä»¶å¤åˆ¶</h1><p>åœ¨ioåŒ…ä¸­ä¸»è¦æ˜¯æ“ä½œæµçš„ä¸€äº›æ–¹æ³•ï¼Œä»Šå¤©ä¸»è¦å­¦ä¹ ä¸€ä¸‹copyã€‚å°±æ˜¯æŠŠä¸€ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªç›®å½•ä¸‹ã€‚</p>
<p>å®ƒçš„åŸç†å°±æ˜¯é€šè¿‡ç¨‹åºï¼Œä»æºæ–‡ä»¶è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œåœ¨å†™å‡ºåˆ°ç›®æ ‡æ–‡ä»¶é‡Œã€‚</p>
<h2 id="ioåŒ…ä¸‹çš„Read-å’ŒWrite"><a href="#ioåŒ…ä¸‹çš„Read-å’ŒWrite" class="headerlink" title="ioåŒ…ä¸‹çš„Read()å’ŒWrite()"></a>ioåŒ…ä¸‹çš„Read()å’ŒWrite()</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ioåŒ…ä¸‹çš„Read()å’ŒWrite()æ–¹æ³•ï¼Œè¾¹è¯»è¾¹å†™ï¼Œå°±èƒ½å¤Ÿå®ç°æ–‡ä»¶çš„å¤åˆ¶ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æŒ‰å—è¯»å–æ–‡ä»¶ï¼Œå—çš„å¤§å°ä¹Ÿä¼šå½±å“åˆ°ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	srcFile := <span class="string">&quot;main/1.txt&quot;</span></span><br><span class="line">	destFile := <span class="string">&quot;main/2.txt&quot;</span></span><br><span class="line">	total, err := copyFile1(srcFile, destFile)</span><br><span class="line">	fmt.Println(total, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¯¥å‡½æ•°çš„åŠŸèƒ½ï¼šå®ç°æ–‡ä»¶çš„æ‹·è´ï¼Œè¿”å›å€¼æ˜¯æ‹·è´çš„æ€»æ•°é‡(å­—èŠ‚),é”™è¯¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copyFile1</span><span class="params">(srcFile, destFile <span class="type">string</span>)</span></span> (<span class="type">int</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	file1, err := os.Open(srcFile)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	file2, err := os.OpenFile(destFile, os.O_WRONLY|os.O_CREATE, os.ModePerm)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> file1.Close()</span><br><span class="line">	<span class="keyword">defer</span> file2.Close()</span><br><span class="line">	<span class="comment">// æ‹·è´æ•°æ®</span></span><br><span class="line">	bs := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">1024</span>, <span class="number">1024</span>)</span><br><span class="line">	n := <span class="number">-1</span> <span class="comment">//è¯»å–çš„æ•°æ®é‡</span></span><br><span class="line">	total := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		n, err = file1.Read(bs)</span><br><span class="line">		<span class="keyword">if</span> err == io.EOF || n == <span class="number">0</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;æ‹·è´å®Œæ¯•ã€‚ã€‚&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;æŠ¥é”™äº†ã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line">			<span class="keyword">return</span> total, err</span><br><span class="line">		&#125;</span><br><span class="line">		total += n</span><br><span class="line">		file2.Write(bs[:n])</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> total, <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ioåŒ…ä¸‹çš„Copy"><a href="#ioåŒ…ä¸‹çš„Copy" class="headerlink" title="ioåŒ…ä¸‹çš„Copy()"></a>ioåŒ…ä¸‹çš„Copy()</h2><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ioåŒ…ä¸‹çš„Copy()æ–¹æ³•ã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	srcFile := <span class="string">&quot;main/1.txt&quot;</span></span><br><span class="line">	destFile := <span class="string">&quot;main/2.txt&quot;</span></span><br><span class="line">	total, err := copyFile2(srcFile, destFile)</span><br><span class="line">	fmt.Println(total, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copyFile2</span><span class="params">(srcFile, destFile <span class="type">string</span>)</span></span> (<span class="type">int64</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	file1, err := os.Open(srcFile)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	file2, err := os.OpenFile(destFile, os.O_WRONLY|os.O_CREATE, os.ModePerm)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> file1.Close()</span><br><span class="line">	<span class="keyword">defer</span> file2.Close()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> io.Copy(file2, file1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ioåŒ…ä¸­ï¼Œä¸æ­¢æä¾›äº†Copy()æ–¹æ³•ï¼Œè¿˜æœ‰å¦å¤–2ä¸ªå…¬å¼€çš„copyæ–¹æ³•ï¼šCopyN()ï¼ŒCopyBuffer()ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Copyï¼ˆdst,srcï¼‰ <span class="comment">//ä¸ºå¤åˆ¶src å…¨éƒ¨åˆ° dst ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line">CopyN(dst,src,n) <span class="comment">//ä¸ºå¤åˆ¶src ä¸­ n ä¸ªå­—èŠ‚åˆ° dstã€‚</span></span><br><span class="line"></span><br><span class="line">CopyBufferï¼ˆdst,src,bufï¼‰<span class="comment">//ä¸ºæŒ‡å®šä¸€ä¸ªbufç¼“å­˜åŒºï¼Œä»¥è¿™ä¸ªå¤§å°å®Œå…¨å¤åˆ¶ã€‚</span></span><br></pre></td></tr></table></figure>

<p>æ— è®ºæ˜¯å“ªä¸ªcopyæ–¹æ³•æœ€ç»ˆéƒ½æ˜¯ç”±copyBufferï¼ˆï¼‰è¿™ä¸ªç§æœ‰æ–¹æ³•å®ç°çš„ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copyBuffer</span><span class="params">(dst Writer, src Reader, buf []<span class="type">byte</span>)</span></span> (written <span class="type">int64</span>, err <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="comment">// If the reader has a WriteTo method, use it to do the copy.</span></span><br><span class="line">	<span class="comment">// Avoids an allocation and a copy.</span></span><br><span class="line">	<span class="keyword">if</span> wt, ok := src.(WriterTo); ok &#123;</span><br><span class="line">		<span class="keyword">return</span> wt.WriteTo(dst)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// Similarly, if the writer has a ReadFrom method, use it to do the copy.</span></span><br><span class="line">	<span class="keyword">if</span> rt, ok := dst.(ReaderFrom); ok &#123;</span><br><span class="line">		<span class="keyword">return</span> rt.ReadFrom(src)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> buf == <span class="literal">nil</span> &#123;</span><br><span class="line">		size := <span class="number">32</span> * <span class="number">1024</span></span><br><span class="line">		<span class="keyword">if</span> l, ok := src.(*LimitedReader); ok &amp;&amp; <span class="type">int64</span>(size) &gt; l.N &#123;</span><br><span class="line">			<span class="keyword">if</span> l.N &lt; <span class="number">1</span> &#123;</span><br><span class="line">				size = <span class="number">1</span></span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				size = <span class="type">int</span>(l.N)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		buf = <span class="built_in">make</span>([]<span class="type">byte</span>, size)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		nr, er := src.Read(buf)</span><br><span class="line">		<span class="keyword">if</span> nr &gt; <span class="number">0</span> &#123;</span><br><span class="line">			nw, ew := dst.Write(buf[<span class="number">0</span>:nr])</span><br><span class="line">			<span class="keyword">if</span> nw &gt; <span class="number">0</span> &#123;</span><br><span class="line">				written += <span class="type">int64</span>(nw)</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> ew != <span class="literal">nil</span> &#123;</span><br><span class="line">				err = ew</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> nr != nw &#123;</span><br><span class="line">				err = ErrShortWrite</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> er != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> er != EOF &#123;</span><br><span class="line">				err = er</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> written, err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»è¿™éƒ¨åˆ†ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå¤åˆ¶ä¸»è¦åˆ†ä¸º3ç§ã€‚</p>
<p> 1.å¦‚æœè¢«å¤åˆ¶çš„Readerï¼ˆsrcï¼‰ä¼šå°è¯•èƒ½å¦æ–­è¨€æˆwriterToï¼Œå¦‚æœå¯ä»¥åˆ™ç›´æ¥è°ƒç”¨ä¸‹é¢çš„writerToæ–¹æ³•</p>
<p> 2.å¦‚æœ Writerï¼ˆdstï¼‰ ä¼šå°è¯•èƒ½å¦æ–­è¨€æˆReadFrom ï¼Œå¦‚æœå¯ä»¥åˆ™ç›´æ¥è°ƒç”¨ä¸‹é¢çš„readfromæ–¹æ³•</p>
<p> 3.å¦‚æœéƒ½æœ¨æœ‰å®ç°ï¼Œåˆ™è°ƒç”¨åº•å±‚readå®ç°å¤åˆ¶ã€‚</p>
<p>å…¶ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> buf == <span class="literal">nil</span> &#123;</span><br><span class="line">		size := <span class="number">32</span> * <span class="number">1024</span></span><br><span class="line">		<span class="keyword">if</span> l, ok := src.(*LimitedReader); ok &amp;&amp; <span class="type">int64</span>(size) &gt; l.N &#123;</span><br><span class="line">			<span class="keyword">if</span> l.N &lt; <span class="number">1</span> &#123;</span><br><span class="line">				size = <span class="number">1</span></span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				size = <span class="type">int</span>(l.N)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		buf = <span class="built_in">make</span>([]<span class="type">byte</span>, size)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p>è¿™éƒ¨åˆ†ä¸»è¦æ˜¯å®ç°äº†å¯¹Copyå’ŒCopyNçš„å¤„ç†ã€‚é€šè¿‡ä¸Šé¢çš„è°ƒç”¨å…³ç³»å›¾ï¼Œæˆ‘ä»¬çœ‹å‡ºCopyNåœ¨è°ƒç”¨åï¼Œä¼šæŠŠReaderè½¬æˆLimiteReaderã€‚</p>
<p>åŒºåˆ«æ˜¯å¦‚æœCopyï¼Œç›´æ¥å»ºç«‹ä¸€ä¸ªç¼“å­˜åŒºé»˜è®¤å¤§å°ä¸º 32* 1024 çš„bufï¼Œå¦‚æœæ˜¯CopyN ä¼šå…ˆåˆ¤æ–­ è¦å¤åˆ¶çš„å­—èŠ‚æ•°ï¼Œå¦‚æœå°äºé»˜è®¤å¤§å°ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç­‰äºè¦å¤åˆ¶å­—èŠ‚æ•°çš„bufã€‚</p>
<h2 id="ioutilåŒ…"><a href="#ioutilåŒ…" class="headerlink" title="ioutilåŒ…"></a>ioutilåŒ…</h2><p>ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯ä½¿ç”¨ioutilåŒ…ä¸­çš„ <code>ioutil.WriteFile()</code>å’Œ<code>ioutil.ReadFile()</code>ï¼Œä½†ç”±äºä½¿ç”¨ä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶ï¼Œå†ä¸€æ¬¡æ€§å†™å…¥æ–‡ä»¶çš„æ–¹å¼ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•ä¸é€‚ç”¨äºå¤§æ–‡ä»¶ï¼Œå®¹æ˜“å†…å­˜æº¢å‡ºã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	srcFile := <span class="string">&quot;main/1.txt&quot;</span></span><br><span class="line">	destFile := <span class="string">&quot;main/2.txt&quot;</span></span><br><span class="line">	total, err := copyFile3(srcFile, destFile)</span><br><span class="line">	fmt.Println(total, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copyFile3</span><span class="params">(srcFile, destFile <span class="type">string</span>)</span></span> (<span class="type">int</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	input, err := ioutil.ReadFile(srcFile)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	err = ioutil.WriteFile(destFile, input, <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;æ“ä½œå¤±è´¥ï¼š&quot;</span>, destFile)</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(input), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›®å‰ReadFileå’ŒWriteFileå·²å¼ƒç”¨ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ€åï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹è¿™3ç§æ‹·è´éœ€è¦èŠ±è´¹æ—¶é—´ï¼Œæ‹·è´çš„æ–‡ä»¶éƒ½æ˜¯ä¸€æ ·çš„ä¸€ä¸ªmp4æ–‡ä»¶(400M)ã€‚</p>
<p>ç¬¬ä¸€ç§ï¼šioåŒ…ä¸‹Read()å’ŒWrite()ç›´æ¥è¯»å†™ï¼šæˆ‘ä»¬è‡ªå·±åˆ›å»ºè¯»å–æ•°æ®çš„åˆ‡ç‰‡çš„å¤§å°ï¼Œç›´æ¥å½±å“æ€§èƒ½ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ‹·è´å®Œæ¯•ã€‚ã€‚</span><br><span class="line">&lt;nil&gt;</span><br><span class="line">401386819</span><br><span class="line"></span><br><span class="line">real    0m7.911s</span><br><span class="line">user    0m2.900s</span><br><span class="line">sys     0m7.661s</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§ï¼šioåŒ…ä¸‹Copy()æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;nil&gt;</span><br><span class="line">401386819</span><br><span class="line"></span><br><span class="line">real    0m1.594s</span><br><span class="line">user    0m0.533s</span><br><span class="line">sys     0m1.136s</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§ï¼šioutilåŒ…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;nil&gt;</span><br><span class="line">401386819</span><br><span class="line"></span><br><span class="line">real    0m1.515s</span><br><span class="line">user    0m0.339s</span><br><span class="line">sys     0m0.625s</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™3ç§æ–¹å¼ï¼Œåœ¨æ€§èƒ½ä¸Šï¼Œä¸ç®¡æ˜¯è¿˜æ˜¯io.Copy()è¿˜æ˜¯ioutilåŒ…ï¼Œæ€§èƒ½éƒ½æ˜¯è¿˜ä¸é”™çš„ã€‚</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–­ç‚¹ç»­ä¼ ä¸bufioåŒ…</title>
    <url>/2023/06/12/Go/15/</url>
    <content><![CDATA[<h1 id="æ–­ç‚¹ç»­ä¼ "><a href="#æ–­ç‚¹ç»­ä¼ " class="headerlink" title="æ–­ç‚¹ç»­ä¼ "></a>æ–­ç‚¹ç»­ä¼ </h1><h2 id="Seekeræ¥å£"><a href="#Seekeræ¥å£" class="headerlink" title="Seekeræ¥å£"></a>Seekeræ¥å£</h2><p>Seekeræ˜¯åŒ…è£…åŸºæœ¬Seekæ–¹æ³•çš„æ¥å£ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Seeker <span class="keyword">interface</span> &#123;</span><br><span class="line">        Seek(offset <span class="type">int64</span>, whence <span class="type">int</span>) (<span class="type">int64</span>, <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>seek(offset,whence),è®¾ç½®æŒ‡é’ˆå…‰æ ‡çš„ä½ç½®ï¼Œéšæœºè¯»å†™æ–‡ä»¶ï¼š</p>
<p>â€‹	ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåç§»é‡<br>â€‹	ç¬¬äºŒä¸ªå‚æ•°ï¼šå¦‚ä½•è®¾ç½®			</p>
<p>â€‹				0ï¼šseekStartè¡¨ç¤ºç›¸å¯¹äºæ–‡ä»¶å¼€å§‹ï¼Œ<br>â€‹				1ï¼šseekCurrentè¡¨ç¤ºç›¸å¯¹äºå½“å‰åç§»é‡ï¼Œ<br>â€‹				2ï¼šseek endè¡¨ç¤ºç›¸å¯¹äºç»“æŸã€‚</p>
<p>1.txtå†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ABCDEFababHelloWorldHelloWorld</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	fileName := <span class="string">&quot;main/1.txt&quot;</span></span><br><span class="line">	file, err := os.OpenFile(fileName, os.O_RDWR, os.ModePerm)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line">	<span class="comment">//è¯»å†™</span></span><br><span class="line">	bs := []<span class="type">byte</span>&#123;<span class="number">0</span>&#125;</span><br><span class="line">	file.Read(bs)</span><br><span class="line">	fmt.Println(<span class="type">string</span>(bs))</span><br><span class="line"></span><br><span class="line">	file.Seek(<span class="number">4</span>, io.SeekStart)</span><br><span class="line">	file.Read(bs)</span><br><span class="line">	fmt.Println(<span class="type">string</span>(bs))</span><br><span class="line"></span><br><span class="line">	file.Seek(<span class="number">2</span>, <span class="number">0</span>) <span class="comment">//SeekStart</span></span><br><span class="line">	file.Read(bs)</span><br><span class="line">	fmt.Println(<span class="type">string</span>(bs))</span><br><span class="line"></span><br><span class="line">	file.Seek(<span class="number">3</span>, io.SeekCurrent)</span><br><span class="line">	file.Read(bs)</span><br><span class="line">	fmt.Println(<span class="type">string</span>(bs))</span><br><span class="line"></span><br><span class="line">	file.Seek(<span class="number">0</span>, io.SeekEnd)</span><br><span class="line">	file.WriteString(<span class="string">&quot;ABC&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">A</span><br><span class="line">E</span><br><span class="line">C</span><br><span class="line">a</span><br></pre></td></tr></table></figure>

<h2 id="æ–­ç‚¹ç»­ä¼ -1"><a href="#æ–­ç‚¹ç»­ä¼ -1" class="headerlink" title="æ–­ç‚¹ç»­ä¼ "></a>æ–­ç‚¹ç»­ä¼ </h2><p>é¦–å…ˆæ€è€ƒå‡ ä¸ªé—®é¢˜<br>Q1ï¼šå¦‚æœä½ è¦ä¼ çš„æ–‡ä»¶ï¼Œæ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆæ˜¯å¦æœ‰æ–¹æ³•å¯ä»¥ç¼©çŸ­è€—æ—¶ï¼Ÿ<br>Q2ï¼šå¦‚æœåœ¨æ–‡ä»¶ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œç¨‹åºå› å„ç§åŸå› è¢«è¿«ä¸­æ–­äº†ï¼Œé‚£ä¹ˆä¸‹æ¬¡å†é‡å¯æ—¶ï¼Œæ–‡ä»¶æ˜¯å¦è¿˜éœ€è¦é‡å¤´å¼€å§‹ï¼Ÿ<br>Q3ï¼šä¼ é€’æ–‡ä»¶çš„æ—¶å€™ï¼Œæ”¯æŒæš‚åœå’Œæ¢å¤ä¹ˆï¼Ÿå³ä½¿è¿™ä¸¤ä¸ªæ“ä½œåˆ†å¸ƒåœ¨ç¨‹åºè¿›ç¨‹è¢«æ€å‰åã€‚</p>
<p>é€šè¿‡æ–­ç‚¹ç»­ä¼ å¯ä»¥å®ç°ï¼Œä¸åŒçš„è¯­è¨€æœ‰ä¸åŒçš„å®ç°æ–¹å¼ã€‚æˆ‘ä»¬çœ‹çœ‹Goè¯­è¨€ä¸­ï¼Œé€šè¿‡Seek()æ–¹æ³•å¦‚ä½•å®ç°ï¼š</p>
<p>å…ˆè¯´ä¸€ä¸‹æ€è·¯ï¼šæƒ³å®ç°æ–­ç‚¹ç»­ä¼ ï¼Œä¸»è¦å°±æ˜¯è®°ä½ä¸Šä¸€æ¬¡å·²ç»ä¼ é€’äº†å¤šå°‘æ•°æ®ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œè®°å½•å·²ç»ä¼ é€’çš„æ•°æ®é‡ï¼Œå½“æ¢å¤ä¼ é€’çš„æ—¶å€™ï¼Œå…ˆä»ä¸´æ—¶æ–‡ä»¶ä¸­è¯»å–ä¸Šæ¬¡å·²ç»ä¼ é€’çš„æ•°æ®é‡ï¼Œç„¶åé€šè¿‡Seek()æ–¹æ³•ï¼Œè®¾ç½®åˆ°è¯¥è¯»å’Œè¯¥å†™çš„ä½ç½®ï¼Œå†ç»§ç»­ä¼ é€’æ•°æ®ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	srcFile := <span class="string">&quot;main/1.txt&quot;</span></span><br><span class="line">	destFile := srcFile[strings.LastIndex(srcFile, <span class="string">&quot;/&quot;</span>)+<span class="number">1</span>:]</span><br><span class="line">	tempFile := destFile + <span class="string">&quot;temp.txt&quot;</span></span><br><span class="line"></span><br><span class="line">	file1, err := os.Open(srcFile)</span><br><span class="line">	file2, err := os.OpenFile(destFile, os.O_CREATE|os.O_WRONLY, os.ModePerm)</span><br><span class="line">	file3, err := os.OpenFile(tempFile, os.O_CREATE|os.O_RDWR, os.ModePerm)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> file1.Close()</span><br><span class="line">	<span class="keyword">defer</span> file2.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//step1ï¼šå…ˆè¯»å–ä¸´æ—¶æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå†seek</span></span><br><span class="line">	file3.Seek(<span class="number">0</span>, io.SeekStart)</span><br><span class="line">	bs := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">	n1, err := file3.Read(bs)</span><br><span class="line">	countStr := <span class="type">string</span>(bs[:n1])</span><br><span class="line">	count, err := strconv.ParseInt(countStr, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//step2ï¼šè®¾ç½®è¯»ï¼Œå†™çš„ä½ç½®ï¼š</span></span><br><span class="line">	file1.Seek(count, io.SeekStart)</span><br><span class="line">	file2.Seek(count, io.SeekStart)</span><br><span class="line">	data := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">1024</span>, <span class="number">1024</span>)</span><br><span class="line">	n2 := <span class="number">-1</span>            <span class="comment">//è¯»å–çš„æ•°æ®é‡</span></span><br><span class="line">	n3 := <span class="number">-1</span>            <span class="comment">//å†™å‡ºçš„æ•°æ®é‡</span></span><br><span class="line">	total := <span class="type">int</span>(count) <span class="comment">//è¯»å–çš„æ€»é‡</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//step3ï¼šå¤åˆ¶æ–‡ä»¶</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		n2, err = file1.Read(data)</span><br><span class="line">		<span class="keyword">if</span> err == io.EOF || n2 == <span class="number">0</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;æ–‡ä»¶å¤åˆ¶å®Œæ¯•ã€‚ã€‚&quot;</span>)</span><br><span class="line">			file3.Close()</span><br><span class="line">			os.Remove(tempFile)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		n3, err = file2.Write(data[:n2])</span><br><span class="line">		total += n3</span><br><span class="line"></span><br><span class="line">		<span class="comment">//å°†å¤åˆ¶çš„æ€»é‡ï¼Œå­˜å‚¨åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­</span></span><br><span class="line">		file3.Seek(<span class="number">0</span>, io.SeekStart)</span><br><span class="line">		file3.WriteString(strconv.Itoa(total))</span><br><span class="line"></span><br><span class="line">		fmt.Printf(<span class="string">&quot;total:%d\n&quot;</span>, total)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//å‡è£…æ–­ç”µ</span></span><br><span class="line">		<span class="comment">//if total &gt; 8000&#123;</span></span><br><span class="line">		<span class="comment">//	panic(&quot;å‡è£…æ–­ç”µäº†ã€‚ã€‚ã€‚&quot;)</span></span><br><span class="line">		<span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">HandleErr</span><span class="params">(err <span class="type">error</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="bufioåŒ…"><a href="#bufioåŒ…" class="headerlink" title="bufioåŒ…"></a>bufioåŒ…</h1><h2 id="bufioåŒ…åŸç†"><a href="#bufioåŒ…åŸç†" class="headerlink" title="bufioåŒ…åŸç†"></a>bufioåŒ…åŸç†</h2><p>bufio æ˜¯é€šè¿‡ç¼“å†²æ¥æé«˜æ•ˆç‡ã€‚</p>
<p>ioæ“ä½œæœ¬èº«çš„æ•ˆç‡å¹¶ä¸ä½ï¼Œä½çš„æ˜¯é¢‘ç¹çš„è®¿é—®æœ¬åœ°ç£ç›˜çš„æ–‡ä»¶ã€‚æ‰€ä»¥bufioå°±æä¾›äº†ç¼“å†²åŒº(åˆ†é…ä¸€å—å†…å­˜)ï¼Œè¯»å’Œå†™éƒ½å…ˆåœ¨ç¼“å†²åŒºä¸­ï¼Œæœ€åå†è¯»å†™æ–‡ä»¶ï¼Œæ¥é™ä½è®¿é—®æœ¬åœ°ç£ç›˜çš„æ¬¡æ•°ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚</p>
<p>ç®€å•çš„è¯´å°±æ˜¯ï¼ŒæŠŠæ–‡ä»¶è¯»å–è¿›ç¼“å†²ï¼ˆå†…å­˜ï¼‰ä¹‹åå†è¯»å–çš„æ—¶å€™å°±å¯ä»¥é¿å…æ–‡ä»¶ç³»ç»Ÿçš„io ä»è€Œæé«˜é€Ÿåº¦ã€‚åŒç†ï¼Œåœ¨è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œå…ˆæŠŠæ–‡ä»¶å†™å…¥ç¼“å†²ï¼ˆå†…å­˜ï¼‰ï¼Œç„¶åç”±ç¼“å†²å†™å…¥æ–‡ä»¶ç³»ç»Ÿã€‚çœ‹å®Œä»¥ä¸Šè§£é‡Šæœ‰äººå¯èƒ½ä¼šè¡¨ç¤ºå›°æƒ‘äº†ï¼Œç›´æ¥æŠŠ å†…å®¹-&gt;æ–‡ä»¶ å’Œ å†…å®¹-&gt;ç¼“å†²-&gt;æ–‡ä»¶ç›¸æ¯”ï¼Œ ç¼“å†²åŒºå¥½åƒæ²¡æœ‰èµ·åˆ°ä½œç”¨å˜›ã€‚å…¶å®ç¼“å†²åŒºçš„è®¾è®¡æ˜¯ä¸ºäº†å­˜å‚¨å¤šæ¬¡çš„å†™å…¥ï¼Œæœ€åä¸€å£æ°”æŠŠç¼“å†²åŒºå†…å®¹å†™å…¥æ–‡ä»¶ã€‚</p>
<p>bufio å°è£…äº†io.Readeræˆ–io.Writeræ¥å£å¯¹è±¡ï¼Œå¹¶åˆ›å»ºå¦ä¸€ä¸ªä¹Ÿå®ç°äº†è¯¥æ¥å£çš„å¯¹è±¡ã€‚</p>
<p>io.Readeræˆ–io.Writer æ¥å£å®ç°read() å’Œ write() æ–¹æ³•ï¼Œå¯¹äºå®ç°è¿™ä¸ªæ¥å£çš„å¯¹è±¡éƒ½æ˜¯å¯ä»¥ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•çš„ã€‚</p>
<h3 id="Readerå¯¹è±¡"><a href="#Readerå¯¹è±¡" class="headerlink" title="Readerå¯¹è±¡"></a>Readerå¯¹è±¡</h3><p>bufio.Reader æ˜¯bufioä¸­å¯¹io.Reader çš„å°è£…</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Reader implements buffering for an io.Reader object.</span></span><br><span class="line"><span class="keyword">type</span> Reader <span class="keyword">struct</span> &#123;</span><br><span class="line">	buf          []<span class="type">byte</span></span><br><span class="line">	rd           io.Reader <span class="comment">// reader provided by the client</span></span><br><span class="line">	r, w         <span class="type">int</span>       <span class="comment">// buf read and write positions</span></span><br><span class="line">	err          <span class="type">error</span></span><br><span class="line">	lastByte     <span class="type">int</span> <span class="comment">// last byte read for UnreadByte; -1 means invalid</span></span><br><span class="line">	lastRuneSize <span class="type">int</span> <span class="comment">// size of last rune read for UnreadRune; -1 means invalid</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>bufio.Read(p []byte) ç›¸å½“äºè¯»å–å¤§å°len(p)çš„å†…å®¹ï¼Œæ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>å½“ç¼“å­˜åŒºæœ‰å†…å®¹çš„æ—¶ï¼Œå°†ç¼“å­˜åŒºå†…å®¹å…¨éƒ¨å¡«å…¥på¹¶æ¸…ç©ºç¼“å­˜åŒº</li>
<li>å½“ç¼“å­˜åŒºæ²¡æœ‰å†…å®¹çš„æ—¶å€™ä¸”len(p)&gt;len(buf),å³è¦è¯»å–çš„å†…å®¹æ¯”ç¼“å­˜åŒºè¿˜è¦å¤§ï¼Œç›´æ¥å»æ–‡ä»¶è¯»å–å³å¯</li>
<li>å½“ç¼“å­˜åŒºæ²¡æœ‰å†…å®¹çš„æ—¶å€™ä¸”len(p)&lt;len(buf),å³è¦è¯»å–çš„å†…å®¹æ¯”ç¼“å­˜åŒºå°ï¼Œç¼“å­˜åŒºä»æ–‡ä»¶è¯»å–å†…å®¹å……æ»¡ç¼“å­˜åŒºï¼Œå¹¶å°†på¡«æ»¡ï¼ˆæ­¤æ—¶ç¼“å­˜åŒºæœ‰å‰©ä½™å†…å®¹ï¼‰</li>
<li>ä»¥åå†æ¬¡è¯»å–æ—¶ç¼“å­˜åŒºæœ‰å†…å®¹ï¼Œå°†ç¼“å­˜åŒºå†…å®¹å…¨éƒ¨å¡«å…¥på¹¶æ¸…ç©ºç¼“å­˜åŒºï¼ˆæ­¤æ—¶å’Œæƒ…å†µ1ä¸€æ ·ï¼‰</li>
</ol>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fileName := <span class="string">&quot;main/1.txt&quot;</span></span><br><span class="line">	file, err := os.Open(fileName)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">(file *os.File)</span></span> &#123;</span><br><span class="line">		err := file.Close()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;(file)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆ›å»ºReaderå¯¹è±¡</span></span><br><span class="line">	<span class="comment">//b1 := bufio.NewReader(file)</span></span><br><span class="line">	<span class="comment">//1.Read()ï¼Œé«˜æ•ˆè¯»å–</span></span><br><span class="line">	<span class="comment">//p := make([]byte, 1024)</span></span><br><span class="line">	<span class="comment">//n1, err := b1.Read(p)</span></span><br><span class="line">	<span class="comment">//fmt.Println(n1)</span></span><br><span class="line">	<span class="comment">//fmt.Println(string(p[:n1]))</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.ReadLine()</span></span><br><span class="line">	<span class="comment">//data, flag, err := b1.ReadLine()</span></span><br><span class="line">	<span class="comment">//fmt.Println(flag)</span></span><br><span class="line">	<span class="comment">//fmt.Println(err)</span></span><br><span class="line">	<span class="comment">//fmt.Println(data)</span></span><br><span class="line">	<span class="comment">//fmt.Println(string(data))</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.ReadString()</span></span><br><span class="line">	<span class="comment">//s1, err := b1.ReadString(&#x27;\n&#x27;)</span></span><br><span class="line">	<span class="comment">//fmt.Println(err)</span></span><br><span class="line">	<span class="comment">//fmt.Println(s1)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//s1, err = b1.ReadString(&#x27;\n&#x27;)</span></span><br><span class="line">	<span class="comment">//fmt.Println(err)</span></span><br><span class="line">	<span class="comment">//fmt.Println(s1)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//s1, err = b1.ReadString(&#x27;\n&#x27;)</span></span><br><span class="line">	<span class="comment">//fmt.Println(err)</span></span><br><span class="line">	<span class="comment">//fmt.Println(s1)</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//for &#123;</span></span><br><span class="line">	<span class="comment">//	s1, err := b1.ReadString(&#x27;\n&#x27;)</span></span><br><span class="line">	<span class="comment">//	if err == io.EOF &#123;</span></span><br><span class="line">	<span class="comment">//		fmt.Println(&quot;è¯»å–å®Œæ¯•ã€‚ã€‚&quot;)</span></span><br><span class="line">	<span class="comment">//		break</span></span><br><span class="line">	<span class="comment">//	&#125;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(s1)</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//4.ReadBytes()</span></span><br><span class="line">	<span class="comment">//data, err := b1.ReadBytes(&#x27;\n&#x27;)</span></span><br><span class="line">	<span class="comment">//fmt.Println(err)</span></span><br><span class="line">	<span class="comment">//fmt.Println(string(data))</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Scanner,è¾“å…¥çš„å†…å®¹å¦‚æœæœ‰ç©ºæ ¼ï¼Œåªèƒ½æ¥æ”¶åˆ°ç©ºæ ¼å‰é¢çš„æ•°æ®</span></span><br><span class="line">	<span class="comment">//s2 := &quot;&quot;</span></span><br><span class="line">	<span class="comment">//fmt.Scanln(&amp;s2)</span></span><br><span class="line">	<span class="comment">//fmt.Println(s2)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//å¯ä»¥æ¥æ”¶åˆ°ç©ºæ ¼åé¢çš„æ•°æ®</span></span><br><span class="line">	b2 := bufio.NewReader(os.Stdin)</span><br><span class="line">	s2, _ := b2.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">	fmt.Println(s2)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Writerå¯¹è±¡"><a href="#Writerå¯¹è±¡" class="headerlink" title="Writerå¯¹è±¡"></a>Writerå¯¹è±¡</h3><p>bufio.Writer æ˜¯bufioä¸­å¯¹io.Writer çš„å°è£…</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Writer implements buffering for an io.Writer object.</span></span><br><span class="line"><span class="comment">// If an error occurs writing to a Writer, no more data will be</span></span><br><span class="line"><span class="comment">// accepted and all subsequent writes, and Flush, will return the error.</span></span><br><span class="line"><span class="comment">// After all data has been written, the client should call the</span></span><br><span class="line"><span class="comment">// Flush method to guarantee all data has been forwarded to</span></span><br><span class="line"><span class="comment">// the underlying io.Writer.</span></span><br><span class="line"><span class="keyword">type</span> Writer <span class="keyword">struct</span> &#123;</span><br><span class="line">	err <span class="type">error</span></span><br><span class="line">	buf []<span class="type">byte</span></span><br><span class="line">	n   <span class="type">int</span></span><br><span class="line">	wr  io.Writer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>bufio.Write(p []byte) çš„æ€è·¯å¦‚ä¸‹</p>
<ol>
<li>åˆ¤æ–­bufä¸­å¯ç”¨å®¹é‡æ˜¯å¦å¯ä»¥æ”¾ä¸‹ p</li>
<li>å¦‚æœèƒ½æ”¾ä¸‹ï¼Œç›´æ¥æŠŠpæ‹¼æ¥åˆ°bufåé¢ï¼Œå³æŠŠå†…å®¹æ”¾åˆ°ç¼“å†²åŒº</li>
<li>å¦‚æœç¼“å†²åŒºçš„å¯ç”¨å®¹é‡ä¸è¶³ä»¥æ”¾ä¸‹ï¼Œä¸”æ­¤æ—¶ç¼“å†²åŒºæ˜¯ç©ºçš„ï¼Œç›´æ¥æŠŠpå†™å…¥æ–‡ä»¶å³å¯</li>
<li>å¦‚æœç¼“å†²åŒºçš„å¯ç”¨å®¹é‡ä¸è¶³ä»¥æ”¾ä¸‹ï¼Œä¸”æ­¤æ—¶ç¼“å†²åŒºæœ‰å†…å®¹ï¼Œåˆ™ç”¨pæŠŠç¼“å†²åŒºå¡«æ»¡ï¼ŒæŠŠç¼“å†²åŒºæ‰€æœ‰å†…å®¹å†™å…¥æ–‡ä»¶ï¼Œå¹¶æ¸…ç©ºç¼“å†²åŒº</li>
<li>åˆ¤æ–­pçš„å‰©ä½™å†…å®¹å¤§å°èƒ½å¦æ”¾åˆ°ç¼“å†²åŒºï¼Œå¦‚æœèƒ½æ”¾ä¸‹ï¼ˆæ­¤æ—¶å’Œæ­¥éª¤1æƒ…å†µä¸€æ ·ï¼‰åˆ™æŠŠå†…å®¹æ”¾åˆ°ç¼“å†²åŒº</li>
<li>å¦‚æœpçš„å‰©ä½™å†…å®¹ä¾æ—§å¤§äºç¼“å†²åŒºï¼Œï¼ˆæ³¨æ„æ­¤æ—¶ç¼“å†²åŒºæ˜¯ç©ºçš„ï¼Œæƒ…å†µå’Œæ­¥éª¤3ä¸€æ ·ï¼‰åˆ™æŠŠpçš„å‰©ä½™å†…å®¹ç›´æ¥å†™å…¥æ–‡ä»¶</li>
</ol>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fileName := <span class="string">&quot;main/2.txt&quot;</span></span><br><span class="line">	file, err := os.OpenFile(fileName, os.O_CREATE|os.O_WRONLY, os.ModePerm)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">(file *os.File)</span></span> &#123;</span><br><span class="line">		err := file.Close()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;(file)</span><br><span class="line"></span><br><span class="line">	w1 := bufio.NewWriter(file)</span><br><span class="line">	<span class="comment">//n, err := w1.WriteString(&quot;helloworld&quot;)</span></span><br><span class="line">	<span class="comment">//fmt.Println(err)</span></span><br><span class="line">	<span class="comment">//fmt.Println(n)</span></span><br><span class="line">	<span class="comment">//err = w1.Flush()</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125; //åˆ·æ–°ç¼“å†²åŒº</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">1000</span>; i++ &#123;</span><br><span class="line">		_, err2 := w1.WriteString(fmt.Sprintf(<span class="string">&quot;%d:hello&quot;</span>, i))</span><br><span class="line">		<span class="keyword">if</span> err2 != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	err = w1.Flush()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="bufioåŒ…-1"><a href="#bufioåŒ…-1" class="headerlink" title="bufioåŒ…"></a>bufioåŒ…</h2><p>bufioåŒ…å®ç°äº†æœ‰ç¼“å†²çš„I&#x2F;Oã€‚å®ƒåŒ…è£…ä¸€ä¸ªio.Readeræˆ–io.Writeræ¥å£å¯¹è±¡ï¼Œåˆ›å»ºå¦ä¸€ä¸ªä¹Ÿå®ç°äº†è¯¥æ¥å£ï¼Œä¸”åŒæ—¶è¿˜æä¾›äº†ç¼“å†²å’Œä¸€äº›æ–‡æœ¬I&#x2F;Oçš„å¸®åŠ©å‡½æ•°çš„å¯¹è±¡ã€‚</p>
<h3 id="bufio-Reader"><a href="#bufio-Reader" class="headerlink" title="bufio.Reader"></a>bufio.Reader</h3><p>bufio.Reader å®ç°äº†å¦‚ä¸‹æ¥å£ï¼š<br>    io.Reader<br>    io.WriterTo<br>    io.ByteScanner<br>    io.RuneScanner</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// NewReaderSize å°† rd å°è£…æˆä¸€ä¸ªå¸¦ç¼“å­˜çš„ bufio.Reader å¯¹è±¡ï¼Œ</span></span><br><span class="line"><span class="comment">// ç¼“å­˜å¤§å°ç”± size æŒ‡å®šï¼ˆå¦‚æœå°äº 16 åˆ™ä¼šè¢«è®¾ç½®ä¸º 16ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœ rd çš„åŸºç±»å‹å°±æ˜¯æœ‰è¶³å¤Ÿç¼“å­˜çš„ bufio.Reader ç±»å‹ï¼Œåˆ™ç›´æ¥å°†</span></span><br><span class="line"><span class="comment">// rd è½¬æ¢ä¸ºåŸºç±»å‹è¿”å›ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewReaderSize</span><span class="params">(rd io.Reader, size <span class="type">int</span>)</span></span> *Reader</span><br><span class="line"></span><br><span class="line"><span class="comment">// NewReader ç›¸å½“äº NewReaderSize(rd, 4096)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewReader</span><span class="params">(rd io.Reader)</span></span> *Reader</span><br><span class="line"></span><br><span class="line"><span class="comment">// Peek è¿”å›ç¼“å­˜çš„ä¸€ä¸ªåˆ‡ç‰‡ï¼Œè¯¥åˆ‡ç‰‡å¼•ç”¨ç¼“å­˜ä¸­å‰ n ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œ</span></span><br><span class="line"><span class="comment">// è¯¥æ“ä½œä¸ä¼šå°†æ•°æ®è¯»å‡ºï¼Œåªæ˜¯å¼•ç”¨ï¼Œå¼•ç”¨çš„æ•°æ®åœ¨ä¸‹ä¸€æ¬¡è¯»å–æ“ä½œä¹‹</span></span><br><span class="line"><span class="comment">// å‰æ˜¯æœ‰æ•ˆçš„ã€‚å¦‚æœåˆ‡ç‰‡é•¿åº¦å°äº nï¼Œåˆ™è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯è¯´æ˜åŸå› ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœ n å¤§äºç¼“å­˜çš„æ€»å¤§å°ï¼Œåˆ™è¿”å› ErrBufferFullã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span></span> Peek(n <span class="type">int</span>) ([]<span class="type">byte</span>, <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Read ä» b ä¸­è¯»å‡ºæ•°æ®åˆ° p ä¸­ï¼Œè¿”å›è¯»å‡ºçš„å­—èŠ‚æ•°å’Œé‡åˆ°çš„é”™è¯¯ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœç¼“å­˜ä¸ä¸ºç©ºï¼Œåˆ™åªèƒ½è¯»å‡ºç¼“å­˜ä¸­çš„æ•°æ®ï¼Œä¸ä¼šä»åº•å±‚ io.Reader</span></span><br><span class="line"><span class="comment">// ä¸­æå–æ•°æ®ï¼Œå¦‚æœç¼“å­˜ä¸ºç©ºï¼Œåˆ™ï¼š</span></span><br><span class="line"><span class="comment">// 1ã€len(p) &gt;= ç¼“å­˜å¤§å°ï¼Œåˆ™è·³è¿‡ç¼“å­˜ï¼Œç›´æ¥ä»åº•å±‚ io.Reader ä¸­è¯»</span></span><br><span class="line"><span class="comment">// å‡ºåˆ° p ä¸­ã€‚</span></span><br><span class="line"><span class="comment">// 2ã€len(p) &lt; ç¼“å­˜å¤§å°ï¼Œåˆ™å…ˆå°†æ•°æ®ä»åº•å±‚ io.Reader ä¸­è¯»å–åˆ°ç¼“å­˜</span></span><br><span class="line"><span class="comment">// ä¸­ï¼Œå†ä»ç¼“å­˜è¯»å–åˆ° p ä¸­ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span></span> Read(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Buffered è¿”å›ç¼“å­˜ä¸­æœªè¯»å–çš„æ•°æ®çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span></span> Buffered() <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ReadBytes åŠŸèƒ½åŒ ReadSliceï¼Œåªä¸è¿‡è¿”å›çš„æ˜¯ç¼“å­˜çš„æ‹·è´ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span></span> ReadBytes(delim <span class="type">byte</span>) (line []<span class="type">byte</span>, err <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReadString åŠŸèƒ½åŒ ReadBytesï¼Œåªä¸è¿‡è¿”å›çš„æ˜¯å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span></span> ReadString(delim <span class="type">byte</span>) (line <span class="type">string</span>, err <span class="type">error</span>)</span><br></pre></td></tr></table></figure>

<h3 id="bufio-Writer"><a href="#bufio-Writer" class="headerlink" title="bufio.Writer"></a>bufio.Writer</h3><p>bufio.Writer å®ç°äº†å¦‚ä¸‹æ¥å£ï¼š<br>    io.Writer<br>    io.ReaderFrom<br>    io.ByteWriter</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// NewWriterSize å°† wr å°è£…æˆä¸€ä¸ªå¸¦ç¼“å­˜çš„ bufio.Writer å¯¹è±¡ï¼Œ</span></span><br><span class="line"><span class="comment">// ç¼“å­˜å¤§å°ç”± size æŒ‡å®šï¼ˆå¦‚æœå°äº 4096 åˆ™ä¼šè¢«è®¾ç½®ä¸º 4096ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœ wr çš„åŸºç±»å‹å°±æ˜¯æœ‰è¶³å¤Ÿç¼“å­˜çš„ bufio.Writer ç±»å‹ï¼Œåˆ™ç›´æ¥å°†</span></span><br><span class="line"><span class="comment">// wr è½¬æ¢ä¸ºåŸºç±»å‹è¿”å›ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewWriterSize</span><span class="params">(wr io.Writer, size <span class="type">int</span>)</span></span> *Writer</span><br><span class="line"></span><br><span class="line"><span class="comment">// NewWriter ç›¸å½“äº NewWriterSize(wr, 4096)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewWriter</span><span class="params">(wr io.Writer)</span></span> *Writer</span><br><span class="line"></span><br><span class="line"><span class="comment">// WriteString åŠŸèƒ½åŒ Writeï¼Œåªä¸è¿‡å†™å…¥çš„æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span></span> WriteString(s <span class="type">string</span>) (<span class="type">int</span>, <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// WriteRune å‘ b å†™å…¥ r çš„ UTF-8 ç¼–ç ï¼Œè¿”å› r çš„ç¼–ç é•¿åº¦ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span></span> WriteRune(r <span class="type">rune</span>) (size <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Flush å°†ç¼“å­˜ä¸­çš„æ•°æ®æäº¤åˆ°åº•å±‚çš„ io.Writer ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span></span> Flush() <span class="type">error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Available è¿”å›ç¼“å­˜ä¸­æœªä½¿ç”¨çš„ç©ºé—´çš„é•¿åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span></span> Available() <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Buffered è¿”å›ç¼“å­˜ä¸­æœªæäº¤çš„æ•°æ®çš„é•¿åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span></span> Buffered() <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Reset å°† b çš„åº•å±‚ Writer é‡æ–°æŒ‡å®šä¸º wï¼ŒåŒæ—¶ä¸¢å¼ƒç¼“å­˜ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œå¤ä½</span></span><br><span class="line"><span class="comment">// æ‰€æœ‰æ ‡è®°å’Œé”™è¯¯ä¿¡æ¯ã€‚ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ bufio.Writerã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span></span> Reset(w io.Writer)</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>runtimeåŒ…ä¸ä¸´ç•Œèµ„æº</title>
    <url>/2023/07/06/Go/18/</url>
    <content><![CDATA[<h1 id="runtimeåŒ…"><a href="#runtimeåŒ…" class="headerlink" title="runtimeåŒ…"></a>runtimeåŒ…</h1><p>å°½ç®¡ Go ç¼–è¯‘å™¨äº§ç”Ÿçš„æ˜¯æœ¬åœ°å¯æ‰§è¡Œä»£ç ï¼Œè¿™äº›ä»£ç ä»æ—§è¿è¡Œåœ¨ Go çš„ runtimeï¼ˆè¿™éƒ¨åˆ†çš„ä»£ç å¯ä»¥åœ¨ runtime åŒ…ä¸­æ‰¾åˆ°ï¼‰å½“ä¸­ã€‚è¿™ä¸ª runtime ç±»ä¼¼ Java å’Œ .NET è¯­è¨€æ‰€ç”¨åˆ°çš„è™šæ‹Ÿæœºï¼Œå®ƒè´Ÿè´£ç®¡ç†åŒ…æ‹¬å†…å­˜åˆ†é…ã€åƒåœ¾å›æ”¶ã€æ ˆå¤„ç†ã€goroutineã€channelã€åˆ‡ç‰‡ï¼ˆsliceï¼‰ã€map å’Œåå°„ï¼ˆreflectionï¼‰ç­‰ç­‰ã€‚</p>
<h2 id="å¸¸ç”¨å‡½æ•°"><a href="#å¸¸ç”¨å‡½æ•°" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h2><p><strong><code>runtime</code> è°ƒåº¦å™¨æ˜¯ä¸ªéå¸¸æœ‰ç”¨çš„ä¸œè¥¿ï¼Œå…³äº <code>runtime</code> åŒ…å‡ ä¸ªæ–¹æ³•:</strong></p>
<ul>
<li><p><strong>NumCPU</strong>ï¼šè¿”å›å½“å‰ç³»ç»Ÿçš„ <code>CPU</code> æ ¸æ•°é‡</p>
</li>
<li><p><strong>GOMAXPROCS</strong>ï¼šè®¾ç½®æœ€å¤§çš„å¯åŒæ—¶ä½¿ç”¨çš„ <code>CPU</code> æ ¸æ•°</p>
<p>é€šè¿‡runtime.GOMAXPROCSå‡½æ•°ï¼Œåº”ç”¨ç¨‹åºä½•ä»¥åœ¨è¿è¡ŒæœŸé—´è®¾ç½®è¿è¡Œæ—¶ç³»ç»Ÿä¸­å¾—Pæœ€å¤§æ•°é‡ã€‚ä½†è¿™ä¼šå¼•èµ·â€œStop the Worldâ€ã€‚æ‰€ä»¥ï¼Œåº”åœ¨åº”ç”¨ç¨‹åºæœ€æ—©çš„è°ƒç”¨ã€‚å¹¶ä¸”æœ€å¥½æ˜¯åœ¨è¿è¡ŒGoç¨‹åºä¹‹å‰è®¾ç½®å¥½æ“ä½œç¨‹åºçš„ç¯å¢ƒå˜é‡GOMAXPROCSï¼Œè€Œä¸æ˜¯åœ¨ç¨‹åºä¸­è°ƒç”¨runtime.GOMAXPROCSå‡½æ•°ã€‚</p>
<p>æ— è®ºæˆ‘ä»¬ä¼ é€’ç»™å‡½æ•°çš„æ•´æ•°å€¼æ˜¯ä»€ä¹ˆå€¼ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿçš„Pæœ€å¤§å€¼æ€»ä¼šåœ¨1~256ä¹‹é—´ã€‚</p>
</li>
</ul>
<blockquote>
<p>go1.8åï¼Œé»˜è®¤è®©ç¨‹åºè¿è¡Œåœ¨å¤šä¸ªæ ¸ä¸Š,å¯ä»¥ä¸ç”¨è®¾ç½®äº†<br>go1.8å‰ï¼Œè¿˜æ˜¯è¦è®¾ç½®ä¸€ä¸‹ï¼Œå¯ä»¥æ›´é«˜æ•ˆçš„åˆ©ç›Šcpu</p>
</blockquote>
<ul>
<li><p><strong>Gosched</strong>ï¼šè®©å½“å‰çº¿ç¨‹è®©å‡º <code>cpu</code> ä»¥è®©å…¶å®ƒçº¿ç¨‹è¿è¡Œ,å®ƒä¸ä¼šæŒ‚èµ·å½“å‰çº¿ç¨‹ï¼Œå› æ­¤å½“å‰çº¿ç¨‹æœªæ¥ä¼šç»§ç»­æ‰§è¡Œ</p>
<p>è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯è®©å½“å‰ <code>goroutine</code> è®©å‡º <code>CPU</code>ï¼Œå½“ä¸€ä¸ª <code>goroutine</code> å‘ç”Ÿé˜»å¡ï¼Œ<code>Go</code> ä¼šè‡ªåŠ¨åœ°æŠŠä¸è¯¥ <code>goroutine</code> å¤„äºåŒä¸€ç³»ç»Ÿçº¿ç¨‹çš„å…¶ä»– <code>goroutine</code> è½¬ç§»åˆ°å¦ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹ä¸Šå»ï¼Œä»¥ä½¿è¿™äº› <code>goroutine</code> ä¸é˜»å¡ã€‚</p>
</li>
<li><p><strong>Goexit</strong>ï¼šé€€å‡ºå½“å‰ <code>goroutine</code>(ä½†æ˜¯<code>defer</code>è¯­å¥ä¼šç…§å¸¸æ‰§è¡Œ)</p>
</li>
<li><p><strong>NumGoroutine</strong>ï¼šè¿”å›æ­£åœ¨æ‰§è¡Œå’Œæ’é˜Ÿçš„ä»»åŠ¡æ€»æ•°</p>
<p>runtime.NumGoroutineå‡½æ•°åœ¨è¢«è°ƒç”¨åï¼Œä¼šè¿”å›ç³»ç»Ÿä¸­çš„å¤„äºç‰¹å®šçŠ¶æ€çš„Goroutineçš„æ•°é‡ã€‚è¿™é‡Œçš„ç‰¹æŒ‡æ˜¯æŒ‡Grunnable\Gruning\Gsyscall\Gwaitionã€‚å¤„äºè¿™äº›çŠ¶æ€çš„Groutineå³è¢«çœ‹åšæ˜¯æ´»è·ƒçš„æˆ–è€…è¯´æ­£åœ¨è¢«è°ƒåº¦ã€‚</p>
<p>æ³¨æ„ï¼šåƒåœ¾å›æ”¶æ‰€åœ¨Groutineçš„çŠ¶æ€ä¹Ÿå¤„äºè¿™ä¸ªèŒƒå›´å†…çš„è¯ï¼Œä¹Ÿä¼šè¢«çº³å…¥è¯¥è®¡æ•°å™¨ã€‚</p>
</li>
<li><p><strong>GOOS</strong>ï¼šç›®æ ‡æ“ä½œç³»ç»Ÿ</p>
</li>
<li><p><strong>runtime.GC</strong>:ä¼šè®©è¿è¡Œæ—¶ç³»ç»Ÿè¿›è¡Œä¸€æ¬¡å¼ºåˆ¶æ€§çš„åƒåœ¾æ”¶é›†</p>
<ol>
<li>å¼ºåˆ¶çš„åƒåœ¾å›æ”¶ï¼šä¸ç®¡æ€æ ·ï¼Œéƒ½è¦è¿›è¡Œçš„åƒåœ¾å›æ”¶ã€‚</li>
<li>éå¼ºåˆ¶çš„åƒåœ¾å›æ”¶ï¼šåªä¼šåœ¨ä¸€å®šæ¡ä»¶ä¸‹è¿›è¡Œçš„åƒåœ¾å›æ”¶ï¼ˆå³è¿è¡Œæ—¶ï¼Œç³»ç»Ÿè‡ªä¸Šæ¬¡åƒåœ¾å›æ”¶ä¹‹åæ–°ç”³è¯·çš„å †å†…å­˜çš„å•å…ƒï¼ˆä¹Ÿæˆä¸ºå•å…ƒå¢é‡ï¼‰è¾¾åˆ°æŒ‡å®šçš„æ•°å€¼ï¼‰ã€‚</li>
</ol>
</li>
<li><p><strong>GOROOT</strong> :è·å–gorootç›®å½•</p>
</li>
<li><p><strong>GOOS</strong> : æŸ¥çœ‹ç›®æ ‡æ“ä½œç³»ç»Ÿ<br>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®å¹³å°çš„ä¸åŒå®ç°ä¸åŒçš„æ“ä½œï¼Œå°±è€Œå·²ç”¨GOOSäº†ï¼š</p>
</li>
</ul>
<h2 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><ol>
<li>è·å–gorootå’Œosï¼š</li>
</ol>
 <figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–gorootç›®å½•ï¼š</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;GOROOT--&gt;&quot;</span>,runtime.GOROOT())</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è·å–æ“ä½œç³»ç»Ÿ</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;os/platform--&gt;&quot;</span>,runtime.GOOS)  </span><br></pre></td></tr></table></figure>

 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GOROOT--&gt; C:\Users\19393\sdk\go1.20.4</span><br><span class="line">os/platform--&gt; windows</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>è·å–CPUæ•°é‡ï¼Œå’Œè®¾ç½®CPUæ•°é‡ï¼š</li>
</ol>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//1.è·å–é€»è¾‘cpuçš„æ•°é‡</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;é€»è¾‘CPUçš„æ ¸æ•°ï¼š&quot;</span>,runtime.NumCPU())	<span class="comment">//16</span></span><br><span class="line">	<span class="comment">//2.è®¾ç½®goç¨‹åºæ‰§è¡Œçš„æœ€å¤§çš„ï¼š[1,256]</span></span><br><span class="line">	n := runtime.GOMAXPROCS(runtime.NumCPU())	</span><br><span class="line">	fmt.Println(n)	<span class="comment">//16</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Gosched()ï¼š</li>
</ol>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;goroutine&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">		<span class="comment">//è®©å‡ºæ—¶é—´ç‰‡ï¼Œå…ˆè®©åˆ«çš„åè®®æ‰§è¡Œï¼Œå®ƒæ‰§è¡Œå®Œï¼Œå†å›æ¥æ‰§è¡Œæ­¤åç¨‹</span></span><br><span class="line">		runtime.Gosched()</span><br><span class="line">		fmt.Println(<span class="string">&quot;main&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">goroutine</span><br><span class="line">goroutine</span><br><span class="line">goroutine</span><br><span class="line">goroutine</span><br><span class="line">goroutine</span><br><span class="line">main</span><br><span class="line">main</span><br><span class="line">main</span><br><span class="line">main</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>Goexitçš„ä½¿ç”¨ï¼ˆç»ˆæ­¢åç¨‹ï¼‰</li>
</ol>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;runtime&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//åˆ›å»ºæ–°å»ºçš„åç¨‹</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;goroutineå¼€å§‹&quot;</span>)</span><br><span class="line"></span><br><span class="line">		<span class="comment">//è°ƒç”¨äº†åˆ«çš„å‡½æ•°</span></span><br><span class="line">		fun()</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;goroutineç»“æŸ&quot;</span>)</span><br><span class="line">	&#125;() <span class="comment">//åˆ«å¿˜äº†()</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//ç¡ä¸€ä¼šå„¿ï¼Œä¸è®©ä¸»åç¨‹ç»“æŸ</span></span><br><span class="line">	time.Sleep(<span class="number">3</span> * time.Second)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;defer&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//return //ç»ˆæ­¢æ­¤å‡½æ•°</span></span><br><span class="line">	runtime.Goexit() <span class="comment">//ç»ˆæ­¢æ‰€åœ¨çš„åç¨‹</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;funå‡½æ•°&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">goroutineå¼€å§‹</span><br><span class="line">defer</span><br></pre></td></tr></table></figure>

<h1 id="ä¸´ç•Œèµ„æº"><a href="#ä¸´ç•Œèµ„æº" class="headerlink" title="ä¸´ç•Œèµ„æº"></a>ä¸´ç•Œèµ„æº</h1><p><strong>ä¸´ç•Œèµ„æº:</strong> æŒ‡å¹¶å‘ç¯å¢ƒä¸­å¤šä¸ªè¿›ç¨‹&#x2F;çº¿ç¨‹&#x2F;åç¨‹å…±äº«çš„èµ„æºã€‚</p>
<p>ä½†æ˜¯åœ¨å¹¶å‘ç¼–ç¨‹ä¸­å¯¹ä¸´ç•Œèµ„æºçš„å¤„ç†ä¸å½“ï¼Œ å¾€å¾€ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	a := <span class="number">1</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		a = <span class="number">2</span></span><br><span class="line">		fmt.Println(<span class="string">&quot;å­goroutine&quot;</span>,a)</span><br><span class="line">	&#125;()</span><br><span class="line">	a = <span class="number">3</span></span><br><span class="line">	time.Sleep(<span class="number">1</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;main goroutine&quot;</span>,a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­goroutine 2</span><br><span class="line">main goroutine 2</span><br></pre></td></tr></table></figure>

<p>èƒ½å¤Ÿå‘ç°ä¸€å¤„è¢«å¤šä¸ªgoroutineå…±äº«çš„æ•°æ®aã€‚</p>
<h2 id="ä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜"><a href="#ä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜" class="headerlink" title="ä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜"></a>ä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜</h2><p>å¹¶å‘æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯å› ä¸ºæœ‰äº†èµ„æºç«äº‰çš„é—®é¢˜ï¼Œå°±ä½¿å¾—æˆ‘ä»¬å¼€å‘å‡ºå¥½çš„å¹¶å‘ç¨‹åºå˜å¾—å¤æ‚èµ·æ¥ï¼Œå› ä¸ºä¼šå¼•èµ·å¾ˆå¤šè«åå…¶å¦™çš„é—®é¢˜ã€‚</p>
<p>å¦‚æœå¤šä¸ªgoroutineåœ¨è®¿é—®åŒä¸€ä¸ªæ•°æ®èµ„æºçš„æ—¶å€™ï¼Œå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æ•°æ®ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å€¼å°±è¢«ä¿®æ”¹äº†ï¼Œå¯¹äºå…¶ä»–çš„goroutineæ¥è®²ï¼Œè¿™ä¸ªæ•°å€¼å¯èƒ½æ˜¯ä¸å¯¹çš„ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬é€šè¿‡å¹¶å‘æ¥å®ç°ç«è½¦ç«™å”®ç¥¨è¿™ä¸ªç¨‹åºã€‚ä¸€å…±æœ‰10å¼ ç¥¨ï¼Œ4ä¸ªå”®ç¥¨å£åŒæ—¶å‡ºå”®ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> ticket = <span class="number">10</span> <span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		4ä¸ªgoroutineï¼Œæ¨¡æ‹Ÿ4ä¸ªå”®ç¥¨å£ï¼Œ4ä¸ªå­ç¨‹åºæ“ä½œåŒä¸€ä¸ªå…±äº«æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£1&quot;</span>) <span class="comment">// g1,10</span></span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£2&quot;</span>) <span class="comment">// g2,10</span></span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£3&quot;</span>) <span class="comment">//g3,10</span></span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£4&quot;</span>) <span class="comment">//g4,10</span></span><br><span class="line"></span><br><span class="line">	time.Sleep(<span class="number">5</span> * time.Second)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">saleTickets</span><span class="params">(name <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().UnixNano())</span><br><span class="line">	<span class="keyword">for</span> &#123; <span class="comment">//ticket=1</span></span><br><span class="line">		<span class="keyword">if</span> ticket &gt; <span class="number">0</span> &#123; <span class="comment">//g1,g3,g2,g4</span></span><br><span class="line">			<span class="comment">//ç¡çœ </span></span><br><span class="line">			time.Sleep(time.Duration(rand.Intn(<span class="number">1000</span>)) * time.Millisecond)</span><br><span class="line">			<span class="comment">// g1 ,g3, g2,g4</span></span><br><span class="line">			fmt.Println(name, <span class="string">&quot;å”®å‡ºï¼š&quot;</span>, ticket) </span><br><span class="line">			ticket--                         </span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(name, <span class="string">&quot;å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å”®ç¥¨å£4 å”®å‡ºï¼š 10</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 10</span><br><span class="line">å”®ç¥¨å£3 å”®å‡ºï¼š 10</span><br><span class="line">å”®ç¥¨å£2 å”®å‡ºï¼š 10</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 6</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 5</span><br><span class="line">å”®ç¥¨å£2 å”®å‡ºï¼š 4</span><br><span class="line">å”®ç¥¨å£4 å”®å‡ºï¼š 3</span><br><span class="line">å”®ç¥¨å£4 å”®å‡ºï¼š 2</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 1</span><br><span class="line">å”®ç¥¨å£1 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£3 å”®å‡ºï¼š 0</span><br><span class="line">å”®ç¥¨å£3 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£4 å”®å‡ºï¼š -1</span><br><span class="line">å”®ç¥¨å£4 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£2 å”®å‡ºï¼š -2</span><br><span class="line">å”®ç¥¨å£2 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¸ºäº†æ›´å¥½çš„è§‚å¯Ÿä¸´ç•Œèµ„æºé—®é¢˜ï¼Œæ¯ä¸ªgoroutineå…ˆç¡çœ ä¸€ä¸ªéšæœºæ•°ï¼Œç„¶åå†å”®ç¥¨ï¼Œæˆ‘ä»¬å‘ç°ç¨‹åºçš„è¿è¡Œç»“æœï¼Œè¿˜å¯ä»¥å–å‡ºç¼–å·ä¸ºè´Ÿæ•°çš„ç¥¨ã€‚</p>
<p><strong>åˆ†æï¼š</strong></p>
<p>æˆ‘ä»¬çš„å–ç¥¨é€»è¾‘æ˜¯å…ˆåˆ¤æ–­ç¥¨æ•°çš„ç¼–å·æ˜¯å¦ä¸ºè´Ÿæ•°ï¼Œå¦‚æœå¤§äº0ï¼Œç„¶åæˆ‘ä»¬å°±è¿›è¡Œå–ç¥¨ï¼Œåªä¸è¿‡åœ¨å–ç¥¨é’±å…ˆç¡çœ ï¼Œç„¶åå†å–ï¼Œå‡å¦‚è¯´æ­¤æ—¶å·²ç»å–ç¥¨åˆ°åªå‰©æœ€å1å¼ äº†ï¼ŒæŸä¸€ä¸ªgoroutineæŒæœ‰äº†CPUçš„æ—¶é—´ç‰‡ï¼Œé‚£ä¹ˆå®ƒå†ç‰‡æ®µæ˜¯å¦æœ‰ç¥¨çš„æ—¶å€™ï¼Œæ¡ä»¶æ˜¯æˆç«‹çš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥å–ç¥¨ç¼–å·ä¸º1çš„æœ€åä¸€å¼ ç¥¨ã€‚ä½†æ˜¯å› ä¸ºå®ƒåœ¨å–ä¹‹å‰ï¼Œå…ˆç¡çœ äº†ï¼Œé‚£ä¹ˆå…¶ä»–çš„goroutineå°±ä¼šæŒæœ‰CPUçš„æ—¶é—´ç‰‡ï¼Œè€Œæ­¤æ—¶è¿™å¼ ç¥¨è¿˜æ²¡æœ‰è¢«å–å‡ºï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªgoroutineå†åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨çš„æ—¶å€™ï¼Œæ¡ä»¶ä¹Ÿæ˜¯æˆç«‹çš„ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å–å‡ºè¿™å¼ ç¥¨ï¼Œç„¶è€Œå®ƒä¹Ÿè¿›å…¥äº†ç¡çœ ã€‚å…¶ä»–çš„ç¬¬ä¸‰ä¸ªç¬¬å››ä¸ªgoroutineéƒ½æ˜¯è¿™æ ·çš„é€»è¾‘ï¼Œå½“æŸä¸ªgoroutineé†’æ¥çš„æ—¶å€™ï¼Œä¸ä¼šå†åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨ï¼Œè€Œæ˜¯ç›´æ¥å”®å‡ºï¼Œè¿™æ ·å°±å–å‡ºæœ€åä¸€å¼ ç¥¨äº†ï¼Œç„¶è€Œå…¶ä»–çš„goroutineé†’æ¥çš„æ—¶å€™ï¼Œå°±ä¼šé™†ç»­å–å‡ºäº†ç¬¬0å¼ ï¼Œ-1å¼ ï¼Œ-2å¼ ã€‚</p>
<p>è¿™å°±æ˜¯ä¸´ç•Œèµ„æºçš„ä¸å®‰å…¨é—®é¢˜ã€‚æŸä¸€ä¸ªgoroutineåœ¨è®¿é—®æŸä¸ªæ•°æ®èµ„æºçš„æ—¶å€™ï¼ŒæŒ‰ç…§æ•°å€¼ï¼Œå·²ç»åˆ¤æ–­å¥½äº†æ¡ä»¶ï¼Œç„¶ååˆè¢«å…¶ä»–çš„goroutineæŠ¢å äº†èµ„æºï¼Œå¹¶ä¿®æ”¹äº†æ•°å€¼ï¼Œç­‰è¿™ä¸ªgoroutineå†ç»§ç»­è®¿é—®è¿™ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œæ•°å€¼å·²ç»ä¸å¯¹äº†ã€‚</p>
<h2 id="ä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜çš„è§£å†³"><a href="#ä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜çš„è§£å†³" class="headerlink" title="ä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜çš„è§£å†³"></a>ä¸´ç•Œèµ„æºå®‰å…¨é—®é¢˜çš„è§£å†³</h2><p>è¦æƒ³è§£å†³ä¸´ç•Œèµ„æºå®‰å…¨çš„é—®é¢˜ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯åŒæ­¥ã€‚é€šè¿‡ä¸Šé”çš„æ–¹å¼ï¼ŒæŸä¸€æ—¶é—´æ®µï¼Œåªèƒ½å…è®¸ä¸€ä¸ªgoroutineæ¥è®¿é—®è¿™ä¸ªå…±äº«æ•°æ®ï¼Œå½“å‰goroutineè®¿é—®å®Œæ¯•ï¼Œè§£é”åï¼Œå…¶ä»–çš„goroutineæ‰èƒ½æ¥è®¿é—®ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºsyncåŒ…ä¸‹çš„é”æ“ä½œã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> ticket = <span class="number">10</span> <span class="comment">// 10å¼ ç¥¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"><span class="keyword">var</span> matex sync.Mutex <span class="comment">// åˆ›å»ºé”å¤´</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	4ä¸ªgoroutineï¼Œæ¨¡æ‹Ÿ4ä¸ªå”®ç¥¨å£ï¼Œ4ä¸ªå­ç¨‹åºæ“ä½œåŒä¸€ä¸ªå…±äº«æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	wg.Add(<span class="number">4</span>)</span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£1&quot;</span>) <span class="comment">// g1,100</span></span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£2&quot;</span>) <span class="comment">// g2,100</span></span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£3&quot;</span>) <span class="comment">//g3,100</span></span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£4&quot;</span>) <span class="comment">//g4,100</span></span><br><span class="line">	wg.Wait()              <span class="comment">// mainè¦ç­‰å¾…ã€‚ã€‚ã€‚</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//time.Sleep(5*time.Second)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">saleTickets</span><span class="params">(name <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().UnixNano())</span><br><span class="line">	<span class="keyword">defer</span> wg.Done()</span><br><span class="line">	<span class="comment">//for i:=1;i&lt;=100;i++&#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(name,&quot;å”®å‡ºï¼š&quot;,i)</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="keyword">for</span> &#123; <span class="comment">//ticket=1</span></span><br><span class="line">		matex.Lock()</span><br><span class="line">		<span class="keyword">if</span> ticket &gt; <span class="number">0</span> &#123; <span class="comment">//g1,g3,g2,g4</span></span><br><span class="line">			<span class="comment">//ç¡çœ </span></span><br><span class="line">			time.Sleep(time.Duration(rand.Intn(<span class="number">1000</span>)) * time.Millisecond)</span><br><span class="line">			<span class="comment">// g1 ,g3, g2,g4</span></span><br><span class="line">			fmt.Println(name, <span class="string">&quot;å”®å‡ºï¼š&quot;</span>, ticket) <span class="comment">// 1 , 0, -1 , -2</span></span><br><span class="line">			ticket--                         <span class="comment">//0 , -1 ,-2 , -3</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			matex.Unlock() <span class="comment">//è§£é”</span></span><br><span class="line">			fmt.Println(name, <span class="string">&quot;å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		matex.Unlock() <span class="comment">//è§£é”</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 10</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 9</span><br><span class="line">å”®ç¥¨å£4 å”®å‡ºï¼š 8</span><br><span class="line">å”®ç¥¨å£3 å”®å‡ºï¼š 7</span><br><span class="line">å”®ç¥¨å£2 å”®å‡ºï¼š 6</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 5</span><br><span class="line">å”®ç¥¨å£4 å”®å‡ºï¼š 4</span><br><span class="line">å”®ç¥¨å£3 å”®å‡ºï¼š 3</span><br><span class="line">å”®ç¥¨å£2 å”®å‡ºï¼š 2</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 1</span><br><span class="line">å”®ç¥¨å£4 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£1 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£3 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£2 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>åœ¨Goçš„å¹¶å‘ç¼–ç¨‹ä¸­æœ‰ä¸€å¥å¾ˆç»å…¸çš„è¯ï¼š<strong>ä¸è¦ä»¥å…±äº«å†…å­˜çš„æ–¹å¼å»é€šä¿¡ï¼Œè€Œè¦ä»¥é€šä¿¡çš„æ–¹å¼å»å…±äº«å†…å­˜ã€‚</strong></p>
<p>åœ¨Goè¯­è¨€ä¸­å¹¶ä¸é¼“åŠ±ç”¨é”ä¿æŠ¤å…±äº«çŠ¶æ€çš„æ–¹å¼åœ¨ä¸åŒçš„Goroutineä¸­åˆ†äº«ä¿¡æ¯(ä»¥å…±äº«å†…å­˜çš„æ–¹å¼å»é€šä¿¡)ã€‚è€Œæ˜¯é¼“åŠ±é€šè¿‡<strong>channel</strong>å°†å…±äº«çŠ¶æ€æˆ–å…±äº«çŠ¶æ€çš„å˜åŒ–åœ¨å„ä¸ªGoroutineä¹‹é—´ä¼ é€’ï¼ˆä»¥é€šä¿¡çš„æ–¹å¼å»å…±äº«å†…å­˜ï¼‰ï¼Œè¿™æ ·åŒæ ·èƒ½åƒç”¨é”ä¸€æ ·ä¿è¯åœ¨åŒä¸€çš„æ—¶é—´åªæœ‰ä¸€ä¸ªGoroutineè®¿é—®å…±äº«çŠ¶æ€ã€‚</p>
<p>å½“ç„¶ï¼Œåœ¨ä¸»æµçš„ç¼–ç¨‹è¯­è¨€ä¸­ä¸ºäº†ä¿è¯å¤šçº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®å®‰å…¨æ€§å’Œä¸€è‡´æ€§ï¼Œéƒ½ä¼šæä¾›ä¸€å¥—åŸºæœ¬çš„åŒæ­¥å·¥å…·é›†ï¼Œå¦‚é”ï¼Œæ¡ä»¶å˜é‡ï¼ŒåŸå­æ“ä½œç­‰ç­‰ã€‚Goè¯­è¨€æ ‡å‡†åº“ä¹Ÿæ¯«ä¸æ„å¤–çš„æä¾›äº†è¿™äº›åŒæ­¥æœºåˆ¶ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿå’Œå…¶ä»–è¯­è¨€ä¹Ÿå·®ä¸å¤šã€‚</p>
]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>Goroutineå¹¶å‘æ¨¡å‹</title>
    <url>/2023/06/14/Go/17/</url>
    <content><![CDATA[<h1 id="Goè¯­è¨€çš„åç¨‹â€”â€”Goroutine"><a href="#Goè¯­è¨€çš„åç¨‹â€”â€”Goroutine" class="headerlink" title="Goè¯­è¨€çš„åç¨‹â€”â€”Goroutine"></a>Goè¯­è¨€çš„åç¨‹â€”â€”Goroutine</h1><p><strong>è¿›ç¨‹(Process)ï¼Œçº¿ç¨‹(Thread)ï¼Œåç¨‹(Coroutineï¼Œä¹Ÿå«è½»é‡çº§çº¿ç¨‹)</strong></p>
<ul>
<li><p>è¿›ç¨‹<br>è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸­çš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºâ€ï¼Œå®ƒæ˜¯CPUèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚<br>è¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†ã€è¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºç”¨æ¥æè¿°è¿›ç¨‹è¦å®Œæˆå“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•å®Œæˆï¼›æ•°æ®é›†åˆ™æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„èµ„æºï¼›è¿›ç¨‹æ§åˆ¶å—ç”¨æ¥è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ï¼Œæè¿°è¿›ç¨‹çš„æ‰§è¡Œå˜åŒ–è¿‡ç¨‹ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿæ„ŸçŸ¥è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ <strong>è¿›ç¨‹çš„å±€é™æ˜¯åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢çš„å¼€é”€æ¯”è¾ƒå¤§ã€‚</strong></p>
</li>
<li><p>çº¿ç¨‹<br>çº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¹‹åå‘å±•å‡ºæ¥çš„æ¦‚å¿µã€‚ çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„CPUæ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆå…±åŒç»„æˆã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚<br>çº¿ç¨‹çš„ä¼˜ç‚¹æ˜¯å‡å°äº†ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶çš„å¼€é”€ï¼Œæé«˜äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œç¼ºç‚¹æ˜¯çº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†åŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœæŠŠè¿›ç¨‹æ¯”ä½œä¸€ä¸ªè½¦é—´ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±å¥½æ¯”æ˜¯è½¦é—´é‡Œé¢çš„å·¥äººã€‚ä¸è¿‡å¯¹äºæŸäº›ç‹¬å æ€§èµ„æºå­˜åœ¨é”æœºåˆ¶ï¼Œå¤„ç†ä¸å½“å¯èƒ½ä¼šäº§ç”Ÿâ€œæ­»é”â€ã€‚</p>
</li>
<li><p>åç¨‹<br>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œè‹±æ–‡åCoroutineï¼Œåç¨‹çš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ§åˆ¶ã€‚äººä»¬é€šå¸¸å°†åç¨‹å’Œå­ç¨‹åºï¼ˆå‡½æ•°ï¼‰æ¯”è¾ƒç€ç†è§£ã€‚ å­ç¨‹åºè°ƒç”¨æ€»æ˜¯ä¸€ä¸ªå…¥å£ï¼Œä¸€æ¬¡è¿”å›ï¼Œä¸€æ—¦é€€å‡ºå³å®Œæˆäº†å­ç¨‹åºçš„æ‰§è¡Œã€‚</p>
</li>
</ul>
<p><strong>ä¸ä¼ ç»Ÿçš„ç³»ç»Ÿçº§çº¿ç¨‹å’Œè¿›ç¨‹ç›¸æ¯”ï¼Œåç¨‹çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºå…¶â€è½»é‡çº§â€ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸Šç™¾ä¸‡ä¸ªè€Œä¸ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¡°ç«­ï¼Œè€Œçº¿ç¨‹å’Œè¿›ç¨‹é€šå¸¸æœ€å¤šä¹Ÿä¸èƒ½è¶…è¿‡1ä¸‡çš„ã€‚è¿™ä¹Ÿæ˜¯åç¨‹ä¹Ÿå«è½»é‡çº§çº¿ç¨‹çš„åŸå› ã€‚</strong></p>
<blockquote>
<p>åç¨‹çš„ç‰¹ç‚¹åœ¨äºæ˜¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œä¸å¤šçº¿ç¨‹ç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿ä½“ç°åœ¨ï¼šåç¨‹çš„æ‰§è¡Œæ•ˆç‡æé«˜ã€‚å› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ã€‚</p>
</blockquote>
<h2 id="Goroutine"><a href="#Goroutine" class="headerlink" title="Goroutine"></a>Goroutine</h2><h3 id="ä»€ä¹ˆæ˜¯Goroutine"><a href="#ä»€ä¹ˆæ˜¯Goroutine" class="headerlink" title="ä»€ä¹ˆæ˜¯Goroutine"></a>ä»€ä¹ˆæ˜¯Goroutine</h3><p>goä¸­ä½¿ç”¨Goroutineæ¥å®ç°å¹¶å‘concurrentlyã€‚</p>
<p>Goroutineæ˜¯Goè¯­è¨€ç‰¹æœ‰çš„åè¯ã€‚åŒºåˆ«äºè¿›ç¨‹Processï¼Œçº¿ç¨‹Threadï¼Œåç¨‹Coroutineï¼Œå› ä¸ºGoè¯­è¨€çš„åˆ›é€ è€…ä»¬è§‰å¾—å’Œä»–ä»¬æ˜¯æœ‰æ‰€åŒºåˆ«çš„ï¼Œæ‰€ä»¥ä¸“é—¨åˆ›é€ äº†Goroutineã€‚</p>
<p>Goroutineæ˜¯ä¸å…¶ä»–å‡½æ•°æˆ–æ–¹æ³•åŒæ—¶è¿è¡Œçš„å‡½æ•°æˆ–æ–¹æ³•ã€‚Goroutineså¯ä»¥è¢«è®¤ä¸ºæ˜¯è½»é‡çº§çš„çº¿ç¨‹ã€‚ä¸çº¿ç¨‹ç›¸æ¯”ï¼Œåˆ›å»ºGoroutineçš„æˆæœ¬å¾ˆå°ï¼Œå®ƒå°±æ˜¯ä¸€æ®µä»£ç ï¼Œä¸€ä¸ªå‡½æ•°å…¥å£ã€‚ä»¥åŠåœ¨å †ä¸Šä¸ºå…¶åˆ†é…çš„ä¸€ä¸ªå †æ ˆï¼ˆåˆå§‹å¤§å°ä¸º4Kï¼Œä¼šéšç€ç¨‹åºçš„æ‰§è¡Œè‡ªåŠ¨å¢é•¿åˆ é™¤ï¼‰ã€‚å› æ­¤å®ƒéå¸¸å»‰ä»·ï¼ŒGoåº”ç”¨ç¨‹åºå¯ä»¥å¹¶å‘è¿è¡Œæ•°åƒä¸ªGoroutinesã€‚</p>
<blockquote>
<p>Goroutinesåœ¨çº¿ç¨‹ä¸Šçš„ä¼˜åŠ¿ã€‚</p>
<ol>
<li>ä¸çº¿ç¨‹ç›¸æ¯”ï¼ŒGoroutineséå¸¸ä¾¿å®œã€‚å®ƒä»¬åªæ˜¯å †æ ˆå¤§å°çš„å‡ ä¸ªkbï¼Œå †æ ˆå¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€è¦å¢é•¿å’Œæ”¶ç¼©ï¼Œè€Œåœ¨çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå †æ ˆå¤§å°å¿…é¡»æŒ‡å®šå¹¶ä¸”æ˜¯å›ºå®šçš„</li>
<li>Goroutinesè¢«å¤šè·¯å¤ç”¨åˆ°è¾ƒå°‘çš„OSçº¿ç¨‹ã€‚åœ¨ä¸€ä¸ªç¨‹åºä¸­å¯èƒ½åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¸æ•°åƒä¸ªGoroutinesã€‚å¦‚æœçº¿ç¨‹ä¸­çš„ä»»ä½•Goroutineéƒ½è¡¨ç¤ºç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œåˆ™ä¼šåˆ›å»ºå¦ä¸€ä¸ªOSçº¿ç¨‹ï¼Œå‰©ä¸‹çš„Goroutinesè¢«è½¬ç§»åˆ°æ–°çš„OSçº¿ç¨‹ã€‚æ‰€æœ‰è¿™äº›éƒ½ç”±è¿è¡Œæ—¶è¿›è¡Œå¤„ç†ï¼Œæˆ‘ä»¬ä½œä¸ºç¨‹åºå‘˜ä»è¿™äº›å¤æ‚çš„ç»†èŠ‚ä¸­æŠ½è±¡å‡ºæ¥ï¼Œå¹¶å¾—åˆ°äº†ä¸€ä¸ªä¸å¹¶å‘å·¥ä½œç›¸å…³çš„å¹²å‡€çš„APIã€‚</li>
<li>å½“ä½¿ç”¨Goroutinesè®¿é—®å…±äº«å†…å­˜æ—¶ï¼Œé€šè¿‡è®¾è®¡çš„é€šé“å¯ä»¥é˜²æ­¢ç«æ€æ¡ä»¶å‘ç”Ÿã€‚é€šé“å¯ä»¥è¢«è®¤ä¸ºæ˜¯Goroutinesé€šä¿¡çš„ç®¡é“ã€‚</li>
</ol>
</blockquote>
<h3 id="ä¸»goroutine"><a href="#ä¸»goroutine" class="headerlink" title="ä¸»goroutine"></a>ä¸»goroutine</h3><p>å°è£…mainå‡½æ•°çš„goroutineç§°ä¸ºä¸»goroutineã€‚</p>
<p>ä¸»goroutineæ‰€åšçš„äº‹æƒ…å¹¶ä¸æ˜¯æ‰§è¡Œmainå‡½æ•°é‚£ä¹ˆç®€å•ã€‚å®ƒé¦–å…ˆè¦åšçš„æ˜¯ï¼šè®¾å®šæ¯ä¸€ä¸ªgoroutineæ‰€èƒ½ç”³è¯·çš„æ ˆç©ºé—´çš„æœ€å¤§å°ºå¯¸ã€‚åœ¨32ä½çš„è®¡ç®—æœºç³»ç»Ÿä¸­æ­¤æœ€å¤§å°ºå¯¸ä¸º250MBï¼Œè€Œåœ¨64ä½çš„è®¡ç®—æœºç³»ç»Ÿä¸­æ­¤å°ºå¯¸ä¸º1GBã€‚å¦‚æœæœ‰æŸä¸ªgoroutineçš„æ ˆç©ºé—´å°ºå¯¸å¤§äºè¿™ä¸ªé™åˆ¶ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶ç³»ç»Ÿå°±ä¼šå¼•å‘ä¸€ä¸ªæ ˆæº¢å‡º(stack overflow)çš„è¿è¡Œæ—¶ææ…Œã€‚éšåï¼Œè¿™ä¸ªgoç¨‹åºçš„è¿è¡Œä¹Ÿä¼šç»ˆæ­¢ã€‚</p>
<p>æ­¤åï¼Œä¸»goroutineä¼šè¿›è¡Œä¸€ç³»åˆ—çš„åˆå§‹åŒ–å·¥ä½œï¼Œæ¶‰åŠçš„å·¥ä½œå†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„deferè¯­å¥ï¼Œç”¨äºåœ¨ä¸»goroutineé€€å‡ºæ—¶åšå¿…è¦çš„å–„åå¤„ç†ã€‚å› ä¸ºä¸»goroutineä¹Ÿå¯èƒ½éæ­£å¸¸çš„ç»“æŸ</p>
</li>
<li><p>å¯åŠ¨ä¸“ç”¨äºåœ¨åå°æ¸…æ‰«å†…å­˜åƒåœ¾çš„goroutineï¼Œå¹¶è®¾ç½®GCå¯ç”¨çš„æ ‡è¯†</p>
</li>
<li><p>æ‰§è¡ŒmianåŒ…ä¸­çš„initå‡½æ•°</p>
</li>
<li><p>æ‰§è¡Œmainå‡½æ•°</p>
<p>æ‰§è¡Œå®Œmainå‡½æ•°åï¼Œå®ƒè¿˜ä¼šæ£€æŸ¥ä¸»goroutineæ˜¯å¦å¼•å‘äº†è¿è¡Œæ—¶ææ…Œï¼Œå¹¶è¿›è¡Œå¿…è¦çš„å¤„ç†ã€‚æœ€åä¸»goroutineä¼šç»“æŸè‡ªå·±ä»¥åŠå½“å‰è¿›ç¨‹çš„è¿è¡Œã€‚</p>
</li>
</ol>
<h3 id="å¦‚ä½•ä½¿ç”¨Goroutines"><a href="#å¦‚ä½•ä½¿ç”¨Goroutines" class="headerlink" title="å¦‚ä½•ä½¿ç”¨Goroutines"></a>å¦‚ä½•ä½¿ç”¨Goroutines</h3><p>åœ¨å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨å‰é¢åŠ ä¸Šå…³é”®å­—goï¼Œæ‚¨å°†ä¼šåŒæ—¶è¿è¡Œä¸€ä¸ªæ–°çš„Goroutineã€‚</p>
<p>å®ä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hello</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello world goroutine&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">go</span> hello()</span><br><span class="line">    fmt.Println(<span class="string">&quot;main function&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼šå¯èƒ½ä¼šå€¼è¾“å‡º<code>main function</code>ã€‚</p>
<p>ç”±äºä¸»çº¿ç¨‹å’Œæ–°çš„goroutineæ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œå®ƒä»¬åœ¨æ—¶é—´ä¸Šæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå› æ­¤ä¸»çº¿ç¨‹åœ¨æ‰“å°â€main functionâ€ä¹‹åï¼Œå¾ˆå¯èƒ½ç«‹å³ç»“æŸï¼Œè€Œæ–°çš„goroutineå¯èƒ½æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥æ‰§è¡Œ<code>fmt.Println(&quot;Hello world goroutine&quot;)</code>è¯­å¥ï¼Œä»è€Œå¯¼è‡´è¯¥è¯­å¥æ²¡æœ‰è¢«æ‰§è¡Œå’Œæ‰“å°ã€‚</p>
<p>æˆ‘ä»¬å¼€å§‹çš„Goroutineæ€ä¹ˆæ ·äº†?æˆ‘ä»¬éœ€è¦äº†è§£Goroutineçš„è§„åˆ™</p>
<ol>
<li>å½“æ–°çš„Goroutineå¼€å§‹æ—¶ï¼ŒGoroutineè°ƒç”¨ç«‹å³è¿”å›ã€‚ä¸å‡½æ•°ä¸åŒï¼Œgoä¸ç­‰å¾…Goroutineæ‰§è¡Œç»“æŸã€‚å½“Goroutineè°ƒç”¨ï¼Œå¹¶ä¸”Goroutineçš„ä»»ä½•è¿”å›å€¼è¢«å¿½ç•¥ä¹‹åï¼Œgoç«‹å³æ‰§è¡Œåˆ°ä¸‹ä¸€è¡Œä»£ç ã€‚</li>
<li>mainçš„Goroutineåº”è¯¥ä¸ºå…¶ä»–çš„Goroutinesæ‰§è¡Œã€‚å¦‚æœmainçš„Goroutineç»ˆæ­¢äº†ï¼Œç¨‹åºå°†è¢«ç»ˆæ­¢ï¼Œè€Œå…¶ä»–Goroutineå°†ä¸ä¼šè¿è¡Œã€‚</li>
</ol>
<p>ä¿®æ”¹ä»¥ä¸Šä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hello</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello world goroutine&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">go</span> hello()</span><br><span class="line">    time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">    fmt.Println(<span class="string">&quot;main function&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å·²ç»è°ƒç”¨äº†æ—¶é—´åŒ…çš„Sleepæ–¹æ³•ï¼Œå®ƒä¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç¡è§‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œmainçš„goroutineè¢«ç”¨æ¥ç¡è§‰1ç§’ã€‚ç°åœ¨è°ƒç”¨go hello()æœ‰è¶³å¤Ÿçš„æ—¶é—´åœ¨main Goroutineç»ˆæ­¢ä¹‹å‰æ‰§è¡Œã€‚è¿™ä¸ªç¨‹åºé¦–å…ˆæ‰“å°Hello world goroutineï¼Œç­‰å¾…1ç§’ï¼Œç„¶åæ‰“å°<code>main function</code>ã€‚</p>
<h3 id="å¯åŠ¨å¤šä¸ªGoroutines"><a href="#å¯åŠ¨å¤šä¸ªGoroutines" class="headerlink" title="å¯åŠ¨å¤šä¸ªGoroutines"></a>å¯åŠ¨å¤šä¸ªGoroutines</h3><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numbers</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">        time.Sleep(<span class="number">250</span> * time.Millisecond)</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d &quot;</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">alphabets</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">for</span> i := <span class="string">&#x27;a&#x27;</span>; i &lt;= <span class="string">&#x27;e&#x27;</span>; i++ &#123;</span><br><span class="line">        time.Sleep(<span class="number">400</span> * time.Millisecond)</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%c &quot;</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">go</span> numbers()</span><br><span class="line">    <span class="keyword">go</span> alphabets()</span><br><span class="line">    time.Sleep(<span class="number">3000</span> * time.Millisecond)</span><br><span class="line">    fmt.Println(<span class="string">&quot;main terminated&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 a 2 3 b 4 c 5 d e main terminated  </span><br></pre></td></tr></table></figure>

<p>æ—¶é—´è½´åˆ†æï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/dxc.png"></p>
<h1 id="Goè¯­è¨€çš„å¹¶å‘æ¨¡å‹"><a href="#Goè¯­è¨€çš„å¹¶å‘æ¨¡å‹" class="headerlink" title="Goè¯­è¨€çš„å¹¶å‘æ¨¡å‹"></a>Goè¯­è¨€çš„å¹¶å‘æ¨¡å‹</h1><p>Go è¯­è¨€ç›¸æ¯”Javaç­‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿å°±æ˜¯å¯ä»¥æ–¹ä¾¿åœ°ç¼–å†™å¹¶å‘ç¨‹åºã€‚Go è¯­è¨€å†…ç½®äº† goroutine æœºåˆ¶ï¼Œä½¿ç”¨goroutineå¯ä»¥å¿«é€Ÿåœ°å¼€å‘å¹¶å‘ç¨‹åºï¼Œ æ›´å¥½çš„åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨èµ„æºã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹Goè¯­è¨€çš„å¹¶å‘åŸç†ã€‚</p>
<h2 id="çº¿ç¨‹æ¨¡å‹"><a href="#çº¿ç¨‹æ¨¡å‹" class="headerlink" title="çº¿ç¨‹æ¨¡å‹"></a>çº¿ç¨‹æ¨¡å‹</h2><p>åœ¨ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹æ˜¯å¤„ç†å™¨è°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè¿›ç¨‹åˆ™ä½œä¸ºèµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½ã€‚æ¯ä¸ªè¿›ç¨‹æ˜¯ç”±ç§æœ‰çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€ä»£ç ã€æ•°æ®å’Œå…¶å®ƒå„ç§ç³»ç»Ÿèµ„æºç»„æˆã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹å†…éƒ¨çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒã€‚ æ¯ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªä¸»æ‰§è¡Œçº¿ç¨‹ï¼Œå®ƒæ— éœ€ç”±ç”¨æˆ·å»ä¸»åŠ¨åˆ›å»ºï¼Œæ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºçš„ã€‚ ç”¨æˆ·æ ¹æ®éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­åˆ›å»ºå…¶å®ƒçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹å¹¶å‘åœ°è¿è¡ŒäºåŒä¸€ä¸ªè¿›ç¨‹ä¸­ã€‚</p>
<p>æˆ‘ä»¬å…ˆä»çº¿ç¨‹è®²èµ·ï¼Œæ— è®ºè¯­è¨€å±‚é¢ä½•ç§å¹¶å‘æ¨¡å‹ï¼Œåˆ°äº†æ“ä½œç³»ç»Ÿå±‚é¢ï¼Œä¸€å®šæ˜¯ä»¥çº¿ç¨‹çš„å½¢æ€å­˜åœ¨çš„ã€‚è€Œæ“ä½œç³»ç»Ÿæ ¹æ®èµ„æºè®¿é—®æƒé™çš„ä¸åŒï¼Œä½“ç³»æ¶æ„å¯åˆ†ä¸ºç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ï¼›å†…æ ¸ç©ºé—´ä¸»è¦æ“ä½œè®¿é—®CPUèµ„æºã€I&#x2F;Oèµ„æºã€å†…å­˜èµ„æºç­‰ç¡¬ä»¶èµ„æºï¼Œä¸ºä¸Šå±‚åº”ç”¨ç¨‹åºæä¾›æœ€åŸºæœ¬çš„åŸºç¡€èµ„æºï¼Œç”¨æˆ·ç©ºé—´å‘¢å°±æ˜¯ä¸Šå±‚åº”ç”¨ç¨‹åºçš„å›ºå®šæ´»åŠ¨ç©ºé—´ï¼Œç”¨æˆ·ç©ºé—´ä¸å¯ä»¥ç›´æ¥è®¿é—®èµ„æºï¼Œå¿…é¡»é€šè¿‡â€œç³»ç»Ÿè°ƒç”¨â€ã€â€œåº“å‡½æ•°â€æˆ–â€œShellè„šæœ¬â€æ¥è°ƒç”¨å†…æ ¸ç©ºé—´æä¾›çš„èµ„æºã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨çš„è®¡ç®—æœºè¯­è¨€ï¼Œå¯ä»¥ç‹­ä¹‰çš„è®¤ä¸ºæ˜¯ä¸€ç§â€œè½¯ä»¶â€ï¼Œå®ƒä»¬ä¸­æ‰€è°“çš„â€œçº¿ç¨‹â€ï¼Œå¾€å¾€æ˜¯ç”¨æˆ·æ€çš„çº¿ç¨‹ï¼Œå’Œæ“ä½œç³»ç»Ÿæœ¬èº«å†…æ ¸æ€çš„çº¿ç¨‹ï¼ˆç®€ç§°KSEï¼‰ï¼Œè¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p>
<p>Goå¹¶å‘ç¼–ç¨‹æ¨¡å‹åœ¨åº•å±‚æ˜¯ç”±æ“ä½œç³»ç»Ÿæ‰€æä¾›çš„çº¿ç¨‹åº“æ”¯æ’‘çš„ï¼Œå› æ­¤è¿˜æ˜¯å¾—ä»çº¿ç¨‹å®ç°æ¨¡å‹è¯´èµ·ã€‚</p>
<p>çº¿ç¨‹å¯ä»¥è§†ä¸ºè¿›ç¨‹ä¸­çš„æ§åˆ¶æµã€‚ä¸€ä¸ªè¿›ç¨‹è‡³å°‘ä¼šåŒ…å«ä¸€ä¸ªçº¿ç¨‹ï¼Œå› ä¸ºå…¶ä¸­è‡³å°‘ä¼šæœ‰ä¸€ä¸ªæ§åˆ¶æµæŒç»­è¿è¡Œã€‚å› è€Œï¼Œä¸€ä¸ªè¿›ç¨‹çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹ä¼šéšç€è¿™ä¸ªè¿›ç¨‹çš„å¯åŠ¨è€Œåˆ›å»ºï¼Œè¿™ä¸ªçº¿ç¨‹ç§°ä¸ºè¯¥è¿›ç¨‹çš„ä¸»çº¿ç¨‹ã€‚å½“ç„¶ï¼Œä¸€ä¸ªè¿›ç¨‹ä¹Ÿå¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚è¿™äº›çº¿ç¨‹éƒ½æ˜¯ç”±å½“å‰è¿›ç¨‹ä¸­å·²å­˜åœ¨çš„çº¿ç¨‹åˆ›å»ºå‡ºæ¥çš„ï¼Œåˆ›å»ºçš„æ–¹æ³•å°±æ˜¯è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œæ›´ç¡®åˆ‡åœ°è¯´æ˜¯è°ƒç”¨<br>pthread createå‡½æ•°ã€‚æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹çš„è¿›ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”å³ä½¿æŸä¸ªæˆ–æŸäº›ä»»åŠ¡è¢«é˜»å¡ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–ä»»åŠ¡æ­£å¸¸æ‰§è¡Œï¼Œè¿™å¯ä»¥å¤§å¤§æ”¹å–„ç¨‹åºçš„å“åº”æ—¶é—´å’Œååé‡ã€‚å¦ä¸€æ–¹é¢ï¼Œçº¿ç¨‹ä¸å¯èƒ½ç‹¬ç«‹äºè¿›ç¨‹å­˜åœ¨ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸å¯èƒ½é€¾è¶Šå…¶æ‰€å±è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>çº¿ç¨‹çš„å®ç°æ¨¡å‹ä¸»è¦æœ‰3ä¸ªï¼Œåˆ†åˆ«æ˜¯:ç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹ã€å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹å’Œä¸¤çº§çº¿ç¨‹æ¨¡å‹ã€‚å®ƒä»¬ä¹‹é—´æœ€å¤§çš„å·®å¼‚å°±åœ¨äºçº¿ç¨‹ä¸å†…æ ¸è°ƒåº¦å®ä½“( Kernel Scheduling Entity,ç®€ç§°KSE)ä¹‹é—´çš„å¯¹åº”å…³ç³»ä¸Šã€‚é¡¾åæ€ä¹‰ï¼Œå†…æ ¸è°ƒåº¦å®ä½“å°±æ˜¯å¯ä»¥è¢«å†…æ ¸çš„è°ƒåº¦å™¨è°ƒåº¦çš„å¯¹è±¡ã€‚åœ¨å¾ˆå¤šæ–‡çŒ®å’Œä¹¦ä¸­ï¼Œå®ƒä¹Ÿç§°ä¸ºå†…æ ¸çº§çº¿ç¨‹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœ€å°è°ƒåº¦å•å…ƒã€‚</p>
<h3 id="å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹"><a href="#å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹" class="headerlink" title="å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹"></a>å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹</h3><p>ç”¨æˆ·çº¿ç¨‹ä¸KSEæ˜¯1å¯¹1å…³ç³»(1:1)ã€‚å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€çš„çº¿ç¨‹åº“(å¦‚linuxçš„pthreadï¼ŒJavaçš„java.lang.Threadï¼ŒC++11çš„std::threadç­‰ç­‰)éƒ½æ˜¯å¯¹æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ï¼ˆå†…æ ¸çº§çº¿ç¨‹ï¼‰çš„ä¸€å±‚å°è£…ï¼Œåˆ›å»ºå‡ºæ¥çš„æ¯ä¸ªçº¿ç¨‹ä¸ä¸€ä¸ªä¸åŒçš„KSEé™æ€å…³è”ï¼Œå› æ­¤å…¶è°ƒåº¦å®Œå…¨ç”±OSè°ƒåº¦å™¨æ¥åšã€‚è¿™ç§æ–¹å¼å®ç°ç®€å•ï¼Œç›´æ¥å€ŸåŠ©OSæä¾›çš„çº¿ç¨‹èƒ½åŠ›ï¼Œå¹¶ä¸”ä¸åŒç”¨æˆ·çº¿ç¨‹ä¹‹é—´ä¸€èˆ¬ä¹Ÿä¸ä¼šç›¸äº’å½±å“ã€‚ä½†å…¶åˆ›å»ºï¼Œé”€æ¯ä»¥åŠå¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ç­‰æ“ä½œéƒ½æ˜¯ç›´æ¥ç”±OSå±‚é¢äº²è‡ªæ¥åšï¼Œåœ¨éœ€è¦ä½¿ç”¨å¤§é‡çº¿ç¨‹çš„åœºæ™¯ä¸‹å¯¹OSçš„æ€§èƒ½å½±å“ä¼šå¾ˆå¤§ã€‚æ¯ä¸ªçº¿ç¨‹ç”±å†…æ ¸è°ƒåº¦å™¨ç‹¬ç«‹çš„è°ƒåº¦ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªçº¿ç¨‹é˜»å¡åˆ™ä¸å½±å“å…¶ä»–çš„çº¿ç¨‹ã€‚</p>
<p>ä¼˜ç‚¹ï¼šåœ¨å¤šæ ¸å¤„ç†å™¨çš„ç¡¬ä»¶çš„æ”¯æŒä¸‹ï¼Œå†…æ ¸ç©ºé—´çº¿ç¨‹æ¨¡å‹æ”¯æŒäº†çœŸæ­£çš„å¹¶è¡Œï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¢«é˜»å¡åï¼Œå…è®¸å¦ä¸€ä¸ªçº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œæ‰€ä»¥å¹¶å‘èƒ½åŠ›è¾ƒå¼ºã€‚</p>
<p>ç¼ºç‚¹ï¼šæ¯åˆ›å»ºä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ä¸å…¶å¯¹åº”ï¼Œè¿™æ ·åˆ›å»ºçº¿ç¨‹çš„å¼€é”€æ¯”è¾ƒå¤§ï¼Œä¼šå½±å“åˆ°åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<h3 id="ç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹"><a href="#ç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹" class="headerlink" title="ç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹"></a>ç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹</h3><p>ç”¨æˆ·çº¿ç¨‹ä¸KSEæ˜¯å¤šå¯¹1å…³ç³»(M:1)ï¼Œè¿™ç§çº¿ç¨‹çš„åˆ›å»ºï¼Œé”€æ¯ä»¥åŠå¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„åè°ƒç­‰æ“ä½œéƒ½æ˜¯ç”±ç”¨æˆ·è‡ªå·±å®ç°çš„çº¿ç¨‹åº“æ¥è´Ÿè´£ï¼Œå¯¹OSå†…æ ¸é€æ˜ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­æ‰€æœ‰åˆ›å»ºçš„çº¿ç¨‹éƒ½ä¸åŒä¸€ä¸ªKSEåœ¨è¿è¡Œæ—¶åŠ¨æ€å…³è”ã€‚ç°åœ¨æœ‰è®¸å¤šè¯­è¨€å®ç°çš„ <strong>åç¨‹</strong> åŸºæœ¬ä¸Šéƒ½å±äºè¿™ç§æ–¹å¼ã€‚è¿™ç§å®ç°æ–¹å¼ç›¸æ¯”å†…æ ¸çº§çº¿ç¨‹å¯ä»¥åšçš„å¾ˆè½»é‡çº§ï¼Œå¯¹ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ä¼šå°å¾ˆå¤šï¼Œå› æ­¤å¯ä»¥åˆ›å»ºçš„æ•°é‡ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢æ‰€èŠ±è´¹çš„ä»£ä»·ä¹Ÿä¼šå°å¾—å¤šã€‚ä½†è¯¥æ¨¡å‹æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªç”¨æˆ·çº¿ç¨‹ä¸Šè°ƒç”¨é˜»å¡å¼ç³»ç»Ÿè°ƒç”¨(å¦‚ç”¨é˜»å¡æ–¹å¼readç½‘ç»œIO)ï¼Œé‚£ä¹ˆä¸€æ—¦KSEå› é˜»å¡è¢«å†…æ ¸è°ƒåº¦å‡ºCPUçš„è¯ï¼Œå‰©ä¸‹çš„æ‰€æœ‰å¯¹åº”çš„ç”¨æˆ·çº¿ç¨‹å…¨éƒ½ä¼šå˜ä¸ºé˜»å¡çŠ¶æ€ï¼ˆæ•´ä¸ªè¿›ç¨‹æŒ‚èµ·ï¼‰ã€‚<br>æ‰€ä»¥è¿™äº›è¯­è¨€çš„<strong>åç¨‹åº“</strong>ä¼šæŠŠè‡ªå·±ä¸€äº›é˜»å¡çš„æ“ä½œé‡æ–°å°è£…ä¸ºå®Œå…¨çš„éé˜»å¡å½¢å¼ï¼Œç„¶ååœ¨ä»¥å‰è¦é˜»å¡çš„ç‚¹ä¸Šï¼Œä¸»åŠ¨è®©å‡ºè‡ªå·±ï¼Œå¹¶é€šè¿‡æŸç§æ–¹å¼é€šçŸ¥æˆ–å”¤é†’å…¶ä»–å¾…æ‰§è¡Œçš„ç”¨æˆ·çº¿ç¨‹åœ¨è¯¥KSEä¸Šè¿è¡Œï¼Œä»è€Œé¿å…äº†å†…æ ¸è°ƒåº¦å™¨ç”±äºKSEé˜»å¡è€Œåšä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™æ ·æ•´ä¸ªè¿›ç¨‹ä¹Ÿä¸ä¼šè¢«é˜»å¡äº†ã€‚</p>
<p>ä¼˜ç‚¹ï¼š è¿™ç§æ¨¡å‹çš„å¥½å¤„æ˜¯çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢éƒ½å‘ç”Ÿåœ¨ç”¨æˆ·ç©ºé—´ï¼Œé¿å…çš„æ¨¡æ€åˆ‡æ¢ï¼ˆmode switchï¼‰ï¼Œä»è€Œå¯¹äºæ€§èƒ½æœ‰ç§¯æçš„å½±å“ã€‚</p>
<p>ç¼ºç‚¹ï¼šæ‰€æœ‰çš„çº¿ç¨‹åŸºäºä¸€ä¸ªå†…æ ¸è°ƒåº¦å®ä½“å³å†…æ ¸çº¿ç¨‹ï¼Œè¿™æ„å‘³ç€åªæœ‰ä¸€ä¸ªå¤„ç†å™¨å¯ä»¥è¢«åˆ©ç”¨ï¼Œåœ¨å¤šå¤„ç†å™¨ç¯å¢ƒä¸‹è¿™æ˜¯ä¸èƒ½å¤Ÿè¢«æ¥å—çš„ï¼Œæœ¬è´¨ä¸Šï¼Œç”¨æˆ·çº¿ç¨‹åªè§£å†³äº†å¹¶å‘é—®é¢˜ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³å¹¶è¡Œé—®é¢˜ã€‚å¦‚æœçº¿ç¨‹å› ä¸º I&#x2F;O æ“ä½œé™·å…¥äº†å†…æ ¸æ€ï¼Œå†…æ ¸æ€çº¿ç¨‹é˜»å¡ç­‰å¾… I&#x2F;O æ•°æ®ï¼Œåˆ™æ‰€æœ‰çš„çº¿ç¨‹éƒ½å°†ä¼šè¢«é˜»å¡ï¼Œç”¨æˆ·ç©ºé—´ä¹Ÿå¯ä»¥ä½¿ç”¨éé˜»å¡è€Œ I&#x2F;Oï¼Œä½†æ˜¯ä¸èƒ½é¿å…æ€§èƒ½åŠå¤æ‚åº¦é—®é¢˜ã€‚</p>
<h3 id="ä¸¤çº§çº¿ç¨‹æ¨¡å‹"><a href="#ä¸¤çº§çº¿ç¨‹æ¨¡å‹" class="headerlink" title="ä¸¤çº§çº¿ç¨‹æ¨¡å‹"></a>ä¸¤çº§çº¿ç¨‹æ¨¡å‹</h3><p>ç”¨æˆ·çº¿ç¨‹ä¸KSEæ˜¯å¤šå¯¹å¤šå…³ç³»(M:N)ï¼Œè¿™ç§å®ç°ç»¼åˆäº†å‰ä¸¤ç§æ¨¡å‹çš„ä¼˜ç‚¹ï¼Œä¸ºä¸€ä¸ªè¿›ç¨‹ä¸­åˆ›å»ºå¤šä¸ªKSEï¼Œå¹¶ä¸”çº¿ç¨‹å¯ä»¥ä¸ä¸åŒçš„KSEåœ¨è¿è¡Œæ—¶è¿›è¡ŒåŠ¨æ€å…³è”ï¼Œå½“æŸä¸ªKSEç”±äºå…¶ä¸Šå·¥ä½œçš„çº¿ç¨‹çš„é˜»å¡æ“ä½œè¢«å†…æ ¸è°ƒåº¦å‡ºCPUæ—¶ï¼Œå½“å‰ä¸å…¶å…³è”çš„å…¶ä½™ç”¨æˆ·çº¿ç¨‹å¯ä»¥é‡æ–°ä¸å…¶ä»–KSEå»ºç«‹å…³è”å…³ç³»ã€‚å½“ç„¶è¿™ç§åŠ¨æ€å…³è”æœºåˆ¶çš„å®ç°å¾ˆå¤æ‚ï¼Œä¹Ÿéœ€è¦ç”¨æˆ·è‡ªå·±å»å®ç°ï¼Œè¿™ç®—æ˜¯å®ƒçš„ä¸€ä¸ªç¼ºç‚¹å§ã€‚Goè¯­è¨€ä¸­çš„å¹¶å‘å°±æ˜¯ä½¿ç”¨çš„è¿™ç§å®ç°æ–¹å¼ï¼ŒGoä¸ºäº†å®ç°è¯¥æ¨¡å‹è‡ªå·±å®ç°äº†ä¸€ä¸ªè¿è¡Œæ—¶è°ƒåº¦å™¨æ¥è´Ÿè´£Goä¸­çš„â€çº¿ç¨‹â€ä¸KSEçš„åŠ¨æ€å…³è”ã€‚æ­¤æ¨¡å‹æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º <strong>æ··åˆå‹çº¿ç¨‹æ¨¡å‹</strong>ï¼Œ<strong>å³ç”¨æˆ·è°ƒåº¦å™¨å®ç°ç”¨æˆ·çº¿ç¨‹åˆ°KSEçš„â€œè°ƒåº¦â€ï¼Œå†…æ ¸è°ƒåº¦å™¨å®ç°KSEåˆ°CPUä¸Šçš„è°ƒåº¦</strong>ã€‚</p>
<h2 id="Goå¹¶å‘è°ƒåº¦-G-P-Mæ¨¡å‹"><a href="#Goå¹¶å‘è°ƒåº¦-G-P-Mæ¨¡å‹" class="headerlink" title="Goå¹¶å‘è°ƒåº¦: G-P-Mæ¨¡å‹"></a>Goå¹¶å‘è°ƒåº¦: G-P-Mæ¨¡å‹</h2><p>åœ¨æ“ä½œç³»ç»Ÿæä¾›çš„å†…æ ¸çº¿ç¨‹ä¹‹ä¸Šï¼ŒGoæ­å»ºäº†ä¸€ä¸ªç‰¹æœ‰çš„ä¸¤çº§çº¿ç¨‹æ¨¡å‹ã€‚goroutineæœºåˆ¶å®ç°äº†M : Nçš„çº¿ç¨‹æ¨¡å‹ï¼Œgoroutineæœºåˆ¶æ˜¯åç¨‹ï¼ˆcoroutineï¼‰çš„ä¸€ç§å®ç°ï¼Œgolangå†…ç½®çš„è°ƒåº¦å™¨ï¼Œå¯ä»¥è®©å¤šæ ¸CPUä¸­æ¯ä¸ªCPUæ‰§è¡Œä¸€ä¸ªåç¨‹ã€‚</p>
<h3 id="è°ƒåº¦å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„"><a href="#è°ƒåº¦å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„" class="headerlink" title="è°ƒåº¦å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„"></a>è°ƒåº¦å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„</h3><p>æœ‰äº†ä¸Šé¢çš„è®¤è¯†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹çœŸæ­£çš„ä»‹ç»Goçš„å¹¶å‘æœºåˆ¶äº†ï¼Œå…ˆç”¨ä¸€æ®µä»£ç å±•ç¤ºä¸€ä¸‹åœ¨Goè¯­è¨€ä¸­æ–°å»ºä¸€ä¸ªâ€œçº¿ç¨‹â€(Goè¯­è¨€ä¸­ç§°ä¸ºGoroutine)çš„æ ·å­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”¨goå…³é”®å­—åŠ ä¸Šä¸€ä¸ªå‡½æ•°ï¼ˆè¿™é‡Œç”¨äº†åŒ¿åå‡½æ•°ï¼‰</span></span><br><span class="line"><span class="comment">// è°ƒç”¨å°±åšåˆ°äº†åœ¨ä¸€ä¸ªæ–°çš„â€œçº¿ç¨‹â€å¹¶å‘æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="comment">// do something in one new goroutine</span></span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>

<p>ç†è§£goroutineæœºåˆ¶çš„åŸç†ï¼Œå…³é”®æ˜¯ç†è§£Goè¯­è¨€schedulerçš„å®ç°ã€‚</p>
<p>Goè¯­è¨€ä¸­æ”¯æ’‘æ•´ä¸ªschedulerå®ç°çš„ä¸»è¦æœ‰4ä¸ªé‡è¦ç»“æ„ï¼Œåˆ†åˆ«æ˜¯Mã€Gã€Pã€Schedï¼Œ å‰ä¸‰ä¸ªå®šä¹‰åœ¨runtime.hä¸­ï¼ŒSchedå®šä¹‰åœ¨proc.cä¸­ã€‚</p>
<ul>
<li>Schedç»“æ„å°±æ˜¯è°ƒåº¦å™¨ï¼Œå®ƒç»´æŠ¤æœ‰å­˜å‚¨Må’ŒGçš„é˜Ÿåˆ—ä»¥åŠè°ƒåº¦å™¨çš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ç­‰ã€‚</li>
<li>Mç»“æ„æ˜¯Machineï¼Œç³»ç»Ÿçº¿ç¨‹ï¼Œå®ƒç”±æ“ä½œç³»ç»Ÿç®¡ç†çš„ï¼Œgoroutineå°±æ˜¯è·‘åœ¨Mä¹‹ä¸Šçš„ï¼›Mæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç»“æ„ï¼Œé‡Œé¢ç»´æŠ¤å°å¯¹è±¡å†…å­˜cacheï¼ˆmcacheï¼‰ã€å½“å‰æ‰§è¡Œçš„goroutineã€éšæœºæ•°å‘ç”Ÿå™¨ç­‰ç­‰éå¸¸å¤šçš„ä¿¡æ¯ã€‚</li>
<li>Pç»“æ„æ˜¯Processorï¼Œå¤„ç†å™¨ï¼Œå®ƒçš„ä¸»è¦ç”¨é€”å°±æ˜¯ç”¨æ¥æ‰§è¡Œgoroutineçš„ï¼Œå®ƒç»´æŠ¤äº†ä¸€ä¸ªgoroutineé˜Ÿåˆ—ï¼Œå³runqueueã€‚Processoræ˜¯è®©æˆ‘ä»¬ä»N:1è°ƒåº¦åˆ°M:Nè°ƒåº¦çš„é‡è¦éƒ¨åˆ†ã€‚</li>
<li>Gæ˜¯goroutineå®ç°çš„æ ¸å¿ƒç»“æ„ï¼Œå®ƒåŒ…å«äº†æ ˆï¼ŒæŒ‡ä»¤æŒ‡é’ˆï¼Œä»¥åŠå…¶ä»–å¯¹è°ƒåº¦goroutineå¾ˆé‡è¦çš„ä¿¡æ¯ï¼Œä¾‹å¦‚å…¶é˜»å¡çš„channelã€‚</li>
</ul>
<blockquote>
<p>Processorçš„æ•°é‡æ˜¯åœ¨å¯åŠ¨æ—¶è¢«è®¾ç½®ä¸ºç¯å¢ƒå˜é‡GOMAXPROCSçš„å€¼ï¼Œæˆ–è€…é€šè¿‡è¿è¡Œæ—¶è°ƒç”¨å‡½æ•°GOMAXPROCS()è¿›è¡Œè®¾ç½®ã€‚Processoræ•°é‡å›ºå®šæ„å‘³ç€ä»»æ„æ—¶åˆ»åªæœ‰GOMAXPROCSä¸ªçº¿ç¨‹åœ¨è¿è¡Œgoä»£ç ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬åˆ†åˆ«ç”¨ä¸‰è§’å½¢ï¼ŒçŸ©å½¢å’Œåœ†å½¢è¡¨ç¤ºMachine Processorå’ŒGoroutineã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/moxing4.jpg" alt="moxing4"></p>
<p>åœ¨å•æ ¸å¤„ç†å™¨çš„åœºæ™¯ä¸‹ï¼Œæ‰€æœ‰goroutineè¿è¡Œåœ¨åŒä¸€ä¸ªMç³»ç»Ÿçº¿ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªMç³»ç»Ÿçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ªProcessorï¼Œä»»ä½•æ—¶åˆ»ï¼Œä¸€ä¸ªProcessorä¸­åªæœ‰ä¸€ä¸ªgoroutineï¼Œå…¶ä»–goroutineåœ¨runqueueä¸­ç­‰å¾…ã€‚ä¸€ä¸ªgoroutineè¿è¡Œå®Œè‡ªå·±çš„æ—¶é—´ç‰‡åï¼Œè®©å‡ºä¸Šä¸‹æ–‡ï¼Œå›åˆ°runqueueä¸­ã€‚ å¤šæ ¸å¤„ç†å™¨çš„åœºæ™¯ä¸‹ï¼Œä¸ºäº†è¿è¡Œgoroutinesï¼Œæ¯ä¸ªMç³»ç»Ÿçº¿ç¨‹ä¼šæŒæœ‰ä¸€ä¸ªProcessorã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/moxing5.jpg" alt="moxing5"></p>
<p>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œschedulerä¼šæŒ‰ç…§ä¸Šé¢çš„æµç¨‹è¿›è¡Œè°ƒåº¦ï¼Œä½†æ˜¯çº¿ç¨‹ä¼šå‘ç”Ÿé˜»å¡ç­‰æƒ…å†µï¼Œçœ‹ä¸€ä¸‹goroutineå¯¹çº¿ç¨‹é˜»å¡ç­‰çš„å¤„ç†ã€‚</p>
<h3 id="çº¿ç¨‹é˜»å¡"><a href="#çº¿ç¨‹é˜»å¡" class="headerlink" title="çº¿ç¨‹é˜»å¡"></a>çº¿ç¨‹é˜»å¡</h3><p>å½“æ­£åœ¨è¿è¡Œçš„goroutineé˜»å¡çš„æ—¶å€™ï¼Œä¾‹å¦‚è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œä¼šå†åˆ›å»ºä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹ï¼ˆM1ï¼‰ï¼Œå½“å‰çš„Mçº¿ç¨‹æ”¾å¼ƒäº†å®ƒçš„Processorï¼ŒPè½¬åˆ°æ–°çš„çº¿ç¨‹ä¸­å»è¿è¡Œã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/moxing6.jpg" alt="moxing6"></p>
<h3 id="runqueueæ‰§è¡Œå®Œæˆ"><a href="#runqueueæ‰§è¡Œå®Œæˆ" class="headerlink" title="runqueueæ‰§è¡Œå®Œæˆ"></a>runqueueæ‰§è¡Œå®Œæˆ</h3><p>å½“å…¶ä¸­ä¸€ä¸ªProcessorçš„runqueueä¸ºç©ºï¼Œæ²¡æœ‰goroutineå¯ä»¥è°ƒåº¦ã€‚å®ƒä¼šä»å¦å¤–ä¸€ä¸ªä¸Šä¸‹æ–‡å·å–ä¸€åŠçš„goroutineã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/moxing7.jpg" alt="moxing7"></p>
<blockquote>
<p>å…¶å›¾ä¸­çš„Gï¼ŒPå’ŒMéƒ½æ˜¯Goè¯­è¨€è¿è¡Œæ—¶ç³»ç»Ÿï¼ˆå…¶ä¸­åŒ…æ‹¬å†…å­˜åˆ†é…å™¨ï¼Œå¹¶å‘è°ƒåº¦å™¨ï¼Œåƒåœ¾æ”¶é›†å™¨ç­‰ç»„ä»¶ï¼Œå¯ä»¥æƒ³è±¡ä¸ºJavaä¸­çš„JVMï¼‰æŠ½è±¡å‡ºæ¥æ¦‚å¿µå’Œæ•°æ®ç»“æ„å¯¹è±¡ï¼š<br>Gï¼šGoroutineçš„ç®€ç§°ï¼Œä¸Šé¢ç”¨goå…³é”®å­—åŠ å‡½æ•°è°ƒç”¨çš„ä»£ç å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªGå¯¹è±¡ï¼Œæ˜¯å¯¹ä¸€ä¸ªè¦å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡çš„å°è£…ï¼Œä¹Ÿå¯ä»¥ç§°ä½œç”¨æˆ·æ€çº¿ç¨‹ã€‚å±äºç”¨æˆ·çº§èµ„æºï¼Œå¯¹OSé€æ˜ï¼Œå…·å¤‡è½»é‡çº§ï¼Œå¯ä»¥å¤§é‡åˆ›å»ºï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ä½ç­‰ç‰¹ç‚¹ã€‚<br>Mï¼šMachineçš„ç®€ç§°ï¼Œåœ¨linuxå¹³å°ä¸Šæ˜¯ç”¨cloneç³»ç»Ÿè°ƒç”¨åˆ›å»ºçš„ï¼Œå…¶ä¸ç”¨linux pthreadåº“åˆ›å»ºå‡ºæ¥çš„çº¿ç¨‹æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åˆ©ç”¨ç³»ç»Ÿè°ƒç”¨åˆ›å»ºå‡ºæ¥çš„OSçº¿ç¨‹å®ä½“ã€‚Mçš„ä½œç”¨å°±æ˜¯æ‰§è¡ŒGä¸­åŒ…è£…çš„å¹¶å‘ä»»åŠ¡ã€‚<strong>Goè¿è¡Œæ—¶ç³»ç»Ÿä¸­çš„è°ƒåº¦å™¨çš„ä¸»è¦èŒè´£å°±æ˜¯å°†Gå…¬å¹³åˆç†çš„å®‰æ’åˆ°å¤šä¸ªMä¸Šå»æ‰§è¡Œ</strong>ã€‚å…¶å±äºOSèµ„æºï¼Œå¯åˆ›å»ºçš„æ•°é‡ä¸Šä¹Ÿå—é™äº†OSï¼Œé€šå¸¸æƒ…å†µä¸‹Gçš„æ•°é‡éƒ½å¤šäºæ´»è·ƒçš„Mçš„ã€‚<br>Pï¼šProcessorçš„ç®€ç§°ï¼Œé€»è¾‘å¤„ç†å™¨ï¼Œä¸»è¦ä½œç”¨æ˜¯ç®¡ç†Gå¯¹è±¡ï¼ˆæ¯ä¸ªPéƒ½æœ‰ä¸€ä¸ªGé˜Ÿåˆ—ï¼‰ï¼Œå¹¶ä¸ºGåœ¨Mä¸Šçš„è¿è¡Œæä¾›æœ¬åœ°åŒ–èµ„æºã€‚</p>
</blockquote>
<p>ä»ä¸¤çº§çº¿ç¨‹æ¨¡å‹æ¥çœ‹ï¼Œä¼¼ä¹å¹¶ä¸éœ€è¦Pçš„å‚ä¸ï¼Œæœ‰Gå’ŒMå°±å¯ä»¥äº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¦åŠ å…¥Pè¿™ä¸ªä¸œä¸œå‘¢ï¼Ÿ<br>å…¶å®Goè¯­è¨€è¿è¡Œæ—¶ç³»ç»Ÿæ—©æœŸ(Go1.0)çš„å®ç°ä¸­å¹¶æ²¡æœ‰Pçš„æ¦‚å¿µï¼ŒGoä¸­çš„è°ƒåº¦å™¨ç›´æ¥å°†Gåˆ†é…åˆ°åˆé€‚çš„Mä¸Šè¿è¡Œã€‚ä½†è¿™æ ·å¸¦æ¥äº†å¾ˆå¤šé—®é¢˜ï¼Œä¾‹å¦‚ï¼Œä¸åŒçš„Gåœ¨ä¸åŒçš„Mä¸Šå¹¶å‘è¿è¡Œæ—¶å¯èƒ½éƒ½éœ€å‘ç³»ç»Ÿç”³è¯·èµ„æºï¼ˆå¦‚å †å†…å­˜ï¼‰ï¼Œç”±äºèµ„æºæ˜¯å…¨å±€çš„ï¼Œå°†ä¼šç”±äºèµ„æºç«äº‰é€ æˆå¾ˆå¤šç³»ç»Ÿæ€§èƒ½æŸè€—ï¼Œä¸ºäº†è§£å†³ç±»ä¼¼çš„é—®é¢˜ï¼Œåé¢çš„Goï¼ˆGo1.1ï¼‰è¿è¡Œæ—¶ç³»ç»ŸåŠ å…¥äº†Pï¼Œè®©På»ç®¡ç†Gå¯¹è±¡ï¼ŒMè¦æƒ³è¿è¡ŒGå¿…é¡»å…ˆä¸ä¸€ä¸ªPç»‘å®šï¼Œç„¶åæ‰èƒ½è¿è¡Œè¯¥Pç®¡ç†çš„Gã€‚è¿™æ ·å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨På¯¹è±¡ä¸­é¢„å…ˆç”³è¯·ä¸€äº›ç³»ç»Ÿèµ„æºï¼ˆæœ¬åœ°èµ„æºï¼‰ï¼ŒGéœ€è¦çš„æ—¶å€™å…ˆå‘è‡ªå·±çš„æœ¬åœ°Pç”³è¯·ï¼ˆæ— éœ€é”ä¿æŠ¤ï¼‰ï¼Œå¦‚æœä¸å¤Ÿç”¨æˆ–æ²¡æœ‰å†å‘å…¨å±€ç”³è¯·ï¼Œè€Œä¸”ä»å…¨å±€æ‹¿çš„æ—¶å€™ä¼šå¤šæ‹¿ä¸€éƒ¨åˆ†ï¼Œä»¥ä¾›åé¢é«˜æ•ˆçš„ä½¿ç”¨ã€‚å°±åƒç°åœ¨æˆ‘ä»¬å»æ”¿åºœåŠäº‹æƒ…ä¸€æ ·ï¼Œå…ˆå»æœ¬åœ°æ”¿åºœçœ‹èƒ½æå®šä¸ï¼Œå¦‚æœæä¸å®šå†å»ä¸­å¤®ï¼Œä»è€Œæä¾›åŠäº‹æ•ˆç‡ã€‚<br>è€Œä¸”ç”±äºPè§£è€¦äº†Gå’ŒMå¯¹è±¡ï¼Œè¿™æ ·å³ä½¿Mç”±äºè¢«å…¶ä¸Šæ­£åœ¨è¿è¡Œçš„Gé˜»å¡ä½ï¼Œå…¶ä½™ä¸è¯¥Må…³è”çš„Gä¹Ÿå¯ä»¥éšç€Pä¸€èµ·è¿ç§»åˆ°åˆ«çš„æ´»è·ƒçš„Mä¸Šç»§ç»­è¿è¡Œï¼Œä»è€Œè®©Gæ€»èƒ½åŠæ—¶æ‰¾åˆ°Må¹¶è¿è¡Œè‡ªå·±ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›ã€‚<br>Goè¿è¡Œæ—¶ç³»ç»Ÿé€šè¿‡æ„é€ G-P-Må¯¹è±¡æ¨¡å‹å®ç°äº†ä¸€å¥—ç”¨æˆ·æ€çš„å¹¶å‘è°ƒåº¦ç³»ç»Ÿï¼Œå¯ä»¥è‡ªå·±ç®¡ç†å’Œè°ƒåº¦è‡ªå·±çš„å¹¶å‘ä»»åŠ¡ï¼Œæ‰€ä»¥å¯ä»¥è¯´Goè¯­è¨€<strong>åŸç”Ÿæ”¯æŒå¹¶å‘</strong>ã€‚<strong>è‡ªå·±å®ç°çš„è°ƒåº¦å™¨è´Ÿè´£å°†å¹¶å‘ä»»åŠ¡åˆ†é…åˆ°ä¸åŒçš„å†…æ ¸çº¿ç¨‹ä¸Šè¿è¡Œï¼Œç„¶åå†…æ ¸è°ƒåº¦å™¨æ¥ç®¡å†…æ ¸çº¿ç¨‹åœ¨CPUä¸Šçš„æ‰§è¡Œä¸è°ƒåº¦ã€‚</strong></p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>Goè¿è¡Œæ—¶å®Œæ•´çš„è°ƒåº¦ç³»ç»Ÿæ˜¯å¾ˆå¤æ‚ï¼Œå¾ˆéš¾ç”¨ä¸€ç¯‡æ–‡ç« æè¿°çš„æ¸…æ¥šï¼Œè¿™é‡Œåªèƒ½ä»å®è§‚ä¸Šä»‹ç»ä¸€ä¸‹ï¼Œè®©å¤§å®¶æœ‰ä¸ªæ•´ä½“çš„è®¤è¯†ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Goroutine1</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">task1</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">go</span> task2()</span><br><span class="line">    <span class="keyword">go</span> task3()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªG(Goroutine1)å·²ç»é€šè¿‡Pè¢«å®‰æ’åˆ°äº†ä¸€ä¸ªMä¸Šæ­£åœ¨æ‰§è¡Œï¼Œåœ¨Goroutine1æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æˆ‘ä»¬åˆåˆ›å»ºä¸¤ä¸ªGï¼Œè¿™ä¸¤ä¸ªGä¼šè¢«é©¬ä¸Šæ”¾å…¥ä¸Goroutine1ç›¸åŒçš„Pçš„æœ¬åœ°Gä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ’é˜Ÿç­‰å¾…ä¸è¯¥Pç»‘å®šçš„Mçš„æ‰§è¡Œï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ç»“æ„ï¼Œå¾ˆå¥½ç†è§£ã€‚ å…³é”®é—®é¢˜æ˜¯:</p>
<p><strong>a.å¦‚ä½•åœ¨ä¸€ä¸ªå¤šæ ¸å¿ƒç³»ç»Ÿä¸Šå°½é‡åˆç†åˆ†é…Gåˆ°å¤šä¸ªMä¸Šè¿è¡Œï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸ï¼Œæé«˜å¹¶å‘èƒ½åŠ›å‘¢ï¼Ÿ</strong><br>å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªGoroutineä¸­é€šè¿‡<strong>go</strong>å…³é”®å­—åˆ›å»ºäº†å¤§é‡Gï¼Œè¿™äº›Gè™½ç„¶æš‚æ—¶ä¼šè¢«æ”¾åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—, ä½†å¦‚æœè¿™æ—¶è¿˜æœ‰ç©ºé—²Pï¼ˆç³»ç»Ÿå†…Pçš„æ•°é‡é»˜è®¤ç­‰äºç³»ç»Ÿcpuæ ¸å¿ƒæ•°ï¼‰ï¼ŒGoè¿è¡Œæ—¶ç³»ç»Ÿå§‹ç»ˆèƒ½ä¿è¯è‡³å°‘æœ‰ä¸€ä¸ªï¼ˆé€šå¸¸ä¹Ÿåªæœ‰ä¸€ä¸ªï¼‰æ´»è·ƒçš„Mä¸ç©ºé—²Pç»‘å®šå»å„ç§Gé˜Ÿåˆ—å»å¯»æ‰¾å¯è¿è¡Œçš„Gä»»åŠ¡ï¼Œè¯¥ç§Mç§°ä¸º<strong>è‡ªæ—‹çš„M</strong>ã€‚ä¸€èˆ¬å¯»æ‰¾é¡ºåºä¸ºï¼šè‡ªå·±ç»‘å®šçš„Pçš„é˜Ÿåˆ—ï¼Œå…¨å±€é˜Ÿåˆ—ï¼Œç„¶åå…¶ä»–Pé˜Ÿåˆ—ã€‚å¦‚æœè‡ªå·±Pé˜Ÿåˆ—æ‰¾åˆ°å°±æ‹¿å‡ºæ¥å¼€å§‹è¿è¡Œï¼Œå¦åˆ™å»å…¨å±€é˜Ÿåˆ—çœ‹çœ‹ï¼Œç”±äºå…¨å±€é˜Ÿåˆ—éœ€è¦é”ä¿æŠ¤ï¼Œå¦‚æœé‡Œé¢æœ‰å¾ˆå¤šä»»åŠ¡ï¼Œä¼šè½¬ç§»ä¸€æ‰¹åˆ°æœ¬åœ°Pé˜Ÿåˆ—ä¸­ï¼Œé¿å…æ¯æ¬¡éƒ½å»ç«äº‰é”ã€‚å¦‚æœå…¨å±€é˜Ÿåˆ—è¿˜æ˜¯æ²¡æœ‰ï¼Œå°±è¦å¼€å§‹ç©ç‹ çš„äº†ï¼Œç›´æ¥ä»å…¶ä»–Pé˜Ÿåˆ—å·ä»»åŠ¡äº†ï¼ˆå·ä¸€åŠä»»åŠ¡å›æ¥ï¼‰ã€‚è¿™æ ·å°±ä¿è¯äº†åœ¨è¿˜æœ‰å¯è¿è¡Œçš„Gä»»åŠ¡çš„æƒ…å†µä¸‹ï¼Œæ€»æœ‰ä¸CPUæ ¸å¿ƒæ•°ç›¸ç­‰çš„M+Pç»„åˆ åœ¨æ‰§è¡ŒGä»»åŠ¡æˆ–åœ¨æ‰§è¡ŒGçš„è·¯ä¸Š(å¯»æ‰¾Gä»»åŠ¡)ã€‚</p>
<p><strong>b. å¦‚æœæŸä¸ªMåœ¨æ‰§è¡ŒGçš„è¿‡ç¨‹ä¸­è¢«Gä¸­çš„ç³»ç»Ÿè°ƒç”¨é˜»å¡äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ</strong><br>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªMå°†ä¼šè¢«å†…æ ¸è°ƒåº¦å™¨è°ƒåº¦å‡ºCPUå¹¶å¤„äºé˜»å¡çŠ¶æ€ï¼Œä¸è¯¥Må…³è”çš„å…¶ä»–Gå°±æ²¡æœ‰åŠæ³•ç»§ç»­æ‰§è¡Œäº†ï¼Œä½†Goè¿è¡Œæ—¶ç³»ç»Ÿçš„ä¸€ä¸ªç›‘æ§çº¿ç¨‹(sysmonçº¿ç¨‹)èƒ½æ¢æµ‹åˆ°è¿™æ ·çš„Mï¼Œå¹¶æŠŠä¸è¯¥Mç»‘å®šçš„På‰¥ç¦»ï¼Œå¯»æ‰¾å…¶ä»–ç©ºé—²æˆ–æ–°å»ºMæ¥ç®¡è¯¥Pï¼Œç„¶åç»§ç»­è¿è¡Œå…¶ä¸­çš„Gï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç„¶åç­‰åˆ°è¯¥Mä»é˜»å¡çŠ¶æ€æ¢å¤ï¼Œéœ€è¦é‡æ–°æ‰¾ä¸€ä¸ªç©ºé—²Pæ¥ç»§ç»­æ‰§è¡ŒåŸæ¥çš„Gï¼Œå¦‚æœè¿™æ—¶ç³»ç»Ÿæ­£å¥½æ²¡æœ‰ç©ºé—²çš„Pï¼Œå°±æŠŠåŸæ¥çš„Gæ”¾åˆ°å…¨å±€é˜Ÿåˆ—å½“ä¸­ï¼Œç­‰å¾…å…¶ä»–M+Pç»„åˆå‘æ˜å¹¶æ‰§è¡Œã€‚</p>
<p><strong>c. å¦‚æœæŸä¸€ä¸ªGåœ¨Mè¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œæœ‰æ²¡æœ‰åŠæ³•åšæŠ¢å å¼è°ƒåº¦ï¼Œè®©è¯¥Mä¸Šçš„å…¶ä»–Gè·å¾—ä¸€å®šçš„è¿è¡Œæ—¶é—´ï¼Œä»¥ä¿è¯è°ƒåº¦ç³»ç»Ÿçš„å…¬å¹³æ€§?</strong><br>æˆ‘ä»¬çŸ¥é“linuxçš„å†…æ ¸è°ƒåº¦å™¨ä¸»è¦æ˜¯åŸºäºæ—¶é—´ç‰‡å’Œä¼˜å…ˆçº§åšè°ƒåº¦çš„ã€‚å¯¹äºç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œå†…æ ¸è°ƒåº¦å™¨ä¼šå°½é‡ä¿è¯æ¯ä¸ªçº¿ç¨‹éƒ½èƒ½è·å¾—ä¸€å®šçš„æ‰§è¡Œæ—¶é—´ã€‚ä¸ºäº†é˜²æ­¢æœ‰äº›çº¿ç¨‹â€é¥¿æ­»â€çš„æƒ…å†µï¼Œå†…æ ¸è°ƒåº¦å™¨ä¼šå‘èµ·æŠ¢å å¼è°ƒåº¦å°†é•¿æœŸè¿è¡Œçš„çº¿ç¨‹ä¸­æ–­å¹¶è®©å‡ºCPUèµ„æºï¼Œè®©å…¶ä»–çº¿ç¨‹è·å¾—æ‰§è¡Œæœºä¼šã€‚å½“ç„¶åœ¨Goçš„è¿è¡Œæ—¶è°ƒåº¦å™¨ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„æŠ¢å æœºåˆ¶ï¼Œä½†å¹¶ä¸èƒ½ä¿è¯æŠ¢å èƒ½æˆåŠŸï¼Œå› ä¸ºGoè¿è¡Œæ—¶ç³»ç»Ÿå¹¶æ²¡æœ‰å†…æ ¸è°ƒåº¦å™¨çš„ä¸­æ–­èƒ½åŠ›ï¼Œå®ƒåªèƒ½é€šè¿‡å‘è¿è¡Œæ—¶é—´è¿‡é•¿çš„Gä¸­è®¾ç½®æŠ¢å flagçš„æ–¹æ³•æ¸©æŸ”çš„è®©è¿è¡Œçš„Gè‡ªå·±ä¸»åŠ¨è®©å‡ºMçš„æ‰§è¡Œæƒã€‚<br>è¯´åˆ°è¿™é‡Œå°±ä¸å¾—ä¸æä¸€ä¸‹Goroutineåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥åŠ¨æ€æ‰©å±•è‡ªå·±çº¿ç¨‹æ ˆçš„èƒ½åŠ›ï¼Œå¯ä»¥ä»åˆå§‹çš„2KBå¤§å°æ‰©å±•åˆ°æœ€å¤§1Gï¼ˆ64bitç³»ç»Ÿä¸Šï¼‰ï¼Œå› æ­¤åœ¨æ¯æ¬¡è°ƒç”¨å‡½æ•°ä¹‹å‰éœ€è¦å…ˆè®¡ç®—è¯¥å‡½æ•°è°ƒç”¨éœ€è¦çš„æ ˆç©ºé—´å¤§å°ï¼Œç„¶åæŒ‰éœ€æ‰©å±•ï¼ˆè¶…è¿‡æœ€å¤§å€¼å°†å¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ï¼‰ã€‚GoæŠ¢å å¼è°ƒåº¦çš„æœºåˆ¶å°±æ˜¯åˆ©ç”¨åœ¨åˆ¤æ–­è¦ä¸è¦æ‰©æ ˆçš„æ—¶å€™é¡ºä¾¿æŸ¥çœ‹ä»¥ä¸‹è‡ªå·±çš„æŠ¢å flagï¼Œå†³å®šæ˜¯å¦ç»§ç»­æ‰§è¡Œï¼Œè¿˜æ˜¯è®©å‡ºè‡ªå·±ã€‚<br>è¿è¡Œæ—¶ç³»ç»Ÿçš„ç›‘æ§çº¿ç¨‹ä¼šè®¡æ—¶å¹¶è®¾ç½®æŠ¢å flagåˆ°è¿è¡Œæ—¶é—´è¿‡é•¿çš„Gï¼Œç„¶åGåœ¨æœ‰å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¼šæ£€æŸ¥è¯¥æŠ¢å flagï¼Œå¦‚æœå·²è®¾ç½®å°±å°†è‡ªå·±æ”¾å…¥å…¨å±€é˜Ÿåˆ—ï¼Œè¿™æ ·è¯¥Mä¸Šå…³è”çš„å…¶ä»–Gå°±æœ‰æœºä¼šæ‰§è¡Œäº†ã€‚ä½†å¦‚æœæ­£åœ¨æ‰§è¡Œçš„Gæ˜¯ä¸ªå¾ˆè€—æ—¶çš„æ“ä½œä¸”æ²¡æœ‰ä»»ä½•å‡½æ•°è°ƒç”¨(å¦‚åªæ˜¯forå¾ªç¯ä¸­çš„è®¡ç®—æ“ä½œ)ï¼Œå³ä½¿æŠ¢å flagå·²ç»è¢«è®¾ç½®ï¼Œè¯¥Gè¿˜æ˜¯å°†ä¸€ç›´éœ¸å ç€å½“å‰Mç›´åˆ°æ‰§è¡Œå®Œè‡ªå·±çš„ä»»åŠ¡ã€‚</p>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		ä¸€ä¸ªgoroutineæ‰“å°æ•°å­—ï¼Œå¦å¤–ä¸€ä¸ªgoroutineæ‰“å°å­—æ¯ï¼Œè§‚å¯Ÿè¿è¡Œç»“æœã€‚ã€‚</span></span><br><span class="line"><span class="comment">		å¹¶å‘çš„ç¨‹åºçš„è¿è¡Œç»“æœï¼Œæ¯æ¬¡éƒ½ä¸ä¸€å®šç›¸åŒã€‚</span></span><br><span class="line"><span class="comment">		ä¸åŒè®¡ç®—æœºè®¾å¤‡æ‰§è¡Œï¼Œæ•ˆæœä¹Ÿä¸ç›¸åŒã€‚</span></span><br><span class="line"><span class="comment">		goè¯­è¨€çš„å¹¶å‘ï¼šgoå…³é”®å­—</span></span><br><span class="line"><span class="comment">			ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºå¹¶å¯åŠ¨ä¸»goroutineï¼Œæ‰§è¡Œå¯¹åº”çš„main()</span></span><br><span class="line"><span class="comment">			ç”¨äºè‡ªå·±åˆ›å»ºå¹¶å¯åŠ¨å­goroutineï¼Œæ‰§è¡Œå¯¹åº”çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">			go å‡½æ•°()//goå…³é”®åˆ›å»ºå¹¶å¯åŠ¨goroutineï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„å‡½æ•°()ï¼Œè¯¥å‡½æ•°æ‰§è¡Œç»“æŸï¼Œå­goroutineä¹Ÿéšä¹‹ç»“æŸã€‚</span></span><br><span class="line"><span class="comment">				å­goroutineä¸­æ‰§è¡Œçš„å‡½æ•°ï¼Œå¾€å¾€æ²¡æœ‰è¿”å›å€¼ã€‚</span></span><br><span class="line"><span class="comment">				å¦‚æœæœ‰ä¹Ÿä¼šè¢«èˆå¼ƒã€‚</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.å…ˆåˆ›å»ºå¹¶å¯åŠ¨å­goroutineï¼Œæ‰§è¡ŒprintNum()</span></span><br><span class="line">	<span class="keyword">go</span> printNum()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.mainä¸­æ‰“å°å­—æ¯</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;\tä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA %d\n&quot;</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	fmt.Println(<span class="string">&quot;main...over...&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printNum</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;å­goroutineä¸­æ‰“å°æ•°å­—ï¼š%d\n&quot;</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 1</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š1</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š2</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š3</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š4</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š5</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š6</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š7</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 2</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 3</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 4</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 5</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 6</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 7</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 8</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š8</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š9</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 9</span><br><span class="line">å­goroutineä¸­æ‰“å°æ•°å­—ï¼š10</span><br><span class="line">	ä¸»goroutineä¸­æ‰“å°å­—æ¯ï¼šA 10</span><br><span class="line">main...over...</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>ioutilåŒ…ä¸å¹¶å‘ç¼–ç¨‹åˆè¯†</title>
    <url>/2023/06/13/Go/16/</url>
    <content><![CDATA[<h1 id="ioutilåŒ…"><a href="#ioutilåŒ…" class="headerlink" title="ioutilåŒ…"></a>ioutilåŒ…</h1><p>é™¤äº†ioåŒ…å¯ä»¥è¯»å†™æ•°æ®ï¼ŒGoè¯­è¨€ä¸­è¿˜æä¾›äº†ä¸€ä¸ªè¾…åŠ©çš„å·¥å…·åŒ…å°±æ˜¯ioutilï¼Œé‡Œé¢çš„æ–¹æ³•è™½ç„¶ä¸å¤šï¼Œä½†æ˜¯éƒ½è¿˜è›®å¥½ç”¨çš„ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;io/ioutil&quot;</span></span><br></pre></td></tr></table></figure>

<p>è¯¥åŒ…çš„ä»‹ç»åªæœ‰ä¸€å¥è¯ï¼šPackage ioutil implements some I&#x2F;O utility functionsã€‚</p>
<h2 id="ioutilåŒ…çš„æ–¹æ³•"><a href="#ioutilåŒ…çš„æ–¹æ³•" class="headerlink" title="ioutilåŒ…çš„æ–¹æ³•"></a>ioutilåŒ…çš„æ–¹æ³•</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é‡Œé¢çš„æ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Discard æ˜¯ä¸€ä¸ª io.Writer æ¥å£ï¼Œè°ƒç”¨å®ƒçš„ Write æ–¹æ³•å°†ä¸åšä»»ä½•äº‹æƒ…</span></span><br><span class="line"><span class="comment">// å¹¶ä¸”å§‹ç»ˆæˆåŠŸè¿”å›ã€‚</span></span><br><span class="line"><span class="keyword">var</span> Discard io.Writer = devNull(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReadAll è¯»å– r ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œè¿”å›è¯»å–çš„æ•°æ®å’Œé‡åˆ°çš„é”™è¯¯ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœè¯»å–æˆåŠŸï¼Œåˆ™ err è¿”å› nilï¼Œè€Œä¸æ˜¯ EOFï¼Œå› ä¸º ReadAll å®šä¹‰ä¸ºè¯»å–</span></span><br><span class="line"><span class="comment">// æ‰€æœ‰æ•°æ®ï¼Œæ‰€ä»¥ä¸ä¼šæŠŠ EOF å½“åšé”™è¯¯å¤„ç†ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReadAll</span><span class="params">(r io.Reader)</span></span> ([]<span class="type">byte</span>, <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReadFile è¯»å–æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œè¿”å›è¯»å–çš„æ•°æ®å’Œé‡åˆ°çš„é”™è¯¯ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœè¯»å–æˆåŠŸï¼Œåˆ™ err è¿”å› nilï¼Œè€Œä¸æ˜¯ EOF</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReadFile</span><span class="params">(filename <span class="type">string</span>)</span></span> ([]<span class="type">byte</span>, <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// WriteFile å‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ï¼Œå†™å…¥å‰ä¼šæ¸…ç©ºæ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šä»¥æŒ‡å®šçš„æƒé™åˆ›å»ºè¯¥æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="comment">// è¿”å›é‡åˆ°çš„é”™è¯¯ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WriteFile</span><span class="params">(filename <span class="type">string</span>, data []<span class="type">byte</span>, perm os.FileMode)</span></span> <span class="type">error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ReadDir è¯»å–æŒ‡å®šç›®å½•ä¸­çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶ï¼ˆä¸åŒ…æ‹¬å­ç›®å½•ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">// è¿”å›è¯»å–åˆ°çš„æ–‡ä»¶ä¿¡æ¯åˆ—è¡¨å’Œé‡åˆ°çš„é”™è¯¯ï¼Œåˆ—è¡¨æ˜¯ç»è¿‡æ’åºçš„ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReadDir</span><span class="params">(dirname <span class="type">string</span>)</span></span> ([]os.FileInfo, <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// NopCloser å°† r åŒ…è£…ä¸ºä¸€ä¸ª ReadCloser ç±»å‹ï¼Œä½† Close æ–¹æ³•ä¸åšä»»ä½•äº‹æƒ…ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NopCloser</span><span class="params">(r io.Reader)</span></span> io.ReadCloser</span><br><span class="line"></span><br><span class="line"><span class="comment">// TempFile åœ¨ dir ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªä»¥ prefix ä¸ºå‰ç¼€çš„ä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä»¥è¯»</span></span><br><span class="line"><span class="comment">// å†™æ¨¡å¼æ‰“å¼€ã€‚è¿”å›åˆ›å»ºçš„æ–‡ä»¶å¯¹è±¡å’Œé‡åˆ°çš„é”™è¯¯ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœ dir ä¸ºç©ºï¼Œåˆ™åœ¨é»˜è®¤çš„ä¸´æ—¶ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ï¼ˆå‚è§ os.TempDirï¼‰ï¼Œå¤šæ¬¡</span></span><br><span class="line"><span class="comment">// è°ƒç”¨ä¼šåˆ›å»ºä¸åŒçš„ä¸´æ—¶æ–‡ä»¶ï¼Œè°ƒç”¨è€…å¯ä»¥é€šè¿‡ f.Name() è·å–æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚</span></span><br><span class="line"><span class="comment">// è°ƒç”¨æœ¬å‡½æ•°æ‰€åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶ï¼Œåº”è¯¥ç”±è°ƒç”¨è€…è‡ªå·±åˆ é™¤ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TempFile</span><span class="params">(dir, prefix <span class="type">string</span>)</span></span> (f *os.File, err <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// TempDir åŠŸèƒ½åŒ TempFileï¼Œåªä¸è¿‡åˆ›å»ºçš„æ˜¯ç›®å½•ï¼Œè¿”å›ç›®å½•çš„å®Œæ•´è·¯å¾„ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TempDir</span><span class="params">(dir, prefix <span class="type">string</span>)</span></span> (name <span class="type">string</span>, err <span class="type">error</span>)</span><br></pre></td></tr></table></figure>

<h2 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		ioutilåŒ…ï¼š</span></span><br><span class="line"><span class="comment">			ReadFile()</span></span><br><span class="line"><span class="comment">			WriteFile()</span></span><br><span class="line"><span class="comment">			ReadDir()</span></span><br><span class="line"><span class="comment">			..</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.è¯»å–æ–‡ä»¶ä¸­çš„æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line">	<span class="comment">//fileName := &quot;main/1.txt&quot;</span></span><br><span class="line">	<span class="comment">//data, err := ioutil.ReadFile(fileName)</span></span><br><span class="line">	<span class="comment">////fmt.Println(err)</span></span><br><span class="line">	<span class="comment">////fmt.Println(data)</span></span><br><span class="line">	<span class="comment">//fmt.Println(string(data))</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.å†™å‡ºæ•°æ®(è¦†ç›–å†™)</span></span><br><span class="line">	<span class="comment">//fileName := &quot;main/1.txt&quot;</span></span><br><span class="line">	<span class="comment">//s1 := &quot;åºŠå‰æ˜æœˆå…‰ï¼Œåœ°ä¸Šé‹ä¸‰åŒ&quot;</span></span><br><span class="line">	<span class="comment">//err := ioutil.WriteFile(fileName, []byte(s1), os.ModePerm)</span></span><br><span class="line">	<span class="comment">//fmt.Println(err)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.ReadAll()</span></span><br><span class="line">	<span class="comment">//s2 := &quot;ç‹äºŒç‹—å’Œæå°èŠ±æ˜¯ä¸¤ä¸ªå¥½æœ‹å‹ï¼ŒRubyå°±æ˜¯æˆ‘ï¼Œä¹Ÿæ˜¯ä»–ä»¬çš„æœ‹å‹&quot;</span></span><br><span class="line">	<span class="comment">//r1 := strings.NewReader(s2)</span></span><br><span class="line">	<span class="comment">//data, err := ioutil.ReadAll(r1)</span></span><br><span class="line">	<span class="comment">//fmt.Println(err)</span></span><br><span class="line">	<span class="comment">//fmt.Println(data)</span></span><br><span class="line">	<span class="comment">//fmt.Println(string(data))</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//4.ReadDir()ï¼Œè¯»å–ä¸€ä¸ªç›®å½•ä¸‹çš„å­å†…å®¹ï¼šå­æ–‡ä»¶å’Œå­ç›®å½•ï¼Œä½†æ˜¯åªèƒ½è¯»å–ä¸€å±‚</span></span><br><span class="line">	<span class="comment">//dirName := &quot;main&quot;</span></span><br><span class="line">	<span class="comment">//fileInfos, err := ioutil.ReadDir(dirName)</span></span><br><span class="line">	<span class="comment">//if err != nil &#123;</span></span><br><span class="line">	<span class="comment">//	fmt.Println(err)</span></span><br><span class="line">	<span class="comment">//	return</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">//fmt.Println(len(fileInfos))</span></span><br><span class="line">	<span class="comment">//for i := 0; i &lt; len(fileInfos); i++ &#123;</span></span><br><span class="line">	<span class="comment">//	//fmt.Printf(&quot;%T\n&quot;, fileInfos[i])</span></span><br><span class="line">	<span class="comment">//	fmt.Printf(&quot;ç¬¬ %d ä¸ªï¼šåç§°ï¼š%sï¼Œæ˜¯å¦æ˜¯ç›®å½•ï¼š%t\n&quot;, i, fileInfos[i].Name(), fileInfos[i].IsDir())</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//5.ä¸´æ—¶ç›®å½•å’Œä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">	dir, err := ioutil.TempDir(<span class="string">&quot;./&quot;</span>, <span class="string">&quot;Test&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> os.Remove(dir)</span><br><span class="line">	fmt.Println(dir)</span><br><span class="line"></span><br><span class="line">	file, err := ioutil.TempFile(dir, <span class="string">&quot;Test&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> os.Remove(file.Name())</span><br><span class="line">	fmt.Println(file.Name())</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="éå†æ–‡ä»¶å¤¹"><a href="#éå†æ–‡ä»¶å¤¹" class="headerlink" title="éå†æ–‡ä»¶å¤¹"></a>éå†æ–‡ä»¶å¤¹</h2><p>å› ä¸ºæ–‡ä»¶å¤¹ä¸‹è¿˜æœ‰å­æ–‡ä»¶å¤¹ï¼Œè€ŒioutilåŒ…çš„ReadDir()åªèƒ½è·å–ä¸€å±‚ç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±å»è®¾è®¡ç®—æ³•æ¥å®ç°ï¼Œæœ€å®¹æ˜“å®ç°çš„æ€è·¯å°±æ˜¯ä½¿ç”¨é€’å½’ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dirName := <span class="string">&quot;C:\\Users\\19393\\Desktop\\æ“ä½œç³»ç»Ÿ&quot;</span></span><br><span class="line">	readDir(dirName)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readDir</span><span class="params">(dirName <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	fileInfos, err := ioutil.ReadDir(dirName)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(fileInfos); i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> fileInfos[i].IsDir() &#123;</span><br><span class="line">			dirName = dirName + <span class="string">&quot;\\&quot;</span> + fileInfos[i].Name()</span><br><span class="line">			readDir(dirName)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;æ–‡ä»¶å:%s\n&quot;</span>, fileInfos[i].Name())</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em><strong>è¯¥åŒ…ç›®å‰å·²å¼ƒç”¨</strong></em></p>
<h1 id="å¹¶å‘æ€§Concurrency"><a href="#å¹¶å‘æ€§Concurrency" class="headerlink" title="å¹¶å‘æ€§Concurrency"></a>å¹¶å‘æ€§Concurrency</h1><h2 id="å¤šä»»åŠ¡"><a href="#å¤šä»»åŠ¡" class="headerlink" title="å¤šä»»åŠ¡"></a>å¤šä»»åŠ¡</h2><p>ä»€ä¹ˆå«â€œå¤šä»»åŠ¡â€å‘¢ï¼Ÿç®€å•åœ°è¯´ï¼Œå°±æ˜¯æ“ä½œç³»ç»Ÿå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œä½ ä¸€è¾¹åœ¨ç”¨æµè§ˆå™¨ä¸Šç½‘ï¼Œä¸€è¾¹åœ¨å¬MP3ï¼Œä¸€è¾¹åœ¨ç”¨Wordèµ¶ä½œä¸šï¼Œè¿™å°±æ˜¯å¤šä»»åŠ¡ï¼Œè‡³å°‘åŒæ—¶æœ‰3ä¸ªä»»åŠ¡æ­£åœ¨è¿è¡Œã€‚è¿˜æœ‰å¾ˆå¤šä»»åŠ¡æ‚„æ‚„åœ°åœ¨åå°åŒæ—¶è¿è¡Œç€ï¼Œåªæ˜¯æ¡Œé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºè€Œå·²ã€‚</p>
<p>CPUçš„é€Ÿåº¦å¤ªå¿«å•¦ã€‚ã€‚ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯å¹¶å‘"><a href="#ä»€ä¹ˆæ˜¯å¹¶å‘" class="headerlink" title="ä»€ä¹ˆæ˜¯å¹¶å‘"></a>ä»€ä¹ˆæ˜¯å¹¶å‘</h2><p>Goæ˜¯å¹¶å‘è¯­è¨€ï¼Œè€Œä¸æ˜¯å¹¶è¡Œè¯­è¨€ã€‚åœ¨è®¨è®ºå¦‚ä½•åœ¨Goä¸­è¿›è¡Œå¹¶å‘å¤„ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»äº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘ï¼Œä»¥åŠå®ƒä¸å¹¶è¡Œæ€§æœ‰ä»€ä¹ˆä¸åŒã€‚(Go is a concurrent language and not a parallel one. )</p>
<p><strong>å¹¶å‘æ€§Concurrencyæ˜¯åŒæ—¶å¤„ç†è®¸å¤šäº‹æƒ…çš„èƒ½åŠ›ã€‚</strong></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªäººåœ¨æ™¨è·‘ã€‚åœ¨æ™¨è·‘æ—¶ï¼Œä»–çš„é‹å¸¦æ¾äº†ã€‚ç°åœ¨è¿™ä¸ªäººåœæ­¢è·‘æ­¥ï¼Œç³»é‹å¸¦ï¼Œç„¶ååˆå¼€å§‹è·‘æ­¥ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å¹¶å‘æ€§ç¤ºä¾‹ã€‚è¿™ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†è·‘æ­¥å’Œç³»é‹å¸¦ï¼Œè¿™æ˜¯ä¸€ä¸ªäººèƒ½å¤ŸåŒæ—¶å¤„ç†å¾ˆå¤šäº‹æƒ…ã€‚</p>
<p>ä»€ä¹ˆæ˜¯å¹¶è¡Œæ€§parallelismï¼Œå®ƒä¸å¹¶å‘concurrencyæœ‰ä»€ä¹ˆä¸åŒ?<br>å¹¶è¡Œå°±æ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å¬èµ·æ¥å¯èƒ½ä¸å¹¶å‘ç±»ä¼¼ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸åŒçš„ã€‚</p>
<p>è®©æˆ‘ä»¬ç”¨åŒæ ·çš„æ…¢è·‘ä¾‹å­æ›´å¥½åœ°ç†è§£å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªäººæ­£åœ¨æ…¢è·‘ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒçš„æ‰‹æœºå¬éŸ³ä¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäººä¸€è¾¹æ…¢è·‘ä¸€è¾¹å¬éŸ³ä¹ï¼Œé‚£å°±æ˜¯ä»–åŒæ—¶åœ¨åšå¾ˆå¤šäº‹æƒ…ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶è¡Œæ€§(parallelism)ã€‚</p>
<p>å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§â€”â€”<em>ä¸€ç§æŠ€æœ¯ä¸Šçš„è§‚ç‚¹</em>ã€‚<br>å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªwebæµè§ˆå™¨ã€‚webæµè§ˆå™¨æœ‰å„ç§ç»„ä»¶ã€‚å…¶ä¸­ä¸¤ä¸ªæ˜¯webé¡µé¢å‘ˆç°åŒºåŸŸå’Œä¸‹è½½æ–‡ä»¶ä»internetä¸‹è½½çš„ä¸‹è½½å™¨ã€‚å‡è®¾æˆ‘ä»¬ä»¥è¿™æ ·çš„æ–¹å¼æ„å»ºäº†æµè§ˆå™¨çš„ä»£ç ï¼Œè¿™æ ·æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰§è¡Œã€‚å½“è¿™ä¸ªæµè§ˆå™¨è¿è¡Œåœ¨å•ä¸ªæ ¸å¤„ç†å™¨ä¸­æ—¶ï¼Œå¤„ç†å™¨å°†åœ¨æµè§ˆå™¨çš„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å®ƒå¯èƒ½ä¼šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ä¸€æ®µæ—¶é—´ï¼Œç„¶åå®ƒå¯èƒ½ä¼šåˆ‡æ¢åˆ°å‘ˆç°ç”¨æˆ·è¯·æ±‚çš„ç½‘é¡µçš„htmlã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¹¶å‘æ€§ã€‚å¹¶å‘è¿›ç¨‹ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œå‘¨æœŸé‡å ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹è½½å’Œå‘ˆç°ä»ä¸åŒçš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„æ‰§è¡Œé‡å ã€‚</p>
<p>å‡è®¾åŒä¸€æµè§ˆå™¨è¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä¸‹è½½ç»„ä»¶å’ŒHTMLå‘ˆç°ç»„ä»¶å¯èƒ½åŒæ—¶åœ¨ä¸åŒçš„å†…æ ¸ä¸­è¿è¡Œã€‚è¿™å°±æ˜¯æ‰€è°“çš„<strong>å¹¶è¡Œæ€§</strong>ã€‚</p>
<p>å¹¶è¡Œæ€§Parallelismä¸ä¼šæ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºå¹¶è¡Œè¿è¡Œçš„ç»„ä»¶å¯èƒ½éœ€è¦ç›¸äº’é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æµè§ˆå™¨ä¸­ï¼Œå½“æ–‡ä»¶ä¸‹è½½å®Œæˆæ—¶ï¼Œåº”è¯¥å°†å…¶ä¼ é€’ç»™ç”¨æˆ·ï¼Œæ¯”å¦‚ä½¿ç”¨å¼¹å‡ºçª—å£ã€‚è¿™ç§é€šä¿¡å‘ç”Ÿåœ¨è´Ÿè´£ä¸‹è½½çš„ç»„ä»¶å’Œè´Ÿè´£å‘ˆç°ç”¨æˆ·ç•Œé¢çš„ç»„ä»¶ä¹‹é—´ã€‚è¿™ç§é€šä¿¡å¼€é”€åœ¨å¹¶å‘concurrent ç³»ç»Ÿä¸­å¾ˆä½ã€‚å½“ç»„ä»¶åœ¨å¤šä¸ªå†…æ ¸ä¸­å¹¶è¡Œconcurrent è¿è¡Œæ—¶ï¼Œè¿™ç§é€šä¿¡å¼€é”€å¾ˆé«˜ã€‚å› æ­¤ï¼Œå¹¶è¡Œç¨‹åºå¹¶ä¸æ€»æ˜¯å¯¼è‡´æ›´å¿«çš„æ‰§è¡Œæ—¶é—´!</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/t.png"></p>
<h2 id="è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹"><a href="#è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹" class="headerlink" title="è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹"></a>è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹</h2><h2 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h2><p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸­çš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºâ€ï¼Œå®ƒæ˜¯CPUèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚<br>è¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†ã€è¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºç”¨æ¥æè¿°è¿›ç¨‹è¦å®Œæˆå“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•å®Œæˆï¼›æ•°æ®é›†åˆ™æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„èµ„æºï¼›è¿›ç¨‹æ§åˆ¶å—ç”¨æ¥è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ï¼Œæè¿°è¿›ç¨‹çš„æ‰§è¡Œå˜åŒ–è¿‡ç¨‹ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿæ„ŸçŸ¥è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ <strong>è¿›ç¨‹çš„å±€é™æ˜¯åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢çš„å¼€é”€æ¯”è¾ƒå¤§ã€‚</strong></p>
<h2 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h2><p>çº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¹‹åå‘å±•å‡ºæ¥çš„æ¦‚å¿µã€‚ çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„CPUæ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆå…±åŒç»„æˆã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚<br>çº¿ç¨‹çš„ä¼˜ç‚¹æ˜¯å‡å°äº†ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶çš„å¼€é”€ï¼Œæé«˜äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œç¼ºç‚¹æ˜¯çº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†åŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœæŠŠè¿›ç¨‹æ¯”ä½œä¸€ä¸ªè½¦é—´ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±å¥½æ¯”æ˜¯è½¦é—´é‡Œé¢çš„å·¥äººã€‚ä¸è¿‡å¯¹äºæŸäº›ç‹¬å æ€§èµ„æºå­˜åœ¨é”æœºåˆ¶ï¼Œå¤„ç†ä¸å½“å¯èƒ½ä¼šäº§ç”Ÿâ€œæ­»é”â€ã€‚</p>
<h2 id="åç¨‹"><a href="#åç¨‹" class="headerlink" title="åç¨‹"></a>åç¨‹</h2><p>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œè‹±æ–‡åCoroutineï¼Œåç¨‹çš„è°ƒåº¦å®Œå…¨ç”±ç”¨æˆ·æ§åˆ¶ã€‚äººä»¬é€šå¸¸å°†åç¨‹å’Œå­ç¨‹åºï¼ˆå‡½æ•°ï¼‰æ¯”è¾ƒç€ç†è§£ã€‚<br>å­ç¨‹åºè°ƒç”¨æ€»æ˜¯ä¸€ä¸ªå…¥å£ï¼Œä¸€æ¬¡è¿”å›ï¼Œä¸€æ—¦é€€å‡ºå³å®Œæˆäº†å­ç¨‹åºçš„æ‰§è¡Œã€‚ </p>
<p><strong>ä¸ä¼ ç»Ÿçš„ç³»ç»Ÿçº§çº¿ç¨‹å’Œè¿›ç¨‹ç›¸æ¯”ï¼Œåç¨‹çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºå…¶â€è½»é‡çº§â€ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸Šç™¾ä¸‡ä¸ªè€Œä¸ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¡°ç«­ï¼Œè€Œçº¿ç¨‹å’Œè¿›ç¨‹é€šå¸¸æœ€å¤šä¹Ÿä¸èƒ½è¶…è¿‡1ä¸‡çš„ã€‚è¿™ä¹Ÿæ˜¯åç¨‹ä¹Ÿå«è½»é‡çº§çº¿ç¨‹çš„åŸå› ã€‚</strong></p>
<blockquote>
<p>åç¨‹ä¸å¤šçº¿ç¨‹ç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿ä½“ç°åœ¨ï¼šåç¨‹çš„æ‰§è¡Œæ•ˆç‡æé«˜ã€‚å› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ã€‚</p>
</blockquote>
<p><strong>Goè¯­è¨€å¯¹äºå¹¶å‘çš„å®ç°æ˜¯é åç¨‹ï¼ŒGoroutine</strong></p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>goçš„åŸºæœ¬ä»‹ç»</title>
    <url>/2023/06/01/Go/2/</url>
    <content><![CDATA[<h2 id="Goçš„ç‰¹ç‚¹"><a href="#Goçš„ç‰¹ç‚¹" class="headerlink" title="Goçš„ç‰¹ç‚¹"></a>Goçš„ç‰¹ç‚¹</h2><ul>
<li>é«˜æ€§èƒ½ï¼Œè¯¥å¹¶å‘</li>
<li>éƒ¨ç½²ç®€å•ï¼Œå­¦ä¹ ç®€å•</li>
<li>ä¸°å¯Œçš„æ ‡å‡†åº“</li>
<li>å®Œå–„çš„å·¥å…·é“¾</li>
<li>é™æ€é“¾æ¥</li>
<li>å¿«é€Ÿç¼–è¯‘</li>
<li>è·¨å¹³å°</li>
<li>åƒåœ¾å›æ”¶</li>
</ul>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Goæ˜¯ä¸€é—¨ç¼–è¯‘å‹è¯­è¨€ï¼ŒGoè¯­è¨€çš„å·¥å…·é“¾å°†æºä»£ç åŠå…¶ä¾èµ–è½¬æ¢æˆè®¡ç®—æœºçš„æœºå™¨æŒ‡ä»¤ï¼ˆé™æ€ç¼–è¯‘ï¼‰ã€‚Goè¯­è¨€æä¾›çš„å·¥å…·éƒ½é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„å‘½ä»¤<code>go</code>è°ƒç”¨ï¼Œ<code>go</code>å‘½ä»¤æœ‰ä¸€ç³»åˆ—å­å‘½ä»¤ã€‚æœ€ç®€å•çš„ä¸€ä¸ªå­å‘½ä»¤å°±æ˜¯runã€‚è¿™ä¸ªå‘½ä»¤ç¼–è¯‘ä¸€ä¸ªæˆ–å¤šä¸ªä»¥.goç»“å°¾çš„æºæ–‡ä»¶ï¼Œé“¾æ¥åº“æ–‡ä»¶ï¼Œå¹¶è¿è¡Œæœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¦æƒ³è¿è¡Œä¸Šè¿°ç¨‹åºï¼Œå‘½ä»¤è¡Œè¿›å…¥å…¶ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go run helloworld.go</span></span><br></pre></td></tr></table></figure>

<p>Goè¯­è¨€åŸç”Ÿæ”¯æŒUnicodeï¼Œå®ƒå¯ä»¥å¤„ç†å…¨ä¸–ç•Œä»»ä½•è¯­è¨€çš„æ–‡æœ¬ã€‚</p>
<p>å¦‚æœä¸åªæ˜¯ä¸€æ¬¡æ€§å®éªŒï¼Œå¹¶ä¸”å¸Œæœ›èƒ½å¤Ÿç¼–è¯‘è¿™ä¸ªç¨‹åºï¼Œä¿å­˜ç¼–è¯‘ç»“æœä»¥å¤‡å°†æ¥ä¹‹ç”¨ã€‚å¯ä»¥ç”¨buildå­å‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go build helloworld.go</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå‘½ä»¤ç”Ÿæˆä¸€ä¸ªåä¸º<code>helloworld</code>çš„<em><strong>å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆWindowsç³»ç»Ÿä¸‹ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ˜¯helloworld.exeï¼‰ï¼Œä¹‹åå¯ä»¥éšæ—¶è¿è¡Œå®ƒ</strong></em>ï¼ˆåœ¨Windowsç³»ç»Ÿä¸‹åœ¨å‘½ä»¤è¡Œç›´æ¥è¾“å…¥helloworld.exeå‘½ä»¤è¿è¡Œï¼‰ï¼Œä¸éœ€ä»»ä½•å¤„ç†ï¼ˆå› ä¸ºé™æ€ç¼–è¯‘ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒåœ¨ç³»ç»Ÿåº“æ›´æ–°çš„æ—¶å€™å†²çªï¼Œ<em><strong>pythonä¹Ÿæœ‰ç›¸å…³çš„åº“<code>pyinstaller</code>å°†ç¨‹åºè½¬ä¸ºå¯æ‰§è¡Œæ–‡ä»¶</strong></em>ï¼‰ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./helloworld</span></span><br><span class="line">hello world </span><br></pre></td></tr></table></figure>

<h2 id="Goçš„ç®€ä»‹-æŒºæœ‰æ„æ€çš„ï¼Œå»ºè®®çœ‹çœ‹"><a href="#Goçš„ç®€ä»‹-æŒºæœ‰æ„æ€çš„ï¼Œå»ºè®®çœ‹çœ‹" class="headerlink" title="Goçš„ç®€ä»‹(æŒºæœ‰æ„æ€çš„ï¼Œå»ºè®®çœ‹çœ‹)"></a>Goçš„ç®€ä»‹(æŒºæœ‰æ„æ€çš„ï¼Œå»ºè®®çœ‹çœ‹)</h2><p>â€‹		Goè¯­è¨€çš„ä»£ç é€šè¿‡<em><strong>åŒ…</strong></em>ï¼ˆpackageï¼‰ç»„ç»‡ï¼ŒåŒ…ç±»ä¼¼äºå…¶å®ƒè¯­è¨€é‡Œçš„åº“ï¼ˆlibrariesï¼‰æˆ–è€…æ¨¡å—ï¼ˆmodulesï¼‰ã€‚ä¸€ä¸ªåŒ…ç”±ä½äºå•ä¸ªç›®å½•ä¸‹çš„ä¸€ä¸ªæˆ–å¤šä¸ª.goæºä»£ç æ–‡ä»¶ç»„æˆï¼Œç›®å½•å®šä¹‰åŒ…çš„ä½œç”¨ã€‚æ¯ä¸ªæºæ–‡ä»¶éƒ½ä»¥ä¸€æ¡<code>package</code>å£°æ˜è¯­å¥å¼€å§‹ï¼Œä¸Šè¿°ä¾‹å­é‡Œå°±æ˜¯<code>package main</code>ï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶å±äºå“ªä¸ªåŒ…ï¼Œç´§è·Ÿç€ä¸€ç³»åˆ—å¯¼å…¥ï¼ˆimportï¼‰çš„åŒ…ï¼Œä¹‹åæ˜¯å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œçš„ç¨‹åºè¯­å¥ã€‚</p>
<p>â€‹		Goçš„æ ‡å‡†åº“æä¾›äº†100å¤šä¸ªåŒ…ï¼Œä»¥æ”¯æŒå¸¸è§åŠŸèƒ½ï¼Œå¦‚è¾“å…¥ã€è¾“å‡ºã€æ’åºä»¥åŠæ–‡æœ¬å¤„ç†ã€‚æ¯”å¦‚<code>fmt</code>åŒ…ï¼Œå°±å«æœ‰æ ¼å¼åŒ–è¾“å‡ºã€æ¥æ”¶è¾“å…¥çš„å‡½æ•°ã€‚<code>Println</code>æ˜¯å…¶ä¸­ä¸€ä¸ªåŸºç¡€å‡½æ•°ï¼Œå¯ä»¥æ‰“å°ä»¥ç©ºæ ¼é—´éš”çš„ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼Œå¹¶åœ¨æœ€åæ·»åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œä»è€Œè¾“å‡ºä¸€æ•´è¡Œã€‚</p>
<p>â€‹		<strong><code>	main</code>åŒ…æ¯”è¾ƒç‰¹æ®Šã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªç‹¬ç«‹å¯æ‰§è¡Œçš„ç¨‹åºï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåº“ã€‚åœ¨<code>main</code>é‡Œçš„<code>main</code> <em>å‡½æ•°</em> ä¹Ÿå¾ˆç‰¹æ®Šï¼Œå®ƒæ˜¯æ•´ä¸ªç¨‹åºæ‰§è¡Œæ—¶çš„å…¥å£ï¼ˆCç³»è¯­è¨€ç±»ä¼¼ï¼‰</strong>ã€‚<code>main</code>å‡½æ•°æ‰€åšçš„äº‹æƒ…å°±æ˜¯ç¨‹åºåšçš„ã€‚å½“ç„¶äº†ï¼Œ<code>main</code>å‡½æ•°ä¸€èˆ¬è°ƒç”¨å…¶å®ƒåŒ…é‡Œçš„å‡½æ•°å®Œæˆå¾ˆå¤šå·¥ä½œï¼ˆä¾‹å¦‚ï¼š<code>fmt.Println</code>ï¼‰ã€‚</p>
<ul>
<li><p>å¿…é¡»å‘Šè¯‰ç¼–è¯‘å™¨æºæ–‡ä»¶éœ€è¦å“ªäº›åŒ…ï¼Œè¿™å°±æ˜¯è·Ÿéšåœ¨<code>package</code>å£°æ˜åé¢çš„<code>import</code>å£°æ˜æ‰®æ¼”çš„è§’è‰²ã€‚hello worldä¾‹å­åªç”¨åˆ°äº†ä¸€ä¸ªåŒ…ï¼Œå¤§å¤šæ•°ç¨‹åºéœ€è¦å¯¼å…¥å¤šä¸ªåŒ…ã€‚</p>
</li>
<li><p>å¿…é¡»æ°å½“å¯¼å…¥éœ€è¦çš„åŒ…ï¼Œç¼ºå°‘äº†å¿…è¦çš„åŒ…æˆ–è€…å¯¼å…¥äº†ä¸éœ€è¦çš„åŒ…ï¼Œç¨‹åºéƒ½æ— æ³•ç¼–è¯‘é€šè¿‡ã€‚<em><strong>è¿™é¡¹ä¸¥æ ¼è¦æ±‚é¿å…äº†ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­å¼•å…¥æœªä½¿ç”¨çš„åŒ…</strong></em>ï¼ˆ<em><strong>Goè¯­è¨€ç¼–è¯‘è¿‡ç¨‹æ²¡æœ‰è­¦å‘Šä¿¡æ¯</strong></em>ï¼‰ã€‚</p>
<p>  <code>import</code>å£°æ˜å¿…é¡»è·Ÿåœ¨æ–‡ä»¶çš„<code>package</code>å£°æ˜ä¹‹åã€‚éšåï¼Œåˆ™æ˜¯ç»„æˆç¨‹åºçš„å‡½æ•°ã€å˜é‡ã€å¸¸é‡ã€ç±»å‹çš„å£°æ˜è¯­å¥ï¼ˆåˆ†åˆ«ç”±å…³é”®å­—<code>func</code>ã€<code>var</code>ã€<code>const</code>ã€<code>type</code>å®šä¹‰ï¼‰ã€‚è¿™äº›å†…å®¹çš„å£°æ˜é¡ºåºå¹¶ä¸é‡è¦ï¼ˆæœ€å¥½æŒ‰ç…§è§„èŒƒè¦æ±‚è‡ªå·±ï¼‰ã€‚ä¸Šè¿°ä¾‹å­çš„ç¨‹åºå·²ç»å°½å¯èƒ½çŸ­äº†ï¼Œåªå£°æ˜äº†ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä¸­åªè°ƒç”¨äº†ä¸€ä¸ªå…¶ä»–å‡½æ•°ã€‚ä¸ºäº†èŠ‚çœç¯‡å¹…ï¼Œæœ‰äº›æ—¶å€™ç¤ºä¾‹ç¨‹åºä¼šçœç•¥<code>package</code>å’Œ<code>import</code>å£°æ˜ï¼Œä½†æ˜¯ï¼Œè¿™äº›å£°æ˜åœ¨æºä»£ç é‡Œæœ‰ï¼Œå¹¶ä¸”å¿…é¡»å¾—æœ‰æ‰èƒ½ç¼–è¯‘ã€‚</p>
<p>  ä¸€ä¸ªå‡½æ•°çš„å£°æ˜ç”±<code>func</code>å…³é”®å­—ã€å‡½æ•°åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å€¼åˆ—è¡¨ï¼ˆä¸Šè¿°ä¾‹å­é‡Œçš„<code>main</code>å‡½æ•°å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼éƒ½æ˜¯ç©ºçš„ï¼‰ä»¥åŠåŒ…å«åœ¨å¤§æ‹¬å·é‡Œçš„å‡½æ•°ä½“ç»„æˆã€‚</p>
<p>  Goè¯­è¨€<em><strong>ä¸éœ€è¦åœ¨è¯­å¥æˆ–è€…å£°æ˜çš„æœ«å°¾æ·»åŠ åˆ†å·</strong></em>ï¼Œé™¤éä¸€è¡Œä¸Šæœ‰å¤šæ¡è¯­å¥ã€‚å®é™…ä¸Šï¼Œç¼–è¯‘å™¨<em><strong>ä¼šä¸»åŠ¨æŠŠç‰¹å®šç¬¦å·åçš„æ¢è¡Œç¬¦è½¬æ¢ä¸ºåˆ†å·</strong></em>ï¼Œå› æ­¤<em><strong>æ¢è¡Œç¬¦æ·»åŠ çš„ä½ç½®ä¼šå½±å“Goä»£ç çš„æ­£ç¡®è§£æ</strong></em>ï¼ˆæ¯”å¦‚è¡Œæœ«æ˜¯æ ‡è¯†ç¬¦ã€æ•´æ•°ã€æµ®ç‚¹æ•°ã€è™šæ•°ã€å­—ç¬¦æˆ–å­—ç¬¦ä¸²æ–‡å­—ã€å…³é”®å­—<code>break</code>ã€<code>continue</code>ã€<code>fallthrough</code>æˆ–<code>return</code>ä¸­çš„ä¸€ä¸ªã€è¿ç®—ç¬¦å’Œåˆ†éš”ç¬¦<code>++</code>ã€<code>--</code>ã€<code>)</code>ã€<code>]</code>æˆ–<code>&#125;</code>ä¸­çš„ä¸€ä¸ªï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡½æ•°çš„å·¦æ‹¬å·<code>&#123;</code>å¿…é¡»å’Œ<code>func</code>å‡½æ•°å£°æ˜åœ¨åŒä¸€è¡Œä¸Šï¼Œä¸”ä½äºæœ«å°¾ï¼Œä¸èƒ½ç‹¬å ä¸€è¡Œï¼Œè€Œåœ¨è¡¨è¾¾å¼<code>x + y</code>ä¸­ï¼Œå¯åœ¨<code>+</code>åæ¢è¡Œï¼Œä¸èƒ½åœ¨<code>+</code>å‰æ¢è¡Œï¼ˆä»¥+ç»“å°¾çš„è¯ä¸ä¼šè¢«æ’å…¥åˆ†å·åˆ†éš”ç¬¦ï¼Œä½†æ˜¯ä»¥xç»“å°¾çš„è¯åˆ™ä¼šè¢«åˆ†å·åˆ†éš”ç¬¦ï¼Œä»è€Œå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼‰</p>
</li>
</ul>
<h2 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h2><h3 id="go-clean"><a href="#go-clean" class="headerlink" title="go clean"></a><strong>go clean</strong></h3><p>go clean å‘½ä»¤æ˜¯ç”¨æ¥ç§»é™¤å½“å‰æºç åŒ…é‡Œé¢ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶åŒ…æ‹¬</p>
<ul>
<li>_obj&#x2F; æ—§çš„objectç›®å½•ï¼Œç”±Makefilesé—ç•™</li>
<li>_test&#x2F; æ—§çš„testç›®å½•ï¼Œç”±Makefilesé—ç•™</li>
<li>_testmain.go æ—§çš„gotestæ–‡ä»¶ï¼Œç”±Makefilesé—ç•™</li>
<li>test.out æ—§çš„testè®°å½•ï¼Œç”±Makefilesé—ç•™</li>
<li>build.out æ—§çš„testè®°å½•ï¼Œç”±Makefilesé—ç•™</li>
<li>*.[568ao] objectæ–‡ä»¶ï¼Œç”±Makefilesé—ç•™</li>
<li>DIR(.exe) ç”± go build äº§ç”Ÿ</li>
<li>DIR.test(.exe) ç”± go test -c äº§ç”Ÿ</li>
<li>MAINFILE(.exe) ç”± go build MAINFILE.goäº§ç”Ÿ</li>
</ul>
<h3 id="go-test"><a href="#go-test" class="headerlink" title="go test"></a><strong>go test</strong></h3><p>go test å‘½ä»¤ï¼Œä¼šè‡ªåŠ¨è¯»å–æºç ç›®å½•ä¸‹é¢åä¸º*_test.goçš„æ–‡ä»¶ï¼Œç”Ÿæˆå¹¶è¿è¡Œæµ‹è¯•ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦ä»»ä½•çš„å‚æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠä½ æºç åŒ…ä¸‹é¢æ‰€æœ‰testæ–‡ä»¶æµ‹è¯•å®Œæ¯•ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å¸¦ä¸Šå‚æ•°ï¼Œè¯¦æƒ…è¯·å‚è€ƒgo help testflag</p>
<h3 id="go-doc"><a href="#go-doc" class="headerlink" title="go doc"></a><strong>go doc</strong></h3><p>go doc å‘½ä»¤å…¶å®å°±æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æ–‡æ¡£å·¥å…·ã€‚</p>
<p>å¦‚ä½•æŸ¥çœ‹ç›¸åº”packageçš„æ–‡æ¡£å‘¢ï¼Ÿ ä¾‹å¦‚builtinåŒ…ï¼Œé‚£ä¹ˆæ‰§è¡Œgo doc builtinï¼›å¦‚æœæ˜¯httpåŒ…ï¼Œé‚£ä¹ˆæ‰§è¡Œgo doc net&#x2F;httpï¼›æŸ¥çœ‹æŸä¸€ä¸ªåŒ…é‡Œé¢çš„å‡½æ•°ï¼Œé‚£ä¹ˆæ‰§è¡Œgo doc fmt Printfï¼›ä¹Ÿå¯ä»¥æŸ¥çœ‹ç›¸åº”çš„ä»£ç ï¼Œæ‰§è¡Œgo doc -src fmt Printfï¼›</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹net/httpåŒ…</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go doc net/http</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹timeåŒ…</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go doc time</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸä¸ªåŒ…é‡Œçš„æŒ‡å®šå‡½æ•°</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go doc <span class="built_in">fmt</span> Printf</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡å‘½ä»¤åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ go doc -http&#x3D;:ç«¯å£å·ï¼Œæ¯”å¦‚godoc -http&#x3D;:8080ã€‚ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€127.0.0.1:8080ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªgolang.orgçš„æœ¬åœ°copyç‰ˆæœ¬ï¼Œé€šè¿‡å®ƒä½ å¯ä»¥æŸ¥è¯¢pkgæ–‡æ¡£ç­‰å…¶å®ƒå†…å®¹ã€‚å¦‚æœä½ è®¾ç½®äº†GOPATHï¼Œåœ¨pkgåˆ†ç±»ä¸‹ï¼Œä¸ä½†ä¼šåˆ—å‡ºæ ‡å‡†åŒ…çš„æ–‡æ¡£ï¼Œè¿˜ä¼šåˆ—å‡ºä½ æœ¬åœ°GOPATHä¸­æ‰€æœ‰é¡¹ç›®çš„ç›¸å…³æ–‡æ¡£ï¼Œè¿™å¯¹äºç»å¸¸è¢«é™åˆ¶è®¿é—®çš„ç”¨æˆ·æ¥è¯´æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">godoc -http=:9527</span></span><br></pre></td></tr></table></figure>

<hr>
<p>go fix ç”¨æ¥ä¿®å¤ä»¥å‰è€ç‰ˆæœ¬çš„ä»£ç åˆ°æ–°ç‰ˆæœ¬ï¼Œä¾‹å¦‚go1ä¹‹å‰è€ç‰ˆæœ¬çš„ä»£ç è½¬åŒ–åˆ°go1</p>
<p>go version æŸ¥çœ‹goå½“å‰çš„ç‰ˆæœ¬</p>
<p>go env æŸ¥çœ‹å½“å‰goçš„ç¯å¢ƒå˜é‡</p>
<p>go list åˆ—å‡ºå½“å‰å…¨éƒ¨å®‰è£…çš„package</p>
<h2 id="gofmtå’Œgoimportsçš„é…ç½®"><a href="#gofmtå’Œgoimportsçš„é…ç½®" class="headerlink" title="gofmtå’Œgoimportsçš„é…ç½®"></a><code>gofmt</code>å’Œ<code>goimports</code>çš„é…ç½®</h2><p>â€‹		<em><strong>Goè¯­è¨€åœ¨ä»£ç æ ¼å¼ä¸Šé‡‡å–äº†å¾ˆå¼ºç¡¬çš„æ€åº¦</strong></em>ã€‚<code>gofmt</code>å·¥å…·æŠŠä»£ç æ ¼å¼åŒ–ä¸ºæ ‡å‡†æ ¼å¼ï¼ˆè¿™ä¸ªæ ¼å¼åŒ–å·¥å…·æ²¡æœ‰ä»»ä½•å¯ä»¥è°ƒæ•´ä»£ç æ ¼å¼çš„å‚æ•°ï¼ŒGoè¯­è¨€å°±æ˜¯è¿™ä¹ˆä»»æ€§ï¼‰ï¼Œå¹¶ä¸”<code>go</code>å·¥å…·ä¸­çš„<code>fmt</code>å­å‘½ä»¤ä¼šå¯¹æŒ‡å®šåŒ…ï¼Œå¦åˆ™é»˜è®¤ä¸ºå½“å‰ç›®å½•ä¸­æ‰€æœ‰.goæºæ–‡ä»¶åº”ç”¨<code>gofmt</code>å‘½ä»¤ã€‚æˆ‘ä»¬åº”è¯¥å…»æˆæ ¼å¼åŒ–è‡ªå·±çš„ä»£ç çš„ä¹ æƒ¯ã€‚ä»¥æ³•ä»¤æ–¹å¼è§„å®šæ ‡å‡†çš„ä»£ç æ ¼å¼å¯ä»¥é¿å…æ— å°½çš„æ— æ„ä¹‰çš„çç¢äº‰æ‰§å¯¼è‡´äº†Goè¯­è¨€çš„<a href="https://baike.baidu.com/item/Tiobe/2830870?fr=aladdin"><code>TIOBE</code></a>æ’åè¾ƒä½ï¼Œäº‰è®®çš„è¯é¢˜è¾ƒå°‘ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™æ ·å¯ä»¥åšå¤šç§è‡ªåŠ¨æºç è½¬æ¢ï¼Œå¦‚æœæ”¾ä»»Goè¯­è¨€ä»£ç æ ¼å¼ï¼Œè¿™äº›è½¬æ¢å°±ä¸å¤§å¯èƒ½äº†ã€‚</p>
<p>å¾ˆå¤šæ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥é…ç½®ä¸ºä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ‰§è¡Œ<code>gofmt</code>ï¼Œè¿™æ ·æºä»£ç æ€»ä¼šè¢«æ°å½“åœ°æ ¼å¼åŒ–ï¼Œ<code>gofmt</code>åŒ…å«åœ¨æ ‡å‡†çš„åˆ†å‘åŒ…ä¸­ã€‚è¿˜æœ‰ä¸ªç›¸å…³çš„å·¥å…·ï¼Œ<code>goimports</code>ï¼Œå¯ä»¥æ ¹æ®ä»£ç éœ€è¦ï¼Œè‡ªåŠ¨åœ°æ·»åŠ æˆ–åˆ é™¤<code>import</code>å£°æ˜ã€‚è¿™ä¸ªå·¥å…·å¹¶æ²¡æœ‰åŒ…å«åœ¨æ ‡å‡†çš„åˆ†å‘åŒ…ä¸­ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤åœ¨åœ¨<code>goland</code>ä¸­åœ¨ä»»æ„ä¸€ä¸ªé¡¹ç›®çš„ç»ˆç«¯æ‰§è¡Œï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> get -v golang.org/x/tools/cmd/goimports</span><br></pre></td></tr></table></figure>


<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df0d744ab4bc4f0f9204e4f4d0eb0a90~tplv-k3u1fbpfcp-watermark.image" alt="image-20230513220732135.png"></p>
<p>è¿›å…¥<code>GOPATH</code>(Goè¯­è¨€å®‰è£…ç›®å½•)ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…<code>goimports</code>,æ²¡æœ‰åŠ ç‰ˆæœ¬å·ä¼šæŠ¥é”™</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> install golang.org/x/tools/cmd/goimports@latest</span><br></pre></td></tr></table></figure>

<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cdc5eae7c83743338f84058f08c881ca~tplv-k3u1fbpfcp-watermark.image" alt="image-20230513221248033.png"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>GOPATH/bin </code>ç›®å½•ä¸‹çœ‹åˆ° <code>goimports.exe</code></p>
<p>ç„¶ååœ¨<code>goland</code>çš„è®¾ç½®ä¸­ç‚¹å‡»å·¥å…·&gt;File Watcher</p>
<p>æ·»åŠ <code>gofmt</code>å’Œ<code>goimports</code></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2632d630f887491b9370e03f4b43b1ba~tplv-k3u1fbpfcp-watermark.image" alt="image-20230513221553805.png"></p>
<p><code>goimports.exe</code>åœ¨<code>GOPATH/bin </code>ç›®å½•ä¸‹,å…¶å®<code>goland</code>èƒ½å¤Ÿè‡ªåŠ¨æ‰¾åˆ°å®ƒ</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc409d417dc34f17a299b7e35691e9d6~tplv-k3u1fbpfcp-watermark.image" alt="image-20230513221658244.png"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c31c5998d814a3f9e30de7b2b7c91af~tplv-k3u1fbpfcp-watermark.image" alt="image-20230513221724453.png"></p>
<p>ç‚¹å‡»ç¡®å®šï¼Œ<code>gofmt</code>å’Œ<code>goimports</code>é…ç½®æˆåŠŸ</p>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://juejin.cn/post/7232689996821495865">Goçš„åŸºæœ¬ä»‹ç»ï¼ˆé™„gofmtå’Œgoimportsé…ç½®ï¼‰|é’è®­è¥ç¬”è®° - æ˜é‡‘ (juejin.cn)</a></p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>syncåŒ…</title>
    <url>/2023/07/06/Go/19/</url>
    <content><![CDATA[<h1 id="WaitGroup"><a href="#WaitGroup" class="headerlink" title="WaitGroup"></a>WaitGroup</h1><p>syncæ˜¯synchronizationåŒæ­¥è¿™ä¸ªè¯çš„ç¼©å†™ï¼Œæ‰€ä»¥ä¹Ÿä¼šå«åšåŒæ­¥åŒ…ã€‚è¿™é‡Œæä¾›äº†åŸºæœ¬åŒæ­¥çš„æ“ä½œï¼Œæ¯”å¦‚äº’æ–¥é”ç­‰ç­‰ã€‚è¿™é‡Œé™¤äº†Onceå’ŒWaitGroupç±»å‹ä¹‹å¤–ï¼Œå¤§å¤šæ•°ç±»å‹éƒ½æ˜¯ä¾›ä½çº§åº“ä¾‹ç¨‹ä½¿ç”¨çš„ã€‚æ›´é«˜çº§åˆ«çš„åŒæ­¥æœ€å¥½é€šè¿‡channelé€šé“å’Œcommunicationé€šä¿¡æ¥å®Œæˆã€‚</p>
<h2 id="WaitGroup-1"><a href="#WaitGroup-1" class="headerlink" title="WaitGroup"></a>WaitGroup</h2><p>WaitGroupï¼ŒåŒæ­¥ç­‰å¾…ç»„ã€‚</p>
<p>åœ¨ç±»å‹ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚ä¸€ä¸ªWaitGroupçš„ç”¨é€”æ˜¯ç­‰å¾…ä¸€ä¸ªgoroutineçš„é›†åˆæ‰§è¡Œå®Œæˆã€‚ä¸»goroutineè°ƒç”¨äº†Add()æ–¹æ³•æ¥è®¾ç½®è¦ç­‰å¾…çš„goroutineçš„æ•°é‡ã€‚ç„¶åï¼Œæ¯ä¸ªgoroutineéƒ½ä¼šæ‰§è¡Œå¹¶ä¸”æ‰§è¡Œå®Œæˆåè°ƒç”¨Done()è¿™ä¸ªæ–¹æ³•ã€‚ä¸æ­¤åŒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨Wait()æ–¹æ³•æ¥é˜»å¡ï¼Œç›´åˆ°æ‰€æœ‰çš„goroutineéƒ½æ‰§è¡Œå®Œæˆã€‚</p>
<h2 id="Add-æ–¹æ³•"><a href="#Add-æ–¹æ³•" class="headerlink" title="Add()æ–¹æ³•"></a>Add()æ–¹æ³•</h2><p>Addè¿™ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è®¾ç½®åˆ°WaitGroupçš„è®¡æ•°å™¨çš„å€¼ã€‚æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ¯ä¸ªwaitgroupä¸­éƒ½æœ‰ä¸€ä¸ªè®¡æ•°å™¨<br>ç”¨æ¥è¡¨ç¤ºè¿™ä¸ªåŒæ­¥ç­‰å¾…ç»„ä¸­è¦æ‰§è¡Œçš„goroutinçš„æ•°é‡ã€‚</p>
<p>å¦‚æœè®¡æ•°å™¨çš„æ•°å€¼å˜ä¸º0ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºç­‰å¾…æ—¶è¢«é˜»å¡çš„goroutineéƒ½è¢«é‡Šæ”¾ï¼Œå¦‚æœè®¡æ•°å™¨çš„æ•°å€¼ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆå°±ä¼šå¼•å‘ææ…Œï¼Œç¨‹åºå°±æŠ¥é”™äº†ã€‚</p>
<h2 id="Done-æ–¹æ³•"><a href="#Done-æ–¹æ³•" class="headerlink" title="Done()æ–¹æ³•"></a>Done()æ–¹æ³•</h2><p>Done()æ–¹æ³•ï¼Œå°±æ˜¯å½“WaitGroupåŒæ­¥ç­‰å¾…ç»„ä¸­çš„æŸä¸ªgoroutineæ‰§è¡Œå®Œæ¯•åï¼Œè®¾ç½®è¿™ä¸ªWaitGroupçš„counteræ•°å€¼å‡1ã€‚</p>
<p>å…¶å®Done()çš„åº•å±‚ä»£ç å°±æ˜¯è°ƒç”¨äº†Add()æ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Done decrements the WaitGroup counter by one.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(wg *WaitGroup)</span></span> Done() &#123;</span><br><span class="line">	wg.Add(<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Wait-æ–¹æ³•"><a href="#Wait-æ–¹æ³•" class="headerlink" title="Wait()æ–¹æ³•"></a>Wait()æ–¹æ³•</h2><p>Wait()æ–¹æ³•ï¼Œè¡¨ç¤ºè®©å½“å‰çš„goroutineç­‰å¾…ï¼Œè¿›å…¥é˜»å¡çŠ¶æ€ã€‚ä¸€ç›´åˆ°WaitGroupçš„è®¡æ•°å™¨ä¸ºé›¶ã€‚æ‰èƒ½è§£é™¤é˜»å¡ï¼Œ<br>è¿™ä¸ªgoroutineæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚</p>
<h2 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><p>æˆ‘ä»¬åˆ›å»ºå¹¶å¯åŠ¨ä¸¤ä¸ªgoroutineï¼Œæ¥æ‰“å°æ•°å­—å’Œå­—æ¯ï¼Œå¹¶åœ¨main goroutineä¸­ï¼Œå°†è¿™ä¸¤ä¸ªå­goroutineåŠ å…¥åˆ°ä¸€ä¸ªWaitGroupä¸­ï¼ŒåŒæ—¶è®©main goroutineè¿›å…¥Wait()ï¼Œè®©ä¸¤ä¸ªå­goroutineå…ˆæ‰§è¡Œã€‚å½“æ¯ä¸ªå­goroutineæ‰§è¡Œå®Œæ¯•åï¼Œè°ƒç”¨Done()æ–¹æ³•ï¼Œè®¾ç½®WaitGroupçš„counterå‡1ã€‚å½“ä¸¤æ¡å­goroutineéƒ½æ‰§è¡Œå®Œæ¯•åï¼ŒWaitGroupä¸­çš„counterçš„æ•°å€¼ä¸ºé›¶ï¼Œè§£é™¤main goroutineçš„é˜»å¡ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup <span class="comment">// åˆ›å»ºåŒæ­¥ç­‰å¾…ç»„å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		WaitGroupï¼šåŒæ­¥ç­‰å¾…ç»„</span></span><br><span class="line"><span class="comment">			å¯ä»¥ä½¿ç”¨Add(),è®¾ç½®ç­‰å¾…ç»„ä¸­è¦ æ‰§è¡Œçš„å­goroutineçš„æ•°é‡ï¼Œ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			åœ¨main å‡½æ•°ä¸­ï¼Œä½¿ç”¨wait(),è®©ä¸»ç¨‹åºå¤„äºç­‰å¾…çŠ¶æ€ã€‚ç›´åˆ°ç­‰å¾…ç»„ä¸­å­ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚è§£é™¤é˜»å¡</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			å­gorotuineå¯¹åº”çš„å‡½æ•°ä¸­ã€‚wg.Done()ï¼Œç”¨äºè®©ç­‰å¾…ç»„ä¸­çš„å­ç¨‹åºçš„æ•°é‡å‡1</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//è®¾ç½®ç­‰å¾…ç»„ä¸­ï¼Œè¦æ‰§è¡Œçš„goroutineçš„æ•°é‡</span></span><br><span class="line">	wg.Add(<span class="number">2</span>)</span><br><span class="line">	<span class="keyword">go</span> fun1()</span><br><span class="line">	<span class="keyword">go</span> fun2()</span><br><span class="line">	fmt.Println(<span class="string">&quot;mainè¿›å…¥é˜»å¡çŠ¶æ€ã€‚ã€‚ã€‚ç­‰å¾…wgä¸­çš„å­goroutineç»“æŸã€‚ã€‚&quot;</span>)</span><br><span class="line">	wg.Wait() <span class="comment">//è¡¨ç¤ºmain goroutineè¿›å…¥ç­‰å¾…ï¼Œæ„å‘³ç€é˜»å¡</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;mainï¼Œè§£é™¤é˜»å¡ã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;fun1.ã€‚ã€‚i:&quot;</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line">	wg.Done() <span class="comment">//ç»™wgç­‰å¾…ä¸­çš„æ‰§è¡Œçš„goroutineæ•°é‡å‡1.åŒAdd(-1)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> wg.Done()</span><br><span class="line">	<span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= <span class="number">10</span>; j++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;\tfun2..j,&quot;</span>, j)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mainè¿›å…¥é˜»å¡çŠ¶æ€ã€‚ã€‚ã€‚ç­‰å¾…wgä¸­çš„å­goroutineç»“æŸã€‚ã€‚</span><br><span class="line">	fun2..j, 1</span><br><span class="line">	fun2..j, 2</span><br><span class="line">	fun2..j, 3</span><br><span class="line">	fun2..j, 4</span><br><span class="line">	fun2..j, 5</span><br><span class="line">	fun2..j, 6</span><br><span class="line">	fun2..j, 7</span><br><span class="line">	fun2..j, 8</span><br><span class="line">	fun2..j, 9</span><br><span class="line">	fun2..j, 10</span><br><span class="line">fun1.ã€‚ã€‚i: 1</span><br><span class="line">fun1.ã€‚ã€‚i: 2</span><br><span class="line">fun1.ã€‚ã€‚i: 3</span><br><span class="line">fun1.ã€‚ã€‚i: 4</span><br><span class="line">fun1.ã€‚ã€‚i: 5</span><br><span class="line">fun1.ã€‚ã€‚i: 6</span><br><span class="line">fun1.ã€‚ã€‚i: 7</span><br><span class="line">fun1.ã€‚ã€‚i: 8</span><br><span class="line">fun1.ã€‚ã€‚i: 9</span><br><span class="line">fun1.ã€‚ã€‚i: 10</span><br><span class="line">mainï¼Œè§£é™¤é˜»å¡ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h1 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h1><h2 id="Mutex-äº’æ–¥é”"><a href="#Mutex-äº’æ–¥é”" class="headerlink" title="Mutex(äº’æ–¥é”)"></a>Mutex(äº’æ–¥é”)</h2><p>åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œä¼šå­˜åœ¨ä¸´ç•Œèµ„æºé—®é¢˜ã€‚å°±æ˜¯å½“å¤šä¸ªåç¨‹æ¥è®¿é—®å…±äº«çš„æ•°æ®èµ„æºï¼Œé‚£ä¹ˆè¿™ä¸ªå…±äº«èµ„æºæ˜¯ä¸å®‰å…¨çš„ã€‚ä¸ºäº†è§£å†³åç¨‹åŒæ­¥çš„é—®é¢˜æˆ‘ä»¬ä½¿ç”¨äº†channelï¼Œä½†æ˜¯Goè¯­è¨€ä¹Ÿæä¾›äº†ä¼ ç»Ÿçš„åŒæ­¥å·¥å…·ã€‚</p>
<p>ä»€ä¹ˆæ˜¯é”å‘¢ï¼Ÿå°±æ˜¯æŸä¸ªåç¨‹ï¼ˆçº¿ç¨‹ï¼‰åœ¨è®¿é—®æŸä¸ªèµ„æºæ—¶å…ˆé”ä½ï¼Œé˜²æ­¢å…¶å®ƒåç¨‹çš„è®¿é—®ï¼Œç­‰è®¿é—®å®Œæ¯•è§£é”åå…¶ä»–åç¨‹å†æ¥åŠ é”è¿›è¡Œè®¿é—®ã€‚ä¸€èˆ¬ç”¨äºå¤„ç†å¹¶å‘ä¸­çš„ä¸´ç•Œèµ„æºé—®é¢˜ã€‚</p>
<p>Goè¯­è¨€åŒ…ä¸­çš„ sync åŒ…æä¾›äº†ä¸¤ç§é”ç±»å‹ï¼šsync.Mutex å’Œ sync.RWMutexã€‚</p>
<p>Mutex æ˜¯æœ€ç®€å•çš„ä¸€ç§é”ç±»å‹ï¼Œäº’æ–¥é”ï¼ŒåŒæ—¶ä¹Ÿæ¯”è¾ƒæš´åŠ›ï¼Œå½“ä¸€ä¸ª goroutine è·å¾—äº† Mutex åï¼Œå…¶ä»– goroutine å°±åªèƒ½ä¹–ä¹–ç­‰åˆ°è¿™ä¸ª goroutine é‡Šæ”¾è¯¥ Mutexã€‚</p>
<p>æ¯ä¸ªèµ„æºéƒ½å¯¹åº”äºä¸€ä¸ªå¯ç§°ä¸º â€œäº’æ–¥é”â€ çš„æ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°ç”¨æ¥ä¿è¯åœ¨ä»»æ„æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªåç¨‹ï¼ˆçº¿ç¨‹ï¼‰è®¿é—®è¯¥èµ„æºã€‚å…¶å®ƒçš„åç¨‹åªèƒ½ç­‰å¾…ã€‚</p>
<p>äº’æ–¥é”æ˜¯ä¼ ç»Ÿå¹¶å‘ç¼–ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®æ§åˆ¶çš„ä¸»è¦æ‰‹æ®µï¼Œå®ƒç”±æ ‡å‡†åº“syncä¸­çš„Mutexç»“æ„ä½“ç±»å‹è¡¨ç¤ºã€‚sync.Mutexç±»å‹åªæœ‰ä¸¤ä¸ªå…¬å¼€çš„æŒ‡é’ˆæ–¹æ³•ï¼ŒLockå’ŒUnlockã€‚Locké”å®šå½“å‰çš„å…±äº«èµ„æºï¼ŒUnlockè¿›è¡Œè§£é”ã€‚</p>
<p>åœ¨ä½¿ç”¨äº’æ–¥é”æ—¶ï¼Œä¸€å®šè¦æ³¨æ„ï¼šå¯¹èµ„æºæ“ä½œå®Œæˆåï¼Œä¸€å®šè¦è§£é”ï¼Œå¦åˆ™ä¼šå‡ºç°æµç¨‹æ‰§è¡Œå¼‚å¸¸ï¼Œæ­»é”ç­‰é—®é¢˜ã€‚é€šå¸¸å€ŸåŠ©deferã€‚é”å®šåï¼Œç«‹å³ä½¿ç”¨deferè¯­å¥ä¿è¯äº’æ–¥é”åŠæ—¶è§£é”ã€‚</p>
<h2 id="Lock-æ–¹æ³•"><a href="#Lock-æ–¹æ³•" class="headerlink" title="Lock()æ–¹æ³•"></a>Lock()æ–¹æ³•</h2><p>Lock()è¿™ä¸ªæ–¹æ³•ï¼Œé”å®šmã€‚å¦‚æœè¯¥é”å·²åœ¨ä½¿ç”¨ä¸­ï¼Œåˆ™è°ƒç”¨goroutineå°†é˜»å¡ï¼Œç›´åˆ°äº’æ–¥ä½“å¯ç”¨ã€‚</p>
<h2 id="Unlock-æ–¹æ³•"><a href="#Unlock-æ–¹æ³•" class="headerlink" title="Unlock()æ–¹æ³•"></a>Unlock()æ–¹æ³•</h2><p>Unlock()æ–¹æ³•ï¼Œè§£é”mã€‚å¦‚æœmæœªåœ¨è¦è§£é”çš„æ¡ç›®ä¸Šé”å®šï¼Œåˆ™ä¸ºè¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<p>é”å®šçš„äº’æ–¥ä½“ä¸ä¸ç‰¹å®šçš„goroutineå…³è”ã€‚å…è®¸ä¸€ä¸ªgoroutineé”å®šäº’æ–¥ä½“ï¼Œç„¶åå®‰æ’å¦ä¸€ä¸ªgoroutineè§£é”äº’æ–¥ä½“ã€‚</p>
<h2 id="ç¤ºä¾‹ä»£ç -1"><a href="#ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><p>ä½¿ç”¨goroutineï¼Œæ¨¡æ‹Ÿ4ä¸ªå”®ç¥¨å£å‡ºå”®ç«è½¦ç¥¨çš„æ¡ˆä¾‹ã€‚4ä¸ªå”®ç¥¨å£åŒæ—¶å–ç¥¨ï¼Œä¼šå‘ç”Ÿä¸´ç•Œèµ„æºæ•°æ®å®‰å…¨é—®é¢˜ã€‚æˆ‘ä»¬ä½¿ç”¨äº’æ–¥é”è§£å†³ä¸€ä¸‹ã€‚(Goè¯­è¨€æ¨å´‡çš„æ˜¯ä½¿ç”¨Channelæ¥å®ç°æ•°æ®å…±äº«ï¼Œä½†æ˜¯ä¹Ÿè¿˜æ˜¯æä¾›äº†ä¼ ç»Ÿçš„åŒæ­¥å¤„ç†æ–¹å¼)</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å˜é‡ï¼Œè¡¨ç¤ºç¥¨</span></span><br><span class="line"><span class="keyword">var</span> ticket = <span class="number">10</span> <span class="comment">//10å¼ ç¥¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mutex sync.Mutex <span class="comment">//åˆ›å»ºé”å¤´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup <span class="comment">//åŒæ­¥ç­‰å¾…ç»„å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	wg.Add(<span class="number">4</span>)</span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£1&quot;</span>)</span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£2&quot;</span>)</span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£3&quot;</span>)</span><br><span class="line">	<span class="keyword">go</span> saleTickets(<span class="string">&quot;å”®ç¥¨å£4&quot;</span>)</span><br><span class="line"></span><br><span class="line">	wg.Wait() <span class="comment">//mainè¦ç­‰å¾…</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;ç¨‹åºç»“æŸäº†ã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">saleTickets</span><span class="params">(name <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().UnixNano())</span><br><span class="line">	<span class="keyword">defer</span> wg.Done()</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//ä¸Šé”</span></span><br><span class="line">		mutex.Lock()    <span class="comment">//g2</span></span><br><span class="line">		<span class="keyword">if</span> ticket &gt; <span class="number">0</span> &#123; <span class="comment">//ticket 1 g1</span></span><br><span class="line">			time.Sleep(time.Duration(rand.Intn(<span class="number">1000</span>)) * time.Millisecond)</span><br><span class="line">			fmt.Println(name, <span class="string">&quot;å”®å‡ºï¼š&quot;</span>, ticket) <span class="comment">// 1</span></span><br><span class="line">			ticket--                         <span class="comment">// 0</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			mutex.Unlock() <span class="comment">//æ¡ä»¶ä¸æ»¡è¶³ï¼Œä¹Ÿè¦è§£é”</span></span><br><span class="line">			fmt.Println(name, <span class="string">&quot;å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		mutex.Unlock() <span class="comment">//è§£é”</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 10</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 9</span><br><span class="line">å”®ç¥¨å£2 å”®å‡ºï¼š 8</span><br><span class="line">å”®ç¥¨å£4 å”®å‡ºï¼š 7</span><br><span class="line">å”®ç¥¨å£3 å”®å‡ºï¼š 6</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 5</span><br><span class="line">å”®ç¥¨å£2 å”®å‡ºï¼š 4</span><br><span class="line">å”®ç¥¨å£4 å”®å‡ºï¼š 3</span><br><span class="line">å”®ç¥¨å£3 å”®å‡ºï¼š 2</span><br><span class="line">å”®ç¥¨å£1 å”®å‡ºï¼š 1</span><br><span class="line">å”®ç¥¨å£3 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£2 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£4 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">å”®ç¥¨å£1 å”®ç½„ï¼Œæ²¡æœ‰ç¥¨äº†ã€‚ã€‚</span><br><span class="line">ç¨‹åºç»“æŸäº†ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h1 id="è¯»å†™é”"><a href="#è¯»å†™é”" class="headerlink" title="è¯»å†™é”"></a>è¯»å†™é”</h1><h2 id="RWMutex-è¯»å†™é”"><a href="#RWMutex-è¯»å†™é”" class="headerlink" title="RWMutex(è¯»å†™é”)"></a>RWMutex(è¯»å†™é”)</h2><p>é€šè¿‡å¯¹äº’æ–¥é”çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†é”çš„æ¦‚å¿µä»¥åŠç”¨é€”ã€‚ä¸»è¦æ˜¯ç”¨äºå¤„ç†å¹¶å‘ä¸­çš„ä¸´ç•Œèµ„æºé—®é¢˜ã€‚</p>
<p>Goè¯­è¨€åŒ…ä¸­çš„ sync åŒ…æä¾›äº†ä¸¤ç§é”ç±»å‹ï¼šsync.Mutex å’Œ sync.RWMutexã€‚å…¶ä¸­RWMutexæ˜¯åŸºäºMutexå®ç°çš„ï¼Œåªè¯»é”çš„å®ç°ä½¿ç”¨ç±»ä¼¼å¼•ç”¨è®¡æ•°å™¨çš„åŠŸèƒ½ã€‚</p>
<p>RWMutexæ˜¯è¯»&#x2F;å†™äº’æ–¥é”ã€‚é”å¯ä»¥ç”±ä»»æ„æ•°é‡çš„è¯»å–å™¨æˆ–å•ä¸ªç¼–å†™å™¨æŒæœ‰ã€‚RWMutexçš„é›¶å€¼æ˜¯æœªé”å®šçš„mutexã€‚</p>
<p>å¦‚æœä¸€ä¸ªgoroutineæŒæœ‰ä¸€ä¸ªrRWMutexè¿›è¡Œè¯»å–ï¼Œè€Œå¦ä¸€ä¸ªgoroutineå¯èƒ½è°ƒç”¨lockï¼Œé‚£ä¹ˆåœ¨é‡Šæ”¾åˆå§‹è¯»å–é”ä¹‹å‰ï¼Œä»»ä½•goroutineéƒ½ä¸åº”è¯¥æœŸæœ›èƒ½å¤Ÿè·å–è¯»å–é”ã€‚ç‰¹åˆ«æ˜¯ï¼Œè¿™ç¦æ­¢é€’å½’è¯»å–é”å®šã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿é”æœ€ç»ˆå¯ç”¨ï¼›è¢«é˜»æ­¢çš„é”è°ƒç”¨ä¼šå°†æ–°çš„è¯»å¡å™¨æ’é™¤åœ¨è·å–é”ä¹‹å¤–ã€‚</p>
<p>æˆ‘ä»¬æ€ä¹ˆç†è§£è¯»å†™é”å‘¢ï¼Ÿå½“æœ‰ä¸€ä¸ª goroutine è·å¾—å†™é”å®šï¼Œå…¶å®ƒæ— è®ºæ˜¯è¯»é”å®šè¿˜æ˜¯å†™é”å®šéƒ½å°†é˜»å¡ç›´åˆ°å†™è§£é”ï¼›å½“æœ‰ä¸€ä¸ª goroutine è·å¾—è¯»é”å®šï¼Œå…¶å®ƒè¯»é”å®šä»ç„¶å¯ä»¥ç»§ç»­ï¼›å½“æœ‰ä¸€ä¸ªæˆ–ä»»æ„å¤šä¸ªè¯»é”å®šï¼Œå†™é”å®šå°†ç­‰å¾…æ‰€æœ‰è¯»é”å®šè§£é”ä¹‹åæ‰èƒ½å¤Ÿè¿›è¡Œå†™é”å®šã€‚æ‰€ä»¥è¯´è¿™é‡Œçš„è¯»é”å®šï¼ˆRLockï¼‰ç›®çš„å…¶å®æ˜¯å‘Šè¯‰å†™é”å®šï¼šæœ‰å¾ˆå¤šäººæ­£åœ¨è¯»å–æ•°æ®ï¼Œä½ ç»™æˆ‘ç«™ä¸€è¾¹å»ï¼Œç­‰å®ƒä»¬è¯»ï¼ˆè¯»è§£é”ï¼‰å®Œä½ å†æ¥å†™ï¼ˆå†™é”å®šï¼‰ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶æ€»ç»“ä¸ºå¦‚ä¸‹ä¸‰æ¡ï¼š</p>
<ol>
<li>åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ª goroutine èƒ½å¤Ÿè·å¾—å†™é”å®šã€‚</li>
<li>åŒæ—¶å¯ä»¥æœ‰ä»»æ„å¤šä¸ª gorouinte è·å¾—è¯»é”å®šã€‚</li>
<li>åŒæ—¶åªèƒ½å­˜åœ¨å†™é”å®šæˆ–è¯»é”å®šï¼ˆè¯»å’Œå†™äº’æ–¥ï¼‰ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼ŒRWMutexè¿™ä¸ªè¯»å†™é”ï¼Œè¯¥é”å¯ä»¥åŠ å¤šä¸ªè¯»é”æˆ–è€…ä¸€ä¸ªå†™é”ï¼Œ<strong>å…¶ç»å¸¸ç”¨äºè¯»æ¬¡æ•°è¿œè¿œå¤šäºå†™æ¬¡æ•°çš„åœºæ™¯</strong>ã€‚</p>
<p>è¯»å†™é”çš„å†™é”åªèƒ½é”å®šä¸€æ¬¡ï¼Œè§£é”å‰ä¸èƒ½å¤šæ¬¡é”å®šï¼Œè¯»é”å¯ä»¥å¤šæ¬¡ï¼Œä½†è¯»è§£é”æ¬¡æ•°æœ€å¤šåªèƒ½æ¯”è¯»é”æ¬¡æ•°å¤šä¸€æ¬¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸å»ºè®®è¯»è§£é”æ¬¡æ•°å¤šä½™è¯»é”æ¬¡æ•°ã€‚</p>
<p>åŸºæœ¬éµå¾ªä¸¤å¤§åŸåˆ™ï¼š</p>
<p>â€‹	1ã€å¯ä»¥éšä¾¿è¯»ï¼Œå¤šä¸ªgoroutineåŒæ—¶è¯»ã€‚</p>
<p>â€‹	2ã€å†™çš„æ—¶å€™ï¼Œå•¥ä¹Ÿä¸èƒ½å¹²ã€‚ä¸èƒ½è¯»ä¹Ÿä¸èƒ½å†™ã€‚</p>
<p>è¯»å†™é”å³æ˜¯é’ˆå¯¹äºè¯»å†™æ“ä½œçš„äº’æ–¥é”ã€‚å®ƒä¸æ™®é€šçš„äº’æ–¥é”æœ€å¤§çš„ä¸åŒå°±æ˜¯ï¼Œå®ƒå¯ä»¥åˆ†åˆ«é’ˆå¯¹è¯»æ“ä½œå’Œå†™æ“ä½œè¿›è¡Œé”å®šå’Œè§£é”æ“ä½œã€‚è¯»å†™é”éµå¾ªçš„è®¿é—®æ§åˆ¶è§„åˆ™ä¸äº’æ–¥é”æœ‰æ‰€ä¸åŒã€‚åœ¨è¯»å†™é”ç®¡è¾–çš„èŒƒå›´å†…ï¼Œå®ƒå…è®¸ä»»æ„ä¸ªè¯»æ“ä½œçš„åŒæ—¶è¿›è¡Œã€‚ä½†æ˜¯åœ¨åŒä¸€æ—¶åˆ»ï¼Œå®ƒåªå…è®¸æœ‰ä¸€ä¸ªå†™æ“ä½œåœ¨è¿›è¡Œã€‚</p>
<p>å¹¶ä¸”åœ¨æŸä¸€ä¸ªå†™æ“ä½œè¢«è¿›è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œè¯»æ“ä½œçš„è¿›è¡Œä¹Ÿæ˜¯ä¸è¢«å…è®¸çš„ã€‚ä¹Ÿå°±æ˜¯è¯´è¯»å†™é”æ§åˆ¶ä¸‹çš„å¤šä¸ªå†™æ“ä½œä¹‹é—´éƒ½æ˜¯äº’æ–¥çš„ï¼Œå¹¶ä¸”å†™æ“ä½œä¸è¯»æ“ä½œä¹‹é—´ä¹Ÿéƒ½æ˜¯äº’æ–¥çš„ã€‚ä½†æ˜¯ï¼Œå¤šä¸ªè¯»æ“ä½œä¹‹é—´å´ä¸å­˜åœ¨äº’æ–¥å…³ç³»ã€‚</p>
<h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><h3 id="RLock-æ–¹æ³•"><a href="#RLock-æ–¹æ³•" class="headerlink" title="RLock()æ–¹æ³•"></a>RLock()æ–¹æ³•</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(rw *RWMutex)</span></span> RLock()</span><br></pre></td></tr></table></figure>

<p>è¯»é”ï¼Œå½“æœ‰å†™é”æ—¶ï¼Œæ— æ³•åŠ è½½è¯»é”ï¼Œå½“åªæœ‰è¯»é”æˆ–è€…æ²¡æœ‰é”æ—¶ï¼Œå¯ä»¥åŠ è½½è¯»é”ï¼Œè¯»é”å¯ä»¥åŠ è½½å¤šä¸ªï¼Œæ‰€ä»¥é€‚ç”¨äºâ€œè¯»å¤šå†™å°‘â€çš„åœºæ™¯ã€‚</p>
<h3 id="RUnlock-æ–¹æ³•"><a href="#RUnlock-æ–¹æ³•" class="headerlink" title="RUnlock()æ–¹æ³•"></a>RUnlock()æ–¹æ³•</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(rw *RWMutex)</span></span> RUnlock()</span><br></pre></td></tr></table></figure>

<p>è¯»é”è§£é”ï¼ŒRUnlock æ’¤é”€å•æ¬¡RLockè°ƒç”¨ï¼Œå®ƒå¯¹äºå…¶å®ƒåŒæ—¶å­˜åœ¨çš„è¯»å–å™¨åˆ™æ²¡æœ‰æ•ˆæœã€‚è‹¥rwå¹¶æ²¡æœ‰ä¸ºè¯»å–è€Œé”å®šï¼Œè°ƒç”¨RUnlockå°±ä¼šå¼•å‘ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<h3 id="Lock-æ–¹æ³•-1"><a href="#Lock-æ–¹æ³•-1" class="headerlink" title="Lock()æ–¹æ³•"></a>Lock()æ–¹æ³•</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(rw *RWMutex)</span></span> Lock()</span><br></pre></td></tr></table></figure>

<p>å†™é”ï¼Œå¦‚æœåœ¨æ·»åŠ å†™é”ä¹‹å‰å·²ç»æœ‰å…¶ä»–çš„è¯»é”å’Œå†™é”ï¼Œåˆ™Lockå°±ä¼šé˜»å¡ç›´åˆ°è¯¥é”å¯ç”¨ï¼Œä¸ºç¡®ä¿è¯¥é”æœ€ç»ˆå¯ç”¨ï¼Œå·²é˜»å¡çš„Lockè°ƒç”¨ä¼šä»è·å¾—çš„é”ä¸­æ’é™¤æ–°çš„è¯»å–é”ï¼Œå³å†™é”æƒé™é«˜äºè¯»é”ï¼Œæœ‰å†™é”æ—¶ä¼˜å…ˆè¿›è¡Œå†™é”å®šã€‚</p>
<h3 id="Unlock-æ–¹æ³•-1"><a href="#Unlock-æ–¹æ³•-1" class="headerlink" title="Unlock()æ–¹æ³•"></a>Unlock()æ–¹æ³•</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(rw *RWMutex)</span></span> Unlock()</span><br></pre></td></tr></table></figure>

<p>å†™é”è§£é”ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œå†™é”å®šï¼Œåˆ™å°±ä¼šå¼•èµ·ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<h2 id="ç¤ºä¾‹ä»£ç -2"><a href="#ç¤ºä¾‹ä»£ç -2" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rwMutex *sync.RWMutex</span><br><span class="line"><span class="keyword">var</span> wg *sync.WaitGroup</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	rwMutex = <span class="built_in">new</span>(sync.RWMutex)</span><br><span class="line">	wg = <span class="built_in">new</span>(sync.WaitGroup)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//wg.Add(2)</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">////å¤šä¸ªåŒæ—¶è¯»å–</span></span><br><span class="line">	<span class="comment">//go readData(1)</span></span><br><span class="line">	<span class="comment">//go readData(2)</span></span><br><span class="line"></span><br><span class="line">	wg.Add(<span class="number">3</span>)</span><br><span class="line">	<span class="keyword">go</span> writeData(<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">go</span> readData(<span class="number">2</span>)</span><br><span class="line">	<span class="keyword">go</span> writeData(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	wg.Wait()</span><br><span class="line">	fmt.Println(<span class="string">&quot;main..over...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeData</span><span class="params">(i <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> wg.Done()</span><br><span class="line">	fmt.Println(i, <span class="string">&quot;å¼€å§‹å†™ï¼šwrite startã€‚ã€‚&quot;</span>)</span><br><span class="line">	rwMutex.Lock() <span class="comment">//å†™æ“ä½œä¸Šé”</span></span><br><span class="line">	fmt.Println(i, <span class="string">&quot;æ­£åœ¨å†™ï¼šwritingã€‚ã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line">	time.Sleep(<span class="number">3</span> * time.Second)</span><br><span class="line">	rwMutex.Unlock()</span><br><span class="line">	fmt.Println(i, <span class="string">&quot;å†™ç»“æŸï¼šwrite overã€‚ã€‚&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readData</span><span class="params">(i <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> wg.Done()</span><br><span class="line"></span><br><span class="line">	fmt.Println(i, <span class="string">&quot;å¼€å§‹è¯»ï¼šread startã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">	rwMutex.RLock() <span class="comment">//è¯»æ“ä½œä¸Šé”</span></span><br><span class="line">	fmt.Println(i, <span class="string">&quot;æ­£åœ¨è¯»å–æ•°æ®ï¼šreadingã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line">	time.Sleep(<span class="number">3</span> * time.Second)</span><br><span class="line">	rwMutex.RUnlock() <span class="comment">//è¯»æ“ä½œè§£é”</span></span><br><span class="line">	fmt.Println(i, <span class="string">&quot;è¯»ç»“æŸï¼šread overã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">3 å¼€å§‹å†™ï¼šwrite startã€‚ã€‚</span><br><span class="line">2 å¼€å§‹è¯»ï¼šread startã€‚ã€‚</span><br><span class="line">3 æ­£åœ¨å†™ï¼šwritingã€‚ã€‚ã€‚ã€‚</span><br><span class="line">1 å¼€å§‹å†™ï¼šwrite startã€‚ã€‚</span><br><span class="line">3 å†™ç»“æŸï¼šwrite overã€‚ã€‚</span><br><span class="line">2 æ­£åœ¨è¯»å–æ•°æ®ï¼šreadingã€‚ã€‚ã€‚</span><br><span class="line">2 è¯»ç»“æŸï¼šread overã€‚ã€‚ã€‚</span><br><span class="line">1 æ­£åœ¨å†™ï¼šwritingã€‚ã€‚ã€‚ã€‚</span><br><span class="line">1 å†™ç»“æŸï¼šwrite overã€‚ã€‚</span><br><span class="line">main..over...</span><br></pre></td></tr></table></figure>

<p>æœ€åæ¦‚æ‹¬ï¼š</p>
<ol>
<li>è¯»é”ä¸èƒ½é˜»å¡è¯»é”</li>
<li>è¯»é”éœ€è¦é˜»å¡å†™é”ï¼Œç›´åˆ°æ‰€æœ‰è¯»é”éƒ½é‡Šæ”¾</li>
<li>å†™é”éœ€è¦é˜»å¡è¯»é”ï¼Œç›´åˆ°æ‰€æœ‰å†™é”éƒ½é‡Šæ”¾</li>
<li>å†™é”éœ€è¦é˜»å¡å†™é”</li>
</ol>
]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>channelé€šé“è¯¦è§£</title>
    <url>/2023/07/07/Go/20/</url>
    <content><![CDATA[<h1 id="channelé€šé“"><a href="#channelé€šé“" class="headerlink" title="channelé€šé“"></a>channelé€šé“</h1><p>é€šé“å¯ä»¥è¢«è®¤ä¸ºæ˜¯Goroutinesé€šä¿¡çš„ç®¡é“ã€‚ç±»ä¼¼äºç®¡é“ä¸­çš„æ°´ä»ä¸€ç«¯åˆ°å¦ä¸€ç«¯çš„æµåŠ¨ï¼Œæ•°æ®å¯ä»¥ä»ä¸€ç«¯å‘é€åˆ°å¦ä¸€ç«¯ï¼Œé€šè¿‡é€šé“æ¥æ”¶ã€‚</p>
<p>åœ¨å‰é¢è®²Goè¯­è¨€çš„å¹¶å‘æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¯´è¿‡ï¼Œå½“å¤šä¸ªGoroutineæƒ³å®ç°å…±äº«æ•°æ®çš„æ—¶å€™ï¼Œè™½ç„¶ä¹Ÿæä¾›äº†ä¼ ç»Ÿçš„åŒæ­¥æœºåˆ¶ï¼Œä½†æ˜¯Goè¯­è¨€å¼ºçƒˆå»ºè®®çš„æ˜¯ä½¿ç”¨Channelé€šé“æ¥å®ç°Goroutinesä¹‹é—´çš„é€šä¿¡ã€‚</p>
<blockquote>
<p>â€œä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œåº”è¯¥é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜â€ è¿™æ˜¯ä¸€å¥é£é¡golangç¤¾åŒºçš„ç»å…¸è¯­</p>
</blockquote>
<p>Goè¯­è¨€ä¸­ï¼Œè¦ä¼ é€’æŸä¸ªæ•°æ®ç»™å¦ä¸€ä¸ªgoroutine(åç¨‹)ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ•°æ®å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆä¼ å…¥æŸä¸ªchannelä¸­ï¼Œå¦å¤–ä¸€ä¸ªgoroutineä»è¿™ä¸ªchannelä¸­è¯»å‡ºè¿™ä¸ªæŒ‡é’ˆï¼Œå¹¶å¤„ç†å…¶æŒ‡å‘çš„å†…å­˜å¯¹è±¡ã€‚Goä»è¯­è¨€å±‚é¢ä¿è¯åŒä¸€ä¸ªæ—¶é—´åªæœ‰ä¸€ä¸ªgoroutineèƒ½å¤Ÿè®¿é—®channelé‡Œé¢çš„æ•°æ®ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§ä¼˜é›…ç®€å•çš„å·¥å…·ï¼Œæ‰€ä»¥Goçš„åšæ³•å°±æ˜¯ä½¿ç”¨channelæ¥é€šä¿¡ï¼Œé€šè¿‡é€šä¿¡æ¥ä¼ é€’å†…å­˜æ•°æ®ï¼Œä½¿å¾—å†…å­˜æ•°æ®åœ¨ä¸åŒçš„goroutineä¸­ä¼ é€’ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…±äº«å†…å­˜æ¥é€šä¿¡ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯é€šé“"><a href="#ä»€ä¹ˆæ˜¯é€šé“" class="headerlink" title="ä»€ä¹ˆæ˜¯é€šé“"></a>ä»€ä¹ˆæ˜¯é€šé“</h2><h3 id="é€šé“çš„æ¦‚å¿µ"><a href="#é€šé“çš„æ¦‚å¿µ" class="headerlink" title="é€šé“çš„æ¦‚å¿µ"></a>é€šé“çš„æ¦‚å¿µ</h3><p>é€šé“æ˜¯ä»€ä¹ˆï¼Œé€šé“å°±æ˜¯goroutineä¹‹é—´çš„é€šé“ã€‚å®ƒå¯ä»¥è®©goroutineä¹‹é—´ç›¸äº’é€šä¿¡ã€‚</p>
<p>æ¯ä¸ªé€šé“éƒ½æœ‰ä¸å…¶ç›¸å…³çš„ç±»å‹ã€‚è¯¥ç±»å‹æ˜¯é€šé“å…è®¸ä¼ è¾“çš„æ•°æ®ç±»å‹ã€‚(é€šé“çš„é›¶å€¼ä¸ºnilã€‚nilé€šé“æ²¡æœ‰ä»»ä½•ç”¨å¤„ï¼Œå› æ­¤é€šé“å¿…é¡»ä½¿ç”¨ç±»ä¼¼äºmapå’Œåˆ‡ç‰‡çš„æ–¹æ³•æ¥å®šä¹‰ã€‚)</p>
<h3 id="é€šé“çš„å£°æ˜"><a href="#é€šé“çš„å£°æ˜" class="headerlink" title="é€šé“çš„å£°æ˜"></a>é€šé“çš„å£°æ˜</h3><p>å£°æ˜ä¸€ä¸ªé€šé“å’Œå®šä¹‰ä¸€ä¸ªå˜é‡çš„è¯­æ³•ä¸€æ ·ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜é€šé“</span></span><br><span class="line"><span class="keyword">var</span> é€šé“å <span class="keyword">chan</span> æ•°æ®ç±»å‹</span><br><span class="line"><span class="comment">//åˆ›å»ºé€šé“ï¼šå¦‚æœé€šé“ä¸ºnil(å°±æ˜¯ä¸å­˜åœ¨)ï¼Œå°±éœ€è¦å…ˆåˆ›å»ºé€šé“</span></span><br><span class="line">é€šé“å = <span class="built_in">make</span>(<span class="keyword">chan</span> æ•°æ®ç±»å‹)</span><br></pre></td></tr></table></figure>



<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">chan</span> <span class="type">int</span></span><br><span class="line">	<span class="keyword">if</span> a == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;channel æ˜¯ nil çš„, ä¸èƒ½ä½¿ç”¨ï¼Œéœ€è¦å…ˆåˆ›å»ºé€šé“ã€‚ã€‚&quot;</span>)</span><br><span class="line">		a = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;æ•°æ®ç±»å‹æ˜¯ï¼š %T&quot;</span>, a)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">channel æ˜¯ nil çš„, ä¸èƒ½ä½¿ç”¨ï¼Œéœ€è¦å…ˆåˆ›å»ºé€šé“ã€‚ã€‚</span><br><span class="line">æ•°æ®ç±»å‹æ˜¯ï¼š chan int</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ç®€çŸ­çš„å£°æ˜ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>) </span><br></pre></td></tr></table></figure>

<h3 id="channelçš„æ•°æ®ç±»å‹"><a href="#channelçš„æ•°æ®ç±»å‹" class="headerlink" title="channelçš„æ•°æ®ç±»å‹"></a>channelçš„æ•°æ®ç±»å‹</h3><p>channelæ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œåœ¨ä½œä¸ºå‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œä¼ é€’çš„æ˜¯å†…å­˜åœ°å€ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%p\n&quot;</span>,ch1,ch1)</span><br><span class="line"></span><br><span class="line">	test1(ch1)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test1</span><span class="params">(ch <span class="keyword">chan</span> <span class="type">int</span>)</span></span>&#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%p\n&quot;</span>,ch,ch)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chan int,0xc00001e180</span><br><span class="line">chan int,0xc00001e180</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°ï¼Œchå’Œch1çš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œè¯´æ˜å®ƒä»¬æ˜¯åŒä¸€ä¸ªé€šé“ã€‚</p>
<h3 id="é€šé“çš„æ³¨æ„ç‚¹"><a href="#é€šé“çš„æ³¨æ„ç‚¹" class="headerlink" title="é€šé“çš„æ³¨æ„ç‚¹"></a>é€šé“çš„æ³¨æ„ç‚¹</h3><p>Channelé€šé“åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ³¨æ„ç‚¹ï¼š</p>
<ul>
<li><p>1.ç”¨äºgoroutineï¼Œä¼ é€’æ¶ˆæ¯çš„ã€‚</p>
</li>
<li><p>2.é€šé“ï¼Œæ¯ä¸ªéƒ½æœ‰ç›¸å…³è”çš„æ•°æ®ç±»å‹,<br>nil chanï¼Œä¸èƒ½ä½¿ç”¨ï¼Œç±»ä¼¼äºnil mapï¼Œä¸èƒ½ç›´æ¥å­˜å‚¨é”®å€¼å¯¹</p>
</li>
<li><p>3.ä½¿ç”¨é€šé“ä¼ é€’æ•°æ®ï¼š&lt;-<br> chan &lt;- data,å‘é€æ•°æ®åˆ°é€šé“ã€‚å‘é€šé“ä¸­å†™æ•°æ®<br>data &lt;- chan,ä»é€šé“ä¸­è·å–æ•°æ®ã€‚ä»é€šé“ä¸­è¯»æ•°æ®</p>
</li>
<li><p>4.é˜»å¡ï¼š<br> å‘é€æ•°æ®ï¼šchan &lt;- data,é˜»å¡çš„ï¼Œç›´åˆ°å¦ä¸€æ¡goroutineï¼Œè¯»å–æ•°æ®æ¥è§£é™¤é˜»å¡<br>è¯»å–æ•°æ®ï¼šdata &lt;- chan,ä¹Ÿæ˜¯é˜»å¡çš„ã€‚ç›´åˆ°å¦ä¸€æ¡goroutineï¼Œå†™å‡ºæ•°æ®è§£é™¤é˜»å¡ã€‚</p>
</li>
<li><p>5.æœ¬èº«channelå°±æ˜¯åŒæ­¥çš„ï¼Œæ„å‘³ç€åŒä¸€æ—¶é—´ï¼Œåªèƒ½æœ‰ä¸€æ¡goroutineæ¥æ“ä½œã€‚</p>
</li>
</ul>
<p>æœ€åï¼šé€šé“æ˜¯goroutineä¹‹é—´çš„è¿æ¥ï¼Œæ‰€ä»¥é€šé“çš„å‘é€å’Œæ¥æ”¶å¿…é¡»å¤„åœ¨ä¸åŒçš„goroutineä¸­ã€‚</p>
<h2 id="é€šé“çš„ä½¿ç”¨è¯­æ³•"><a href="#é€šé“çš„ä½¿ç”¨è¯­æ³•" class="headerlink" title="é€šé“çš„ä½¿ç”¨è¯­æ³•"></a>é€šé“çš„ä½¿ç”¨è¯­æ³•</h2><h3 id="å‘é€å’Œæ¥æ”¶"><a href="#å‘é€å’Œæ¥æ”¶" class="headerlink" title="å‘é€å’Œæ¥æ”¶"></a>å‘é€å’Œæ¥æ”¶</h3><p>å‘é€å’Œæ¥æ”¶çš„è¯­æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">data := &lt;- a <span class="comment">// read from channel a  </span></span><br><span class="line">a &lt;- data <span class="comment">// write to channel a</span></span><br></pre></td></tr></table></figure>

<p>åœ¨é€šé“ä¸Šç®­å¤´çš„æ–¹å‘æŒ‡å®šæ•°æ®æ˜¯å‘é€è¿˜æ˜¯æ¥æ”¶ã€‚</p>
<p>å¦å¤–ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">v, ok := &lt;- a <span class="comment">//ä»ä¸€ä¸ªchannelä¸­è¯»å–</span></span><br></pre></td></tr></table></figure>

<h3 id="å‘é€å’Œæ¥æ”¶é»˜è®¤æ˜¯é˜»å¡çš„"><a href="#å‘é€å’Œæ¥æ”¶é»˜è®¤æ˜¯é˜»å¡çš„" class="headerlink" title="å‘é€å’Œæ¥æ”¶é»˜è®¤æ˜¯é˜»å¡çš„"></a>å‘é€å’Œæ¥æ”¶é»˜è®¤æ˜¯é˜»å¡çš„</h3><p>ä¸€ä¸ªé€šé“å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œé»˜è®¤æ˜¯é˜»å¡çš„ã€‚å½“ä¸€ä¸ªæ•°æ®è¢«å‘é€åˆ°é€šé“æ—¶ï¼Œåœ¨å‘é€è¯­å¥ä¸­è¢«é˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ªGoroutineä»è¯¥é€šé“è¯»å–æ•°æ®ã€‚ç›¸å¯¹åœ°ï¼Œå½“ä»é€šé“è¯»å–æ•°æ®æ—¶ï¼Œè¯»å–è¢«é˜»å¡ï¼Œç›´åˆ°ä¸€ä¸ªGoroutineå°†æ•°æ®å†™å…¥è¯¥é€šé“ã€‚</p>
<p>è¿™äº›é€šé“çš„ç‰¹æ€§æ˜¯å¸®åŠ©Goroutinesæœ‰æ•ˆåœ°è¿›è¡Œé€šä¿¡ï¼Œè€Œæ— éœ€åƒä½¿ç”¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­éå¸¸å¸¸è§çš„æ˜¾å¼é”æˆ–æ¡ä»¶å˜é‡ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> ch1 <span class="keyword">chan</span> <span class="type">bool</span>       <span class="comment">//å£°æ˜ï¼Œæ²¡æœ‰åˆ›å»º</span></span><br><span class="line">	fmt.Println(ch1)        <span class="comment">//&lt;nil&gt;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, ch1) <span class="comment">//chan bool</span></span><br><span class="line">	ch1 = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">bool</span>)   <span class="comment">//0xc0000a4000,æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®</span></span><br><span class="line">	fmt.Println(ch1)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;å­goroutineä¸­ï¼Œiï¼š&quot;</span>, i)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// å¾ªç¯ç»“æŸåï¼Œå‘é€šé“ä¸­å†™æ•°æ®ï¼Œè¡¨ç¤ºè¦ç»“æŸäº†ã€‚ã€‚</span></span><br><span class="line">		ch1 &lt;- <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;ç»“æŸã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	data := &lt;-ch1 <span class="comment">// ä»ch1é€šé“ä¸­è¯»å–æ•°æ®</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;data--&gt;&quot;</span>, data)</span><br><span class="line">	fmt.Println(<span class="string">&quot;mainã€‚ã€‚overã€‚ã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;nil&gt;</span><br><span class="line">chan bool</span><br><span class="line">0xc000086120</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 0</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 1</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 2</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 3</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 4</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 5</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 6</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 7</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 8</span><br><span class="line">å­goroutineä¸­ï¼Œiï¼š 9</span><br><span class="line">ç»“æŸã€‚ã€‚</span><br><span class="line">data--&gt; true</span><br><span class="line">mainã€‚ã€‚overã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºäº†ä¸€ä¸ªchan boolé€šé“ã€‚ç„¶åå¯åŠ¨äº†ä¸€æ¡å­Goroutineï¼Œå¹¶å¾ªç¯æ‰“å°10ä¸ªæ•°å­—ã€‚ç„¶åæˆ‘ä»¬å‘é€šé“ch1ä¸­å†™å…¥è¾“å…¥trueã€‚ç„¶ååœ¨ä¸»goroutineä¸­ï¼Œæˆ‘ä»¬ä»ch1ä¸­è¯»å–æ•°æ®ã€‚è¿™ä¸€è¡Œä»£ç æ˜¯é˜»å¡çš„ï¼Œè¿™æ„å‘³ç€åœ¨å­Goroutineå°†æ•°æ®å†™å…¥åˆ°è¯¥é€šé“ä¹‹å‰ï¼Œä¸»goroutineå°†ä¸ä¼šæ‰§è¡Œåˆ°ä¸‹ä¸€è¡Œä»£ç ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡channelå®ç°å­goroutineå’Œä¸»goroutineä¹‹é—´çš„é€šä¿¡ã€‚å½“å­goroutineæ‰§è¡Œå®Œæ¯•å‰ï¼Œä¸»goroutineä¼šå› ä¸ºè¯»å–ch1ä¸­çš„æ•°æ®è€Œé˜»å¡ã€‚ä»è€Œä¿è¯äº†å­goroutineä¼šå…ˆæ‰§è¡Œå®Œæ¯•ã€‚è¿™å°±æ¶ˆé™¤äº†å¯¹æ—¶é—´çš„éœ€æ±‚ã€‚åœ¨ä¹‹å‰çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è¦ä¹ˆè®©ä¸»goroutineè¿›å…¥ç¡çœ ï¼Œä»¥é˜²æ­¢ä¸»è¦çš„Goroutineé€€å‡ºã€‚è¦ä¹ˆé€šè¿‡WaitGroupæ¥ä¿è¯å­goroutineå…ˆæ‰§è¡Œå®Œæ¯•ï¼Œä¸»goroutineæ‰ç»“æŸã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼šä»¥ä¸‹ä»£ç åŠ å…¥äº†ç¡çœ ï¼Œå¯ä»¥æ›´å¥½çš„ç†è§£channelçš„é˜»å¡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">bool</span>) <span class="comment">// é€šé“</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;å­goroutineæ‰§è¡Œã€‚ã€‚ã€‚&quot;</span>)</span><br><span class="line">		time.Sleep(<span class="number">3</span> * time.Second)</span><br><span class="line">		data := &lt;-ch1 <span class="comment">// ä»é€šé“ä¸­è¯»å–æ•°æ®</span></span><br><span class="line">		fmt.Println(<span class="string">&quot;dataï¼š&quot;</span>, data)</span><br><span class="line">		done &lt;- <span class="literal">true</span></span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="comment">// å‘é€šé“ä¸­å†™æ•°æ®ã€‚ã€‚</span></span><br><span class="line">	time.Sleep(<span class="number">5</span> * time.Second)</span><br><span class="line">	ch1 &lt;- <span class="number">100</span></span><br><span class="line"></span><br><span class="line">	&lt;-done</span><br><span class="line">	fmt.Println(<span class="string">&quot;mainã€‚ã€‚over&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­goroutineæ‰§è¡Œã€‚ã€‚ã€‚</span><br><span class="line">dataï¼š 100</span><br><span class="line">mainã€‚ã€‚over</span><br></pre></td></tr></table></figure>

<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä¸‹é¢è¿™æ®µç¨‹åºå°†æ‰“å°ä¸€ä¸ªæ•°å­—çš„å„ä½çš„å¹³æ–¹å’Œä»¥åŠç«‹æ–¹å’Œã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calcSquares</span><span class="params">(number <span class="type">int</span>, squareop <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> number != <span class="number">0</span> &#123;</span><br><span class="line">		digit := number % <span class="number">10</span></span><br><span class="line">		sum += digit * digit</span><br><span class="line">		number /= <span class="number">10</span></span><br><span class="line">	&#125;</span><br><span class="line">	squareop &lt;- sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calcCubes</span><span class="params">(number <span class="type">int</span>, cubeop <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> number != <span class="number">0</span> &#123;</span><br><span class="line">		digit := number % <span class="number">10</span></span><br><span class="line">		sum += digit * digit * digit</span><br><span class="line">		number /= <span class="number">10</span></span><br><span class="line">	&#125;</span><br><span class="line">	cubeop &lt;- sum</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	number := <span class="number">123</span></span><br><span class="line">	sqrch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	cubech := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	<span class="keyword">go</span> calcSquares(number, sqrch)</span><br><span class="line">	<span class="keyword">go</span> calcCubes(number, cubech)</span><br><span class="line">	squares, cubes := &lt;-sqrch, &lt;-cubech</span><br><span class="line">	fmt.Println(<span class="string">&quot;Final output&quot;</span>, squares, cubes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Final output 14 36</span><br></pre></td></tr></table></figure>

<h3 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h3><p>ä½¿ç”¨é€šé“æ—¶è¦è€ƒè™‘çš„ä¸€ä¸ªé‡è¦å› ç´ æ˜¯æ­»é”ã€‚å¦‚æœGoroutineåœ¨ä¸€ä¸ªé€šé“ä¸Šå‘é€æ•°æ®ï¼Œé‚£ä¹ˆé¢„è®¡å…¶ä»–çš„Goroutineåº”è¯¥æ¥æ”¶æ•°æ®ã€‚å¦‚æœè¿™ç§æƒ…å†µä¸å‘ç”Ÿï¼Œé‚£ä¹ˆç¨‹åºå°†åœ¨è¿è¡Œæ—¶å‡ºç°æ­»é”ã€‚</p>
<p>ç±»ä¼¼åœ°ï¼Œå¦‚æœGoroutineæ­£åœ¨ç­‰å¾…ä»é€šé“æ¥æ”¶æ•°æ®ï¼Œé‚£ä¹ˆå¦ä¸€äº›Goroutineå°†ä¼šåœ¨è¯¥é€šé“ä¸Šå†™å…¥æ•°æ®ï¼Œå¦åˆ™ç¨‹åºå°†ä¼šæ­»é”ã€‚</p>
<h2 id="å…³é—­é€šé“"><a href="#å…³é—­é€šé“" class="headerlink" title="å…³é—­é€šé“"></a>å…³é—­é€šé“</h2><p>å‘é€è€…å¯ä»¥é€šè¿‡å…³é—­ä¿¡é“ï¼Œæ¥é€šçŸ¥æ¥æ”¶æ–¹ä¸ä¼šæœ‰æ›´å¤šçš„æ•°æ®è¢«å‘é€åˆ°channelä¸Šã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="built_in">close</span>(ch)</span><br></pre></td></tr></table></figure>

<p>æ¥æ”¶è€…å¯ä»¥åœ¨æ¥æ”¶æ¥è‡ªé€šé“çš„æ•°æ®æ—¶ä½¿ç”¨é¢å¤–çš„å˜é‡æ¥æ£€æŸ¥é€šé“æ˜¯å¦å·²ç»å…³é—­ã€‚</p>
<p>è¯­æ³•ç»“æ„ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">v, ok := &lt;- ch  </span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç±»ä¼¼mapæ“ä½œï¼Œå­˜å‚¨keyï¼Œvalueé”®å€¼å¯¹</p>
<p>v,ok :&#x3D; map[key] &#x2F;&#x2F;æ ¹æ®keyä»mapä¸­è·å–valueï¼Œå¦‚æœkeyå­˜åœ¨ï¼Œ vå°±æ˜¯å¯¹åº”çš„æ•°æ®ï¼Œå¦‚æœkeyä¸å­˜åœ¨ï¼Œvæ˜¯é»˜è®¤å€¼</p>
</blockquote>
<p>åœ¨ä¸Šé¢çš„è¯­å¥ä¸­ï¼Œå¦‚æœokçš„å€¼æ˜¯trueï¼Œè¡¨ç¤ºæˆåŠŸçš„ä»é€šé“ä¸­è¯»å–äº†ä¸€ä¸ªæ•°æ®valueã€‚å¦‚æœokæ˜¯falseï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æ­£åœ¨ä»ä¸€ä¸ªå°é—­çš„é€šé“è¯»å–æ•°æ®ã€‚ä»é—­é€šé“è¯»å–çš„å€¼å°†æ˜¯é€šé“ç±»å‹çš„é›¶å€¼ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœé€šé“æ˜¯ä¸€ä¸ªinté€šé“ï¼Œé‚£ä¹ˆä»å°é—­é€šé“æ¥æ”¶çš„å€¼å°†ä¸º0ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	<span class="keyword">go</span> sendData(ch1)</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		å­goroutineï¼Œå†™å‡ºæ•°æ®10ä¸ª</span></span><br><span class="line"><span class="comment">				æ¯å†™ä¸€ä¸ªï¼Œé˜»å¡ä¸€æ¬¡ï¼Œä¸»ç¨‹åºè¯»å–ä¸€æ¬¡ï¼Œè§£é™¤é˜»å¡</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		ä¸»goroutineï¼šå¾ªç¯è¯»</span></span><br><span class="line"><span class="comment">				æ¯æ¬¡è¯»å–ä¸€ä¸ªï¼Œå µå¡ä¸€æ¬¡ï¼Œå­ç¨‹åºï¼Œå†™å‡ºä¸€ä¸ªï¼Œè§£é™¤é˜»å¡</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		å‘é€å‘ï¼Œå…³é—­é€šé“çš„---&gt;æ¥æ”¶æ–¹ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®æ˜¯è¯¥ç±»å‹çš„é›¶å€¼ï¼Œä»¥åŠfalse</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//ä¸»ç¨‹åºä¸­è·å–é€šé“çš„æ•°æ®</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">		v, ok := &lt;-ch1 <span class="comment">//å…¶ä»–goroutineï¼Œæ˜¾ç¤ºçš„è°ƒç”¨closeæ–¹æ³•å…³é—­é€šé“ã€‚</span></span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;å·²ç»è¯»å–äº†æ‰€æœ‰çš„æ•°æ®ï¼Œ&quot;</span>, ok, v)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="string">&quot;å–å‡ºæ•°æ®ï¼š&quot;</span>, v, ok)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;main...over....&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sendData</span><span class="params">(ch1 <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// å‘é€æ–¹ï¼š10æ¡æ•°æ®</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		ch1 &lt;- i <span class="comment">//å°†iå†™å…¥é€šé“ä¸­</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">close</span>(ch1) <span class="comment">//å°†ch1é€šé“å…³é—­äº†ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å–å‡ºæ•°æ®ï¼š 0 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 1 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 2 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 3 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 4 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 5 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 6 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 7 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 8 true</span><br><span class="line">å–å‡ºæ•°æ®ï¼š 9 true</span><br><span class="line">å·²ç»è¯»å–äº†æ‰€æœ‰çš„æ•°æ®ï¼Œ false 0</span><br><span class="line">main...over....</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œsend Goroutineå°†0åˆ°9å†™å…¥chlé€šé“ï¼Œç„¶åå…³é—­é€šé“ã€‚ä¸»å‡½æ•°é‡Œæœ‰ä¸€ä¸ªæ— é™å¾ªç¯ã€‚å®ƒæ£€æŸ¥é€šé“æ˜¯å¦åœ¨å‘é€æ•°æ®åï¼Œä½¿ç”¨å˜é‡okå…³é—­ã€‚å¦‚æœokæ˜¯å‡çš„ï¼Œåˆ™æ„å‘³ç€é€šé“å…³é—­ï¼Œå› æ­¤å¾ªç¯ç»“æŸã€‚è¿˜å¯ä»¥æ‰“å°æ¥æ”¶åˆ°çš„å€¼å’Œokçš„å€¼ã€‚</p>
<h2 id="é€šé“ä¸Šçš„èŒƒå›´å¾ªç¯"><a href="#é€šé“ä¸Šçš„èŒƒå›´å¾ªç¯" class="headerlink" title="é€šé“ä¸Šçš„èŒƒå›´å¾ªç¯"></a>é€šé“ä¸Šçš„èŒƒå›´å¾ªç¯</h2><p>æˆ‘ä»¬å¯ä»¥å¾ªç¯ä»é€šé“ä¸Šè·å–æ•°æ®ï¼Œç›´åˆ°é€šé“å…³é—­ã€‚forå¾ªç¯çš„for rangeå½¢å¼å¯ç”¨äºä»é€šé“æ¥æ”¶å€¼ï¼Œç›´åˆ°å®ƒå…³é—­ä¸ºæ­¢ã€‚</p>
<p>ä½¿ç”¨rangeå¾ªç¯ï¼Œç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	<span class="keyword">go</span> sendData(ch1)</span><br><span class="line">	<span class="comment">// forå¾ªç¯çš„for rangeå½¢å¼å¯ç”¨äºä»é€šé“æ¥æ”¶å€¼ï¼Œç›´åˆ°å®ƒå…³é—­ä¸ºæ­¢ã€‚</span></span><br><span class="line">	<span class="keyword">for</span> v := <span class="keyword">range</span> ch1 &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;è¯»å–æ•°æ®ï¼š&quot;</span>, v)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;main..over.....&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sendData</span><span class="params">(ch1 <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">		ch1 &lt;- i</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">close</span>(ch1) <span class="comment">//é€šçŸ¥å¯¹æ–¹ï¼Œé€šé“å…³é—­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯»å–æ•°æ®ï¼š 0</span><br><span class="line">è¯»å–æ•°æ®ï¼š 1</span><br><span class="line">è¯»å–æ•°æ®ï¼š 2</span><br><span class="line">è¯»å–æ•°æ®ï¼š 3</span><br><span class="line">è¯»å–æ•°æ®ï¼š 4</span><br><span class="line">è¯»å–æ•°æ®ï¼š 5</span><br><span class="line">è¯»å–æ•°æ®ï¼š 6</span><br><span class="line">è¯»å–æ•°æ®ï¼š 7</span><br><span class="line">è¯»å–æ•°æ®ï¼š 8</span><br><span class="line">è¯»å–æ•°æ®ï¼š 9</span><br><span class="line">main..over.....</span><br></pre></td></tr></table></figure>

<h2 id="ç¼“å†²é€šé“"><a href="#ç¼“å†²é€šé“" class="headerlink" title="ç¼“å†²é€šé“"></a>ç¼“å†²é€šé“</h2><h3 id="éç¼“å†²é€šé“"><a href="#éç¼“å†²é€šé“" class="headerlink" title="éç¼“å†²é€šé“"></a>éç¼“å†²é€šé“</h3><p>ä¹‹å‰å­¦ä¹ çš„æ‰€æœ‰é€šé“åŸºæœ¬ä¸Šéƒ½æ²¡æœ‰ç¼“å†²ã€‚å‘é€å’Œæ¥æ”¶åˆ°ä¸€ä¸ªæœªç¼“å†²çš„é€šé“æ˜¯é˜»å¡çš„ã€‚</p>
<p>ä¸€æ¬¡å‘é€æ“ä½œå¯¹åº”ä¸€æ¬¡æ¥æ”¶æ“ä½œï¼Œå¯¹äºä¸€ä¸ªgoroutineæ¥è®²ï¼Œå®ƒçš„ä¸€æ¬¡å‘é€ï¼Œåœ¨å¦ä¸€ä¸ªgoroutineæ¥æ”¶ä¹‹å‰éƒ½æ˜¯é˜»å¡çš„ã€‚åŒæ ·çš„ï¼Œå¯¹äºæ¥æ”¶æ¥è®²ï¼Œåœ¨å¦ä¸€ä¸ªgoroutineå‘é€ä¹‹å‰ï¼Œå®ƒä¹Ÿæ˜¯é˜»å¡çš„ã€‚</p>
<h3 id="ç¼“å†²é€šé“-1"><a href="#ç¼“å†²é€šé“-1" class="headerlink" title="ç¼“å†²é€šé“"></a>ç¼“å†²é€šé“</h3><p>ç¼“å†²é€šé“å°±æ˜¯æŒ‡ä¸€ä¸ªé€šé“ï¼Œå¸¦æœ‰ä¸€ä¸ªç¼“å†²åŒºã€‚å‘é€åˆ°ä¸€ä¸ªç¼“å†²é€šé“åªæœ‰åœ¨ç¼“å†²åŒºæ»¡æ—¶æ‰è¢«é˜»å¡ã€‚ç±»ä¼¼åœ°ï¼Œä»ç¼“å†²é€šé“æ¥æ”¶çš„ä¿¡æ¯åªæœ‰åœ¨ç¼“å†²åŒºä¸ºç©ºæ—¶æ‰ä¼šè¢«é˜»å¡ã€‚</p>
<p>å¯ä»¥é€šè¿‡å°†é¢å¤–çš„å®¹é‡å‚æ•°ä¼ é€’ç»™makeå‡½æ•°æ¥åˆ›å»ºç¼“å†²é€šé“ï¼Œè¯¥å‡½æ•°æŒ‡å®šç¼“å†²åŒºçš„å¤§å°ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">type</span>, capacity)  </span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°è¯­æ³•çš„å®¹é‡åº”è¯¥å¤§äº0ï¼Œä»¥ä¾¿é€šé“å…·æœ‰ç¼“å†²åŒºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— ç¼“å†²é€šé“çš„å®¹é‡ä¸º0ï¼Œå› æ­¤åœ¨ä¹‹å‰åˆ›å»ºé€šé“æ—¶çœç•¥äº†å®¹é‡å‚æ•°ã€‚</p>
<h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><p>ä»¥ä¸‹çš„ä»£ç ä¸­ï¼Œchané€šé“ï¼Œæ˜¯å¸¦æœ‰ç¼“å†²åŒºçš„ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		éç¼“å­˜é€šé“ï¼šmake(chan T)</span></span><br><span class="line"><span class="comment">		ç¼“å­˜é€šé“ï¼šmake(chan T ,size)</span></span><br><span class="line"><span class="comment">			ç¼“å­˜é€šé“ï¼Œç†è§£ä¸ºæ˜¯é˜Ÿåˆ—ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		éç¼“å­˜ï¼Œå‘é€è¿˜æ˜¯æ¥å—ï¼Œéƒ½æ˜¯é˜»å¡çš„</span></span><br><span class="line"><span class="comment">		ç¼“å­˜é€šé“,ç¼“å­˜åŒºçš„æ•°æ®æ»¡äº†ï¼Œæ‰ä¼šé˜»å¡çŠ¶æ€ã€‚ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>, <span class="number">4</span>)</span><br><span class="line">	<span class="keyword">go</span> sendData3(ch)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		time.Sleep(time.Second / <span class="number">2</span>)</span><br><span class="line">		v, ok := &lt;-ch</span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;è¯»å®Œäº†ï¼Œï¼Œ&quot;</span>, ok)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="string">&quot;\tè¯»å–çš„æ•°æ®æ˜¯ï¼š&quot;</span>, v)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;main...over...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sendData3</span><span class="params">(ch <span class="keyword">chan</span> <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		ch &lt;- <span class="string">&quot;æ•°æ®&quot;</span> + strconv.Itoa(i)</span><br><span class="line">		fmt.Println(<span class="string">&quot;å­goroutineï¼Œå†™å‡ºç¬¬&quot;</span>, i, <span class="string">&quot;ä¸ªæ•°æ®&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">close</span>(ch)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 0 ä¸ªæ•°æ®</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 1 ä¸ªæ•°æ®</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 2 ä¸ªæ•°æ®</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 3 ä¸ªæ•°æ®</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®0</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 4 ä¸ªæ•°æ®</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 5 ä¸ªæ•°æ®</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®1</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 6 ä¸ªæ•°æ®</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®2</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®3</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 7 ä¸ªæ•°æ®</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®4</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 8 ä¸ªæ•°æ®</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®5</span><br><span class="line">å­goroutineï¼Œå†™å‡ºç¬¬ 9 ä¸ªæ•°æ®</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®6</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®7</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®8</span><br><span class="line">	è¯»å–çš„æ•°æ®æ˜¯ï¼š æ•°æ®9</span><br><span class="line">è¯»å®Œäº†ï¼Œï¼Œ false</span><br><span class="line">main...over...</span><br></pre></td></tr></table></figure>

<h2 id="å®šå‘é€šé“"><a href="#å®šå‘é€šé“" class="headerlink" title="å®šå‘é€šé“"></a>å®šå‘é€šé“</h2><h3 id="åŒå‘é€šé“"><a href="#åŒå‘é€šé“" class="headerlink" title="åŒå‘é€šé“"></a>åŒå‘é€šé“</h3><p>é€šé“ï¼Œchannelï¼Œæ˜¯ç”¨äºå®ç°goroutineä¹‹é—´çš„é€šä¿¡çš„ã€‚ä¸€ä¸ªgoroutineå¯ä»¥å‘é€šé“ä¸­å‘é€æ•°æ®ï¼Œå¦ä¸€æ¡goroutineå¯ä»¥ä»è¯¥é€šé“ä¸­è·å–æ•°æ®ã€‚æˆªæ­¢åˆ°ç°åœ¨æˆ‘ä»¬æ‰€å­¦ä¹ çš„é€šé“ï¼Œéƒ½æ˜¯æ—¢å¯ä»¥å‘é€æ•°æ®ï¼Œä¹Ÿå¯ä»¥è¯»å–æ•°æ®ï¼Œæˆ‘ä»¬åˆæŠŠè¿™ç§é€šé“å«åšåŒå‘é€šé“ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">data := &lt;- a <span class="comment">// read from channel a  </span></span><br><span class="line">a &lt;- data <span class="comment">// write to channel a</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>) <span class="comment">// åŒå‘ï¼Œå¯è¯»ï¼Œå¯å†™</span></span><br><span class="line">	done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">bool</span>)</span><br><span class="line">	<span class="keyword">go</span> sendData(ch1, done)</span><br><span class="line">	data := &lt;-ch1 <span class="comment">//é˜»å¡</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;å­goroutineä¼ æ¥ï¼š&quot;</span>, data)</span><br><span class="line">	ch1 &lt;- <span class="string">&quot;æˆ‘æ˜¯mainã€‚ã€‚&quot;</span> <span class="comment">// é˜»å¡</span></span><br><span class="line"></span><br><span class="line">	&lt;-done</span><br><span class="line">	fmt.Println(<span class="string">&quot;main...over....&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­goroutine--&gt;å†™æ•°æ®åˆ°ch1é€šé“ä¸­</span></span><br><span class="line"><span class="comment">// main goroutine--&gt;ä»ch1é€šé“ä¸­å–</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sendData</span><span class="params">(ch1 <span class="keyword">chan</span> <span class="type">string</span>, done <span class="keyword">chan</span> <span class="type">bool</span>)</span></span> &#123;</span><br><span class="line">	ch1 &lt;- <span class="string">&quot;æˆ‘æ˜¯å°æ˜&quot;</span> <span class="comment">// é˜»å¡</span></span><br><span class="line">	data := &lt;-ch1 <span class="comment">// é˜»å¡</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;main goroutineä¼ æ¥ï¼š&quot;</span>, data)</span><br><span class="line"></span><br><span class="line">	done &lt;- <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­goroutineä¼ æ¥ï¼š æˆ‘æ˜¯å°æ˜</span><br><span class="line">main goroutineä¼ æ¥ï¼š æˆ‘æ˜¯mainã€‚ã€‚</span><br><span class="line">main...over....</span><br></pre></td></tr></table></figure>

<h3 id="å•å‘é€šé“"><a href="#å•å‘é€šé“" class="headerlink" title="å•å‘é€šé“"></a>å•å‘é€šé“</h3><p>å•å‘é€šé“ï¼Œä¹Ÿå°±æ˜¯å®šå‘é€šé“ã€‚</p>
<p>ä¹‹å‰æˆ‘ä»¬å­¦ä¹ çš„é€šé“éƒ½æ˜¯åŒå‘é€šé“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›é€šé“æ¥æ”¶æˆ–è€…å‘é€æ•°æ®ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºå•å‘é€šé“ï¼Œè¿™äº›é€šé“åªèƒ½å‘é€æˆ–è€…æ¥æ”¶æ•°æ®ã€‚</p>
<p>åˆ›å»ºä»…èƒ½å‘é€æ•°æ®çš„é€šé“ï¼Œç¤ºä¾‹ä»£ç ï¼š</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		å•å‘ï¼šå®šå‘</span></span><br><span class="line"><span class="comment">		chan &lt;- T,</span></span><br><span class="line"><span class="comment">			åªæ”¯æŒå†™ï¼Œ</span></span><br><span class="line"><span class="comment">		&lt;- chan T,</span></span><br><span class="line"><span class="comment">			åªè¯»</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)<span class="comment">//åŒå‘ï¼Œè¯»ï¼Œå†™</span></span><br><span class="line">	<span class="comment">//ch2 := make(chan &lt;- int) // å•å‘ï¼Œåªå†™ï¼Œä¸èƒ½è¯»</span></span><br><span class="line">	<span class="comment">//ch3 := make(&lt;- chan int) //å•å‘ï¼Œåªè¯»ï¼Œä¸èƒ½å†™</span></span><br><span class="line">	<span class="comment">//ch1 &lt;- 100</span></span><br><span class="line">	<span class="comment">//data :=&lt;-ch1</span></span><br><span class="line">	<span class="comment">//ch2 &lt;- 1000</span></span><br><span class="line">	<span class="comment">//data := &lt;- ch2</span></span><br><span class="line">	<span class="comment">//fmt.Println(data)</span></span><br><span class="line">	<span class="comment">//	&lt;-ch2 //invalid operation: &lt;-ch2 (receive from send-only type chan&lt;- int)</span></span><br><span class="line">	<span class="comment">//ch3 &lt;- 100</span></span><br><span class="line">	<span class="comment">//	&lt;-ch3</span></span><br><span class="line">	<span class="comment">//	ch3 &lt;- 100 //invalid operation: ch3 &lt;- 100 (send to receive-only type &lt;-chan int)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//go fun1(ch2)</span></span><br><span class="line">	<span class="keyword">go</span> fun1(ch1)</span><br><span class="line">	data:= &lt;- ch1</span><br><span class="line">	fmt.Println(<span class="string">&quot;fun1ä¸­å†™å‡ºçš„æ•°æ®æ˜¯ï¼š&quot;</span>,data)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//fun2(ch3)</span></span><br><span class="line">	<span class="keyword">go</span> fun2(ch1)</span><br><span class="line">	ch1 &lt;- <span class="number">200</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;mainã€‚ã€‚overã€‚ã€‚&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¯¥å‡½æ•°æ¥æ”¶ï¼Œåªå†™çš„é€šé“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun1</span><span class="params">(ch <span class="keyword">chan</span> &lt;- <span class="type">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="comment">// å‡½æ•°å†…éƒ¨ï¼Œå¯¹äºchåªèƒ½å†™æ•°æ®ï¼Œä¸èƒ½è¯»æ•°æ®</span></span><br><span class="line">	ch &lt;- <span class="number">100</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;fun1å‡½æ•°ç»“æŸã€‚ã€‚&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun2</span><span class="params">(ch &lt;-<span class="keyword">chan</span> <span class="type">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="comment">//å‡½æ•°å†…éƒ¨ï¼Œå¯¹äºchåªèƒ½è¯»æ•°æ®ï¼Œä¸èƒ½å†™æ•°æ®</span></span><br><span class="line">	data := &lt;- ch</span><br><span class="line">	fmt.Println(<span class="string">&quot;fun2å‡½æ•°ï¼Œä»chä¸­è¯»å–çš„æ•°æ®æ˜¯ï¼š&quot;</span>,data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fun1å‡½æ•°ç»“æŸã€‚ã€‚</span><br><span class="line">fun1ä¸­å†™å‡ºçš„æ•°æ®æ˜¯ï¼š 100</span><br><span class="line">fun2å‡½æ•°ï¼Œä»chä¸­è¯»å–çš„æ•°æ®æ˜¯ï¼š 200</span><br><span class="line">mainã€‚ã€‚overã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="timeåŒ…ä¸­çš„é€šé“ç›¸å…³å‡½æ•°"><a href="#timeåŒ…ä¸­çš„é€šé“ç›¸å…³å‡½æ•°" class="headerlink" title="timeåŒ…ä¸­çš„é€šé“ç›¸å…³å‡½æ•°"></a>timeåŒ…ä¸­çš„é€šé“ç›¸å…³å‡½æ•°</h2><p>ä¸»è¦å°±æ˜¯å®šæ—¶å™¨ï¼Œæ ‡å‡†åº“ä¸­çš„Timerè®©ç”¨æˆ·å¯ä»¥å®šä¹‰è‡ªå·±çš„è¶…æ—¶é€»è¾‘ï¼Œå°¤å…¶æ˜¯åœ¨åº”å¯¹selectå¤„ç†å¤šä¸ªchannelçš„è¶…æ—¶ã€å•channelè¯»å†™çš„è¶…æ—¶ç­‰æƒ…å½¢æ—¶å°¤ä¸ºæ–¹ä¾¿ã€‚</p>
<p>Timeræ˜¯ä¸€æ¬¡æ€§çš„æ—¶é—´è§¦å‘äº‹ä»¶ï¼Œè¿™ç‚¹ä¸Tickerä¸åŒï¼ŒTickeræ˜¯æŒ‰ä¸€å®šæ—¶é—´é—´éš”æŒç»­è§¦å‘æ—¶é—´äº‹ä»¶ã€‚</p>
<p>Timerå¸¸è§çš„åˆ›å»ºæ–¹å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">t:= time.NewTimer(d)</span><br><span class="line">t:= time.AfterFunc(d, f)</span><br><span class="line">c:= time.After(d)</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶è¯´åˆ›å»ºæ–¹å¼ä¸åŒï¼Œä½†æ˜¯åŸç†æ˜¯ç›¸åŒçš„ã€‚</p>
<p>Timeræœ‰3ä¸ªè¦ç´ ï¼š</p>
<blockquote>
<p>å®šæ—¶æ—¶é—´ï¼šå°±æ˜¯é‚£ä¸ªd<br>è§¦å‘åŠ¨ä½œï¼šå°±æ˜¯é‚£ä¸ªf<br>æ—¶é—´channelï¼š ä¹Ÿå°±æ˜¯t.C</p>
</blockquote>
<h3 id="time-NewTimer"><a href="#time-NewTimer" class="headerlink" title="time.NewTimer()"></a>time.NewTimer()</h3><p>NewTimer()åˆ›å»ºä¸€ä¸ªæ–°çš„è®¡æ—¶å™¨ï¼Œè¯¥è®¡æ—¶å™¨å°†åœ¨å…¶é€šé“ä¸Šè‡³å°‘æŒç»­dä¹‹åå‘é€å½“å‰æ—¶é—´ã€‚å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªTimerã€‚</p>
<p>æºä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// NewTimer creates a new Timer that will send</span></span><br><span class="line"><span class="comment">// the current time on its channel after at least duration d.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewTimer</span><span class="params">(d Duration)</span></span> *Timer &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> Time, <span class="number">1</span>)</span><br><span class="line">	t := &amp;Timer&#123;</span><br><span class="line">		C: c,</span><br><span class="line">		r: runtimeTimer&#123;</span><br><span class="line">			when: when(d),</span><br><span class="line">			f:    sendTime,</span><br><span class="line">			arg:  c,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	startTimer(&amp;t.r)</span><br><span class="line">	<span class="keyword">return</span> t</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡æºä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªchannelï¼Œå…³è”çš„ç±»å‹ä¸ºTimeï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªTimerå¹¶è¿”å›ã€‚</p>
<ul>
<li>ç”¨äºåœ¨æŒ‡å®šçš„Durationç±»å‹æ—¶é—´åè°ƒç”¨å‡½æ•°æˆ–è®¡ç®—è¡¨è¾¾å¼ã€‚</li>
<li>å¦‚æœåªæ˜¯æƒ³æŒ‡å®šæ—¶é—´ä¹‹åæ‰§è¡Œ,ä½¿ç”¨time.Sleep()</li>
<li>ä½¿ç”¨NewTimer(),å¯ä»¥è¿”å›çš„Timerç±»å‹åœ¨è®¡æ—¶å™¨åˆ°æœŸä¹‹å‰,å–æ¶ˆè¯¥è®¡æ—¶å™¨</li>
<li>ç›´åˆ°ä½¿ç”¨&lt;-timer.Cå‘é€ä¸€ä¸ªå€¼,è¯¥è®¡æ—¶å™¨æ‰ä¼šè¿‡æœŸ</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		func NewTimer(d Duration) *Timer</span></span><br><span class="line"><span class="comment">			åˆ›å»ºä¸€ä¸ªè®¡æ—¶å™¨ï¼šdæ—¶é—´ä»¥åè§¦å‘ï¼Œgoè§¦å‘è®¡æ—¶å™¨çš„æ–¹æ³•æ¯”è¾ƒç‰¹åˆ«ï¼Œå°±æ˜¯åœ¨è®¡æ—¶å™¨çš„channelä¸­å‘é€å€¼</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//æ–°å»ºä¸€ä¸ªè®¡æ—¶å™¨ï¼štimer</span></span><br><span class="line">	timer := time.NewTimer(<span class="number">3</span> * time.Second)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, timer) <span class="comment">//*time.Timer</span></span><br><span class="line">	fmt.Println(time.Now())   <span class="comment">//2023-07-07 16:26:45.5207225 +0800 CST m=+0.001542901</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ­¤å¤„åœ¨ç­‰å¾…channelä¸­çš„ä¿¡å·ï¼Œæ‰§è¡Œæ­¤æ®µä»£ç æ—¶ä¼šé˜»å¡3ç§’</span></span><br><span class="line">	ch2 := timer.C     <span class="comment">//&lt;-chan time.Time</span></span><br><span class="line">	fmt.Println(&lt;-ch2) <span class="comment">//2023-07-07 16:26:48.5308961 +0800 CST m=+3.011716501</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="timer-Stop"><a href="#timer-Stop" class="headerlink" title="timer.Stop"></a>timer.Stop</h3><p>è®¡æ—¶å™¨åœæ­¢ï¼š</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ–°å»ºè®¡æ—¶å™¨ï¼Œä¸€ç§’åè§¦å‘</span></span><br><span class="line"></span><br><span class="line">	timer2 := time.NewTimer(<span class="number">3</span> * time.Second)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ–°å¼€å¯ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è§¦å‘åçš„äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//ç­‰è§¦å‘æ—¶çš„ä¿¡å·</span></span><br><span class="line"></span><br><span class="line">		&lt;-timer2.C</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;Timer 2 ç»“æŸã€‚ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ç”±äºä¸Šé¢çš„ç­‰å¾…ä¿¡å·æ˜¯åœ¨æ–°çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ä»£ç ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œåœæ‰è®¡æ—¶å™¨</span></span><br><span class="line"></span><br><span class="line">	time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	stop := timer2.Stop()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> stop &#123;</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;Timer 2 åœæ­¢ã€‚ã€‚&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Timer 2 åœæ­¢ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="time-After"><a href="#time-After" class="headerlink" title="time.After()"></a>time.After()</h3><p>åœ¨ç­‰å¾…æŒç»­æ—¶é—´ä¹‹åï¼Œç„¶ååœ¨è¿”å›çš„é€šé“ä¸Šå‘é€å½“å‰æ—¶é—´ã€‚å®ƒç›¸å½“äºNewTimer(d).Cã€‚åœ¨è®¡æ—¶å™¨è§¦å‘ä¹‹å‰ï¼Œåƒåœ¾æ”¶é›†å™¨ä¸ä¼šæ¢å¤åº•å±‚è®¡æ—¶å™¨ã€‚å¦‚æœæ•ˆç‡æœ‰é—®é¢˜ï¼Œä½¿ç”¨NewTimerä»£æ›¿ï¼Œå¹¶è°ƒç”¨Timerã€‚å¦‚æœä¸å†éœ€è¦è®¡æ—¶å™¨ï¼Œè¯·åœæ­¢ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		func After(d Duration) &lt;-chan Time</span></span><br><span class="line"><span class="comment">			è¿”å›ä¸€ä¸ªé€šé“ï¼šchanï¼Œå­˜å‚¨çš„æ˜¯dæ—¶é—´é—´éš”åçš„å½“å‰æ—¶é—´ã€‚</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	ch1 := time.After(<span class="number">3</span> * time.Second) <span class="comment">//3så</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, ch1)            <span class="comment">// &lt;-chan time.Time</span></span><br><span class="line">	fmt.Println(time.Now())            <span class="comment">//2023-07-07 16:36:10.8553299 +0800 CST m=+0.001792901</span></span><br><span class="line">	time2 := &lt;-ch1</span><br><span class="line">	fmt.Println(time2) <span class="comment">//2023-07-07 16:36:13.8602885 +0800 CST m=+3.006751501</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>selectè¯­å¥ä¸CSPæ¨¡å‹</title>
    <url>/2023/07/07/Go/21/</url>
    <content><![CDATA[<h1 id="selectè¯­å¥"><a href="#selectè¯­å¥" class="headerlink" title="selectè¯­å¥"></a>selectè¯­å¥</h1><p>select æ˜¯ Go ä¸­çš„ä¸€ä¸ªæ§åˆ¶ç»“æ„ã€‚select è¯­å¥ç±»ä¼¼äº switch è¯­å¥ï¼Œä½†æ˜¯selectä¼šéšæœºæ‰§è¡Œä¸€ä¸ªå¯è¿è¡Œçš„caseã€‚å¦‚æœæ²¡æœ‰caseå¯è¿è¡Œï¼Œå®ƒå°†é˜»å¡ï¼Œç›´åˆ°æœ‰caseå¯è¿è¡Œã€‚</p>
<h2 id="è¯­æ³•ç»“æ„"><a href="#è¯­æ³•ç»“æ„" class="headerlink" title="è¯­æ³•ç»“æ„"></a>è¯­æ³•ç»“æ„</h2><p>selectè¯­å¥çš„è¯­æ³•ç»“æ„å’Œswitchè¯­å¥å¾ˆç›¸ä¼¼ï¼Œä¹Ÿæœ‰caseè¯­å¥å’Œdefaultè¯­å¥ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> communication clause  :</span><br><span class="line">       statement(s);      </span><br><span class="line">    <span class="keyword">case</span> communication clause  :</span><br><span class="line">       statement(s); </span><br><span class="line">    <span class="comment">/* ä½ å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„ case */</span></span><br><span class="line">    <span class="keyword">default</span> : <span class="comment">/* å¯é€‰ */</span></span><br><span class="line">       statement(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li><p>æ¯ä¸ªcaseéƒ½å¿…é¡»æ˜¯ä¸€ä¸ªé€šä¿¡</p>
</li>
<li><p>æ‰€æœ‰channelè¡¨è¾¾å¼éƒ½ä¼šè¢«æ±‚å€¼</p>
</li>
<li><p>æ‰€æœ‰è¢«å‘é€çš„è¡¨è¾¾å¼éƒ½ä¼šè¢«æ±‚å€¼</p>
</li>
<li><p>å¦‚æœæœ‰å¤šä¸ªcaseéƒ½å¯ä»¥è¿è¡Œï¼Œselectä¼šéšæœºå…¬å¹³åœ°é€‰å‡ºä¸€ä¸ªæ‰§è¡Œã€‚å…¶ä»–ä¸ä¼šæ‰§è¡Œã€‚ </p>
</li>
<li><p>å¦åˆ™ï¼š</p>
<p>å¦‚æœæœ‰defaultå­å¥ï¼Œåˆ™æ‰§è¡Œè¯¥è¯­å¥ã€‚</p>
<p>å¦‚æœæ²¡æœ‰defaultå­—å¥ï¼Œselectå°†é˜»å¡ï¼Œç›´åˆ°æŸä¸ªé€šä¿¡å¯ä»¥è¿è¡Œï¼›Goä¸ä¼šé‡æ–°å¯¹channelæˆ–å€¼è¿›è¡Œæ±‚å€¼ã€‚</p>
</li>
</ul>
<h2 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">		ch2 &lt;- <span class="number">200</span></span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">		ch1 &lt;- <span class="number">100</span></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> num1 := &lt;-ch1:</span><br><span class="line">		fmt.Println(<span class="string">&quot;ch1ä¸­å–æ•°æ®ã€‚ã€‚&quot;</span>, num1)</span><br><span class="line">	<span class="keyword">case</span> num2, ok := &lt;-ch2:</span><br><span class="line">		<span class="keyword">if</span> ok &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;ch2ä¸­å–æ•°æ®ã€‚ã€‚&quot;</span>, num2)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;ch2é€šé“å·²ç»å…³é—­ã€‚ã€‚&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼šå¯èƒ½æ‰§è¡Œç¬¬ä¸€ä¸ªcaseï¼Œæ‰“å°100ï¼Œä¹Ÿå¯èƒ½æ‰§è¡Œç¬¬äºŒä¸ªcaseï¼Œæ‰“å°200ã€‚(å¤šè¿è¡Œå‡ æ¬¡ï¼Œç»“æœå°±ä¸åŒäº†)</p>
<p>selectè¯­å¥ç»“åˆtimeåŒ…çš„å’Œchanç›¸å…³å‡½æ•°ï¼Œç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		ch1 &lt;- <span class="number">100</span></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> &lt;-ch1:</span><br><span class="line">		fmt.Println(<span class="string">&quot;case1å¯ä»¥æ‰§è¡Œã€‚ã€‚&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> &lt;-ch2:</span><br><span class="line">		fmt.Println(<span class="string">&quot;case2å¯ä»¥æ‰§è¡Œã€‚ã€‚&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> &lt;-time.After(<span class="number">3</span> * time.Second):</span><br><span class="line">		fmt.Println(<span class="string">&quot;case3æ‰§è¡Œã€‚ã€‚timeoutã€‚ã€‚&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;æ‰§è¡Œäº†defaultã€‚ã€‚&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼šcase1å¯ä»¥æ‰§è¡Œã€‚ã€‚æˆ–è€…æ‰§è¡Œäº†defaultã€‚ã€‚</p>
<h1 id="Goè¯­è¨€çš„CSPæ¨¡å‹"><a href="#Goè¯­è¨€çš„CSPæ¨¡å‹" class="headerlink" title="Goè¯­è¨€çš„CSPæ¨¡å‹"></a>Goè¯­è¨€çš„CSPæ¨¡å‹</h1><p>goè¯­è¨€çš„æœ€å¤§ä¸¤ä¸ªäº®ç‚¹ï¼Œä¸€ä¸ªæ˜¯goroutineï¼Œä¸€ä¸ªå°±æ˜¯chanäº†ã€‚äºŒè€…åˆä½“çš„å…¸å‹åº”ç”¨CSPï¼ŒåŸºæœ¬å°±æ˜¯å¤§å®¶è®¤å¯çš„å¹¶è¡Œå¼€å‘ç¥å™¨ï¼Œç®€åŒ–äº†å¹¶è¡Œç¨‹åºçš„å¼€å‘éš¾åº¦ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹CSPã€‚ </p>
<h2 id="CSPæ˜¯ä»€ä¹ˆ"><a href="#CSPæ˜¯ä»€ä¹ˆ" class="headerlink" title="CSPæ˜¯ä»€ä¹ˆ"></a>CSPæ˜¯ä»€ä¹ˆ</h2><p>CSP æ˜¯ Communicating Sequential Process çš„ç®€ç§°ï¼Œä¸­æ–‡å¯ä»¥å«åšé€šä¿¡é¡ºåºè¿›ç¨‹ï¼Œæ˜¯ä¸€ç§å¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å¹¶å‘æ•°æ®æ¨¡å‹ï¼Œæ˜¯ä¸Šä¸ªä¸–çºªä¸ƒåå¹´ä»£æå‡ºçš„ï¼Œç”¨äºæè¿°ä¸¤ä¸ªç‹¬ç«‹çš„å¹¶å‘å®ä½“é€šè¿‡å…±äº«çš„é€šè®¯ channel(ç®¡é“)è¿›è¡Œé€šä¿¡çš„å¹¶å‘æ¨¡å‹ã€‚ç›¸å¯¹äºActoræ¨¡å‹ï¼ŒCSPä¸­channelæ˜¯ç¬¬ä¸€ç±»å¯¹è±¡ï¼Œå®ƒä¸å…³æ³¨å‘é€æ¶ˆæ¯çš„å®ä½“ï¼Œè€Œå…³æ³¨ä¸å‘é€æ¶ˆæ¯æ—¶ä½¿ç”¨çš„channelã€‚</p>
<p>ä¸¥æ ¼æ¥è¯´ï¼ŒCSP æ˜¯ä¸€é—¨å½¢å¼è¯­è¨€ï¼ˆç±»ä¼¼äº â„· calculusï¼‰ï¼Œç”¨äºæè¿°å¹¶å‘ç³»ç»Ÿä¸­çš„äº’åŠ¨æ¨¡å¼ï¼Œä¹Ÿå› æ­¤æˆä¸ºä¸€ä¼—é¢å‘å¹¶å‘çš„ç¼–ç¨‹è¯­è¨€çš„ç†è®ºæºå¤´ï¼Œå¹¶è¡ç”Ÿå‡ºäº† Occam&#x2F;Limbo&#x2F;Golangâ€¦</p>
<p>è€Œå…·ä½“åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Golangï¼Œå…¶å®åªç”¨åˆ°äº† CSP çš„å¾ˆå°ä¸€éƒ¨åˆ†ï¼Œå³ç†è®ºä¸­çš„ Process&#x2F;Channelï¼ˆå¯¹åº”åˆ°è¯­è¨€ä¸­çš„ goroutine&#x2F;channelï¼‰ï¼šè¿™ä¸¤ä¸ªå¹¶å‘åŸè¯­ä¹‹é—´æ²¡æœ‰ä»å±å…³ç³»ï¼Œ Process å¯ä»¥è®¢é˜…ä»»æ„ä¸ª Channelï¼ŒChannel ä¹Ÿå¹¶ä¸å…³å¿ƒæ˜¯å“ªä¸ª Process åœ¨åˆ©ç”¨å®ƒè¿›è¡Œé€šä¿¡ï¼›Process å›´ç»• Channel è¿›è¡Œè¯»å†™ï¼Œå½¢æˆä¸€å¥—æœ‰åºé˜»å¡å’Œå¯é¢„æµ‹çš„å¹¶å‘æ¨¡å‹ã€‚</p>
<h2 id="Golang-CSP"><a href="#Golang-CSP" class="headerlink" title="Golang CSP"></a>Golang CSP</h2><p>ä¸ä¸»æµè¯­è¨€é€šè¿‡å…±äº«å†…å­˜æ¥è¿›è¡Œå¹¶å‘æ§åˆ¶æ–¹å¼ä¸åŒï¼ŒGo è¯­è¨€é‡‡ç”¨äº† CSP æ¨¡å¼ã€‚è¿™æ˜¯ä¸€ç§ç”¨äºæè¿°ä¸¤ä¸ªç‹¬ç«‹çš„å¹¶å‘å®ä½“é€šè¿‡å…±äº«çš„é€šè®¯ Channelï¼ˆç®¡é“ï¼‰è¿›è¡Œé€šä¿¡çš„å¹¶å‘æ¨¡å‹ã€‚</p>
<p>Golang å°±æ˜¯å€Ÿç”¨CSPæ¨¡å‹çš„ä¸€äº›æ¦‚å¿µä¸ºä¹‹å®ç°å¹¶å‘è¿›è¡Œç†è®ºæ”¯æŒï¼Œå…¶å®ä»å®é™…ä¸Šå‡ºå‘ï¼Œgoè¯­è¨€å¹¶æ²¡æœ‰å®Œå…¨å®ç°CSPæ¨¡å‹çš„æ‰€æœ‰ç†è®ºï¼Œä»…ä»…æ˜¯å€Ÿç”¨äº† processå’Œchannelè¿™ä¸¤ä¸ªæ¦‚å¿µã€‚processæ˜¯åœ¨goè¯­è¨€ä¸Šçš„è¡¨ç°å°±æ˜¯ goroutine æ˜¯å®é™…å¹¶å‘æ‰§è¡Œçš„å®ä½“ï¼Œæ¯ä¸ªå®ä½“ä¹‹é—´æ˜¯é€šè¿‡channelé€šè®¯æ¥å®ç°æ•°æ®å…±äº«ã€‚</p>
<p>Goè¯­è¨€çš„CSPæ¨¡å‹æ˜¯ç”±åç¨‹Goroutineä¸é€šé“Channelå®ç°ï¼š</p>
<ul>
<li>Goåç¨‹goroutine: æ˜¯ä¸€ç§è½»é‡çº¿ç¨‹ï¼Œå®ƒä¸æ˜¯æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ï¼Œè€Œæ˜¯å°†ä¸€ä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹åˆ†æ®µä½¿ç”¨ï¼Œé€šè¿‡è°ƒåº¦å™¨å®ç°åä½œå¼è°ƒåº¦ã€‚æ˜¯ä¸€ç§ç»¿è‰²çº¿ç¨‹ï¼Œå¾®çº¿ç¨‹ï¼Œå®ƒä¸Coroutineåç¨‹ä¹Ÿæœ‰åŒºåˆ«ï¼Œèƒ½å¤Ÿåœ¨å‘ç°å µå¡åå¯åŠ¨æ–°çš„å¾®çº¿ç¨‹ã€‚</li>
<li>é€šé“channel: ç±»ä¼¼Unixçš„Pipeï¼Œç”¨äºåç¨‹ä¹‹é—´é€šè®¯å’ŒåŒæ­¥ã€‚åç¨‹ä¹‹é—´è™½ç„¶è§£è€¦ï¼Œä½†æ˜¯å®ƒä»¬å’ŒChannelæœ‰ç€è€¦åˆã€‚</li>
</ul>
<h2 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h2><p>Goroutine å’Œ channel æ˜¯ Go è¯­è¨€å¹¶å‘ç¼–ç¨‹çš„ä¸¤å¤§åŸºçŸ³ã€‚Goroutine ç”¨äºæ‰§è¡Œå¹¶å‘ä»»åŠ¡ï¼Œchannel ç”¨äº goroutine ä¹‹é—´çš„åŒæ­¥ã€é€šä¿¡ã€‚</p>
<p>Channel åœ¨ gouroutine é—´æ¶èµ·äº†ä¸€æ¡ç®¡é“ï¼Œåœ¨ç®¡é“é‡Œä¼ è¾“æ•°æ®ï¼Œå®ç° gouroutine é—´çš„é€šä¿¡ï¼›ç”±äºå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼›channel è¿˜æä¾› â€œå…ˆè¿›å…ˆå‡ºâ€ çš„ç‰¹æ€§ï¼›å®ƒè¿˜èƒ½å½±å“ goroutine çš„é˜»å¡å’Œå”¤é†’ã€‚</p>
<p>ç›¸ä¿¡å¤§å®¶ä¸€å®šè§è¿‡ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>Do not communicate by sharing memory; instead, share memory by communicating.</p>
</blockquote>
<p>ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œè¦é€šè¿‡é€šä¿¡æ¥å®ç°å†…å­˜å…±äº«ã€‚</p>
<p>è¿™å°±æ˜¯ Go çš„å¹¶å‘å“²å­¦ï¼Œå®ƒä¾èµ– CSP æ¨¡å‹ï¼ŒåŸºäº channel å®ç°ã€‚</p>
<p><strong>channel å®ç° CSP</strong></p>
<p>Channel æ˜¯ Go è¯­è¨€ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„ç±»å‹ï¼Œæ˜¯ Go é‡Œçš„ç¬¬ä¸€å¯¹è±¡ã€‚é€šè¿‡ channelï¼ŒGo å®ç°äº†é€šè¿‡é€šä¿¡æ¥å®ç°å†…å­˜å…±äº«ã€‚Channel æ˜¯åœ¨å¤šä¸ª goroutine ä¹‹é—´ä¼ é€’æ•°æ®å’ŒåŒæ­¥çš„é‡è¦æ‰‹æ®µã€‚</p>
<p>ä½¿ç”¨åŸå­å‡½æ•°ã€è¯»å†™é”å¯ä»¥ä¿è¯èµ„æºçš„å…±äº«è®¿é—®å®‰å…¨ï¼Œä½†ä½¿ç”¨ channel æ›´ä¼˜é›…ã€‚</p>
<p>channel å­—é¢æ„ä¹‰æ˜¯ â€œé€šé“â€ï¼Œç±»ä¼¼äº Linux ä¸­çš„ç®¡é“ã€‚å£°æ˜ channel çš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">chan</span> T <span class="comment">// å£°æ˜ä¸€ä¸ªåŒå‘é€šé“</span></span><br><span class="line"><span class="keyword">chan</span>&lt;- T <span class="comment">// å£°æ˜ä¸€ä¸ªåªèƒ½ç”¨äºå‘é€çš„é€šé“</span></span><br><span class="line">&lt;-<span class="keyword">chan</span> T <span class="comment">// å£°æ˜ä¸€ä¸ªåªèƒ½ç”¨äºæ¥æ”¶çš„é€šé“</span></span><br></pre></td></tr></table></figure>

<p>å•å‘é€šé“çš„å£°æ˜ï¼Œç”¨ <code>&lt;-</code> æ¥è¡¨ç¤ºï¼Œå®ƒæŒ‡æ˜é€šé“çš„æ–¹å‘ã€‚ä½ åªè¦æ˜ç™½ï¼Œä»£ç çš„ä¹¦å†™é¡ºåºæ˜¯ä»å·¦åˆ°å³å°±é©¬ä¸Šèƒ½æŒæ¡é€šé“çš„æ–¹å‘æ˜¯æ€æ ·çš„ã€‚</p>
<p>å› ä¸º channel æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥åœ¨å®ƒè¢«åˆå§‹åŒ–ä¹‹å‰ï¼Œå®ƒçš„å€¼æ˜¯ nilï¼Œchannel ä½¿ç”¨ make å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚å¯ä»¥å‘å®ƒä¼ é€’ä¸€ä¸ª int å€¼ï¼Œä»£è¡¨ channel ç¼“å†²åŒºçš„å¤§å°ï¼ˆå®¹é‡ï¼‰ï¼Œæ„é€ å‡ºæ¥çš„æ˜¯ä¸€ä¸ªç¼“å†²å‹çš„ channelï¼›ä¸ä¼ æˆ–ä¼  0 çš„ï¼Œæ„é€ çš„å°±æ˜¯ä¸€ä¸ªéç¼“å†²å‹çš„ channelã€‚</p>
<p>ä¸¤è€…æœ‰ä¸€äº›å·®åˆ«ï¼šéç¼“å†²å‹ channel æ— æ³•ç¼“å†²å…ƒç´ ï¼Œå¯¹å®ƒçš„æ“ä½œä¸€å®šé¡ºåºæ˜¯ â€œå‘é€ -&gt; æ¥æ”¶ -&gt; å‘é€ -&gt; æ¥æ”¶ -&gt; â€¦â€¦â€ï¼Œå¦‚æœæƒ³è¿ç»­å‘ä¸€ä¸ªéç¼“å†² chan å‘é€ 2 ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”æ²¡æœ‰æ¥æ”¶çš„è¯ï¼Œç¬¬ä¸€æ¬¡ä¸€å®šä¼šè¢«é˜»å¡ï¼›å¯¹äºç¼“å†²å‹ channel çš„æ“ä½œï¼Œåˆ™è¦ â€œå®½æ¾â€ ä¸€äº›ï¼Œæ¯•ç«Ÿæ˜¯å¸¦äº† â€œç¼“å†²â€ å…‰ç¯ã€‚</p>
<p>å¯¹ chan çš„å‘é€å’Œæ¥æ”¶æ“ä½œéƒ½ä¼šåœ¨ç¼–è¯‘æœŸé—´è½¬æ¢æˆä¸ºåº•å±‚çš„å‘é€æ¥æ”¶å‡½æ•°ã€‚</p>
<p>Channel åˆ†ä¸ºä¸¤ç§ï¼šå¸¦ç¼“å†²ã€ä¸å¸¦ç¼“å†²ã€‚å¯¹ä¸å¸¦ç¼“å†²çš„ channel è¿›è¡Œçš„æ“ä½œå®é™…ä¸Šå¯ä»¥çœ‹ä½œ â€œåŒæ­¥æ¨¡å¼â€ï¼Œå¸¦ç¼“å†²çš„åˆ™ç§°ä¸º â€œå¼‚æ­¥æ¨¡å¼â€ã€‚</p>
<p>åŒæ­¥æ¨¡å¼ä¸‹ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹è¦åŒæ­¥å°±ç»ªï¼Œåªæœ‰åœ¨ä¸¤è€…éƒ½ ready çš„æƒ…å†µä¸‹ï¼Œæ•°æ®æ‰èƒ½åœ¨ä¸¤è€…é—´ä¼ è¾“ï¼ˆåé¢ä¼šçœ‹åˆ°ï¼Œå®é™…ä¸Šå°±æ˜¯å†…å­˜æ‹·è´ï¼‰ã€‚å¦åˆ™ï¼Œä»»æ„ä¸€æ–¹å…ˆè¡Œè¿›è¡Œå‘é€æˆ–æ¥æ”¶æ“ä½œï¼Œéƒ½ä¼šè¢«æŒ‚èµ·ï¼Œç­‰å¾…å¦ä¸€æ–¹çš„å‡ºç°æ‰èƒ½è¢«å”¤é†’ã€‚</p>
<p>å¼‚æ­¥æ¨¡å¼ä¸‹ï¼Œåœ¨ç¼“å†²æ§½å¯ç”¨çš„æƒ…å†µä¸‹ï¼ˆæœ‰å‰©ä½™å®¹é‡ï¼‰ï¼Œå‘é€å’Œæ¥æ”¶æ“ä½œéƒ½å¯ä»¥é¡ºåˆ©è¿›è¡Œã€‚å¦åˆ™ï¼Œæ“ä½œçš„ä¸€æ–¹ï¼ˆå¦‚å†™å…¥ï¼‰åŒæ ·ä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°å‡ºç°ç›¸åæ“ä½œï¼ˆå¦‚æ¥æ”¶ï¼‰æ‰ä¼šè¢«å”¤é†’ã€‚</p>
<p>å°ç»“ä¸€ä¸‹ï¼šåŒæ­¥æ¨¡å¼ä¸‹ï¼Œå¿…é¡»è¦ä½¿å‘é€æ–¹å’Œæ¥æ”¶æ–¹é…å¯¹ï¼Œæ“ä½œæ‰ä¼šæˆåŠŸï¼Œå¦åˆ™ä¼šè¢«é˜»å¡ï¼›å¼‚æ­¥æ¨¡å¼ä¸‹ï¼Œç¼“å†²æ§½è¦æœ‰å‰©ä½™å®¹é‡ï¼Œæ“ä½œæ‰ä¼šæˆåŠŸï¼Œå¦åˆ™ä¹Ÿä¼šè¢«é˜»å¡ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒCSP æ¨¡å‹ç”±å¹¶å‘æ‰§è¡Œçš„å®ä½“ï¼ˆçº¿ç¨‹æˆ–è€…è¿›ç¨‹æˆ–è€…åç¨‹ï¼‰æ‰€ç»„æˆï¼Œå®ä½“ä¹‹é—´é€šè¿‡å‘é€æ¶ˆæ¯è¿›è¡Œé€šä¿¡ï¼Œ<br>è¿™é‡Œå‘é€æ¶ˆæ¯æ—¶ä½¿ç”¨çš„å°±æ˜¯é€šé“ï¼Œæˆ–è€…å« channelã€‚</p>
<p>CSP æ¨¡å‹çš„å…³é”®æ˜¯å…³æ³¨ channelï¼Œè€Œä¸å…³æ³¨å‘é€æ¶ˆæ¯çš„å®ä½“ã€‚Go è¯­è¨€å®ç°äº† CSP éƒ¨åˆ†ç†è®ºï¼Œgoroutine å¯¹åº” CSP ä¸­å¹¶å‘æ‰§è¡Œçš„å®ä½“ï¼Œchannel ä¹Ÿå°±å¯¹åº”ç€ CSP ä¸­çš„ channelã€‚</p>
<h2 id="Goroutine"><a href="#Goroutine" class="headerlink" title="Goroutine"></a>Goroutine</h2><p>Goroutine æ˜¯å®é™…å¹¶å‘æ‰§è¡Œçš„å®ä½“ï¼Œå®ƒåº•å±‚æ˜¯ä½¿ç”¨åç¨‹(coroutine)å®ç°å¹¶å‘ï¼Œcoroutineæ˜¯ä¸€ç§è¿è¡Œåœ¨ç”¨æˆ·æ€çš„ç”¨æˆ·çº¿ç¨‹ï¼Œç±»ä¼¼äº greenthreadï¼Œgoåº•å±‚é€‰æ‹©ä½¿ç”¨coroutineçš„å‡ºå‘ç‚¹æ˜¯å› ä¸ºï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç”¨æˆ·ç©ºé—´ é¿å…äº†å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åˆ‡æ¢å¯¼è‡´çš„æˆæœ¬</li>
<li>å¯ä»¥ç”±è¯­è¨€å’Œæ¡†æ¶å±‚è¿›è¡Œè°ƒåº¦</li>
<li>æ›´å°çš„æ ˆç©ºé—´å…è®¸åˆ›å»ºå¤§é‡çš„å®ä¾‹</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ç¬¬äºŒæ¡ ç”¨æˆ·ç©ºé—´çº¿ç¨‹çš„è°ƒåº¦ä¸æ˜¯ç”±æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ï¼Œåƒåœ¨java 1.3ä¸­ä½¿ç”¨çš„greenthreadçš„æ˜¯ç”±JVMç»Ÿä¸€è°ƒåº¦çš„(åjavaå·²ç»æ”¹ä¸ºå†…æ ¸çº¿ç¨‹)ï¼Œè¿˜æœ‰åœ¨rubyä¸­çš„fiber(åŠåç¨‹) æ˜¯éœ€è¦åœ¨é‡æ–°ä¸­è‡ªå·±è¿›è¡Œè°ƒåº¦çš„ï¼Œè€Œgoroutineæ˜¯åœ¨golangå±‚é¢æä¾›äº†è°ƒåº¦å™¨ï¼Œå¹¶ä¸”å¯¹ç½‘ç»œIOåº“è¿›è¡Œäº†å°è£…ï¼Œå±è”½äº†å¤æ‚çš„ç»†èŠ‚ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„è¯­æ³•å…³é”®å­—æ”¯æŒï¼Œç®€åŒ–äº†å¹¶å‘ç¨‹åºç¼–å†™çš„æˆæœ¬ã€‚</p>
<h2 id="Goroutine-è°ƒåº¦å™¨"><a href="#Goroutine-è°ƒåº¦å™¨" class="headerlink" title="Goroutine è°ƒåº¦å™¨"></a>Goroutine è°ƒåº¦å™¨</h2><p>Goå¹¶å‘è°ƒåº¦: G-P-Mæ¨¡å‹</p>
<p>åœ¨æ“ä½œç³»ç»Ÿæä¾›çš„å†…æ ¸çº¿ç¨‹ä¹‹ä¸Šï¼ŒGoæ­å»ºäº†ä¸€ä¸ªç‰¹æœ‰çš„ä¸¤çº§çº¿ç¨‹æ¨¡å‹ã€‚goroutineæœºåˆ¶å®ç°äº†M : Nçš„çº¿ç¨‹æ¨¡å‹ï¼Œgoroutineæœºåˆ¶æ˜¯åç¨‹ï¼ˆcoroutineï¼‰çš„ä¸€ç§å®ç°ï¼Œgolangå†…ç½®çš„è°ƒåº¦å™¨ï¼Œå¯ä»¥è®©å¤šæ ¸CPUä¸­æ¯ä¸ªCPUæ‰§è¡Œä¸€ä¸ªåç¨‹ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/goroutine22.png"></p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>Golang çš„ channel å°† goroutine éš”ç¦»å¼€ï¼Œå¹¶å‘ç¼–ç¨‹çš„æ—¶å€™å¯ä»¥å°†æ³¨æ„åŠ›æ”¾åœ¨ channel ä¸Šã€‚åœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼Œè¿™ä¸ªå’Œæ¶ˆæ¯é˜Ÿåˆ—çš„è§£è€¦åŠŸèƒ½è¿˜æ˜¯æŒºåƒçš„ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œè¿˜æ˜¯æ¥çœ‹çœ‹ channel çš„æºç å§ï¼Œå¯¹äºæ›´æ·±å…¥åœ°ç†è§£ channel è¿˜æ˜¯æŒºæœ‰ç”¨çš„ã€‚</p>
<p>Go é€šè¿‡ channel å®ç° CSP é€šä¿¡æ¨¡å‹ï¼Œä¸»è¦ç”¨äº goroutine ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’å’Œäº‹ä»¶é€šçŸ¥ã€‚</p>
<p>æœ‰äº† channel å’Œ goroutine ä¹‹åï¼ŒGo çš„å¹¶å‘ç¼–ç¨‹å˜å¾—å¼‚å¸¸å®¹æ˜“å’Œå®‰å…¨ï¼Œå¾—ä»¥è®©ç¨‹åºå‘˜æŠŠæ³¨æ„åŠ›ç•™åˆ°ä¸šåŠ¡ä¸Šå»ï¼Œå®ç°å¼€å‘æ•ˆç‡çš„æå‡ã€‚</p>
<p>è¦çŸ¥é“ï¼ŒæŠ€æœ¯å¹¶ä¸æ˜¯æœ€é‡è¦çš„ï¼Œå®ƒåªæ˜¯å®ç°ä¸šåŠ¡çš„å·¥å…·ã€‚ä¸€é—¨é«˜æ•ˆçš„å¼€å‘è¯­è¨€è®©ä½ æŠŠèŠ‚çœä¸‹æ¥çš„æ—¶é—´ï¼Œç•™ç€å»åšæ›´æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œæ¯”å¦‚å†™å†™æ–‡ç« ã€‚</p>
]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>åå°„è¯¦è§£</title>
    <url>/2023/07/07/Go/22/</url>
    <content><![CDATA[<h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>å…ˆçœ‹å®˜æ–¹Docä¸­Rob Pikeç»™å‡ºçš„å…³äºåå°„çš„å®šä¹‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Reflection in computing is the ability of a program to examine its own structure, particularly through types; itâ€™s a form of metaprogramming. Itâ€™s also a great source of confusion.</span><br><span class="line">(åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œåå°„æ˜¯ä¸€ç§è®©ç¨‹åºâ€”â€”ä¸»è¦æ˜¯é€šè¿‡ç±»å‹â€”â€”ç†è§£å…¶è‡ªèº«ç»“æ„çš„ä¸€ç§èƒ½åŠ›ã€‚å®ƒæ˜¯å…ƒç¼–ç¨‹çš„ç»„æˆä¹‹ä¸€ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ä¸€å¤§å¼•äººå›°æƒ‘çš„éš¾é¢˜ã€‚)</span><br></pre></td></tr></table></figure>

<p>ç»´åŸºç™¾ç§‘ä¸­çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œåå°„æ˜¯æŒ‡è®¡ç®—æœºç¨‹åºåœ¨è¿è¡Œæ—¶ï¼ˆRun timeï¼‰å¯ä»¥è®¿é—®ã€æ£€æµ‹å’Œä¿®æ”¹å®ƒæœ¬èº«çŠ¶æ€æˆ–è¡Œä¸ºçš„ä¸€ç§èƒ½åŠ›ã€‚ç”¨æ¯”å–»æ¥è¯´ï¼Œåå°„å°±æ˜¯ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™èƒ½å¤Ÿâ€œè§‚å¯Ÿâ€å¹¶ä¸”ä¿®æ”¹è‡ªå·±çš„è¡Œä¸ºã€‚</p>
</blockquote>
<p>ä¸åŒè¯­è¨€çš„åå°„æ¨¡å‹ä¸å°½ç›¸åŒï¼Œæœ‰äº›è¯­è¨€è¿˜ä¸æ”¯æŒåå°„ã€‚ã€ŠGo è¯­è¨€åœ£ç»ã€‹ä¸­æ˜¯è¿™æ ·å®šä¹‰åå°„çš„ï¼š</p>
<blockquote>
<p>Go è¯­è¨€æä¾›äº†ä¸€ç§æœºåˆ¶åœ¨è¿è¡Œæ—¶æ›´æ–°å˜é‡å’Œæ£€æŸ¥å®ƒä»¬çš„å€¼ã€è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æ—¶å¹¶ä¸çŸ¥é“è¿™äº›å˜é‡çš„å…·ä½“ç±»å‹ï¼Œè¿™ç§°ä¸ºåå°„æœºåˆ¶ã€‚</p>
</blockquote>
<p>ä¸ºä»€ä¹ˆè¦ç”¨åå°„</p>
<p>éœ€è¦åå°„çš„ 2 ä¸ªå¸¸è§åœºæ™¯ï¼š</p>
<ol>
<li>æœ‰æ—¶ä½ éœ€è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å¹¶ä¸çŸ¥é“ä¼ ç»™ä½ çš„å‚æ•°ç±»å‹æ˜¯ä»€ä¹ˆï¼Œå¯èƒ½æ˜¯æ²¡çº¦å®šå¥½ï¼›ä¹Ÿå¯èƒ½æ˜¯ä¼ å…¥çš„ç±»å‹å¾ˆå¤šï¼Œè¿™äº›ç±»å‹å¹¶ä¸èƒ½ç»Ÿä¸€è¡¨ç¤ºã€‚è¿™æ—¶åå°„å°±ä¼šç”¨çš„ä¸Šäº†ã€‚</li>
<li>æœ‰æ—¶å€™éœ€è¦æ ¹æ®æŸäº›æ¡ä»¶å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œæ¯”å¦‚æ ¹æ®ç”¨æˆ·çš„è¾“å…¥æ¥å†³å®šã€‚è¿™æ—¶å°±éœ€è¦å¯¹å‡½æ•°å’Œå‡½æ•°çš„å‚æ•°è¿›è¡Œåå°„ï¼Œåœ¨è¿è¡ŒæœŸé—´åŠ¨æ€åœ°æ‰§è¡Œå‡½æ•°ã€‚</li>
</ol>
<p>ä½†æ˜¯å¯¹äºåå°„ï¼Œè¿˜æ˜¯æœ‰å‡ ç‚¹ä¸å¤ªå»ºè®®ä½¿ç”¨åå°„çš„ç†ç”±ï¼š</p>
<ol>
<li>ä¸åå°„ç›¸å…³çš„ä»£ç ï¼Œç»å¸¸æ˜¯éš¾ä»¥é˜…è¯»çš„ã€‚åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œä»£ç å¯è¯»æ€§ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æŒ‡æ ‡ã€‚</li>
<li>Go è¯­è¨€ä½œä¸ºä¸€é—¨é™æ€è¯­è¨€ï¼Œç¼–ç è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨èƒ½æå‰å‘ç°ä¸€äº›ç±»å‹é”™è¯¯ï¼Œä½†æ˜¯å¯¹äºåå°„ä»£ç æ˜¯æ— èƒ½ä¸ºåŠ›çš„ã€‚æ‰€ä»¥åŒ…å«åå°„ç›¸å…³çš„ä»£ç ï¼Œå¾ˆå¯èƒ½ä¼šè¿è¡Œå¾ˆä¹…ï¼Œæ‰ä¼šå‡ºé”™ï¼Œè¿™æ—¶å€™ç»å¸¸æ˜¯ç›´æ¥ panicï¼Œå¯èƒ½ä¼šé€ æˆä¸¥é‡çš„åæœã€‚</li>
<li>åå°„å¯¹æ€§èƒ½å½±å“è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œæ¯”æ­£å¸¸ä»£ç è¿è¡Œé€Ÿåº¦æ…¢ä¸€åˆ°ä¸¤ä¸ªæ•°é‡çº§ã€‚æ‰€ä»¥ï¼Œå¯¹äºä¸€ä¸ªé¡¹ç›®ä¸­å¤„äºè¿è¡Œæ•ˆç‡å…³é”®ä½ç½®çš„ä»£ç ï¼Œå°½é‡é¿å…ä½¿ç”¨åå°„ç‰¹æ€§ã€‚</li>
</ol>
<h2 id="ç›¸å…³åŸºç¡€"><a href="#ç›¸å…³åŸºç¡€" class="headerlink" title="ç›¸å…³åŸºç¡€"></a>ç›¸å…³åŸºç¡€</h2><p>åå°„æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿæˆ‘ä»¬ä»¥å‰å­¦ä¹ è¿‡ interfaceï¼Œå®ƒæ˜¯ Go è¯­è¨€å®ç°æŠ½è±¡çš„ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ã€‚å½“å‘æ¥å£å˜é‡èµ‹äºˆä¸€ä¸ªå®ä½“ç±»å‹çš„æ—¶å€™ï¼Œæ¥å£ä¼šå­˜å‚¨å®ä½“çš„ç±»å‹ä¿¡æ¯ï¼Œåå°„å°±æ˜¯é€šè¿‡æ¥å£çš„ç±»å‹ä¿¡æ¯å®ç°çš„ï¼Œåå°„å»ºç«‹åœ¨ç±»å‹çš„åŸºç¡€ä¸Šã€‚</p>
<p>Go è¯­è¨€åœ¨ reflect åŒ…é‡Œå®šä¹‰äº†å„ç§ç±»å‹ï¼Œå®ç°äº†åå°„çš„å„ç§å‡½æ•°ï¼Œé€šè¿‡å®ƒä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æµ‹ç±»å‹çš„ä¿¡æ¯ã€æ”¹å˜ç±»å‹çš„å€¼ã€‚åœ¨è¿›è¡Œæ›´åŠ è¯¦ç»†çš„äº†è§£ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°æ¸©ä¹ ä¸€ä¸‹Goè¯­è¨€ç›¸å…³çš„ä¸€äº›ç‰¹æ€§ï¼Œæ‰€è°“æ¸©æ•…çŸ¥æ–°ï¼Œä»è¿™äº›ç‰¹æ€§ä¸­äº†è§£å…¶åå°„æœºåˆ¶æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚</p>
<table>
<thead>
<tr>
<th>ç‰¹ç‚¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>goè¯­è¨€æ˜¯é™æ€ç±»å‹è¯­è¨€ã€‚</td>
<td>ç¼–è¯‘æ—¶ç±»å‹å·²ç»ç¡®å®šï¼Œæ¯”å¦‚å¯¹å·²åŸºæœ¬æ•°æ®ç±»å‹çš„å†å®šä¹‰åçš„ç±»å‹ï¼Œåå°„æ—¶å€™éœ€è¦ç¡®è®¤è¿”å›çš„æ˜¯ä½•ç§ç±»å‹ã€‚</td>
</tr>
<tr>
<td>ç©ºæ¥å£interface{}</td>
<td>goçš„åå°„æœºåˆ¶æ˜¯è¦é€šè¿‡æ¥å£æ¥è¿›è¡Œçš„ï¼Œè€Œç±»ä¼¼äºJavaçš„Objectçš„ç©ºæ¥å£å¯ä»¥å’Œä»»ä½•ç±»å‹è¿›è¡Œäº¤äº’ï¼Œå› æ­¤å¯¹åŸºæœ¬æ•°æ®ç±»å‹ç­‰çš„åå°„ä¹Ÿç›´æ¥åˆ©ç”¨äº†è¿™ä¸€ç‰¹ç‚¹</td>
</tr>
<tr>
<td>Goè¯­è¨€çš„ç±»å‹ï¼š</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li><p>å˜é‡åŒ…æ‹¬ï¼ˆtype, valueï¼‰ä¸¤éƒ¨åˆ†</p>
<blockquote>
<p>ç†è§£è¿™ä¸€ç‚¹å°±çŸ¥é“ä¸ºä»€ä¹ˆnil !&#x3D; niläº†</p>
</blockquote>
</li>
<li><p>type åŒ…æ‹¬ static typeå’Œconcrete type. ç®€å•æ¥è¯´ static typeæ˜¯ä½ åœ¨ç¼–ç æ˜¯çœ‹è§çš„ç±»å‹(å¦‚intã€string)ï¼Œconcrete typeæ˜¯runtimeç³»ç»Ÿçœ‹è§çš„ç±»å‹</p>
</li>
<li><p>ç±»å‹æ–­è¨€èƒ½å¦æˆåŠŸï¼Œå–å†³äºå˜é‡çš„concrete typeï¼Œè€Œä¸æ˜¯static typeã€‚å› æ­¤ï¼Œä¸€ä¸ª readerå˜é‡å¦‚æœå®ƒçš„concrete typeä¹Ÿå®ç°äº†writeæ–¹æ³•çš„è¯ï¼Œå®ƒä¹Ÿå¯ä»¥è¢«ç±»å‹æ–­è¨€ä¸ºwriterã€‚</p>
</li>
</ul>
<p>Goè¯­è¨€çš„åå°„å°±æ˜¯å»ºç«‹åœ¨ç±»å‹ä¹‹ä¸Šçš„ï¼ŒGolangçš„æŒ‡å®šç±»å‹çš„å˜é‡çš„ç±»å‹æ˜¯é™æ€çš„ï¼ˆä¹Ÿå°±æ˜¯æŒ‡å®šintã€stringè¿™äº›çš„å˜é‡ï¼Œå®ƒçš„typeæ˜¯static typeï¼‰ï¼Œåœ¨åˆ›å»ºå˜é‡çš„æ—¶å€™å°±å·²ç»ç¡®å®šï¼Œåå°„ä¸»è¦ä¸Golangçš„interfaceç±»å‹ç›¸å…³ï¼ˆå®ƒçš„typeæ˜¯concrete typeï¼‰ï¼Œåªæœ‰interfaceç±»å‹æ‰æœ‰åå°„ä¸€è¯´ã€‚</p>
<p>åœ¨Golangçš„å®ç°ä¸­ï¼Œæ¯ä¸ªinterfaceå˜é‡éƒ½æœ‰ä¸€ä¸ªå¯¹åº”pairï¼Œpairä¸­è®°å½•äº†å®é™…å˜é‡çš„å€¼å’Œç±»å‹:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">(value, <span class="keyword">type</span>)</span><br></pre></td></tr></table></figure>

<p>valueæ˜¯å®é™…å˜é‡å€¼ï¼Œtypeæ˜¯å®é™…å˜é‡çš„ç±»å‹ã€‚ä¸€ä¸ªinterface{}ç±»å‹çš„å˜é‡åŒ…å«äº†2ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å€¼çš„ç±»å‹ã€å¯¹åº”concrete typeã€‘ï¼Œå¦å¤–ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å®é™…çš„å€¼ã€å¯¹åº”valueã€‘ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåˆ›å»ºç±»å‹ä¸º*os.Fileçš„å˜é‡ï¼Œç„¶åå°†å…¶èµ‹ç»™ä¸€ä¸ªæ¥å£å˜é‡rï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">tty, err := os.OpenFile(<span class="string">&quot;/dev/tty&quot;</span>, os.O_RDWR, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> r io.Reader</span><br><span class="line">r = tty</span><br></pre></td></tr></table></figure>

<p>æ¥å£å˜é‡rçš„pairä¸­å°†è®°å½•å¦‚ä¸‹ä¿¡æ¯ï¼š(tty, *os.File)ï¼Œè¿™ä¸ªpairåœ¨æ¥å£å˜é‡çš„è¿ç»­èµ‹å€¼è¿‡ç¨‹ä¸­æ˜¯ä¸å˜çš„ï¼Œå°†æ¥å£å˜é‡rèµ‹ç»™å¦ä¸€ä¸ªæ¥å£å˜é‡w:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> w io.Writer</span><br><span class="line">w = r.(io.Writer)</span><br></pre></td></tr></table></figure>

<p>æ¥å£å˜é‡wçš„pairä¸rçš„pairç›¸åŒï¼Œéƒ½æ˜¯:(tty, *os.File)ï¼Œå³ä½¿wæ˜¯ç©ºæ¥å£ç±»å‹ï¼Œpairä¹Ÿæ˜¯ä¸å˜çš„ã€‚</p>
<p>interfaceåŠå…¶pairçš„å­˜åœ¨ï¼Œæ˜¯Golangä¸­å®ç°åå°„çš„å‰æï¼Œç†è§£äº†pairï¼Œå°±æ›´å®¹æ˜“ç†è§£åå°„ã€‚åå°„å°±æ˜¯ç”¨æ¥æ£€æµ‹å­˜å‚¨åœ¨æ¥å£å˜é‡å†…éƒ¨(å€¼valueï¼›ç±»å‹concrete type) pairå¯¹çš„ä¸€ç§æœºåˆ¶ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦ç†è§£ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µ Type å’Œ Valueï¼Œå®ƒä»¬ä¹Ÿæ˜¯ Goè¯­è¨€åŒ…ä¸­ reflect ç©ºé—´é‡Œæœ€é‡è¦çš„ä¸¤ä¸ªç±»å‹ã€‚</p>
<h2 id="åå°„çš„ä½¿ç”¨"><a href="#åå°„çš„ä½¿ç”¨" class="headerlink" title="åå°„çš„ä½¿ç”¨"></a>åå°„çš„ä½¿ç”¨</h2><p>æˆ‘ä»¬ä¸€èˆ¬ç”¨åˆ°çš„åŒ…æ˜¯reflectåŒ…ã€‚</p>
<h3 id="TypeOfå’ŒValueOf"><a href="#TypeOfå’ŒValueOf" class="headerlink" title="TypeOfå’ŒValueOf"></a>TypeOfå’ŒValueOf</h3><p>æ—¢ç„¶åå°„å°±æ˜¯ç”¨æ¥æ£€æµ‹å­˜å‚¨åœ¨æ¥å£å˜é‡å†…éƒ¨(å€¼valueï¼›ç±»å‹concrete type) pairå¯¹çš„ä¸€ç§æœºåˆ¶ã€‚é‚£ä¹ˆåœ¨Golangçš„reflectåå°„åŒ…ä¸­æœ‰ä»€ä¹ˆæ ·çš„æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥è·å–åˆ°å˜é‡å†…éƒ¨çš„ä¿¡æ¯å‘¢ï¼Ÿ å®ƒæä¾›äº†ä¸¤ç§ç±»å‹ï¼ˆæˆ–è€…è¯´ä¸¤ä¸ªæ–¹æ³•ï¼‰è®©æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„è®¿é—®æ¥å£å˜é‡å†…å®¹ï¼Œåˆ†åˆ«æ˜¯reflect.ValueOf() å’Œ reflect.TypeOf()ï¼Œçœ‹çœ‹å®˜æ–¹çš„è§£é‡Šï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ValueOf returns a new Value initialized to the concrete value</span></span><br><span class="line"><span class="comment">// stored in the interface i.  ValueOf(nil) returns the zero </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ValueOf</span><span class="params">(i <span class="keyword">interface</span>&#123;&#125;)</span></span> Value &#123;...&#125;</span><br><span class="line"></span><br><span class="line">ç¿»è¯‘ä¸€ä¸‹ï¼šValueOfç”¨æ¥è·å–è¾“å…¥å‚æ•°æ¥å£ä¸­çš„æ•°æ®çš„å€¼ï¼Œå¦‚æœæ¥å£ä¸ºç©ºåˆ™è¿”å›<span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeOf returns the reflection Type that represents the dynamic type of i.</span></span><br><span class="line"><span class="comment">// If i is a nil interface value, TypeOf returns nil.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TypeOf</span><span class="params">(i <span class="keyword">interface</span>&#123;&#125;)</span></span> Type &#123;...&#125;</span><br><span class="line"></span><br><span class="line">ç¿»è¯‘ä¸€ä¸‹ï¼šTypeOfç”¨æ¥åŠ¨æ€è·å–è¾“å…¥å‚æ•°æ¥å£ä¸­çš„å€¼çš„ç±»å‹ï¼Œå¦‚æœæ¥å£ä¸ºç©ºåˆ™è¿”å›<span class="literal">nil</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>reflect.TypeOf()æ˜¯è·å–pairä¸­çš„typeï¼Œreflect.ValueOf()è·å–pairä¸­çš„valueã€‚</p>
<p>é¦–å…ˆéœ€è¦æŠŠå®ƒè½¬åŒ–æˆreflectå¯¹è±¡(reflect.Typeæˆ–è€…reflect.Valueï¼Œæ ¹æ®ä¸åŒçš„æƒ…å†µè°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">t := reflect.TypeOf(i) <span class="comment">//å¾—åˆ°ç±»å‹çš„å…ƒæ•°æ®,é€šè¿‡tæˆ‘ä»¬èƒ½è·å–ç±»å‹å®šä¹‰é‡Œé¢çš„æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">v := reflect.ValueOf(i) <span class="comment">//å¾—åˆ°å®é™…çš„å€¼ï¼Œé€šè¿‡væˆ‘ä»¬è·å–å­˜å‚¨åœ¨é‡Œé¢çš„å€¼ï¼Œè¿˜å¯ä»¥å»æ”¹å˜å€¼</span></span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//åå°„æ“ä½œï¼šé€šè¿‡åå°„ï¼Œå¯ä»¥è·å–ä¸€ä¸ªæ¥å£ç±»å‹å˜é‡çš„ ç±»å‹å’Œæ•°å€¼</span></span><br><span class="line">	<span class="keyword">var</span> x = <span class="number">3.14</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;type:&quot;</span>, reflect.TypeOf(x))   <span class="comment">//type: float64</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;value:&quot;</span>, reflect.ValueOf(x)) <span class="comment">//value: 3.4</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;-------------------&quot;</span>)</span><br><span class="line">	<span class="comment">//æ ¹æ®åå°„çš„å€¼ï¼Œæ¥è·å–å¯¹åº”çš„ç±»å‹å’Œæ•°å€¼</span></span><br><span class="line">	v := reflect.ValueOf(x)</span><br><span class="line">	fmt.Println(<span class="string">&quot;kind is float64: &quot;</span>, v.Kind() == reflect.Float64)</span><br><span class="line">	fmt.Println(<span class="string">&quot;type : &quot;</span>, v.Type())</span><br><span class="line">	fmt.Println(<span class="string">&quot;value : &quot;</span>, v.Float())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type: float64</span><br><span class="line">value: 3.14</span><br><span class="line">-------------------</span><br><span class="line">kind is float64:  true</span><br><span class="line">type :  float64</span><br><span class="line">value :  3.14</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜</p>
<ol>
<li>reflect.TypeOfï¼š ç›´æ¥ç»™åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„typeç±»å‹ï¼Œå¦‚float64ã€intã€å„ç§pointerã€struct ç­‰ç­‰çœŸå®çš„ç±»å‹</li>
<li>reflect.ValueOfï¼šç›´æ¥ç»™åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„å…·ä½“çš„å€¼ï¼Œå¦‚1.2345è¿™ä¸ªå…·ä½“æ•°å€¼ï¼Œæˆ–è€…ç±»ä¼¼&amp;{1 â€œAllen.Wuâ€ 25} è¿™æ ·çš„ç»“æ„ä½“structçš„å€¼</li>
<li>ä¹Ÿå°±æ˜¯è¯´æ˜åå°„å¯ä»¥å°†â€œæ¥å£ç±»å‹å˜é‡â€è½¬æ¢ä¸ºâ€œåå°„ç±»å‹å¯¹è±¡â€ï¼Œåå°„ç±»å‹æŒ‡çš„æ˜¯reflect.Typeå’Œreflect.Valueè¿™ä¸¤ç§</li>
</ol>
<p>Type å’Œ Value éƒ½åŒ…å«äº†å¤§é‡çš„æ–¹æ³•ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæœ‰ç”¨çš„æ–¹æ³•åº”è¯¥æ˜¯ Kindï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›è¯¥ç±»å‹çš„å…·ä½“ä¿¡æ¯ï¼šUintã€Float64 ç­‰ã€‚Value ç±»å‹è¿˜åŒ…å«äº†ä¸€ç³»åˆ—ç±»å‹æ–¹æ³•ï¼Œæ¯”å¦‚ Int()ï¼Œç”¨äºè¿”å›å¯¹åº”çš„å€¼ã€‚ä»¥ä¸‹æ˜¯Kindçš„ç§ç±»ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// A Kind represents the specific kind of type that a Type represents.</span></span><br><span class="line"><span class="comment">// The zero Kind is not a valid kind.</span></span><br><span class="line"><span class="keyword">type</span> Kind <span class="type">uint</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	Invalid Kind = <span class="literal">iota</span></span><br><span class="line">	Bool</span><br><span class="line">	Int</span><br><span class="line">	Int8</span><br><span class="line">	Int16</span><br><span class="line">	Int32</span><br><span class="line">	Int64</span><br><span class="line">	Uint</span><br><span class="line">	Uint8</span><br><span class="line">	Uint16</span><br><span class="line">	Uint32</span><br><span class="line">	Uint64</span><br><span class="line">	Uintptr</span><br><span class="line">	Float32</span><br><span class="line">	Float64</span><br><span class="line">	Complex64</span><br><span class="line">	Complex128</span><br><span class="line">	Array</span><br><span class="line">	Chan</span><br><span class="line">	Func</span><br><span class="line">	Interface</span><br><span class="line">	Map</span><br><span class="line">	Ptr</span><br><span class="line">	Slice</span><br><span class="line">	String</span><br><span class="line">	Struct</span><br><span class="line">	UnsafePointer</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="ä»relfect-Valueä¸­è·å–æ¥å£interfaceçš„ä¿¡æ¯"><a href="#ä»relfect-Valueä¸­è·å–æ¥å£interfaceçš„ä¿¡æ¯" class="headerlink" title="ä»relfect.Valueä¸­è·å–æ¥å£interfaceçš„ä¿¡æ¯"></a>ä»relfect.Valueä¸­è·å–æ¥å£interfaceçš„ä¿¡æ¯</h3><p>å½“æ‰§è¡Œreflect.ValueOf(interface)ä¹‹åï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªç±»å‹ä¸ºâ€relfect.Valueâ€å˜é‡ï¼Œå¯ä»¥é€šè¿‡å®ƒæœ¬èº«çš„Interface()æ–¹æ³•è·å¾—æ¥å£å˜é‡çš„çœŸå®å†…å®¹ï¼Œç„¶åå¯ä»¥é€šè¿‡ç±»å‹åˆ¤æ–­è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢ä¸ºåŸæœ‰çœŸå®ç±»å‹ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯èƒ½æ˜¯å·²çŸ¥åŸæœ‰ç±»å‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æœªçŸ¥åŸæœ‰ç±»å‹ï¼Œå› æ­¤ï¼Œä¸‹é¢åˆ†ä¸¤ç§æƒ…å†µè¿›è¡Œè¯´æ˜ã€‚</p>
<h4 id="å·²çŸ¥åŸæœ‰ç±»å‹ã€è¿›è¡Œâ€œå¼ºåˆ¶è½¬æ¢â€ã€‘"><a href="#å·²çŸ¥åŸæœ‰ç±»å‹ã€è¿›è¡Œâ€œå¼ºåˆ¶è½¬æ¢â€ã€‘" class="headerlink" title="å·²çŸ¥åŸæœ‰ç±»å‹ã€è¿›è¡Œâ€œå¼ºåˆ¶è½¬æ¢â€ã€‘"></a>å·²çŸ¥åŸæœ‰ç±»å‹ã€è¿›è¡Œâ€œå¼ºåˆ¶è½¬æ¢â€ã€‘</h4><p>å·²çŸ¥ç±»å‹åè½¬æ¢ä¸ºå…¶å¯¹åº”çš„ç±»å‹çš„åšæ³•å¦‚ä¸‹ï¼Œç›´æ¥é€šè¿‡Interfaceæ–¹æ³•ç„¶åå¼ºåˆ¶è½¬æ¢ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">realValue := value.Interface().(å·²çŸ¥çš„ç±»å‹)</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> num <span class="type">float64</span> = <span class="number">1.2345</span></span><br><span class="line"></span><br><span class="line">	pointer := reflect.ValueOf(&amp;num)</span><br><span class="line">	value := reflect.ValueOf(num)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¯ä»¥ç†è§£ä¸ºâ€œå¼ºåˆ¶è½¬æ¢â€ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ—¶å€™ï¼Œè½¬æ¢çš„æ—¶å€™ï¼Œå¦‚æœè½¬æ¢çš„ç±»å‹ä¸å®Œå…¨ç¬¦åˆï¼Œåˆ™ç›´æ¥panic</span></span><br><span class="line">	<span class="comment">// Golang å¯¹ç±»å‹è¦æ±‚éå¸¸ä¸¥æ ¼ï¼Œç±»å‹ä¸€å®šè¦å®Œå…¨ç¬¦åˆ</span></span><br><span class="line">	<span class="comment">// å¦‚ä¸‹ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯*float64ï¼Œä¸€ä¸ªæ˜¯float64ï¼Œå¦‚æœå¼„æ··ï¼Œåˆ™ä¼španic</span></span><br><span class="line">	convertPointer := pointer.Interface().(*<span class="type">float64</span>)</span><br><span class="line">	convertValue := value.Interface().(<span class="type">float64</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(convertPointer)</span><br><span class="line">	fmt.Println(convertValue)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0xc000098000</span><br><span class="line">1.2345</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜</p>
<ol>
<li>è½¬æ¢çš„æ—¶å€™ï¼Œå¦‚æœè½¬æ¢çš„ç±»å‹ä¸å®Œå…¨ç¬¦åˆï¼Œåˆ™ç›´æ¥panicï¼Œç±»å‹è¦æ±‚éå¸¸ä¸¥æ ¼ï¼</li>
<li>è½¬æ¢çš„æ—¶å€™ï¼Œè¦åŒºåˆ†æ˜¯æŒ‡é’ˆç±»å‹è¿˜æ˜¯éæŒ‡é’ˆç±»å‹</li>
<li>ä¹Ÿå°±æ˜¯è¯´åå°„å¯ä»¥å°†â€œåå°„ç±»å‹å¯¹è±¡â€å†é‡æ–°è½¬æ¢ä¸ºâ€œæ¥å£ç±»å‹å˜é‡â€</li>
</ol>
<h4 id="æœªçŸ¥åŸæœ‰ç±»å‹ã€éå†æ¢æµ‹å…¶Filedã€‘"><a href="#æœªçŸ¥åŸæœ‰ç±»å‹ã€éå†æ¢æµ‹å…¶Filedã€‘" class="headerlink" title="æœªçŸ¥åŸæœ‰ç±»å‹ã€éå†æ¢æµ‹å…¶Filedã€‘"></a>æœªçŸ¥åŸæœ‰ç±»å‹ã€éå†æ¢æµ‹å…¶Filedã€‘</h4><p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½å¹¶ä¸çŸ¥é“å…¶å…·ä½“ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œè¯¥å¦‚ä½•åšå‘¢ï¼Ÿéœ€è¦æˆ‘ä»¬è¿›è¡Œéå†æ¢æµ‹å…¶Filedæ¥å¾—çŸ¥ï¼Œç¤ºä¾‹å¦‚ä¸‹:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">	Sex  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> Say(msg <span class="type">string</span>) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;hello,&quot;</span>, msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> PrintInfo() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;å§“åï¼š%sï¼Œå¹´é¾„ï¼š%dï¼Œæ€§åˆ«ï¼š%s\n&quot;</span>, p.Name, p.Age, p.Sex)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := Person&#123;<span class="string">&quot;ç‹äºŒç‹—&quot;</span>, <span class="number">30</span>, <span class="string">&quot;ç”·&quot;</span>&#125;</span><br><span class="line">	GetMessage(p1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GetMessage è·å–inputçš„ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetMessage</span><span class="params">(input <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	getType := reflect.TypeOf(input)             <span class="comment">//å…ˆè·å–inputçš„ç±»å‹</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;get Type is :&quot;</span>, getType.Name()) <span class="comment">//Person</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;get Kind is :&quot;</span>, getType.Kind()) <span class="comment">//struct</span></span><br><span class="line"></span><br><span class="line">	getValue := reflect.ValueOf(input)</span><br><span class="line">	fmt.Println(<span class="string">&quot;get all Fields is :&quot;</span>, getValue) <span class="comment">//&#123;ç‹äºŒç‹— 30 ç”·&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//è·å–å­—æ®µ</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		step1ï¼šå…ˆè·å–Typeå¯¹è±¡ï¼šreflect.Typeï¼Œ</span></span><br><span class="line"><span class="comment">			NumField()</span></span><br><span class="line"><span class="comment">			Field(index)</span></span><br><span class="line"><span class="comment">		step2ï¼šé€šè¿‡Filed()è·å–æ¯ä¸€ä¸ªFiledå­—æ®µ</span></span><br><span class="line"><span class="comment">		step3ï¼šInterface()ï¼Œå¾—åˆ°å¯¹åº”çš„Value</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; getType.NumField(); i++ &#123;</span><br><span class="line">		filed := getType.Field(i)</span><br><span class="line">		value := getValue.Field(i).Interface() <span class="comment">//è·å–ç¬¬ä¸€ä¸ªæ•°å€¼</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;å­—æ®µåç§°ï¼š%sï¼Œå­—æ®µç±»å‹ï¼š%sï¼Œå­—æ®µæ•°å€¼ï¼š%v\n&quot;</span>, filed.Name, filed.Type, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è·å–æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; getType.NumMethod(); i++ &#123;</span><br><span class="line">		method := getType.Method(i)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;æ–¹æ³•åç§°ï¼š%sï¼Œæ–¹æ³•ç±»å‹ï¼š%v\n&quot;</span>, method.Name, method.Type)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">get Type is : Person</span><br><span class="line">get Kind is : struct</span><br><span class="line">get all Fields is : &#123;ç‹äºŒç‹— 30 ç”·&#125;</span><br><span class="line">å­—æ®µåç§°ï¼šNameï¼Œå­—æ®µç±»å‹ï¼šstringï¼Œå­—æ®µæ•°å€¼ï¼šç‹äºŒç‹—</span><br><span class="line">å­—æ®µåç§°ï¼šAgeï¼Œå­—æ®µç±»å‹ï¼šintï¼Œå­—æ®µæ•°å€¼ï¼š30</span><br><span class="line">å­—æ®µåç§°ï¼šSexï¼Œå­—æ®µç±»å‹ï¼šstringï¼Œå­—æ®µæ•°å€¼ï¼šç”·</span><br><span class="line">æ–¹æ³•åç§°ï¼šPrintInfoï¼Œæ–¹æ³•ç±»å‹ï¼šfunc(main.Person)</span><br><span class="line">æ–¹æ³•åç§°ï¼šSayï¼Œæ–¹æ³•ç±»å‹ï¼šfunc(main.Person, string)</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜</p>
<p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥å¾—çŸ¥è·å–æœªçŸ¥ç±»å‹çš„interfaceçš„å…·ä½“å˜é‡åŠå…¶ç±»å‹çš„æ­¥éª¤ä¸ºï¼š</p>
<ol>
<li>å…ˆè·å–interfaceçš„reflect.Typeï¼Œç„¶åé€šè¿‡NumFieldè¿›è¡Œéå†</li>
<li>å†é€šè¿‡reflect.Typeçš„Fieldè·å–å…¶Field</li>
<li>æœ€åé€šè¿‡Fieldçš„Interface()å¾—åˆ°å¯¹åº”çš„value</li>
</ol>
<p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥å¾—çŸ¥è·å–æœªçŸ¥ç±»å‹çš„interfaceçš„æ‰€å±æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰çš„æ­¥éª¤ä¸ºï¼š</p>
<ol>
<li>å…ˆè·å–interfaceçš„reflect.Typeï¼Œç„¶åé€šè¿‡NumMethodè¿›è¡Œéå†</li>
<li>å†åˆ†åˆ«é€šè¿‡reflect.Typeçš„Methodè·å–å¯¹åº”çš„çœŸå®çš„æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰</li>
<li>æœ€åå¯¹ç»“æœå–å…¶Nameå’ŒTypeå¾—çŸ¥å…·ä½“çš„æ–¹æ³•å</li>
<li>ä¹Ÿå°±æ˜¯è¯´åå°„å¯ä»¥å°†â€œåå°„ç±»å‹å¯¹è±¡â€å†é‡æ–°è½¬æ¢ä¸ºâ€œæ¥å£ç±»å‹å˜é‡â€</li>
<li>struct æˆ–è€… struct çš„åµŒå¥—éƒ½æ˜¯ä¸€æ ·çš„åˆ¤æ–­å¤„ç†æ–¹å¼</li>
</ol>
<h3 id="é€šè¿‡reflect-ValueOfè®¾ç½®å®é™…å˜é‡çš„å€¼"><a href="#é€šè¿‡reflect-ValueOfè®¾ç½®å®é™…å˜é‡çš„å€¼" class="headerlink" title="é€šè¿‡reflect.ValueOfè®¾ç½®å®é™…å˜é‡çš„å€¼"></a>é€šè¿‡reflect.ValueOfè®¾ç½®å®é™…å˜é‡çš„å€¼</h3><p>reflect.Valueæ˜¯é€šè¿‡reflect.ValueOf(X)è·å¾—çš„ï¼Œåªæœ‰å½“Xæ˜¯æŒ‡é’ˆçš„æ—¶å€™ï¼Œæ‰å¯ä»¥é€šè¿‡reflec.Valueä¿®æ”¹å®é™…å˜é‡Xçš„å€¼ï¼Œå³ï¼šè¦ä¿®æ”¹åå°„ç±»å‹çš„å¯¹è±¡å°±ä¸€å®šè¦ä¿è¯å…¶å€¼æ˜¯â€œaddressableâ€çš„ã€‚</p>
<p>è¿™é‡Œéœ€è¦ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v Value)</span></span> Elem() Value</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šèµ·æ¥å°±æ˜¯ï¼šElemè¿”å›æ¥å£våŒ…å«çš„å€¼æˆ–æŒ‡é’ˆvæŒ‡å‘çš„å€¼ã€‚å¦‚æœvçš„ç±»å‹ä¸æ˜¯interfaceæˆ–ptrï¼Œå®ƒä¼šææ…Œã€‚å¦‚æœvä¸ºé›¶ï¼Œåˆ™è¿”å›é›¶å€¼ã€‚</p>
<p>å¦‚æœä½ çš„å˜é‡æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€mapã€sliceã€channelã€Arrayã€‚é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨reflect.Typeof(v).Elem()æ¥ç¡®å®šåŒ…å«çš„ç±»å‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">//1.â€œæ¥å£ç±»å‹å˜é‡â€=&gt;â€œåå°„ç±»å‹å¯¹è±¡â€</span></span><br><span class="line">	<span class="keyword">var</span> circle <span class="type">float64</span> = <span class="number">6.28</span></span><br><span class="line">	<span class="keyword">var</span> icir <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	icir = circle</span><br><span class="line">	fmt.Println(<span class="string">&quot;Reflect : circle.Value = &quot;</span>, reflect.ValueOf(icir)) <span class="comment">//Reflect : circle.Value =  6.28</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Reflect : circle.Type  = &quot;</span>, reflect.TypeOf(icir)) <span class="comment">//Reflect : circle.Type =  float64</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2. â€œåå°„ç±»å‹å¯¹è±¡â€=&gt;â€œæ¥å£ç±»å‹å˜é‡</span></span><br><span class="line">	v1 := reflect.ValueOf(icir)</span><br><span class="line">	fmt.Println(v1) <span class="comment">//6.28</span></span><br><span class="line">	fmt.Println(v1.Interface()) <span class="comment">//6.28</span></span><br><span class="line"></span><br><span class="line">	y := v1.Interface().(<span class="type">float64</span>)</span><br><span class="line">	fmt.Println(y) <span class="comment">//6.28</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//v1.SetFloat(4.13) //panic: reflect: reflect.Value.SetFloat using unaddressable value</span></span><br><span class="line">	<span class="comment">//fmt.Println(v1)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.ä¿®æ”¹</span></span><br><span class="line">	fmt.Println(v1.CanSet())<span class="comment">//æ˜¯å¦å¯ä»¥è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">	v2 := reflect.ValueOf(&amp;circle) <span class="comment">// ä¼ é€’æŒ‡é’ˆæ‰èƒ½ä¿®æ”¹</span></span><br><span class="line">	v4:=v2.Elem()<span class="comment">// ä¼ é€’æŒ‡é’ˆæ‰èƒ½ä¿®æ”¹,è·å–Elem()æ‰èƒ½ä¿®æ”¹</span></span><br><span class="line">	fmt.Println(v4.CanSet()) <span class="comment">//true</span></span><br><span class="line">	v4.SetFloat(<span class="number">3.14</span>)</span><br><span class="line">	fmt.Println(circle) <span class="comment">//3.14</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Reflect : circle.Value =  6.28</span><br><span class="line">Reflect : circle.Type  =  float64</span><br><span class="line">6.28</span><br><span class="line">6.28</span><br><span class="line">6.28</span><br><span class="line">false</span><br><span class="line">true</span><br><span class="line">3.14</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜</p>
<ol>
<li>éœ€è¦ä¼ å…¥çš„å‚æ•°æ˜¯* float64è¿™ä¸ªæŒ‡é’ˆï¼Œç„¶åå¯ä»¥é€šè¿‡pointer.Elem()å»è·å–æ‰€æŒ‡å‘çš„Valueï¼Œ<strong>æ³¨æ„ä¸€å®šè¦æ˜¯æŒ‡é’ˆ</strong>ã€‚</li>
<li>å¦‚æœä¼ å…¥çš„å‚æ•°ä¸æ˜¯æŒ‡é’ˆï¼Œè€Œæ˜¯å˜é‡ï¼Œé‚£ä¹ˆ<ul>
<li>é€šè¿‡Elemè·å–åŸå§‹å€¼å¯¹åº”çš„å¯¹è±¡åˆ™ç›´æ¥panic</li>
<li>é€šè¿‡CanSetæ–¹æ³•æŸ¥è¯¢æ˜¯å¦å¯ä»¥è®¾ç½®è¿”å›false</li>
</ul>
</li>
<li>newValue.CantSet()è¡¨ç¤ºæ˜¯å¦å¯ä»¥é‡æ–°è®¾ç½®å…¶å€¼ï¼Œå¦‚æœè¾“å‡ºçš„æ˜¯trueåˆ™å¯ä¿®æ”¹ï¼Œå¦åˆ™ä¸èƒ½ä¿®æ”¹ï¼Œä¿®æ”¹å®Œä¹‹åå†è¿›è¡Œæ‰“å°å‘ç°çœŸçš„å·²ç»ä¿®æ”¹äº†ã€‚</li>
<li>reflect.Value.Elem() è¡¨ç¤ºè·å–åŸå§‹å€¼å¯¹åº”çš„åå°„å¯¹è±¡ï¼Œåªæœ‰åŸå§‹å¯¹è±¡æ‰èƒ½ä¿®æ”¹ï¼Œå½“å‰åå°„å¯¹è±¡æ˜¯ä¸èƒ½ä¿®æ”¹çš„</li>
<li>ä¹Ÿå°±æ˜¯è¯´å¦‚æœè¦ä¿®æ”¹åå°„ç±»å‹å¯¹è±¡ï¼Œå…¶å€¼å¿…é¡»æ˜¯â€œaddressableâ€ã€å¯¹åº”çš„è¦ä¼ å…¥çš„æ˜¯æŒ‡é’ˆï¼ŒåŒæ—¶è¦é€šè¿‡Elemæ–¹æ³•è·å–åŸå§‹å€¼å¯¹åº”çš„åå°„å¯¹è±¡ã€‘</li>
<li>struct æˆ–è€… struct çš„åµŒå¥—éƒ½æ˜¯ä¸€æ ·çš„åˆ¤æ–­å¤„ç†æ–¹å¼</li>
</ol>
<h3 id="é€šè¿‡reflect-ValueOfæ¥è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨"><a href="#é€šè¿‡reflect-ValueOfæ¥è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨" class="headerlink" title="é€šè¿‡reflect.ValueOfæ¥è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨"></a>é€šè¿‡reflect.ValueOfæ¥è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨</h3><p>è¿™ç®—æ˜¯ä¸€ä¸ªé«˜çº§ç”¨æ³•äº†ï¼Œå‰é¢æˆ‘ä»¬åªè¯´åˆ°å¯¹ç±»å‹ã€å˜é‡çš„å‡ ç§åå°„çš„ç”¨æ³•ï¼ŒåŒ…æ‹¬å¦‚ä½•è·å–å…¶å€¼ã€å…¶ç±»å‹ã€å¦‚æœé‡æ–°è®¾ç½®æ–°å€¼ã€‚ä½†æ˜¯åœ¨å·¥ç¨‹åº”ç”¨ä¸­ï¼Œå¦å¤–ä¸€ä¸ªå¸¸ç”¨å¹¶ä¸”å±äºé«˜çº§çš„ç”¨æ³•ï¼Œå°±æ˜¯é€šè¿‡reflectæ¥è¿›è¡Œæ–¹æ³•ã€å‡½æ•°ã€‘çš„è°ƒç”¨ã€‚æ¯”å¦‚æˆ‘ä»¬è¦åšæ¡†æ¶å·¥ç¨‹çš„æ—¶å€™ï¼Œéœ€è¦å¯ä»¥éšæ„æ‰©å±•æ–¹æ³•ï¼Œæˆ–è€…è¯´ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šè¿‡ä»€ä¹ˆæ‰‹æ®µæ¥æ‰©å±•è®©ç”¨æˆ·èƒ½å¤Ÿè‡ªå®šä¹‰å‘¢ï¼Ÿå…³é”®ç‚¹åœ¨äºç”¨æˆ·çš„è‡ªå®šä¹‰æ–¹æ³•æ˜¯æœªå¯çŸ¥çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡reflectæ¥æå®šã€‚</p>
<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age <span class="type">int</span></span><br><span class="line">	Sex <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> Say(msg <span class="type">string</span>)&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;hello,&quot;</span>,msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> PrintInfo()&#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;å§“åï¼š%sï¼Œå¹´é¾„ï¼š%dï¼Œæ€§åˆ«ï¼š%s\n&quot;</span>,p.Name,p.Age,p.Sex)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> Test(i,j <span class="type">int</span>,s <span class="type">string</span>)&#123;</span><br><span class="line">	fmt.Println(i,j,s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	é€šè¿‡åå°„æ¥è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨</span></span><br><span class="line"><span class="comment">	æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">	step1ï¼šæ¥å£å˜é‡--&gt;å¯¹è±¡åå°„å¯¹è±¡ï¼šValue</span></span><br><span class="line"><span class="comment">	step2ï¼šè·å–å¯¹åº”çš„æ–¹æ³•å¯¹è±¡ï¼šMethodByName()</span></span><br><span class="line"><span class="comment">	step3ï¼šå°†æ–¹æ³•å¯¹è±¡è¿›è¡Œè°ƒç”¨ï¼šCall()</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	 p1 := Person&#123;<span class="string">&quot;Ruby&quot;</span>,<span class="number">20</span>,<span class="string">&quot;ç”·&quot;</span>&#125;</span><br><span class="line">	 value :=reflect.ValueOf(p1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;kind : %s, type:%s\n&quot;</span>,value.Kind(),value.Type()) <span class="comment">//kind : struct, type:main.Person</span></span><br><span class="line"></span><br><span class="line">	methodValue1 :=value.MethodByName(<span class="string">&quot;PrintInfo&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;kind:%s,type:%s\n&quot;</span>,methodValue1.Kind(),methodValue1.Type()) <span class="comment">//kind:func,type:func()</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ²¡æœ‰å‚æ•°ï¼Œè¿›è¡Œè°ƒç”¨</span></span><br><span class="line">	methodValue1.Call(<span class="literal">nil</span>) <span class="comment">//æ²¡æœ‰å‚æ•°ï¼Œç›´æ¥å†™nil</span></span><br><span class="line"></span><br><span class="line">	args1 := <span class="built_in">make</span>([]reflect.Value,<span class="number">0</span>) <span class="comment">//æˆ–è€…åˆ›å»ºä¸€ä¸ªç©ºçš„åˆ‡ç‰‡ä¹Ÿå¯ä»¥</span></span><br><span class="line">	methodValue1.Call(args1)</span><br><span class="line"></span><br><span class="line">	methodValue2:=value.MethodByName(<span class="string">&quot;Say&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;kind:%s, type:%s\n&quot;</span>,methodValue2.Kind(),methodValue2.Type()) <span class="comment">//kind:func, type:func(string)</span></span><br><span class="line">	args2:=[]reflect.Value&#123;reflect.ValueOf(<span class="string">&quot;åå°„æœºåˆ¶&quot;</span>)&#125;</span><br><span class="line">	methodValue2.Call(args2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	methodValue3:=value.MethodByName(<span class="string">&quot;Test&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;kind:%s,type:%s\n&quot;</span>,methodValue3.Kind(),methodValue3.Type())<span class="comment">//kind:func,type:func(int, int, string)</span></span><br><span class="line">	args3:=[]reflect.Value&#123;reflect.ValueOf(<span class="number">100</span>),reflect.ValueOf(<span class="number">200</span>),reflect.ValueOf(<span class="string">&quot;Hello World&quot;</span>)&#125;</span><br><span class="line">	methodValue3.Call(args3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kind : struct, type:main.Person</span><br><span class="line">kind:func,type:func()</span><br><span class="line">å§“åï¼šRubyï¼Œå¹´é¾„ï¼š20ï¼Œæ€§åˆ«ï¼šç”·</span><br><span class="line">å§“åï¼šRubyï¼Œå¹´é¾„ï¼š20ï¼Œæ€§åˆ«ï¼šç”·</span><br><span class="line">kind:func, type:func(string)</span><br><span class="line">hello, åå°„æœºåˆ¶</span><br><span class="line">kind:func,type:func(int, int, string)</span><br><span class="line">100 200 Hello World</span><br></pre></td></tr></table></figure>

<h3 id="é€šè¿‡åå°„ï¼Œè°ƒç”¨å‡½æ•°"><a href="#é€šè¿‡åå°„ï¼Œè°ƒç”¨å‡½æ•°" class="headerlink" title="é€šè¿‡åå°„ï¼Œè°ƒç”¨å‡½æ•°"></a>é€šè¿‡åå°„ï¼Œè°ƒç”¨å‡½æ•°</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//å‡½æ•°çš„åå°„</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		æ€è·¯ï¼šå‡½æ•°ä¹Ÿæ˜¯çœ‹åšæ¥å£å˜é‡ç±»å‹</span></span><br><span class="line"><span class="comment">		step1ï¼šå‡½æ•°---&gt;åå°„å¯¹è±¡ï¼ŒValue</span></span><br><span class="line"><span class="comment">		step2ï¼škind--&gt;func</span></span><br><span class="line"><span class="comment">		step3ï¼šcall()</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	f1 := fun1</span><br><span class="line">	value := reflect.ValueOf(f1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;kind:%s, type :%s\n&quot;</span>, value.Kind(), value.Type()) <span class="comment">//kind:func, type :func()</span></span><br><span class="line">	value2 := reflect.ValueOf(fun2)</span><br><span class="line"></span><br><span class="line">	value3 := reflect.ValueOf(fun3)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;kind:%s,type:%s\n&quot;</span>, value2.Kind(), value2.Type()) <span class="comment">//kind:func,type:func(int, string)</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;kind:%s,type:%s\n&quot;</span>, value3.Kind(), value3.Type()) <span class="comment">//kind:func,type:func(int, string) string</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//é€šè¿‡åå°„è°ƒç”¨å‡½æ•°</span></span><br><span class="line">	value.Call(<span class="literal">nil</span>)</span><br><span class="line">	value2.Call([]reflect.Value&#123;reflect.ValueOf(<span class="number">1000</span>), reflect.ValueOf(<span class="string">&quot;å¼ ä¸‰&quot;</span>)&#125;)</span><br><span class="line"></span><br><span class="line">	resultValue := value3.Call([]reflect.Value&#123;reflect.ValueOf(<span class="number">2000</span>), reflect.ValueOf(<span class="string">&quot;Ruby&quot;</span>)&#125;)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, resultValue)                                               <span class="comment">//[]reflect.Value</span></span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(resultValue))                                                 <span class="comment">//1</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;kind:%s,type:%s\n&quot;</span>, resultValue[<span class="number">0</span>].Kind(), resultValue[<span class="number">0</span>].Type()) <span class="comment">//kind:string,type:string</span></span><br><span class="line"></span><br><span class="line">	s := resultValue[<span class="number">0</span>].Interface().(<span class="type">string</span>)</span><br><span class="line">	fmt.Println(s)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æˆ‘æ˜¯å‡½æ•°fun1(),æ— å‚çš„...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun2</span><span class="params">(i <span class="type">int</span>, s <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æˆ‘æ˜¯å‡½æ•°fun2(),æœ‰å‚çš„ã€‚ã€‚&quot;</span>, i, s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fun3</span><span class="params">(i <span class="type">int</span>, s <span class="type">string</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æˆ‘æ˜¯å‡½æ•°fun3()ï¼Œæœ‰å‚çš„ï¼Œä¹Ÿæœ‰è¿”å›å€¼ã€‚ã€‚&quot;</span>, i, s)</span><br><span class="line">	<span class="keyword">return</span> s + strconv.Itoa(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kind:func, type :func()</span><br><span class="line">kind:func,type:func(int, string)</span><br><span class="line">kind:func,type:func(int, string) string</span><br><span class="line">æˆ‘æ˜¯å‡½æ•°fun1(),æ— å‚çš„...</span><br><span class="line">æˆ‘æ˜¯å‡½æ•°fun2(),æœ‰å‚çš„ã€‚ã€‚ 1000 å¼ ä¸‰</span><br><span class="line">æˆ‘æ˜¯å‡½æ•°fun3()ï¼Œæœ‰å‚çš„ï¼Œä¹Ÿæœ‰è¿”å›å€¼ã€‚ã€‚ 2000 Ruby</span><br><span class="line">[]reflect.Value</span><br><span class="line">1</span><br><span class="line">kind:string,type:string</span><br><span class="line">Ruby2000</span><br><span class="line">string</span><br></pre></td></tr></table></figure>

<h2 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h2><h3 id="åŒ¿åç»“æ„ä½“"><a href="#åŒ¿åç»“æ„ä½“" class="headerlink" title="åŒ¿åç»“æ„ä½“"></a>åŒ¿åç»“æ„ä½“</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Animal <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span> &#123;</span><br><span class="line">	Animal</span><br><span class="line">	Color <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–åŒ¿åå­—æ®µ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c1 := Cat&#123;Animal&#123;<span class="string">&quot;çŒ«å’ª&quot;</span>, <span class="number">1</span>&#125;, <span class="string">&quot;ç™½è‰²&quot;</span>&#125;</span><br><span class="line">	t1 := reflect.TypeOf(c1)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; t1.NumField(); i++ &#123;</span><br><span class="line">		fmt.Println(t1.Field(i))</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">			&#123;Animal  main.Animal  0 [0] true&#125;</span></span><br><span class="line"><span class="comment">			&#123;Color  string  24 [1] false&#125;</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// FiledByIndex()çš„å‚æ•°æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œç¬¬ä¸€ä¸ªæ•°æ˜¯Animalå­—æ®µï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯Animalçš„ç¬¬ä¸€ä¸ªå­—æ®µ</span></span><br><span class="line">	f1 := t1.FieldByIndex([]<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">0</span>&#125;)</span><br><span class="line">	f2 := t1.FieldByIndex([]<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>&#125;)</span><br><span class="line">	fmt.Println(f1) <span class="comment">//&#123;Name  string  0 [0] false&#125;</span></span><br><span class="line">	fmt.Println(f2) <span class="comment">//&#123;Age  int  16 [1] false&#125;</span></span><br><span class="line"></span><br><span class="line">	v1 := reflect.ValueOf(c1)</span><br><span class="line">	fmt.Println(v1.Field(<span class="number">0</span>))                  <span class="comment">//&#123;çŒ«å’ª 1&#125;</span></span><br><span class="line">	fmt.Println(v1.FieldByIndex([]<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">0</span>&#125;)) <span class="comment">//çŒ«å’ª</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;Animal  main.Animal  0 [0] true&#125;</span><br><span class="line">&#123;Color  string  24 [1] false&#125;</span><br><span class="line">&#123;Name  string  0 [0] false&#125;</span><br><span class="line">&#123;Age  int  16 [1] false&#125;</span><br><span class="line">&#123;çŒ«å’ª 1&#125;</span><br><span class="line">çŒ«å’ª</span><br></pre></td></tr></table></figure>

<h3 id="é€šè¿‡åå°„ï¼Œä¿®æ”¹ç»“æ„ä½“çš„æ•°æ®"><a href="#é€šè¿‡åå°„ï¼Œä¿®æ”¹ç»“æ„ä½“çš„æ•°æ®" class="headerlink" title="é€šè¿‡åå°„ï¼Œä¿®æ”¹ç»“æ„ä½“çš„æ•°æ®"></a>é€šè¿‡åå°„ï¼Œä¿®æ”¹ç»“æ„ä½“çš„æ•°æ®</h3><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age <span class="type">int</span></span><br><span class="line">	School <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	ä¿®æ”¹å†…å®¹</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	s1:= Student&#123;<span class="string">&quot;ç‹äºŒç‹—&quot;</span>,<span class="number">18</span>,<span class="string">&quot;æ¸…åå¤§å­¦&quot;</span>&#125;</span><br><span class="line">	v1 := reflect.ValueOf(&amp;s1)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> v1.Kind() ==reflect.Ptr &amp;&amp; v1.Elem().CanSet()&#123;</span><br><span class="line">		v1 = v1.Elem()</span><br><span class="line">		fmt.Println(<span class="string">&quot;å¯ä»¥ä¿®æ”¹ã€‚ã€‚&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	f1:=v1.FieldByName(<span class="string">&quot;Name&quot;</span>)</span><br><span class="line">	fmt.Println(f1.CanSet())</span><br><span class="line">	f1.SetString(<span class="string">&quot;ç‹ä¸‰ç‹—&quot;</span>)</span><br><span class="line">	f2:=v1.FieldByName(<span class="string">&quot;Age&quot;</span>)</span><br><span class="line">	fmt.Println(f2.CanSet())</span><br><span class="line">	f2.SetInt(<span class="number">20</span>)</span><br><span class="line">	fmt.Println(s1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¯ä»¥ä¿®æ”¹ã€‚ã€‚</span><br><span class="line">true</span><br><span class="line">true</span><br><span class="line">&#123;ç‹ä¸‰ç‹— 20 æ¸…åå¤§å­¦&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>çŒœè°œæ¸¸æˆ(Goå®ç°)</title>
    <url>/2023/07/08/Go/23/</url>
    <content><![CDATA[<h1 id="çŒœè°œæ¸¸æˆ"><a href="#çŒœè°œæ¸¸æˆ" class="headerlink" title="çŒœè°œæ¸¸æˆ"></a>çŒœè°œæ¸¸æˆ</h1><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	maxNum := <span class="number">100</span></span><br><span class="line">	rand.Seed(time.Now().UnixNano())</span><br><span class="line">	secretNumber := rand.Intn(maxNum)</span><br><span class="line">	<span class="comment">//fmt.Println(&quot;The secret number is &quot;, secretNumber)</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;Please input your guess:&quot;</span>)</span><br><span class="line">	reader := bufio.NewReader(os.Stdin)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		input, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;An error occured while reading input. Please try again&quot;</span>, err)</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125;</span><br><span class="line">		input = strings.Trim(input, <span class="string">&quot;\r\n&quot;</span>) <span class="comment">////å»é™¤å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾å¤„çš„å›è½¦ç¬¦å’Œæ¢è¡Œç¬¦</span></span><br><span class="line"></span><br><span class="line">		guess, err := strconv.Atoi(input)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;Invalid input. Please enter an integer value&quot;</span>)</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="string">&quot;You guess is&quot;</span>, guess)</span><br><span class="line">		<span class="keyword">if</span> guess &gt; secretNumber &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;Your guess is bigger than the secret number. Please try again&quot;</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> guess &lt; secretNumber &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;Your guess is smaller than the secret number. Please try again&quot;</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;Correct, you Legend!&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼šè¿™æ®µä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„çŒœæ•°å­—æ¸¸æˆç¨‹åºï¼Œä½¿ç”¨ Go è¯­è¨€ç¼–å†™ã€‚</p>
<p>é¦–å…ˆï¼Œä»£ç å¯¼å…¥äº†ä¸€äº›éœ€è¦ä½¿ç”¨çš„åŒ…ï¼ŒåŒ…æ‹¬ <code>&quot;bufio&quot;</code>ã€<code>&quot;fmt&quot;</code>ã€<code>&quot;math/rand&quot;</code>ã€<code>&quot;os&quot;</code>ã€<code>&quot;strconv&quot;</code> å’Œ <code>&quot;strings&quot;</code>ï¼Œè¿™äº›åŒ…æä¾›äº†å¤„ç†è¾“å…¥è¾“å‡ºã€ç”Ÿæˆéšæœºæ•°å’Œå­—ç¬¦ä¸²å¤„ç†çš„åŠŸèƒ½ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªå˜é‡ <code>maxNum</code>ï¼Œå®ƒè¡¨ç¤ºå¯çŒœæµ‹çš„æœ€å¤§æ•°å­—ã€‚ç„¶åä½¿ç”¨ <code>rand.Seed(time.Now().UnixNano())</code> è®¾ç½®éšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ï¼Œä»¥ç¡®ä¿æ¯æ¬¡ç¨‹åºè¿è¡Œæ—¶ç”Ÿæˆçš„éšæœºæ•°æ˜¯ä¸åŒçš„ã€‚ç„¶åä½¿ç”¨ <code>rand.Intn(maxNum)</code> ç”Ÿæˆä¸€ä¸ªä»‹äº 0 å’Œ <code>maxNum</code> ä¹‹é—´çš„éšæœºæ•´æ•°ä½œä¸ºç§˜å¯†æ•°å­—ã€‚</p>
<p>ç„¶åç¨‹åºæç¤ºç”¨æˆ·è¾“å…¥çŒœæµ‹çš„æ•°å­—ï¼Œå¹¶ä½¿ç”¨ <code>bufio.NewReader(os.Stdin)</code> åˆ›å»ºä¸€ä¸ªè¯»å–æ ‡å‡†è¾“å…¥çš„è¯»å–å™¨ã€‚</p>
<p>ä¹‹åè¿›å…¥ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œåœ¨å¾ªç¯ä¸­ä¸æ–­è¯»å–ç”¨æˆ·è¾“å…¥çš„çŒœæµ‹æ•°å­—ï¼Œç›´åˆ°çŒœæµ‹æ­£ç¡®ä¸ºæ­¢ã€‚å¾ªç¯å¼€å§‹æ—¶ï¼Œè°ƒç”¨ <code>reader.ReadString(&#39;\n&#39;)</code> è¯»å–ç”¨æˆ·è¾“å…¥çš„å®Œæ•´ä¸€è¡Œå­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦ã€‚ç„¶åä½¿ç”¨ <code>strings.Trim(input, &quot;\r\n&quot;)</code> å»é™¤å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾å¤„çš„å›è½¦ç¬¦å’Œæ¢è¡Œç¬¦ï¼Œå¹¶å°†ä¿®å‰ªåçš„å­—ç¬¦ä¸²èµ‹å€¼ç»™ <code>input</code> å˜é‡ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ <code>strconv.Atoi(input)</code> å°†ä¿®å‰ªåçš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ï¼Œå¹¶å°†è½¬æ¢åçš„ç»“æœèµ‹å€¼ç»™ <code>guess</code> å˜é‡ã€‚å¦‚æœè½¬æ¢å‡ºé”™ï¼Œåˆ™è¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶è¦æ±‚ç”¨æˆ·é‡æ–°è¾“å…¥ã€‚</p>
<p>ç„¶åç¨‹åºè¾“å‡ºç”¨æˆ·çŒœæµ‹çš„æ•°å­—ï¼Œå¹¶ä¸ç§˜å¯†æ•°å­—è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœçŒœæµ‹æ•°å­—å¤§äºç§˜å¯†æ•°å­—ï¼Œåˆ™è¾“å‡ºæç¤ºä¿¡æ¯å‘Šè¯‰ç”¨æˆ·çŒœæµ‹æ•°å­—å¤ªå¤§ï¼›å¦‚æœçŒœæµ‹æ•°å­—å°äºç§˜å¯†æ•°å­—ï¼Œåˆ™è¾“å‡ºæç¤ºä¿¡æ¯å‘Šè¯‰ç”¨æˆ·çŒœæµ‹æ•°å­—å¤ªå°ã€‚å¦‚æœçŒœæµ‹æ•°å­—ä¸ç§˜å¯†æ•°å­—ç›¸ç­‰ï¼Œåˆ™è¾“å‡ºæç¤ºä¿¡æ¯å‘Šè¯‰ç”¨æˆ·çŒœæµ‹æ­£ç¡®ï¼Œå¹¶è·³å‡ºå¾ªç¯ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¼šå¾ªç¯è¿›è¡Œï¼Œç›´åˆ°ç”¨æˆ·çŒœæµ‹æ­£ç¡®ä¸ºæ­¢ã€‚</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>Goå®ç°åœ¨çº¿è¯å…¸ç¿»è¯‘(ä¸‰ç§ç¿»è¯‘æ¥å£ï¼Œç»“åˆsync)</title>
    <url>/2023/07/08/Go/24/</url>
    <content><![CDATA[<h1 id="ç«å±±ç¿»è¯‘"><a href="#ç«å±±ç¿»è¯‘" class="headerlink" title="ç«å±±ç¿»è¯‘"></a>ç«å±±ç¿»è¯‘</h1><p>é¦–å…ˆä»‹ç»ç”¨ç«å±±ç¿»è¯‘è‹±è¯‘æ±‰ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;bytes&quot;</span></span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">	<span class="string">&quot;unicode&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DictRequestHS <span class="keyword">struct</span> &#123;</span><br><span class="line">	Source         <span class="type">string</span>   <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">	Words          []<span class="type">string</span> <span class="string">`json:&quot;words&quot;`</span></span><br><span class="line">	SourceLanguage <span class="type">string</span>   <span class="string">`json:&quot;source_language&quot;`</span></span><br><span class="line">	TargetLanguage <span class="type">string</span>   <span class="string">`json:&quot;target_language&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> DictResponseHS <span class="keyword">struct</span> &#123;</span><br><span class="line">	Details []<span class="keyword">struct</span> &#123;</span><br><span class="line">		Detail <span class="type">string</span> <span class="string">`json:&quot;detail&quot;`</span></span><br><span class="line">		Extra  <span class="type">string</span> <span class="string">`json:&quot;extra&quot;`</span></span><br><span class="line">	&#125; <span class="string">`json:&quot;details&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DictResponseHSData <span class="keyword">struct</span> &#123;</span><br><span class="line">	Result []<span class="keyword">struct</span> &#123;</span><br><span class="line">		Ec <span class="keyword">struct</span> &#123;</span><br><span class="line">			Basic <span class="keyword">struct</span> &#123;</span><br><span class="line">				Explains []<span class="keyword">struct</span> &#123;</span><br><span class="line">					Pos   <span class="type">string</span> <span class="string">`json:&quot;pos&quot;`</span></span><br><span class="line">					Trans <span class="type">string</span> <span class="string">`json:&quot;trans&quot;`</span></span><br><span class="line">				&#125; <span class="string">`json:&quot;explains&quot;`</span></span><br><span class="line">			&#125; <span class="string">`json:&quot;basic&quot;`</span></span><br><span class="line">		&#125; <span class="string">`json:&quot;ec&quot;`</span></span><br><span class="line">	&#125; <span class="string">`json:&quot;result&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">query</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;è¯·è¾“å…¥è¦æŸ¥è¯¢çš„å†…å®¹:&quot;</span>)</span><br><span class="line">		reader := bufio.NewReader(os.Stdin)</span><br><span class="line">		word, _ := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		word = strings.Trim(word, <span class="string">&quot;\r\n&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> IsEnglishString(word) &#123;</span><br><span class="line">			queryHS(word)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;è¯·è¾“å…¥è‹±è¯­&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">queryHS</span><span class="params">(word <span class="type">string</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	client := &amp;http.Client&#123;&#125;</span><br><span class="line">	request := DictRequestHS&#123;<span class="string">&quot;youdao&quot;</span>, []<span class="type">string</span>&#123;word&#125;, <span class="string">&quot;en&quot;</span>, <span class="string">&quot;zh&quot;</span>&#125;</span><br><span class="line">	buf, err := json.Marshal(request)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> data = bytes.NewReader(buf)</span><br><span class="line">	req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://translate.volcengine.com/web/dict/detail/v1/?msToken=&amp;X-Bogus=DFSzswVOQDaibrQ3tJHN7cppgiFh&amp;_signature=_02B4Z6wo00001g0lO6gAAIDD-FrRNX0w-.4NJT8AAOfuf7&quot;</span>, data)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	req.Header.Set(<span class="string">&quot;authority&quot;</span>, <span class="string">&quot;translate.volcengine.com&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;accept&quot;</span>, <span class="string">&quot;application/json, text/plain, */*&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;accept-language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/json&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;cookie&quot;</span>, <span class="string">&quot;x-jupiter-uuid=16888064002651706; i18next=zh-CN; s_v_web_id=verify_ljtrq6kx_UW3ieIzP_8gQX_4abc_B8D8_AoHwuLysn026; ttcid=db98bce9149b4f09b905a71503d9331e36&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;origin&quot;</span>, <span class="string">&quot;https://translate.volcengine.com&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;referer&quot;</span>, <span class="string">&quot;https://translate.volcengine.com/?category=&amp;home_language=zh&amp;source_language=detect&amp;target_language=zh&amp;text=bad&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-ch-ua&quot;</span>, <span class="string">`&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Microsoft Edge&quot;;v=&quot;114&quot;`</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-ch-ua-platform&quot;</span>, <span class="string">`&quot;Windows&quot;`</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-fetch-dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-fetch-mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-fetch-site&quot;</span>, <span class="string">&quot;same-origin&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;user-agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.43&quot;</span>)</span><br><span class="line">	resp, err := client.Do(req)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line">	bodyText, err := io.ReadAll(resp.Body)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> resp.StatusCode != <span class="number">200</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">&quot;bad StatusCode:&quot;</span>, resp.StatusCode, <span class="string">&quot;body&quot;</span>, <span class="type">string</span>(bodyText))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> dictResponse DictResponseHS</span><br><span class="line"></span><br><span class="line">	err = json.Unmarshal(bodyText, &amp;dictResponse)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;ç«å±±ç¿»è¯‘&quot;</span>)</span><br><span class="line">	item := dictResponse.Details[<span class="number">0</span>]</span><br><span class="line">	jsonStr := item.Detail</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> HSData DictResponseHSData</span><br><span class="line">	err = json.Unmarshal([]<span class="type">byte</span>(jsonStr), &amp;HSData)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, item := <span class="keyword">range</span> HSData.Result[<span class="number">0</span>].Ec.Basic.Explains &#123;</span><br><span class="line">		fmt.Println(item.Pos, item.Trans)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">IsEnglishString</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, r := <span class="keyword">range</span> s &#123;</span><br><span class="line">		<span class="keyword">if</span> unicode.IsLetter(r) &amp;&amp; !unicode.Is(unicode.Scripts[<span class="string">&quot;Han&quot;</span>], r) &#123;</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">if</span> msg := <span class="built_in">recover</span>(); msg != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(msg, <span class="string">&quot;è¾“å…¥ä¸åˆæ³•,è¯·é‡æ–°è¾“å…¥&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	query()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/image-20230708201714905.png"></p>
<h1 id="å½©äº‘ç¿»è¯‘å’Œç™¾åº¦ç¿»è¯‘"><a href="#å½©äº‘ç¿»è¯‘å’Œç™¾åº¦ç¿»è¯‘" class="headerlink" title="å½©äº‘ç¿»è¯‘å’Œç™¾åº¦ç¿»è¯‘"></a>å½©äº‘ç¿»è¯‘å’Œç™¾åº¦ç¿»è¯‘</h1><p>ç„¶åè¿ç”¨goroutineï¼Œç»“åˆsyncåŒ…ï¼ŒåŒæ—¶å®ç°å½©äº‘ç¿»è¯‘å’Œç™¾åº¦ç¿»è¯‘ã€‚å¯å¯¹è¾“å…¥çš„å†…å®¹è‡ªåŠ¨æ£€æµ‹ï¼Œå®Œæˆè‹±è¯‘æ±‰ï¼Œæ±‰è¯‘è‹±ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;bytes&quot;</span></span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DictRequestCY <span class="keyword">struct</span> &#123;</span><br><span class="line">	TransType <span class="type">string</span> <span class="string">`json:&quot;trans_type&quot;`</span></span><br><span class="line">	Source    <span class="type">string</span> <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">	UserID    <span class="type">string</span> <span class="string">`json:&quot;user_id&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DictResponseCY <span class="keyword">struct</span> &#123;</span><br><span class="line">	Rc   <span class="type">int</span> <span class="string">`json:&quot;rc&quot;`</span></span><br><span class="line">	Wiki <span class="keyword">struct</span> &#123;</span><br><span class="line">		KnownInLaguages <span class="type">int</span> <span class="string">`json:&quot;known_in_laguages&quot;`</span></span><br><span class="line">		Description     <span class="keyword">struct</span> &#123;</span><br><span class="line">			Source <span class="type">string</span>      <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">			Target <span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;target&quot;`</span></span><br><span class="line">		&#125; <span class="string">`json:&quot;description&quot;`</span></span><br><span class="line">		ID   <span class="type">string</span> <span class="string">`json:&quot;id&quot;`</span></span><br><span class="line">		Item <span class="keyword">struct</span> &#123;</span><br><span class="line">			Source <span class="type">string</span> <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">			Target <span class="type">string</span> <span class="string">`json:&quot;target&quot;`</span></span><br><span class="line">		&#125; <span class="string">`json:&quot;item&quot;`</span></span><br><span class="line">		ImageURL  <span class="type">string</span> <span class="string">`json:&quot;image_url&quot;`</span></span><br><span class="line">		IsSubject <span class="type">string</span> <span class="string">`json:&quot;is_subject&quot;`</span></span><br><span class="line">		Sitelink  <span class="type">string</span> <span class="string">`json:&quot;sitelink&quot;`</span></span><br><span class="line">	&#125; <span class="string">`json:&quot;wiki&quot;`</span></span><br><span class="line">	Dictionary <span class="keyword">struct</span> &#123;</span><br><span class="line">		Prons <span class="keyword">struct</span> &#123;</span><br><span class="line">			EnUs <span class="type">string</span> <span class="string">`json:&quot;en-us&quot;`</span></span><br><span class="line">			En   <span class="type">string</span> <span class="string">`json:&quot;en&quot;`</span></span><br><span class="line">		&#125; <span class="string">`json:&quot;prons&quot;`</span></span><br><span class="line">		Explanations []<span class="type">string</span>      <span class="string">`json:&quot;explanations&quot;`</span></span><br><span class="line">		Synonym      []<span class="type">string</span>      <span class="string">`json:&quot;synonym&quot;`</span></span><br><span class="line">		Antonym      []<span class="type">string</span>      <span class="string">`json:&quot;antonym&quot;`</span></span><br><span class="line">		WqxExample   [][]<span class="type">string</span>    <span class="string">`json:&quot;wqx_example&quot;`</span></span><br><span class="line">		Entry        <span class="type">string</span>        <span class="string">`json:&quot;entry&quot;`</span></span><br><span class="line">		Type         <span class="type">string</span>        <span class="string">`json:&quot;type&quot;`</span></span><br><span class="line">		Related      []<span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;related&quot;`</span></span><br><span class="line">		Source       <span class="type">string</span>        <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">	&#125; <span class="string">`json:&quot;dictionary&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DictResponseBD <span class="keyword">struct</span> &#123;</span><br><span class="line">	Errno <span class="type">int</span> <span class="string">`json:&quot;errno&quot;`</span></span><br><span class="line">	Data  []<span class="keyword">struct</span> &#123;</span><br><span class="line">		K <span class="type">string</span> <span class="string">`json:&quot;k&quot;`</span></span><br><span class="line">		V <span class="type">string</span> <span class="string">`json:&quot;v&quot;`</span></span><br><span class="line">	&#125; <span class="string">`json:&quot;data&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">queryBD</span><span class="params">(word <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	client := &amp;http.Client&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> data = strings.NewReader(<span class="string">&quot;kw=&quot;</span> + word)</span><br><span class="line">	req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://fanyi.baidu.com/sug&quot;</span>, data)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Accept&quot;</span>, <span class="string">&quot;application/json, text/javascript, */*; q=0.01&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Accept-Language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Connection&quot;</span>, <span class="string">&quot;keep-alive&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Cookie&quot;</span>, <span class="string">&quot;BIDUPSID=1CDF4C78BCFB3D90B2D6A594920DA6E4; PSTM=1630726121; __yjs_duid=1_02f9d28d226309370f287ee032114e3f1630763189674; REALTIME_TRANS_SWITCH=1; HISTORY_SWITCH=1; FANYI_WORD_SWITCH=1; SOUND_SPD_SWITCH=1; SOUND_PREFER_SWITCH=1; BAIDUID=396D4FB45E415311D3C31A0DE0D1AF80:FG=1; BDUSS=V6NWkyMzJnaTB-OWplSFdUR25tRkxsTzFnVnBDanN4ZEs2bHFMc2EzaXJOcDVrRVFBQUFBJCQAAAAAAAAAAAEAAACpaydUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKupdmSrqXZkMV; BDUSS_BFESS=V6NWkyMzJnaTB-OWplSFdUR25tRkxsTzFnVnBDanN4ZEs2bHFMc2EzaXJOcDVrRVFBQUFBJCQAAAAAAAAAAAEAAACpaydUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKupdmSrqXZkMV; APPGUIDE_10_6_2=1; MCITY=-75%3A; MAWEBCUID=web_jcjIPqwGUVRAlyJeYpGiILrRIWXcMWNDAjChgRXUZoHLpLyApr; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; delPer=0; PSINO=1; BAIDUID_BFESS=396D4FB45E415311D3C31A0DE0D1AF80:FG=1; BA_HECTOR=2h852l8h2ha5840k8k0k050g1iai2fd1o; ZFY=kYWZ1Y6d6SV8cMcgDFNKAhwEEhlIK7W5gu1C:APN07HM:C; H_PS_PSSID=36546_39026_39022_38858_38957_38954_39009_38918_38972_38815_38637_26350_39041_38948_39046; ab_sr=1.0.1_MjBiYTAxMmUwMWE2MzIyODYxY2JiYzIxNjFjMWY2OTIwOTc5NTA1MTI5MzAzZGI2OWNiMGEwM2I1Y2IwNjJiZWEzNDQwOTg1ZTkyYTJkNmU1OTc3MjY1MTJhZTM1MGEwNWNlM2NkM2VjNWM0NDMwZjY0ZWJlZTEyOTQyZjFkZjE1YzhiYzY4YjBhYzQ4NzE2NWI4MjNkZjA1NTVkMDk2MmRjMjZhYTA4NThmOTYwMmEzOWMxMjAxMGM2OTdjODhm&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Origin&quot;</span>, <span class="string">&quot;https://fanyi.baidu.com&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Referer&quot;</span>, <span class="string">&quot;https://fanyi.baidu.com/&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Sec-Fetch-Dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Sec-Fetch-Mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Sec-Fetch-Site&quot;</span>, <span class="string">&quot;same-origin&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;User-Agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.43&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;X-Requested-With&quot;</span>, <span class="string">&quot;XMLHttpRequest&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-ch-ua&quot;</span>, <span class="string">`&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Microsoft Edge&quot;;v=&quot;114&quot;`</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-ch-ua-platform&quot;</span>, <span class="string">`&quot;Windows&quot;`</span>)</span><br><span class="line">	resp, err := client.Do(req)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line">	bodyText, err := io.ReadAll(resp.Body)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> resp.StatusCode != <span class="number">200</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">&quot;bad StatusCode:&quot;</span>, resp.StatusCode, <span class="string">&quot;body&quot;</span>, <span class="type">string</span>(bodyText))</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> dictResponse DictResponseBD</span><br><span class="line">	err = json.Unmarshal(bodyText, &amp;dictResponse)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;ç™¾åº¦ç¿»è¯‘&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> _, item := <span class="keyword">range</span> dictResponse.Data &#123;</span><br><span class="line">		fmt.Println(item.V)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	wg.Done()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">queryCY</span><span class="params">(word <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	client := &amp;http.Client&#123;&#125;</span><br><span class="line">	request := DictRequestCY&#123;TransType: <span class="string">&quot;en2zh&quot;</span>, Source: word&#125;</span><br><span class="line">	buf, err := json.Marshal(request)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> data = bytes.NewReader(buf)</span><br><span class="line">	req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://api.interpreter.caiyunai.com/v1/dict&quot;</span>, data)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Connection&quot;</span>, <span class="string">&quot;keep-alive&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;DNT&quot;</span>, <span class="string">&quot;1&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;os-version&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;User-Agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;app-name&quot;</span>, <span class="string">&quot;xy&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json;charset=UTF-8&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Accept&quot;</span>, <span class="string">&quot;application/json, text/plain, */*&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;device-id&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;os-type&quot;</span>, <span class="string">&quot;web&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;X-Authorization&quot;</span>, <span class="string">&quot;token:qgemv4jr1y38jyq6vhvi&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Origin&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Sec-Fetch-Site&quot;</span>, <span class="string">&quot;cross-site&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Sec-Fetch-Mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Sec-Fetch-Dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Referer&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com/&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Accept-Language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>)</span><br><span class="line">	req.Header.Set(<span class="string">&quot;Cookie&quot;</span>, <span class="string">&quot;_ym_uid=16456948721020430059; _ym_d=1645694872&quot;</span>)</span><br><span class="line">	resp, err := client.Do(req)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line">	bodyText, err := io.ReadAll(resp.Body)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> resp.StatusCode != <span class="number">200</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">&quot;bad StatusCode:&quot;</span>, resp.StatusCode, <span class="string">&quot;body&quot;</span>, <span class="type">string</span>(bodyText))</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> dictResponse DictResponseCY</span><br><span class="line">	err = json.Unmarshal(bodyText, &amp;dictResponse)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;å½©äº‘ç¿»è¯‘&quot;</span>)</span><br><span class="line">	fmt.Println(word, <span class="string">&quot;UK:&quot;</span>, dictResponse.Dictionary.Prons.En, <span class="string">&quot;US:&quot;</span>, dictResponse.Dictionary.Prons.EnUs)</span><br><span class="line">	<span class="keyword">for</span> _, item := <span class="keyword">range</span> dictResponse.Dictionary.Explanations &#123;</span><br><span class="line">		fmt.Println(item)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	wg.Done()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;è¯·è¾“å…¥è¦æŸ¥è¯¢çš„å†…å®¹:&quot;</span>)</span><br><span class="line">	reader := bufio.NewReader(os.Stdin)</span><br><span class="line">	word, _ := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">	word = strings.Trim(word, <span class="string">&quot;\r\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">	wg.Add(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> queryCY(word)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> queryBD(word)</span><br><span class="line"></span><br><span class="line">	wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/image-20230708202352141.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/image-20230708202412883.png"></p>
<h1 id="å·¥å…·æ¨è"><a href="#å·¥å…·æ¨è" class="headerlink" title="å·¥å…·æ¨è"></a>å·¥å…·æ¨è</h1><p>1.jsonæ ¼å¼æ•°æ®è½¬golangç»“æ„ä½“</p>
<p><a href="https://oktools.net/json2go">JSONè½¬Golang Struct - åœ¨çº¿å·¥å…· - OKTools</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/image-20230708202645156.png"></p>
<p>2.curlè½¬çˆ¬è™«ä»£ç </p>
<p><a href="https://curlconverter.com/">Convert curl commands to code (curlconverter.com)</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/image-20230708203618156.png"></p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>Goå®ç°socks5ä»£ç†æœåŠ¡å™¨</title>
    <url>/2023/07/09/Go/25/</url>
    <content><![CDATA[<p>SOCKS5 æ˜¯ä¸€ä¸ªä»£ç†åè®®ï¼Œå®ƒåœ¨ä½¿ç”¨TCP&#x2F;IPåè®®é€šè®¯çš„å‰ç«¯æœºå™¨å’ŒæœåŠ¡å™¨æœºå™¨ä¹‹é—´æ‰®æ¼”ä¸€ä¸ªä¸­ä»‹è§’è‰²ï¼Œä½¿å¾—å†…éƒ¨ç½‘ä¸­çš„å‰ç«¯æœºå™¨å˜å¾—èƒ½å¤Ÿè®¿é—®Internetç½‘ä¸­çš„æœåŠ¡å™¨ï¼Œæˆ–è€…ä½¿é€šè®¯æ›´åŠ å®‰å…¨ã€‚SOCKS5 æœåŠ¡å™¨é€šè¿‡å°†å‰ç«¯å‘æ¥çš„è¯·æ±‚è½¬å‘ç»™çœŸæ­£çš„ç›®æ ‡æœåŠ¡å™¨ï¼Œ æ¨¡æ‹Ÿäº†ä¸€ä¸ªå‰ç«¯çš„è¡Œä¸ºã€‚åœ¨è¿™é‡Œï¼Œå‰ç«¯å’ŒSOCKS5ä¹‹é—´ä¹Ÿæ˜¯é€šè¿‡TCP&#x2F;IPåè®®è¿›è¡Œé€šè®¯ï¼Œå‰ç«¯å°†åŸæœ¬è¦å‘é€ç»™çœŸæ­£æœåŠ¡å™¨çš„è¯·æ±‚å‘é€ç»™SOCKS5æœåŠ¡å™¨ï¼Œç„¶åSOCKS5æœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘ç»™çœŸæ­£çš„æœåŠ¡å™¨ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/image101.png"></p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æœ€ç»ˆå†™å®Œçš„ä»£ç†æœåŠ¡å™¨çš„æ•ˆæœã€‚æˆ‘ä»¬å¯åŠ¨è¿™ä¸ªç¨‹åºï¼Œç„¶ååœ¨æµè§ˆå™¨é‡Œé¢é…ç½®ä½¿ç”¨è¿™ä¸ªä»£ç†ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‰“å¼€ç½‘é¡µã€‚<br>ä»£ç†æœåŠ¡å™¨çš„æ—¥å¿—ï¼Œä¼šæ‰“å°å‡ºä½ è®¿é—®çš„ç½‘ç«™çš„åŸŸåæˆ–è€…IPï¼Œè¿™è¯´æ˜æˆ‘ä»¬çš„ç½‘ç»œæµé‡æ˜¯é€šè¿‡è¿™ä¸ªä»£ç†æœåŠ¡å™¨çš„ã€‚æˆ‘ä»¬ä¹Ÿèƒ½åœ¨å‘½ä»¤è¡Œå»æµ‹è¯•æˆ‘ä»¬çš„ä»£ç†æœåŠ¡å™¨ã€‚æˆ‘ä»¬å¯ä»¥ç”¨curl â€“socks5 +ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œåé¢åŠ ä¸€ä¸ªå¯è®¿é—®çš„URLï¼Œå¦‚æœä»£ç†æœåŠ¡å™¨å·¥ä½œæ­£å¸¸çš„è¯ï¼Œé‚£ä¹ˆ curlå‘½ä»¤å°±ä¼šæ­£å¸¸è¿”å›ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/image102.png"></p>
<p>socks5åè®®åŸç†ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-07-09_10-43-11.png"></p>
<p>æºä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;context&quot;</span></span><br><span class="line">	<span class="string">&quot;encoding/binary&quot;</span></span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> socks5Ver = <span class="number">0x05</span></span><br><span class="line"><span class="keyword">const</span> cmdBind = <span class="number">0x01</span></span><br><span class="line"><span class="keyword">const</span> atypeIPV4 = <span class="number">0x01</span></span><br><span class="line"><span class="keyword">const</span> atypeHOST = <span class="number">0x03</span></span><br><span class="line"><span class="keyword">const</span> atypeIPV6 = <span class="number">0x04</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	server, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;127.0.0.1:1080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		client, err := server.Accept()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Printf(<span class="string">&quot;Accept failed %v&quot;</span>, err)</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">go</span> process(client)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">process</span><span class="params">(conn net.Conn)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> conn.Close()</span><br><span class="line">	reader := bufio.NewReader(conn)</span><br><span class="line">	err := auth(reader, conn)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Printf(<span class="string">&quot;client %v auth failed:%v&quot;</span>, conn.RemoteAddr(), err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	err = connect(reader, conn)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Printf(<span class="string">&quot;client %v auth failed:%v&quot;</span>, conn.RemoteAddr(), err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">auth</span><span class="params">(reader *bufio.Reader, conn net.Conn)</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="comment">// +----+----------+----------+</span></span><br><span class="line">	<span class="comment">// |VER | NMETHODS | METHODS  |</span></span><br><span class="line">	<span class="comment">// +----+----------+----------+</span></span><br><span class="line">	<span class="comment">// | 1  |    1     | 1 to 255 |</span></span><br><span class="line">	<span class="comment">// +----+----------+----------+</span></span><br><span class="line">	<span class="comment">// VER: åè®®ç‰ˆæœ¬ï¼Œsocks5ä¸º0x05</span></span><br><span class="line">	<span class="comment">// NMETHODS: æ”¯æŒè®¤è¯çš„æ–¹æ³•æ•°é‡</span></span><br><span class="line">	<span class="comment">// METHODS: å¯¹åº”NMETHODSï¼ŒNMETHODSçš„å€¼ä¸ºå¤šå°‘ï¼ŒMETHODSå°±æœ‰å¤šå°‘ä¸ªå­—èŠ‚ã€‚RFCé¢„å®šä¹‰äº†ä¸€äº›å€¼çš„å«ä¹‰ï¼Œå†…å®¹å¦‚ä¸‹:</span></span><br><span class="line">	<span class="comment">// Xâ€™00â€™ NO AUTHENTICATION REQUIRED</span></span><br><span class="line">	<span class="comment">// Xâ€™02â€™ USERNAME/PASSWORD</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Read VER, NMETHODS, and METHODS</span></span><br><span class="line">	ver, err := reader.ReadByte()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read ver failed:%w&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> ver != socks5Ver &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;not supported ver:%v&quot;</span>, ver)</span><br><span class="line">	&#125;</span><br><span class="line">	methodSize, err := reader.ReadByte()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read methodSize failed:%w&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	method := <span class="built_in">make</span>([]<span class="type">byte</span>, methodSize)</span><br><span class="line">	_, err = io.ReadFull(reader, method)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read method failed:%w&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// +----+--------+</span></span><br><span class="line">	<span class="comment">// |VER | METHOD |</span></span><br><span class="line">	<span class="comment">// +----+--------+</span></span><br><span class="line">	<span class="comment">// | 1  |   1    |</span></span><br><span class="line">	<span class="comment">// +----+--------+</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Write VER and METHOD</span></span><br><span class="line">	_, err = conn.Write([]<span class="type">byte</span>&#123;socks5Ver, <span class="number">0x00</span>&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;write failed:%w&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">connect</span><span class="params">(reader *bufio.Reader, conn net.Conn)</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="comment">// +----+-----+-------+------+----------+----------+</span></span><br><span class="line">	<span class="comment">// |VER | CMD |  RSV  | ATYP | DST.ADDR | DST.PORT |</span></span><br><span class="line">	<span class="comment">// +----+-----+-------+------+----------+----------+</span></span><br><span class="line">	<span class="comment">// | 1  |  1  | X&#x27;00&#x27; |  1   | Variable |    2     |</span></span><br><span class="line">	<span class="comment">// +----+-----+-------+------+----------+----------+</span></span><br><span class="line">	<span class="comment">// VER ç‰ˆæœ¬å·ï¼Œsocks5çš„å€¼ä¸º0x05</span></span><br><span class="line">	<span class="comment">// CMD 0x01è¡¨ç¤ºCONNECTè¯·æ±‚</span></span><br><span class="line">	<span class="comment">// RSV ä¿ç•™å­—æ®µï¼Œå€¼ä¸º0x00</span></span><br><span class="line">	<span class="comment">// ATYP ç›®æ ‡åœ°å€ç±»å‹ï¼ŒDST.ADDRçš„æ•°æ®å¯¹åº”è¿™ä¸ªå­—æ®µçš„ç±»å‹ã€‚</span></span><br><span class="line">	<span class="comment">//   0x01è¡¨ç¤ºIPv4åœ°å€ï¼ŒDST.ADDRä¸º4ä¸ªå­—èŠ‚</span></span><br><span class="line">	<span class="comment">//   0x03è¡¨ç¤ºåŸŸåï¼ŒDST.ADDRæ˜¯ä¸€ä¸ªå¯å˜é•¿åº¦çš„åŸŸå</span></span><br><span class="line">	<span class="comment">// DST.ADDR ä¸€ä¸ªå¯å˜é•¿åº¦çš„å€¼</span></span><br><span class="line">	<span class="comment">// DST.PORT ç›®æ ‡ç«¯å£ï¼Œå›ºå®š2ä¸ªå­—èŠ‚</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Read VER, CMD, RSV, and ATYP</span></span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">4</span>)</span><br><span class="line">	_, err = io.ReadFull(reader, buf)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read header failed:%w&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	ver, cmd, atyp := buf[<span class="number">0</span>], buf[<span class="number">1</span>], buf[<span class="number">3</span>]</span><br><span class="line">	<span class="keyword">if</span> ver != socks5Ver &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;not supported ver:%v&quot;</span>, ver)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> cmd != cmdBind &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;not supported cmd:%v&quot;</span>, cmd)</span><br><span class="line">	&#125;</span><br><span class="line">	addr := <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="keyword">switch</span> atyp &#123;</span><br><span class="line">	<span class="keyword">case</span> atypeIPV4:</span><br><span class="line">		_, err = io.ReadFull(reader, buf)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read atyp failed:%w&quot;</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">		addr = fmt.Sprintf(<span class="string">&quot;%d.%d.%d.%d&quot;</span>, buf[<span class="number">0</span>], buf[<span class="number">1</span>], buf[<span class="number">2</span>], buf[<span class="number">3</span>])</span><br><span class="line">	<span class="keyword">case</span> atypeHOST:</span><br><span class="line">		hostSize, err := reader.ReadByte()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read hostSize failed:%w&quot;</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">		host := <span class="built_in">make</span>([]<span class="type">byte</span>, hostSize)</span><br><span class="line">		_, err = io.ReadFull(reader, host)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read host failed:%w&quot;</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">		addr = <span class="type">string</span>(host)</span><br><span class="line">	<span class="keyword">case</span> atypeIPV6:</span><br><span class="line">		<span class="keyword">return</span> errors.New(<span class="string">&quot;IPv6: no supported yet&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">return</span> errors.New(<span class="string">&quot;invalid atyp&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	_, err = io.ReadFull(reader, buf[:<span class="number">2</span>])</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read port failed:%w&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	port := binary.BigEndian.Uint16(buf[:<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">	dest, err := net.Dial(<span class="string">&quot;tcp&quot;</span>, fmt.Sprintf(<span class="string">&quot;%v:%v&quot;</span>, addr, port))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;dial dst failed:%w&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> dest.Close()</span><br><span class="line">	log.Println(<span class="string">&quot;dial&quot;</span>, addr, port)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// +----+-----+-------+------+----------+----------+</span></span><br><span class="line">	<span class="comment">// |VER | REP |  RSV  | ATYP | BND.ADDR | BND.PORT |</span></span><br><span class="line">	<span class="comment">// +----+-----+-------+------+----------+----------+</span></span><br><span class="line">	<span class="comment">// | 1  |  1  | X&#x27;00&#x27; |  1   | Variable |    2     |</span></span><br><span class="line">	<span class="comment">// +----+-----+-------+------+----------+----------+</span></span><br><span class="line">	<span class="comment">// VER socksç‰ˆæœ¬ï¼Œè¿™é‡Œä¸º0x05</span></span><br><span class="line">	<span class="comment">// REP Relay field,å†…å®¹å–å€¼å¦‚ä¸‹ Xâ€™00â€™ succeeded</span></span><br><span class="line">	<span class="comment">// RSV ä¿ç•™å­—æ®µ</span></span><br><span class="line">	<span class="comment">// ATYPE åœ°å€ç±»å‹</span></span><br><span class="line">	<span class="comment">// BND.ADDR æœåŠ¡ç»‘å®šçš„åœ°å€</span></span><br><span class="line">	<span class="comment">// BND.PORT æœåŠ¡ç»‘å®šçš„ç«¯å£DST.PORT</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// Send response to client</span></span><br><span class="line">	_, err = conn.Write([]<span class="type">byte</span>&#123;<span class="number">0x05</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;write failed: %w&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	ctx, cancel := context.WithCancel(context.Background())</span><br><span class="line">	<span class="keyword">defer</span> cancel()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		_, _ = io.Copy(dest, reader)</span><br><span class="line">		cancel()</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		_, _ = io.Copy(conn, dest)</span><br><span class="line">		cancel()</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	&lt;-ctx.Done()</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼šä¸»å‡½æ•°å¼€å§‹ç›‘å¬åœ¨æœ¬åœ°åœ°å€ï¼ˆ127.0.0.1ï¼‰çš„1080ç«¯å£ä¸Šï¼Œæ¥å—å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œå¹¶åœ¨æ–°çš„goroutineä¸­å¤„ç†å®¢æˆ·ç«¯è¿æ¥ã€‚<code>process</code>å‡½æ•°ç”¨äºå¤„ç†å®¢æˆ·ç«¯è¿æ¥ã€‚é¦–å…ˆå…³é—­è¿æ¥ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª<code>bufio.Reader</code>ç”¨äºè¯»å–æ•°æ®ã€‚æ¥ä¸‹æ¥è°ƒç”¨<code>auth</code>å‡½æ•°è¿›è¡Œè®¤è¯ï¼Œç„¶åè°ƒç”¨<code>connect</code>å‡½æ•°è¿›è¡Œè¿æ¥ã€‚<code>auth</code>å‡½æ•°ç”¨äºå¤„ç†è®¤è¯è¿‡ç¨‹ã€‚æ ¹æ®SOCKS5åè®®è§„å®šçš„æ ¼å¼ï¼Œä»<code>reader</code>ä¸­è¯»å–åè®®ç‰ˆæœ¬å’Œæ”¯æŒçš„è®¤è¯æ–¹æ³•ï¼Œç„¶åå‘å®¢æˆ·ç«¯è¿”å›åè®®ç‰ˆæœ¬å’Œé€‰æ‹©çš„è®¤è¯æ–¹æ³•ã€‚è¿™é‡Œåªå®ç°äº†ä¸éœ€è¦è®¤è¯çš„æ–¹å¼ã€‚<code>connect</code>å‡½æ•°ç”¨äºå¤„ç†è¿æ¥è¯·æ±‚ã€‚æ ¹æ®SOCKS5åè®®è§„å®šçš„æ ¼å¼ï¼Œä»<code>reader</code>ä¸­è¯»å–ç‰ˆæœ¬ã€å‘½ä»¤ã€åœ°å€ç±»å‹å’Œç›®æ ‡åœ°å€ä¿¡æ¯ã€‚æ ¹æ®åœ°å€ç±»å‹çš„ä¸åŒï¼Œè§£æå‡ºç›®æ ‡åœ°å€å’Œç«¯å£å·ã€‚ç„¶åå»ºç«‹ä¸ç›®æ ‡æœåŠ¡å™¨çš„è¿æ¥ï¼Œå¹¶å°†è¿æ¥æˆåŠŸçš„å“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨goroutineå¹¶å‘åœ°å°†å®¢æˆ·ç«¯çš„æ•°æ®å¤åˆ¶åˆ°ç›®æ ‡æœåŠ¡å™¨å’Œå°†ç›®æ ‡æœåŠ¡å™¨çš„æ•°æ®å¤åˆ¶å›å®¢æˆ·ç«¯ï¼Œä»è€Œå®ç°äº†æ•°æ®çš„è½¬å‘ã€‚æœ€åï¼Œä½¿ç”¨<code>&lt;-ctx.Done()</code>é˜»å¡ç­‰å¾…ä¸Šè¿°goroutineçš„å®Œæˆã€‚</p>
<p>å°†è¿™æ®µä»£ç åœ¨golandä¸Šè¿è¡Œï¼Œå¹¶åœ¨cmdå‘½ä»¤è¡Œï¼ˆç®¡ç†å‘˜ï¼‰ä¸­è¾“å…¥<code>curl --socks5 127.0.0.1 1080 -v http://www.baidu.com</code>ä»¥æµ‹è¯•ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/20230709110101.png"></p>
<p>socks5æœåŠ¡å™¨å®ç°æˆåŠŸã€‚</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>Ginæ¡†æ¶è¯¦è§£</title>
    <url>/2023/07/09/Go/26/</url>
    <content><![CDATA[<h2 id="Ginæ¡†æ¶ç®€ä»‹"><a href="#Ginæ¡†æ¶ç®€ä»‹" class="headerlink" title="Ginæ¡†æ¶ç®€ä»‹"></a>Ginæ¡†æ¶ç®€ä»‹</h2><p>Ginæ˜¯ä¸€ä¸ªç®€å•ã€å¿«é€Ÿè€Œå¼ºå¤§çš„Webæ¡†æ¶ï¼Œé€‚ç”¨äºæ„å»ºå„ç§è§„æ¨¡çš„Webåº”ç”¨ç¨‹åºã€‚å®ƒçš„è®¾è®¡ç†å¿µæ˜¯ç®€æ´ã€é«˜æ•ˆå’Œæ˜“ç”¨ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿæ„å»ºé«˜æ€§èƒ½çš„WebæœåŠ¡ã€‚æ— è®ºæ˜¯æ„å»ºAPIæœåŠ¡ã€Webåº”ç”¨è¿˜æ˜¯å¾®æœåŠ¡ï¼ŒGinéƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚å®ƒå…·æœ‰ç±»ä¼¼martiniçš„APIï¼Œä½†æ€§èƒ½è¦å¥½å¾—å¤šï¼Œå¤šäºäº†httprouterï¼Œé€Ÿåº¦æé«˜äº†40å€ã€‚å¦‚æœæ‚¨éœ€è¦æ€§èƒ½å’Œè‰¯å¥½çš„ç”Ÿäº§åŠ›ï¼Œæ‚¨ä¸€å®šä¼šå–œæ¬¢Gin ã€‚</p>
<h3 id="ä¸ç”¨ginæ¡†æ¶å®ç°ç®€å•webç¨‹åº"><a href="#ä¸ç”¨ginæ¡†æ¶å®ç°ç®€å•webç¨‹åº" class="headerlink" title="ä¸ç”¨ginæ¡†æ¶å®ç°ç®€å•webç¨‹åº"></a>ä¸ç”¨ginæ¡†æ¶å®ç°ç®€å•webç¨‹åº</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// æ³¨å†Œè·¯ç”±å¤„ç†å‡½æ•°</span></span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/hello&quot;</span>, sayhello)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¯åŠ¨HTTPæœåŠ¡å™¨å¹¶ç›‘å¬æŒ‡å®šç«¯å£</span></span><br><span class="line">	err := http.ListenAndServe(<span class="string">&quot;:9090&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;é”™è¯¯ï¼š%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sayhello æ˜¯å¤„ç† /hello è·¯ç”±çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayhello</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	_, _ = fmt.Fprintf(w, <span class="string">&quot;&lt;h1&gt;Hello&lt;/h1&gt;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å°†ä»¥ä¸Šä»£ç è¿è¡Œååœ¨æµè§ˆå™¨è¾“å…¥ç½‘å€localhost:9090ï¼Œè¿”å›å†…å®¹&lt;h1&gt;Hello&lt;&#x2F;h1&gt;</p>
<h3 id="ä¸‹è½½å¹¶å®‰è£…Gin"><a href="#ä¸‹è½½å¹¶å®‰è£…Gin" class="headerlink" title="ä¸‹è½½å¹¶å®‰è£…Gin"></a>ä¸‹è½½å¹¶å®‰è£…<code>Gin</code></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go get -u github.com/gin-gonic/gin</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬ä¸€ä¸ªGinç¤ºä¾‹"><a href="#ç¬¬ä¸€ä¸ªGinç¤ºä¾‹" class="headerlink" title="ç¬¬ä¸€ä¸ªGinç¤ºä¾‹"></a>ç¬¬ä¸€ä¸ªGinç¤ºä¾‹</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// åˆ›å»ºé»˜è®¤çš„Ginå¼•æ“</span></span><br><span class="line">	r := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</span></span><br><span class="line">	r.GET(<span class="string">&quot;/hello&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;hello world&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¯åŠ¨HTTPæœåŠ¡å™¨å¹¶ç›‘å¬æŒ‡å®šç«¯å£ï¼Œé»˜è®¤åœ¨0.0.0.0:8080å¯åŠ¨æœåŠ¡</span></span><br><span class="line">	err := r.Run(<span class="string">&quot;:9090&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="RESTful-API"><a href="#RESTful-API" class="headerlink" title="RESTful API"></a>RESTful API</h2><p>RESTä¸æŠ€æœ¯æ— å…³ï¼Œä»£è¡¨çš„æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼ŒRESTæ˜¯Representational State Transferçš„ç®€ç§°ï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºâ€œè¡¨å¾çŠ¶æ€è½¬ç§»â€æˆ–â€œè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€ã€‚</p>
<p>æ¨èé˜…è¯»<a href="http://www.ruanyifeng.com/blog/2011/09/restful.html">é˜®ä¸€å³° ç†è§£RESTfulæ¶æ„</a></p>
<p>ç®€å•æ¥è¯´ï¼ŒRESTçš„å«ä¹‰å°±æ˜¯å®¢æˆ·ç«¯ä¸WebæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œäº¤äº’çš„æ—¶å€™ï¼Œä½¿ç”¨HTTPåè®®ä¸­çš„4ä¸ªè¯·æ±‚æ–¹æ³•ä»£è¡¨ä¸åŒçš„åŠ¨ä½œã€‚</p>
<ul>
<li><code>GET</code>ç”¨æ¥è·å–èµ„æº</li>
<li><code>POST</code>ç”¨æ¥æ–°å»ºèµ„æº</li>
<li><code>PUT</code>ç”¨æ¥æ›´æ–°èµ„æº</li>
<li><code>PATCH</code>ç”¨æ¥æ›´æ–°éƒ¨åˆ†èµ„æº</li>
<li><code>DELETE</code>ç”¨æ¥åˆ é™¤èµ„æº</li>
</ul>
<p>åªè¦APIç¨‹åºéµå¾ªäº†RESTé£æ ¼ï¼Œé‚£å°±å¯ä»¥ç§°å…¶ä¸ºRESTful APIã€‚ç›®å‰åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸­ï¼Œå‰åç«¯åŸºæœ¬éƒ½æ˜¯é€šè¿‡RESTful APIæ¥è¿›è¡Œäº¤äº’ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç°åœ¨è¦ç¼–å†™ä¸€ä¸ªä¼šè®®ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä¼šè®®è¿›è¡ŒæŸ¥è¯¢ã€åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ç­‰æ“ä½œï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™å°±è¦è®¾è®¡å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æˆ‘ä»¬WebæœåŠ¡ç«¯äº¤äº’çš„æ–¹å¼å’Œè·¯å¾„ã€‚æŒ‰ç…§ç»éªŒæˆ‘ä»¬é€šå¸¸ä¼šè®¾è®¡æˆå¦‚ä¸‹æ¨¡å¼ï¼š</p>
<table>
<thead>
<tr>
<th align="center">è¯·æ±‚æ–¹æ³•</th>
<th align="center">URL</th>
<th align="center">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="center">GET</td>
<td align="center">&#x2F;meeting</td>
<td align="center">æŸ¥è¯¢ä¼šè®®ä¿¡æ¯</td>
</tr>
<tr>
<td align="center">POST</td>
<td align="center">&#x2F;create_meeting</td>
<td align="center">åˆ›å»ºä¼šè®®è®°å½•</td>
</tr>
<tr>
<td align="center">POST</td>
<td align="center">&#x2F;update_meeting</td>
<td align="center">æ›´æ–°ä¼šè®®ä¿¡æ¯</td>
</tr>
<tr>
<td align="center">POST</td>
<td align="center">&#x2F;delete_meeting</td>
<td align="center">åˆ é™¤ä¼šè®®ä¿¡æ¯</td>
</tr>
</tbody></table>
<p>åŒæ ·çš„éœ€æ±‚æˆ‘ä»¬æŒ‰ç…§RESTful APIè®¾è®¡å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th align="center">è¯·æ±‚æ–¹æ³•</th>
<th align="center">URL</th>
<th align="center">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="center">GET</td>
<td align="center">&#x2F;meeting</td>
<td align="center">æŸ¥è¯¢ä¼šè®®ä¿¡æ¯</td>
</tr>
<tr>
<td align="center">POST</td>
<td align="center">&#x2F;meeting</td>
<td align="center">åˆ›å»ºä¼šè®®è®°å½•</td>
</tr>
<tr>
<td align="center">PUT</td>
<td align="center">&#x2F;meeting</td>
<td align="center">æ›´æ–°ä¼šè®®ä¿¡æ¯</td>
</tr>
<tr>
<td align="center">DELETE</td>
<td align="center">&#x2F;meeting</td>
<td align="center">åˆ é™¤ä¼šè®®ä¿¡æ¯</td>
</tr>
</tbody></table>
<p>Ginæ¡†æ¶æ”¯æŒå¼€å‘RESTful APIçš„å¼€å‘ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// GETè¯·æ±‚ï¼Œè·å–èµ„æº</span></span><br><span class="line">	r.GET(<span class="string">&quot;/meeting&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span> &#123;</span><br><span class="line">		context.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// POSTè¯·æ±‚ï¼Œæ–°å»ºèµ„æº</span></span><br><span class="line">	r.POST(<span class="string">&quot;/meeting&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span> &#123;</span><br><span class="line">		context.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// PUTè¯·æ±‚ï¼Œæ›´æ–°èµ„æº</span></span><br><span class="line">	r.PUT(<span class="string">&quot;/meeting&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span> &#123;</span><br><span class="line">		context.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;PUT&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// PATCHè¯·æ±‚ï¼Œéƒ¨åˆ†æ›´æ–°èµ„æº</span></span><br><span class="line">	r.PATCH(<span class="string">&quot;/meeting&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span> &#123;</span><br><span class="line">		context.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;PATCH&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// DELETEè¯·æ±‚ï¼Œåˆ é™¤èµ„æº</span></span><br><span class="line">	r.DELETE(<span class="string">&quot;/meeting&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span> &#123;</span><br><span class="line">		context.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;DELETE&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¯åŠ¨HTTPæœåŠ¡å™¨å¹¶ç›‘å¬æŒ‡å®šç«¯å£</span></span><br><span class="line">	err := r.Run(<span class="string">&quot;:9090&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼€å‘RESTful APIçš„æ—¶å€™æˆ‘ä»¬é€šå¸¸ä½¿ç”¨<a href="https://www.getpostman.com/">Postman</a>æ¥ä½œä¸ºå®¢æˆ·ç«¯çš„æµ‹è¯•å·¥å…·ã€‚</p>
<h2 id="goæ¨¡æ¿è¯­æ³•"><a href="#goæ¨¡æ¿è¯­æ³•" class="headerlink" title="goæ¨¡æ¿è¯­æ³•"></a>goæ¨¡æ¿è¯­æ³•</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;html/template&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name   <span class="type">string</span></span><br><span class="line">	Gender <span class="type">string</span></span><br><span class="line">	Age    <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(w http.ResponseWriter, _ *http.Request)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è‡ªå®šä¹‰å‡½æ•°</span></span><br><span class="line">	admire := <span class="function"><span class="keyword">func</span><span class="params">(name <span class="type">string</span>, gender <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">error</span>) &#123;</span><br><span class="line">		<span class="keyword">var</span> praise <span class="type">string</span></span><br><span class="line">		<span class="keyword">if</span> gender == <span class="string">&quot;ç”·&quot;</span> &#123;</span><br><span class="line">			praise = <span class="string">&quot;çœŸå¸…æ°”!!!!!!!!&quot;</span></span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> gender == <span class="string">&quot;å¥³&quot;</span> &#123;</span><br><span class="line">			praise = <span class="string">&quot;çœŸæ¼‚äº®!!!!!!!!&quot;</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;&quot;</span>, errors.New(<span class="string">&quot;invalid gender&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> name + praise, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è§£ææŒ‡å®šæ–‡ä»¶ç”Ÿæˆæ¨¡æ¿å¯¹è±¡(å¹¶æ³¨å†Œè‡ªå®šä¹‰å‡½æ•°)</span></span><br><span class="line">	tmpl, err := template.New(<span class="string">&quot;hello.tmpl&quot;</span>).Funcs(template.FuncMap&#123;<span class="string">&quot;admire&quot;</span>: admire&#125;).ParseFiles(<span class="string">&quot;./hello.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;create template failed, err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åˆ©ç”¨ç»™å®šæ•°æ®æ¸²æŸ“æ¨¡æ¿ï¼Œå¹¶å°†ç»“æœå†™å…¥w</span></span><br><span class="line">	user1 := UserInfo&#123;</span><br><span class="line">		Name:   <span class="string">&quot;å°ç‹å­&quot;</span>,</span><br><span class="line">		Gender: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">		Age:    <span class="number">17</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	user2 := <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line">		<span class="string">&quot;name&quot;</span>:   <span class="string">&quot;å°å…¬ä¸»&quot;</span>,</span><br><span class="line">		<span class="string">&quot;gender&quot;</span>: <span class="string">&quot;å¥³&quot;</span>,</span><br><span class="line">		<span class="string">&quot;age&quot;</span>:    <span class="number">19</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	hobbylist := []<span class="type">string</span>&#123;</span><br><span class="line">		<span class="string">&quot;è·‘æ­¥&quot;</span>,</span><br><span class="line">		<span class="string">&quot;å¬éŸ³ä¹&quot;</span>,</span><br><span class="line">		<span class="string">&quot;å­¦ä¹ &quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	err = tmpl.Execute(w, <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line">		<span class="string">&quot;user1&quot;</span>: user1,</span><br><span class="line">		<span class="string">&quot;user2&quot;</span>: user2,</span><br><span class="line">		<span class="string">&quot;hobby&quot;</span>: hobbylist,</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">qianTao</span><span class="params">(w http.ResponseWriter, _ *http.Request)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	tmpl, err := template.ParseFiles(<span class="string">&quot;./t.tmpl&quot;</span>, <span class="string">&quot;./ul.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;create template failed, err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	user := UserInfo&#123;</span><br><span class="line">		Name:   <span class="string">&quot;å°ç‹å­&quot;</span>,</span><br><span class="line">		Gender: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">		Age:    <span class="number">17</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	err = tmpl.Execute(w, user)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/&quot;</span>, sayHello)</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/demo&quot;</span>, qianTao)</span><br><span class="line">	err := http.ListenAndServe(<span class="string">&quot;:9090&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;HTTP server failed,err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯<code>hello.tmpl</code>ç¤ºä¾‹æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;&#123;.user1.Name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123;.user1.Gender&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123;.user1.Age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;&#123;.user2.name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123;.user2.gender&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123;.user2.age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;&#123;/*è‡ªå®šä¹‰å˜é‡*/&#125;&#125;</span><br><span class="line">&#123;&#123; $a := 100 &#125;&#125;</span><br><span class="line">&#123;&#123; $b := .user1.Age &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;&#123;/*ç§»é™¤ç©ºæ ¼*/&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123;- .user2.age -&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;&#123;/*æ¡ä»¶åˆ¤æ–­*/&#125;&#125;</span><br><span class="line">&#123;&#123; if $a&#125;&#125;</span><br><span class="line">    &#123;&#123;$a&#125;&#125;</span><br><span class="line">&#123;&#123;else&#125;&#125;</span><br><span class="line">    a ä¸å­˜åœ¨</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">&#123;&#123; if lt .user1.Age 18&#125;&#125;</span><br><span class="line">    æœªæˆå¹´</span><br><span class="line">&#123;&#123;else&#125;&#125;</span><br><span class="line">    ä¸Šå¤§å­¦äº†</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">&#123;&#123;range $index,$hobby :=.hobby&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;$index&#125;&#125;------&#123;&#123;$hobby&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&#123;&#123;else&#125;&#125;</span><br><span class="line">    æ²¡æœ‰çˆ±å¥½</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">&#123;&#123;/*withä½œç”¨åŸŸ*/&#125;&#125;</span><br><span class="line">&#123;&#123;with .user1&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;&#123;.Name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123;.Gender&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123;.Age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">&#123;&#123;index .hobby 2&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;&#123;/*è‡ªå®šä¹‰å‡½æ•°*/&#125;&#125;</span><br><span class="line">&#123;&#123;admire .user1.Name .user1.Gender&#125;&#125;</span><br><span class="line">&#123;&#123;admire .user2.name .user2.gender&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="é¢„å®šä¹‰å‡½æ•°"><a href="#é¢„å®šä¹‰å‡½æ•°" class="headerlink" title="é¢„å®šä¹‰å‡½æ•°"></a>é¢„å®šä¹‰å‡½æ•°</h3><p>æ‰§è¡Œæ¨¡æ¿æ—¶ï¼Œå‡½æ•°ä»ä¸¤ä¸ªå‡½æ•°å­—å…¸ä¸­æŸ¥æ‰¾ï¼šé¦–å…ˆæ˜¯æ¨¡æ¿å‡½æ•°å­—å…¸ï¼Œç„¶åæ˜¯å…¨å±€å‡½æ•°å­—å…¸ã€‚ä¸€èˆ¬ä¸åœ¨æ¨¡æ¿å†…å®šä¹‰å‡½æ•°ï¼Œè€Œæ˜¯ä½¿ç”¨Funcsæ–¹æ³•æ·»åŠ å‡½æ•°åˆ°æ¨¡æ¿é‡Œã€‚</p>
<p>é¢„å®šä¹‰çš„å…¨å±€å‡½æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">and</span><br><span class="line">    å‡½æ•°è¿”å›å®ƒçš„ç¬¬ä¸€ä¸ªemptyå‚æ•°æˆ–è€…æœ€åä¸€ä¸ªå‚æ•°ï¼›</span><br><span class="line">    å°±æ˜¯è¯´&quot;and x y&quot;ç­‰ä»·äº&quot;if x then y else x&quot;ï¼›æ‰€æœ‰å‚æ•°éƒ½ä¼šæ‰§è¡Œï¼›</span><br><span class="line">or</span><br><span class="line">    è¿”å›ç¬¬ä¸€ä¸ªéemptyå‚æ•°æˆ–è€…æœ€åä¸€ä¸ªå‚æ•°ï¼›</span><br><span class="line">    äº¦å³&quot;or x y&quot;ç­‰ä»·äº&quot;if x then x else y&quot;ï¼›æ‰€æœ‰å‚æ•°éƒ½ä¼šæ‰§è¡Œï¼›</span><br><span class="line">not</span><br><span class="line">    è¿”å›å®ƒçš„å•ä¸ªå‚æ•°çš„å¸ƒå°”å€¼çš„å¦å®š</span><br><span class="line">len</span><br><span class="line">    è¿”å›å®ƒçš„å‚æ•°çš„æ•´æ•°ç±»å‹é•¿åº¦</span><br><span class="line">index</span><br><span class="line">    æ‰§è¡Œç»“æœä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä»¥å‰©ä¸‹çš„å‚æ•°ä¸ºç´¢å¼•/é”®æŒ‡å‘çš„å€¼ï¼›</span><br><span class="line">    å¦‚&quot;index x 1 2 3&quot;è¿”å›x[1][2][3]çš„å€¼ï¼›æ¯ä¸ªè¢«ç´¢å¼•çš„ä¸»ä½“å¿…é¡»æ˜¯æ•°ç»„ã€åˆ‡ç‰‡æˆ–è€…å­—å…¸ã€‚</span><br><span class="line">print</span><br><span class="line">    å³fmt.Sprint</span><br><span class="line">printf</span><br><span class="line">    å³fmt.Sprintf</span><br><span class="line">println</span><br><span class="line">    å³fmt.Sprintln</span><br><span class="line">html</span><br><span class="line">    è¿”å›ä¸å…¶å‚æ•°çš„æ–‡æœ¬è¡¨ç¤ºå½¢å¼ç­‰æ•ˆçš„è½¬ä¹‰HTMLã€‚</span><br><span class="line">    è¿™ä¸ªå‡½æ•°åœ¨html/templateä¸­ä¸å¯ç”¨ã€‚</span><br><span class="line">urlquery</span><br><span class="line">    ä»¥é€‚åˆåµŒå…¥åˆ°ç½‘å€æŸ¥è¯¢ä¸­çš„å½¢å¼è¿”å›å…¶å‚æ•°çš„æ–‡æœ¬è¡¨ç¤ºçš„è½¬ä¹‰å€¼ã€‚</span><br><span class="line">    è¿™ä¸ªå‡½æ•°åœ¨html/templateä¸­ä¸å¯ç”¨ã€‚</span><br><span class="line">js</span><br><span class="line">    è¿”å›ä¸å…¶å‚æ•°çš„æ–‡æœ¬è¡¨ç¤ºå½¢å¼ç­‰æ•ˆçš„è½¬ä¹‰JavaScriptã€‚</span><br><span class="line">call</span><br><span class="line">    æ‰§è¡Œç»“æœæ˜¯è°ƒç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„è¿”å›å€¼ï¼Œè¯¥å‚æ•°å¿…é¡»æ˜¯å‡½æ•°ç±»å‹ï¼Œå…¶ä½™å‚æ•°ä½œä¸ºè°ƒç”¨è¯¥å‡½æ•°çš„å‚æ•°ï¼›</span><br><span class="line">    å¦‚&quot;call .X.Y 1 2&quot;ç­‰ä»·äºgoè¯­è¨€é‡Œçš„dot.X.Y(1, 2)ï¼›</span><br><span class="line">    å…¶ä¸­Yæ˜¯å‡½æ•°ç±»å‹çš„å­—æ®µæˆ–è€…å­—å…¸çš„å€¼ï¼Œæˆ–è€…å…¶ä»–ç±»ä¼¼æƒ…å†µï¼›</span><br><span class="line">    callçš„ç¬¬ä¸€ä¸ªå‚æ•°çš„æ‰§è¡Œç»“æœå¿…é¡»æ˜¯å‡½æ•°ç±»å‹çš„å€¼ï¼ˆå’Œé¢„å®šä¹‰å‡½æ•°å¦‚printæ˜æ˜¾ä¸åŒï¼‰ï¼›</span><br><span class="line">    è¯¥å‡½æ•°ç±»å‹å€¼å¿…é¡»æœ‰1åˆ°2ä¸ªè¿”å›å€¼ï¼Œå¦‚æœæœ‰2ä¸ªåˆ™åä¸€ä¸ªå¿…é¡»æ˜¯erroræ¥å£ç±»å‹ï¼›</span><br><span class="line">    å¦‚æœæœ‰2ä¸ªè¿”å›å€¼çš„æ–¹æ³•è¿”å›çš„errorénilï¼Œæ¨¡æ¿æ‰§è¡Œä¼šä¸­æ–­å¹¶è¿”å›ç»™è°ƒç”¨æ¨¡æ¿æ‰§è¡Œè€…è¯¥é”™è¯¯ï¼›</span><br></pre></td></tr></table></figure>

<h3 id="æ¯”è¾ƒå‡½æ•°"><a href="#æ¯”è¾ƒå‡½æ•°" class="headerlink" title="æ¯”è¾ƒå‡½æ•°"></a>æ¯”è¾ƒå‡½æ•°</h3><p>å¸ƒå°”å‡½æ•°ä¼šå°†ä»»ä½•ç±»å‹çš„é›¶å€¼è§†ä¸ºå‡ï¼Œå…¶ä½™è§†ä¸ºçœŸã€‚</p>
<p>ä¸‹é¢æ˜¯å®šä¹‰ä¸ºå‡½æ•°çš„äºŒå…ƒæ¯”è¾ƒè¿ç®—çš„é›†åˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eq      å¦‚æœarg1 == arg2åˆ™è¿”å›çœŸ</span><br><span class="line">ne      å¦‚æœarg1 != arg2åˆ™è¿”å›çœŸ</span><br><span class="line">lt      å¦‚æœarg1 &lt; arg2åˆ™è¿”å›çœŸ</span><br><span class="line">le      å¦‚æœarg1 &lt;= arg2åˆ™è¿”å›çœŸ</span><br><span class="line">gt      å¦‚æœarg1 &gt; arg2åˆ™è¿”å›çœŸ</span><br><span class="line">ge      å¦‚æœarg1 &gt;= arg2åˆ™è¿”å›çœŸ</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ç®€åŒ–å¤šå‚æ•°ç›¸ç­‰æ£€æµ‹ï¼Œeqï¼ˆåªæœ‰eqï¼‰å¯ä»¥æ¥å—2ä¸ªæˆ–æ›´å¤šä¸ªå‚æ•°ï¼Œå®ƒä¼šå°†ç¬¬ä¸€ä¸ªå‚æ•°å’Œå…¶ä½™å‚æ•°ä¾æ¬¡æ¯”è¾ƒï¼Œè¿”å›ä¸‹å¼çš„ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;eq arg1 arg2 arg3&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”è¾ƒå‡½æ•°åªé€‚ç”¨äºåŸºæœ¬ç±»å‹ï¼ˆæˆ–é‡å®šä¹‰çš„åŸºæœ¬ç±»å‹ï¼Œå¦‚â€type Celsius float32â€ï¼‰ã€‚ä½†æ˜¯ï¼Œæ•´æ•°å’Œæµ®ç‚¹æ•°ä¸èƒ½äº’ç›¸æ¯”è¾ƒã€‚</p>
<h3 id="è‡ªå®šä¹‰å‡½æ•°"><a href="#è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰å‡½æ•°"></a>è‡ªå®šä¹‰å‡½æ•°</h3><p>å…·ä½“ç¤ºä¾‹å‚ç…§ä»¥ä¸Šæ¨¡æ¿è¯­æ³•æåˆ°çš„main.goæ–‡ä»¶</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(w http.ResponseWriter, _ *http.Request)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è‡ªå®šä¹‰å‡½æ•°</span></span><br><span class="line">	admire := <span class="function"><span class="keyword">func</span><span class="params">(name <span class="type">string</span>, gender <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">error</span>) &#123;</span><br><span class="line">		<span class="keyword">var</span> praise <span class="type">string</span></span><br><span class="line">		<span class="keyword">if</span> gender == <span class="string">&quot;ç”·&quot;</span> &#123;</span><br><span class="line">			praise = <span class="string">&quot;çœŸå¸…æ°”!!!!!!!!&quot;</span></span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> gender == <span class="string">&quot;å¥³&quot;</span> &#123;</span><br><span class="line">			praise = <span class="string">&quot;çœŸæ¼‚äº®!!!!!!!!&quot;</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;&quot;</span>, errors.New(<span class="string">&quot;invalid gender&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> name + praise, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è§£ææŒ‡å®šæ–‡ä»¶ç”Ÿæˆæ¨¡æ¿å¯¹è±¡(å¹¶æ³¨å†Œè‡ªå®šä¹‰å‡½æ•°)</span></span><br><span class="line">	tmpl, err := template.New(<span class="string">&quot;hello.tmpl&quot;</span>).Funcs(template.FuncMap&#123;<span class="string">&quot;admire&quot;</span>: admire&#125;).ParseFiles(<span class="string">&quot;./hello.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;create template failed, err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;admire .user1.Name .user1.Gender&#125;&#125;</span><br><span class="line">&#123;&#123;admire .user2.name .user2.gender&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡æ¿åµŒå¥—"><a href="#æ¨¡æ¿åµŒå¥—" class="headerlink" title="æ¨¡æ¿åµŒå¥—"></a>æ¨¡æ¿åµŒå¥—</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">qianTao</span><span class="params">(w http.ResponseWriter, _ *http.Request)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	tmpl, err := template.ParseFiles(<span class="string">&quot;./t.tmpl&quot;</span>, <span class="string">&quot;./ul.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;create template failed, err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	user := UserInfo&#123;</span><br><span class="line">		Name:   <span class="string">&quot;å°ç‹å­&quot;</span>,</span><br><span class="line">		Gender: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">		Age:    <span class="number">17</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	err = tmpl.Execute(w, user)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>t.tmplæ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>tmpl test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ‹è¯•åµŒå¥—templateè¯­æ³•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">&#123;&#123;template &quot;ul.tmpl&quot;&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">&#123;&#123;template &quot;ol.tmpl&quot;&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;&#123; define &quot;ol.tmpl&quot;&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>åƒé¥­<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç¡è§‰<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ‰“è±†è±†<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>ä½ å¥½,&#123;&#123;.Name&#125;&#125;!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ul.htmlæ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ³¨é‡Š<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ—¥å¿—<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡æ¿ç»§æ‰¿"><a href="#æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="æ¨¡æ¿ç»§æ‰¿"></a>æ¨¡æ¿ç»§æ‰¿</h3><p>main.goæ–‡ä»¶</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;html/template&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">index</span><span class="params">(w http.ResponseWriter, _ *http.Request)</span></span> &#123;</span><br><span class="line">	<span class="comment">//å®šä¹‰æ¨¡æ¿</span></span><br><span class="line">	<span class="comment">//è§£ææ¨¡æ¿</span></span><br><span class="line">	tmpl, err := template.ParseFiles(<span class="string">&quot;./base.tmpl&quot;</span>, <span class="string">&quot;./index.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;parse error: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	msg := <span class="string">&quot;hello world&quot;</span></span><br><span class="line">	<span class="comment">//æ¸²æŸ“æ¨¡æ¿</span></span><br><span class="line">	err = tmpl.ExecuteTemplate(w, <span class="string">&quot;index.tmpl&quot;</span>, msg)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">base</span><span class="params">(w http.ResponseWriter, _ *http.Request)</span></span> &#123;</span><br><span class="line">	tmpl, err := template.ParseFiles(<span class="string">&quot;./base.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;parse error: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	msg := <span class="string">&quot;è¿™æ˜¯baseé¡µé¢&quot;</span></span><br><span class="line">	<span class="comment">//æ¸²æŸ“æ¨¡æ¿</span></span><br><span class="line">	err = tmpl.Execute(w, msg)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/index&quot;</span>, index)</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/base&quot;</span>, base)</span><br><span class="line">	err := http.ListenAndServe(<span class="string">&quot;:9000&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;HTTP server failed,err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>base.tmplæ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ¨¡æ¿ç»§æ‰¿<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-css">        ;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: burlywood;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.menu</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: cornflowerblue;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.center</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content center&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;.&#125;&#125;</span><br><span class="line">        &#123;&#123;block &quot;content&quot; .&#125;&#125;</span><br><span class="line">        &#123;&#123;end&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>index.tmplæ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;/*ç»§æ‰¿æ ¹æ¨¡æ¿*/&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123;template &quot;base.tmpl&quot; .&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123;/*é‡æ–°å®šä¹‰æ¨¡æ¿*/&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123;define &quot;content&quot;&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯indexé¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬çš„æ¨¡æ¿åç§°å†²çªäº†ï¼Œä¾‹å¦‚ä¸åŒä¸šåŠ¡çº¿ä¸‹éƒ½å®šä¹‰äº†ä¸€ä¸ª<code>index.tmpl</code>æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹æ³•æ¥è§£å†³ã€‚</p>
<ol>
<li>åœ¨æ¨¡æ¿æ–‡ä»¶å¼€å¤´ä½¿ç”¨<code>&#123;&#123;define æ¨¡æ¿å&#125;&#125;</code>è¯­å¥æ˜¾å¼çš„ä¸ºæ¨¡æ¿å‘½åã€‚</li>
<li>å¯ä»¥æŠŠæ¨¡æ¿æ–‡ä»¶å­˜æ”¾åœ¨<code>templates</code>æ–‡ä»¶å¤¹ä¸‹é¢çš„ä¸åŒç›®å½•ä¸­ï¼Œç„¶åä½¿ç”¨<code>template.ParseGlob(&quot;templates/**/*.tmpl&quot;)</code>è§£ææ¨¡æ¿ã€‚</li>
</ol>
<h3 id="æ¨¡æ¿è¡¥å……"><a href="#æ¨¡æ¿è¡¥å……" class="headerlink" title="æ¨¡æ¿è¡¥å……"></a>æ¨¡æ¿è¡¥å……</h3><h4 id="ä¿®æ”¹é»˜è®¤çš„æ ‡è¯†ç¬¦"><a href="#ä¿®æ”¹é»˜è®¤çš„æ ‡è¯†ç¬¦" class="headerlink" title="ä¿®æ”¹é»˜è®¤çš„æ ‡è¯†ç¬¦"></a>ä¿®æ”¹é»˜è®¤çš„æ ‡è¯†ç¬¦</h4><p>Goæ ‡å‡†åº“çš„æ¨¡æ¿å¼•æ“ä½¿ç”¨çš„èŠ±æ‹¬å·<code>&#123;&#123;`å’Œ`&#125;&#125;</code>ä½œä¸ºæ ‡è¯†ï¼Œè€Œè®¸å¤šå‰ç«¯æ¡†æ¶ï¼ˆå¦‚<code>Vue</code>å’Œ <code>AngularJS</code>ï¼‰ä¹Ÿä½¿ç”¨<code>&#123;&#123;`å’Œ`&#125;&#125;</code>ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åŒæ—¶ä½¿ç”¨Goè¯­è¨€æ¨¡æ¿å¼•æ“å’Œä»¥ä¸Šå‰ç«¯æ¡†æ¶æ—¶å°±ä¼šå‡ºç°å†²çªï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ ‡è¯†ç¬¦ï¼Œä¿®æ”¹å‰ç«¯çš„æˆ–è€…ä¿®æ”¹Goè¯­è¨€çš„ã€‚è¿™é‡Œæ¼”ç¤ºå¦‚ä½•ä¿®æ”¹Goè¯­è¨€æ¨¡æ¿å¼•æ“é»˜è®¤çš„æ ‡è¯†ç¬¦ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">template.New(&quot;t.tmpl&quot;).Delims(&quot;&#123;[&quot;, &quot;]&#125;&quot;).ParseFiles(&quot;./t.tmpl&quot;)</span><br></pre></td></tr></table></figure>

<p>æœ€åæˆ‘ä»¬åœ¨æ¸²æŸ“çš„æ—¶å€™</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;è‡ªå®šä¹‰æ¨¡æ¿å‡½æ•°&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;å§“å: &#123;[.Name]&#125;&lt;/h1&gt;</span><br><span class="line">&lt;h1&gt;æ€§åˆ«: &#123;[.Gender]&#125;&lt;/h1&gt;</span><br><span class="line">&lt;h1&gt;å¹´é¾„: &#123;[.Age]&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="text-templateä¸html-tempalteçš„åŒºåˆ«"><a href="#text-templateä¸html-tempalteçš„åŒºåˆ«" class="headerlink" title="text&#x2F;templateä¸html&#x2F;tempalteçš„åŒºåˆ«"></a>text&#x2F;templateä¸html&#x2F;tempalteçš„åŒºåˆ«</h4><p><code>html/template</code>é’ˆå¯¹çš„æ˜¯éœ€è¦è¿”å›HTMLå†…å®¹çš„åœºæ™¯ï¼Œåœ¨æ¨¡æ¿æ¸²æŸ“è¿‡ç¨‹ä¸­ä¼šå¯¹ä¸€äº›æœ‰é£é™©çš„å†…å®¹è¿›è¡Œè½¬ä¹‰ï¼Œä»¥æ­¤æ¥é˜²èŒƒè·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘å®šä¹‰ä¸‹é¢çš„æ¨¡æ¿æ–‡ä»¶ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;.&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™ä¼ å…¥ä¸€æ®µJSä»£ç å¹¶ä½¿ç”¨<code>html/template</code>å»æ¸²æŸ“è¯¥æ–‡ä»¶ï¼Œä¼šåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå‡ºè½¬ä¹‰åçš„JSå†…å®¹ã€‚ </p>
<p>ä½†æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¦‚æœç›¸ä¿¡ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œä¸æƒ³è½¬ä¹‰çš„è¯ï¼Œå¯ä»¥è‡ªè¡Œç¼–å†™ä¸€ä¸ªsafeå‡½æ•°ï¼Œæ‰‹åŠ¨è¿”å›ä¸€ä¸ª<code>template.HTML</code>ç±»å‹çš„å†…å®¹ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">xss</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span>&#123;</span><br><span class="line">	tmpl,err := template.New(<span class="string">&quot;xss.tmpl&quot;</span>).Funcs(template.FuncMap&#123;</span><br><span class="line">		<span class="string">&quot;safe&quot;</span>: <span class="function"><span class="keyword">func</span><span class="params">(s <span class="type">string</span>)</span></span>template.HTML &#123;</span><br><span class="line">			<span class="keyword">return</span> template.HTML(s)</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;).ParseFiles(<span class="string">&quot;./xss.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;create template failed, err:&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	jsStr := <span class="string">`&lt;script&gt;alert(&#x27;123&#x27;)&lt;/script&gt;`</span></span><br><span class="line">	err = tmpl.Execute(w, jsStr)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æˆ‘ä»¬åªéœ€è¦åœ¨æ¨¡æ¿æ–‡ä»¶ä¸éœ€è¦è½¬ä¹‰çš„å†…å®¹åé¢ä½¿ç”¨æˆ‘ä»¬å®šä¹‰å¥½çš„safeå‡½æ•°å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123; . | safe &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Ginæ¸²æŸ“"><a href="#Ginæ¸²æŸ“" class="headerlink" title="Ginæ¸²æŸ“"></a>Ginæ¸²æŸ“</h2><p>æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªå­˜æ”¾æ¨¡æ¿æ–‡ä»¶çš„<code>templates</code>æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨å…¶å†…éƒ¨æŒ‰ç…§ä¸šåŠ¡åˆ†åˆ«å®šä¹‰ä¸€ä¸ª<code>posts</code>æ–‡ä»¶å¤¹å’Œä¸€ä¸ª<code>users</code>æ–‡ä»¶å¤¹ã€‚ <code>posts/index.html</code>æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;define &quot;posts/index.tmpl&quot;&#125;&#125;</span><br><span class="line">    <span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/xxx/index.css&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>posts/index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;.title |safe&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/xxx/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><code>users/index.html</code>æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;define &quot;users/index.tmpl&quot;&#125;&#125;</span><br><span class="line">    <span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>users/index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;.title&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>Ginæ¡†æ¶ä¸­ä½¿ç”¨<code>LoadHTMLGlob()</code>æˆ–è€…<code>LoadHTMLFiles()</code>æ–¹æ³•è¿›è¡ŒHTMLæ¨¡æ¿æ¸²æŸ“ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;html/template&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è®¾ç½®é™æ€æ–‡ä»¶è·¯ç”±ï¼Œè¡¨ç¤ºä»¥/xxxå¼€å¤´çš„é™æ€æ–‡ä»¶éƒ½ä¼šå»staticsç›®å½•ä¸‹æ‰¾</span></span><br><span class="line">	r.Static(<span class="string">&quot;/xxx&quot;</span>, <span class="string">&quot;./statics&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è®¾ç½®æ¨¡æ¿å‡½æ•°</span></span><br><span class="line">	r.SetFuncMap(template.FuncMap&#123;</span><br><span class="line">		<span class="string">&quot;safe&quot;</span>: <span class="function"><span class="keyword">func</span><span class="params">(s <span class="type">string</span>)</span></span> template.HTML &#123;</span><br><span class="line">			<span class="keyword">return</span> template.HTML(s)</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åŠ è½½æ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line">	r.LoadHTMLGlob(<span class="string">&quot;templates/**/*&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¤„ç†/posts/indexè¯·æ±‚</span></span><br><span class="line">	r.GET(<span class="string">&quot;/posts/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.HTML(http.StatusOK, <span class="string">&quot;posts/index.tmpl&quot;</span>, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;title&quot;</span>: <span class="string">&quot;&lt;a href= https://uestcwxy.love&gt;wxyçš„åšå®¢&lt;/a&gt;&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¤„ç†/users/indexè¯·æ±‚</span></span><br><span class="line">	r.GET(<span class="string">&quot;/users/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.HTML(http.StatusOK, <span class="string">&quot;users/index.tmpl&quot;</span>, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;title&quot;</span>: <span class="string">&quot;https://uestcwxy.top&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¯åŠ¨æœåŠ¡å™¨</span></span><br><span class="line">	err := r.Run(<span class="string">&quot;:9000&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;æœåŠ¡å™¨å¯åŠ¨å¤±è´¥&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨æ¨¡æ¿ç»§æ‰¿"><a href="#ä½¿ç”¨æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="ä½¿ç”¨æ¨¡æ¿ç»§æ‰¿"></a>ä½¿ç”¨æ¨¡æ¿ç»§æ‰¿</h3><p>Ginæ¡†æ¶é»˜è®¤éƒ½æ˜¯ä½¿ç”¨å•æ¨¡æ¿ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨<code>block template</code>åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡<code>&quot;github.com/gin-contrib/multitemplate&quot;</code>åº“å®ç°ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>é¦–å…ˆï¼Œå‡è®¾æˆ‘ä»¬é¡¹ç›®ç›®å½•ä¸‹çš„templatesæ–‡ä»¶å¤¹ä¸‹æœ‰ä»¥ä¸‹æ¨¡æ¿æ–‡ä»¶ï¼Œå…¶ä¸­<code>home.tmpl</code>å’Œ<code>index.tmpl</code>ç»§æ‰¿äº†<code>base.tmpl</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">templates</span><br><span class="line">â”œâ”€â”€ includes</span><br><span class="line">â”‚   â”œâ”€â”€ home.tmpl</span><br><span class="line">â”‚   â””â”€â”€ index.tmpl</span><br><span class="line">â”œâ”€â”€ layouts</span><br><span class="line">â”‚   â””â”€â”€ base.tmpl</span><br><span class="line">â””â”€â”€ scripts.tmpl</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>loadTemplates</code>å‡½æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadTemplates</span><span class="params">(templatesDir <span class="type">string</span>)</span></span> multitemplate.Renderer &#123;</span><br><span class="line">	<span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ multitemplate.Renderer å®ä¾‹</span></span><br><span class="line">	r := multitemplate.NewRenderer()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åŠ è½½ layouts ç›®å½•ä¸‹çš„æ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line">	layouts, err := filepath.Glob(templatesDir + <span class="string">&quot;/layouts/*.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err.Error())</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åŠ è½½ includes ç›®å½•ä¸‹çš„æ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line">	includes, err := filepath.Glob(templatesDir + <span class="string">&quot;/includes/*.tmpl&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err.Error())</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ä¸º layouts/ å’Œ includes/ ç›®å½•ç”Ÿæˆ templates map</span></span><br><span class="line">	<span class="keyword">for</span> _, include := <span class="keyword">range</span> includes &#123;</span><br><span class="line">		<span class="comment">// åˆ›å»º layouts çš„å‰¯æœ¬</span></span><br><span class="line">		layoutCopy := <span class="built_in">make</span>([]<span class="type">string</span>, <span class="built_in">len</span>(layouts))</span><br><span class="line">		<span class="built_in">copy</span>(layoutCopy, layouts)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// å°† layouts å’Œ include ç»„åˆæˆä¸€ä¸ªæ–‡ä»¶åˆ‡ç‰‡</span></span><br><span class="line">		files := <span class="built_in">append</span>(layoutCopy, include)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// å°†æ–‡ä»¶åˆ‡ç‰‡æ·»åŠ åˆ° multitemplate.Renderer å®ä¾‹ä¸­</span></span><br><span class="line">		r.AddFromFiles(filepath.Base(include), files...)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨<code>main</code>å‡½æ•°ä¸­</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">indexFunc</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// æ¸²æŸ“ index.tmpl æ¨¡æ¿å¹¶è¿”å›ç»™å®¢æˆ·ç«¯</span></span><br><span class="line">	c.HTML(http.StatusOK, <span class="string">&quot;index.tmpl&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">homeFunc</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// æ¸²æŸ“ home.tmpl æ¨¡æ¿å¹¶è¿”å›ç»™å®¢æˆ·ç«¯</span></span><br><span class="line">	c.HTML(http.StatusOK, <span class="string">&quot;home.tmpl&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Gin å¼•æ“å®ä¾‹</span></span><br><span class="line">	r := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åŠ è½½æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶å°†è¿”å›çš„ multitemplate.Renderer å®ä¾‹èµ‹å€¼ç»™ Gin å¼•æ“çš„ HTMLRender å­—æ®µ</span></span><br><span class="line">	r.HTMLRender = loadTemplates(<span class="string">&quot;./templates&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è®¾ç½®è·¯ç”±å¤„ç†å‡½æ•°ï¼Œå¤„ç† /index è¯·æ±‚</span></span><br><span class="line">	r.GET(<span class="string">&quot;/index&quot;</span>, indexFunc)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è®¾ç½®è·¯ç”±å¤„ç†å‡½æ•°ï¼Œå¤„ç† /home è¯·æ±‚</span></span><br><span class="line">	r.GET(<span class="string">&quot;/home&quot;</span>, homeFunc)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¯åŠ¨æœåŠ¡å™¨ï¼Œç›‘å¬é»˜è®¤ç«¯å£</span></span><br><span class="line">	r.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è¡¥å……æ–‡ä»¶è·¯å¾„å¤„ç†"><a href="#è¡¥å……æ–‡ä»¶è·¯å¾„å¤„ç†" class="headerlink" title="è¡¥å……æ–‡ä»¶è·¯å¾„å¤„ç†"></a>è¡¥å……æ–‡ä»¶è·¯å¾„å¤„ç†</h3><p>å…³äºæ¨¡æ¿æ–‡ä»¶å’Œé™æ€æ–‡ä»¶çš„è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å…¬å¸&#x2F;é¡¹ç›®çš„è¦æ±‚è¿›è¡Œè®¾ç½®ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°è·å–å½“å‰æ‰§è¡Œç¨‹åºçš„è·¯å¾„ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;path/filepath&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getCurrentPath</span><span class="params">()</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	<span class="comment">// è·å–å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">	<span class="keyword">if</span> ex, err := os.Executable(); err == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">// è¿”å›å¯æ‰§è¡Œæ–‡ä»¶çš„ç›®å½•è·¯å¾„</span></span><br><span class="line">		<span class="keyword">return</span> filepath.Dir(ex)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// å¦‚æœè·å–è·¯å¾„å¤±è´¥ï¼Œåˆ™è¿”å›å½“å‰ç›®å½•è·¯å¾„</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;./&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JSONæ¸²æŸ“"><a href="#JSONæ¸²æŸ“" class="headerlink" title="JSONæ¸²æŸ“"></a>JSONæ¸²æŸ“</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// gin.H æ˜¯map[string]interface&#123;&#125;çš„ç¼©å†™</span></span><br><span class="line">	r.GET(<span class="string">&quot;/someJSON&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// æ–¹å¼ä¸€ï¼šè‡ªå·±æ‹¼æ¥JSON</span></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello world!&quot;</span>,</span><br><span class="line">			<span class="string">&quot;name&quot;</span>:    <span class="string">&quot;wxy&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	r.GET(<span class="string">&quot;/moreJSON&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// æ–¹æ³•äºŒï¼šä½¿ç”¨ç»“æ„ä½“</span></span><br><span class="line">		<span class="keyword">type</span> msg <span class="keyword">struct</span> &#123;</span><br><span class="line">			Name    <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">			Message <span class="type">string</span> <span class="string">`json:&quot;message&quot;`</span></span><br><span class="line">			Age     <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">		&#125;</span><br><span class="line">		data := msg&#123;<span class="string">&quot;121&quot;</span>, <span class="string">&quot;hh&quot;</span>, <span class="number">18</span>&#125;</span><br><span class="line">		c.JSON(http.StatusOK, data)</span><br><span class="line">	&#125;)</span><br><span class="line">	err := r.Run(<span class="string">&quot;:9090&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="XMLæ¸²æŸ“"><a href="#XMLæ¸²æŸ“" class="headerlink" title="XMLæ¸²æŸ“"></a>XMLæ¸²æŸ“</h3><p>æ³¨æ„éœ€è¦ä½¿ç”¨å…·åçš„ç»“æ„ä½“ç±»å‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line">	<span class="comment">// gin.H æ˜¯map[string]interface&#123;&#125;çš„ç¼©å†™</span></span><br><span class="line">	r.GET(<span class="string">&quot;/someXML&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// æ–¹å¼ä¸€ï¼šè‡ªå·±æ‹¼æ¥JSON</span></span><br><span class="line">		c.XML(http.StatusOK, gin.H&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello world!&quot;</span>&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	r.GET(<span class="string">&quot;/moreXML&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// æ–¹æ³•äºŒï¼šä½¿ç”¨ç»“æ„ä½“</span></span><br><span class="line">		<span class="keyword">type</span> MessageRecord <span class="keyword">struct</span> &#123;</span><br><span class="line">			Name    <span class="type">string</span></span><br><span class="line">			Message <span class="type">string</span></span><br><span class="line">			Age     <span class="type">int</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">var</span> msg MessageRecord</span><br><span class="line">		msg.Name = <span class="string">&quot;å°ç‹å­&quot;</span></span><br><span class="line">		msg.Message = <span class="string">&quot;Hello world!&quot;</span></span><br><span class="line">		msg.Age = <span class="number">18</span></span><br><span class="line">		c.XML(http.StatusOK, msg)</span><br><span class="line">	&#125;)</span><br><span class="line">	r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="YMALæ¸²æŸ“"><a href="#YMALæ¸²æŸ“" class="headerlink" title="YMALæ¸²æŸ“"></a>YMALæ¸²æŸ“</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">r.GET(<span class="string">&quot;/someYAML&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.YAML(http.StatusOK, gin.H&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;ok&quot;</span>, <span class="string">&quot;status&quot;</span>: http.StatusOK&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="protobufæ¸²æŸ“"><a href="#protobufæ¸²æŸ“" class="headerlink" title="protobufæ¸²æŸ“"></a>protobufæ¸²æŸ“</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">r.GET(<span class="string">&quot;/someProtoBuf&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	reps := []<span class="type">int64</span>&#123;<span class="type">int64</span>(<span class="number">1</span>), <span class="type">int64</span>(<span class="number">2</span>)&#125;</span><br><span class="line">	label := <span class="string">&quot;test&quot;</span></span><br><span class="line">	<span class="comment">// protobuf çš„å…·ä½“å®šä¹‰å†™åœ¨ testdata/protoexample æ–‡ä»¶ä¸­ã€‚</span></span><br><span class="line">	data := &amp;protoexample.Test&#123;</span><br><span class="line">		Label: &amp;label,</span><br><span class="line">		Reps:  reps,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// è¯·æ³¨æ„ï¼Œæ•°æ®åœ¨å“åº”ä¸­å˜ä¸ºäºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line">	<span class="comment">// å°†è¾“å‡ºè¢« protoexample.Test protobuf åºåˆ—åŒ–äº†çš„æ•°æ®</span></span><br><span class="line">	c.ProtoBuf(http.StatusOK, data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="è·å–å‚æ•°"><a href="#è·å–å‚æ•°" class="headerlink" title="è·å–å‚æ•°"></a>è·å–å‚æ•°</h2><h3 id="è·å–querystringå‚æ•°"><a href="#è·å–querystringå‚æ•°" class="headerlink" title="è·å–querystringå‚æ•°"></a>è·å–querystringå‚æ•°</h3><p><code>querystring</code>æŒ‡çš„æ˜¯URLä¸­<code>?</code>åé¢æºå¸¦çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼š<code>/user/search?username=wxy&amp;address=æ²™æ²³æ ¡åŒº</code>ã€‚ è·å–è¯·æ±‚çš„querystringå‚æ•°çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//Defaultè¿”å›ä¸€ä¸ªé»˜è®¤çš„è·¯ç”±å¼•æ“</span></span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.GET(<span class="string">&quot;/user/search&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		username := c.DefaultQuery(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;wxy&quot;</span>)</span><br><span class="line">		<span class="comment">//username := c.Query(&quot;username&quot;)</span></span><br><span class="line">		address := c.Query(<span class="string">&quot;address&quot;</span>)</span><br><span class="line">		<span class="comment">//è¾“å‡ºjsonç»“æœç»™è°ƒç”¨æ–¹</span></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>:  <span class="string">&quot;ok&quot;</span>,</span><br><span class="line">			<span class="string">&quot;username&quot;</span>: username,</span><br><span class="line">			<span class="string">&quot;address&quot;</span>:  address,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	err := r.Run()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è·å–formå‚æ•°"><a href="#è·å–formå‚æ•°" class="headerlink" title="è·å–formå‚æ•°"></a>è·å–formå‚æ•°</h3><p>å½“å‰ç«¯è¯·æ±‚çš„æ•°æ®é€šè¿‡formè¡¨å•æäº¤æ—¶ï¼Œä¾‹å¦‚å‘<code>/user/search</code>å‘é€ä¸€ä¸ªPOSTè¯·æ±‚ï¼Œè·å–è¯·æ±‚æ•°æ®çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//Defaultè¿”å›ä¸€ä¸ªé»˜è®¤çš„è·¯ç”±å¼•æ“</span></span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.POST(<span class="string">&quot;/user/search&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// DefaultPostFormå–ä¸åˆ°å€¼æ—¶ä¼šè¿”å›æŒ‡å®šçš„é»˜è®¤å€¼</span></span><br><span class="line">		<span class="comment">//username := c.DefaultPostForm(&quot;username&quot;, &quot;wxy&quot;)</span></span><br><span class="line">		username, ok := c.GetPostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			username = <span class="string">&quot;hhh&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//username := c.PostForm(&quot;username&quot;)</span></span><br><span class="line">		address := c.PostForm(<span class="string">&quot;address&quot;</span>)</span><br><span class="line">		<span class="comment">//è¾“å‡ºjsonç»“æœç»™è°ƒç”¨æ–¹</span></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>:  <span class="string">&quot;ok&quot;</span>,</span><br><span class="line">			<span class="string">&quot;username&quot;</span>: username,</span><br><span class="line">			<span class="string">&quot;address&quot;</span>:  address,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è·å–jsonå‚æ•°"><a href="#è·å–jsonå‚æ•°" class="headerlink" title="è·å–jsonå‚æ•°"></a>è·å–jsonå‚æ•°</h3><p>å½“å‰ç«¯è¯·æ±‚çš„æ•°æ®é€šè¿‡JSONæäº¤æ—¶ï¼Œä¾‹å¦‚å‘<code>/json</code>å‘é€ä¸€ä¸ªPOSTè¯·æ±‚ï¼Œåˆ™è·å–è¯·æ±‚å‚æ•°çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">r.POST(<span class="string">&quot;/json&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// æ³¨æ„ï¼šä¸‹é¢ä¸ºäº†ä¸¾ä¾‹å­æ–¹ä¾¿ï¼Œæš‚æ—¶å¿½ç•¥äº†é”™è¯¯å¤„ç†</span></span><br><span class="line">	b, _ := c.GetRawData()  <span class="comment">// ä»c.Request.Bodyè¯»å–è¯·æ±‚æ•°æ®</span></span><br><span class="line">	<span class="comment">// å®šä¹‰mapæˆ–ç»“æ„ä½“</span></span><br><span class="line">	<span class="keyword">var</span> m <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	<span class="comment">// ååºåˆ—åŒ–</span></span><br><span class="line">	_ = json.Unmarshal(b, &amp;m)</span><br><span class="line"></span><br><span class="line">	c.JSON(http.StatusOK, m)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ›´ä¾¿åˆ©çš„è·å–è¯·æ±‚å‚æ•°çš„æ–¹å¼ï¼Œå‚è§ä¸‹é¢çš„<strong>å‚æ•°ç»‘å®š</strong>å°èŠ‚ã€‚</p>
<h3 id="è·å–pathå‚æ•°"><a href="#è·å–pathå‚æ•°" class="headerlink" title="è·å–pathå‚æ•°"></a>è·å–pathå‚æ•°</h3><p>è¯·æ±‚çš„å‚æ•°é€šè¿‡URLè·¯å¾„ä¼ é€’ï¼Œä¾‹å¦‚ï¼š<code>/user/search/wxy/æ²™æ²³æ ¡åŒº</code>ã€‚ è·å–è¯·æ±‚URLè·¯å¾„ä¸­çš„å‚æ•°çš„æ–¹å¼å¦‚ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//Defaultè¿”å›ä¸€ä¸ªé»˜è®¤çš„è·¯ç”±å¼•æ“</span></span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.GET(<span class="string">&quot;/user/search/:username/:address&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		username := c.Param(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">		address := c.Param(<span class="string">&quot;address&quot;</span>)</span><br><span class="line">		<span class="comment">//è¾“å‡ºjsonç»“æœç»™è°ƒç”¨æ–¹</span></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>:  <span class="string">&quot;ok&quot;</span>,</span><br><span class="line">			<span class="string">&quot;username&quot;</span>: username,</span><br><span class="line">			<span class="string">&quot;address&quot;</span>:  address,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å‚æ•°ç»‘å®š"><a href="#å‚æ•°ç»‘å®š" class="headerlink" title="å‚æ•°ç»‘å®š"></a>å‚æ•°ç»‘å®š</h3><p>ä¸ºäº†èƒ½å¤Ÿæ›´æ–¹ä¾¿çš„è·å–è¯·æ±‚ç›¸å…³å‚æ•°ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¯·æ±‚çš„<code>Content-Type</code>è¯†åˆ«è¯·æ±‚æ•°æ®ç±»å‹å¹¶åˆ©ç”¨åå°„æœºåˆ¶è‡ªåŠ¨æå–è¯·æ±‚ä¸­<code>QueryString</code>ã€<code>formè¡¨å•</code>ã€<code>JSON</code>ã€<code>XML</code>ç­‰å‚æ•°åˆ°ç»“æ„ä½“ä¸­ã€‚ ä¸‹é¢çš„ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†<code>.ShouldBind()</code>å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒèƒ½å¤ŸåŸºäºè¯·æ±‚è‡ªåŠ¨æå–<code>JSON</code>ã€<code>formè¡¨å•</code>å’Œ<code>QueryString</code>ç±»å‹çš„æ•°æ®ï¼Œå¹¶æŠŠå€¼ç»‘å®šåˆ°æŒ‡å®šçš„ç»“æ„ä½“å¯¹è±¡ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Login ç»“æ„ä½“ç”¨äºç»‘å®šJSONæ•°æ®</span></span><br><span class="line"><span class="keyword">type</span> Login <span class="keyword">struct</span> &#123;</span><br><span class="line">	User     <span class="type">string</span> <span class="string">`form:&quot;user&quot; json:&quot;user&quot; binding:&quot;required&quot;`</span></span><br><span class="line">	Password <span class="type">string</span> <span class="string">`form:&quot;password&quot; json:&quot;password&quot; binding:&quot;required&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¤„ç†ç»‘å®šJSONçš„ç¤ºä¾‹è¯·æ±‚ (&#123;&quot;user&quot;: &quot;wxy&quot;, &quot;password&quot;: &quot;123456&quot;&#125;)</span></span><br><span class="line">	r.POST(<span class="string">&quot;/loginJSON&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">var</span> login Login</span><br><span class="line"></span><br><span class="line">		<span class="comment">// å°†è¯·æ±‚ä¸­çš„JSONæ•°æ®ç»‘å®šåˆ°Loginç»“æ„ä½“</span></span><br><span class="line">		<span class="keyword">if</span> err := c.ShouldBind(&amp;login); err == <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;ç™»å½•ä¿¡æ¯ï¼š%#v\n&quot;</span>, login)</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;user&quot;</span>:     login.User,</span><br><span class="line">				<span class="string">&quot;password&quot;</span>: login.Password,</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			c.JSON(http.StatusBadRequest, gin.H&#123;<span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¤„ç†ç»‘å®šformè¡¨å•çš„ç¤ºä¾‹è¯·æ±‚ (user=q1mi&amp;password=123456)</span></span><br><span class="line">	r.POST(<span class="string">&quot;/loginForm&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">var</span> login Login</span><br><span class="line"></span><br><span class="line">		<span class="comment">// æ ¹æ®è¯·æ±‚çš„Content-Typeè‡ªåŠ¨é€‰æ‹©ç»‘å®šå™¨è¿›è¡Œç»‘å®š</span></span><br><span class="line">		<span class="keyword">if</span> err := c.ShouldBind(&amp;login); err == <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;user&quot;</span>:     login.User,</span><br><span class="line">				<span class="string">&quot;password&quot;</span>: login.Password,</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			c.JSON(http.StatusBadRequest, gin.H&#123;<span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¤„ç†ç»‘å®šQueryStringçš„ç¤ºä¾‹è¯·æ±‚ (/loginQuery?user=q1mi&amp;password=123456)</span></span><br><span class="line">	r.GET(<span class="string">&quot;/loginForm&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">var</span> login Login</span><br><span class="line"></span><br><span class="line">		<span class="comment">// æ ¹æ®è¯·æ±‚çš„Content-Typeè‡ªåŠ¨é€‰æ‹©ç»‘å®šå™¨è¿›è¡Œç»‘å®š</span></span><br><span class="line">		<span class="keyword">if</span> err := c.ShouldBind(&amp;login); err == <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;user&quot;</span>:     login.User,</span><br><span class="line">				<span class="string">&quot;password&quot;</span>: login.Password,</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			c.JSON(http.StatusBadRequest, gin.H&#123;<span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ç›‘å¬å¹¶åœ¨0.0.0.0:8080ä¸Šæä¾›æœåŠ¡</span></span><br><span class="line">	err := r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ShouldBind</code> å‡½æ•°ä¼šæ ¹æ®è¯·æ±‚çš„æ–¹æ³•å’Œå†…å®¹ç±»å‹é€‰æ‹©é€‚å½“çš„ç»‘å®šå¼•æ“è¿›è¡Œæ•°æ®ç»‘å®šã€‚å¯¹äº <code>GET</code> è¯·æ±‚ï¼Œåªä½¿ç”¨æŸ¥è¯¢å‚æ•°ç»‘å®šï¼›å¯¹äº <code>POST</code> è¯·æ±‚ï¼Œä¼˜å…ˆè€ƒè™‘ JSON æˆ– XML æ•°æ®ç»‘å®šï¼Œå¦‚æœä¸æ˜¯ JSON æˆ– XMLï¼Œåˆ™ä½¿ç”¨è¡¨å•æ•°æ®ç»‘å®šã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°å°†è¯·æ±‚ä¸­çš„æ•°æ®è§£æå¹¶ç»‘å®šåˆ°ç»“æ„ä½“ä¸­ï¼Œä»¥ä¾¿åœ¨å¤„ç†è¯·æ±‚æ—¶ä½¿ç”¨è¿™äº›æ•°æ®ã€‚</p>
<h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><h3 id="å•ä¸ªæ–‡ä»¶ä¸Šä¼ "><a href="#å•ä¸ªæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="å•ä¸ªæ–‡ä»¶ä¸Šä¼ "></a>å•ä¸ªæ–‡ä»¶ä¸Šä¼ </h3><p>æ–‡ä»¶ä¸Šä¼ å‰ç«¯é¡µé¢ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ä¸Šä¼ æ–‡ä»¶ç¤ºä¾‹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;f1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸Šä¼ &quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åç«¯ginæ¡†æ¶éƒ¨åˆ†ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line">	<span class="comment">// å¤„ç†multipart formsæäº¤æ–‡ä»¶æ—¶é»˜è®¤çš„å†…å­˜é™åˆ¶æ˜¯32 MiB</span></span><br><span class="line">	<span class="comment">// å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼ä¿®æ”¹</span></span><br><span class="line">	<span class="comment">// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB</span></span><br><span class="line">	router.POST(<span class="string">&quot;/upload&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// å•ä¸ªæ–‡ä»¶</span></span><br><span class="line">		file, err := c.FormFile(<span class="string">&quot;f1&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusInternalServerError, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;message&quot;</span>: err.Error(),</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		log.Println(file.Filename)</span><br><span class="line">		dst := fmt.Sprintf(<span class="string">&quot;C:/tmp/%s&quot;</span>, file.Filename)</span><br><span class="line">		<span class="comment">// ä¸Šä¼ æ–‡ä»¶åˆ°æŒ‡å®šçš„ç›®å½•</span></span><br><span class="line">		c.SaveUploadedFile(file, dst)</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>: fmt.Sprintf(<span class="string">&quot;&#x27;%s&#x27; uploaded!&quot;</span>, file.Filename),</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	router.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¤šä¸ªæ–‡ä»¶ä¸Šä¼ "><a href="#å¤šä¸ªæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="å¤šä¸ªæ–‡ä»¶ä¸Šä¼ "></a>å¤šä¸ªæ–‡ä»¶ä¸Šä¼ </h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line">	<span class="comment">// å¤„ç†multipart formsæäº¤æ–‡ä»¶æ—¶é»˜è®¤çš„å†…å­˜é™åˆ¶æ˜¯32 MiB</span></span><br><span class="line">	<span class="comment">// å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼ä¿®æ”¹</span></span><br><span class="line">	<span class="comment">// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB</span></span><br><span class="line">	router.POST(<span class="string">&quot;/upload&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// Multipart form</span></span><br><span class="line">		form, _ := c.MultipartForm()</span><br><span class="line">		files := form.File[<span class="string">&quot;file&quot;</span>]</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> index, file := <span class="keyword">range</span> files &#123;</span><br><span class="line">			log.Println(file.Filename)</span><br><span class="line">			dst := fmt.Sprintf(<span class="string">&quot;./upload/%s_%d&quot;</span>, file.Filename, index)</span><br><span class="line">			<span class="comment">// ä¸Šä¼ æ–‡ä»¶åˆ°æŒ‡å®šçš„ç›®å½•</span></span><br><span class="line">			c.SaveUploadedFile(file, dst)</span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>: fmt.Sprintf(<span class="string">&quot;%d files uploaded!&quot;</span>, <span class="built_in">len</span>(files)),</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	router.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h2><h3 id="HTTPé‡å®šå‘"><a href="#HTTPé‡å®šå‘" class="headerlink" title="HTTPé‡å®šå‘"></a>HTTPé‡å®šå‘</h3><p>HTTP é‡å®šå‘å¾ˆå®¹æ˜“ã€‚ å†…éƒ¨ã€å¤–éƒ¨é‡å®šå‘å‡æ”¯æŒã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.GET(<span class="string">&quot;/test&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.Redirect(http.StatusMovedPermanently, <span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="comment">// Listen and serve on 0.0.0.0:8080</span></span><br><span class="line">	err := r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±é‡å®šå‘"><a href="#è·¯ç”±é‡å®šå‘" class="headerlink" title="è·¯ç”±é‡å®šå‘"></a>è·¯ç”±é‡å®šå‘</h3><p>è·¯ç”±é‡å®šå‘ï¼Œä½¿ç”¨<code>HandleContext</code>ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.GET(<span class="string">&quot;/test&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// æŒ‡å®šé‡å®šå‘çš„URL</span></span><br><span class="line">		c.Request.URL.Path = <span class="string">&quot;/test2&quot;</span></span><br><span class="line">		r.HandleContext(c)</span><br><span class="line">	&#125;)</span><br><span class="line">	r.GET(<span class="string">&quot;/test2&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;hello&quot;</span>: <span class="string">&quot;world&quot;</span>&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="comment">// Listen and serve on 0.0.0.0:8080</span></span><br><span class="line">	err := r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Ginè·¯ç”±"><a href="#Ginè·¯ç”±" class="headerlink" title="Ginè·¯ç”±"></a>Ginè·¯ç”±</h2><h3 id="æ™®é€šè·¯ç”±"><a href="#æ™®é€šè·¯ç”±" class="headerlink" title="æ™®é€šè·¯ç”±"></a>æ™®é€šè·¯ç”±</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">r.GET(<span class="string">&quot;/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br><span class="line">r.GET(<span class="string">&quot;/login&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br><span class="line">r.POST(<span class="string">&quot;/login&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¯ä»¥åŒ¹é…æ‰€æœ‰è¯·æ±‚æ–¹æ³•çš„<code>Any</code>æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.Any(<span class="string">&quot;/user&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">switch</span> c.Request.Method &#123;</span><br><span class="line">		<span class="keyword">case</span> http.MethodGet:</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;method&quot;</span>: http.MethodGet&#125;)</span><br><span class="line">		<span class="keyword">case</span> http.MethodPost:</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;method&quot;</span>: http.MethodPost&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">	err := r.Run()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err.Error())</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºæ²¡æœ‰é…ç½®å¤„ç†å‡½æ•°çš„è·¯ç”±æ·»åŠ å¤„ç†ç¨‹åºï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¿”å›404ä»£ç ï¼Œä¸‹é¢çš„ä»£ç ä¸ºæ²¡æœ‰åŒ¹é…åˆ°è·¯ç”±çš„è¯·æ±‚éƒ½è¿”å›<code>views/404.html</code>é¡µé¢ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">r.NoRoute(<span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.HTML(http.StatusNotFound, <span class="string">&quot;views/404.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±ç»„"><a href="#è·¯ç”±ç»„" class="headerlink" title="è·¯ç”±ç»„"></a>è·¯ç”±ç»„</h3><p>æˆ‘ä»¬å¯ä»¥å°†æ‹¥æœ‰å…±åŒURLå‰ç¼€çš„è·¯ç”±åˆ’åˆ†ä¸ºä¸€ä¸ªè·¯ç”±ç»„ã€‚ä¹ æƒ¯æ€§ä¸€å¯¹<code>&#123;&#125;</code>åŒ…è£¹åŒç»„çš„è·¯ç”±ï¼Œè¿™åªæ˜¯ä¸ºäº†çœ‹ç€æ¸…æ™°ï¼Œä½ ç”¨ä¸ç”¨<code>&#123;&#125;</code>åŒ…è£¹åŠŸèƒ½ä¸Šæ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line">	userGroup := r.Group(<span class="string">&quot;/user&quot;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		userGroup.GET(<span class="string">&quot;/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;)</span><br><span class="line">		userGroup.GET(<span class="string">&quot;/login&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;)</span><br><span class="line">		userGroup.POST(<span class="string">&quot;/login&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	shopGroup := r.Group(<span class="string">&quot;/shop&quot;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		shopGroup.GET(<span class="string">&quot;/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;)</span><br><span class="line">		shopGroup.GET(<span class="string">&quot;/cart&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;)</span><br><span class="line">		shopGroup.POST(<span class="string">&quot;/checkout&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	err := r.Run()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err.Error())</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·¯ç”±ç»„ä¹Ÿæ˜¯æ”¯æŒåµŒå¥—çš„ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">shopGroup := r.Group(<span class="string">&quot;/shop&quot;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		shopGroup.GET(<span class="string">&quot;/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br><span class="line">		shopGroup.GET(<span class="string">&quot;/cart&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br><span class="line">		shopGroup.POST(<span class="string">&quot;/checkout&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br><span class="line">		<span class="comment">// åµŒå¥—è·¯ç”±ç»„</span></span><br><span class="line">		xx := shopGroup.Group(<span class="string">&quot;xx&quot;</span>)</span><br><span class="line">		xx.GET(<span class="string">&quot;/oo&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸æˆ‘ä»¬å°†è·¯ç”±åˆ†ç»„ç”¨åœ¨åˆ’åˆ†ä¸šåŠ¡é€»è¾‘æˆ–åˆ’åˆ†APIç‰ˆæœ¬æ—¶ã€‚</p>
<h3 id="è·¯ç”±åŸç†"><a href="#è·¯ç”±åŸç†" class="headerlink" title="è·¯ç”±åŸç†"></a>è·¯ç”±åŸç†</h3><p>Ginæ¡†æ¶çš„è·¯ç”±åŸç†æ˜¯ä½¿ç”¨å‰ç¼€æ ‘çš„æ–¹å¼å®ç°çš„åŠ¨æ€è·¯ç”±ã€‚å®ƒä½¿ç”¨äº†å®šåˆ¶ç‰ˆæœ¬çš„httprouterï¼Œå…¶è·¯ç”±åŸç†æ˜¯å¤§é‡ä½¿ç”¨å…¬å…±å‰ç¼€çš„æ ‘ç»“æ„ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªç´§å‡‘çš„Trie treeï¼ˆæˆ–è€…åªæ˜¯Radix Treeï¼‰ã€‚</p>
<h2 id="Ginä¸­é—´ä»¶"><a href="#Ginä¸­é—´ä»¶" class="headerlink" title="Ginä¸­é—´ä»¶"></a>Ginä¸­é—´ä»¶</h2><p>Ginæ¡†æ¶å…è®¸å¼€å‘è€…åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼ŒåŠ å…¥ç”¨æˆ·è‡ªå·±çš„é’©å­ï¼ˆHookï¼‰å‡½æ•°ã€‚è¿™ä¸ªé’©å­å‡½æ•°å°±å«ä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶é€‚åˆå¤„ç†ä¸€äº›å…¬å…±çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚ç™»å½•è®¤è¯ã€æƒé™æ ¡éªŒã€æ•°æ®åˆ†é¡µã€è®°å½•æ—¥å¿—ã€è€—æ—¶ç»Ÿè®¡ç­‰ã€‚</p>
<h3 id="å®šä¹‰ä¸­é—´ä»¶"><a href="#å®šä¹‰ä¸­é—´ä»¶" class="headerlink" title="å®šä¹‰ä¸­é—´ä»¶"></a>å®šä¹‰ä¸­é—´ä»¶</h3><p>Ginä¸­çš„ä¸­é—´ä»¶å¿…é¡»æ˜¯ä¸€ä¸ª<code>gin.HandlerFunc</code>ç±»å‹ã€‚</p>
<h4 id="è®°å½•æ¥å£è€—æ—¶çš„ä¸­é—´ä»¶"><a href="#è®°å½•æ¥å£è€—æ—¶çš„ä¸­é—´ä»¶" class="headerlink" title="è®°å½•æ¥å£è€—æ—¶çš„ä¸­é—´ä»¶"></a>è®°å½•æ¥å£è€—æ—¶çš„ä¸­é—´ä»¶</h4><p>ä¾‹å¦‚æˆ‘ä»¬åƒä¸‹é¢çš„ä»£ç ä¸€æ ·å®šä¹‰ä¸€ä¸ªç»Ÿè®¡è¯·æ±‚è€—æ—¶çš„ä¸­é—´ä»¶ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// StatCost æ˜¯ä¸€ä¸ªç»Ÿè®¡è€—æ—¶è¯·æ±‚è€—æ—¶çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">StatCost</span><span class="params">()</span></span> gin.HandlerFunc &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		start := time.Now()</span><br><span class="line">		c.Set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;wxy&quot;</span>) <span class="comment">// å¯ä»¥é€šè¿‡c.Setåœ¨è¯·æ±‚ä¸Šä¸‹æ–‡ä¸­è®¾ç½®å€¼ï¼Œåç»­çš„å¤„ç†å‡½æ•°èƒ½å¤Ÿå–åˆ°è¯¥å€¼</span></span><br><span class="line">		<span class="comment">// è°ƒç”¨è¯¥è¯·æ±‚çš„å‰©ä½™å¤„ç†ç¨‹åº</span></span><br><span class="line">		c.Next()</span><br><span class="line">		<span class="comment">// ä¸è°ƒç”¨è¯¥è¯·æ±‚çš„å‰©ä½™å¤„ç†ç¨‹åº</span></span><br><span class="line">		<span class="comment">// c.Abort()</span></span><br><span class="line">		<span class="comment">// è®¡ç®—è€—æ—¶</span></span><br><span class="line">		cost := time.Since(start)</span><br><span class="line">		log.Println(cost)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è®°å½•å“åº”ä½“çš„ä¸­é—´ä»¶"><a href="#è®°å½•å“åº”ä½“çš„ä¸­é—´ä»¶" class="headerlink" title="è®°å½•å“åº”ä½“çš„ä¸­é—´ä»¶"></a>è®°å½•å“åº”ä½“çš„ä¸­é—´ä»¶</h4><p>æˆ‘ä»¬æœ‰æ—¶å€™å¯èƒ½ä¼šæƒ³è¦è®°å½•ä¸‹æŸäº›æƒ…å†µä¸‹è¿”å›ç»™å®¢æˆ·ç«¯çš„å“åº”æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç¼–å†™ä¸€ä¸ªä¸­é—´ä»¶æ¥æå®šã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> bodyLogWriter <span class="keyword">struct</span> &#123;</span><br><span class="line">	gin.ResponseWriter               <span class="comment">// åµŒå…¥ginæ¡†æ¶ResponseWriter</span></span><br><span class="line">	body               *bytes.Buffer <span class="comment">// æˆ‘ä»¬è®°å½•ç”¨çš„response</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Write å†™å…¥å“åº”ä½“æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w bodyLogWriter)</span></span> Write(b []<span class="type">byte</span>) (<span class="type">int</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	w.body.Write(b)                  <span class="comment">// æˆ‘ä»¬è®°å½•ä¸€ä»½</span></span><br><span class="line">	<span class="keyword">return</span> w.ResponseWriter.Write(b) <span class="comment">// çœŸæ­£å†™å…¥å“åº”</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ginBodyLogMiddleware ä¸€ä¸ªè®°å½•è¿”å›ç»™å®¢æˆ·ç«¯å“åº”ä½“çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// https://stackoverflow.com/questions/38501325/how-to-log-response-body-in-gin</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ginBodyLogMiddleware</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	blw := &amp;bodyLogWriter&#123;body: bytes.NewBuffer([]<span class="type">byte</span>&#123;&#125;), ResponseWriter: c.Writer&#125;</span><br><span class="line">	c.Writer = blw <span class="comment">// ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»å‹æ›¿æ¢é»˜è®¤çš„</span></span><br><span class="line"></span><br><span class="line">	c.Next() <span class="comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;Response body: &quot;</span> + blw.body.String()) <span class="comment">// äº‹åæŒ‰éœ€è®°å½•è¿”å›çš„å“åº”</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è·¨åŸŸä¸­é—´ä»¶cors"><a href="#è·¨åŸŸä¸­é—´ä»¶cors" class="headerlink" title="è·¨åŸŸä¸­é—´ä»¶cors"></a>è·¨åŸŸä¸­é—´ä»¶cors</h4><p>æ¨èä½¿ç”¨ç¤¾åŒºçš„<a href="https://github.com/gin-contrib/cors">https://github.com/gin-contrib/cors</a> åº“ï¼Œä¸€è¡Œä»£ç è§£å†³å‰åç«¯åˆ†ç¦»æ¶æ„ä¸‹çš„è·¨åŸŸé—®é¢˜ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> è¯¥ä¸­é—´ä»¶éœ€è¦æ³¨å†Œåœ¨ä¸šåŠ¡å¤„ç†å‡½æ•°å‰é¢ã€‚</p>
<p>è¿™ä¸ªåº“æ”¯æŒå„ç§å¸¸ç”¨çš„é…ç½®é¡¹ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;github.com/gin-contrib/cors&quot;</span></span><br><span class="line">  <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  router := gin.Default()</span><br><span class="line">  <span class="comment">// CORS for https://foo.com and https://github.com origins, allowing:</span></span><br><span class="line">  <span class="comment">// - PUT and PATCH methods</span></span><br><span class="line">  <span class="comment">// - Origin header</span></span><br><span class="line">  <span class="comment">// - Credentials share</span></span><br><span class="line">  <span class="comment">// - Preflight requests cached for 12 hours</span></span><br><span class="line">  router.Use(cors.New(cors.Config&#123;</span><br><span class="line">    AllowOrigins:     []<span class="type">string</span>&#123;<span class="string">&quot;https://foo.com&quot;</span>&#125;,  <span class="comment">// å…è®¸è·¨åŸŸå‘æ¥è¯·æ±‚çš„ç½‘ç«™</span></span><br><span class="line">    AllowMethods:     []<span class="type">string</span>&#123;<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;DELETE&quot;</span>,  <span class="string">&quot;OPTIONS&quot;</span>&#125;,  <span class="comment">// å…è®¸çš„è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">    AllowHeaders:     []<span class="type">string</span>&#123;<span class="string">&quot;Origin&quot;</span>, <span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;Content-Type&quot;</span>&#125;,</span><br><span class="line">    ExposeHeaders:    []<span class="type">string</span>&#123;<span class="string">&quot;Content-Length&quot;</span>&#125;,</span><br><span class="line">    AllowCredentials: <span class="literal">true</span>,</span><br><span class="line">    AllowOriginFunc: <span class="function"><span class="keyword">func</span><span class="params">(origin <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;  <span class="comment">// è‡ªå®šä¹‰è¿‡æ»¤æºç«™çš„æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">return</span> origin == <span class="string">&quot;https://github.com&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    MaxAge: <span class="number">12</span> * time.Hour,</span><br><span class="line">  &#125;))</span><br><span class="line">  router.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä½ å¯ä»¥ç®€å•çš„åƒä¸‹é¢çš„ç¤ºä¾‹ä»£ç é‚£æ ·ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œå…è®¸æ‰€æœ‰çš„è·¨åŸŸè¯·æ±‚ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  router := gin.Default()</span><br><span class="line">  <span class="comment">// same as</span></span><br><span class="line">  <span class="comment">// config := cors.DefaultConfig()</span></span><br><span class="line">  <span class="comment">// config.AllowAllOrigins = true</span></span><br><span class="line">  <span class="comment">// router.Use(cors.New(config))</span></span><br><span class="line">  router.Use(cors.Default())</span><br><span class="line">  router.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨å†Œä¸­é—´ä»¶"><a href="#æ³¨å†Œä¸­é—´ä»¶" class="headerlink" title="æ³¨å†Œä¸­é—´ä»¶"></a>æ³¨å†Œä¸­é—´ä»¶</h3><p>åœ¨ginæ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªè·¯ç”±æ·»åŠ ä»»æ„æ•°é‡çš„ä¸­é—´ä»¶ã€‚</p>
<h4 id="ä¸ºå…¨å±€è·¯ç”±æ³¨å†Œ"><a href="#ä¸ºå…¨å±€è·¯ç”±æ³¨å†Œ" class="headerlink" title="ä¸ºå…¨å±€è·¯ç”±æ³¨å†Œ"></a>ä¸ºå…¨å±€è·¯ç”±æ³¨å†Œ</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// æ–°å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”±</span></span><br><span class="line">	r := gin.New()</span><br><span class="line">	<span class="comment">// æ³¨å†Œä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶</span></span><br><span class="line">	r.Use(StatCost())</span><br><span class="line">	</span><br><span class="line">	r.GET(<span class="string">&quot;/test&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		name := c.MustGet(<span class="string">&quot;name&quot;</span>).(<span class="type">string</span>) <span class="comment">// ä»ä¸Šä¸‹æ–‡å–å€¼</span></span><br><span class="line">		log.Println(name)</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello world!&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	r.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¸ºæŸä¸ªè·¯ç”±å•ç‹¬æ³¨å†Œ"><a href="#ä¸ºæŸä¸ªè·¯ç”±å•ç‹¬æ³¨å†Œ" class="headerlink" title="ä¸ºæŸä¸ªè·¯ç”±å•ç‹¬æ³¨å†Œ"></a>ä¸ºæŸä¸ªè·¯ç”±å•ç‹¬æ³¨å†Œ</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç»™/test2è·¯ç”±å•ç‹¬æ³¨å†Œä¸­é—´ä»¶ï¼ˆå¯æ³¨å†Œå¤šä¸ªï¼‰</span></span><br><span class="line">	r.GET(<span class="string">&quot;/test2&quot;</span>, StatCost(), <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		name := c.MustGet(<span class="string">&quot;name&quot;</span>).(<span class="type">string</span>) <span class="comment">// ä»ä¸Šä¸‹æ–‡å–å€¼</span></span><br><span class="line">		log.Println(name)</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello world!&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="ä¸ºè·¯ç”±ç»„æ³¨å†Œä¸­é—´ä»¶"><a href="#ä¸ºè·¯ç”±ç»„æ³¨å†Œä¸­é—´ä»¶" class="headerlink" title="ä¸ºè·¯ç”±ç»„æ³¨å†Œä¸­é—´ä»¶"></a>ä¸ºè·¯ç”±ç»„æ³¨å†Œä¸­é—´ä»¶</h4><p>ä¸ºè·¯ç”±ç»„æ³¨å†Œä¸­é—´ä»¶æœ‰ä»¥ä¸‹ä¸¤ç§å†™æ³•ã€‚</p>
<p>å†™æ³•1ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">shopGroup := r.Group(<span class="string">&quot;/shop&quot;</span>, StatCost())</span><br><span class="line">&#123;</span><br><span class="line">    shopGroup.GET(<span class="string">&quot;/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†™æ³•2ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">shopGroup := r.Group(<span class="string">&quot;/shop&quot;</span>)</span><br><span class="line">shopGroup.Use(StatCost())</span><br><span class="line">&#123;</span><br><span class="line">    shopGroup.GET(<span class="string">&quot;/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;...&#125;)</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸­é—´ä»¶æ³¨æ„äº‹é¡¹"><a href="#ä¸­é—´ä»¶æ³¨æ„äº‹é¡¹" class="headerlink" title="ä¸­é—´ä»¶æ³¨æ„äº‹é¡¹"></a>ä¸­é—´ä»¶æ³¨æ„äº‹é¡¹</h3><h4 id="giné»˜è®¤ä¸­é—´ä»¶"><a href="#giné»˜è®¤ä¸­é—´ä»¶" class="headerlink" title="giné»˜è®¤ä¸­é—´ä»¶"></a>giné»˜è®¤ä¸­é—´ä»¶</h4><p><code>gin.Default()</code>é»˜è®¤ä½¿ç”¨äº†<code>Logger</code>å’Œ<code>Recovery</code>ä¸­é—´ä»¶ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>Logger</code>ä¸­é—´ä»¶å°†æ—¥å¿—å†™å…¥<code>gin.DefaultWriter</code>ï¼Œå³ä½¿é…ç½®äº†<code>GIN_MODE=release</code>ã€‚</li>
<li><code>Recovery</code>ä¸­é—´ä»¶ä¼šrecoverä»»ä½•<code>panic</code>ã€‚å¦‚æœæœ‰panicçš„è¯ï¼Œä¼šå†™å…¥500å“åº”ç ã€‚</li>
</ul>
<p>å¦‚æœä¸æƒ³ä½¿ç”¨ä¸Šé¢ä¸¤ä¸ªé»˜è®¤çš„ä¸­é—´ä»¶ï¼Œå¯ä»¥ä½¿ç”¨<code>gin.New()</code>æ–°å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”±ã€‚</p>
<h4 id="ginä¸­é—´ä»¶ä¸­ä½¿ç”¨goroutine"><a href="#ginä¸­é—´ä»¶ä¸­ä½¿ç”¨goroutine" class="headerlink" title="ginä¸­é—´ä»¶ä¸­ä½¿ç”¨goroutine"></a>ginä¸­é—´ä»¶ä¸­ä½¿ç”¨goroutine</h4><p>å½“åœ¨ä¸­é—´ä»¶æˆ–<code>handler</code>ä¸­å¯åŠ¨æ–°çš„<code>goroutine</code>æ—¶ï¼Œ<strong>ä¸èƒ½ä½¿ç”¨</strong>åŸå§‹çš„ä¸Šä¸‹æ–‡ï¼ˆc *gin.Contextï¼‰ï¼Œå¿…é¡»ä½¿ç”¨å…¶åªè¯»å‰¯æœ¬ï¼ˆ<code>c.Copy()</code>ï¼‰ã€‚</p>
<h2 id="è¿è¡Œå¤šä¸ªæœåŠ¡"><a href="#è¿è¡Œå¤šä¸ªæœåŠ¡" class="headerlink" title="è¿è¡Œå¤šä¸ªæœåŠ¡"></a>è¿è¡Œå¤šä¸ªæœåŠ¡</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨å¤šä¸ªç«¯å£å¯åŠ¨æœåŠ¡ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;golang.org/x/sync/errgroup&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	g errgroup.Group</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">router01</span><span class="params">()</span></span> http.Handler &#123;</span><br><span class="line">	e := gin.New()</span><br><span class="line">	e.Use(gin.Recovery())</span><br><span class="line">	e.GET(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.JSON(</span><br><span class="line">			http.StatusOK,</span><br><span class="line">			gin.H&#123;</span><br><span class="line">				<span class="string">&quot;code&quot;</span>:  http.StatusOK,</span><br><span class="line">				<span class="string">&quot;error&quot;</span>: <span class="string">&quot;Welcome server 01&quot;</span>,</span><br><span class="line">			&#125;,</span><br><span class="line">		)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> e</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">router02</span><span class="params">()</span></span> http.Handler &#123;</span><br><span class="line">	e := gin.New()</span><br><span class="line">	e.Use(gin.Recovery())</span><br><span class="line">	e.GET(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.JSON(</span><br><span class="line">			http.StatusOK,</span><br><span class="line">			gin.H&#123;</span><br><span class="line">				<span class="string">&quot;code&quot;</span>:  http.StatusOK,</span><br><span class="line">				<span class="string">&quot;error&quot;</span>: <span class="string">&quot;Welcome server 02&quot;</span>,</span><br><span class="line">			&#125;,</span><br><span class="line">		)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> e</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	server01 := &amp;http.Server&#123;</span><br><span class="line">		Addr:         <span class="string">&quot;:8080&quot;</span>,</span><br><span class="line">		Handler:      router01(),</span><br><span class="line">		ReadTimeout:  <span class="number">5</span> * time.Second,</span><br><span class="line">		WriteTimeout: <span class="number">10</span> * time.Second,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	server02 := &amp;http.Server&#123;</span><br><span class="line">		Addr:         <span class="string">&quot;:8081&quot;</span>,</span><br><span class="line">		Handler:      router02(),</span><br><span class="line">		ReadTimeout:  <span class="number">5</span> * time.Second,</span><br><span class="line">		WriteTimeout: <span class="number">10</span> * time.Second,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å€ŸåŠ© errgroup.Group æˆ–è€…è‡ªè¡Œå¼€å¯ä¸¤ä¸ª goroutine åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªæœåŠ¡</span></span><br><span class="line">	g.Go(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">error</span> &#123;</span><br><span class="line">		<span class="comment">// å¯åŠ¨ server01 æœåŠ¡</span></span><br><span class="line">		<span class="keyword">return</span> server01.ListenAndServe()</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	g.Go(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">error</span> &#123;</span><br><span class="line">		<span class="comment">// å¯åŠ¨ server02 æœåŠ¡</span></span><br><span class="line">		<span class="keyword">return</span> server02.ListenAndServe()</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ç­‰å¾…æ‰€æœ‰ goroutine å®Œæˆï¼Œå¹¶è¿”å›å¯èƒ½å‘ç”Ÿçš„é”™è¯¯</span></span><br><span class="line">	<span class="keyword">if</span> err := g.Wait(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒ<a href="https://www.liwenzhou.com/">ææ–‡å‘¨çš„åšå®¢</a>è¿›è¡Œæ•´ç†</p>
]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>goçš„ç¼–ç è§„èŒƒ</title>
    <url>/2023/06/01/Go/3/</url>
    <content><![CDATA[<h1 id="ç¼–ç è§„èŒƒ"><a href="#ç¼–ç è§„èŒƒ" class="headerlink" title="ç¼–ç è§„èŒƒ"></a>ç¼–ç è§„èŒƒ</h1><p>æœ¬è§„èŒƒæ—¨åœ¨ä¸ºæ—¥å¸¸Goé¡¹ç›®å¼€å‘æä¾›ä¸€ä¸ªä»£ç çš„è§„èŒƒæŒ‡å¯¼ï¼Œæ–¹ä¾¿å›¢é˜Ÿå½¢æˆä¸€ä¸ªç»Ÿä¸€çš„ä»£ç é£æ ¼ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œè§„èŒƒæ€§å’Œç»Ÿä¸€æ€§ã€‚æœ¬è§„èŒƒå°†ä»å‘½åè§„èŒƒï¼Œæ³¨é‡Šè§„èŒƒï¼Œä»£ç é£æ ¼å’Œ Go è¯­è¨€æä¾›çš„å¸¸ç”¨çš„å·¥å…·è¿™å‡ ä¸ªæ–¹é¢åšä¸€ä¸ªè¯´æ˜ã€‚è¯¥è§„èŒƒå‚è€ƒäº† go è¯­è¨€å®˜æ–¹ä»£ç çš„é£æ ¼åˆ¶å®šã€‚</p>
<h2 id="å‘½åè§„èŒƒ"><a href="#å‘½åè§„èŒƒ" class="headerlink" title="å‘½åè§„èŒƒ"></a>å‘½åè§„èŒƒ</h2><p>å‘½åæ˜¯ä»£ç è§„èŒƒä¸­å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œç»Ÿä¸€çš„å‘½åè§„åˆ™æœ‰åˆ©äºæé«˜çš„ä»£ç çš„å¯è¯»æ€§ï¼Œå¥½çš„å‘½åä»…ä»…é€šè¿‡å‘½åå°±å¯ä»¥è·å–åˆ°è¶³å¤Ÿå¤šçš„ä¿¡æ¯ã€‚</p>
<p>Goåœ¨å‘½åæ—¶ä»¥å­—æ¯aåˆ°Zæˆ–aåˆ°Zæˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåé¢è·Ÿç€é›¶æˆ–æ›´å¤šçš„å­—æ¯ã€ä¸‹åˆ’çº¿å’Œæ•°å­—(0åˆ°9)ã€‚Goä¸å…è®¸åœ¨å‘½åæ—¶ä¸­ä½¿ç”¨@ã€$å’Œ%ç­‰æ ‡ç‚¹ç¬¦å·ã€‚Goæ˜¯ä¸€ç§åŒºåˆ†å¤§å°å†™çš„ç¼–ç¨‹è¯­è¨€ã€‚å› æ­¤ï¼ŒManpowerå’Œmanpoweræ˜¯ä¸¤ä¸ªä¸åŒçš„å‘½åã€‚</p>
<blockquote>
<ol>
<li>å½“å‘½åï¼ˆåŒ…æ‹¬å¸¸é‡ã€å˜é‡ã€ç±»å‹ã€å‡½æ•°åã€ç»“æ„å­—æ®µç­‰ç­‰ï¼‰ä»¥ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´ï¼Œå¦‚ï¼šGroup1ï¼Œé‚£ä¹ˆä½¿ç”¨è¿™ç§å½¢å¼çš„æ ‡è¯†ç¬¦çš„å¯¹è±¡å°±<strong>å¯ä»¥è¢«å¤–éƒ¨åŒ…çš„ä»£ç æ‰€ä½¿ç”¨</strong>ï¼ˆå®¢æˆ·ç«¯ç¨‹åºéœ€è¦å…ˆå¯¼å…¥è¿™ä¸ªåŒ…ï¼‰ï¼Œè¿™è¢«ç§°ä¸ºå¯¼å‡ºï¼ˆåƒé¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ publicï¼‰ï¼›</li>
<li><strong>å‘½åå¦‚æœä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œåˆ™å¯¹åŒ…å¤–æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯ä»–ä»¬åœ¨æ•´ä¸ªåŒ…çš„å†…éƒ¨æ˜¯å¯è§å¹¶ä¸”å¯ç”¨çš„</strong>ï¼ˆåƒé¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ private ï¼‰</li>
</ol>
</blockquote>
<h3 id="åŒ…å‘½åï¼špackage"><a href="#åŒ…å‘½åï¼špackage" class="headerlink" title="åŒ…å‘½åï¼špackage"></a>åŒ…å‘½åï¼špackage</h3><p>ä¿æŒpackageçš„åå­—å’Œç›®å½•ä¿æŒä¸€è‡´ï¼Œå°½é‡é‡‡å–æœ‰æ„ä¹‰çš„åŒ…åï¼Œç®€çŸ­ï¼Œæœ‰æ„ä¹‰ï¼Œå°½é‡å’Œæ ‡å‡†åº“ä¸è¦å†²çªã€‚åŒ…ååº”è¯¥ä¸º<strong>å°å†™</strong>å•è¯ï¼Œä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿æˆ–è€…æ··åˆå¤§å°å†™ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo</span><br><span class="line"><span class="keyword">package</span> main</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶å‘½å"><a href="#æ–‡ä»¶å‘½å" class="headerlink" title="æ–‡ä»¶å‘½å"></a>æ–‡ä»¶å‘½å</h3><p>å°½é‡é‡‡å–æœ‰æ„ä¹‰çš„æ–‡ä»¶åï¼Œç®€çŸ­ï¼Œæœ‰æ„ä¹‰ï¼Œåº”è¯¥ä¸º<strong>å°å†™</strong>å•è¯ï¼Œä½¿ç”¨<strong>ä¸‹åˆ’çº¿</strong>åˆ†éš”å„ä¸ªå•è¯ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">my_test.<span class="keyword">go</span></span><br></pre></td></tr></table></figure>

<h3 id="ç»“æ„ä½“å‘½å"><a href="#ç»“æ„ä½“å‘½å" class="headerlink" title="ç»“æ„ä½“å‘½å"></a>ç»“æ„ä½“å‘½å</h3><ul>
<li><p>é‡‡ç”¨é©¼å³°å‘½åæ³•ï¼Œé¦–å­—æ¯æ ¹æ®è®¿é—®æ§åˆ¶å¤§å†™æˆ–è€…å°å†™</p>
</li>
<li><p>struct ç”³æ˜å’Œåˆå§‹åŒ–æ ¼å¼é‡‡ç”¨å¤šè¡Œï¼Œä¾‹å¦‚ä¸‹é¢ï¼š</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¤šè¡Œç”³æ˜</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span>&#123;</span><br><span class="line">    Username  <span class="type">string</span></span><br><span class="line">    Email     <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¤šè¡Œåˆå§‹åŒ–</span></span><br><span class="line">u := User&#123;</span><br><span class="line">    Username: <span class="string">&quot;astaxie&quot;</span>,</span><br><span class="line">    Email:    <span class="string">&quot;astaxie@gmail.com&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¥å£å‘½å"><a href="#æ¥å£å‘½å" class="headerlink" title="æ¥å£å‘½å"></a>æ¥å£å‘½å</h3><ul>
<li>å‘½åè§„åˆ™åŸºæœ¬å’Œä¸Šé¢çš„ç»“æ„ä½“ç±»å‹ä¿æŒä¸€è‡´ã€‚</li>
<li>å•ä¸ªå‡½æ•°çš„ç»“æ„åä»¥ â€œerâ€ ä½œä¸ºåç¼€ï¼Œä¾‹å¦‚ Reader , Writer ã€‚</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">        Read(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å˜é‡å‘½å"><a href="#å˜é‡å‘½å" class="headerlink" title="å˜é‡å‘½å"></a>å˜é‡å‘½å</h3><ul>
<li>å’Œç»“æ„ä½“ç±»ä¼¼ï¼Œå˜é‡åç§°ä¸€èˆ¬éµå¾ªé©¼å³°æ³•ï¼Œé¦–å­—æ¯æ ¹æ®è®¿é—®æ§åˆ¶åŸåˆ™å¤§å†™æˆ–è€…å°å†™ï¼Œä½†é‡åˆ°ç‰¹æœ‰åè¯æ—¶ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š <ul>
<li>å¦‚æœå˜é‡ä¸ºç§æœ‰ï¼Œä¸”ç‰¹æœ‰åè¯ä¸ºé¦–ä¸ªå•è¯ï¼Œåˆ™ä½¿ç”¨å°å†™ï¼Œå¦‚ apiClient</li>
<li>å…¶å®ƒæƒ…å†µéƒ½åº”å½“ä½¿ç”¨è¯¥åè¯åŸæœ‰çš„å†™æ³•ï¼Œå¦‚ APIClientã€repoIDã€UserID</li>
<li>é”™è¯¯ç¤ºä¾‹ï¼šUrlArrayï¼Œåº”è¯¥å†™æˆ urlArray æˆ–è€… URLArray</li>
</ul>
</li>
<li>è‹¥å˜é‡ç±»å‹ä¸º bool ç±»å‹ï¼Œåˆ™åç§°åº”ä»¥ has, is, can æˆ– allow å¼€å¤´</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isExist <span class="type">bool</span></span><br><span class="line"><span class="keyword">var</span> hasConflict <span class="type">bool</span></span><br><span class="line"><span class="keyword">var</span> canManage <span class="type">bool</span></span><br><span class="line"><span class="keyword">var</span> allowGitHook <span class="type">bool</span></span><br></pre></td></tr></table></figure>

<h3 id="å¸¸é‡å‘½å"><a href="#å¸¸é‡å‘½å" class="headerlink" title="å¸¸é‡å‘½å"></a>å¸¸é‡å‘½å</h3><p>å¸¸é‡å‡éœ€ä½¿ç”¨å…¨éƒ¨å¤§å†™å­—æ¯ç»„æˆï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†è¯</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> APP_VER = <span class="string">&quot;1.0&quot;</span></span><br></pre></td></tr></table></figure>


<p>å¦‚æœæ˜¯æšä¸¾ç±»å‹çš„å¸¸é‡ï¼Œéœ€è¦å…ˆåˆ›å»ºç›¸åº”ç±»å‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Scheme <span class="type">string</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    HTTP  Scheme = <span class="string">&quot;http&quot;</span></span><br><span class="line">    HTTPS Scheme = <span class="string">&quot;https&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h3><p>ä¸‹é¢çš„åˆ—è¡¨æ˜¾ç¤ºäº†Goä¸­çš„ä¿ç•™å­—ã€‚è¿™äº›ä¿ç•™å­—ä¸èƒ½ç”¨ä½œå¸¸é‡æˆ–å˜é‡æˆ–ä»»ä½•å…¶ä»–æ ‡è¯†ç¬¦åç§°ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24fd930b2dd64516845b351960d1df8b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="guanjianzi"></p>
<h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><p>Goæä¾›Cé£æ ¼çš„<code>/* */</code>å—æ³¨é‡Šå’ŒC ++é£æ ¼çš„<code>//</code>è¡Œæ³¨é‡Šã€‚è¡Œæ³¨é‡Šæ˜¯å¸¸æ€ï¼›å—æ³¨é‡Šä¸»è¦æ˜¾ç¤ºä¸ºåŒ…æ³¨é‡Šï¼Œä½†åœ¨è¡¨è¾¾å¼ä¸­å¾ˆæœ‰ç”¨æˆ–ç¦ç”¨å¤§é‡ä»£ç ã€‚</p>
<ul>
<li>å•è¡Œæ³¨é‡Šæ˜¯æœ€å¸¸è§çš„æ³¨é‡Šå½¢å¼ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ä»¥ &#x2F;&#x2F; å¼€å¤´çš„å•è¡Œæ³¨é‡Š</li>
<li>å¤šè¡Œæ³¨é‡Šä¹Ÿå«å—æ³¨é‡Šï¼Œå‡å·²ä»¥ &#x2F;* å¼€å¤´ï¼Œå¹¶ä»¥ *&#x2F; ç»“å°¾ï¼Œä¸”ä¸å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå¤šè¡Œæ³¨é‡Šä¸€èˆ¬ç”¨äºåŒ…çš„æ–‡æ¡£æè¿°æˆ–æ³¨é‡Šæˆå—çš„ä»£ç ç‰‡æ®µ</li>
</ul>
<p>go è¯­è¨€è‡ªå¸¦çš„ godoc å·¥å…·å¯ä»¥æ ¹æ®æ³¨é‡Šç”Ÿæˆæ–‡æ¡£ï¼Œç”Ÿæˆå¯ä»¥è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ç½‘ç«™ï¼ˆ golang.org å°±æ˜¯ä½¿ç”¨ godoc å·¥å…·ç›´æ¥ç”Ÿæˆçš„ï¼‰ï¼Œæ³¨é‡Šçš„è´¨é‡å†³å®šäº†ç”Ÿæˆçš„æ–‡æ¡£çš„è´¨é‡ã€‚æ¯ä¸ªåŒ…éƒ½åº”è¯¥æœ‰ä¸€ä¸ªåŒ…æ³¨é‡Šï¼Œåœ¨packageå­å¥ä¹‹å‰æœ‰ä¸€ä¸ªå—æ³¨é‡Šã€‚å¯¹äºå¤šæ–‡ä»¶åŒ…ï¼ŒåŒ…æ³¨é‡Šåªéœ€è¦å­˜åœ¨äºä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥ã€‚åŒ…è¯„è®ºåº”è¯¥ä»‹ç»åŒ…ï¼Œå¹¶æä¾›ä¸æ•´ä¸ªåŒ…ç›¸å…³çš„ä¿¡æ¯ã€‚å®ƒå°†é¦–å…ˆå‡ºç°åœ¨<code>godoc</code>é¡µé¢ä¸Šï¼Œå¹¶åº”è®¾ç½®ä¸‹é¢çš„è¯¦ç»†æ–‡æ¡£ã€‚</p>
<p>è¯¦ç»†çš„å¦‚ä½•å†™æ³¨é‡Šå¯ä»¥<br>å‚è€ƒï¼š<a href="http://golang.org/doc/effective_go.html#commentary">http://golang.org/doc/effective_go.html#commentary</a></p>
<h3 id="åŒ…æ³¨é‡Š"><a href="#åŒ…æ³¨é‡Š" class="headerlink" title="åŒ…æ³¨é‡Š"></a>åŒ…æ³¨é‡Š</h3><p>æ¯ä¸ªåŒ…éƒ½åº”è¯¥æœ‰ä¸€ä¸ªåŒ…æ³¨é‡Šï¼Œä¸€ä¸ªä½äºpackageå­å¥ä¹‹å‰çš„å—æ³¨é‡Šæˆ–è¡Œæ³¨é‡Šã€‚åŒ…å¦‚æœæœ‰å¤šä¸ªgoæ–‡ä»¶ï¼Œåªéœ€è¦å‡ºç°åœ¨ä¸€ä¸ªgoæ–‡ä»¶ä¸­ï¼ˆä¸€èˆ¬æ˜¯å’ŒåŒ…åŒåçš„æ–‡ä»¶ï¼‰å³å¯ã€‚ åŒ…æ³¨é‡Šåº”è¯¥åŒ…å«ä¸‹é¢åŸºæœ¬ä¿¡æ¯(è¯·ä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œç®€ä»‹ï¼Œåˆ›å»ºäººï¼Œåˆ›å»ºæ—¶é—´ï¼‰ï¼š</p>
<ul>
<li>åŒ…çš„åŸºæœ¬ç®€ä»‹ï¼ˆåŒ…åï¼Œç®€ä»‹ï¼‰</li>
<li>åˆ›å»ºè€…ï¼Œæ ¼å¼ï¼š åˆ›å»ºäººï¼š rtx å</li>
<li>åˆ›å»ºæ—¶é—´ï¼Œæ ¼å¼ï¼šåˆ›å»ºæ—¶é—´ï¼š yyyyMMdd</li>
</ul>
<p>ä¾‹å¦‚ util åŒ…çš„æ³¨é‡Šç¤ºä¾‹å¦‚ä¸‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// util åŒ…ï¼Œ è¯¥åŒ…åŒ…å«äº†é¡¹ç›®å…±ç”¨çš„ä¸€äº›å¸¸é‡ï¼Œå°è£…äº†é¡¹ç›®ä¸­ä¸€äº›å…±ç”¨å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">// åˆ›å»ºäººï¼š wxy</span></span><br><span class="line"><span class="comment">// åˆ›å»ºæ—¶é—´ï¼š 20230601</span></span><br></pre></td></tr></table></figure>

<h3 id="ç»“æ„ï¼ˆæ¥å£ï¼‰æ³¨é‡Š"><a href="#ç»“æ„ï¼ˆæ¥å£ï¼‰æ³¨é‡Š" class="headerlink" title="ç»“æ„ï¼ˆæ¥å£ï¼‰æ³¨é‡Š"></a>ç»“æ„ï¼ˆæ¥å£ï¼‰æ³¨é‡Š</h3><p>æ¯ä¸ªè‡ªå®šä¹‰çš„ç»“æ„ä½“æˆ–è€…æ¥å£éƒ½åº”è¯¥æœ‰æ³¨é‡Šè¯´æ˜ï¼Œè¯¥æ³¨é‡Šå¯¹ç»“æ„è¿›è¡Œç®€è¦ä»‹ç»ï¼Œæ”¾åœ¨ç»“æ„ä½“å®šä¹‰çš„å‰ä¸€è¡Œï¼Œæ ¼å¼ä¸ºï¼š ç»“æ„ä½“åï¼Œ ç»“æ„ä½“è¯´æ˜ã€‚åŒæ—¶ç»“æ„ä½“å†…çš„æ¯ä¸ªæˆå‘˜å˜é‡éƒ½è¦æœ‰è¯´æ˜ï¼Œè¯¥è¯´æ˜æ”¾åœ¨æˆå‘˜å˜é‡çš„åé¢ï¼ˆæ³¨æ„å¯¹é½ï¼‰ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// User ï¼Œ ç”¨æˆ·å¯¹è±¡ï¼Œå®šä¹‰äº†ç”¨æˆ·çš„åŸºç¡€ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span>&#123;</span><br><span class="line">    Username  <span class="type">string</span> <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line">    Email     <span class="type">string</span> <span class="comment">// é‚®ç®±</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰æ³¨é‡Š"><a href="#å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰æ³¨é‡Š" class="headerlink" title="å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰æ³¨é‡Š"></a>å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰æ³¨é‡Š</h3><p>æ¯ä¸ªå‡½æ•°ï¼Œæˆ–è€…æ–¹æ³•ï¼ˆç»“æ„ä½“æˆ–è€…æ¥å£ä¸‹çš„å‡½æ•°ç§°ä¸ºæ–¹æ³•ï¼‰éƒ½åº”è¯¥æœ‰æ³¨é‡Šè¯´æ˜ï¼Œå‡½æ•°çš„æ³¨é‡Šåº”è¯¥åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢ï¼ˆä¸¥æ ¼æŒ‰ç…§æ­¤é¡ºåºæ’°å†™ï¼‰ï¼š</p>
<ul>
<li>ç®€è¦è¯´æ˜ï¼Œæ ¼å¼è¯´æ˜ï¼šä»¥å‡½æ•°åå¼€å¤´ï¼Œâ€œï¼Œâ€åˆ†éš”è¯´æ˜éƒ¨åˆ†</li>
<li>å‚æ•°åˆ—è¡¨ï¼šæ¯è¡Œä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°åå¼€å¤´ï¼Œâ€œï¼Œâ€åˆ†éš”è¯´æ˜éƒ¨åˆ†</li>
<li>è¿”å›å€¼ï¼š æ¯è¡Œä¸€ä¸ªè¿”å›å€¼</li>
</ul>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// NewtAttrModel ï¼Œ å±æ€§æ•°æ®å±‚æ“ä½œç±»çš„å·¥å‚æ–¹æ³•</span></span><br><span class="line"><span class="comment">// å‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">//      ctx ï¼š ä¸Šä¸‹æ–‡ä¿¡æ¯</span></span><br><span class="line"><span class="comment">// è¿”å›å€¼ï¼š</span></span><br><span class="line"><span class="comment">//      å±æ€§æ“ä½œç±»æŒ‡é’ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewAttrModel</span><span class="params">(ctx *common.Context)</span></span> *AttrModel &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä»£ç é€»è¾‘æ³¨é‡Š"><a href="#ä»£ç é€»è¾‘æ³¨é‡Š" class="headerlink" title="ä»£ç é€»è¾‘æ³¨é‡Š"></a>ä»£ç é€»è¾‘æ³¨é‡Š</h3><p>å¯¹äºä¸€äº›å…³é”®ä½ç½®çš„ä»£ç é€»è¾‘ï¼Œæˆ–è€…å±€éƒ¨è¾ƒä¸ºå¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦æœ‰ç›¸åº”çš„é€»è¾‘è¯´æ˜ï¼Œæ–¹ä¾¿å…¶ä»–å¼€å‘è€…é˜…è¯»è¯¥æ®µä»£ç ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä» Redis ä¸­æ‰¹é‡è¯»å–å±æ€§ï¼Œå¯¹äºæ²¡æœ‰è¯»å–åˆ°çš„ id ï¼Œ è®°å½•åˆ°ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œå‡†å¤‡ä» DB ä¸­è¯»å–</span></span><br><span class="line">xxxxx</span><br><span class="line">xxxxxxx</span><br><span class="line">xxxxxxx</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨é‡Šé£æ ¼"><a href="#æ³¨é‡Šé£æ ¼" class="headerlink" title="æ³¨é‡Šé£æ ¼"></a>æ³¨é‡Šé£æ ¼</h3><p>ç»Ÿä¸€ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šï¼Œå¯¹äºä¸­è‹±æ–‡å­—ç¬¦ä¹‹é—´ä¸¥æ ¼ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼Œ è¿™ä¸ªä¸ä»…ä»…æ˜¯ä¸­æ–‡å’Œè‹±æ–‡ä¹‹é—´ï¼Œè‹±æ–‡å’Œä¸­æ–‡æ ‡ç‚¹ä¹‹é—´ä¹Ÿéƒ½è¦ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä» Redis ä¸­æ‰¹é‡è¯»å–å±æ€§ï¼Œå¯¹äºæ²¡æœ‰è¯»å–åˆ°çš„ id ï¼Œ è®°å½•åˆ°ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œå‡†å¤‡ä» DB ä¸­è¯»å–</span></span><br></pre></td></tr></table></figure>


<p>ä¸Šé¢ Redis ã€ id ã€ DB å’Œå…¶ä»–ä¸­æ–‡å­—ç¬¦ä¹‹é—´éƒ½æ˜¯ç”¨äº†ç©ºæ ¼åˆ†éš”ã€‚ </p>
<ul>
<li>å»ºè®®å…¨éƒ¨ä½¿ç”¨å•è¡Œæ³¨é‡Š</li>
<li>å’Œä»£ç çš„è§„èŒƒä¸€æ ·ï¼Œå•è¡Œæ³¨é‡Šä¸è¦è¿‡é•¿ï¼Œç¦æ­¢è¶…è¿‡ 120 å­—ç¬¦ã€‚</li>
</ul>
<h2 id="ä»£ç é£æ ¼"><a href="#ä»£ç é£æ ¼" class="headerlink" title="ä»£ç é£æ ¼"></a>ä»£ç é£æ ¼</h2><h3 id="ç¼©è¿›å’ŒæŠ˜è¡Œ"><a href="#ç¼©è¿›å’ŒæŠ˜è¡Œ" class="headerlink" title="ç¼©è¿›å’ŒæŠ˜è¡Œ"></a>ç¼©è¿›å’ŒæŠ˜è¡Œ</h3><ul>
<li>ç¼©è¿›ç›´æ¥ä½¿ç”¨ gofmt å·¥å…·æ ¼å¼åŒ–å³å¯ï¼ˆgofmt æ˜¯ä½¿ç”¨ tab ç¼©è¿›çš„ï¼‰ï¼›</li>
<li>æŠ˜è¡Œæ–¹é¢ï¼Œä¸€è¡Œæœ€é•¿ä¸è¶…è¿‡120ä¸ªå­—ç¬¦ï¼Œè¶…è¿‡çš„è¯·ä½¿ç”¨æ¢è¡Œå±•ç¤ºï¼Œå°½é‡ä¿æŒæ ¼å¼ä¼˜é›…ã€‚</li>
</ul>
<p>æˆ‘ä»¬ä½¿ç”¨Golandå¼€å‘å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¿«æ·é”®ï¼šctrl+alt+Lï¼Œå³å¯ã€‚</p>
<h3 id="è¯­å¥çš„ç»“å°¾"><a href="#è¯­å¥çš„ç»“å°¾" class="headerlink" title="è¯­å¥çš„ç»“å°¾"></a>è¯­å¥çš„ç»“å°¾</h3><p>Goè¯­è¨€ä¸­æ˜¯ä¸éœ€è¦ç±»ä¼¼äºJavaéœ€è¦å†’å·ç»“å°¾ï¼Œé»˜è®¤ä¸€è¡Œå°±æ˜¯ä¸€æ¡æ•°æ®</p>
<p>å¦‚æœä½ æ‰“ç®—å°†å¤šä¸ªè¯­å¥å†™åœ¨åŒä¸€è¡Œï¼Œå®ƒä»¬åˆ™å¿…é¡»ä½¿ç”¨ <strong>;</strong> </p>
<h3 id="æ‹¬å·å’Œç©ºæ ¼"><a href="#æ‹¬å·å’Œç©ºæ ¼" class="headerlink" title="æ‹¬å·å’Œç©ºæ ¼"></a>æ‹¬å·å’Œç©ºæ ¼</h3><p>æ‹¬å·å’Œç©ºæ ¼æ–¹é¢ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ gofmt å·¥å…·æ ¼å¼åŒ–ï¼ˆgo ä¼šå¼ºåˆ¶å·¦å¤§æ‹¬å·ä¸æ¢è¡Œï¼Œæ¢è¡Œä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼‰ï¼Œæ‰€æœ‰çš„è¿ç®—ç¬¦å’Œæ“ä½œæ•°ä¹‹é—´è¦ç•™ç©ºæ ¼ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®çš„æ–¹å¼</span></span><br><span class="line"><span class="keyword">if</span> a &gt; <span class="number">0</span> &#123;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// é”™è¯¯çš„æ–¹å¼</span></span><br><span class="line"><span class="keyword">if</span> a&gt;<span class="number">0</span>  <span class="comment">// a ï¼Œ0 å’Œ &gt; ä¹‹é—´åº”è¯¥ç©ºæ ¼</span></span><br><span class="line">&#123;       <span class="comment">// å·¦å¤§æ‹¬å·ä¸å¯ä»¥æ¢è¡Œï¼Œä¼šæŠ¥è¯­æ³•é”™è¯¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="import-è§„èŒƒ"><a href="#import-è§„èŒƒ" class="headerlink" title="import è§„èŒƒ"></a>import è§„èŒƒ</h3><p>importåœ¨å¤šè¡Œçš„æƒ…å†µä¸‹ï¼Œgoimportsä¼šè‡ªåŠ¨å¸®ä½ æ ¼å¼åŒ–ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯è§„èŒƒä¸€ä¸‹importçš„ä¸€äº›è§„èŒƒï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å¼•å…¥äº†ä¸€ä¸ªpackageï¼Œè¿˜æ˜¯å»ºè®®é‡‡ç”¨å¦‚ä¸‹æ ¼å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ çš„åŒ…å¼•å…¥äº†ä¸‰ç§ç±»å‹çš„åŒ…ï¼Œæ ‡å‡†åº“åŒ…ï¼Œç¨‹åºå†…éƒ¨åŒ…ï¼Œç¬¬ä¸‰æ–¹åŒ…ï¼Œå»ºè®®é‡‡ç”¨å¦‚ä¸‹æ–¹å¼è¿›è¡Œç»„ç»‡ä½ çš„åŒ…ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">    <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;myproject/models&quot;</span></span><br><span class="line">    <span class="string">&quot;myproject/controller&quot;</span></span><br><span class="line">    <span class="string">&quot;myproject/utils&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/astaxie/beego&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line">)   </span><br></pre></td></tr></table></figure>

<p>æœ‰é¡ºåºçš„å¼•å…¥åŒ…ï¼Œä¸åŒçš„ç±»å‹é‡‡ç”¨ç©ºæ ¼åˆ†ç¦»ï¼Œç¬¬ä¸€ç§æ˜¯æ ‡å‡†åº“ï¼Œç¬¬äºŒæ˜¯é¡¹ç›®åŒ…ï¼Œç¬¬ä¸‰æ˜¯ç¬¬ä¸‰æ–¹åŒ…ã€‚</p>
<p>åœ¨é¡¹ç›®ä¸­ä¸è¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•å…¥åŒ…ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸å¥½çš„å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> â€œ../netâ€</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯æ­£ç¡®çš„åšæ³•</span></span><br><span class="line"><span class="keyword">import</span> â€œgithub.com/repo/proj/src/netâ€</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¦‚æœæ˜¯å¼•å…¥æœ¬é¡¹ç›®ä¸­çš„å…¶ä»–åŒ…ï¼Œæœ€å¥½ä½¿ç”¨ç›¸å¯¹è·¯å¾„ã€‚</p>
<h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><ul>
<li>é”™è¯¯å¤„ç†çš„åŸåˆ™å°±æ˜¯ä¸èƒ½ä¸¢å¼ƒä»»ä½•æœ‰è¿”å›errçš„è°ƒç”¨ï¼Œä¸è¦ä½¿ç”¨ _ ä¸¢å¼ƒï¼Œå¿…é¡»å…¨éƒ¨å¤„ç†ã€‚æ¥æ”¶åˆ°é”™è¯¯ï¼Œè¦ä¹ˆè¿”å›errï¼Œæˆ–è€…ä½¿ç”¨logè®°å½•ä¸‹æ¥</li>
<li>å°½æ—©returnï¼šä¸€æ—¦æœ‰é”™è¯¯å‘ç”Ÿï¼Œé©¬ä¸Šè¿”å›</li>
<li>å°½é‡ä¸è¦ä½¿ç”¨panicï¼Œé™¤éä½ çŸ¥é“ä½ åœ¨åšä»€ä¹ˆ</li>
<li>é”™è¯¯æè¿°å¦‚æœæ˜¯è‹±æ–‡å¿…é¡»ä¸ºå°å†™ï¼Œä¸éœ€è¦æ ‡ç‚¹ç»“å°¾</li>
<li>é‡‡ç”¨ç‹¬ç«‹çš„é”™è¯¯æµè¿›è¡Œå¤„ç†</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="comment">// error handling</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// normal code</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="comment">// error handling</span></span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// or continue, etc.</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// normal code</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>å•å…ƒæµ‹è¯•æ–‡ä»¶åå‘½åè§„èŒƒä¸º example_test.go<br>æµ‹è¯•ç”¨ä¾‹çš„å‡½æ•°åç§°å¿…é¡»ä»¥ Test å¼€å¤´ï¼Œä¾‹å¦‚ï¼šTestExample<br>æ¯ä¸ªé‡è¦çš„å‡½æ•°éƒ½è¦é¦–å…ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•ç”¨ä¾‹å’Œæ­£è§„ä»£ç ä¸€èµ·æäº¤æ–¹ä¾¿è¿›è¡Œå›å½’æµ‹è¯•</p>
<h2 id="å¸¸ç”¨å·¥å…·"><a href="#å¸¸ç”¨å·¥å…·" class="headerlink" title="å¸¸ç”¨å·¥å…·"></a>å¸¸ç”¨å·¥å…·</h2><p>ä¸Šé¢æåˆ°äº†å¾ˆè¿‡è§„èŒƒï¼Œ go è¯­è¨€æœ¬èº«åœ¨ä»£ç è§„èŒƒæ€§è¿™æ–¹é¢ä¹Ÿåšäº†å¾ˆå¤šåŠªåŠ›ï¼Œå¾ˆå¤šé™åˆ¶éƒ½æ˜¯å¼ºåˆ¶è¯­æ³•è¦æ±‚ï¼Œä¾‹å¦‚å·¦å¤§æ‹¬å·ä¸æ¢è¡Œï¼Œå¼•ç”¨çš„åŒ…æˆ–è€…å®šä¹‰çš„å˜é‡ä¸ä½¿ç”¨ä¼šæŠ¥é”™ï¼Œæ­¤å¤– go è¿˜æ˜¯æä¾›äº†å¾ˆå¤šå¥½ç”¨çš„å·¥å…·å¸®åŠ©æˆ‘ä»¬è¿›è¡Œä»£ç çš„è§„èŒƒï¼Œ</p>
<p><strong>gofmt</strong><br>å¤§éƒ¨åˆ†çš„æ ¼å¼é—®é¢˜å¯ä»¥é€šè¿‡gofmtè§£å†³ï¼Œ gofmt è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼Œä¿è¯æ‰€æœ‰çš„ go ä»£ç ä¸å®˜æ–¹æ¨èçš„æ ¼å¼ä¿æŒä¸€è‡´ï¼Œäºæ˜¯æ‰€æœ‰æ ¼å¼æœ‰å…³é—®é¢˜ï¼Œéƒ½ä»¥ gofmt çš„ç»“æœä¸ºå‡†ã€‚</p>
<p><strong>goimport</strong><br>æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½¿ç”¨ goimport ï¼Œè¯¥å·¥å…·åœ¨ gofmt çš„åŸºç¡€ä¸Šå¢åŠ äº†è‡ªåŠ¨åˆ é™¤å’Œå¼•å…¥åŒ….</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go get golang.org/x/tools/cmd/goimports</span></span><br></pre></td></tr></table></figure>

<p><em><strong>ä»¥ä¸Šä¸¤ç§å·¥å…·ä¸Šä¸€ç¯‡æ–‡ç« å·²ç»ä»‹ç»è¿‡æ€ä¹ˆé…ç½®</strong></em></p>
<p><strong>go vet</strong><br>vetå·¥å…·å¯ä»¥å¸®æˆ‘ä»¬é™æ€åˆ†ææˆ‘ä»¬çš„æºç å­˜åœ¨çš„å„ç§é—®é¢˜ï¼Œä¾‹å¦‚å¤šä½™çš„ä»£ç ï¼Œæå‰returnçš„é€»è¾‘ï¼Œstructçš„tagæ˜¯å¦ç¬¦åˆæ ‡å‡†ç­‰ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go get golang.org/x/tools/cmd/vet</span></span><br></pre></td></tr></table></figure>


<p>ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go vet .</span></span><br></pre></td></tr></table></figure>















]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>å˜é‡ä¸å¸¸é‡</title>
    <url>/2023/06/01/Go/4/</url>
    <content><![CDATA[<h1 id="åŸºæœ¬è¯­æ³•â€”â€”å˜é‡var"><a href="#åŸºæœ¬è¯­æ³•â€”â€”å˜é‡var" class="headerlink" title="åŸºæœ¬è¯­æ³•â€”â€”å˜é‡var"></a>åŸºæœ¬è¯­æ³•â€”â€”å˜é‡var</h1><h2 id="å˜é‡çš„ä½¿ç”¨"><a href="#å˜é‡çš„ä½¿ç”¨" class="headerlink" title="å˜é‡çš„ä½¿ç”¨"></a>å˜é‡çš„ä½¿ç”¨</h2><h3 id="ä»€ä¹ˆæ˜¯å˜é‡"><a href="#ä»€ä¹ˆæ˜¯å˜é‡" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜é‡"></a>ä»€ä¹ˆæ˜¯å˜é‡</h3><p>å˜é‡æ˜¯ä¸ºå­˜å‚¨ç‰¹å®šç±»å‹çš„å€¼è€Œæä¾›ç»™å†…å­˜ä½ç½®çš„åç§°ã€‚åœ¨goä¸­å£°æ˜å˜é‡æœ‰å¤šç§è¯­æ³•ã€‚</p>
<p>æ‰€ä»¥å˜é‡çš„æœ¬è´¨å°±æ˜¯ä¸€å°å—å†…å­˜ï¼Œç”¨äºå­˜å‚¨æ•°æ®ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ•°å€¼å¯ä»¥æ”¹å˜</p>
<h3 id="å£°æ˜å˜é‡"><a href="#å£°æ˜å˜é‡" class="headerlink" title="å£°æ˜å˜é‡"></a>å£°æ˜å˜é‡</h3><p>varåç§°ç±»å‹æ˜¯å£°æ˜å•ä¸ªå˜é‡çš„è¯­æ³•ã€‚</p>
<blockquote>
<p>ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç»„æˆ</p>
</blockquote>
<p>å£°æ˜ä¸€ä¸ªå˜é‡</p>
<p>ç¬¬ä¸€ç§ï¼ŒæŒ‡å®šå˜é‡ç±»å‹ï¼Œå£°æ˜åè‹¥ä¸èµ‹å€¼ï¼Œä½¿ç”¨<em><strong>é»˜è®¤å€¼</strong></em></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name <span class="keyword">type</span></span><br><span class="line">name = value</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§ï¼Œæ ¹æ®å€¼è‡ªè¡Œåˆ¤å®šå˜é‡ç±»å‹(ç±»å‹æ¨æ–­Type inference)</p>
<p>å¦‚æœä¸€ä¸ªå˜é‡æœ‰ä¸€ä¸ªåˆå§‹å€¼ï¼ŒGoå°†è‡ªåŠ¨èƒ½å¤Ÿä½¿ç”¨åˆå§‹å€¼æ¥æ¨æ–­è¯¥å˜é‡çš„ç±»å‹ã€‚å› æ­¤ï¼Œå¦‚æœå˜é‡å…·æœ‰åˆå§‹å€¼ï¼Œåˆ™å¯ä»¥çœç•¥å˜é‡å£°æ˜ä¸­çš„ç±»å‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name = value</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§ï¼Œçœç•¥var, æ³¨æ„ :&#x3D;å·¦ä¾§çš„å˜é‡ä¸åº”è¯¥æ˜¯å·²ç»å£°æ˜è¿‡çš„(å¤šä¸ªå˜é‡åŒæ—¶å£°æ˜æ—¶ï¼Œè‡³å°‘ä¿è¯ä¸€ä¸ªæ˜¯æ–°å˜é‡)ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯(ç®€çŸ­å£°æ˜)</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">name := value</span><br><span class="line"><span class="comment">// ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">10</span></span><br><span class="line">c : = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™ç§æ–¹å¼å®ƒåªèƒ½è¢«ç”¨åœ¨å‡½æ•°ä½“å†…ï¼Œè€Œä¸å¯ä»¥ç”¨äºå…¨å±€å˜é‡çš„å£°æ˜ä¸èµ‹å€¼</p>
</blockquote>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">var</span> b <span class="type">string</span> = <span class="string">&quot;World&quot;</span></span><br><span class="line"><span class="keyword">var</span> c <span class="type">bool</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">println</span>(a, b, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Hello World false</span><br></pre></td></tr></table></figure>

<h4 id="å¤šå˜é‡å£°æ˜"><a href="#å¤šå˜é‡å£°æ˜" class="headerlink" title="å¤šå˜é‡å£°æ˜"></a>å¤šå˜é‡å£°æ˜</h4><p>ç¬¬ä¸€ç§ï¼Œä»¥é€—å·åˆ†éš”ï¼Œå£°æ˜ä¸èµ‹å€¼åˆ†å¼€ï¼Œè‹¥ä¸èµ‹å€¼ï¼Œå­˜åœ¨é»˜è®¤å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name1, name2, name3 <span class="keyword">type</span></span><br><span class="line">name1, name2, name3 = v1, v2, v3</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§ï¼Œç›´æ¥èµ‹å€¼ï¼Œä¸‹é¢çš„å˜é‡ç±»å‹å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name1, name2, name3 = v1, v2, v3</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§ï¼Œé›†åˆç±»å‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    name1 type1</span><br><span class="line">    name2 type2</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>å¦‚æœåœ¨ç›¸åŒçš„ä»£ç å—ä¸­ï¼Œæˆ‘ä»¬ä¸å¯ä»¥å†æ¬¡å¯¹äºç›¸åŒåç§°çš„å˜é‡ä½¿ç”¨åˆå§‹åŒ–å£°æ˜ï¼Œä¾‹å¦‚ï¼ša :&#x3D; 20 å°±æ˜¯ä¸è¢«å…è®¸çš„ï¼Œç¼–è¯‘å™¨ä¼šæç¤ºé”™è¯¯ no new variables on left side of :&#x3D;ï¼Œä½†æ˜¯ a &#x3D; 20 æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºè¿™æ˜¯ç»™ç›¸åŒçš„å˜é‡èµ‹äºˆä¸€ä¸ªæ–°çš„å€¼ã€‚</p>
<p>å¦‚æœä½ åœ¨å®šä¹‰å˜é‡ a ä¹‹å‰ä½¿ç”¨å®ƒï¼Œåˆ™ä¼šå¾—åˆ°ç¼–è¯‘é”™è¯¯ undefined: aã€‚å¦‚æœä½ å£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡å´æ²¡æœ‰åœ¨ç›¸åŒçš„ä»£ç å—ä¸­ä½¿ç”¨å®ƒï¼ŒåŒæ ·ä¼šå¾—åˆ°ç¼–è¯‘é”™è¯¯ï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­å½“ä¸­çš„å˜é‡ aï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a <span class="type">string</span> = <span class="string">&quot;abc&quot;</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;hello, world&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°è¯•ç¼–è¯‘è¿™æ®µä»£ç å°†å¾—åˆ°é”™è¯¯ a declared and not used</p>
<p>æ­¤å¤–ï¼Œå•çº¯åœ°ç»™ a èµ‹å€¼ä¹Ÿæ˜¯ä¸å¤Ÿçš„ï¼Œè¿™ä¸ªå€¼å¿…é¡»è¢«ä½¿ç”¨</p>
<p>åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œå·²å­˜åœ¨åŒåçš„å˜é‡ï¼Œåˆ™ä¹‹åçš„å£°æ˜åˆå§‹åŒ–ï¼Œåˆ™é€€åŒ–ä¸ºèµ‹å€¼æ“ä½œã€‚ä½†è¿™ä¸ªå‰ææ˜¯ï¼Œæœ€å°‘è¦æœ‰ä¸€ä¸ªæ–°çš„å˜é‡è¢«å®šä¹‰ï¼Œä¸”åœ¨åŒä¸€ä½œç”¨åŸŸï¼Œä¾‹å¦‚ï¼Œä¸‹é¢çš„yå°±æ˜¯æ–°å®šä¹‰çš„å˜é‡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x := <span class="number">140</span></span><br><span class="line">	fmt.Println(&amp;x)</span><br><span class="line">	x, y := <span class="number">200</span>, <span class="string">&quot;abc&quot;</span></span><br><span class="line">	fmt.Println(&amp;x, x)</span><br><span class="line">	fmt.Print(y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0xc04200a2b0</span><br><span class="line">0xc04200a2b0 200</span><br><span class="line">abc</span><br></pre></td></tr></table></figure>

<h1 id="åŸºæœ¬è¯­æ³•â€”â€”å¸¸é‡constant"><a href="#åŸºæœ¬è¯­æ³•â€”â€”å¸¸é‡constant" class="headerlink" title="åŸºæœ¬è¯­æ³•â€”â€”å¸¸é‡constant"></a>åŸºæœ¬è¯­æ³•â€”â€”å¸¸é‡constant</h1><h2 id="å¸¸é‡çš„ä½¿ç”¨"><a href="#å¸¸é‡çš„ä½¿ç”¨" class="headerlink" title="å¸¸é‡çš„ä½¿ç”¨"></a>å¸¸é‡çš„ä½¿ç”¨</h2><h3 id="å¸¸é‡å£°æ˜"><a href="#å¸¸é‡å£°æ˜" class="headerlink" title="å¸¸é‡å£°æ˜"></a>å¸¸é‡å£°æ˜</h3><p>å¸¸é‡æ˜¯ä¸€ä¸ªç®€å•å€¼çš„æ ‡è¯†ç¬¦ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œä¸ä¼šè¢«ä¿®æ”¹çš„é‡ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> identifier [<span class="keyword">type</span>] = value</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ˜¾å¼ç±»å‹å®šä¹‰ï¼š </span></span><br><span class="line"><span class="keyword">const</span> b <span class="type">string</span> = <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="comment">//éšå¼ç±»å‹å®šä¹‰ï¼š</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&quot;abc&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">const</span> LENGTH <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">   <span class="keyword">const</span> WIDTH <span class="type">int</span> = <span class="number">5</span>   </span><br><span class="line">   <span class="keyword">var</span> area <span class="type">int</span></span><br><span class="line">   <span class="keyword">const</span> a, b, c = <span class="number">1</span>, <span class="literal">false</span>, <span class="string">&quot;str&quot;</span> <span class="comment">//å¤šé‡èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line">   area = LENGTH * WIDTH</span><br><span class="line">   fmt.Printf(<span class="string">&quot;é¢ç§¯ä¸º : %d&quot;</span>, area)</span><br><span class="line">   <span class="built_in">println</span>()</span><br><span class="line">   <span class="built_in">println</span>(a, b, c)   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é¢ç§¯ä¸º : 50</span><br><span class="line">1 false str</span><br></pre></td></tr></table></figure>

<p>å¸¸é‡å¯ä»¥ä½œä¸ºæšä¸¾ï¼Œå¸¸é‡ç»„</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    Unknown = <span class="number">0</span></span><br><span class="line">    Female = <span class="number">1</span></span><br><span class="line">    Male = <span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>å¸¸é‡ç»„ä¸­å¦‚ä¸æŒ‡å®šç±»å‹å’Œåˆå§‹åŒ–å€¼ï¼Œåˆ™ä¸ä¸Šä¸€è¡Œéç©ºå¸¸é‡å³å€¼ç›¸åŒ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		x <span class="type">uint16</span> = <span class="number">16</span></span><br><span class="line">		y</span><br><span class="line">		s = <span class="string">&quot;abc&quot;</span></span><br><span class="line">		z</span><br><span class="line">	)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%v\n&quot;</span>, y, y)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%v\n&quot;</span>, z, z)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uint16,16</span><br><span class="line">string,abc</span><br></pre></td></tr></table></figure>

<p>å¸¸é‡çš„æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li><p>å¸¸é‡ä¸­çš„æ•°æ®ç±»å‹åªå¯ä»¥æ˜¯å¸ƒå°”å‹ã€æ•°å­—å‹ï¼ˆæ•´æ•°å‹ã€æµ®ç‚¹å‹å’Œå¤æ•°ï¼‰å’Œå­—ç¬¦ä¸²å‹</p>
</li>
<li><p><em><strong>ä¸æ›¾ä½¿ç”¨çš„å¸¸é‡ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œæ˜¯ä¸ä¼šæŠ¥é”™çš„</strong></em></p>
</li>
<li><p>æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ—¶å€™ï¼Œå¿…é¡»ç¡®ä¿å¸¸é‡å·¦å³å€¼ç±»å‹ä¸€è‡´ï¼Œéœ€è¦æ—¶å¯åšæ˜¾ç¤ºç±»å‹è½¬æ¢ã€‚è¿™ä¸å˜é‡å°±ä¸ä¸€æ ·äº†ï¼Œå˜é‡æ˜¯å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹å€¼</p>
</li>
</ul>
<h3 id="iotaå…³é”®å­—"><a href="#iotaå…³é”®å­—" class="headerlink" title="iotaå…³é”®å­—"></a>iotaå…³é”®å­—</h3><p>iotaï¼Œç‰¹æ®Šå¸¸é‡ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå¯ä»¥è¢«ç¼–è¯‘å™¨ä¿®æ”¹çš„å¸¸é‡</p>
<p>iota å¯ä»¥è¢«ç”¨ä½œæšä¸¾å€¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span></span><br><span class="line">    b = <span class="literal">iota</span></span><br><span class="line">    c = <span class="literal">iota</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€ä¸ª iota ç­‰äº 0ï¼Œæ¯å½“ iota åœ¨æ–°çš„ä¸€è¡Œè¢«ä½¿ç”¨æ—¶ï¼Œå®ƒçš„å€¼éƒ½ä¼šè‡ªåŠ¨åŠ  1ï¼›æ‰€ä»¥ a&#x3D;0, b&#x3D;1, c&#x3D;2 å¯ä»¥ç®€å†™ä¸ºå¦‚ä¸‹å½¢å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span></span><br><span class="line">    b</span><br><span class="line">    c</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>iota ç”¨æ³•</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">const</span> (</span><br><span class="line">            a = <span class="literal">iota</span>   <span class="comment">//0</span></span><br><span class="line">            b          <span class="comment">//1</span></span><br><span class="line">            c          <span class="comment">//2</span></span><br><span class="line">            d = <span class="string">&quot;ha&quot;</span>   <span class="comment">//ç‹¬ç«‹å€¼ï¼Œiota += 1</span></span><br><span class="line">            e          <span class="comment">//&quot;ha&quot;   iota += 1</span></span><br><span class="line">            f = <span class="number">100</span>    <span class="comment">//iota +=1</span></span><br><span class="line">            g          <span class="comment">//100  iota +=1</span></span><br><span class="line">            h = <span class="literal">iota</span>   <span class="comment">//7,æ¢å¤è®¡æ•°</span></span><br><span class="line">            i          <span class="comment">//8</span></span><br><span class="line">    )</span><br><span class="line">    fmt.Println(a,b,c,d,e,f,g,h,i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0 1 2 ha ha 100 100 7 8</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸­æ–­iotaè‡ªå¢ï¼Œåˆ™å¿…é¡»æ˜¾å¼æ¢å¤ã€‚ä¸”åç»­è‡ªå¢å€¼æŒ‰è¡Œåºé€’å¢</p>
<p>è‡ªå¢é»˜è®¤æ˜¯intç±»å‹ï¼Œå¯ä»¥è‡ªè¡Œè¿›è¡Œæ˜¾ç¤ºæŒ‡å®šç±»å‹</p>
<p>æ•°å­—å¸¸é‡ä¸ä¼šåˆ†é…å­˜å‚¨ç©ºé—´ï¼Œæ— é¡»åƒå˜é‡é‚£æ ·é€šè¿‡å†…å­˜å¯»å€æ¥å–å€¼ï¼Œå› æ­¤æ— æ³•è·å–åœ°å€</p>
<h1 id="å˜é‡ä¸å¸¸é‡çš„ç¤ºä¾‹"><a href="#å˜é‡ä¸å¸¸é‡çš„ç¤ºä¾‹" class="headerlink" title="å˜é‡ä¸å¸¸é‡çš„ç¤ºä¾‹"></a>å˜é‡ä¸å¸¸é‡çš„ç¤ºä¾‹</h1><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> a = <span class="string">&quot;initial&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b, c <span class="type">int</span> = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> d = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> e <span class="type">float64</span></span><br><span class="line"></span><br><span class="line">	f := <span class="type">float32</span>(e)</span><br><span class="line"></span><br><span class="line">	g := a + <span class="string">&quot;foo&quot;</span></span><br><span class="line">	fmt.Println(a, b, c, d, e, f) <span class="comment">// initial 1 2 true 0 0</span></span><br><span class="line">	fmt.Println(g)                <span class="comment">// initialapple</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> s <span class="type">string</span> = <span class="string">&quot;constant&quot;</span></span><br><span class="line">	<span class="keyword">const</span> h = <span class="number">500000000</span></span><br><span class="line">	<span class="keyword">const</span> i = <span class="number">3e20</span> / h</span><br><span class="line">	fmt.Println(s, h, i, math.Sin(h), math.Sin(i))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">initial 1 2 true 0 0</span><br><span class="line">initialfoo</span><br><span class="line">constant 500000000 6e+11 -0.28470407323754404 0.7591864109375384</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ç±»å‹ä¸è¾“å…¥è¾“å‡º</title>
    <url>/2023/06/02/Go/5/</url>
    <content><![CDATA[<h1 id="åŸºæœ¬è¯­æ³•â€”â€”æ•°æ®ç±»å‹"><a href="#åŸºæœ¬è¯­æ³•â€”â€”æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬è¯­æ³•â€”â€”æ•°æ®ç±»å‹"></a>åŸºæœ¬è¯­æ³•â€”â€”æ•°æ®ç±»å‹</h1><h2 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h2><p>ä»¥ä¸‹æ˜¯goä¸­å¯ç”¨çš„åŸºæœ¬æ•°æ®ç±»å‹</p>
<p><a href="https://smms.app/image/mkKRra8JejXWM4V" target="_blank"><img src="https://s2.loli.net/2023/06/02/mkKRra8JejXWM4V.jpg" ></a></p>
<h3 id="å¸ƒå°”å‹bool"><a href="#å¸ƒå°”å‹bool" class="headerlink" title="å¸ƒå°”å‹bool"></a>å¸ƒå°”å‹bool</h3><p>å¸ƒå°”å‹çš„å€¼åªå¯ä»¥æ˜¯å¸¸é‡ true æˆ–è€… falseã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼švar b bool &#x3D; true</p>
<h3 id="æ•°å€¼å‹"><a href="#æ•°å€¼å‹" class="headerlink" title="æ•°å€¼å‹"></a>æ•°å€¼å‹</h3><p><strong>1ã€</strong>æ•´æ•°å‹</p>
<ul>
<li><p>int8<br>æœ‰ç¬¦å· 8 ä½æ•´å‹ (-128 åˆ° 127)<br>é•¿åº¦ï¼š8bit</p>
</li>
<li><p>int16<br>æœ‰ç¬¦å· 16 ä½æ•´å‹ (-32768 åˆ° 32767)</p>
</li>
<li><p>int32<br>æœ‰ç¬¦å· 32 ä½æ•´å‹ (-2147483648 åˆ° 2147483647)</p>
</li>
<li><p>int64<br>æœ‰ç¬¦å· 64 ä½æ•´å‹ (-9223372036854775808 åˆ° 9223372036854775807)</p>
</li>
<li><p>uint8<br>æ— ç¬¦å· 8 ä½æ•´å‹ (0 åˆ° 255)<br>8ä½éƒ½ç”¨äºè¡¨ç¤ºæ•°å€¼ï¼š</p>
</li>
<li><p>uint16<br>æ— ç¬¦å· 16 ä½æ•´å‹ (0 åˆ° 65535)</p>
</li>
<li><p>uint32<br>æ— ç¬¦å· 32 ä½æ•´å‹ (0 åˆ° 4294967295)</p>
</li>
<li><p>uint64<br>æ— ç¬¦å· 64 ä½æ•´å‹ (0 åˆ° 18446744073709551615)</p>
</li>
</ul>
<blockquote>
<p>intå’Œuint:æ ¹æ®åº•å±‚å¹³å°ï¼Œè¡¨ç¤º32æˆ–64ä½æ•´æ•°ã€‚é™¤ééœ€è¦ä½¿ç”¨ç‰¹å®šå¤§å°çš„æ•´æ•°ï¼Œå¦åˆ™é€šå¸¸åº”è¯¥ä½¿ç”¨intæ¥è¡¨ç¤ºæ•´æ•°ã€‚<br>å¤§å°:32ä½ç³»ç»Ÿ32ä½ï¼Œ64ä½ç³»ç»Ÿ64ä½ã€‚<br>èŒƒå›´:-2147483648åˆ°2147483647çš„32ä½ç³»ç»Ÿå’Œ-9223372036854775808åˆ°9223372036854775807çš„64ä½ç³»ç»Ÿã€‚</p>
</blockquote>
<p><strong>2ã€æµ®ç‚¹å‹</strong></p>
<ul>
<li><p>float32</p>
<p>IEEE-754 32ä½æµ®ç‚¹å‹æ•°</p>
</li>
<li><p>float64</p>
<p>IEEE-754 64ä½æµ®ç‚¹å‹æ•°</p>
</li>
<li><p>complex64</p>
<p>32 ä½å®æ•°å’Œè™šæ•°</p>
</li>
<li><p>complex128</p>
<p>64 ä½å®æ•°å’Œè™šæ•°</p>
</li>
</ul>
<p><strong>3ã€å…¶ä»–</strong></p>
<ul>
<li><p>byte</p>
<p>ç±»ä¼¼ uint8</p>
</li>
<li><p>rune</p>
<p>ç±»ä¼¼ int32</p>
</li>
<li><p>uint</p>
<p>32 æˆ– 64 ä½</p>
</li>
<li><p>int</p>
<p>ä¸ uint ä¸€æ ·å¤§å°</p>
</li>
<li><p>uintptr</p>
<p>æ— ç¬¦å·æ•´å‹ï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ</p>
</li>
</ul>
<h3 id="å­—ç¬¦ä¸²å‹"><a href="#å­—ç¬¦ä¸²å‹" class="headerlink" title="å­—ç¬¦ä¸²å‹"></a>å­—ç¬¦ä¸²å‹</h3><p>å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸²å›ºå®šé•¿åº¦çš„å­—ç¬¦è¿æ¥èµ·æ¥çš„å­—ç¬¦åºåˆ—ã€‚Goçš„å­—ç¬¦ä¸²æ˜¯ç”±å•ä¸ªå­—èŠ‚è¿æ¥èµ·æ¥çš„ã€‚Goè¯­è¨€çš„å­—ç¬¦ä¸²çš„å­—èŠ‚ä½¿ç”¨UTF-8ç¼–ç æ ‡è¯†Unicodeæ–‡æœ¬</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str <span class="type">string</span></span><br><span class="line">str = <span class="string">&quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure>



<h3 id="æ•°æ®ç±»å‹è½¬æ¢ï¼šType-Convert"><a href="#æ•°æ®ç±»å‹è½¬æ¢ï¼šType-Convert" class="headerlink" title="æ•°æ®ç±»å‹è½¬æ¢ï¼šType Convert"></a>æ•°æ®ç±»å‹è½¬æ¢ï¼šType Convert</h3><p>è¯­æ³•æ ¼å¼ï¼šType(Value)</p>
<p>å¸¸æ•°ï¼šåœ¨æœ‰éœ€è¦çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è½¬å‹</p>
<p>å˜é‡ï¼šéœ€è¦æ‰‹åŠ¨è½¬å‹	T(V)</p>
<p>æ³¨æ„ç‚¹ï¼šå…¼å®¹ç±»å‹å¯ä»¥è½¬æ¢</p>
<h2 id="å¤åˆç±»å‹-æ´¾ç”Ÿç±»å‹"><a href="#å¤åˆç±»å‹-æ´¾ç”Ÿç±»å‹" class="headerlink" title="å¤åˆç±»å‹(æ´¾ç”Ÿç±»å‹)"></a>å¤åˆç±»å‹(æ´¾ç”Ÿç±»å‹)</h2><p>1ã€æŒ‡é’ˆç±»å‹ï¼ˆPointerï¼‰<br>2ã€æ•°ç»„ç±»å‹<br>3ã€ç»“æ„åŒ–ç±»å‹(struct)<br>4ã€Channel ç±»å‹<br>5ã€å‡½æ•°ç±»å‹<br>6ã€åˆ‡ç‰‡ç±»å‹<br>7ã€æ¥å£ç±»å‹ï¼ˆinterfaceï¼‰<br>8ã€Map ç±»å‹</p>
<h1 id="é”®ç›˜è¾“å…¥å’Œæ‰“å°è¾“å‡º"><a href="#é”®ç›˜è¾“å…¥å’Œæ‰“å°è¾“å‡º" class="headerlink" title="é”®ç›˜è¾“å…¥å’Œæ‰“å°è¾“å‡º"></a>é”®ç›˜è¾“å…¥å’Œæ‰“å°è¾“å‡º</h1><h2 id="æ‰“å°è¾“å‡º"><a href="#æ‰“å°è¾“å‡º" class="headerlink" title="æ‰“å°è¾“å‡º"></a>æ‰“å°è¾“å‡º</h2><h3 id="fmtåŒ…"><a href="#fmtåŒ…" class="headerlink" title="fmtåŒ…"></a>fmtåŒ…</h3><p>fmtåŒ…å®ç°äº†ç±»ä¼¼Cè¯­è¨€printfå’Œscanfçš„æ ¼å¼åŒ–I&#x2F;Oã€‚æ ¼å¼åŒ–verbï¼ˆâ€™verbâ€™ï¼‰æºè‡ªCè¯­è¨€ä½†æ›´ç®€å•ã€‚</p>
<p>è¯¦è§å®˜ç½‘fmtçš„APIï¼š<a href="https://golang.google.cn/pkg/fmt/">https://golang.google.cn/pkg/fmt/</a></p>
<h3 id="å¯¼å…¥åŒ…"><a href="#å¯¼å…¥åŒ…" class="headerlink" title="å¯¼å…¥åŒ…"></a>å¯¼å…¥åŒ…</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨æ‰“å°å‡½æ•°"><a href="#å¸¸ç”¨æ‰“å°å‡½æ•°" class="headerlink" title="å¸¸ç”¨æ‰“å°å‡½æ•°"></a>å¸¸ç”¨æ‰“å°å‡½æ•°</h3><p><strong>æ‰“å°ï¼š</strong></p>
<p><a href="https://golang.google.cn/pkg/fmt/#Print">func Print(a â€¦interface{}) (n int, err error)</a></p>
<p><strong>æ ¼å¼åŒ–æ‰“å°ï¼š</strong></p>
<p><a href="https://golang.google.cn/pkg/fmt/#Printf">func Printf(format string, a â€¦interface{}) (n int, err error)</a></p>
<p><strong>æ‰“å°åæ¢è¡Œ</strong></p>
<p><a href="https://golang.google.cn/pkg/fmt/#Println">func Println(a â€¦interface{}) (n int, err error)</a></p>
<p>æ ¼å¼åŒ–æ‰“å°ä¸­çš„å¸¸ç”¨å ä½ç¬¦ï¼š</p>
<blockquote>
<p>æ ¼å¼åŒ–æ‰“å°å ä½ç¬¦ï¼š<br>            %v,åŸæ ·è¾“å‡º<br>            %Tï¼Œæ‰“å°ç±»å‹<br>            %t,boolç±»å‹<br>            %sï¼Œå­—ç¬¦ä¸²<br>            %fï¼Œæµ®ç‚¹<br>            %dï¼Œ10è¿›åˆ¶çš„æ•´æ•°<br>            %bï¼Œ2è¿›åˆ¶çš„æ•´æ•°<br>            %oï¼Œ8è¿›åˆ¶<br>            %xï¼Œ%Xï¼Œ16è¿›åˆ¶<br>                %xï¼š0-9ï¼Œa-f<br>                %Xï¼š0-9ï¼ŒA-F<br>            %cï¼Œæ‰“å°å­—ç¬¦<br>            %pï¼Œæ‰“å°åœ°å€</p>
</blockquote>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">100</span>           <span class="comment">//int</span></span><br><span class="line">	b := <span class="number">3.14</span>          <span class="comment">//float64</span></span><br><span class="line">	c := <span class="literal">true</span>          <span class="comment">// bool</span></span><br><span class="line">	d := <span class="string">&quot;Hello World&quot;</span> <span class="comment">//string</span></span><br><span class="line">	e := <span class="string">`Ruby`</span>        <span class="comment">//string</span></span><br><span class="line">	f := <span class="string">&#x27;A&#x27;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%b\n&quot;</span>, a, a)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%f\n&quot;</span>, b, b)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%t\n&quot;</span>, c, c)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%s\n&quot;</span>, d, d)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%s\n&quot;</span>, e, e)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T,%d,%c\n&quot;</span>, f, f, f)</span><br><span class="line">	fmt.Println(<span class="string">&quot;-----------------------&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, a)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, b)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, c)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, d)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, e)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, f)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int,1100100</span><br><span class="line">float64,3.140000</span><br><span class="line">bool,true</span><br><span class="line">string,Hello World</span><br><span class="line">string,Ruby</span><br><span class="line">int32,65,A</span><br><span class="line">-----------------------</span><br><span class="line">100</span><br><span class="line">3.14</span><br><span class="line">true</span><br><span class="line">Hello World</span><br><span class="line">Ruby</span><br><span class="line">65</span><br></pre></td></tr></table></figure>



<h2 id="é”®ç›˜è¾“å…¥"><a href="#é”®ç›˜è¾“å…¥" class="headerlink" title="é”®ç›˜è¾“å…¥"></a>é”®ç›˜è¾“å…¥</h2><h3 id="fmtåŒ…è¯»å–é”®ç›˜è¾“å…¥"><a href="#fmtåŒ…è¯»å–é”®ç›˜è¾“å…¥" class="headerlink" title="fmtåŒ…è¯»å–é”®ç›˜è¾“å…¥"></a>fmtåŒ…è¯»å–é”®ç›˜è¾“å…¥</h3><p>å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><a href="https://golang.google.cn/pkg/fmt/#Scan">func Scan(a â€¦interface{}) (n int, err error)</a></li>
</ul>
<p>â€‹		Scan ä»æ ‡å‡†è¾“å…¥æ‰«ææ–‡æœ¬ï¼Œè¯»å–ç”± <strong>ç©ºç™½ç¬¦</strong> åˆ†éš”çš„å€¼åˆ†åˆ«ä¿å­˜åˆ°æœ¬å‡½æ•°çš„å‚æ•°ä¸­ã€‚ï¼ˆæ¢è¡Œç¬¦ä¹Ÿè¢«è§†ä¸ºç©ºç™½ç¬¦ï¼‰</p>
<ul>
<li><p><a href="https://golang.google.cn/pkg/fmt/#Scanf">func Scanf(format string, a â€¦interface{}) (n int, err error)</a></p>
<p>Scanfä»æ ‡å‡†è¾“å…¥æ‰«ææ–‡æœ¬ï¼ŒæŒ‰ç…§ format å‚æ•°æŒ‡å®šçš„æ ¼å¼å»è¯»å–ç”±ç©ºç™½ç¬¦åˆ†éš”çš„å€¼ä¿å­˜åˆ°ä¼ é€’ç»™æœ¬å‡½æ•°çš„å‚æ•°ä¸­ã€‚</p>
</li>
<li><p><a href="https://golang.google.cn/pkg/fmt/#Scanln">func Scanln(a â€¦interface{}) (n int, err error)</a></p>
<p>Scanlnç±»ä¼¼Scanï¼Œå®ƒåœ¨é‡åˆ°æ¢è¡Œæ—¶åœæ­¢æ‰«æã€‚æœ€åä¸€ä¸ªæ•°æ®åé¢å¿…é¡»æœ‰æ¢è¡Œæˆ–è€…åˆ°è¾¾ç»“æŸä½ç½®ã€‚</p>
</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="type">int</span></span><br><span class="line">	<span class="keyword">var</span> y <span class="type">float64</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œä¸€ä¸ªæµ®ç‚¹ç±»å‹ï¼š&quot;</span>)</span><br><span class="line">	fmt.Scanln(&amp;x,&amp;y)<span class="comment">//è¯»å–é”®ç›˜çš„è¾“å…¥ï¼Œé€šè¿‡æ“ä½œåœ°å€ï¼Œèµ‹å€¼ç»™xå’Œy   é˜»å¡å¼</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;xçš„æ•°å€¼ï¼š%dï¼Œyçš„æ•°å€¼ï¼š%f\n&quot;</span>,x,y)</span><br><span class="line"></span><br><span class="line">	fmt.Scanf(<span class="string">&quot;%d,%f&quot;</span>,&amp;x,&amp;y)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;x:%d,y:%f\n&quot;</span>,x,y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œä¸€ä¸ªæµ®ç‚¹ç±»å‹ï¼š</span><br><span class="line">100 3.14</span><br><span class="line">xçš„æ•°å€¼ï¼š100ï¼Œyçš„æ•°å€¼ï¼š3.140000</span><br><span class="line">100,5.20</span><br><span class="line">x:100,y:5.200000</span><br></pre></td></tr></table></figure>

<h3 id="bufioåŒ…è¯»å–"><a href="#bufioåŒ…è¯»å–" class="headerlink" title="bufioåŒ…è¯»å–"></a>bufioåŒ…è¯»å–</h3><p><a href="https://golang.google.cn/pkg/bufio/">https://golang.google.cn/pkg/bufio/</a></p>
<p>bufioåŒ…ä¸­éƒ½æ˜¯IOæ“ä½œçš„æ–¹æ³•ï¼š</p>
<p>å…ˆåˆ›å»ºReaderå¯¹è±¡,ç„¶åå°±å¯ä»¥å„ç§è¯»å–äº†ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š&quot;</span>)</span><br><span class="line">	reader := bufio.NewReader(os.Stdin)</span><br><span class="line">	s1, _ := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;è¯»åˆ°çš„æ•°æ®ï¼š&quot;</span>, s1)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œæ•ˆæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</span><br><span class="line">hello wxy</span><br><span class="line">è¯»åˆ°çš„æ•°æ®ï¼š hello wxy</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<ul>
<li><code>reader := bufio.NewReader(os.Stdin)</code>ï¼šè¿™è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ªç”¨äºè¯»å–ç”¨æˆ·è¾“å…¥çš„è¯»å–å™¨ã€‚<code>bufio.NewReader</code> å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° <code>os.Stdin</code>ï¼Œå®ƒè¡¨ç¤ºæ ‡å‡†è¾“å…¥ï¼ˆé€šå¸¸æ˜¯é”®ç›˜è¾“å…¥ï¼‰ã€‚<code>reader</code> æ˜¯ä¸€ä¸ªè¯»å–å™¨å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å–ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ã€‚</li>
<li><code>s1, _ := reader.ReadString(&#39;\n&#39;)</code>ï¼šè¿™è¡Œä»£ç ä½¿ç”¨è¯»å–å™¨ <code>reader</code> ä»æ ‡å‡†è¾“å…¥è¯»å–å­—ç¬¦ä¸²ï¼Œç›´åˆ°é‡åˆ°æ¢è¡Œç¬¦ (<code>&#39;\n&#39;</code>) ä¸ºæ­¢ã€‚å®ƒå°†è¯»å–çš„å­—ç¬¦ä¸²èµ‹å€¼ç»™å˜é‡ <code>s1</code>ã€‚æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨äº† <code>_</code>ï¼ˆä¸‹åˆ’çº¿ï¼‰æ¥å¿½ç•¥å‡½æ•°çš„ç¬¬äºŒä¸ªè¿”å›å€¼ï¼ˆè¡¨ç¤ºå¯èƒ½çš„é”™è¯¯ï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å…³å¿ƒé”™è¯¯å¤„ç†ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¡ä»¶è¯­å¥ä¸å¾ªç¯è¯­å¥</title>
    <url>/2023/06/02/Go/6/</url>
    <content><![CDATA[<h1 id="ç¨‹åºçš„æµç¨‹ç»“æ„"><a href="#ç¨‹åºçš„æµç¨‹ç»“æ„" class="headerlink" title="ç¨‹åºçš„æµç¨‹ç»“æ„"></a>ç¨‹åºçš„æµç¨‹ç»“æ„</h1><p>ç¨‹åºçš„æµç¨‹æ§åˆ¶ç»“æ„ä¸€å…±æœ‰ä¸‰ç§ï¼šé¡ºåºç»“æ„ï¼Œé€‰æ‹©ç»“æ„ï¼Œå¾ªç¯ç»“æ„ã€‚</p>
<p>é¡ºåºç»“æ„ï¼šä»ä¸Šå‘ä¸‹ï¼Œé€è¡Œæ‰§è¡Œã€‚</p>
<p>é€‰æ‹©ç»“æ„ï¼šæ¡ä»¶æ»¡è¶³ï¼ŒæŸäº›ä»£ç æ‰ä¼šæ‰§è¡Œã€‚0-1æ¬¡</p>
<p>â€‹	åˆ†æ”¯è¯­å¥ï¼šifï¼Œswitchï¼Œselect</p>
<p>å¾ªç¯ç»“æ„ï¼šæ¡ä»¶æ»¡è¶³ï¼ŒæŸäº›ä»£ç ä¼šè¢«åå¤çš„æ‰§è¡Œå¤šæ¬¡ã€‚0-Næ¬¡</p>
<p>â€‹	å¾ªç¯è¯­å¥ï¼šfor</p>
<h1 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h1><h2 id="Ifè¯­å¥"><a href="#Ifè¯­å¥" class="headerlink" title="Ifè¯­å¥"></a>Ifè¯­å¥</h2><p>è¯­æ³•æ ¼å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> å¸ƒå°”è¡¨è¾¾å¼ &#123;</span><br><span class="line">   <span class="comment">/* åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸º true æ—¶æ‰§è¡Œ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> å¸ƒå°”è¡¨è¾¾å¼ &#123;</span><br><span class="line">   <span class="comment">/* åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸º true æ—¶æ‰§è¡Œ */</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">/* åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸º false æ—¶æ‰§è¡Œ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> å¸ƒå°”è¡¨è¾¾å¼<span class="number">1</span> &#123;</span><br><span class="line">   <span class="comment">/* åœ¨å¸ƒå°”è¡¨è¾¾å¼1ä¸º true æ—¶æ‰§è¡Œ */</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> å¸ƒå°”è¡¨è¾¾å¼<span class="number">2</span>&#123;</span><br><span class="line">   <span class="comment">/* åœ¨å¸ƒå°”è¡¨è¾¾å¼1ä¸º false ,å¸ƒå°”è¡¨è¾¾å¼2ä¸ºtrueæ—¶æ‰§è¡Œ */</span></span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="comment">/* åœ¨ä¸Šé¢ä¸¤ä¸ªå¸ƒå°”è¡¨è¾¾å¼éƒ½ä¸ºfalseæ—¶ï¼Œæ‰§è¡Œ*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">/* å®šä¹‰å±€éƒ¨å˜é‡ */</span></span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"> </span><br><span class="line">   <span class="comment">/* ä½¿ç”¨ if è¯­å¥åˆ¤æ–­å¸ƒå°”è¡¨è¾¾å¼ */</span></span><br><span class="line">   <span class="keyword">if</span> a &lt; <span class="number">20</span> &#123;</span><br><span class="line">       <span class="comment">/* å¦‚æœæ¡ä»¶ä¸º true åˆ™æ‰§è¡Œä»¥ä¸‹è¯­å¥ */</span></span><br><span class="line">       fmt.Printf(<span class="string">&quot;a å°äº 20\n&quot;</span> )</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;a çš„å€¼ä¸º : %d\n&quot;</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå…¶ä¸­åŒ…å«ä¸€ä¸ªå¯é€‰çš„è¯­å¥ç»„ä»¶(åœ¨è¯„ä¼°æ¡ä»¶ä¹‹å‰æ‰§è¡Œ)ï¼Œåˆ™è¿˜æœ‰ä¸€ä¸ªå˜ä½“ã€‚å®ƒçš„è¯­æ³•æ˜¯</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> statement; condition &#123;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> condition&#123;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> <span class="number">7</span>%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;7 is even&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;7 is odd&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> <span class="number">8</span>%<span class="number">4</span> == <span class="number">0</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;8 is divisible by 4&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> num := <span class="number">9</span>; num &lt; <span class="number">0</span> &#123;</span><br><span class="line">		fmt.Println(num, <span class="string">&quot;is negative&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> num &lt; <span class="number">10</span> &#123;</span><br><span class="line">		fmt.Println(num, <span class="string">&quot;has 1 digit&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(num, <span class="string">&quot;has multiple digits&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œnumçš„å®šä¹‰åœ¨ifé‡Œï¼Œé‚£ä¹ˆåªèƒ½å¤Ÿåœ¨è¯¥if..elseè¯­å¥å—ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™çš„ã€‚</p>
</blockquote>
<h2 id="switchè¯­å¥ï¼šâ€œå¼€å…³â€"><a href="#switchè¯­å¥ï¼šâ€œå¼€å…³â€" class="headerlink" title="switchè¯­å¥ï¼šâ€œå¼€å…³â€"></a>switchè¯­å¥ï¼šâ€œå¼€å…³â€</h2><p>switchæ˜¯ä¸€ä¸ªæ¡ä»¶è¯­å¥ï¼Œå®ƒè®¡ç®—è¡¨è¾¾å¼å¹¶å°†å…¶ä¸å¯èƒ½åŒ¹é…çš„åˆ—è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶æ ¹æ®åŒ¹é…æ‰§è¡Œä»£ç å—ã€‚å®ƒå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ç§æƒ¯ç”¨çš„æ–¹å¼æ¥å†™å¤šä¸ªif elseå­å¥ã€‚</p>
<p>switch è¯­å¥ç”¨äºåŸºäºä¸åŒæ¡ä»¶æ‰§è¡Œä¸åŒåŠ¨ä½œï¼Œæ¯ä¸€ä¸ª case åˆ†æ”¯éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä»ä¸Šç›´ä¸‹é€ä¸€æµ‹è¯•ï¼Œç›´åˆ°åŒ¹é…ä¸ºæ­¢ã€‚<br>switch è¯­å¥æ‰§è¡Œçš„è¿‡ç¨‹ä»ä¸Šè‡³ä¸‹ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…é¡¹ï¼ŒåŒ¹é…é¡¹åé¢ä¹Ÿ<em><strong>ä¸éœ€è¦å†åŠ break</strong></em>ã€‚</p>
<p><em><strong>è€Œå¦‚æœswitchæ²¡æœ‰è¡¨è¾¾å¼ï¼Œå®ƒä¼šåŒ¹é…true</strong></em></p>
<p><em>Goé‡Œé¢switché»˜è®¤ç›¸å½“äºæ¯ä¸ªcaseæœ€åå¸¦æœ‰break</em>ï¼ŒåŒ¹é…æˆåŠŸåä¸ä¼šè‡ªåŠ¨å‘ä¸‹æ‰§è¡Œå…¶ä»–caseï¼Œè€Œæ˜¯è·³å‡ºæ•´ä¸ªswitch, ä½†æ˜¯å¯ä»¥ä½¿ç”¨fallthroughå¼ºåˆ¶æ‰§è¡Œåé¢çš„caseä»£ç ã€‚</p>
<p>å˜é‡ var1 å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œè€Œ val1 å’Œ val2 åˆ™å¯ä»¥æ˜¯åŒç±»å‹çš„ä»»æ„å€¼ã€‚ç±»å‹ä¸è¢«å±€é™äºå¸¸é‡æˆ–æ•´æ•°ï¼Œä½†å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ï¼›æˆ–è€…æœ€ç»ˆç»“æœä¸ºç›¸åŒç±»å‹çš„è¡¨è¾¾å¼ã€‚<br>å¯ä»¥<strong>åŒæ—¶æµ‹è¯•å¤šä¸ªå¯èƒ½ç¬¦åˆæ¡ä»¶çš„å€¼ï¼Œä½¿ç”¨é€—å·åˆ†å‰²å®ƒä»¬</strong>ï¼Œä¾‹å¦‚ï¼šcase val1, val2, val3ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> var1 &#123;</span><br><span class="line">    <span class="keyword">case</span> val1:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">case</span> val2:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/* å®šä¹‰å±€éƒ¨å˜é‡ */</span></span><br><span class="line">	<span class="keyword">var</span> grade = <span class="string">&quot;B&quot;</span></span><br><span class="line">	<span class="keyword">var</span> marks = <span class="number">90</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> marks &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">90</span>:</span><br><span class="line">		grade = <span class="string">&quot;A&quot;</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">80</span>:</span><br><span class="line">		grade = <span class="string">&quot;B&quot;</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>:</span><br><span class="line">		grade = <span class="string">&quot;C&quot;</span> <span class="comment">//case åå¯ä»¥ç”±å¤šä¸ªæ•°å€¼</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		grade = <span class="string">&quot;D&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> grade == <span class="string">&quot;A&quot;</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;ä¼˜ç§€!\n&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> grade == <span class="string">&quot;B&quot;</span>, grade == <span class="string">&quot;C&quot;</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;è‰¯å¥½\n&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> grade == <span class="string">&quot;D&quot;</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;åŠæ ¼\n&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> grade == <span class="string">&quot;F&quot;</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;ä¸åŠæ ¼\n&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;å·®\n&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ä½ çš„ç­‰çº§æ˜¯ %s\n&quot;</span>, grade)</span><br><span class="line">    </span><br><span class="line">    t := time.Now()</span><br><span class="line">	<span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> t.Hour() &lt; <span class="number">12</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;It&#x27;s before noon&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;It&#x27;s after noon&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä¼˜ç§€!</span><br><span class="line">ä½ çš„ç­‰çº§æ˜¯ A</span><br><span class="line">It&#x27;s before noon</span><br></pre></td></tr></table></figure>



<h3 id="fallthrough"><a href="#fallthrough" class="headerlink" title="fallthrough"></a>fallthrough</h3><p>å¦‚éœ€è´¯é€šåç»­çš„caseï¼Œå°±æ·»åŠ fallthrough</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">switch</span> x := <span class="number">5</span>; x &#123;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(x)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">		x += <span class="number">10</span></span><br><span class="line">		fmt.Println(x)</span><br><span class="line">		<span class="keyword">fallthrough</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">		x += <span class="number">20</span></span><br><span class="line">		fmt.Println(x)</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">15</span><br><span class="line">35</span><br></pre></td></tr></table></figure>

<hr>
<p>è§£é‡Šï¼š</p>
<p>æ ¹æ®switchè¯­å¥çš„é€»è¾‘ï¼Œé¦–å…ˆä¼šæ‰§è¡Œdefaultåˆ†æ”¯ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ²¡æœ‰åœ¨defaultåˆ†æ”¯ä¸­å†™å…¥ä»»ä½•ä»£ç ï¼Œæ‰€ä»¥ä¼šç›´æ¥è·³è¿‡ã€‚åœ¨case 5åˆ†æ”¯çš„æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨äº†fallthroughå…³é”®å­—ã€‚fallthroughå…³é”®å­—çš„ä½œç”¨æ˜¯å¼ºåˆ¶æ‰§è¡Œä¸‹ä¸€ä¸ªcaseåˆ†æ”¯çš„ä»£ç ï¼Œè€Œä¸è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚</p>
<p>åœ¨<code>switch</code>è¯­å¥ä¸­ï¼Œ<code>default</code>ç”¨äºå¤„ç†æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•<code>case</code>çš„æƒ…å†µã€‚å½“<code>switch</code>è¡¨è¾¾å¼çš„å€¼ä¸æ‰€æœ‰çš„<code>case</code>éƒ½ä¸åŒ¹é…æ—¶ï¼Œç¨‹åºä¼šæ‰§è¡Œ<code>default</code>åˆ†æ”¯ä¸­çš„ä»£ç ã€‚</p>
<p><code>default</code>åˆ†æ”¯æ˜¯å¯é€‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥é€‰æ‹©æ˜¯å¦åœ¨<code>switch</code>è¯­å¥ä¸­åŒ…å«å®ƒã€‚å¦‚æœæ²¡æœ‰<code>default</code>åˆ†æ”¯ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•ä¸€ä¸ª<code>case</code>åŒ¹é…åˆ°<code>switch</code>è¡¨è¾¾å¼çš„å€¼ï¼Œé‚£ä¹ˆ<code>switch</code>è¯­å¥å°†ä¸ä¼šæ‰§è¡Œä»»ä½•ä»£ç ã€‚</p>
<p><code>default</code>åˆ†æ”¯é€šå¸¸è¢«ç”¨ä½œæœ€åä¸€ä¸ªåˆ†æ”¯ï¼Œç”¨äºå¤„ç†ä¸å¸¸è§æˆ–è€…æ„å¤–çš„æƒ…å†µã€‚å®ƒå¯ä»¥ç”¨æ¥æä¾›ä¸€ä¸ªé»˜è®¤çš„å¤„ç†é€»è¾‘ï¼Œæˆ–è€…ç»™ç”¨æˆ·ä¸€ä¸ªé”™è¯¯æç¤ºã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†<code>default</code>çš„ä½¿ç”¨ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	num := <span class="number">10</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> num &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;å°æ•°&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;ä¸­æ•°&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;å¤§æ•°&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;æœªçŸ¥æ•°&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœ<code>num</code>çš„å€¼ä¸å±äº1åˆ°9ä¹‹é—´çš„ä»»ä½•ä¸€ä¸ªæ•°ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œ<code>default</code>åˆ†æ”¯ï¼Œå¹¶è¾“å‡ºâ€æœªçŸ¥æ•°â€ã€‚<code>default</code>åˆ†æ”¯å¯ä»¥ç”¨æ¥å¤„ç†ä¸€äº›è¾¹ç¼˜æƒ…å†µæˆ–è€…æœªé¢„æ–™åˆ°çš„æƒ…å†µï¼Œç¡®ä¿ç¨‹åºçš„å¥å£®æ€§ã€‚</p>
<hr>
<p><em>caseä¸­çš„è¡¨è¾¾å¼æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥çœç•¥ã€‚å¦‚æœè¯¥è¡¨è¾¾å¼è¢«çœç•¥ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯switch trueï¼Œå¹¶ä¸”æ¯ä¸ªcaseè¡¨è¾¾å¼éƒ½è¢«è®¡ç®—ä¸ºtrueï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„ä»£ç å—</em>ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    num := <span class="number">75</span></span><br><span class="line">    <span class="keyword">switch</span> &#123; <span class="comment">// expression is omitted</span></span><br><span class="line">    <span class="keyword">case</span> num &gt;= <span class="number">0</span> &amp;&amp; num &lt;= <span class="number">50</span>:</span><br><span class="line">        fmt.Println(<span class="string">&quot;num is greater than 0 and less than 50&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> num &gt;= <span class="number">51</span> &amp;&amp; num &lt;= <span class="number">100</span>:</span><br><span class="line">        fmt.Println(<span class="string">&quot;num is greater than 51 and less than 100&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> num &gt;= <span class="number">101</span>:</span><br><span class="line">        fmt.Println(<span class="string">&quot;num is greater than 100&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">num is greater than 51 and less than 100</span><br></pre></td></tr></table></figure>

<blockquote>
<p>switchçš„æ³¨æ„äº‹é¡¹</p>
<ol>
<li>caseåçš„å¸¸é‡å€¼ä¸èƒ½é‡å¤</li>
<li>caseåå¯ä»¥æœ‰å¤šä¸ªå¸¸é‡å€¼</li>
<li>fallthroughåº”è¯¥æ˜¯æŸä¸ªcaseçš„æœ€åä¸€è¡Œã€‚å¦‚æœå®ƒå‡ºç°åœ¨ä¸­é—´çš„æŸä¸ªåœ°æ–¹ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚</li>
</ol>
</blockquote>
<h3 id="Type-Switch"><a href="#Type-Switch" class="headerlink" title="Type Switch"></a>Type Switch</h3><p>switch è¯­å¥è¿˜å¯ä»¥è¢«ç”¨äº type-switch æ¥åˆ¤æ–­æŸä¸ª interface å˜é‡ä¸­å®é™…å­˜å‚¨çš„å˜é‡ç±»å‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> x.(<span class="keyword">type</span>)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">type</span>:</span><br><span class="line">       statement(s);      </span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">type</span>:</span><br><span class="line">       statement(s); </span><br><span class="line">    <span class="comment">/* ä½ å¯ä»¥å®šä¹‰ä»»æ„ä¸ªæ•°çš„case */</span></span><br><span class="line">    <span class="keyword">default</span>: <span class="comment">/* å¯é€‰ */</span></span><br><span class="line">       statement(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">     </span><br><span class="line">   <span class="keyword">switch</span> i := x.(<span class="keyword">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="literal">nil</span>:	  </span><br><span class="line">         fmt.Printf(<span class="string">&quot; x çš„ç±»å‹ :%T&quot;</span>,i)                </span><br><span class="line">      <span class="keyword">case</span> <span class="type">int</span>:	  </span><br><span class="line">         fmt.Printf(<span class="string">&quot;x æ˜¯ int å‹&quot;</span>)                       </span><br><span class="line">      <span class="keyword">case</span> <span class="type">float64</span>:</span><br><span class="line">         fmt.Printf(<span class="string">&quot;x æ˜¯ float64 å‹&quot;</span>)           </span><br><span class="line">      <span class="keyword">case</span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>)</span></span> <span class="type">float64</span>:</span><br><span class="line">         fmt.Printf(<span class="string">&quot;x æ˜¯ func(int) å‹&quot;</span>)                      </span><br><span class="line">      <span class="keyword">case</span> <span class="type">bool</span>, <span class="type">string</span>:</span><br><span class="line">         fmt.Printf(<span class="string">&quot;x æ˜¯ bool æˆ– string å‹&quot;</span> )       </span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">         fmt.Printf(<span class="string">&quot;æœªçŸ¥å‹&quot;</span>)     </span><br><span class="line">   &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">x çš„ç±»å‹ :&lt;<span class="literal">nil</span>&gt;</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå˜é‡<code>x</code>çš„ç±»å‹è¢«å£°æ˜ä¸º<code>interface&#123;&#125;</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªç©ºæ¥å£ã€‚ç©ºæ¥å£å¯ä»¥è¡¨ç¤ºä»»æ„ç±»å‹çš„å€¼ï¼ŒåŒ…æ‹¬<code>nil</code>ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ç±»å‹æ–­è¨€<code>x.(type)</code>æ¥è·å–<code>x</code>çš„å…·ä½“ç±»å‹æ—¶ï¼Œå¦‚æœ<code>x</code>çš„å€¼æ˜¯<code>nil</code>ï¼Œé‚£ä¹ˆ<code>case nil</code>åˆ†æ”¯ä¼šåŒ¹é…æˆåŠŸã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>nil</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œè¡¨ç¤ºä¸€ä¸ªæŒ‡é’ˆç±»å‹æˆ–æ¥å£ç±»å‹çš„é›¶å€¼ï¼Œè¡¨ç¤ºè¯¥æŒ‡é’ˆæˆ–æ¥å£ä¸æŒ‡å‘ä»»ä½•å…·ä½“çš„å¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸ºä¸€ç§ç‰¹æ®Šçš„ç±»å‹ã€‚å› æ­¤ï¼Œ<code>case nil</code>åˆ†æ”¯è¢«ç”¨æ¥å¤„ç†<code>x</code>ä¸º<code>nil</code>çš„æƒ…å†µã€‚</p>
<h1 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h1><p>å¾ªç¯è¯­å¥è¡¨ç¤ºæ¡ä»¶æ»¡è¶³ï¼Œå¯ä»¥åå¤çš„æ‰§è¡ŒæŸæ®µä»£ç ã€‚</p>
<p>foræ˜¯å”¯ä¸€çš„å¾ªç¯è¯­å¥ã€‚(Goæ²¡æœ‰whileå¾ªç¯)</p>
<h2 id="forè¯­å¥"><a href="#forè¯­å¥" class="headerlink" title="forè¯­å¥"></a>forè¯­å¥</h2><p>è¯­æ³•ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for init; condition; post &#123; &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åˆå§‹åŒ–è¯­å¥åªæ‰§è¡Œä¸€æ¬¡ã€‚åœ¨åˆå§‹åŒ–å¾ªç¯ä¹‹åï¼Œå°†æ£€æŸ¥è¯¥æ¡ä»¶ã€‚å¦‚æœæ¡ä»¶è®¡ç®—ä¸ºtrueï¼Œé‚£ä¹ˆ{}ä¸­çš„å¾ªç¯ä½“å°†è¢«æ‰§è¡Œï¼Œç„¶åæ˜¯postè¯­å¥ã€‚postè¯­å¥å°†åœ¨å¾ªç¯çš„æ¯æ¬¡æˆåŠŸè¿­ä»£ä¹‹åæ‰§è¡Œã€‚åœ¨æ‰§è¡Œpostè¯­å¥ä¹‹åï¼Œè¯¥æ¡ä»¶å°†è¢«é‡æ–°æ£€æŸ¥ã€‚å¦‚æœå®ƒæ˜¯æ­£ç¡®çš„ï¼Œå¾ªç¯å°†ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™å¾ªç¯ç»ˆæ­¢ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot; %d&quot;</span>,i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨forå¾ªç¯ä¸­å£°æ˜çš„å˜é‡ä»…åœ¨å¾ªç¯èŒƒå›´å†…å¯ç”¨ã€‚å› æ­¤ï¼Œiä¸èƒ½åœ¨å¤–éƒ¨è®¿é—®å¾ªç¯ã€‚</p>
</blockquote>
<p><strong>æ‰€æœ‰çš„ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼Œå³åˆå§‹åŒ–ã€æ¡ä»¶å’Œpostéƒ½æ˜¯å¯é€‰çš„ã€‚</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> condition &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœä¸whileç›¸ä¼¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœä¸for(;;) ä¸€æ ·</p>
<p>for å¾ªç¯çš„ range æ ¼å¼å¯ä»¥å¯¹ sliceã€mapã€æ•°ç»„ã€å­—ç¬¦ä¸²ç­‰è¿›è¡Œè¿­ä»£å¾ªç¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for key, value := range oldMap &#123;</span><br><span class="line">    newMap[key] = value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> b <span class="type">int</span> = <span class="number">9</span></span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line"></span><br><span class="line">   numbers := [<span class="number">6</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>&#125; </span><br><span class="line"></span><br><span class="line">   <span class="comment">/* for å¾ªç¯ */</span></span><br><span class="line">   <span class="keyword">for</span> a := <span class="number">0</span>; a &lt; <span class="number">5</span>; a++ &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;a çš„å€¼ä¸º: %d\n&quot;</span>, a)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> a &lt; b &#123;</span><br><span class="line">      a++</span><br><span class="line">      fmt.Printf(<span class="string">&quot;a çš„å€¼ä¸º: %d\n&quot;</span>, a)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> i,x:= <span class="keyword">range</span> numbers &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;ç¬¬ %d ä½ x çš„å€¼ = %d\n&quot;</span>, i,x)</span><br><span class="line">   &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a çš„å€¼ä¸º: 0</span><br><span class="line">a çš„å€¼ä¸º: 1</span><br><span class="line">a çš„å€¼ä¸º: 2</span><br><span class="line">a çš„å€¼ä¸º: 3</span><br><span class="line">a çš„å€¼ä¸º: 4</span><br><span class="line">a çš„å€¼ä¸º: 1</span><br><span class="line">a çš„å€¼ä¸º: 2</span><br><span class="line">a çš„å€¼ä¸º: 3</span><br><span class="line">a çš„å€¼ä¸º: 4</span><br><span class="line">a çš„å€¼ä¸º: 5</span><br><span class="line">a çš„å€¼ä¸º: 6</span><br><span class="line">a çš„å€¼ä¸º: 7</span><br><span class="line">a çš„å€¼ä¸º: 8</span><br><span class="line">a çš„å€¼ä¸º: 9</span><br><span class="line">ç¬¬ 0 ä½ x çš„å€¼ = 1</span><br><span class="line">ç¬¬ 1 ä½ x çš„å€¼ = 2</span><br><span class="line">ç¬¬ 2 ä½ x çš„å€¼ = 3</span><br><span class="line">ç¬¬ 3 ä½ x çš„å€¼ = 5</span><br><span class="line">ç¬¬ 4 ä½ x çš„å€¼ = 0</span><br><span class="line">ç¬¬ 5 ä½ x çš„å€¼ = 0</span><br></pre></td></tr></table></figure>



<h3 id="å¤šå±‚forå¾ªç¯"><a href="#å¤šå±‚forå¾ªç¯" class="headerlink" title="å¤šå±‚forå¾ªç¯"></a>å¤šå±‚forå¾ªç¯</h3><p>forå¾ªç¯ä¸­åˆæœ‰å¾ªç¯åµŒå¥—ï¼Œå°±è¡¨ç¤ºå¤šå±‚å¾ªç¯äº†ã€‚</p>
<h2 id="è·³å‡ºå¾ªç¯çš„è¯­å¥"><a href="#è·³å‡ºå¾ªç¯çš„è¯­å¥" class="headerlink" title="è·³å‡ºå¾ªç¯çš„è¯­å¥"></a>è·³å‡ºå¾ªç¯çš„è¯­å¥</h2><h3 id="breakè¯­å¥"><a href="#breakè¯­å¥" class="headerlink" title="breakè¯­å¥"></a>breakè¯­å¥</h3><p>breakï¼šè·³å‡ºå¾ªç¯ä½“ã€‚breakè¯­å¥ç”¨äºåœ¨ç»“æŸå…¶æ­£å¸¸æ‰§è¡Œä¹‹å‰çªç„¶ç»ˆæ­¢forå¾ªç¯</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">5</span> &#123;</span><br><span class="line">            <span class="keyword">break</span> <span class="comment">//loop is terminated if i &gt; 5</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d &quot;</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;\nline after for loop&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 2 3 4 5 </span><br><span class="line">line after for loop</span><br></pre></td></tr></table></figure>

<h3 id="continueè¯­å¥"><a href="#continueè¯­å¥" class="headerlink" title="continueè¯­å¥"></a>continueè¯­å¥</h3><p>continueï¼šè·³å‡ºä¸€æ¬¡å¾ªç¯ã€‚continueè¯­å¥ç”¨äºè·³è¿‡forå¾ªç¯çš„å½“å‰è¿­ä»£ã€‚åœ¨continueè¯­å¥åé¢çš„forå¾ªç¯ä¸­çš„æ‰€æœ‰ä»£ç å°†ä¸ä¼šåœ¨å½“å‰è¿­ä»£ä¸­æ‰§è¡Œã€‚å¾ªç¯å°†ç»§ç»­åˆ°ä¸‹ä¸€ä¸ªè¿­ä»£ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d &quot;</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 3 5 7 9 </span><br></pre></td></tr></table></figure>

<h3 id="gotoè¯­å¥"><a href="#gotoè¯­å¥" class="headerlink" title="gotoè¯­å¥"></a>gotoè¯­å¥</h3><p>gotoï¼šå¯ä»¥æ— æ¡ä»¶åœ°è½¬ç§»åˆ°è¿‡ç¨‹ä¸­æŒ‡å®šçš„è¡Œã€‚</p>
<p>è¯­æ³•ç»“æ„ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">goto</span> label;</span><br><span class="line">..</span><br><span class="line">..</span><br><span class="line">label: statement;</span><br></pre></td></tr></table></figure>

<p>â€‹												<a href="https://smms.app/image/ZUna3jv2o9h5xgN" target="_blank"><img src="https://s2.loli.net/2023/06/02/ZUna3jv2o9h5xgN.jpg" ></a></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/* å®šä¹‰å±€éƒ¨å˜é‡ */</span></span><br><span class="line">	<span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/* å¾ªç¯ */</span></span><br><span class="line">LOOP:</span><br><span class="line">	<span class="keyword">for</span> a &lt; <span class="number">20</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> a == <span class="number">15</span> &#123;</span><br><span class="line">			<span class="comment">/* è·³è¿‡è¿­ä»£ */</span></span><br><span class="line">			a = a + <span class="number">1</span></span><br><span class="line">			<span class="keyword">goto</span> LOOP</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;açš„å€¼ä¸º : %d\n&quot;</span>, a)</span><br><span class="line">		a++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">açš„å€¼ä¸º : 10</span><br><span class="line">açš„å€¼ä¸º : 11</span><br><span class="line">açš„å€¼ä¸º : 12</span><br><span class="line">açš„å€¼ä¸º : 13</span><br><span class="line">açš„å€¼ä¸º : 14</span><br><span class="line">açš„å€¼ä¸º : 16</span><br><span class="line">açš„å€¼ä¸º : 17</span><br><span class="line">açš„å€¼ä¸º : 18</span><br><span class="line">açš„å€¼ä¸º : 19</span><br></pre></td></tr></table></figure>

<p>ç»Ÿä¸€é”™è¯¯å¤„ç†<br>å¤šå¤„é”™è¯¯å¤„ç†å­˜åœ¨ä»£ç é‡å¤æ—¶æ˜¯éå¸¸æ£˜æ‰‹çš„ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">	err := firstCheckError()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">goto</span> onExit</span><br><span class="line">    &#125;</span><br><span class="line">    err = secondCheckError()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">goto</span> onExit</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">onExit:</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    exitProcess()</span><br></pre></td></tr></table></figure>

<h2 id="ç”Ÿæˆéšæœºæ•°"><a href="#ç”Ÿæˆéšæœºæ•°" class="headerlink" title="ç”Ÿæˆéšæœºæ•°"></a>ç”Ÿæˆéšæœºæ•°</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	num1 := rand.Int()</span><br><span class="line">	fmt.Println(num1)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		num := rand.Intn(<span class="number">10</span>)</span><br><span class="line">		fmt.Println(num)</span><br><span class="line">	&#125;</span><br><span class="line">	rand.Seed(<span class="number">1000</span>)</span><br><span class="line">	num2 := rand.Intn(<span class="number">10</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;---&gt;&quot;</span>, num2)</span><br><span class="line"></span><br><span class="line">	t1 := time.Now()</span><br><span class="line">	fmt.Println(t1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, t1)</span><br><span class="line"></span><br><span class="line">	timeStamp1 := t1.Unix()</span><br><span class="line">	fmt.Println(timeStamp1)</span><br><span class="line"></span><br><span class="line">	timestamp2 := t1.UnixNano()</span><br><span class="line">	fmt.Println(timestamp2)</span><br><span class="line"></span><br><span class="line">	rand.Seed(time.Now().UnixNano())</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;---&gt;&quot;</span>, rand.Intn(<span class="number">100</span>))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	num3 := rand.Intn(<span class="number">46</span>) + <span class="number">3</span></span><br><span class="line">	fmt.Println(num3)</span><br><span class="line">	num4 := rand.Intn(<span class="number">62</span>) + <span class="number">15</span></span><br><span class="line">	fmt.Println(num4)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2359980755445512729</span><br><span class="line">6</span><br><span class="line">0</span><br><span class="line">9</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">---&gt; 5</span><br><span class="line">2023-06-02 12:00:50.6796224 +0800 CST m=+0.001542201</span><br><span class="line">time.Time</span><br><span class="line">1685678450</span><br><span class="line">1685678450679622400</span><br><span class="line">---&gt; 74</span><br><span class="line">---&gt; 79</span><br><span class="line">---&gt; 18</span><br><span class="line">---&gt; 21</span><br><span class="line">---&gt; 68</span><br><span class="line">---&gt; 41</span><br><span class="line">---&gt; 33</span><br><span class="line">---&gt; 31</span><br><span class="line">---&gt; 26</span><br><span class="line">---&gt; 37</span><br><span class="line">15</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<p>åœ¨éšæœºæ•°ç”Ÿæˆä¸­ï¼Œç§å­ï¼ˆseedï¼‰æ˜¯ç”¨äºåˆå§‹åŒ–éšæœºæ•°ç”Ÿæˆå™¨çš„å€¼ã€‚ç§å­å†³å®šäº†éšæœºæ•°åºåˆ—çš„èµ·å§‹ç‚¹ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œç›¸åŒç§å­ä¼šç”Ÿæˆç›¸åŒçš„éšæœºæ•°åºåˆ—ã€‚</p>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>rand.Seed()</code>æ–¹æ³•ç”¨äºè®¾ç½®éšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼åœ°è®¾ç½®ç§å­ï¼ŒGoè¯­è¨€çš„<code>math/rand</code>åŒ…é»˜è®¤ä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„ç§å­ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡ç¨‹åºè¿è¡Œæ—¶éƒ½ä¼šç”Ÿæˆç›¸åŒçš„éšæœºæ•°åºåˆ—ã€‚è¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ã€‚</p>
<p>é€šè¿‡è°ƒç”¨<code>rand.Seed()</code>æ–¹æ³•å¹¶ä¼ å…¥ä¸€ä¸ªä¸åŒçš„ç§å­å€¼ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜éšæœºæ•°ç”Ÿæˆå™¨çš„èµ·å§‹ç‚¹ï¼Œä»è€Œäº§ç”Ÿä¸åŒçš„éšæœºæ•°åºåˆ—ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å½“å‰æ—¶é—´çš„çº³ç§’çº§æ—¶é—´æˆ³ä½œä¸ºç§å­ï¼Œä»¥ç¡®ä¿æ¯æ¬¡è¿è¡Œç¨‹åºæ—¶éƒ½èƒ½ç”Ÿæˆä¸åŒçš„éšæœºæ•°åºåˆ—ã€‚</p>
<p>åœ¨ä»£ç ä¸­ï¼Œ<code>rand.Seed(1000)</code>å°†ç§å­è®¾ç½®ä¸ºå›ºå®šå€¼1000ï¼Œå› æ­¤åç»­ç”Ÿæˆçš„éšæœºæ•°åºåˆ—å°†å§‹ç»ˆç›¸åŒã€‚è€Œ<code>rand.Seed(time.Now().UnixNano())</code>ä½¿ç”¨å½“å‰æ—¶é—´çš„çº³ç§’çº§æ—¶é—´æˆ³ä½œä¸ºç§å­ï¼Œå¯ä»¥äº§ç”Ÿä¸åŒçš„éšæœºæ•°åºåˆ—ã€‚</p>
<p>ä½†æ˜¯<em><strong>è‡ªä»Go 1.2 0ä»¥æ¥,rand.Seedå°±å·²ç»è¢«å¼ƒç”¨äº†</strong></em>ï¼</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„&amp;åˆ‡ç‰‡&amp;é›†åˆ&amp;å­—ç¬¦ä¸²</title>
    <url>/2023/06/03/Go/7/</url>
    <content><![CDATA[<h1 id="æ•°ç»„-Array"><a href="#æ•°ç»„-Array" class="headerlink" title="æ•°ç»„(Array)"></a>æ•°ç»„(Array)</h1><h2 id="ä»€ä¹ˆæ˜¯æ•°ç»„"><a href="#ä»€ä¹ˆæ˜¯æ•°ç»„" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•°ç»„"></a>ä»€ä¹ˆæ˜¯æ•°ç»„</h2><p>Go è¯­è¨€æä¾›äº†æ•°ç»„ç±»å‹çš„æ•°æ®ç»“æ„ã€‚<br>æ•°ç»„æ˜¯å…·æœ‰ç›¸åŒå”¯ä¸€ç±»å‹çš„ä¸€ç»„å·²ç¼–å·ä¸”é•¿åº¦å›ºå®šçš„æ•°æ®é¡¹åºåˆ—ï¼Œè¿™ç§ç±»å‹å¯ä»¥æ˜¯ä»»æ„çš„åŸå§‹ç±»å‹ä¾‹å¦‚æ•´å½¢ã€å­—ç¬¦ä¸²æˆ–è€…è‡ªå®šä¹‰ç±»å‹ã€‚</p>
<p>æ•°ç»„å…ƒç´ å¯ä»¥é€šè¿‡ç´¢å¼•ï¼ˆä½ç½®ï¼‰æ¥è¯»å–ï¼ˆæˆ–è€…ä¿®æ”¹ï¼‰ï¼Œç´¢å¼•ä»0å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ç´¢å¼•ä¸º 0ï¼Œç¬¬äºŒä¸ªç´¢å¼•ä¸º 1ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ•°ç»„çš„ä¸‹æ ‡å–å€¼èŒƒå›´æ˜¯ä»0å¼€å§‹ï¼Œåˆ°é•¿åº¦å‡1ã€‚</p>
<p>æ•°ç»„ä¸€æ—¦å®šä¹‰åï¼Œå¤§å°ä¸èƒ½æ›´æ”¹ã€‚</p>
<h2 id="æ•°ç»„çš„è¯­æ³•"><a href="#æ•°ç»„çš„è¯­æ³•" class="headerlink" title="æ•°ç»„çš„è¯­æ³•"></a>æ•°ç»„çš„è¯­æ³•</h2><p><strong>å£°æ˜å’Œåˆå§‹åŒ–æ•°ç»„</strong></p>
<p>éœ€è¦æŒ‡æ˜æ•°ç»„çš„å¤§å°å’Œå­˜å‚¨çš„æ•°æ®ç±»å‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> variable_name [SIZE] variable_type</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> balance [<span class="number">10</span>] <span class="type">float32</span></span><br><span class="line"><span class="keyword">var</span> balance = [<span class="number">5</span>]<span class="type">float32</span>&#123;<span class="number">1000.0</span>, <span class="number">2.0</span>, <span class="number">3.4</span>, <span class="number">7.0</span>, <span class="number">50.0</span>&#125;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–æ•°ç»„ä¸­ {} ä¸­çš„å…ƒç´ ä¸ªæ•°ä¸èƒ½å¤§äº [] ä¸­çš„æ•°å­—ã€‚<br>å¦‚æœå¿½ç•¥ [] ä¸­çš„æ•°å­—ä¸è®¾ç½®æ•°ç»„å¤§å°ï¼ŒGo è¯­è¨€ä¼šæ ¹æ®å…ƒç´ çš„ä¸ªæ•°æ¥è®¾ç½®æ•°ç»„çš„å¤§å°ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> balance = []<span class="type">float32</span>&#123;<span class="number">1000.0</span>, <span class="number">2.0</span>, <span class="number">3.4</span>, <span class="number">7.0</span>, <span class="number">50.0</span>&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">balance[<span class="number">4</span>] = <span class="number">50.0</span></span><br></pre></td></tr></table></figure>

<p>æ•°ç»„çš„å…¶ä»–åˆ›å»ºæ–¹å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="number">4</span>] <span class="type">float32</span> <span class="comment">// ç­‰ä»·äºï¼švar arr2 = [4]float32&#123;&#125;</span></span><br><span class="line">fmt.Println(a) <span class="comment">// [0 0 0 0]</span></span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">5</span>] <span class="type">string</span>&#123;<span class="string">&quot;ruby&quot;</span>, <span class="string">&quot;ç‹äºŒç‹—&quot;</span>, <span class="string">&quot;rose&quot;</span>&#125;</span><br><span class="line">fmt.Println(b) <span class="comment">// [ruby ç‹äºŒç‹— rose  ]</span></span><br><span class="line"><span class="keyword">var</span> c = [<span class="number">5</span>] <span class="type">int</span>&#123;<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>&#125; <span class="comment">// byte</span></span><br><span class="line">fmt.Println(c) <span class="comment">// [65 66 67 68 69]</span></span><br><span class="line">d := [...] <span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;<span class="comment">// æ ¹æ®å…ƒç´ çš„ä¸ªæ•°ï¼Œè®¾ç½®æ•°ç»„çš„å¤§å°</span></span><br><span class="line">fmt.Println(d)<span class="comment">//[1 2 3 4 5]</span></span><br><span class="line">e := [<span class="number">5</span>] <span class="type">int</span>&#123;<span class="number">4</span>: <span class="number">100</span>&#125; <span class="comment">// [0 0 0 0 100]</span></span><br><span class="line">fmt.Println(e)</span><br><span class="line">f := [...] <span class="type">int</span>&#123;<span class="number">0</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">1</span>&#125; <span class="comment">// [1 0 0 0 1 0 0 0 0 1]</span></span><br><span class="line">fmt.Println(f)</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<p><code>0: 1</code> è¡¨ç¤ºå°†ç´¢å¼•ä¸º 0 çš„ä½ç½®çš„å…ƒç´ åˆå§‹åŒ–ä¸º 1ï¼Œ<code>4: 1</code> è¡¨ç¤ºå°†ç´¢å¼•ä¸º 4 çš„ä½ç½®çš„å…ƒç´ åˆå§‹åŒ–ä¸º 1ï¼Œ<code>9: 1</code> è¡¨ç¤ºå°†ç´¢å¼•ä¸º 9 çš„ä½ç½®çš„å…ƒç´ åˆå§‹åŒ–ä¸º 1ã€‚å…¶ä½™ä½ç½®çš„å…ƒç´ å°†ä½¿ç”¨é»˜è®¤å€¼è¿›è¡Œåˆå§‹åŒ–ï¼Œå¯¹äºæ•´æ•°æ•°ç»„ï¼Œé»˜è®¤å€¼ä¸º 0ã€‚</p>
<p><strong>è®¿é—®æ•°ç»„å…ƒç´ </strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="type">float32</span> salary = balance[<span class="number">9</span>]</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> n [<span class="number">10</span>]<span class="type">int</span> <span class="comment">/* n æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 10 çš„æ•°ç»„ */</span></span><br><span class="line">   <span class="keyword">var</span> i,j <span class="type">int</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* ä¸ºæ•°ç»„ n åˆå§‹åŒ–å…ƒç´  */</span>         </span><br><span class="line">   <span class="keyword">for</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">      n[i] = i + <span class="number">100</span> <span class="comment">/* è®¾ç½®å…ƒç´ ä¸º i + 100 */</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* è¾“å‡ºæ¯ä¸ªæ•°ç»„å…ƒç´ çš„å€¼ */</span></span><br><span class="line">   <span class="keyword">for</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;Element[%d] = %d\n&quot;</span>, j, n[j] )</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Element[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">Element[<span class="number">1</span>] = <span class="number">101</span></span><br><span class="line">Element[<span class="number">2</span>] = <span class="number">102</span></span><br><span class="line">Element[<span class="number">3</span>] = <span class="number">103</span></span><br><span class="line">Element[<span class="number">4</span>] = <span class="number">104</span></span><br><span class="line">Element[<span class="number">5</span>] = <span class="number">105</span></span><br><span class="line">Element[<span class="number">6</span>] = <span class="number">106</span></span><br><span class="line">Element[<span class="number">7</span>] = <span class="number">107</span></span><br><span class="line">Element[<span class="number">8</span>] = <span class="number">108</span></span><br><span class="line">Element[<span class="number">9</span>] = <span class="number">109</span></span><br></pre></td></tr></table></figure>

<p><strong>æ•°ç»„çš„é•¿åº¦</strong></p>
<p>é€šè¿‡å°†æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ç»™lenå‡½æ•°ï¼Œå¯ä»¥è·å¾—æ•°ç»„çš„é•¿åº¦ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [...]<span class="type">float64</span>&#123;<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>&#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;length of a is&quot;</span>,<span class="built_in">len</span>(a))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">length of a is 4</span><br></pre></td></tr></table></figure>

<p>æ‚¨ç”šè‡³å¯ä»¥å¿½ç•¥å£°æ˜ä¸­æ•°ç»„çš„é•¿åº¦å¹¶å°†å…¶æ›¿æ¢ä¸ºâ€¦è®©ç¼–è¯‘å™¨ä¸ºä½ æ‰¾åˆ°é•¿åº¦ã€‚è¿™æ˜¯åœ¨ä¸‹é¢çš„ç¨‹åºä¸­å®Œæˆçš„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [...]<span class="type">int</span>&#123;<span class="number">12</span>, <span class="number">78</span>, <span class="number">50</span>&#125; <span class="comment">// ... makes the compiler determine the length</span></span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[12 78 50]</span><br></pre></td></tr></table></figure>

<p>éå†æ•°ç»„ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [...]<span class="type">float64</span>&#123;<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>&#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123; <span class="comment">//looping from 0 to the length of the array</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d th element of a is %.2f\n&quot;</span>, i, a[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0 th element of a is 67.70</span><br><span class="line">1 th element of a is 89.80</span><br><span class="line">2 th element of a is 21.00</span><br><span class="line">3 th element of a is 78.00</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨rangeéå†æ•°ç»„ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [...]<span class="type">float64</span>&#123;<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>&#125;</span><br><span class="line">    sum := <span class="type">float64</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> i, v := <span class="keyword">range</span> a &#123;<span class="comment">//range returns both the index and value</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d the element of a is %.2f\n&quot;</span>, i, v)</span><br><span class="line">        sum += v</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;\nsum of all elements of a&quot;</span>,sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0 the element of a is 67.70</span><br><span class="line">1 the element of a is 89.80</span><br><span class="line">2 the element of a is 21.00</span><br><span class="line">3 the element of a is 78.00</span><br><span class="line"></span><br><span class="line">sum of all elements of a 256.5</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ‚¨åªéœ€è¦å€¼å¹¶å¸Œæœ›å¿½ç•¥ç´¢å¼•ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä½¿ç”¨_ blankæ ‡è¯†ç¬¦æ›¿æ¢ç´¢å¼•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> a &#123; <span class="comment">//ignores index  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¤šç»´æ•°ç»„"><a href="#å¤šç»´æ•°ç»„" class="headerlink" title="å¤šç»´æ•°ç»„"></a>å¤šç»´æ•°ç»„</h2><p>Go è¯­è¨€æ”¯æŒå¤šç»´æ•°ç»„ï¼Œä»¥ä¸‹ä¸ºå¸¸ç”¨çš„å¤šç»´æ•°ç»„å£°æ˜è¯­æ³•æ–¹å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> variable_name [SIZE1][SIZE2]...[SIZEN] variable_type</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> threedim [<span class="number">5</span>][<span class="number">10</span>][<span class="number">4</span>]<span class="type">int</span></span><br></pre></td></tr></table></figure>

<p>ä¸‰ç»´æ•°ç»„</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">3</span>][<span class="number">4</span>]<span class="type">int</span>&#123;  </span><br><span class="line"> &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125; ,   <span class="comment">/*  ç¬¬ä¸€è¡Œç´¢å¼•ä¸º 0 */</span></span><br><span class="line"> &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125; ,   <span class="comment">/*  ç¬¬äºŒè¡Œç´¢å¼•ä¸º 1 */</span></span><br><span class="line"> &#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>&#125;   <span class="comment">/*  ç¬¬ä¸‰è¡Œç´¢å¼•ä¸º 2 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> twoD [<span class="number">2</span>][<span class="number">3</span>]<span class="type">int</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">3</span>; j++ &#123;</span><br><span class="line">			twoD[i][j] = i + j</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;2d: &quot;</span>, twoD)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2d:  [[0 1 2] [1 2 3]]</span><br></pre></td></tr></table></figure>

<h2 id="æ•°ç»„æ˜¯å€¼ç±»å‹"><a href="#æ•°ç»„æ˜¯å€¼ç±»å‹" class="headerlink" title="æ•°ç»„æ˜¯å€¼ç±»å‹"></a>æ•°ç»„æ˜¯å€¼ç±»å‹</h2><p>Goä¸­çš„æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œè€Œä¸æ˜¯å¼•ç”¨ç±»å‹ã€‚è¿™æ„å‘³ç€å½“å®ƒä»¬è¢«åˆ†é…ç»™ä¸€ä¸ªæ–°å˜é‡æ—¶ï¼Œå°†æŠŠåŸå§‹æ•°ç»„çš„å‰¯æœ¬åˆ†é…ç»™æ–°å˜é‡ã€‚å¦‚æœå¯¹æ–°å˜é‡è¿›è¡Œäº†æ›´æ”¹ï¼Œåˆ™ä¸ä¼šåœ¨åŸå§‹æ•°ç»„ä¸­åæ˜ ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [...]<span class="type">string</span>&#123;<span class="string">&quot;USA&quot;</span>, <span class="string">&quot;China&quot;</span>, <span class="string">&quot;India&quot;</span>, <span class="string">&quot;Germany&quot;</span>, <span class="string">&quot;France&quot;</span>&#125;</span><br><span class="line">    b := a <span class="comment">// a copy of a is assigned to b</span></span><br><span class="line">    b[<span class="number">0</span>] = <span class="string">&quot;Singapore&quot;</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;a is &quot;</span>, a)</span><br><span class="line">    fmt.Println(<span class="string">&quot;b is &quot;</span>, b) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a is [USA China India Germany France]  </span><br><span class="line">b is [Singapore China India Germany France] </span><br></pre></td></tr></table></figure>

<p>æ•°ç»„çš„å¤§å°æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤[5]intå’Œ[25]intæ˜¯ä¸åŒçš„ç±»å‹ã€‚å› æ­¤ï¼Œæ•°ç»„ä¸èƒ½è¢«è°ƒæ•´å¤§å°ã€‚ä¸è¦æ‹…å¿ƒè¿™ä¸ªé™åˆ¶ï¼Œå› ä¸ºåˆ‡ç‰‡çš„å­˜åœ¨æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">5</span>, <span class="number">78</span>, <span class="number">8</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> b [<span class="number">5</span>]<span class="type">int</span></span><br><span class="line">    b = a <span class="comment">//not possible since [3]int and [5]int are distinct types</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="åˆ‡ç‰‡-Slice"><a href="#åˆ‡ç‰‡-Slice" class="headerlink" title="åˆ‡ç‰‡(Slice)"></a>åˆ‡ç‰‡(Slice)</h1><h2 id="ä»€ä¹ˆæ˜¯åˆ‡ç‰‡"><a href="#ä»€ä¹ˆæ˜¯åˆ‡ç‰‡" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ‡ç‰‡"></a>ä»€ä¹ˆæ˜¯åˆ‡ç‰‡</h2><p><em><strong>Go è¯­è¨€åˆ‡ç‰‡æ˜¯å¯¹æ•°ç»„çš„æŠ½è±¡</strong></em>ã€‚<br>Go æ•°ç»„çš„é•¿åº¦ä¸å¯æ”¹å˜ï¼Œåœ¨ç‰¹å®šåœºæ™¯ä¸­è¿™æ ·çš„é›†åˆå°±ä¸å¤ªé€‚ç”¨ï¼ŒGoä¸­æä¾›äº†ä¸€ç§çµæ´»ï¼ŒåŠŸèƒ½å¼ºæ‚çš„å†…ç½®ç±»å‹åˆ‡ç‰‡(â€œåŠ¨æ€æ•°ç»„â€),ä¸æ•°ç»„ç›¸æ¯”åˆ‡ç‰‡çš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œå¯ä»¥è¿½åŠ å…ƒç´ ï¼Œåœ¨è¿½åŠ æ—¶å¯èƒ½ä½¿åˆ‡ç‰‡çš„å®¹é‡å¢å¤§<br>åˆ‡ç‰‡æ˜¯ä¸€ç§æ–¹ä¾¿ã€çµæ´»ä¸”å¼ºå¤§çš„åŒ…è£…å™¨ã€‚åˆ‡ç‰‡æœ¬èº«æ²¡æœ‰ä»»ä½•æ•°æ®ã€‚å®ƒä»¬åªæ˜¯å¯¹ç°æœ‰æ•°ç»„çš„å¼•ç”¨ã€‚<br>åˆ‡ç‰‡ä¸æ•°ç»„ç›¸æ¯”ï¼Œä¸éœ€è¦è®¾å®šé•¿åº¦ï¼Œåœ¨[]ä¸­ä¸ç”¨è®¾å®šå€¼ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒè‡ªç”±<br>ä»æ¦‚å¿µä¸Šé¢æ¥è¯´sliceåƒä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“åŒ…å«äº†ä¸‰ä¸ªå…ƒç´ ï¼š </p>
<blockquote>
<ol>
<li>æŒ‡é’ˆï¼ŒæŒ‡å‘æ•°ç»„ä¸­sliceæŒ‡å®šçš„å¼€å§‹ä½ç½®</li>
<li>é•¿åº¦ï¼Œå³sliceçš„é•¿åº¦</li>
<li>æœ€å¤§é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯sliceå¼€å§‹ä½ç½®åˆ°æ•°ç»„çš„æœ€åä½ç½®çš„é•¿åº¦</li>
</ol>
</blockquote>
<h2 id="åˆ‡ç‰‡çš„è¯­æ³•"><a href="#åˆ‡ç‰‡çš„è¯­æ³•" class="headerlink" title="åˆ‡ç‰‡çš„è¯­æ³•"></a>åˆ‡ç‰‡çš„è¯­æ³•</h2><p><strong>å®šä¹‰åˆ‡ç‰‡</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> identifier []<span class="keyword">type</span></span><br></pre></td></tr></table></figure>

<p>åˆ‡ç‰‡ä¸éœ€è¦è¯´æ˜é•¿åº¦ã€‚<br>æˆ–ä½¿ç”¨make()å‡½æ•°æ¥åˆ›å»ºåˆ‡ç‰‡:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> slice1 []<span class="keyword">type</span> = <span class="built_in">make</span>([]<span class="keyword">type</span>, <span class="built_in">len</span>)</span><br><span class="line"><span class="comment">//ä¹Ÿå¯ä»¥ç®€å†™ä¸º</span></span><br><span class="line">slice1 := <span class="built_in">make</span>([]<span class="keyword">type</span>, <span class="built_in">len</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="built_in">make</span>([]T, length, capacity)</span><br></pre></td></tr></table></figure>

<p><strong>åˆå§‹åŒ–</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">s[<span class="number">1</span>] = <span class="number">2</span></span><br><span class="line">s[<span class="number">2</span>] = <span class="number">3</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s :=[] <span class="type">int</span> &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span> &#125; </span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s := arr[startIndex:endIndex] </span><br></pre></td></tr></table></figure>

<p>å°†arrä¸­ä»ä¸‹æ ‡startIndexåˆ°endIndex-1 ä¸‹çš„å…ƒç´ åˆ›å»ºä¸ºä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ï¼ˆ<strong>å‰é—­åå¼€</strong>ï¼‰ï¼Œé•¿åº¦ä¸ºendIndex-startIndex</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s := arr[startIndex:] </span><br></pre></td></tr></table></figure>

<p>ç¼ºçœendIndexæ—¶å°†è¡¨ç¤ºä¸€ç›´åˆ°arrçš„æœ€åä¸€ä¸ªå…ƒç´ </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s := arr[:endIndex] </span><br></pre></td></tr></table></figure>

<p>ç¼ºçœstartIndexæ—¶å°†è¡¨ç¤ºä»arrçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [<span class="number">5</span>]<span class="type">int</span>&#123;<span class="number">76</span>, <span class="number">77</span>, <span class="number">78</span>, <span class="number">79</span>, <span class="number">80</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> b []<span class="type">int</span> = a[<span class="number">1</span>:<span class="number">4</span>] <span class="comment">//creates a slice from a[1] to a[3]</span></span><br><span class="line">    fmt.Println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¿®æ”¹åˆ‡ç‰‡"><a href="#ä¿®æ”¹åˆ‡ç‰‡" class="headerlink" title="ä¿®æ”¹åˆ‡ç‰‡"></a>ä¿®æ”¹åˆ‡ç‰‡</h2><p>sliceæ²¡æœ‰è‡ªå·±çš„ä»»ä½•æ•°æ®ã€‚å®ƒåªæ˜¯åº•å±‚æ•°ç»„çš„ä¸€ä¸ªè¡¨ç¤ºã€‚å¯¹sliceæ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½å°†åæ˜ åœ¨åº•å±‚æ•°ç»„ä¸­ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    darr := [...]<span class="type">int</span>&#123;<span class="number">57</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">82</span>, <span class="number">100</span>, <span class="number">78</span>, <span class="number">67</span>, <span class="number">69</span>, <span class="number">59</span>&#125;</span><br><span class="line">    dslice := darr[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line">    fmt.Println(<span class="string">&quot;array before&quot;</span>,darr)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> dslice &#123;</span><br><span class="line">        dslice[i]++</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;array after&quot;</span>,darr) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>range</code> éå† <code>dslice</code> æ—¶è¿”å›çš„æ˜¯ç´¢å¼•ï¼Œè€Œä¸æ˜¯å€¼ã€‚åˆ‡ç‰‡æ˜¯å¯¹æ•°ç»„çš„å¼•ç”¨ï¼Œå› æ­¤<em><strong>ä¿®æ”¹åˆ‡ç‰‡çš„å€¼ä¹Ÿä¼šå½±å“åˆ°åŸå§‹æ•°ç»„</strong></em>ã€‚</p>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">array before [57 89 90 82 100 78 67 69 59]  </span><br><span class="line">array after [57 89 91 83 101 78 67 69 59]  </span><br></pre></td></tr></table></figure>

<p>å½“å¤šä¸ªç‰‡å…±äº«ç›¸åŒçš„åº•å±‚æ•°ç»„æ—¶ï¼Œæ¯ä¸ªå…ƒç´ æ‰€åšçš„æ›´æ”¹å°†åœ¨æ•°ç»„ä¸­åæ˜ å‡ºæ¥ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    numa := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">78</span>, <span class="number">79</span> ,<span class="number">80</span>&#125;</span><br><span class="line">    nums1 := numa[:] <span class="comment">//creates a slice which contains all elements of the array</span></span><br><span class="line">    nums2 := numa[:]</span><br><span class="line">    fmt.Println(<span class="string">&quot;array before change 1&quot;</span>,numa)</span><br><span class="line">    nums1[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;array after modification to slice nums1&quot;</span>, numa)</span><br><span class="line">    nums2[<span class="number">1</span>] = <span class="number">101</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;array after modification to slice nums2&quot;</span>, numa)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">array before change 1 [78 79 80]  </span><br><span class="line">array after modification to slice nums1 [100 79 80]  </span><br><span class="line">array after modification to slice nums2 [100 101 80]  </span><br></pre></td></tr></table></figure>

<h2 id="len-å’Œ-cap"><a href="#len-å’Œ-cap" class="headerlink" title="len() å’Œ cap()"></a>len() å’Œ cap()</h2><p>åˆ‡ç‰‡çš„é•¿åº¦æ˜¯åˆ‡ç‰‡ä¸­å…ƒç´ çš„æ•°é‡ã€‚åˆ‡ç‰‡çš„å®¹é‡æ˜¯ä»åˆ›å»ºåˆ‡ç‰‡çš„ç´¢å¼•å¼€å§‹çš„åº•å±‚æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ã€‚</p>
<p>åˆ‡ç‰‡æ˜¯å¯ç´¢å¼•çš„ï¼Œå¹¶ä¸”å¯ä»¥ç”± len() æ–¹æ³•è·å–é•¿åº¦<br>åˆ‡ç‰‡æä¾›äº†è®¡ç®—å®¹é‡çš„æ–¹æ³• cap() å¯ä»¥æµ‹é‡åˆ‡ç‰‡æœ€é•¿å¯ä»¥è¾¾åˆ°å¤šå°‘</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> numbers = <span class="built_in">make</span>([]<span class="type">int</span>,<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">   printSlice(numbers)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(x []<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;len=%d cap=%d slice=%v\n&quot;</span>,<span class="built_in">len</span>(x),<span class="built_in">cap</span>(x),x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>make([]int, 3, 5)</code> åˆ›å»ºäº†ä¸€ä¸ªåˆ‡ç‰‡ <code>numbers</code>ï¼Œé•¿åº¦ä¸º 3ï¼Œå®¹é‡ä¸º 5ã€‚<code>make</code> å‡½æ•°ç”¨äºåˆ›å»ºåˆ‡ç‰‡ã€æ˜ å°„å’Œé€šé“ï¼Œå¹¶æŒ‡å®šå®ƒä»¬çš„é•¿åº¦å’Œå®¹é‡ã€‚</p>
<p>è¿è¡Œç»“æœ:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="built_in">len</span>=<span class="number">3</span> <span class="built_in">cap</span>=<span class="number">5</span> slice=[<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç©ºåˆ‡ç‰‡</strong></p>
<p>ä¸€ä¸ªåˆ‡ç‰‡åœ¨æœªåˆå§‹åŒ–ä¹‹å‰é»˜è®¤ä¸º nilï¼Œé•¿åº¦ä¸º 0</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> numbers []<span class="type">int</span></span><br><span class="line"></span><br><span class="line">   printSlice(numbers)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span>(numbers == <span class="literal">nil</span>)&#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;åˆ‡ç‰‡æ˜¯ç©ºçš„&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(x []<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;len=%d cap=%d slice=%v\n&quot;</span>,<span class="built_in">len</span>(x),<span class="built_in">cap</span>(x),x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">len=0 cap=0 slice=[]</span><br><span class="line">åˆ‡ç‰‡æ˜¯ç©ºçš„</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">/* åˆ›å»ºåˆ‡ç‰‡ */</span></span><br><span class="line">   numbers := []<span class="type">int</span>&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;   </span><br><span class="line">   printSlice(numbers)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å°åŸå§‹åˆ‡ç‰‡ */</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;numbers ==&quot;</span>, numbers)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å°å­åˆ‡ç‰‡ä»ç´¢å¼•1(åŒ…å«) åˆ°ç´¢å¼•4(ä¸åŒ…å«)*/</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;numbers[1:4] ==&quot;</span>, numbers[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* é»˜è®¤ä¸‹é™ä¸º 0*/</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;numbers[:3] ==&quot;</span>, numbers[:<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* é»˜è®¤ä¸Šé™ä¸º len(s)*/</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;numbers[4:] ==&quot;</span>, numbers[<span class="number">4</span>:])</span><br><span class="line"></span><br><span class="line">   numbers1 := <span class="built_in">make</span>([]<span class="type">int</span>,<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line">   printSlice(numbers1)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å°å­åˆ‡ç‰‡ä»ç´¢å¼•  0(åŒ…å«) åˆ°ç´¢å¼• 2(ä¸åŒ…å«) */</span></span><br><span class="line">   number2 := numbers[:<span class="number">2</span>]</span><br><span class="line">   printSlice(number2)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å°å­åˆ‡ç‰‡ä»ç´¢å¼• 2(åŒ…å«) åˆ°ç´¢å¼• 5(ä¸åŒ…å«) */</span></span><br><span class="line">   number3 := numbers[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line">   printSlice(number3)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(x []<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;len=%d cap=%d slice=%v\n&quot;</span>,<span class="built_in">len</span>(x),<span class="built_in">cap</span>(x),x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="built_in">len</span>=<span class="number">9</span> <span class="built_in">cap</span>=<span class="number">9</span> slice=[<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>]</span><br><span class="line">numbers == [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>]</span><br><span class="line">numbers[<span class="number">1</span>:<span class="number">4</span>] == [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line">numbers[:<span class="number">3</span>] == [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span>]</span><br><span class="line">numbers[<span class="number">4</span>:] == [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>]</span><br><span class="line"><span class="built_in">len</span>=<span class="number">0</span> <span class="built_in">cap</span>=<span class="number">5</span> slice=[]</span><br><span class="line"><span class="built_in">len</span>=<span class="number">2</span> <span class="built_in">cap</span>=<span class="number">9</span> slice=[<span class="number">0</span> <span class="number">1</span>]</span><br><span class="line"><span class="built_in">len</span>=<span class="number">3</span> <span class="built_in">cap</span>=<span class="number">7</span> slice=[<span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<p>åˆ‡ç‰‡çš„å®¹é‡ï¼ˆ<code>cap</code>ï¼‰æ˜¯æŒ‡åˆ‡ç‰‡çš„åº•å±‚æ•°ç»„ä¸­ä»åˆ‡ç‰‡çš„èµ·å§‹ä½ç½®åˆ°æ•°ç»„æœ«å°¾çš„å…ƒç´ æ•°é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆ‡ç‰‡ <code>numbers</code> çš„å®¹é‡ä¸åº•å±‚æ•°ç»„çš„å®¹é‡ç›¸åŒï¼Œéƒ½æ˜¯ 9ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šåˆ‡ç‰‡çš„å®¹é‡ï¼ŒGoè¯­è¨€ä¼šé»˜è®¤å°†åˆ‡ç‰‡çš„å®¹é‡è®¾ç½®ä¸ºåº•å±‚æ•°ç»„ä¸­å‰©ä½™çš„å…ƒç´ æ•°é‡ã€‚<code>number2</code> çš„å®¹é‡æ˜¯ä»åˆ‡ç‰‡çš„èµ·å§‹ä½ç½®åˆ°åº•å±‚æ•°ç»„çš„æœ«å°¾ï¼Œå³å‰©ä½™çš„å…ƒç´ æ•°é‡ã€‚<code>number2</code> çš„å®¹é‡æ˜¯ 9ï¼Œä¸åº•å±‚æ•°ç»„çš„å®¹é‡ç›¸åŒã€‚<code>number3</code> çš„å®¹é‡æ˜¯ 7ï¼Œå› ä¸ºä»ç´¢å¼• 2 å¼€å§‹ï¼Œåº•å±‚æ•°ç»„ä¸­è¿˜æœ‰ 7 ä¸ªå…ƒç´ ã€‚</p>
<h2 id="append-å’Œ-copy"><a href="#append-å’Œ-copy" class="headerlink" title="append() å’Œ copy()"></a>append() å’Œ copy()</h2><p>append å‘sliceé‡Œé¢è¿½åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ ï¼Œç„¶åè¿”å›ä¸€ä¸ªå’Œsliceä¸€æ ·ç±»å‹çš„slice<br>copy å‡½æ•°copyä»æºsliceçš„srcä¸­å¤åˆ¶å…ƒç´ åˆ°ç›®æ ‡dstï¼Œå¹¶ä¸”è¿”å›å¤åˆ¶çš„å…ƒç´ çš„ä¸ªæ•°</p>
<p>appendå‡½æ•°ä¼šæ”¹å˜sliceæ‰€å¼•ç”¨çš„æ•°ç»„çš„å†…å®¹ï¼Œä»è€Œå½±å“åˆ°å¼•ç”¨åŒä¸€æ•°ç»„çš„å…¶å®ƒsliceã€‚ ä½†å½“sliceä¸­æ²¡æœ‰å‰©ä½™ç©ºé—´ï¼ˆå³(cap-len) &#x3D;&#x3D; 0ï¼‰æ—¶ï¼Œæ­¤æ—¶å°†åŠ¨æ€åˆ†é…æ–°çš„æ•°ç»„ç©ºé—´ã€‚è¿”å›çš„sliceæ•°ç»„æŒ‡é’ˆå°†æŒ‡å‘è¿™ä¸ªç©ºé—´ï¼Œè€ŒåŸæ•°ç»„çš„å†…å®¹å°†ä¿æŒä¸å˜ï¼›å…¶å®ƒå¼•ç”¨æ­¤æ•°ç»„çš„sliceåˆ™ä¸å—å½±å“</p>
<p>ä¸‹é¢çš„ä»£ç æè¿°äº†ä»æ‹·è´åˆ‡ç‰‡çš„ copy æ–¹æ³•å’Œå‘åˆ‡ç‰‡è¿½åŠ æ–°å…ƒç´ çš„ append æ–¹æ³•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> numbers []<span class="type">int</span></span><br><span class="line">   printSlice(numbers)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* å…è®¸è¿½åŠ ç©ºåˆ‡ç‰‡ */</span></span><br><span class="line">   numbers = <span class="built_in">append</span>(numbers, <span class="number">0</span>)</span><br><span class="line">   printSlice(numbers)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* å‘åˆ‡ç‰‡æ·»åŠ ä¸€ä¸ªå…ƒç´  */</span></span><br><span class="line">   numbers = <span class="built_in">append</span>(numbers, <span class="number">1</span>)</span><br><span class="line">   printSlice(numbers)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* åŒæ—¶æ·»åŠ å¤šä¸ªå…ƒç´  */</span></span><br><span class="line">   numbers = <span class="built_in">append</span>(numbers, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">   printSlice(numbers)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* åˆ›å»ºåˆ‡ç‰‡ numbers1 æ˜¯ä¹‹å‰åˆ‡ç‰‡çš„ä¸¤å€å®¹é‡*/</span></span><br><span class="line">   numbers1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="built_in">len</span>(numbers), (<span class="built_in">cap</span>(numbers))*<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‹·è´ numbers çš„å†…å®¹åˆ° numbers1 */</span></span><br><span class="line">   <span class="built_in">copy</span>(numbers1,numbers)</span><br><span class="line">   printSlice(numbers1)   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(x []<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;len=%d cap=%d slice=%v\n&quot;</span>,<span class="built_in">len</span>(x),<span class="built_in">cap</span>(x),x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">len=0 cap=0 slice=[]</span><br><span class="line">len=1 cap=1 slice=[0]</span><br><span class="line">len=2 cap=2 slice=[0 1]</span><br><span class="line">len=5 cap=6 slice=[0 1 2 3 4]</span><br><span class="line">len=5 cap=12 slice=[0 1 2 3 4]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>numberså®¹é‡ä¸º6æ˜¯å› ä¸ºåœ¨åˆ†é…åº•å±‚æ•°ç»„æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®ç­–ç•¥è¿›è¡Œå†…å­˜åˆ†é…ï¼Œé€šå¸¸æ˜¯åˆ†é…æ¯”æ‰€éœ€å®¹é‡ç¨å¾®å¤šä¸€ç‚¹çš„å®¹é‡ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåº•å±‚æ•°ç»„çš„å®¹é‡è¢«åˆ†é…ä¸ºäº†6ã€‚</p>
<p>numbers1ä¸numbersä¸¤è€…ä¸å­˜åœ¨è”ç³»ï¼Œnumberså‘ç”Ÿå˜åŒ–æ—¶ï¼Œnumbers1æ˜¯ä¸ä¼šéšç€å˜åŒ–çš„ã€‚ä¹Ÿå°±æ˜¯è¯´copyæ–¹æ³•æ˜¯ä¸ä¼šå»ºç«‹ä¸¤ä¸ªåˆ‡ç‰‡çš„è”ç³»çš„</p>
</blockquote>
<h1 id="é›†åˆ-Map"><a href="#é›†åˆ-Map" class="headerlink" title="é›†åˆ(Map)"></a>é›†åˆ(Map)</h1><h2 id="ä»€ä¹ˆæ˜¯Map"><a href="#ä»€ä¹ˆæ˜¯Map" class="headerlink" title="ä»€ä¹ˆæ˜¯Map"></a>ä»€ä¹ˆæ˜¯Map</h2><p>mapæ˜¯Goä¸­çš„å†…ç½®ç±»å‹ï¼Œå®ƒå°†ä¸€ä¸ªå€¼ä¸ä¸€ä¸ªé”®å…³è”èµ·æ¥ã€‚å¯ä»¥ä½¿ç”¨ç›¸åº”çš„é”®æ£€ç´¢å€¼ã€‚</p>
<p>Map æ˜¯ä¸€ç§æ— åºçš„é”®å€¼å¯¹çš„é›†åˆã€‚Map æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯é€šè¿‡ key æ¥å¿«é€Ÿæ£€ç´¢æ•°æ®ï¼Œkey ç±»ä¼¼äºç´¢å¼•ï¼ŒæŒ‡å‘æ•°æ®çš„å€¼<br>Map æ˜¯ä¸€ç§é›†åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åƒè¿­ä»£æ•°ç»„å’Œåˆ‡ç‰‡é‚£æ ·è¿­ä»£å®ƒã€‚ä¸è¿‡ï¼ŒMap æ˜¯æ— åºçš„ï¼Œæˆ‘ä»¬æ— æ³•å†³å®šå®ƒçš„è¿”å›é¡ºåºï¼Œè¿™æ˜¯å› ä¸º Map æ˜¯ä½¿ç”¨ hash è¡¨æ¥å®ç°çš„ï¼Œä¹Ÿæ˜¯å¼•ç”¨ç±»å‹</p>
<p>ä½¿ç”¨mapè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š </p>
<ul>
<li>mapæ˜¯æ— åºçš„ï¼Œæ¯æ¬¡æ‰“å°å‡ºæ¥çš„mapéƒ½ä¼šä¸ä¸€æ ·ï¼Œå®ƒä¸èƒ½é€šè¿‡indexè·å–ï¼Œè€Œå¿…é¡»é€šè¿‡keyè·å–</li>
<li>mapçš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œä¹Ÿå°±æ˜¯å’Œsliceä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§å¼•ç”¨ç±»å‹</li>
<li>å†…ç½®çš„lenå‡½æ•°åŒæ ·é€‚ç”¨äºmapï¼Œè¿”å›mapæ‹¥æœ‰çš„keyçš„æ•°é‡ </li>
<li>mapçš„keyå¯ä»¥æ˜¯æ‰€æœ‰å¯æ¯”è¾ƒçš„ç±»å‹ï¼Œå¦‚å¸ƒå°”å‹ã€æ•´æ•°å‹ã€æµ®ç‚¹å‹ã€å¤æ‚å‹ã€å­—ç¬¦ä¸²å‹â€¦â€¦ä¹Ÿå¯ä»¥é”®ã€‚</li>
</ul>
<h2 id="Mapçš„ä½¿ç”¨"><a href="#Mapçš„ä½¿ç”¨" class="headerlink" title="Mapçš„ä½¿ç”¨"></a>Mapçš„ä½¿ç”¨</h2><h3 id="ä½¿ç”¨make-åˆ›å»ºmap"><a href="#ä½¿ç”¨make-åˆ›å»ºmap" class="headerlink" title="ä½¿ç”¨make()åˆ›å»ºmap"></a>ä½¿ç”¨make()åˆ›å»ºmap</h3><p>å¯ä»¥ä½¿ç”¨å†…å»ºå‡½æ•° make ä¹Ÿå¯ä»¥ä½¿ç”¨ map å…³é”®å­—æ¥å®šä¹‰ Map:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å£°æ˜å˜é‡ï¼Œé»˜è®¤ map æ˜¯ nil */</span></span><br><span class="line"><span class="keyword">var</span> map_variable <span class="keyword">map</span>[key_data_type]value_data_type</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½¿ç”¨ make å‡½æ•° */</span></span><br><span class="line">map_variable = <span class="built_in">make</span>(<span class="keyword">map</span>[key_data_type]value_data_type)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">rating := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">float32</span> &#123;<span class="string">&quot;C&quot;</span>:<span class="number">5</span>, <span class="string">&quot;Go&quot;</span>:<span class="number">4.5</span>, <span class="string">&quot;Python&quot;</span>:<span class="number">4.5</span>, <span class="string">&quot;C++&quot;</span>:<span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸åˆå§‹åŒ– mapï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ª nil mapã€‚nil map ä¸èƒ½ç”¨æ¥å­˜æ”¾é”®å€¼å¯¹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> countryCapitalMap <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span></span><br><span class="line">   <span class="comment">/* åˆ›å»ºé›†åˆ */</span></span><br><span class="line">   countryCapitalMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)</span><br><span class="line">   </span><br><span class="line">   <span class="comment">/* map æ’å…¥ key-value å¯¹ï¼Œå„ä¸ªå›½å®¶å¯¹åº”çš„é¦–éƒ½ */</span></span><br><span class="line">   countryCapitalMap[<span class="string">&quot;France&quot;</span>] = <span class="string">&quot;Paris&quot;</span></span><br><span class="line">   countryCapitalMap[<span class="string">&quot;Italy&quot;</span>] = <span class="string">&quot;Rome&quot;</span></span><br><span class="line">   countryCapitalMap[<span class="string">&quot;Japan&quot;</span>] = <span class="string">&quot;Tokyo&quot;</span></span><br><span class="line">   countryCapitalMap[<span class="string">&quot;India&quot;</span>] = <span class="string">&quot;New Delhi&quot;</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">/* ä½¿ç”¨ key è¾“å‡º map å€¼ */</span></span><br><span class="line">   <span class="keyword">for</span> country := <span class="keyword">range</span> countryCapitalMap &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;Capital of&quot;</span>,country,<span class="string">&quot;is&quot;</span>,countryCapitalMap[country])</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">/* æŸ¥çœ‹å…ƒç´ åœ¨é›†åˆä¸­æ˜¯å¦å­˜åœ¨ */</span></span><br><span class="line">   captial, ok := countryCapitalMap[<span class="string">&quot;United States&quot;</span>]</span><br><span class="line">   <span class="comment">/* å¦‚æœ ok æ˜¯ true, åˆ™å­˜åœ¨ï¼Œå¦åˆ™ä¸å­˜åœ¨ */</span></span><br><span class="line">   <span class="keyword">if</span>(ok)&#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;Capital of United States is&quot;</span>, captial)  </span><br><span class="line">   &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;Capital of United States is not present&quot;</span>) </span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">    m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>, <span class="string">&quot;b&quot;</span>: <span class="string">&quot;B&quot;</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">		fmt.Println(k, v) <span class="comment">// b 8; a A</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> k := <span class="keyword">range</span> m &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;key&quot;</span>, k) <span class="comment">// key a; key b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Capital of France is Paris</span><br><span class="line">Capital of Italy is Rome</span><br><span class="line">Capital of Japan is Tokyo</span><br><span class="line">Capital of India is New Delhi</span><br><span class="line">Capital of United States is not present</span><br><span class="line">a A</span><br><span class="line">b B</span><br><span class="line">key a</span><br><span class="line">key b</span><br></pre></td></tr></table></figure>

<h3 id="delete-å‡½æ•°"><a href="#delete-å‡½æ•°" class="headerlink" title="delete() å‡½æ•°"></a>delete() å‡½æ•°</h3><p>delete(map, key) å‡½æ•°ç”¨äºåˆ é™¤é›†åˆçš„å…ƒç´ , å‚æ•°ä¸º map å’Œå…¶å¯¹åº”çš„ keyã€‚åˆ é™¤å‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;   </span><br><span class="line">   <span class="comment">/* åˆ›å»º map */</span></span><br><span class="line">   countryCapitalMap := <span class="keyword">map</span>[<span class="type">string</span>] <span class="type">string</span> &#123;<span class="string">&quot;France&quot;</span>:<span class="string">&quot;Paris&quot;</span>,<span class="string">&quot;Italy&quot;</span>:<span class="string">&quot;Rome&quot;</span>,<span class="string">&quot;Japan&quot;</span>:<span class="string">&quot;Tokyo&quot;</span>,<span class="string">&quot;India&quot;</span>:<span class="string">&quot;New Delhi&quot;</span>&#125;</span><br><span class="line">   </span><br><span class="line">   fmt.Println(<span class="string">&quot;åŸå§‹ map&quot;</span>)   </span><br><span class="line">   </span><br><span class="line">   <span class="comment">/* æ‰“å° map */</span></span><br><span class="line">   <span class="keyword">for</span> country := <span class="keyword">range</span> countryCapitalMap &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;Capital of&quot;</span>,country,<span class="string">&quot;is&quot;</span>,countryCapitalMap[country])</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">/* åˆ é™¤å…ƒç´  */</span></span><br><span class="line">   <span class="built_in">delete</span>(countryCapitalMap,<span class="string">&quot;France&quot;</span>);</span><br><span class="line">   fmt.Println(<span class="string">&quot;Entry for France is deleted&quot;</span>)  </span><br><span class="line">   </span><br><span class="line">   fmt.Println(<span class="string">&quot;åˆ é™¤å…ƒç´ å map&quot;</span>)   </span><br><span class="line">   </span><br><span class="line">   <span class="comment">/* æ‰“å° map */</span></span><br><span class="line">   <span class="keyword">for</span> country := <span class="keyword">range</span> countryCapitalMap &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;Capital of&quot;</span>,country,<span class="string">&quot;is&quot;</span>,countryCapitalMap[country])</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åŸå§‹ map</span><br><span class="line">Capital of France is Paris</span><br><span class="line">Capital of Italy is Rome</span><br><span class="line">Capital of Japan is Tokyo</span><br><span class="line">Capital of India is New Delhi</span><br><span class="line">Entry for France is deleted</span><br><span class="line">åˆ é™¤å…ƒç´ å map</span><br><span class="line">Capital of Italy is Rome</span><br><span class="line">Capital of Japan is Tokyo</span><br><span class="line">Capital of India is New Delhi</span><br></pre></td></tr></table></figure>

<h3 id="ok-idiom"><a href="#ok-idiom" class="headerlink" title="ok-idiom"></a>ok-idiom</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡keyè·å–mapä¸­å¯¹åº”çš„valueå€¼ã€‚è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">map</span>[key] </span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å½“keyå¦‚æœä¸å­˜åœ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¯¥valueå€¼ç±»å‹çš„é»˜è®¤å€¼ï¼Œæ¯”å¦‚stringç±»å‹å¾—åˆ°ç©ºå­—ç¬¦ä¸²ï¼Œintç±»å‹å¾—åˆ°0ã€‚ä½†æ˜¯ç¨‹åºä¸ä¼šæŠ¥é”™ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ok-idiomè·å–å€¼ï¼Œå¯çŸ¥é“key&#x2F;valueæ˜¯å¦å­˜åœ¨</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">value, ok := <span class="keyword">map</span>[key] </span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">	m[<span class="string">&quot;a&quot;</span>] = <span class="number">1</span></span><br><span class="line">	x, ok := m[<span class="string">&quot;b&quot;</span>]</span><br><span class="line">	fmt.Println(x, ok)</span><br><span class="line">	x, ok = m[<span class="string">&quot;a&quot;</span>]</span><br><span class="line">	fmt.Println(x, ok)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span> <span class="literal">false</span></span><br><span class="line"><span class="number">1</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="mapçš„é•¿åº¦"><a href="#mapçš„é•¿åº¦" class="headerlink" title="mapçš„é•¿åº¦"></a>mapçš„é•¿åº¦</h3><p>ä½¿ç”¨lenå‡½æ•°å¯ä»¥ç¡®å®šmapçš„é•¿åº¦ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="built_in">len</span>(<span class="keyword">map</span>)  <span class="comment">// å¯ä»¥å¾—åˆ°mapçš„é•¿åº¦</span></span><br></pre></td></tr></table></figure>

<h3 id="mapæ˜¯å¼•ç”¨ç±»å‹"><a href="#mapæ˜¯å¼•ç”¨ç±»å‹" class="headerlink" title="mapæ˜¯å¼•ç”¨ç±»å‹"></a>mapæ˜¯å¼•ç”¨ç±»å‹</h3><p>ä¸åˆ‡ç‰‡ç›¸ä¼¼ï¼Œæ˜ å°„æ˜¯å¼•ç”¨ç±»å‹ã€‚å½“å°†æ˜ å°„åˆ†é…ç»™ä¸€ä¸ªæ–°å˜é‡æ—¶ï¼Œå®ƒä»¬éƒ½æŒ‡å‘ç›¸åŒçš„å†…éƒ¨æ•°æ®ç»“æ„ã€‚å› æ­¤ï¼Œä¸€ä¸ªçš„å˜åŒ–ä¼šåæ˜ å¦ä¸€ä¸ªã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Original person salary&quot;</span>, personSalary)</span><br><span class="line">    newPersonSalary := personSalary</span><br><span class="line">    newPersonSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">18000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Person salary changed&quot;</span>, personSalary)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Original person salary map[steve:12000 jamie:15000 mike:9000]  </span><br><span class="line">Person salary changed map[steve:12000 jamie:15000 mike:18000] </span><br></pre></td></tr></table></figure>

<blockquote>
<p>mapä¸èƒ½ä½¿ç”¨&#x3D;&#x3D;æ“ä½œç¬¦è¿›è¡Œæ¯”è¾ƒã€‚&#x3D;&#x3D;åªèƒ½ç”¨æ¥æ£€æŸ¥mapæ˜¯å¦ä¸ºç©ºã€‚å¦åˆ™ä¼šæŠ¥é”™ï¼šinvalid operation: map1 &#x3D;&#x3D; map2 (map can only be comparedto nil)</p>
</blockquote>
<h1 id="å­—ç¬¦ä¸²-string"><a href="#å­—ç¬¦ä¸²-string" class="headerlink" title="å­—ç¬¦ä¸²(string)"></a>å­—ç¬¦ä¸²(string)</h1><h2 id="ä»€ä¹ˆæ˜¯string"><a href="#ä»€ä¹ˆæ˜¯string" class="headerlink" title="ä»€ä¹ˆæ˜¯string"></a>ä»€ä¹ˆæ˜¯string</h2><p>Goä¸­çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå­—èŠ‚çš„åˆ‡ç‰‡ã€‚å¯ä»¥é€šè¿‡å°†å…¶å†…å®¹å°è£…åœ¨â€œâ€ä¸­æ¥åˆ›å»ºå­—ç¬¦ä¸²ã€‚Goä¸­çš„å­—ç¬¦ä¸²æ˜¯Unicodeå…¼å®¹çš„ï¼Œå¹¶ä¸”æ˜¯UTF-8ç¼–ç çš„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    name := <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">    fmt.Println(name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="stringçš„ä½¿ç”¨"><a href="#stringçš„ä½¿ç”¨" class="headerlink" title="stringçš„ä½¿ç”¨"></a>stringçš„ä½¿ç”¨</h2><p>è®¿é—®å­—ç¬¦ä¸²ä¸­çš„å•ä¸ªå­—èŠ‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%d &quot;</span>, s[i])</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%c &quot;</span>, s[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>%cï¼šç›¸åº”Unicodeç ç‚¹æ‰€è¡¨ç¤ºçš„å­—ç¬¦</p>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">72 101 108 108 111 32 87 111 114 108 100 </span><br><span class="line">H e l l o   W o r l d </span><br></pre></td></tr></table></figure>















]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>å‡½æ•°ä¸defer</title>
    <url>/2023/06/04/Go/8/</url>
    <content><![CDATA[<h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><h2 id="ä»€ä¹ˆæ˜¯å‡½æ•°"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°"></a>ä»€ä¹ˆæ˜¯å‡½æ•°</h2><p>å‡½æ•°æ˜¯æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„ä»£ç å—ã€‚</p>
<h2 id="å‡½æ•°çš„å£°æ˜"><a href="#å‡½æ•°çš„å£°æ˜" class="headerlink" title="å‡½æ•°çš„å£°æ˜"></a>å‡½æ•°çš„å£°æ˜</h2><p>go è¯­è¨€è‡³å°‘æœ‰ä¸€ä¸ª main å‡½æ•°</p>
<p>è¯­æ³•æ ¼å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funcName</span><span class="params">(parametername type1, parametername type2)</span></span> (output1 type1, output2 type2) &#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œæ˜¯å¤„ç†é€»è¾‘ä»£ç </span></span><br><span class="line"><span class="comment">//è¿”å›å¤šä¸ªå€¼</span></span><br><span class="line"><span class="keyword">return</span> value1, value2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>funcï¼šå‡½æ•°ç”± func å¼€å§‹å£°æ˜</li>
<li>funcNameï¼šå‡½æ•°åç§°ï¼Œå‡½æ•°åå’Œå‚æ•°åˆ—è¡¨ä¸€èµ·æ„æˆäº†å‡½æ•°ç­¾åã€‚</li>
<li>parametername typeï¼šå‚æ•°åˆ—è¡¨ï¼Œå‚æ•°å°±åƒä¸€ä¸ªå ä½ç¬¦ï¼Œå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä½ å¯ä»¥å°†å€¼ä¼ é€’ç»™å‚æ•°ï¼Œè¿™ä¸ªå€¼è¢«ç§°ä¸ºå®é™…å‚æ•°ã€‚å‚æ•°åˆ—è¡¨æŒ‡å®šçš„æ˜¯å‚æ•°ç±»å‹ã€é¡ºåºã€åŠå‚æ•°ä¸ªæ•°ã€‚å‚æ•°æ˜¯å¯é€‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å‡½æ•°ä¹Ÿå¯ä»¥ä¸åŒ…å«å‚æ•°ã€‚</li>
<li>output1 type1, output2 type2ï¼šè¿”å›ç±»å‹ï¼Œå‡½æ•°è¿”å›ä¸€åˆ—å€¼ã€‚return_types æ˜¯è¯¥åˆ—å€¼çš„æ•°æ®ç±»å‹ã€‚æœ‰äº›åŠŸèƒ½ä¸éœ€è¦è¿”å›å€¼ï¼Œè¿™ç§æƒ…å†µä¸‹ return_types ä¸æ˜¯å¿…é¡»çš„ã€‚</li>
<li>ä¸Šé¢è¿”å›å€¼å£°æ˜äº†ä¸¤ä¸ªå˜é‡ output1 å’Œ output2ï¼Œå¦‚æœä½ ä¸æƒ³å£°æ˜ä¹Ÿå¯ä»¥ï¼Œç›´æ¥å°±ä¸¤ä¸ªç±»å‹ã€‚</li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªè¿”å›å€¼ä¸”ä¸å£°æ˜è¿”å›å€¼å˜é‡ï¼Œé‚£ä¹ˆä½ å¯ä»¥çœç•¥åŒ…æ‹¬è¿”å›å€¼çš„æ‹¬å·ï¼ˆå³ä¸€ä¸ªè¿”å›å€¼å¯ä»¥ä¸å£°æ˜è¿”å›ç±»å‹ï¼‰</li>
<li>å‡½æ•°ä½“ï¼šå‡½æ•°å®šä¹‰çš„ä»£ç é›†åˆã€‚</li>
</ul>
<h2 id="å‡½æ•°çš„ä½¿ç”¨"><a href="#å‡½æ•°çš„ä½¿ç”¨" class="headerlink" title="å‡½æ•°çš„ä½¿ç”¨"></a>å‡½æ•°çš„ä½¿ç”¨</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add2</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exists</span><span class="params">(m <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>, k <span class="type">string</span>)</span></span> (v <span class="type">string</span>, ok <span class="type">bool</span>) &#123;</span><br><span class="line">	v, ok = m[k]</span><br><span class="line">	<span class="keyword">return</span> v, ok</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	res := add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">	fmt.Println(res) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">	v, ok := exists(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>&#125;, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">	fmt.Println(v, ok) <span class="comment">// A True</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">3</span><br><span class="line">A true</span><br></pre></td></tr></table></figure>

<h2 id="å‡½æ•°çš„å‚æ•°"><a href="#å‡½æ•°çš„å‚æ•°" class="headerlink" title="å‡½æ•°çš„å‚æ•°"></a>å‡½æ•°çš„å‚æ•°</h2><h3 id="å‚æ•°çš„ä½¿ç”¨"><a href="#å‚æ•°çš„ä½¿ç”¨" class="headerlink" title="å‚æ•°çš„ä½¿ç”¨"></a>å‚æ•°çš„ä½¿ç”¨</h3><p>å½¢å¼å‚æ•°ï¼šå®šä¹‰å‡½æ•°æ—¶ï¼Œç”¨äºæ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„æ•°æ®ï¼Œå«åšå½¢å¼å‚æ•°ï¼Œç®€ç§°å½¢å‚ã€‚</p>
<p>å®é™…å‚æ•°ï¼šè°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼ ç»™å½¢å‚çš„å®é™…çš„æ•°æ®ï¼Œå«åšå®é™…å‚æ•°ï¼Œç®€ç§°å®å‚ã€‚</p>
<p>å‡½æ•°è°ƒç”¨ï¼š</p>
<p> Aï¼šå‡½æ•°åç§°å¿…é¡»åŒ¹é…</p>
<p> Bï¼šå®å‚ä¸å½¢å‚å¿…é¡»ä¸€ä¸€å¯¹åº”ï¼šé¡ºåºï¼Œä¸ªæ•°ï¼Œç±»å‹</p>
<h3 id="å¯å˜å‚"><a href="#å¯å˜å‚" class="headerlink" title="å¯å˜å‚"></a>å¯å˜å‚</h3><p>Go å‡½æ•°æ”¯æŒå˜å‚ã€‚æ¥å—å˜å‚çš„å‡½æ•°æ˜¯æœ‰ç€ä¸å®šæ•°é‡çš„å‚æ•°çš„ã€‚ä¸ºäº†åšåˆ°è¿™ç‚¹ï¼Œé¦–å…ˆéœ€è¦å®šä¹‰å‡½æ•°ä½¿å…¶æ¥å—å˜å‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc</span><span class="params">(arg ...<span class="type">int</span>)</span></span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>arg ...int</code> å‘Šè¯‰ Go è¿™ä¸ªå‡½æ•°æ¥å—ä¸å®šæ•°é‡çš„å‚æ•°ã€‚æ³¨æ„ï¼Œè¿™äº›å‚æ•°çš„ç±»å‹å…¨éƒ¨æ˜¯ intã€‚åœ¨å‡½æ•°ä½“ä¸­ï¼Œå˜é‡ arg æ˜¯ä¸€ä¸ª int çš„ sliceï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> _, n := <span class="keyword">range</span> arg &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;And the number is: %d\n&quot;</span>, n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å‚æ•°ä¼ é€’"><a href="#å‚æ•°ä¼ é€’" class="headerlink" title="å‚æ•°ä¼ é€’"></a>å‚æ•°ä¼ é€’</h3><p>go è¯­è¨€å‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯å­˜åœ¨<strong>å€¼ä¼ é€’</strong>å’Œ<strong>å¼•ç”¨ä¼ é€’</strong></p>
<p>å‡½æ•°è¿ç”¨åœºæ™¯</p>
<p><strong>å€¼ä¼ é€’</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">&quot;fmt&quot;</span></span><br><span class="line">   <span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="comment">/* å£°æ˜å‡½æ•°å˜é‡ */</span></span><br><span class="line">   getSquareRoot := <span class="function"><span class="keyword">func</span><span class="params">(x <span class="type">float64</span>)</span></span> <span class="type">float64</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> math.Sqrt(x)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* ä½¿ç”¨å‡½æ•° */</span></span><br><span class="line">   fmt.Println(getSquareRoot(<span class="number">9</span>))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¼•ç”¨ä¼ é€’</strong></p>
<p>è¿™å°±ç‰µæ‰¯åˆ°äº†æ‰€è°“çš„æŒ‡é’ˆã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå˜é‡åœ¨å†…å­˜ä¸­æ˜¯å­˜æ”¾äºä¸€å®šåœ°å€ä¸Šçš„ï¼Œä¿®æ”¹å˜é‡å®é™…æ˜¯ä¿®æ”¹å˜é‡åœ°å€å¤„çš„å†…å­˜ã€‚</p>
<p>åªæœ‰ add1 å‡½æ•°çŸ¥é“ x å˜é‡æ‰€åœ¨çš„åœ°å€ï¼Œæ‰èƒ½ä¿®æ”¹ x å˜é‡çš„å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† x æ‰€åœ¨åœ°å€ &amp; x ä¼ å…¥å‡½æ•°ï¼Œå¹¶å°†å‡½æ•°çš„å‚æ•°çš„ç±»å‹ç”± int æ”¹ä¸º * intï¼Œå³æ”¹ä¸ºæŒ‡é’ˆç±»å‹ï¼Œæ‰èƒ½åœ¨å‡½æ•°ä¸­ä¿®æ”¹ x å˜é‡çš„å€¼ã€‚æ­¤æ—¶å‚æ•°ä»ç„¶æ˜¯æŒ‰ copy ä¼ é€’çš„ï¼Œåªæ˜¯ copy çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ç°äº†å‚æ•°+1çš„æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add1</span><span class="params">(a *<span class="type">int</span>)</span></span> <span class="type">int</span> &#123; <span class="comment">// è¯·æ³¨æ„ï¼Œ</span></span><br><span class="line">	*a = *a + <span class="number">1</span> <span class="comment">// ä¿®æ”¹äº†açš„å€¼</span></span><br><span class="line">	<span class="keyword">return</span> *a   <span class="comment">// è¿”å›æ–°å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x := <span class="number">3</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;x = &quot;</span>, x)    <span class="comment">// åº”è¯¥è¾“å‡º &quot;x = 3&quot;</span></span><br><span class="line">	x1 := add1(&amp;x)            <span class="comment">// è°ƒç”¨ add1(&amp;x) ä¼ xçš„åœ°å€</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;x+1 = &quot;</span>, x1) <span class="comment">// åº”è¯¥è¾“å‡º &quot;x+1 = 4&quot;</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;x = &quot;</span>, x)    <span class="comment">// åº”è¯¥è¾“å‡º &quot;x = 4&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x =  3</span><br><span class="line">x+1 =  4</span><br><span class="line">x =  4</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¼ æŒ‡é’ˆä½¿å¾—å¤šä¸ªå‡½æ•°èƒ½æ“ä½œåŒä¸€ä¸ªå¯¹è±¡ã€‚</li>
<li>ä¼ æŒ‡é’ˆæ¯”è¾ƒè½»é‡çº§ (8bytes), åªæ˜¯ä¼ å†…å­˜åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æŒ‡é’ˆä¼ é€’ä½“ç§¯å¤§çš„ç»“æ„ä½“ã€‚å¦‚æœç”¨å‚æ•°å€¼ä¼ é€’çš„è¯ï¼Œåœ¨æ¯æ¬¡ copy ä¸Šé¢å°±ä¼šèŠ±è´¹ç›¸å¯¹è¾ƒå¤šçš„ç³»ç»Ÿå¼€é”€ï¼ˆå†…å­˜å’Œæ—¶é—´ï¼‰ã€‚æ‰€ä»¥å½“ä½ è¦ä¼ é€’å¤§çš„ç»“æ„ä½“çš„æ—¶å€™ï¼Œç”¨æŒ‡é’ˆæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚</li>
<li><strong>Go è¯­è¨€ä¸­ sliceï¼Œmap è¿™ä¸‰ç§ç±»å‹çš„å®ç°æœºåˆ¶ç±»ä¼¼æŒ‡é’ˆ</strong>ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä¼ é€’ï¼Œè€Œä¸ç”¨å–åœ°å€åä¼ é€’æŒ‡é’ˆã€‚ï¼ˆæ³¨ï¼šè‹¥å‡½æ•°éœ€æ”¹å˜ slice çš„é•¿åº¦ï¼Œåˆ™ä»éœ€è¦å–åœ°å€ä¼ é€’æŒ‡é’ˆï¼‰</li>
</ul>
<h2 id="å‡½æ•°çš„è¿”å›å€¼"><a href="#å‡½æ•°çš„è¿”å›å€¼" class="headerlink" title="å‡½æ•°çš„è¿”å›å€¼"></a>å‡½æ•°çš„è¿”å›å€¼</h2><h3 id="ä»€ä¹ˆæ˜¯å‡½æ•°çš„è¿”å›å€¼"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°çš„è¿”å›å€¼" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°çš„è¿”å›å€¼"></a>ä»€ä¹ˆæ˜¯å‡½æ•°çš„è¿”å›å€¼</h3><p>ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨åï¼Œè¿”å›ç»™è°ƒç”¨å¤„çš„æ‰§è¡Œç»“æœï¼Œå«åšå‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<p>è°ƒç”¨å¤„éœ€è¦ä½¿ç”¨å˜é‡æ¥æ”¶è¯¥ç»“æœ</p>
<h3 id="ä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼"><a href="#ä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼" class="headerlink" title="ä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼"></a>ä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼</h3><p>ä¸€ä¸ªå‡½æ•°å¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æœ‰è¿”å›å¤šä¸ªå€¼ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(x, y <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">string</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> y, x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   a, b := swap(<span class="string">&quot;Mahesh&quot;</span>, <span class="string">&quot;Kumar&quot;</span>)</span><br><span class="line">   fmt.Println(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SumAndProduct</span><span class="params">(A, B <span class="type">int</span>)</span></span> (add <span class="type">int</span>, Multiplied <span class="type">int</span>) &#123;</span><br><span class="line">add = A+B</span><br><span class="line">Multiplied = A*B</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç©ºç™½æ ‡è¯†ç¬¦"><a href="#ç©ºç™½æ ‡è¯†ç¬¦" class="headerlink" title="ç©ºç™½æ ‡è¯†ç¬¦"></a>ç©ºç™½æ ‡è¯†ç¬¦</h3><p>_æ˜¯ Go ä¸­çš„ç©ºç™½æ ‡è¯†ç¬¦ã€‚å®ƒå¯ä»¥ä»£æ›¿ä»»ä½•ç±»å‹çš„ä»»ä½•å€¼ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç©ºç™½æ ‡è¯†ç¬¦çš„ç”¨æ³•ã€‚</p>
<p>æ¯”å¦‚ rectProps å‡½æ•°è¿”å›çš„ç»“æœæ˜¯é¢ç§¯å’Œå‘¨é•¿ï¼Œå¦‚æœæˆ‘ä»¬åªè¦é¢ç§¯ï¼Œä¸è¦å‘¨é•¿ï¼Œå°±å¯ä»¥ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rectProps</span><span class="params">(length, width <span class="type">float64</span>)</span></span> (<span class="type">float64</span>, <span class="type">float64</span>) &#123;  </span><br><span class="line">    <span class="keyword">var</span> area = length * width</span><br><span class="line">    <span class="keyword">var</span> perimeter = (length + width) * <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> area, perimeter</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    area, _ := rectProps(<span class="number">10.8</span>, <span class="number">5.6</span>) <span class="comment">// perimeter is discarded</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Area %f &quot;</span>, area)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å˜é‡çš„ä½œç”¨åŸŸ"><a href="#å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡çš„ä½œç”¨åŸŸ"></a>å˜é‡çš„ä½œç”¨åŸŸ</h2><p>ä½œç”¨åŸŸï¼šå˜é‡å¯ä»¥ä½¿ç”¨çš„èŒƒå›´ã€‚</p>
<h3 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h3><p>ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼Œå°±å«åšå±€éƒ¨å˜é‡</p>
<p>å˜é‡åœ¨å“ªé‡Œå®šä¹‰ï¼Œå°±åªèƒ½åœ¨å“ªä¸ªèŒƒå›´ä½¿ç”¨ï¼Œè¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œæˆ‘ä»¬è®¤ä¸ºå˜é‡å°±è¢«é”€æ¯äº†ã€‚</p>
<h3 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h3><p>ä¸€ä¸ªå‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ï¼Œå°±å«åšå…¨å±€å˜é‡</p>
<p>æ‰€æœ‰çš„å‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè€Œä¸”å…±äº«è¿™ä¸€ä»½æ•°æ®</p>
<h3 id="é€’å½’å‡½æ•°"><a href="#é€’å½’å‡½æ•°" class="headerlink" title="é€’å½’å‡½æ•°"></a>é€’å½’å‡½æ•°</h3><p>ä¸€ä¸ªå‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œå°±å«åšé€’å½’è°ƒç”¨ï¼Œä¸€ä¸ªé€’å½’å‡½æ•°ä¸€å®šè¦æœ‰å‡ºå£ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯</p>
<h1 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h1><h2 id="å»¶è¿Ÿæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å»¶è¿Ÿæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å»¶è¿Ÿæ˜¯ä»€ä¹ˆï¼Ÿ"></a>å»¶è¿Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å³å»¶è¿Ÿï¼ˆdeferï¼‰è¯­å¥ï¼Œå»¶è¿Ÿè¯­å¥è¢«ç”¨äºæ‰§è¡Œä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¹‹å‰ï¼Œå»¶è¿Ÿè¯­å¥è¿”å›ã€‚</p>
<h2 id="å»¶è¿Ÿå‡½æ•°"><a href="#å»¶è¿Ÿå‡½æ•°" class="headerlink" title="å»¶è¿Ÿå‡½æ•°"></a>å»¶è¿Ÿå‡½æ•°</h2><p>ä½ å¯ä»¥åœ¨å‡½æ•°ä¸­æ·»åŠ å¤šä¸ª defer è¯­å¥ã€‚å½“å‡½æ•°æ‰§è¡Œåˆ°æœ€åæ—¶ï¼Œè¿™äº› defer è¯­å¥ä¼šæŒ‰ç…§é€†åºæ‰§è¡Œï¼Œæœ€åè¯¥å‡½æ•°è¿”å›ã€‚ç‰¹åˆ«æ˜¯å½“ä½ åœ¨è¿›è¡Œä¸€äº›æ‰“å¼€èµ„æºçš„æ“ä½œæ—¶ï¼Œé‡åˆ°é”™è¯¯éœ€è¦æå‰è¿”å›ï¼Œåœ¨è¿”å›å‰ä½ éœ€è¦å…³é—­ç›¸åº”çš„èµ„æºï¼Œä¸ç„¶å¾ˆå®¹æ˜“é€ æˆèµ„æºæ³„éœ²ç­‰é—®é¢˜ã€‚</p>
<ul>
<li>å¦‚æœæœ‰å¾ˆå¤šè°ƒç”¨ deferï¼Œé‚£ä¹ˆ defer æ˜¯é‡‡ç”¨<code>åè¿›å…ˆå‡º</code>æ¨¡å¼</li>
<li>åœ¨ç¦»å¼€æ‰€åœ¨çš„æ–¹æ³•æ—¶ï¼Œæ‰§è¡Œï¼ˆæŠ¥é”™çš„æ—¶å€™ä¹Ÿä¼šæ‰§è¡Œï¼‰</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReadWrite</span><span class="params">()</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    file.Open(<span class="string">&quot;file&quot;</span>)</span><br><span class="line">    <span class="keyword">defer</span> file.Close()</span><br><span class="line">    <span class="keyword">if</span> failureX &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> failureY &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åæ‰æ‰§è¡Œ <code>file.Close()</code></p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">1</span></span><br><span class="line">	b := <span class="number">2</span></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(b)</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">finished</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    fmt.Println(<span class="string">&quot;Finished finding largest&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">largest</span><span class="params">(nums []<span class="type">int</span>)</span></span> &#123;  </span><br><span class="line">    <span class="keyword">defer</span> finished()    </span><br><span class="line">    fmt.Println(<span class="string">&quot;Started finding largest&quot;</span>)</span><br><span class="line">    max := nums[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> nums &#123;</span><br><span class="line">        <span class="keyword">if</span> v &gt; max &#123;</span><br><span class="line">            max = v</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Largest number in&quot;</span>, nums, <span class="string">&quot;is&quot;</span>, max)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    nums := []<span class="type">int</span>&#123;<span class="number">78</span>, <span class="number">109</span>, <span class="number">2</span>, <span class="number">563</span>, <span class="number">300</span>&#125;</span><br><span class="line">    largest(nums)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Started finding largest  </span><br><span class="line">Largest number in [78 109 2 563 300] is 563  </span><br><span class="line">Finished finding largest </span><br></pre></td></tr></table></figure>

<h2 id="å»¶è¿Ÿæ–¹æ³•"><a href="#å»¶è¿Ÿæ–¹æ³•" class="headerlink" title="å»¶è¿Ÿæ–¹æ³•"></a>å»¶è¿Ÿæ–¹æ³•</h2><p>å»¶è¿Ÿå¹¶ä¸ä»…ä»…å±€é™äºå‡½æ•°ã€‚å»¶è¿Ÿä¸€ä¸ªæ–¹æ³•è°ƒç”¨ä¹Ÿæ˜¯å®Œå…¨åˆæ³•çš„ã€‚è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå°ç¨‹åºæ¥æµ‹è¯•è¿™ä¸ªã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	firstName <span class="type">string</span></span><br><span class="line">	lastName  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p person)</span></span> fullName() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s %s&quot;</span>, p.firstName, p.lastName)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := person&#123;</span><br><span class="line">		firstName: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">		lastName:  <span class="string">&quot;Smith&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> p.fullName()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Welcome &quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Welcome John Smith </span><br></pre></td></tr></table></figure>

<h2 id="å»¶è¿Ÿå‚æ•°"><a href="#å»¶è¿Ÿå‚æ•°" class="headerlink" title="å»¶è¿Ÿå‚æ•°"></a>å»¶è¿Ÿå‚æ•°</h2><p>å»¶è¿Ÿå‡½æ•°çš„å‚æ•°åœ¨æ‰§è¡Œå»¶è¿Ÿè¯­å¥æ—¶è¢«æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œå®é™…çš„å‡½æ•°è°ƒç”¨æ—¶æ‰§è¡Œã€‚</p>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printA</span><span class="params">(a <span class="type">int</span>)</span></span> &#123;  </span><br><span class="line">    fmt.Println(<span class="string">&quot;value of a in deferred function&quot;</span>, a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := <span class="number">5</span></span><br><span class="line">    <span class="keyword">defer</span> printA(a)</span><br><span class="line">    a = <span class="number">10</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;value of a before deferred function call&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">value of a before deferred function call 10 </span><br><span class="line">value of a in deferred function 5 </span><br></pre></td></tr></table></figure>

<h2 id="å †æ ˆçš„æ¨è¿Ÿ"><a href="#å †æ ˆçš„æ¨è¿Ÿ" class="headerlink" title="å †æ ˆçš„æ¨è¿Ÿ"></a>å †æ ˆçš„æ¨è¿Ÿ</h2><p>å½“ä¸€ä¸ªå‡½æ•°æœ‰å¤šä¸ªå»¶è¿Ÿè°ƒç”¨æ—¶ï¼Œå®ƒä»¬è¢«æ·»åŠ åˆ°ä¸€ä¸ªå †æ ˆä¸­ï¼Œå¹¶åœ¨ Last In First Outï¼ˆLIFOï¼‰åè¿›å…ˆå‡ºçš„é¡ºåºä¸­æ‰§è¡Œã€‚</p>
<p>ç¼–å†™ä¸€ä¸ªå°ç¨‹åºï¼Œå®ƒä½¿ç”¨ä¸€å † defers æ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    name := <span class="string">&quot;Naveen&quot;</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Orignal String: %s\n&quot;</span>, <span class="type">string</span>(name))</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Reversed String: &quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> []<span class="type">rune</span>(name) &#123;</span><br><span class="line">        <span class="keyword">defer</span> fmt.Printf(<span class="string">&quot;%c&quot;</span>, v)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<p>åœ¨ Go è¯­è¨€ä¸­ï¼Œ<code>rune</code> æ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹åˆ«åï¼Œç”¨äºè¡¨ç¤º Unicode å­—ç¬¦ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª 32 ä½çš„æ•´æ•°ï¼Œå¯ä»¥å­˜å‚¨ä»»ä½• Unicode ç ç‚¹çš„å€¼ã€‚åœ¨ Go ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ç”±ä¸€ç³»åˆ—çš„ Unicode å­—ç¬¦ç»„æˆçš„ã€‚æ¯ä¸ª Unicode å­—ç¬¦å¯ä»¥ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚è¡¨ç¤ºã€‚ä½¿ç”¨ <code>rune </code>ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰å­—ç¬¦è€Œä¸æ˜¯å­—èŠ‚æ¥å¤„ç†å­—ç¬¦ä¸²ã€‚<code>rune </code>ç±»å‹çš„ä¸»è¦ä½œç”¨æ˜¯å…è®¸æˆ‘ä»¬åœ¨å­—ç¬¦ä¸²ä¸­æŒ‰å­—ç¬¦è¿›è¡Œè¿­ä»£ã€ç´¢å¼•å’Œæ“ä½œã€‚å½“æˆ‘ä»¬éœ€è¦éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠå¤šå­—èŠ‚å­—ç¬¦ï¼ˆå¦‚ä¸­æ–‡ã€æ—¥æ–‡æˆ–ç‰¹æ®Šç¬¦å·ï¼‰çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>rune</code> ç±»å‹å¯ä»¥ç¡®ä¿æ­£ç¡®å¤„ç†æ¯ä¸ªå­—ç¬¦ã€‚åœ¨ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>[]rune(name)</code> å°†å­—ç¬¦ä¸² <code>name</code> è½¬æ¢ä¸ºä¸€ä¸ª <code>rune</code> åˆ‡ç‰‡ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æŒ‰å­—ç¬¦è¿­ä»£å¤„ç†å®ƒã€‚è¿™æ ·å¯ä»¥ç¡®ä¿é€†åºæ‰“å°å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œè€Œä¸ä»…ä»…æ˜¯æŒ‰å­—èŠ‚é€†åºæ‰“å°ã€‚</p>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Orignal String: Naveen </span><br><span class="line">Reversed String: neevaN </span><br></pre></td></tr></table></figure>

<h2 id="defer-æ³¨æ„ç‚¹"><a href="#defer-æ³¨æ„ç‚¹" class="headerlink" title="defer æ³¨æ„ç‚¹"></a>defer æ³¨æ„ç‚¹</h2><p>defer å‡½æ•°ï¼š<br>å½“å¤–å›´å‡½æ•°ä¸­çš„è¯­å¥æ­£å¸¸æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œåªæœ‰å…¶ä¸­æ‰€æœ‰çš„å»¶è¿Ÿå‡½æ•°éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œå¤–å›´å‡½æ•°æ‰ä¼šçœŸæ­£çš„ç»“æŸæ‰§è¡Œã€‚<br>å½“æ‰§è¡Œå¤–å›´å‡½æ•°ä¸­çš„ return è¯­å¥æ—¶ï¼Œåªæœ‰å…¶ä¸­æ‰€æœ‰çš„å»¶è¿Ÿå‡½æ•°éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œå¤–å›´å‡½æ•°æ‰ä¼šçœŸæ­£è¿”å›ã€‚<br>å½“å¤–å›´å‡½æ•°ä¸­çš„ä»£ç å¼•å‘è¿è¡Œææ…Œæ—¶ï¼Œåªæœ‰å…¶ä¸­æ‰€æœ‰çš„å»¶è¿Ÿå‡½æ•°éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥è¿è¡Œæ—¶ææ…Œæ‰ä¼šçœŸæ­£è¢«æ‰©å±•è‡³è°ƒç”¨å‡½æ•°ã€‚</p>
]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>Gin+Gormç»ƒæ‰‹å°é¡¹ç›®bubbleæ¸…å•ä¼ä¸šçº§ç»“æ„å‰–æ</title>
    <url>/2023/07/19/Go/28/</url>
    <content><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>æœ¬é¡¹ç›®æ¥æºäº<a href="https://github.com/Q1mi/bubble">Qimiè€å¸ˆçš„å°æ¸…å•é¡¹ç›®</a>â€”â€”åŸºäºgin+gormå¼€å‘çš„ç»ƒæ‰‹å°é¡¹ç›®ï¼Œé€šè¿‡è¯¥é¡¹ç›®å¯åˆè¯†go webå¼€å‘è¯¥æœ‰çš„å§¿åŠ¿ã€‚ç¬”è€…å¯¹ä»£ç æœ‰äº›è®¸ä¿®æ”¹ï¼Œä»¥ä¸‹æ˜¯é¡¹ç›®æˆåŠŸè¿è¡Œçš„æˆªå›¾ï¼Œä¸»è¦åŠŸèƒ½æœ‰æ·»åŠ ï¼Œåˆ é™¤ï¼Œç¡®è®¤ï¼ŒæŸ¥çœ‹å¾…åŠäº‹é¡¹ç­‰ï¼ˆæ‰€ä»¥æ˜¯å°é¡¹ç›®å•¦~ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/c1792813df104b18bcbac92e88839992.png"></p>
<h1 id="é¡¹ç›®ç»“æ„æ ‘"><a href="#é¡¹ç›®ç»“æ„æ ‘" class="headerlink" title="é¡¹ç›®ç»“æ„æ ‘"></a>é¡¹ç›®ç»“æ„æ ‘</h1><p>è¿™ä¸ªé¡¹ç›®è™½ç„¶æ¯”è¾ƒå°ï¼Œä½†æ˜¯è¿˜æ˜¯å¯ä»¥ç”¨ä¼ä¸šçº§ä»£ç ç»“æ„å»åˆ’åˆ†ï¼Œä»¥ä¸‹æ˜¯é¡¹ç›®ç»“æ„æ ‘ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”œâ”€controllers</span><br><span class="line">â”œâ”€dao</span><br><span class="line">â”œâ”€models</span><br><span class="line">â”œâ”€routers</span><br><span class="line">â”œâ”€static</span><br><span class="line">â”‚  â”œâ”€css</span><br><span class="line">â”‚  â”œâ”€fonts</span><br><span class="line">â”‚  â””â”€js</span><br><span class="line">â””â”€template</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/6766336abdff4a11b0df9785c80ba4f1.png"><br>åˆ’åˆ†é¡¹ç›®ç»“æ„ï¼Œåˆ©äºä»£ç ç»„ç»‡å’Œå¯ç»´æŠ¤ï¼Œä¹Ÿæœ‰åˆ©äºå›¢é˜Ÿåä½œã€‚</p>
<h1 id="åç«¯æºç "><a href="#åç«¯æºç " class="headerlink" title="åç«¯æºç "></a>åç«¯æºç </h1><p><code>main.go</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bubble/dao&quot;</span></span><br><span class="line">	<span class="string">&quot;bubble/models&quot;</span></span><br><span class="line">	<span class="string">&quot;bubble/routers&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	err := dao.InitMySQL()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	err = dao.DB.AutoMigrate(&amp;models.Todo&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	r := routers.SetupRouter()</span><br><span class="line">	err = r.Run()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>controller.go</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> controllers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bubble/models&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//url --&gt;controller --&gt;logic --&gt;model</span></span><br><span class="line"><span class="comment">//è¯·æ±‚æ¥äº† --&gt;æ§åˆ¶å™¨ --&gt;ä¸šåŠ¡é€»è¾‘ --&gt;æ¨¡å‹å±‚çš„å¢åˆ æ”¹æŸ¥</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">IndexHandler</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(http.StatusOK, <span class="string">&quot;index.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateTodo</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> todo models.Todo</span><br><span class="line">	err := c.BindJSON(&amp;todo)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> err := models.CTodo(&amp;todo); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		c.JSON(http.StatusBadRequest, gin.H&#123;<span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;code&quot;</span>: <span class="number">200</span>,</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>:  <span class="string">&quot;success&quot;</span>,</span><br><span class="line">			<span class="string">&quot;data&quot;</span>: todo,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetTodo</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> todoList, err := models.GTodo(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		c.JSON(http.StatusBadRequest, err.Error())</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		c.JSON(http.StatusOK, todoList)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UpdateTodo</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	id, ok := c.Params.Get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		c.JSON(http.StatusBadRequest, gin.H&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;æ— æ•ˆçš„id&quot;</span>&#125;)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	todo, err := models.UTodo(id)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		c.JSON(http.StatusBadRequest, gin.H&#123;<span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	err = c.BindJSON(&amp;todo)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> err = models.STodo(todo); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		c.JSON(http.StatusOK, todo)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DeleteTodo</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	id, ok := c.Params.Get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;æ— æ•ˆçš„id&quot;</span>&#125;)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> err := models.DTodo(id); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;id: <span class="string">&quot;deleted&quot;</span>&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>mysql.go</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> dao</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> DB *gorm.DB</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitMySQL</span><span class="params">()</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">	dsn := <span class="string">&quot;root:@tcp(127.0.0.1:3306)/bubble?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span><br><span class="line">	DB, err = gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123;&#125;)</span><br><span class="line">	<span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>todo.go</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bubble/dao&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Todo Model</span></span><br><span class="line"><span class="keyword">type</span> Todo <span class="keyword">struct</span> &#123;</span><br><span class="line">	ID     <span class="type">int</span>    <span class="string">`json:&quot;id&quot;`</span></span><br><span class="line">	Title  <span class="type">string</span> <span class="string">`json:&quot;title&quot;`</span></span><br><span class="line">	Status <span class="type">bool</span>   <span class="string">`json:&quot;status&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Todo å¢åˆ æ”¹æŸ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// CTodo åˆ›å»ºtodo</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CTodo</span><span class="params">(todo *Todo)</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> err = dao.DB.Create(&amp;todo).Error; err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GTodo æŸ¥è¯¢todo</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GTodo</span><span class="params">()</span></span> (todoList []*Todo, err <span class="type">error</span>) &#123;</span><br><span class="line">	err = dao.DB.Find(&amp;todoList).Error</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UTodo</span><span class="params">(id <span class="type">string</span>)</span></span> (todo *Todo, err <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> err := dao.DB.Where(<span class="string">&quot;id=?&quot;</span>, id).First(&amp;todo).Error; err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">STodo</span><span class="params">(todo *Todo)</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">	err = dao.DB.Save(&amp;todo).Error</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DTodo</span><span class="params">(id <span class="type">string</span>)</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">	err = dao.DB.Where(<span class="string">&quot;id=?&quot;</span>, id).Delete(&amp;Todo&#123;&#125;).Error</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>routers.go</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> routers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bubble/controllers&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SetupRouter</span><span class="params">()</span></span> *gin.Engine &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.Static(<span class="string">&quot;/static&quot;</span>, <span class="string">&quot;static&quot;</span>)</span><br><span class="line">	r.LoadHTMLGlob(<span class="string">&quot;template/*&quot;</span>)</span><br><span class="line">	r.GET(<span class="string">&quot;/&quot;</span>, controllers.IndexHandler)</span><br><span class="line"></span><br><span class="line">	v1Group := r.Group(<span class="string">&quot;/v1&quot;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		v1Group.POST(<span class="string">&quot;/todo&quot;</span>, controllers.CreateTodo)</span><br><span class="line"></span><br><span class="line">		v1Group.GET(<span class="string">&quot;todo/&quot;</span>, controllers.GetTodo)</span><br><span class="line"></span><br><span class="line">		v1Group.PUT(<span class="string">&quot;todo/:id&quot;</span>, controllers.UpdateTodo)</span><br><span class="line"></span><br><span class="line">		v1Group.DELETE(<span class="string">&quot;todo/:id&quot;</span>, controllers.DeleteTodo)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å­¦ä¹ ä½¿ç”¨"><a href="#å­¦ä¹ ä½¿ç”¨" class="headerlink" title="å­¦ä¹ ä½¿ç”¨"></a>å­¦ä¹ ä½¿ç”¨</h1><p>å‰åç«¯æ‰€æœ‰æºç éƒ½å·²ç»ä¸Šä¼ è‡³æˆ‘çš„èµ„æºé‡Œï¼š<a href="https://download.csdn.net/download/m0_63230155/88064315?spm=1001.2014.3001.5503">https://download.csdn.net/download/m0_63230155/88064315?spm=1001.2014.3001.5503</a>ï¼Œä¾›å…¶ä»–å°ä¼™ä¼´å­¦ä¹ ä½¿ç”¨ï¼Œè¿™ä¸ªæ˜¯å…è´¹ä¸‹è½½çš„ï¼</p>
]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>npmå’Œyarnæ¢æˆæ·˜å®æºä»æŠ¥é”™npm ERR! code ETIMEDOUTå’Œinfo There appears to be trouble with your network......</title>
    <url>/2023/07/18/%E5%89%8D%E7%AB%AF/npmerror/</url>
    <content><![CDATA[<h1 id="é—®é¢˜é˜è¿°"><a href="#é—®é¢˜é˜è¿°" class="headerlink" title="é—®é¢˜é˜è¿°"></a>é—®é¢˜é˜è¿°</h1><p>æœ€è¿‘åœ¨æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªå‰åç«¯åˆ†ç¦»é¡¹ç›®çš„æ—¶å€™é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œnpmå‘½ä»¤æ— æ³•ä½¿ç”¨æ€»æ˜¯æ˜¾ç¤ºç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œç”±äºå®˜æ–¹æºåœ¨å›½å¤–ï¼Œæˆ‘äºæ˜¯é…ç½®å›½å†…æ·˜å®é•œåƒæ¥æå‡ä¸‹è½½é€Ÿåº¦ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®æ·˜å®é•œåƒæº</span></span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line"><span class="comment">#æ£€æŸ¥æ˜¯å¦è®¾ç½®æˆåŠŸ</span></span><br><span class="line">npm get registry  </span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ä¹Ÿå°†yarnè®¾ç½®äº†æ·˜å®é•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®æ·˜å®é•œåƒæº</span></span><br><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line"><span class="comment">#æ£€æŸ¥æ˜¯å¦è®¾ç½®æˆåŠŸ</span></span><br><span class="line">yarn config get registry   </span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä¸‹è½½cgré•œåƒæºç®¡ç†å·¥å…·ï¼ˆå‰ææ˜¯ä½ èƒ½ç”¨npmä¸‹è½½ï¼‰æ¥æ–¹ä¾¿ç®¡ç†ï¼š</p>
<ol>
<li>å®‰è£… cgr<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g cgr</span><br></pre></td></tr></table></figure></li>
<li>åˆ—å‡ºå½“å‰å¯ç”¨çš„é•œåƒæº</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cgr <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm ---- https://registry.npmjs.org/</span><br><span class="line">cnpm --- http://r.cnpmjs.org/</span><br><span class="line">taobao - https://registry.npmmirror.com/</span><br><span class="line">yarn --- https://registry.yarnpkg.com/</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>é€‰æ‹©ä¸€ä¸ªé•œåƒæºè¿›è¡Œåˆ‡æ¢ï¼ˆæ·˜å®ï¼‰</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cgr use taobao</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm registry has been set to: https://registry.npmmirror.com/</span><br><span class="line">yarn registry has been set to: https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>æµ‹è¯•è®¿é—®é€Ÿåº¦<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cgr <span class="built_in">test</span> taobao</span><br></pre></td></tr></table></figure>
ä½†æ˜¯å½“æˆ‘æ¢æºä¹‹åé‡åˆ°äº†ä»¥ä¸‹é—®é¢˜ï¼š</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/96422206011d43778ae782b4d905fd87.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/0869e3efb67f461a926019d549b6ec9c.png"></p>
<p>ä¸¤ä¸ªåŒ…ç®¡ç†å·¥å…·ä¸‹è½½éƒ½æŠ¥ç±»ä¼¼çš„é”™è¯¯ï¼šERR!network reguest to <a href="https://registry.npumirror/">https://registry.npumirror</a>. com&#x2F;yarn failed, reason: connect ETIMEDOUT 240c:c0a9:1600:1:3::3ie:443</p>
<h1 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h1><p>å¯èƒ½æ˜¯ipv6ç½‘ç»œè¿æ¥ä¸ç¨³å®šï¼Œå¯¼è‡´ä¸‹è½½è¿æ¥å¼‚å¸¸ã€‚æœ€åçš„è§£å†³åŠæ³•æ˜¯å°†æœ¬åœ°WLANå±æ€§çš„ipv6å…³æ‰ï¼Œè¿™æ ·æ‰èƒ½ä¸‹è½½ï¼Œå½“ç„¶é•œåƒæºè¿˜æ˜¯å¾—è®¾ç½®ä¸ºæ·˜å®æºã€‚</p>
<h2 id="æ‰“å¼€æœ¬åœ°æ§åˆ¶é¢æ¿ï¼Œå¹¶ç‚¹å‡»ç½‘ç»œå’Œ-Internet"><a href="#æ‰“å¼€æœ¬åœ°æ§åˆ¶é¢æ¿ï¼Œå¹¶ç‚¹å‡»ç½‘ç»œå’Œ-Internet" class="headerlink" title="æ‰“å¼€æœ¬åœ°æ§åˆ¶é¢æ¿ï¼Œå¹¶ç‚¹å‡»ç½‘ç»œå’Œ Internet"></a>æ‰“å¼€æœ¬åœ°æ§åˆ¶é¢æ¿ï¼Œå¹¶ç‚¹å‡»ç½‘ç»œå’Œ Internet</h2><p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/71b1033d47dd449d9f35d9396740332b.png"><br><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/99281b560152401782d58f3fe173e93a.png"></p>
<h2 id="ç‚¹å‡»ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒï¼Œå†ç‚¹å‡»æ›´æ”¹é€‚é…å™¨è®¾ç½®"><a href="#ç‚¹å‡»ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒï¼Œå†ç‚¹å‡»æ›´æ”¹é€‚é…å™¨è®¾ç½®" class="headerlink" title="ç‚¹å‡»ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒï¼Œå†ç‚¹å‡»æ›´æ”¹é€‚é…å™¨è®¾ç½®"></a>ç‚¹å‡»ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒï¼Œå†ç‚¹å‡»æ›´æ”¹é€‚é…å™¨è®¾ç½®</h2><p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/a7c68da883b34c7a855d5d281e2c4b47.png"><br><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/715771c87ec040d3bb7c5462fce81240.png"></p>
<h2 id="å³é”®ç‚¹å‡»WLANï¼Œå†ç‚¹å‡»å±æ€§"><a href="#å³é”®ç‚¹å‡»WLANï¼Œå†ç‚¹å‡»å±æ€§" class="headerlink" title="å³é”®ç‚¹å‡»WLANï¼Œå†ç‚¹å‡»å±æ€§"></a>å³é”®ç‚¹å‡»WLANï¼Œå†ç‚¹å‡»å±æ€§</h2><p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/a6a4b39664fc48f3ac0d841f00a8eea0.png"></p>
<h2 id="å–æ¶ˆipv6ï¼Œä¸å‹¾é€‰"><a href="#å–æ¶ˆipv6ï¼Œä¸å‹¾é€‰" class="headerlink" title="å–æ¶ˆipv6ï¼Œä¸å‹¾é€‰"></a>å–æ¶ˆipv6ï¼Œä¸å‹¾é€‰</h2><p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/c8770a0ca77a40b79a447b00d23e6d23.png"></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤npmå’Œyarnä¾¿èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œé—®é¢˜å¾—åˆ°è§£å†³ï¼Œå…¶å®æœ€å¼€å§‹æˆ‘å°†npmçš„é•œåƒæºè®¾ç½®ä¸ºåä¸ºæº<code>https://mirrors.huaweicloud.com/repository/npm/</code>ï¼Œipv6ä¹Ÿæ²¡æœ‰å…³é—­ï¼Œyarnä¹Ÿè®¾ç½®ä¸ºåä¸ºæºï¼Œä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯npmèƒ½ç”¨è€Œyarnç”¨ä¸äº†ï¼Œç›´åˆ°å…³é—­ipv6ï¼Œä¸¤ä¸ªæºéƒ½æ”¹æˆæ·˜å®æºæ‰èƒ½æ­£å¸¸ä¸‹è½½ä¾èµ–åŒ…ï¼Œç”¨npmå’Œyarnä¸‹è½½ä¾èµ–åŒ…çš„é—®é¢˜å›°æ‰°äº†æˆ‘6ä¸ªå¤šå°æ—¶ï¼Œæ•…æœ‰æ„Ÿè€Œå‘å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œç•™ç»™é‚£äº›é‡åˆ°ç±»ä¼¼é—®é¢˜è€Œæœªèƒ½è§£å†³çš„coderï¼ŒèŠ‚çœå¼€å‘æ—¶é—´ã€‚</p>
]]></content>
      <tags>
        <tag>å¤§äºŒè‡ªå­¦</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>éƒ¨ç½²å¼€æºé¡¹ç›® Casdoor èº«ä»½è®¤è¯ç®¡ç†ç³»ç»Ÿåˆ°æœ¬åœ°</title>
    <url>/2023/07/18/Go/casdoor/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><a href="https://github.com/casdoor/casdoor">Casdoor</a>æ˜¯ä¸€ä¸ªåŸºäºOAuth 2.0ã€OIDCã€SAML å’Œ CAS çš„ï¼ŒUI-firstçš„èº«ä»½å’Œè®¿é—®ç®¡ç†(IAM)&#x2F;å•ç‚¹ç™»å½•(SSO)å¹³å°ã€‚ä½¿ç”¨ Go å’Œreactå¼€å‘ï¼Œå‰åç«¯åˆ†ç¦»ï¼Œå†…ç½®ç¬¬ä¸‰æ–¹åº”ç”¨ç™»å½•ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/c6d8b07cf2ea4ac095ea194cbbbf2e4d.png"><br>Casdoor æœ‰å››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯ <code>ç»„ç»‡(Organization)</code>ï¼Œ<code>ç”¨æˆ·(User)</code>ï¼Œ<code>åº”ç”¨(Application)</code> å’Œ <code>æä¾›å•†(Provider)</code>ã€‚ç»„ç»‡æ‰¿è½½ç”¨æˆ·å’Œåº”ç”¨ï¼Œä¸€ä¸ªç”¨æˆ·åªèƒ½éš¶å±äºä¸€ä¸ªç»„ç»‡ï¼Œä½†å¯ä»¥ç™»å½•åˆ°è‡ªå·±ç»„ç»‡çš„å¤šä¸ªåº”ç”¨ä¸­ï¼›è€Œæä¾›å•†åˆ™ä»£è¡¨äº†æŸç§èº«ä»½éªŒè¯æ–¹å¼ï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶éªŒè¯ã€çŸ­ä¿¡éªŒè¯ã€OAuth éªŒè¯ç­‰ã€‚</p>
<h1 id="éƒ¨ç½²-Casdoor"><a href="#éƒ¨ç½²-Casdoor" class="headerlink" title="éƒ¨ç½² Casdoor"></a>éƒ¨ç½² Casdoor</h1><h2 id="å®‰è£…è¦æ±‚"><a href="#å®‰è£…è¦æ±‚" class="headerlink" title="å®‰è£…è¦æ±‚"></a>å®‰è£…è¦æ±‚</h2><h3 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h3><p>æ”¯æŒæ‰€æœ‰ä¸»æµçš„æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬Windowsã€Linuxå’ŒmacOSã€‚</p>
<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul>
<li>Go 1.17+</li>
<li>Node.js LTS (16æˆ–14)</li>
<li>Yarn 1.x</li>
</ul>
<blockquote>
<p>å¼ºçƒˆå»ºè®®æ‚¨ä½¿ç”¨ Yarn 1.x è¿è¡Œ Casdoor å‰ç«¯ï¼Œä½¿ç”¨ NPMå¯èƒ½ä¼šå¯¼è‡´UI é£æ ¼é—®é¢˜ã€‚ </p>
</blockquote>
<blockquote>
<p>æ³¨æ„ï¼šå¯¹äºä¸­å›½å¤§é™†ç”¨æˆ·ï¼Œä¸ºäº†æˆåŠŸä¸‹è½½ä¾èµ–å…³ç³»åŒ…ï¼Œ æ‚¨éœ€è¦é€šè¿‡é…ç½® GOPROXY ç¯å¢ƒå˜é‡æ¥ä½¿ç”¨Go ä»£ç†ã€‚ We strongly recommend: <a href="https://goproxy.cn/">https://goproxy.cn/</a></p>
</blockquote>
<h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><p>Casdoorä½¿ç”¨ XORM ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚ åŸºäº Xorm Drivers Support, å½“å‰æ”¯æŒçš„æ•°æ®åº“åŒ…æ‹¬ï¼š</p>
<ul>
<li>MySQL</li>
<li>MariaDB</li>
<li>PostgreSQL</li>
<li>CockroachDB</li>
<li>SQL Server</li>
<li>Oracle</li>
<li>SQLite 3</li>
<li>TiDB</li>
</ul>
<h3 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h3><p>The source code of Casdoor is hosted at GitHub: <a href="https://github.com/casdoor/casdoor">https://github.com/casdoor/casdoor</a>. Go åç«¯ä»£ç å’Œ React å‰ç«¯ä»£ç éƒ½åœ¨å•ä¸ªä»“åº“ä¸­ã€‚</p>
<table>
<thead>
<tr>
<th align="center">åç§°</th>
<th align="center">æè¿°</th>
<th align="center">è¯­è¨€</th>
<th align="center">æºä»£ç </th>
</tr>
</thead>
<tbody><tr>
<td align="center">å‰ç«¯</td>
<td align="center">Casdoorçš„ç½‘é¡µå‰ç«¯ç•Œé¢</td>
<td align="center">JavaScript + React</td>
<td align="center"><a href="https://github.com/casdoor/casdoor/tree/master/web">https://github.com/casdoor/casdoor/tree/master/web</a></td>
</tr>
<tr>
<td align="center">åç«¯</td>
<td align="center">Casdoorçš„ResTful API åç«¯</td>
<td align="center">Golang + Beego + XORM</td>
<td align="center"><a href="https://github.com/casdoor/casdoor">https://github.com/casdoor/casdoor</a></td>
</tr>
</tbody></table>
<p>Casdooræ”¯æŒ Go Modulesã€‚ è¦ä¸‹è½½ä»£ç ï¼Œæ‚¨ç›´æ¥é€šè¿‡gitå…‹éš†ä»“åº“å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /æ–‡ä»¶å¤¹è·¯å¾„/</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/casdoor/casdoor</span><br></pre></td></tr></table></figure>
<p>å…‹éš†ä»“åº“è¿‡åï¼Œå‰ç«¯é¡µé¢å°±åœ¨webæ–‡ä»¶å¤¹é‡Œã€‚</p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="é…ç½®æ•°æ®åº“"><a href="#é…ç½®æ•°æ®åº“" class="headerlink" title="é…ç½®æ•°æ®åº“"></a>é…ç½®æ•°æ®åº“</h3><p>Casdooræ”¯æŒMySQLï¼Œ msSQLï¼ŒSqlite3ï¼ŒPostgreSQLç­‰æ•°æ®åº“ã€‚ é»˜è®¤ä½¿ç”¨MySQLã€‚ å¦‚æœæ‚¨æƒ³ä½¿ç”¨æ”¯æŒä»¥å¤–çš„æ•°æ®åº“ï¼Œè¯·è‡ªè¡Œä¿®æ”¹object&#x2F;adapteråŒ…</p>
<ul>
<li>MySQL<br>  Casdoorå°†ä¼šæŠŠusersï¼Œnodeså’Œtopicsä¿¡æ¯å­˜å‚¨åœ¨ä¸€ä¸ªå‘½åä¸ºcasdoorçš„MySQLæ•°æ®åº“ä¸­ã€‚ å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™éœ€æ‰‹åŠ¨åˆ›å»ºã€‚ The DB connection string can be specified at: <a href="https://github.com/casdoor/casdoor/blob/master/conf/app.conf">https://github.com/casdoor/casdoor/blob/master/conf/app.conf</a><br>  å‰å¾€ .&#x2F;conf&#x2F;app.conf é…ç½®æ•°æ®åº“ä¿¡æ¯ï¼Œä¾‹å¦‚å¯¹äº MySQLï¼Œä½¿ç”¨å¦‚ä¸‹çš„é…ç½®æ–‡ä»¶ï¼š  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">driverName = mysql</span><br><span class="line">dataSourceName = root:123456@tcp(localhost:3306)/</span><br><span class="line">dbName = casdoor</span><br></pre></td></tr></table></figure>
  æ­¤æ–‡ä»¶ä¹ŸåŒ…å«è®¸å¤šå…¶ä»–ä¸ªæ€§åŒ–é…ç½®ï¼Œæœ‰éœ€è¦çš„å¯æ ¹æ®å®˜æ–¹æ–‡æ¡£ä¿®æ”¹ã€‚</li>
</ul>
<h2 id="ç¼–è¯‘è¿è¡Œcasdoor"><a href="#ç¼–è¯‘è¿è¡Œcasdoor" class="headerlink" title="ç¼–è¯‘è¿è¡Œcasdoor"></a>ç¼–è¯‘è¿è¡Œcasdoor</h2><p>é¦–å…ˆç¡®ä¿ä½ çš„ç”µè„‘ä¸‹è½½äº†yarnï¼Œä¸‹è½½æ•™ç¨‹å‚è§å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://classic.yarnpkg.com/en/docs/install#windows-stable">https://classic.yarnpkg.com/en/docs/install#windows-stable</a><br>ç®€å•æ¥è¯´å°±æ˜¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install yarn -g</span><br></pre></td></tr></table></figure>
<ul>
<li><p>è‹¥æƒ³å°† Casdoor è¿è¡Œåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œåˆ™åˆ†åˆ«è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ä»¥ç¼–è¯‘å¹¶è¿è¡Œ Casdoor çš„å‰ç«¯å’Œåç«¯æœåŠ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> web</span><br><span class="line">yarn install</span><br><span class="line">yarn start</span><br><span class="line">go run main.go</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œå³å¯åœ¨ <a href="http://localhost:7001/">http://localhost:7001/</a> è®¿é—® Casdoorï¼ˆé»˜è®¤çš„ç®¡ç†å‘˜ç”¨æˆ·åå’Œå¯†ç ä¸º admin å’Œ 123ï¼‰ã€‚</p>
</li>
<li><p>è‹¥æƒ³å°† Casdoor è¿è¡Œåœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œåˆ™é¦–å…ˆè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ç¼–è¯‘å‰ç«¯æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> web</span><br><span class="line">yarn install</span><br><span class="line">yarn build</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œç¼–è¯‘å¹¶è¿è¡Œ Casdoor çš„åç«¯ç¨‹åºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go build</span><br><span class="line">./casdoor</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œå³å¯åœ¨ <a href="http://localhost:8000/">http://localhost:8000/</a> è®¿é—® Casdoorï¼ˆé»˜è®¤çš„ç®¡ç†å‘˜ç”¨æˆ·åå’Œå¯†ç ä¸º admin å’Œ 123ï¼‰ã€‚</p>
</li>
</ul>
<p>psï¼šå¦‚æœnpmå’Œyarnä¸‹è½½åŒ…å¼‚å¸¸å¯ä»¥å‚è§è¿™ç¯‡æ–‡ç« ï¼š<a href="https://blog.csdn.net/m0_63230155/article/details/131786214?spm=1001.2014.3001.5502">npmå’Œyarnæ¢æˆæ·˜å®æºä»æŠ¥é”™npm ERR! code ETIMEDOUTå’Œinfo There appears to be trouble with your networkâ€¦â€¦</a></p>
<h1 id="æˆæœ"><a href="#æˆæœ" class="headerlink" title="æˆæœ"></a>æˆæœ</h1><p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/8b1690ba6dbf4a089c2f2cfbd7a8ae79.png"><br><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/d8e6c8c61e0c4d20a03df2949c660171.png"><br>è‡³æ­¤ï¼Œcasdooré¡¹ç›®éƒ¨ç½²æˆåŠŸã€‚<br>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://casdoor.org/zh/docs/overview">https://casdoor.org/zh/docs/overview</a></p>
]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>æŒ‡é’ˆä¸ç»“æ„ä½“</title>
    <url>/2023/06/05/Go/9/</url>
    <content><![CDATA[<h1 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h1><h2 id="æŒ‡é’ˆçš„æ¦‚å¿µ"><a href="#æŒ‡é’ˆçš„æ¦‚å¿µ" class="headerlink" title="æŒ‡é’ˆçš„æ¦‚å¿µ"></a>æŒ‡é’ˆçš„æ¦‚å¿µ</h2><p>æŒ‡é’ˆæ˜¯å­˜å‚¨å¦ä¸€ä¸ªå˜é‡çš„å†…å­˜åœ°å€çš„å˜é‡ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå˜é‡æ˜¯ä¸€ç§ä½¿ç”¨æ–¹ä¾¿çš„å ä½ç¬¦ï¼Œç”¨äºå¼•ç”¨è®¡ç®—æœºå†…å­˜åœ°å€ã€‚</p>
<p>ä¸€ä¸ªæŒ‡é’ˆå˜é‡å¯ä»¥æŒ‡å‘ä»»ä½•ä¸€ä¸ªå€¼çš„å†…å­˜åœ°å€ã€‚</p>
<h2 id="è·å–å˜é‡çš„åœ°å€"><a href="#è·å–å˜é‡çš„åœ°å€" class="headerlink" title="è·å–å˜é‡çš„åœ°å€"></a>è·å–å˜é‡çš„åœ°å€</h2><p>Go è¯­è¨€çš„å–åœ°å€ç¬¦æ˜¯ &amp;ï¼Œæ”¾åˆ°ä¸€ä¸ªå˜é‡å‰ä½¿ç”¨å°±ä¼šè¿”å›ç›¸åº”å˜é‡çš„å†…å­˜åœ°å€ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span>   </span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">&quot;å˜é‡çš„åœ°å€: %x\n&quot;</span>, &amp;a  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å˜é‡çš„åœ°å€: 20818a220</span><br></pre></td></tr></table></figure>

<h2 id="å£°æ˜æŒ‡é’ˆ"><a href="#å£°æ˜æŒ‡é’ˆ" class="headerlink" title="å£°æ˜æŒ‡é’ˆ"></a>å£°æ˜æŒ‡é’ˆ</h2><p>å£°æ˜æŒ‡é’ˆï¼Œ*Tæ˜¯æŒ‡é’ˆå˜é‡çš„ç±»å‹ï¼Œå®ƒæŒ‡å‘Tç±»å‹çš„å€¼ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> var_name *<span class="keyword">var</span>-<span class="keyword">type</span></span><br></pre></td></tr></table></figure>

<p>var-type ä¸ºæŒ‡é’ˆç±»å‹ï¼Œvar_name ä¸ºæŒ‡é’ˆå˜é‡åï¼Œ* å·ç”¨äºæŒ‡å®šå˜é‡æ˜¯ä½œä¸ºä¸€ä¸ªæŒ‡é’ˆã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ip *<span class="type">int</span>        <span class="comment">/* æŒ‡å‘æ•´å‹*/</span></span><br><span class="line"><span class="keyword">var</span> fp *<span class="type">float32</span>    <span class="comment">/* æŒ‡å‘æµ®ç‚¹å‹ */</span></span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span>= <span class="number">20</span>   <span class="comment">/* å£°æ˜å®é™…å˜é‡ */</span></span><br><span class="line">   <span class="keyword">var</span> ip *<span class="type">int</span>        <span class="comment">/* å£°æ˜æŒ‡é’ˆå˜é‡ */</span></span><br><span class="line"></span><br><span class="line">   ip = &amp;a  <span class="comment">/* æŒ‡é’ˆå˜é‡çš„å­˜å‚¨åœ°å€ */</span></span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">&quot;a å˜é‡çš„åœ°å€æ˜¯: %x\n&quot;</span>, &amp;a  )</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æŒ‡é’ˆå˜é‡çš„å­˜å‚¨åœ°å€ */</span></span><br><span class="line">   fmt.Printf(<span class="string">&quot;ip å˜é‡çš„å­˜å‚¨åœ°å€: %x\n&quot;</span>, ip )</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* ä½¿ç”¨æŒ‡é’ˆè®¿é—®å€¼ */</span></span><br><span class="line">   fmt.Printf(<span class="string">&quot;*ip å˜é‡çš„å€¼: %d\n&quot;</span>, *ip )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a å˜é‡çš„åœ°å€æ˜¯: <span class="number">20818</span>a220</span><br><span class="line">ip å˜é‡çš„å­˜å‚¨åœ°å€: <span class="number">20818</span>a220</span><br><span class="line">*ip å˜é‡çš„å€¼: <span class="number">20</span></span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> name <span class="type">int8</span></span><br><span class="line"><span class="keyword">type</span> first <span class="keyword">struct</span> &#123;</span><br><span class="line">	a <span class="type">int</span></span><br><span class="line">	b <span class="type">bool</span></span><br><span class="line">	name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a = first&#123;<span class="number">1</span>, <span class="literal">false</span>, <span class="number">2</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> b *first = &amp;a</span><br><span class="line">	fmt.Println(a.b, a.a, a.name, &amp;a, b.a, &amp;b, (*b).a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">false 1 2 &amp;&#123;1 false 2&#125; 1 0xc042068018 1</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è·å–æŒ‡é’ˆåœ°å€åœ¨æŒ‡é’ˆå˜é‡å‰åŠ &amp;çš„æ–¹å¼</p>
</blockquote>
<h2 id="ç©ºæŒ‡é’ˆ"><a href="#ç©ºæŒ‡é’ˆ" class="headerlink" title="ç©ºæŒ‡é’ˆ"></a>ç©ºæŒ‡é’ˆ</h2><p><strong>Go ç©ºæŒ‡é’ˆ</strong><br>å½“ä¸€ä¸ªæŒ‡é’ˆè¢«å®šä¹‰åæ²¡æœ‰åˆ†é…åˆ°ä»»ä½•å˜é‡æ—¶ï¼Œå®ƒçš„å€¼ä¸º nilã€‚<br>nil æŒ‡é’ˆä¹Ÿç§°ä¸ºç©ºæŒ‡é’ˆã€‚<br>nilåœ¨æ¦‚å¿µä¸Šå’Œå…¶å®ƒè¯­è¨€çš„nullã€Noneã€nilã€NULLä¸€æ ·ï¼Œéƒ½æŒ‡ä»£é›¶å€¼æˆ–ç©ºå€¼ã€‚<br>ä¸€ä¸ªæŒ‡é’ˆå˜é‡é€šå¸¸ç¼©å†™ä¸º ptrã€‚</p>
<p>ç©ºæŒ‡é’ˆåˆ¤æ–­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(ptr != <span class="literal">nil</span>)     <span class="comment">/* ptr ä¸æ˜¯ç©ºæŒ‡é’ˆ */</span></span><br><span class="line"><span class="keyword">if</span>(ptr == <span class="literal">nil</span>)    <span class="comment">/* ptr æ˜¯ç©ºæŒ‡é’ˆ */</span></span><br></pre></td></tr></table></figure>

<h2 id="è·å–æŒ‡é’ˆçš„å€¼"><a href="#è·å–æŒ‡é’ˆçš„å€¼" class="headerlink" title="è·å–æŒ‡é’ˆçš„å€¼"></a>è·å–æŒ‡é’ˆçš„å€¼</h2><p>è·å–ä¸€ä¸ªæŒ‡é’ˆæ„å‘³ç€è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„å˜é‡çš„å€¼ã€‚è¯­æ³•æ˜¯ï¼š*a</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main  </span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    b := <span class="number">255</span></span><br><span class="line">    a := &amp;b</span><br><span class="line">    fmt.Println(<span class="string">&quot;address of b is&quot;</span>, a)</span><br><span class="line">    fmt.Println(<span class="string">&quot;value of b is&quot;</span>, *a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ“ä½œæŒ‡é’ˆæ”¹å˜å˜é‡çš„æ•°å€¼"><a href="#æ“ä½œæŒ‡é’ˆæ”¹å˜å˜é‡çš„æ•°å€¼" class="headerlink" title="æ“ä½œæŒ‡é’ˆæ”¹å˜å˜é‡çš„æ•°å€¼"></a>æ“ä½œæŒ‡é’ˆæ”¹å˜å˜é‡çš„æ•°å€¼</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    b := <span class="number">255</span></span><br><span class="line">    a := &amp;b</span><br><span class="line">    fmt.Println(<span class="string">&quot;address of b is&quot;</span>, a)</span><br><span class="line">    fmt.Println(<span class="string">&quot;value of b is&quot;</span>, *a)</span><br><span class="line">    *a++</span><br><span class="line">    fmt.Println(<span class="string">&quot;new value of b is&quot;</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">address of b is 0x1040a124  </span><br><span class="line">value of b is 255  </span><br><span class="line">new value of b is 256  </span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨æŒ‡é’ˆä¼ é€’å‡½æ•°çš„å‚æ•°"><a href="#ä½¿ç”¨æŒ‡é’ˆä¼ é€’å‡½æ•°çš„å‚æ•°" class="headerlink" title="ä½¿ç”¨æŒ‡é’ˆä¼ é€’å‡½æ•°çš„å‚æ•°"></a>ä½¿ç”¨æŒ‡é’ˆä¼ é€’å‡½æ•°çš„å‚æ•°</h2><p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">(val *<span class="type">int</span>)</span></span> &#123;  </span><br><span class="line">    *val = <span class="number">55</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := <span class="number">58</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;value of a before function call is&quot;</span>,a)</span><br><span class="line">    b := &amp;a</span><br><span class="line">    change(b)</span><br><span class="line">    fmt.Println(<span class="string">&quot;value of a after function call is&quot;</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">value of a before function call is 58  </span><br><span class="line">value of a after function call is 55  </span><br></pre></td></tr></table></figure>

<p><strong>ä¸è¦å°†ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆä¼ é€’ç»™å‡½æ•°ã€‚ä½¿ç”¨åˆ‡ç‰‡ã€‚</strong></p>
<p>å‡è®¾æˆ‘ä»¬æƒ³å¯¹å‡½æ•°å†…çš„æ•°ç»„è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œå¹¶ä¸”å¯¹è°ƒç”¨è€…å¯ä»¥çœ‹åˆ°å‡½æ•°å†…çš„æ•°ç»„æ‰€åšçš„æ›´æ”¹ã€‚ä¸€ç§æ–¹æ³•æ˜¯å°†ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆä¼ é€’ç»™å‡½æ•°ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify</span><span class="params">(arr *[3]<span class="type">int</span>)</span></span> &#123;  </span><br><span class="line">    (*arr)[<span class="number">0</span>] = <span class="number">90</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">89</span>, <span class="number">90</span>, <span class="number">91</span>&#125;</span><br><span class="line">    modify(&amp;a)</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[90 90 91]</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify</span><span class="params">(arr *[3]<span class="type">int</span>)</span></span> &#123;  </span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">90</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">89</span>, <span class="number">90</span>, <span class="number">91</span>&#125;</span><br><span class="line">    modify(&amp;a)</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[90 90 91]</span><br></pre></td></tr></table></figure>

<p><strong>è™½ç„¶å°†æŒ‡é’ˆä¼ é€’ç»™ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•°å¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œä½†è¿™å¹¶ä¸æ˜¯å®ç°è¿™ä¸€ç›®æ ‡çš„æƒ¯ç”¨æ–¹æ³•ã€‚æˆ‘ä»¬æœ‰åˆ‡ç‰‡ã€‚</strong></p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify</span><span class="params">(sls []<span class="type">int</span>)</span></span> &#123;  </span><br><span class="line">    sls[<span class="number">0</span>] = <span class="number">90</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    a := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">89</span>, <span class="number">90</span>, <span class="number">91</span>&#125;</span><br><span class="line">    modify(a[:])</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[90 90 91]</span><br></pre></td></tr></table></figure>



<p>Goä¸æ”¯æŒæŒ‡é’ˆç®—æ³•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">b := [...]<span class="type">int</span>&#123;<span class="number">109</span>, <span class="number">110</span>, <span class="number">111</span>&#125;</span><br><span class="line">p := &amp;b</span><br><span class="line">p++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>nvalid operation: p++ (non-numeric type *[3]int)</p>
</blockquote>
<p><strong>æŒ‡é’ˆæ•°ç»„</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MAX <span class="type">int</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   a := []<span class="type">int</span>&#123;<span class="number">10</span>,<span class="number">100</span>,<span class="number">200</span>&#125;</span><br><span class="line">   <span class="keyword">var</span> i <span class="type">int</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> i = <span class="number">0</span>; i &lt; MAX; i++ &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;a[%d] = %d\n&quot;</span>, i, a[i] )</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a[<span class="number">0</span>] = <span class="number">10</span></span><br><span class="line">a[<span class="number">1</span>] = <span class="number">100</span></span><br><span class="line">a[<span class="number">2</span>] = <span class="number">200</span></span><br></pre></td></tr></table></figure>

<p>æœ‰ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¿å­˜æ•°ç»„ï¼Œè¿™æ ·æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ°æŒ‡é’ˆã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MAX <span class="type">int</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := []<span class="type">int</span>&#123;<span class="number">10</span>, <span class="number">100</span>, <span class="number">200</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> i <span class="type">int</span></span><br><span class="line">	<span class="keyword">var</span> ptr [MAX]*<span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">0</span>; i &lt; MAX; i++ &#123;</span><br><span class="line">		ptr[i] = &amp;a[i] <span class="comment">/* æ•´æ•°åœ°å€èµ‹å€¼ç»™æŒ‡é’ˆæ•°ç»„ */</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">0</span>; i &lt; MAX; i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;a[%d] = %d\n&quot;</span>, i, *ptr[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a[<span class="number">0</span>] = <span class="number">10</span></span><br><span class="line">a[<span class="number">1</span>] = <span class="number">100</span></span><br><span class="line">a[<span class="number">2</span>] = <span class="number">200</span></span><br></pre></td></tr></table></figure>

<h2 id="æŒ‡é’ˆçš„æŒ‡é’ˆ"><a href="#æŒ‡é’ˆçš„æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆçš„æŒ‡é’ˆ"></a>æŒ‡é’ˆçš„æŒ‡é’ˆ</h2><p><strong>æŒ‡é’ˆçš„æŒ‡é’ˆ</strong></p>
<p>å¦‚æœä¸€ä¸ªæŒ‡é’ˆå˜é‡å­˜æ”¾çš„åˆæ˜¯å¦ä¸€ä¸ªæŒ‡é’ˆå˜é‡çš„åœ°å€ï¼Œåˆ™ç§°è¿™ä¸ªæŒ‡é’ˆå˜é‡ä¸ºæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆå˜é‡ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ptr **<span class="type">int</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">   <span class="keyword">var</span> ptr *<span class="type">int</span></span><br><span class="line">   <span class="keyword">var</span> pptr **<span class="type">int</span></span><br><span class="line"></span><br><span class="line">   a = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æŒ‡é’ˆ ptr åœ°å€ */</span></span><br><span class="line">   ptr = &amp;a</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æŒ‡å‘æŒ‡é’ˆ ptr åœ°å€ */</span></span><br><span class="line">   pptr = &amp;ptr</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* è·å– pptr çš„å€¼ */</span></span><br><span class="line">   fmt.Printf(<span class="string">&quot;å˜é‡ a = %d\n&quot;</span>, a )</span><br><span class="line">   fmt.Printf(<span class="string">&quot;æŒ‡é’ˆå˜é‡ *ptr = %d\n&quot;</span>, *ptr )</span><br><span class="line">   fmt.Printf(<span class="string">&quot;æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆå˜é‡ **pptr = %d\n&quot;</span>, **pptr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å˜é‡ a = 3000</span><br><span class="line">æŒ‡é’ˆå˜é‡ *ptr = 3000</span><br><span class="line">æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆå˜é‡ **pptr = 3000</span><br></pre></td></tr></table></figure>

<p><strong>æŒ‡é’ˆä½œä¸ºå‡½æ•°å‚æ•°</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">/* å®šä¹‰å±€éƒ¨å˜é‡ */</span></span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">100</span></span><br><span class="line">   <span class="keyword">var</span> b <span class="type">int</span>= <span class="number">200</span></span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">&quot;äº¤æ¢å‰ a çš„å€¼ : %d\n&quot;</span>, a )</span><br><span class="line">   fmt.Printf(<span class="string">&quot;äº¤æ¢å‰ b çš„å€¼ : %d\n&quot;</span>, b )</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* è°ƒç”¨å‡½æ•°ç”¨äºäº¤æ¢å€¼</span></span><br><span class="line"><span class="comment">   * &amp;a æŒ‡å‘ a å˜é‡çš„åœ°å€</span></span><br><span class="line"><span class="comment">   * &amp;b æŒ‡å‘ b å˜é‡çš„åœ°å€</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   swap(&amp;a, &amp;b);</span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">&quot;äº¤æ¢å a çš„å€¼ : %d\n&quot;</span>, a )</span><br><span class="line">   fmt.Printf(<span class="string">&quot;äº¤æ¢å b çš„å€¼ : %d\n&quot;</span>, b )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(x *<span class="type">int</span>, y *<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> temp <span class="type">int</span></span><br><span class="line">   temp = *x    <span class="comment">/* ä¿å­˜ x åœ°å€çš„å€¼ */</span></span><br><span class="line">   *x = *y      <span class="comment">/* å°† y èµ‹å€¼ç»™ x */</span></span><br><span class="line">   *y = temp    <span class="comment">/* å°† temp èµ‹å€¼ç»™ y */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">äº¤æ¢å‰ a çš„å€¼ : 100</span><br><span class="line">äº¤æ¢å‰ b çš„å€¼ : 200</span><br><span class="line">äº¤æ¢å a çš„å€¼ : 200</span><br><span class="line">äº¤æ¢å b çš„å€¼ : 100</span><br></pre></td></tr></table></figure>

<h1 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h1><h2 id="ä»€ä¹ˆæ˜¯ç»“æ„ä½“"><a href="#ä»€ä¹ˆæ˜¯ç»“æ„ä½“" class="headerlink" title="ä»€ä¹ˆæ˜¯ç»“æ„ä½“"></a>ä»€ä¹ˆæ˜¯ç»“æ„ä½“</h2><p>Go è¯­è¨€ä¸­æ•°ç»„å¯ä»¥å­˜å‚¨åŒä¸€ç±»å‹çš„æ•°æ®ï¼Œä½†åœ¨ç»“æ„ä½“ä¸­æˆ‘ä»¬å¯ä»¥ä¸ºä¸åŒé¡¹å®šä¹‰ä¸åŒçš„æ•°æ®ç±»å‹ã€‚<br>ç»“æ„ä½“æ˜¯ç”±ä¸€ç³»åˆ—å…·æœ‰ç›¸åŒç±»å‹æˆ–ä¸åŒç±»å‹çš„æ•°æ®æ„æˆçš„æ•°æ®é›†åˆã€‚</p>
<h2 id="ç»“æ„ä½“çš„å®šä¹‰å’Œåˆå§‹åŒ–"><a href="#ç»“æ„ä½“çš„å®šä¹‰å’Œåˆå§‹åŒ–" class="headerlink" title="ç»“æ„ä½“çš„å®šä¹‰å’Œåˆå§‹åŒ–"></a>ç»“æ„ä½“çš„å®šä¹‰å’Œåˆå§‹åŒ–</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> struct_variable_type <span class="keyword">struct</span> &#123;</span><br><span class="line">   member definition;</span><br><span class="line">   member definition;</span><br><span class="line">   ...</span><br><span class="line">   member definition;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦å®šä¹‰äº†ç»“æ„ä½“ç±»å‹ï¼Œå®ƒå°±èƒ½ç”¨äºå˜é‡çš„å£°æ˜</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">variable_name := structure_variable_type &#123;value1, value2...valuen&#125;</span><br></pre></td></tr></table></figure>

<p><strong>åˆå§‹åŒ–ç»“æ„ä½“</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.æŒ‰ç…§é¡ºåºæä¾›åˆå§‹åŒ–å€¼</span></span><br><span class="line">P := person&#123;<span class="string">&quot;Tom&quot;</span>, <span class="number">25</span>&#125;</span><br><span class="line"><span class="comment">// 2.é€šè¿‡field:valueçš„æ–¹å¼åˆå§‹åŒ–ï¼Œè¿™æ ·å¯ä»¥ä»»æ„é¡ºåº</span></span><br><span class="line">P := person&#123;age:<span class="number">24</span>, name:<span class="string">&quot;Tom&quot;</span>&#125;</span><br><span class="line"><span class="comment">// 3.newæ–¹å¼,æœªè®¾ç½®åˆå§‹å€¼çš„ï¼Œä¼šèµ‹äºˆç±»å‹çš„é»˜è®¤åˆå§‹å€¼</span></span><br><span class="line">p := <span class="built_in">new</span>(person)</span><br><span class="line">p.age=<span class="number">24</span></span><br></pre></td></tr></table></figure>

<h2 id="ç»“æ„ä½“çš„è®¿é—®"><a href="#ç»“æ„ä½“çš„è®¿é—®" class="headerlink" title="ç»“æ„ä½“çš„è®¿é—®"></a>ç»“æ„ä½“çš„è®¿é—®</h2><p>è®¿é—®ç»“æ„ä½“æˆå‘˜(è®¿é—®ç»“æ„çš„å„ä¸ªå­—æ®µ)</p>
<p>é€šè¿‡ç‚¹.æ“ä½œç¬¦ç”¨äºè®¿é—®ç»“æ„çš„å„ä¸ªå­—æ®µã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Books <span class="keyword">struct</span> &#123;</span><br><span class="line">   title <span class="type">string</span></span><br><span class="line">   author <span class="type">string</span></span><br><span class="line">   subject <span class="type">string</span></span><br><span class="line">   book_id <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> Book1 Books        <span class="comment">/* å£°æ˜ Book1 ä¸º Books ç±»å‹ */</span></span><br><span class="line">   <span class="keyword">var</span> Book2 Books        <span class="comment">/* å£°æ˜ Book2 ä¸º Books ç±»å‹ */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* book 1 æè¿° */</span></span><br><span class="line">   Book1.title = <span class="string">&quot;Go è¯­è¨€&quot;</span></span><br><span class="line">   Book1.author = <span class="string">&quot;www.runoob.com&quot;</span></span><br><span class="line">   Book1.subject = <span class="string">&quot;Go è¯­è¨€æ•™ç¨‹&quot;</span></span><br><span class="line">   Book1.book_id = <span class="number">6495407</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* book 2 æè¿° */</span></span><br><span class="line">   Book2.title = <span class="string">&quot;Python æ•™ç¨‹&quot;</span></span><br><span class="line">   Book2.author = <span class="string">&quot;www.runoob.com&quot;</span></span><br><span class="line">   Book2.subject = <span class="string">&quot;Python è¯­è¨€æ•™ç¨‹&quot;</span></span><br><span class="line">   Book2.book_id = <span class="number">6495700</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å° Book1 ä¿¡æ¯ */</span></span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book 1 title : %s\n&quot;</span>, Book1.title)</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book 1 author : %s\n&quot;</span>, Book1.author)</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book 1 subject : %s\n&quot;</span>, Book1.subject)</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book 1 book_id : %d\n&quot;</span>, Book1.book_id)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å° Book2 ä¿¡æ¯ */</span></span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book 2 title : %s\n&quot;</span>, Book2.title)</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book 2 author : %s\n&quot;</span>, Book2.author)</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book 2 subject : %s\n&quot;</span>, Book2.subject)</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book 2 book_id : %d\n&quot;</span>, Book2.book_id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Book 1 title : Go è¯­è¨€</span><br><span class="line">Book 1 author : www.runoob.com</span><br><span class="line">Book 1 subject : Go è¯­è¨€æ•™ç¨‹</span><br><span class="line">Book 1 book_id : 6495407</span><br><span class="line">Book 2 title : Python æ•™ç¨‹</span><br><span class="line">Book 2 author : www.runoob.com</span><br><span class="line">Book 2 subject : Python è¯­è¨€æ•™ç¨‹</span><br><span class="line">Book 2 book_id : 6495700</span><br></pre></td></tr></table></figure>

<h2 id="ç»“æ„ä½“æŒ‡é’ˆ"><a href="#ç»“æ„ä½“æŒ‡é’ˆ" class="headerlink" title="ç»“æ„ä½“æŒ‡é’ˆ"></a>ç»“æ„ä½“æŒ‡é’ˆ</h2><p>æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªç»“æ„ä½“ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæŒ‡å‘ç»“æ„çš„æŒ‡é’ˆã€‚</p>
<p><strong>ç»“æ„ä½“æŒ‡é’ˆ</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> struct_pointer *Books</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå®šä¹‰çš„æŒ‡é’ˆå˜é‡å¯ä»¥å­˜å‚¨ç»“æ„ä½“å˜é‡çš„åœ°å€ã€‚æŸ¥çœ‹ç»“æ„ä½“å˜é‡åœ°å€ï¼Œå¯ä»¥å°† &amp; ç¬¦å·æ”¾ç½®äºç»“æ„ä½“å˜é‡å‰</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">struct_pointer = &amp;Book1;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ç»“æ„ä½“æŒ‡é’ˆè®¿é—®ç»“æ„ä½“æˆå‘˜ï¼Œä½¿ç”¨ â€œ.â€ æ“ä½œç¬¦</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">struct_pointer.title;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Books <span class="keyword">struct</span> &#123;</span><br><span class="line">   title <span class="type">string</span></span><br><span class="line">   author <span class="type">string</span></span><br><span class="line">   subject <span class="type">string</span></span><br><span class="line">   book_id <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> Book1 Books        <span class="comment">/* Declare Book1 of type Book */</span></span><br><span class="line">   <span class="keyword">var</span> Book2 Books        <span class="comment">/* Declare Book2 of type Book */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* book 1 æè¿° */</span></span><br><span class="line">   Book1.title = <span class="string">&quot;Go è¯­è¨€&quot;</span></span><br><span class="line">   Book1.author = <span class="string">&quot;www.runoob.com&quot;</span></span><br><span class="line">   Book1.subject = <span class="string">&quot;Go è¯­è¨€æ•™ç¨‹&quot;</span></span><br><span class="line">   Book1.book_id = <span class="number">6495407</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* book 2 æè¿° */</span></span><br><span class="line">   Book2.title = <span class="string">&quot;Python æ•™ç¨‹&quot;</span></span><br><span class="line">   Book2.author = <span class="string">&quot;www.runoob.com&quot;</span></span><br><span class="line">   Book2.subject = <span class="string">&quot;Python è¯­è¨€æ•™ç¨‹&quot;</span></span><br><span class="line">   Book2.book_id = <span class="number">6495700</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å° Book1 ä¿¡æ¯ */</span></span><br><span class="line">   printBook(&amp;Book1)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å° Book2 ä¿¡æ¯ */</span></span><br><span class="line">   printBook(&amp;Book2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printBook</span><span class="params">( book *Books )</span></span> &#123;</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book title : %s\n&quot;</span>, book.title);</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book author : %s\n&quot;</span>, book.author);</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book subject : %s\n&quot;</span>, book.subject);</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book book_id : %d\n&quot;</span>, book.book_id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Book title : Go è¯­è¨€</span><br><span class="line">Book author : www.runoob.com</span><br><span class="line">Book subject : Go è¯­è¨€æ•™ç¨‹</span><br><span class="line">Book book_id : 6495407</span><br><span class="line">Book title : Python æ•™ç¨‹</span><br><span class="line">Book author : www.runoob.com</span><br><span class="line">Book subject : Python è¯­è¨€æ•™ç¨‹</span><br><span class="line">Book book_id : 6495700</span><br></pre></td></tr></table></figure>

<p>ç»“æ„ä½“å®ä¾‹åŒ–ä¹Ÿå¯ä»¥æ˜¯è¿™æ ·çš„</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Books <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s Books)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;data&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, Books&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<p>åœ¨<code>Books</code>ç±»å‹ä¸Šå®šä¹‰äº†ä¸€ä¸ª<code>String</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å…·æœ‰ä¸€ä¸ªæ¥æ”¶è€…<code>(s Books)</code>ï¼Œè¡¨ç¤ºå®ƒæ˜¯<code>Books</code>ç±»å‹çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²<code>&quot;data&quot;</code>ã€‚<code>Books&#123;&#125;</code>åˆ›å»ºäº†ä¸€ä¸ª<code>Books</code>ç±»å‹çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡<code>%v</code>æ‰“å°è¾“å‡ºã€‚ç”±äº<code>Books</code>ç±»å‹å®ç°äº†<code>String</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ï¼Œè¿”å›å­—ç¬¦ä¸²<code>&quot;data&quot;</code>ã€‚</p>
<h2 id="ç»“æ„ä½“çš„åŒ¿åå­—æ®µ"><a href="#ç»“æ„ä½“çš„åŒ¿åå­—æ®µ" class="headerlink" title="ç»“æ„ä½“çš„åŒ¿åå­—æ®µ"></a>ç»“æ„ä½“çš„åŒ¿åå­—æ®µ</h2><p><strong>ç»“æ„ä½“çš„åŒ¿åå­—æ®µ</strong></p>
<p>å¯ä»¥ç”¨å­—æ®µæ¥åˆ›å»ºç»“æ„ï¼Œè¿™äº›å­—æ®µåªåŒ…å«ä¸€ä¸ªæ²¡æœ‰å­—æ®µåçš„ç±»å‹ã€‚è¿™äº›å­—æ®µè¢«ç§°ä¸ºåŒ¿åå­—æ®µã€‚</p>
<p>åœ¨ç±»å‹ä¸­ï¼Œä½¿ç”¨ä¸å†™å­—æ®µåçš„æ–¹å¼ï¼Œä½¿ç”¨å¦ä¸€ä¸ªç±»å‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Human <span class="keyword">struct</span> &#123;</span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">    age <span class="type">int</span></span><br><span class="line">    weight <span class="type">int</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">    Human <span class="comment">// åŒ¿åå­—æ®µï¼Œé‚£ä¹ˆé»˜è®¤Studentå°±åŒ…å«äº†Humançš„æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">    speciality <span class="type">string</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªå­¦ç”Ÿ</span></span><br><span class="line">    mark := Student&#123;Human&#123;<span class="string">&quot;Mark&quot;</span>, <span class="number">25</span>, <span class="number">120</span>&#125;, <span class="string">&quot;Computer Science&quot;</span>&#125;</span><br><span class="line">    <span class="comment">// æˆ‘ä»¬è®¿é—®ç›¸åº”çš„å­—æ®µ</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;His name is &quot;</span>, mark.name)</span><br><span class="line">    fmt.Println(<span class="string">&quot;His age is &quot;</span>, mark.age)</span><br><span class="line">    fmt.Println(<span class="string">&quot;His weight is &quot;</span>, mark.weight)</span><br><span class="line">    fmt.Println(<span class="string">&quot;His speciality is &quot;</span>, mark.speciality)</span><br><span class="line">    <span class="comment">// ä¿®æ”¹å¯¹åº”çš„å¤‡æ³¨ä¿¡æ¯</span></span><br><span class="line">    mark.speciality = <span class="string">&quot;AI&quot;</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Mark changed his speciality&quot;</span>)</span><br><span class="line">    fmt.Println(<span class="string">&quot;His speciality is &quot;</span>, mark.speciality)</span><br><span class="line">    <span class="comment">// ä¿®æ”¹ä»–çš„å¹´é¾„ä¿¡æ¯</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Mark become old&quot;</span>)</span><br><span class="line">    mark.age = <span class="number">46</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;His age is&quot;</span>, mark.age)</span><br><span class="line">    <span class="comment">// ä¿®æ”¹ä»–çš„ä½“é‡ä¿¡æ¯</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Mark is not an athlet anymore&quot;</span>)</span><br><span class="line">    mark.weight += <span class="number">60</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;His weight is&quot;</span>, mark.weight)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">His name is  Mark</span><br><span class="line">His age is  25</span><br><span class="line">His weight is  120</span><br><span class="line">His speciality is  Computer Science</span><br><span class="line">Mark changed his speciality</span><br><span class="line">His speciality is  AI</span><br><span class="line">Mark become old</span><br><span class="line">His age is 46</span><br><span class="line">Mark is not an athlet anymore</span><br><span class="line">His weight is 180</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯ä»¥ä½¿ç”¨â€.â€çš„æ–¹å¼è¿›è¡Œè°ƒç”¨åŒ¿åå­—æ®µä¸­çš„å±æ€§å€¼</p>
<p>å®é™…å°±æ˜¯å­—æ®µçš„ç»§æ‰¿</p>
<p>å…¶ä¸­å¯ä»¥å°†åŒ¿åå­—æ®µç†è§£ä¸ºå­—æ®µåå’Œå­—æ®µç±»å‹éƒ½æ˜¯åŒä¸€ä¸ª</p>
<p>åŸºäºä¸Šé¢çš„ç†è§£ï¼Œæ‰€ä»¥å¯ä»¥<code>mark.Human = Human&#123;&quot;Marcus&quot;, 55, 220&#125; </code>å’Œ<code>mark.Human.age = 46</code></p>
<p>è‹¥å­˜åœ¨åŒ¿åå­—æ®µä¸­çš„å­—æ®µä¸éåŒ¿åå­—æ®µåå­—ç›¸åŒï¼Œåˆ™æœ€å¤–å±‚çš„ä¼˜å…ˆè®¿é—®ï¼Œå°±è¿‘åŸåˆ™</p>
</blockquote>
<p>é€šè¿‡åŒ¿åè®¿é—®å’Œä¿®æ”¹å­—æ®µç›¸å½“çš„æœ‰ç”¨ï¼Œä½†æ˜¯ä¸ä»…ä»…æ˜¯structå­—æ®µå“¦ï¼Œæ‰€æœ‰çš„å†…ç½®ç±»å‹å’Œè‡ªå®šä¹‰ç±»å‹éƒ½æ˜¯å¯ä»¥ä½œä¸ºåŒ¿åå­—æ®µçš„ã€‚</p>
<h2 id="ç»“æ„ä½“åµŒå¥—"><a href="#ç»“æ„ä½“åµŒå¥—" class="headerlink" title="ç»“æ„ä½“åµŒå¥—"></a>ç»“æ„ä½“åµŒå¥—</h2><p>åµŒå¥—çš„ç»“æ„ä½“<br>ä¸€ä¸ªç»“æ„ä½“å¯èƒ½åŒ…å«ä¸€ä¸ªå­—æ®µï¼Œè€Œè¿™ä¸ªå­—æ®µåè¿‡æ¥å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚è¿™äº›ç»“æ„è¢«ç§°ä¸ºåµŒå¥—ç»“æ„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;  </span><br><span class="line">    city, state <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;  </span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">    age <span class="type">int</span></span><br><span class="line">    address Address</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">var</span> p Person</span><br><span class="line">    p.name = <span class="string">&quot;Naveen&quot;</span></span><br><span class="line">    p.age = <span class="number">50</span></span><br><span class="line">    p.address = Address &#123;</span><br><span class="line">        city: <span class="string">&quot;Chicago&quot;</span>,</span><br><span class="line">        state: <span class="string">&quot;Illinois&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Name:&quot;</span>, p.name)</span><br><span class="line">    fmt.Println(<span class="string">&quot;Age:&quot;</span>,p.age)</span><br><span class="line">    fmt.Println(<span class="string">&quot;City:&quot;</span>,p.address.city)</span><br><span class="line">    fmt.Println(<span class="string">&quot;State:&quot;</span>,p.address.state)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æå‡å­—æ®µ"><a href="#æå‡å­—æ®µ" class="headerlink" title="æå‡å­—æ®µ"></a>æå‡å­—æ®µ</h2><p>åœ¨ç»“æ„ä½“ä¸­å±äºåŒ¿åç»“æ„ä½“çš„å­—æ®µç§°ä¸ºæå‡å­—æ®µï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥è¢«è®¿é—®ï¼Œå°±å¥½åƒå®ƒä»¬å±äºæ‹¥æœ‰åŒ¿åç»“æ„å­—æ®µçš„ç»“æ„ä¸€æ ·ã€‚ç†è§£è¿™ä¸ªå®šä¹‰æ˜¯ç›¸å½“å¤æ‚çš„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;  </span><br><span class="line">    city, state <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;  </span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">    age  <span class="type">int</span></span><br><span class="line">    address Address</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">var</span> p Person</span><br><span class="line">    p.name = <span class="string">&quot;Naveen&quot;</span></span><br><span class="line">    p.age = <span class="number">50</span></span><br><span class="line">    p.Address = Address&#123;</span><br><span class="line">        city:  <span class="string">&quot;Chicago&quot;</span>,</span><br><span class="line">        state: <span class="string">&quot;Illinois&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Name:&quot;</span>, p.name)</span><br><span class="line">    fmt.Println(<span class="string">&quot;Age:&quot;</span>, p.age)</span><br><span class="line">    fmt.Println(<span class="string">&quot;City:&quot;</span>, p.city) <span class="comment">//city is promoted field</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;State:&quot;</span>, p.state) <span class="comment">//state is promoted field</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Name: Naveen  </span><br><span class="line">Age: 50  </span><br><span class="line">City: Chicago  </span><br><span class="line">State: Illinois</span><br></pre></td></tr></table></figure>

<h2 id="å¯¼å‡ºç»“æ„ä½“å’Œå­—æ®µ"><a href="#å¯¼å‡ºç»“æ„ä½“å’Œå­—æ®µ" class="headerlink" title="å¯¼å‡ºç»“æ„ä½“å’Œå­—æ®µ"></a>å¯¼å‡ºç»“æ„ä½“å’Œå­—æ®µ</h2><p>å¦‚æœç»“æ„ä½“ç±»å‹ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸€ä¸ªå¯¼å‡ºç±»å‹ï¼Œå¯ä»¥ä»å…¶ä»–åŒ…è®¿é—®å®ƒã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœç»“æ„ä½“çš„å­—æ®µä»¥å¤§å†™å¼€å¤´ï¼Œåˆ™å¯ä»¥ä»å…¶ä»–åŒ…è®¿é—®å®ƒä»¬ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<p>1.åœ¨computerç›®å½•ä¸‹ï¼Œåˆ›å»ºæ–‡ä»¶spec.go</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> computer</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Spec <span class="keyword">struct</span> &#123; <span class="comment">//exported struct  </span></span><br><span class="line">    Maker <span class="type">string</span> <span class="comment">//exported field</span></span><br><span class="line">    model <span class="type">string</span> <span class="comment">//unexported field</span></span><br><span class="line">    Price <span class="type">int</span> <span class="comment">//exported field</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.åˆ›å»ºmain.go æ–‡ä»¶</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;structs/computer&quot;</span>  </span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">var</span> spec computer.Spec</span><br><span class="line">    spec.Maker = <span class="string">&quot;apple&quot;</span></span><br><span class="line">    spec.Price = <span class="number">50000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Spec:&quot;</span>, spec)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Spec: &#123;apple  50000&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç»“æ„ä½“æ¯”è¾ƒ"><a href="#ç»“æ„ä½“æ¯”è¾ƒ" class="headerlink" title="ç»“æ„ä½“æ¯”è¾ƒ"></a>ç»“æ„ä½“æ¯”è¾ƒ</h2><p>ç»“æ„ä½“æ˜¯å€¼ç±»å‹ï¼Œå¦‚æœæ¯ä¸ªå­—æ®µå…·æœ‰å¯æ¯”æ€§ï¼Œåˆ™æ˜¯å¯æ¯”è¾ƒçš„ã€‚å¦‚æœå®ƒä»¬å¯¹åº”çš„å­—æ®µç›¸ç­‰ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªç»“æ„ä½“å˜é‡æ˜¯ç›¸ç­‰çš„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> name <span class="keyword">struct</span> &#123;  </span><br><span class="line">    firstName <span class="type">string</span></span><br><span class="line">    lastName <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    name1 := name&#123;<span class="string">&quot;Steve&quot;</span>, <span class="string">&quot;Jobs&quot;</span>&#125;</span><br><span class="line">    name2 := name&#123;<span class="string">&quot;Steve&quot;</span>, <span class="string">&quot;Jobs&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">if</span> name1 == name2 &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;name1 and name2 are equal&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;name1 and name2 are not equal&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    name3 := name&#123;firstName:<span class="string">&quot;Steve&quot;</span>, lastName:<span class="string">&quot;Jobs&quot;</span>&#125;</span><br><span class="line">    name4 := name&#123;&#125;</span><br><span class="line">    name4.firstName = <span class="string">&quot;Steve&quot;</span></span><br><span class="line">    <span class="keyword">if</span> name3 == name4 &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;name3 and name4 are equal&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;name3 and name4 are not equal&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name1 and name2 are equal  </span><br><span class="line">name3 and name4 are not equal  </span><br></pre></td></tr></table></figure>

<p><strong>å¦‚æœç»“æ„å˜é‡åŒ…å«çš„å­—æ®µæ˜¯ä¸å¯æ¯”è¾ƒçš„ï¼Œé‚£ä¹ˆç»“æ„å˜é‡æ˜¯ä¸å¯æ¯”è¾ƒçš„</strong></p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> image <span class="keyword">struct</span> &#123;  </span><br><span class="line">    data <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    image1 := image&#123;data: <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;</span><br><span class="line">        <span class="number">0</span>: <span class="number">155</span>,</span><br><span class="line">    &#125;&#125;</span><br><span class="line">    image2 := image&#123;data: <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;</span><br><span class="line">        <span class="number">0</span>: <span class="number">155</span>,</span><br><span class="line">    &#125;&#125;</span><br><span class="line">    <span class="keyword">if</span> image1 == image2 &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;image1 and image2 are equal&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>invalid operation: image1 == image2 (struct containing map[int]int cannot be compared)</code></p>
<h2 id="ç»“æ„ä½“ä½œä¸ºå‡½æ•°çš„å‚æ•°"><a href="#ç»“æ„ä½“ä½œä¸ºå‡½æ•°çš„å‚æ•°" class="headerlink" title="ç»“æ„ä½“ä½œä¸ºå‡½æ•°çš„å‚æ•°"></a>ç»“æ„ä½“ä½œä¸ºå‡½æ•°çš„å‚æ•°</h2><p>ç»“æ„ä½“ä½œä¸ºå‡½æ•°å‚æ•°ä½¿ç”¨</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ackage main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Books <span class="keyword">struct</span> &#123;</span><br><span class="line">   title <span class="type">string</span></span><br><span class="line">   author <span class="type">string</span></span><br><span class="line">   subject <span class="type">string</span></span><br><span class="line">   book_id <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> Book1 Books        <span class="comment">/* å£°æ˜ Book1 ä¸º Books ç±»å‹ */</span></span><br><span class="line">   <span class="keyword">var</span> Book2 Books        <span class="comment">/* å£°æ˜ Book2 ä¸º Books ç±»å‹ */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* book 1 æè¿° */</span></span><br><span class="line">   Book1.title = <span class="string">&quot;Go è¯­è¨€&quot;</span></span><br><span class="line">   Book1.author = <span class="string">&quot;www.runoob.com&quot;</span></span><br><span class="line">   Book1.subject = <span class="string">&quot;Go è¯­è¨€æ•™ç¨‹&quot;</span></span><br><span class="line">   Book1.book_id = <span class="number">6495407</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* book 2 æè¿° */</span></span><br><span class="line">   Book2.title = <span class="string">&quot;Python æ•™ç¨‹&quot;</span></span><br><span class="line">   Book2.author = <span class="string">&quot;www.runoob.com&quot;</span></span><br><span class="line">   Book2.subject = <span class="string">&quot;Python è¯­è¨€æ•™ç¨‹&quot;</span></span><br><span class="line">   Book2.book_id = <span class="number">6495700</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å° Book1 ä¿¡æ¯ */</span></span><br><span class="line">   printBook(Book1)</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ‰“å° Book2 ä¿¡æ¯ */</span></span><br><span class="line">   printBook(Book2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printBook</span><span class="params">( book Books )</span></span> &#123;</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book title : %s\n&quot;</span>, book.title);</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book author : %s\n&quot;</span>, book.author);</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book subject : %s\n&quot;</span>, book.subject);</span><br><span class="line">   fmt.Printf( <span class="string">&quot;Book book_id : %d\n&quot;</span>, book.book_id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç»“æ„ä½“æ–¹æ³•"><a href="#ç»“æ„ä½“æ–¹æ³•" class="headerlink" title="ç»“æ„ä½“æ–¹æ³•"></a>ç»“æ„ä½“æ–¹æ³•</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">	name     <span class="type">string</span></span><br><span class="line">	password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u user)</span></span> checkPassword(password <span class="type">string</span>) <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> u.password == password</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *user)</span></span> resetPassword(password <span class="type">string</span>) &#123;</span><br><span class="line">	u.password = password</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := user&#123;name: <span class="string">&quot;wang&quot;</span>, password: <span class="string">&quot;1024&quot;</span>&#125;</span><br><span class="line">	a.resetPassword(<span class="string">&quot;2048&quot;</span>)</span><br><span class="line">	fmt.Println(a.checkPassword(<span class="string">&quot;2048&quot;</span>)) <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>makeã€newæ“ä½œ</strong></p>
<p>makeç”¨äºå†…å»ºç±»å‹ï¼ˆmapã€slice å’Œchannelï¼‰çš„å†…å­˜åˆ†é…ã€‚newç”¨äºå„ç§ç±»å‹çš„å†…å­˜åˆ†é…ã€‚<br>å†…å»ºå‡½æ•°newæœ¬è´¨ä¸Šè¯´è·Ÿå…¶å®ƒè¯­è¨€ä¸­çš„åŒåå‡½æ•°åŠŸèƒ½ä¸€æ ·ï¼šnew(T)åˆ†é…äº†é›¶å€¼å¡«å……çš„Tç±»å‹çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”è¿”å›å…¶åœ°å€ï¼Œå³ä¸€ä¸ª*Tç±»å‹çš„å€¼ã€‚ç”¨Goçš„æœ¯è¯­è¯´ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ–°åˆ†é…çš„ç±»å‹Tçš„é›¶å€¼ã€‚æœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼šnewè¿”å›æŒ‡é’ˆ</p>
<p>å†…å»ºå‡½æ•°make(T, args)ä¸new(T)æœ‰ç€ä¸åŒçš„åŠŸèƒ½ï¼Œmakeåªèƒ½åˆ›å»ºsliceã€mapå’Œchannelï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæœ‰åˆå§‹å€¼(éé›¶)çš„Tç±»å‹ï¼Œè€Œä¸æ˜¯*Tã€‚æœ¬è´¨æ¥è®²ï¼Œå¯¼è‡´è¿™ä¸‰ä¸ªç±»å‹æœ‰æ‰€ä¸åŒçš„åŸå› æ˜¯æŒ‡å‘æ•°æ®ç»“æ„çš„å¼•ç”¨åœ¨ä½¿ç”¨å‰å¿…é¡»è¢«åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªsliceï¼Œæ˜¯ä¸€ä¸ªåŒ…å«æŒ‡å‘æ•°æ®ï¼ˆå†…éƒ¨arrayï¼‰çš„æŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡çš„ä¸‰é¡¹æè¿°ç¬¦ï¼›åœ¨è¿™äº›é¡¹ç›®è¢«åˆå§‹åŒ–ä¹‹å‰ï¼Œsliceä¸ºnilã€‚å¯¹äºsliceã€mapå’Œchannelæ¥è¯´ï¼Œmakeåˆå§‹åŒ–äº†å†…éƒ¨çš„æ•°æ®ç»“æ„ï¼Œå¡«å……é€‚å½“çš„å€¼ã€‚makeè¿”å›åˆå§‹åŒ–åçš„ï¼ˆéé›¶ï¼‰å€¼ã€‚</p>
<ul>
<li><code>new</code>ç”¨äºä»»ä½•ç±»å‹çš„å†…å­˜åˆ†é…ï¼Œè¿”å›çš„æ˜¯ç±»å‹çš„æŒ‡é’ˆï¼ŒæŒ‡å‘æ–°åˆ†é…çš„é›¶å€¼å†…å­˜ç©ºé—´ã€‚</li>
<li><code>make</code>ä»…ç”¨äºåˆ‡ç‰‡ã€æ˜ å°„å’Œé€šé“çš„å†…å­˜åˆ†é…ï¼Œè¿”å›çš„æ˜¯ç»è¿‡åˆå§‹åŒ–åçš„éé›¶å€¼ã€‚</li>
</ul>
<h1 id="æŒ‡é’ˆä¸ç»“æ„ä½“ä¸¾ä¾‹"><a href="#æŒ‡é’ˆä¸ç»“æ„ä½“ä¸¾ä¾‹" class="headerlink" title="æŒ‡é’ˆä¸ç»“æ„ä½“ä¸¾ä¾‹"></a>æŒ‡é’ˆä¸ç»“æ„ä½“ä¸¾ä¾‹</h1><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">	name     <span class="type">string</span></span><br><span class="line">	password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := user&#123;name: <span class="string">&quot;wang&quot;</span>, password: <span class="string">&quot;1024&quot;</span>&#125;</span><br><span class="line">	b := user&#123;<span class="string">&quot;wang&quot;</span>, <span class="string">&quot;1024&quot;</span>&#125;</span><br><span class="line">	c := user&#123;name: <span class="string">&quot;wang&quot;</span>&#125;</span><br><span class="line">	c.password = <span class="string">&quot;1024&quot;</span></span><br><span class="line">	<span class="keyword">var</span> d user</span><br><span class="line">	d.name = <span class="string">&quot;wang&quot;</span></span><br><span class="line">	d.password = <span class="string">&quot;1024&quot;</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(a, b, c, d)                 <span class="comment">// &#123;wang 1024&#125; &#123;wang 1024&#125; &#123;wang 1024&#125; &#123;wang 1024&#125;</span></span><br><span class="line">	fmt.Println(checkPassword(a, <span class="string">&quot;haha&quot;</span>))   <span class="comment">// false</span></span><br><span class="line">	fmt.Println(checkPassword2(&amp;a, <span class="string">&quot;haha&quot;</span>)) <span class="comment">// false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkPassword</span><span class="params">(u user, password <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> u.password == password</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkPassword2</span><span class="params">(u *user, password <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> u.password == password</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;wang 1024&#125; &#123;wang 1024&#125; &#123;wang 1024&#125; &#123;wang 1024&#125;</span><br><span class="line">false</span><br><span class="line">false</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>é’è®­è¥</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µå¤§è½¯ä»¶æµ‹è¯•ï½ç¬¬äºŒæ¬¡ä½œä¸š</title>
    <url>/2023/05/31/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/test2/</url>
    <content><![CDATA[<h2 id="ç¬¬äºŒæ¬¡ä½œä¸šåŠå‚è€ƒç­”æ¡ˆ"><a href="#ç¬¬äºŒæ¬¡ä½œä¸šåŠå‚è€ƒç­”æ¡ˆ" class="headerlink" title="ç¬¬äºŒæ¬¡ä½œä¸šåŠå‚è€ƒç­”æ¡ˆ"></a>ç¬¬äºŒæ¬¡ä½œä¸šåŠå‚è€ƒç­”æ¡ˆ</h2><h3 id="ç¬¬ä¸€é¢˜"><a href="#ç¬¬ä¸€é¢˜" class="headerlink" title="ç¬¬ä¸€é¢˜"></a>ç¬¬ä¸€é¢˜</h3><p> åœ¨ä¸€ä¸ªå®¢æˆ·ä¿¡æ¯æŸ¥è¯¢ç•Œé¢ä¸­ï¼Œè¾“å…¥æ¡ä»¶æœ‰â€œå§“åâ€ã€â€œèº«ä»½è¯å·â€ã€â€œæ‰‹æœºâ€ï¼Œé‡‡ç”¨æ­£äº¤è¡¨æ–¹å¼è®¾è®¡è¯¥ç•Œé¢æŸ¥è¯¢åŠŸèƒ½çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>ç­”ï¼š</p>
<p>é’ˆå¯¹æœ¬æµ‹è¯•æœ‰3ä¸ªè¾“å…¥æ¡ä»¶ï¼Œæ¯ä¸ªè¾“å…¥æœ‰2ç§å–å€¼æƒ…å†µï¼Œå¯ä»¥é€‰æ‹©Lâ‚„(2Â³)æ­£äº¤è¡¨ï¼Œå…¶æ­£äº¤è¡¨å€¼å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>å®éªŒæ•°\åˆ—å·</th>
<th>å§“å</th>
<th>èº«ä»½è¯å·</th>
<th>æ‰‹æœº</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody></table>
<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<table>
<thead>
<tr>
<th>æµ‹è¯•ç”¨ä¾‹&#x2F;æŸ¥è¯¢æ¡ä»¶</th>
<th>å§“å</th>
<th>èº«ä»½è¯å·</th>
<th>æ‰‹æœº</th>
</tr>
</thead>
<tbody><tr>
<td>æµ‹è¯•ç”¨ä¾‹1</td>
<td>å¡«å†™</td>
<td>å¡«å†™</td>
<td>å¡«å†™</td>
</tr>
<tr>
<td>æµ‹è¯•ç”¨ä¾‹2</td>
<td>å¡«å†™</td>
<td>ç©º</td>
<td>ç©º</td>
</tr>
<tr>
<td>æµ‹è¯•ç”¨ä¾‹3</td>
<td>ç©º</td>
<td>å¡«å†™</td>
<td>ç©º</td>
</tr>
<tr>
<td>æµ‹è¯•ç”¨ä¾‹4</td>
<td>ç©º</td>
<td>ç©º</td>
<td>å¡«å†™</td>
</tr>
</tbody></table>
<h3 id="ç¬¬äºŒé¢˜"><a href="#ç¬¬äºŒé¢˜" class="headerlink" title="ç¬¬äºŒé¢˜"></a>ç¬¬äºŒé¢˜</h3><p>æ ¹æ®å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç¨‹åºæµç¨‹å›¾ï¼Œåˆ†åˆ«ä½¿ç”¨è¯­å¥è¦†ç›–æµ‹è¯•ã€åˆ¤å®šè¦†ç›–æµ‹è¯•ã€æ¡ä»¶è¦†ç›–æµ‹è¯•å’Œè·¯å¾„è¦†ç›–æµ‹è¯•è¿›è¡Œæµ‹è¯•ç”¨ä¾‹è®¾è®¡ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/YaGS6fzEgLuwdKp.png"></p>
<p>ç­”ï¼š</p>
<p><em><strong>1ï¼‰è¯­å¥è¦†ç›–</strong></em></p>
<p>è®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿å¾—è¢«æµ‹è¯•ç¨‹åºä¸­çš„æ¯æ¡å¯æ‰§è¡Œè¯­å¥è‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡ã€‚å…¶æµ‹è¯•ç”¨ä¾‹è¡¨å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
<th>è¦†ç›–è¯­å¥</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(X,Y)&#x3D;(1,11)</td>
<td>(X,Y)&#x3D;(1,11)</td>
<td>X&gt;0 AND Y&gt;10;Y&#x3D;Y&#x2F;X;X&lt;-10 OR Y&lt;0</td>
</tr>
<tr>
<td>2</td>
<td>(X,Y)&#x3D;(0,-1)</td>
<td>(X,Y)&#x3D;(0,1)</td>
<td>X&gt;0 AND Y&gt;10;X&lt;-10 OR Y&lt;0;Y&#x3D;-(Y+X)</td>
</tr>
</tbody></table>
<p><em><strong>2ï¼‰åˆ¤å®šè¦†ç›–</strong></em></p>
<p>è®¾è®¡æµ‹è¯•ç”¨ä¾‹,ä½¿å¾—è¢«æµ‹è¯•ç¨‹åºä¸­çš„æ¯ä¸ªåˆ¤æ–­çš„â€çœŸâ€ã€â€å‡â€åˆ†æ”¯è‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡ã€‚è®¾X&gt;0 AND Y&gt;10ä¸ºåˆ¤å®šæ¡ä»¶Mï¼ŒX&lt;-10 OR Y&lt;0ä¸ºåˆ¤å®šæ¡ä»¶Nã€‚<br>è®¾è®¡çš„åˆ¤å®šè¦†ç›–æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
<th>è¦†ç›–åˆ¤å®šæ¡ä»¶</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(X,Y)&#x3D;(1,11)</td>
<td>(X,Y)&#x3D;(1,11)</td>
<td>Mä¸ºçœŸï¼ŒNä¸ºå‡</td>
</tr>
<tr>
<td>2</td>
<td>(X,Y)&#x3D;(0,-1)</td>
<td>(X,Y)&#x3D;(0,1)</td>
<td>Mä¸ºå‡ï¼ŒNä¸ºçœŸ</td>
</tr>
</tbody></table>
<p><em><strong>3ï¼‰æ¡ä»¶è¦†ç›–</strong></em></p>
<p>è®¾è®¡æµ‹è¯•ç”¨ä¾‹,ä½¿å¾—è¢«æµ‹è¯•ç¨‹åºä¸­åˆ†æ”¯åˆ¤æ–­è¯­å¥ä¸­æ¯ä¸ªæ¡ä»¶çš„å¯èƒ½å€¼è‡³å°‘è¢«æ»¡è¶³ä¸€æ¬¡ã€‚<br>è®¾</p>
<blockquote>
<p>æ¡ä»¶X&gt;0:<br>å–çœŸæ—¶ä¸ºT1ï¼Œå–å‡æ—¶ä¸ºF1<br>æ¡ä»¶Y&gt;10:<br>å–çœŸæ—¶ä¸ºT2ï¼Œå–å‡æ—¶ä¸ºF2<br>æ¡ä»¶x&lt;-10:<br>å–çœŸæ—¶ä¸ºT3ï¼Œå–å‡æ—¶ä¸ºF3<br>æ¡ä»¶Y&lt;0:<br>å–çœŸæ—¶ä¸ºT4,å–å‡æ—¶ä¸º F4</p>
</blockquote>
<p>è®¾è®¡çš„æ¡ä»¶è¦†ç›–æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
<th>è¦†ç›–æ¡ä»¶</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(X,Y)&#x3D;(1,-1)</td>
<td>(X,Y)&#x3D;(1,0)</td>
<td>T1ï¼ŒF2ï¼ŒF3ï¼ŒT4</td>
</tr>
<tr>
<td>2</td>
<td>(X,Y)&#x3D;(-11,11)</td>
<td>(X,Y)&#x3D;(-11,0)</td>
<td>F1ï¼ŒT2ï¼ŒT3ï¼ŒF4</td>
</tr>
</tbody></table>
<p><em><strong>4ï¼‰åŸºæœ¬è·¯å¾„è¦†ç›–</strong></em></p>
<p>è®¾è®¡æµ‹è¯•ç”¨ä¾‹,ä½¿å¾—è¢«æµ‹è¯•ç¨‹åºä¸­çš„åŸºæœ¬è·¯å¾„è‡³å°‘è¢«è¦†ç›–ä¸€æ¬¡ã€‚ä¾æ®è¯¥ç¨‹åºæ§åˆ¶æµå›¾è®¡ç®—ç¯è·¯å¤æ‚åº¦&#x3D;3ï¼ˆåˆ¤æ–­èŠ‚ç‚¹æ•°ç›®+1ï¼‰,å› æ­¤,è¯¥ç¨‹åºçš„åŸºæœ¬è·¯å¾„æœ‰3æ¡ã€‚</p>
<p>è®¾è®¡çš„åŸºæœ¬è·¯å¾„è¦†ç›–æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹è¡¨æ‰€ç¤º</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
<th>è¦†ç›–è·¯å¾„</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(X,Y)&#x3D;(0,0)</td>
<td>(X,Y)&#x3D;(0,0)</td>
<td>ace</td>
</tr>
<tr>
<td>2</td>
<td>(X,Y)&#x3D;(1,11)</td>
<td>(X,Y)&#x3D;(1,11)</td>
<td>abce</td>
</tr>
<tr>
<td>3</td>
<td>(X,Y)&#x3D;(-11,1)</td>
<td>(X,Y)&#x3D;(-11,10)</td>
<td>acde</td>
</tr>
<tr>
<td>4</td>
<td>ä¸å­˜åœ¨</td>
<td>ä¸å­˜åœ¨</td>
<td>abcde</td>
</tr>
</tbody></table>
<p>ä½†æ˜¯çœ‹è¿™ç¯‡æ–‡ç« <a href="https://blog.csdn.net/dickdick111/article/details/90478058?ops_request_misc=&request_id=&biz_id=102&utm_term=%E7%8E%AF%E5%BD%A2%E5%A4%8D%E6%9D%82%E5%BA%A6%E7%9A%84%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B%E5%9B%BE&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-90478058.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&spm=1018.2226.3001.4187"> è½¯ä»¶æµ‹è¯•â€”â€”ç¨‹åºæ§åˆ¶æµå›¾ï¼ŒMcCabeç¯å½¢å¤æ‚åº¦_æ ¹æ®ç¨‹åºç”»å‡ºæ§åˆ¶æµå›¾_Dic0kçš„åšå®¢-CSDNåšå®¢</a>ï¼ŒæŒ‰ç…§å®ƒçš„é€»è¾‘ï¼Œç¯å½¢å¤æ‚åº¦åº”è¯¥æœ‰5æ¡ã€‚ï¼ˆå¾ˆå¥‡æ€ªï¼‰</p>
<h3 id="ç¬¬ä¸‰é¢˜"><a href="#ç¬¬ä¸‰é¢˜" class="headerlink" title="ç¬¬ä¸‰é¢˜"></a>ç¬¬ä¸‰é¢˜</h3><p>é’ˆå¯¹å¦‚ä¸‹æ ·æœ¬ç¨‹åºï¼Œåˆ†æè¯¥ç¨‹åºé€»è¾‘è¦†ç›–æµ‹è¯•æ–¹æ³•ä¸­çš„è¯­å¥è¦†ç›–ã€åˆ¤å®šè¦†ç›–ã€æ¡ä»¶è¦†ç›–å’ŒåŸºæœ¬è·¯å¾„è¦†ç›–ï¼Œå¹¶è¯´æ˜å“ªç§æ–¹æ³•è¦†ç›–ç‡é«˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>è¢«æµ‹æ ·æœ¬ç¨‹åº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Coverage</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;start main function:path a...&quot;</span>);</span><br><span class="line">  <span class="type">int</span> A=<span class="number">0</span>,B=<span class="number">0</span>,X=<span class="number">0</span>;</span><br><span class="line">  <span class="type">Scanner</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">  System.out.println(<span class="string">&quot;è¾“å…¥Aï¼š&quot;</span>);  A = s.nextInt();</span><br><span class="line">  System.out.println(<span class="string">&quot;è¾“å…¥B=&quot;</span>);  B = s.nextInt();</span><br><span class="line">  System.out.println(<span class="string">&quot;è¾“å…¥X=&quot;</span>);  X = s.nextInt();</span><br><span class="line">  s.close();  </span><br><span class="line">  <span class="keyword">if</span> (A&gt;<span class="number">1</span> &amp;&amp; B==<span class="number">0</span>) &#123;</span><br><span class="line">	X=X/A;</span><br><span class="line">	System.out.println(<span class="string">&quot;path c&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;path b&quot;</span>);  &#125;</span><br><span class="line">  <span class="keyword">if</span> (A==<span class="number">2</span> || X&gt;<span class="number">1</span>) &#123;</span><br><span class="line">	X=X+<span class="number">1</span>;</span><br><span class="line">	System.out.println(<span class="string">&quot;path e&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;path d&quot;</span>);  &#125;</span><br><span class="line">  System.out.println(<span class="string">&quot;end main function.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	ç­”ï¼š</p>
<p>â€‹	<u><em><strong>æ³¨ï¼šä»¥ä¸‹ç­”æ¡ˆåªå‚è€ƒäº†æ ‡å‡†ç­”æ¡ˆçš„ä¸€éƒ¨åˆ†</strong></em></u></p>
<p><img src="https://s2.loli.net/2023/05/31/P7NxLnZ9QhsHmyW.png" alt="VF1D1EJ2__LKYS_1_GPGJ5W.png"></p>
<ol>
<li><p>è¯­å¥è¦†ç›–æµ‹è¯•</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
<th>è¦†ç›–è·¯å¾„</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(A,B,X)&#x3D;(2,0,2)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath cï¼Œpath eï¼Œend main function.</td>
<td>ace</td>
</tr>
<tr>
<td>2</td>
<td>(A,B,X)&#x3D;(0,1,1)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath bï¼Œpath dï¼Œend main function.</td>
<td>abd</td>
</tr>
</tbody></table>
</li>
<li><p>åˆ¤å®šè¦†ç›–æµ‹è¯•</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
<th>è¦†ç›–è·¯å¾„</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(A,B,X)&#x3D;(2,0,2)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath cï¼Œpath eï¼Œend main function.</td>
<td>ace</td>
</tr>
<tr>
<td>2</td>
<td>(A,B,X)&#x3D;(0,1,1)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath bï¼Œpath dï¼Œend main function.</td>
<td>abd</td>
</tr>
</tbody></table>
</li>
<li><p>æ¡ä»¶è¦†ç›–æµ‹è¯•</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
<th>è¦†ç›–è·¯å¾„</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(A,B,X)&#x3D;(2,0,2)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath cï¼Œpath eï¼Œend main function.</td>
<td>ace</td>
</tr>
<tr>
<td>2</td>
<td>(A,B,X)&#x3D;(0,1,1)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath bï¼Œpath dï¼Œend main function.</td>
<td>abd</td>
</tr>
</tbody></table>
</li>
<li><p>åŸºæœ¬è·¯å¾„è¦†ç›–æµ‹è¯•</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
<th>è¦†ç›–è·¯å¾„</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(A,B,X)&#x3D;(2,0,2)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath cï¼Œpath eï¼Œend main function.</td>
<td>ace</td>
</tr>
<tr>
<td>2</td>
<td>(A,B,X)&#x3D;(0,1,1)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath bï¼Œpath dï¼Œend main function.</td>
<td>abd</td>
</tr>
<tr>
<td>3</td>
<td>(A,B,X)&#x3D;(0,1,2)</td>
<td>start main function:path aâ€¦ï¼Œè¾“å…¥Aï¼šï¼Œè¾“å…¥B&#x3D;ï¼Œè¾“å…¥X&#x3D;ï¼Œpath bï¼Œpath eï¼Œend main function.</td>
<td>abe</td>
</tr>
</tbody></table>
</li>
</ol>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºæœ¬è·¯å¾„è¦†ç›–æµ‹è¯•ç”¨çš„æµ‹è¯•ç”¨ä¾‹æœ€å¤šï¼Œè¦†ç›–çš„è·¯å¾„ä¹Ÿæœ€å¤šï¼Œæ•…åŸºæœ¬è·¯å¾„è¦†ç›–çš„è¦†ç›–ç‡æœ€é«˜ã€‚</p>
<p><em><strong>æ³¨ï¼š<a href="https://blog.csdn.net/The_Azur/article/details/117936347">ç¯å½¢å¤æ‚åº¦å¿…å®šæ˜¯åŸºæœ¬è·¯å¾„ä¸ªæ•°çš„ä¸Šé™ã€‚</a></strong></em></p>
<p><img src="https://s2.loli.net/2023/05/31/HtDjYwSso3WKVFn.png" alt="Snipaste_2023-05-31_21-48-19.png"></p>
<h3 id="ç¬¬å››é¢˜"><a href="#ç¬¬å››é¢˜" class="headerlink" title="ç¬¬å››é¢˜"></a>ç¬¬å››é¢˜</h3><p>ä½¿ç”¨PMDä»£ç åˆ†æå·¥å…·é’ˆå¯¹å¦‚ä¸‹è¢«æµ‹ç¨‹åºï¼Œæ‰¾å‡ºè¯¥ç¨‹åºå­˜åœ¨çš„æ½œåœ¨ç¼ºé™·ï¼Œç»™å‡ºç»“æœç•Œé¢æˆªå›¾ï¼Œå¹¶è¯´æ˜å„ä¸ªç¼ºé™·å‡ºç°çš„åŸå› ã€‚</p>
<p>è¢«æµ‹æ ·æœ¬ç¨‹åº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Coverage</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;start main function:path a...&quot;</span>);</span><br><span class="line">  <span class="type">int</span> A=<span class="number">0</span>,B=<span class="number">0</span>,X=<span class="number">0</span>;</span><br><span class="line">  <span class="type">Scanner</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">  System.out.println(<span class="string">&quot;è¾“å…¥Aï¼š&quot;</span>);  A = s.nextInt();</span><br><span class="line">  System.out.println(<span class="string">&quot;è¾“å…¥B=&quot;</span>);  B = s.nextInt();</span><br><span class="line">  System.out.println(<span class="string">&quot;è¾“å…¥X=&quot;</span>);  X = s.nextInt();</span><br><span class="line">  s.close();  </span><br><span class="line">  <span class="keyword">if</span> (A&gt;<span class="number">1</span> &amp;&amp; B==<span class="number">0</span>) &#123;</span><br><span class="line">	X=X/A;</span><br><span class="line">	System.out.println(<span class="string">&quot;path c&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;path b&quot;</span>);  &#125;</span><br><span class="line">  <span class="keyword">if</span> (A==<span class="number">2</span> || X&gt;<span class="number">1</span>) &#123;</span><br><span class="line">	X=X+<span class="number">1</span>;</span><br><span class="line">	System.out.println(<span class="string">&quot;path e&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;path d&quot;</span>);  &#125;</span><br><span class="line">  System.out.println(<span class="string">&quot;end main function.&quot;</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ç­”ï¼š</p>
<p><u><em><strong>æ³¨ï¼šä»¥ä¸‹ç­”æ¡ˆåªå‚è€ƒäº†æ ‡å‡†ç­”æ¡ˆçš„ä¸€éƒ¨åˆ†</strong></em></u></p>
<p><a href="https://smms.app/image/5I4amZs2cXEldHv" target="_blank"><img src="https://s2.loli.net/2023/05/31/5I4amZs2cXEldHv.jpg" alt="Z__LBIY38___C`L5GCFZSVF.jpg"></a></p>
<p>ä»¥ä¸‹æ˜¯å¯èƒ½çš„ç¼ºé™·ï¼ˆæ„Ÿè§‰æ¯ä¸ªäººåšå‡ºæ¥éƒ½ä¸ä¸€æ ·å“ˆå“ˆå“ˆå“ˆğŸ˜†ï¼‰ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰VariableNamingConventionsï¼š</p>
<p>â€‹		â‘ å˜é‡åº”ä»¥å°å†™å­—ç¬¦å¼€å¤´ï¼Œâ€™Aâ€™â€™Bâ€™â€™Xâ€™å‡ä»¥å¤§å†™å­—ç¬¦å¼€å¤´</p>
<p>ï¼ˆ2ï¼‰UseUtilityClassï¼š</p>
<p>â€‹		â‘ æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å®ç”¨å·¥å…·ç±»ï¼Œæˆ–æ·»åŠ ä¸€ä¸ªç§		æœ‰æ„é€ å‡½æ•°ï¼Œæˆ–ä½¿ç±»æŠ½è±¡æ¥å±è”½è¿™ä¸ªè­¦å‘Š</p>
<p>ï¼ˆ3ï¼‰LocalVariableCouldBeFinalï¼š</p>
<p>â€‹		â‘ å±€éƒ¨å˜é‡â€™sâ€™å¯ä»¥å£°æ˜ä¸ºfinal</p>
<p>ï¼ˆ4ï¼‰LocalVaraiableNamingConventionsï¼š</p>
<p>â€‹		â‘ å±€éƒ¨å˜é‡åâ€™Aâ€™â€™Bâ€™â€™Xâ€™ä¸åŒ¹é…â€™[a-z][a-zA-Z0-9]*â€™</p>
<p>ï¼ˆ5ï¼‰MethodArgumentCouldBeFinalï¼š</p>
<p>â€‹		â‘ å‚æ•°â€™argsâ€™æœªèµ‹å€¼ï¼Œå¯ä»¥å£°æ˜ä¸ºfinal</p>
<p>ï¼ˆ6ï¼‰CommentRequiredï¼š</p>
<p>â€‹		â‘ ç±»æ³¨é‡Šæ˜¯å¿…éœ€çš„</p>
<p>â€‹		â‘¡å…¬å…±æ–¹æ³•å’Œæ„é€ å‡½æ•°çš„æ³¨é‡Šæ˜¯å¿…éœ€çš„</p>
<p>ï¼ˆ7ï¼‰OneDeclarationPerLineï¼š</p>
<p>â€‹		â‘ int A&#x3D;0,B&#x3D;0,X&#x3D;0; æ¯ä¸ªå£°æ˜ä¸ºä¸€è¡Œï¼Œå¯ä»¥å¢å¼ºä»£ç çš„å¯è¯»æ€§</p>
<p>ï¼ˆ8ï¼‰UnusedAssignmentï¼š</p>
<p>â€‹		â‘ å˜é‡â€™Bâ€™çš„åˆå§‹åŒ–å¼ä»æœªä½¿ç”¨ï¼ˆåè¢«é‡å†™ï¼‰</p>
<p>â€‹		â‘¡å˜é‡â€™Aâ€™çš„åˆå§‹åŒ–å¼ä»æœªä½¿ç”¨ï¼ˆåè¢«è¦†ç›–ï¼‰</p>
<p>â€‹		â‘¢å˜é‡â€™Xâ€™çš„åˆå§‹åŒ–å¼ä»æœªä½¿ç”¨ï¼ˆåè¢«è¦†ç›–ï¼‰</p>
<p>â€‹		â‘£ X&#x3D;X+1; èµ‹ç»™å˜é‡â€™Xâ€™çš„å€¼ä»æœªä½¿ç”¨è¿‡</p>
<p>ï¼ˆ9ï¼‰SystemPrintlnï¼š</p>
<p>â€‹		â‘ ä½¿ç”¨System.out.println</p>
<p>ï¼ˆ10ï¼‰ShortVariableï¼š</p>
<p>â€‹		â‘  Scanner s &#x3D; new Scanner(System.in); é¿å…ä½¿ç”¨åƒsè¿™æ ·åå­—è¾ƒ		çŸ­çš„å˜é‡</p>
<p>â€‹		â‘¡é¿å…ä½¿ç”¨çŸ­åç§°çš„å˜é‡ï¼šå¦‚A,B,X</p>
<p>ï¼ˆ11ï¼‰DataflowAnomalyAnalysisï¼š</p>
<p>â€‹		â‘ å‘ç°å˜é‡â€™Aâ€™çš„â€™DDâ€™å¼‚å¸¸</p>
<p>â€‹			int A&#x3D;0,B&#x3D;0,X&#x3D;0;</p>
<p>â€‹			Scanner s &#x3D; new Scanner(System.in);</p>
<p>â€‹		    System.out.println(â€œè¾“å…¥Aï¼šâ€);A &#x3D; s.nextInt();</p>
<p>â€‹		â‘¡å‘ç°å˜é‡â€™Xâ€™çš„â€™DUâ€™å¼‚å¸¸</p>
<p>â€‹		X&#x3D;X+1;</p>
<p>â€‹		System.out.println(â€œpath eâ€);</p>
<p>â€‹	} else {</p>
<p>â€‹		System.out.println(â€œpath dâ€);  }</p>
<p>â€‹		System.out.println(â€œend main function.â€);</p>
<p>â€‹	}</p>
<p>â€‹		â‘¢å‘ç°å˜é‡â€™Xâ€™çš„â€™DDâ€™å¼‚å¸¸</p>
<p>â€‹		int A&#x3D;0,B&#x3D;0,X&#x3D;0;</p>
<p> â€‹		Scanner s &#x3D; new Scanner(System.in);</p>
<p>â€‹		System.out.println(â€œè¾“å…¥Aï¼šâ€);  A &#x3D; s.nextInt();</p>
<p>â€‹		 System.out.println(â€œè¾“å…¥B&#x3D;â€);  B &#x3D; s.nextInt();</p>
<p>â€‹        System.out.println(â€œè¾“å…¥X&#x3D;â€);  X &#x3D; s.nextInt();</p>
<p>â€‹		â‘£å‘ç°å˜é‡â€™Bâ€™çš„â€™DDâ€™å¼‚å¸¸</p>
<p>â€‹		int A&#x3D;0,B&#x3D;0,X&#x3D;0;</p>
<p>â€‹	Scanner s &#x3D; new Scanner(System.in);</p>
<p>â€‹	System.out.println(â€œè¾“å…¥Aï¼šâ€);  A &#x3D; s.nextInt();</p>
<p>â€‹	System.out.println(â€œè¾“å…¥B&#x3D;â€);  B &#x3D; s.nextInt();</p>
<p>ï¼ˆ12ï¼‰CloseResourceï¼š</p>
<p>â€‹		â‘ Scanner s &#x3D; new Scanner(System.in); ç¡®ä¿åƒInputStreamå¯¹è±¡		è¿™æ ·çš„èµ„æºåœ¨ä½¿ç”¨åè¢«å…³é—­</p>
</blockquote>
<p>æˆ‘æ„Ÿè§‰ç¬¬å››é¢˜åº”è¯¥ä¸ä¼šè€ƒğŸ™‚</p>
<p><em><strong>å£°æ˜ï¼šé™¤ç‰¹æ®Šæ ‡æ³¨å¤–ï¼ˆç»¼åˆè€ƒè™‘å…¶ä»–åŒå­¦çš„ç­”æ¡ˆï¼‰ï¼Œç­”æ¡ˆå‡ä¸ºè€å¸ˆåŸç‰ˆç­”æ¡ˆ</strong></em></p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è½¯ä»¶æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µå¤§è½¯ä»¶æµ‹è¯•ï½ç¬¬ä¸€æ¬¡ä½œä¸š</title>
    <url>/2023/05/31/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/test1/</url>
    <content><![CDATA[<h2 id="ç¬¬ä¸€æ¬¡ä½œä¸šåŠå‚è€ƒç­”æ¡ˆ"><a href="#ç¬¬ä¸€æ¬¡ä½œä¸šåŠå‚è€ƒç­”æ¡ˆ" class="headerlink" title="ç¬¬ä¸€æ¬¡ä½œä¸šåŠå‚è€ƒç­”æ¡ˆ"></a>ç¬¬ä¸€æ¬¡ä½œä¸šåŠå‚è€ƒç­”æ¡ˆ</h2><h3 id="ç¬¬ä¸€é¢˜"><a href="#ç¬¬ä¸€é¢˜" class="headerlink" title="ç¬¬ä¸€é¢˜"></a>ç¬¬ä¸€é¢˜</h3><p>é’ˆå¯¹ç”µå­ç§‘æŠ€å¤§å­¦ä¿¡æ¯é—¨æˆ·çš„â€œå¯†ç æ‰¾å›â€ç•Œé¢çš„é‚®ç®±è¾“å…¥åŸŸè¿›è¡ŒéªŒè¯ï¼Œ é‡‡ç”¨ç­‰ä»·åˆ’åˆ†æ³•è®¾è®¡ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å°½é‡å¤šçš„æ— æ•ˆç­‰ä»·ç±»ã€‚</p>
<p>ç­”:</p>
<p>æœ‰æ•ˆç­‰ä»·ç±»å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>(1)é‚®ç®±è¾“å…¥å­¦ç¬¦ä¸²æ ¼å¼<u>***@uestc.edu.cn</u>æˆ–<u>***@UESTC.EDU.CN</u>(*ä¸ºå­—æ¯æˆ–æ•°å­—)</p>
</blockquote>
<p>æ— æ•ˆç­‰ä»·ç±»:</p>
<blockquote>
<p>(2)*ä¸­å¸¦æœ‰éå­—æ¯æˆ–æ•°å­—çš„å…¶å®ƒå­—ç¬¦</p>
<p>(3)é‚®ç®±è¾“å…¥çš„å­—ç¬¦ä¸²ä¸­ç¼ºå°‘â€˜@â€™å­—ç¬¦</p>
<p>(4)é‚®ç®±è¾“å…¥çš„å­—ç¬¦ä¸²ä¸­æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªâ€˜@â€™å­—ç¬¦</p>
<p>(5)é‚®ç®±è¾“å…¥å­—ç¬¦ä¸²ä¸­â€˜@â€™å­—ç¬¦åä¸æ˜¯æ ‡å‡†çš„åŸŸåå­—æ®µ</p>
</blockquote>
<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<table>
<thead>
<tr>
<th align="left">æµ‹è¯•ç”¨ä¾‹ç¼–å·</th>
<th>æµ‹è¯•ç”¨ä¾‹</th>
<th>è¦†ç›–ç­‰ä»·ç±»</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td><a href="mailto:&#x65;&#x78;&#97;&#x6d;&#112;&#108;&#101;&#x40;&#x75;&#x65;&#x73;&#x74;&#99;&#x2e;&#101;&#x64;&#x75;&#x2e;&#x63;&#110;">&#x65;&#x78;&#97;&#x6d;&#112;&#108;&#101;&#x40;&#x75;&#x65;&#x73;&#x74;&#99;&#x2e;&#101;&#x64;&#x75;&#x2e;&#x63;&#110;</a></td>
<td>(1)</td>
</tr>
<tr>
<td align="left">2</td>
<td>#<a href="mailto:&#101;&#x78;&#97;&#x6d;&#x70;&#x6c;&#x65;&#x40;&#x75;&#101;&#115;&#116;&#x63;&#46;&#101;&#x64;&#x75;&#46;&#x63;&#x6e;">&#101;&#x78;&#97;&#x6d;&#x70;&#x6c;&#x65;&#x40;&#x75;&#101;&#115;&#116;&#x63;&#46;&#101;&#x64;&#x75;&#46;&#x63;&#x6e;</a></td>
<td>(2)</td>
</tr>
<tr>
<td align="left">3</td>
<td>exampleuestc.edu.cn</td>
<td>(3)</td>
</tr>
<tr>
<td align="left">4</td>
<td>example@@uestc.edu.cn</td>
<td>(4)</td>
</tr>
<tr>
<td align="left">5</td>
<td>example@domaincom</td>
<td>(5)</td>
</tr>
</tbody></table>
<h3 id="ç¬¬äºŒé¢˜"><a href="#ç¬¬äºŒé¢˜" class="headerlink" title="ç¬¬äºŒé¢˜"></a>ç¬¬äºŒé¢˜</h3><p>ç»¼åˆè¿ç”¨è¾¹ç•Œå€¼æ–¹æ³•å’Œç­‰ä»·ç±»æ–¹æ³•ï¼Œé’ˆå¯¹ä¸‰è§’å½¢é—®é¢˜è®¾è®¡ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ã€‚å‡å®šè¾“å…¥ä¸‰ä¸ªæ•´æ•°ï¼ˆaã€bã€cï¼‰ä½œä¸ºè¾¹ï¼Œåˆ†åˆ«æ»¡è¶³ä¸€èˆ¬ä¸‰è§’å½¢ã€ç­‰è…°ä¸‰è§’å½¢å’Œç­‰è¾¹ä¸‰è§’å½¢ã€‚</p>
<p>1ï¼‰åˆ¤æ–­ä¸€èˆ¬ä¸‰è§’å½¢çš„æœ‰æ•ˆç­‰ä»·ç±»æ˜¯ä»€ä¹ˆ? åˆ¤æ–­ä¸€èˆ¬ä¸‰è§’å½¢çš„æ— æ•ˆç­‰ä»·ç±»æ˜¯ä»€ä¹ˆ?</p>
<p>2ï¼‰åˆ¤æ–­ç­‰è…°ä¸‰è§’å½¢çš„æœ‰æ•ˆç­‰ä»·ç±»æ˜¯ä»€ä¹ˆ? åˆ¤æ–­ç­‰è…°ä¸‰è§’å½¢çš„æ— æ•ˆç­‰ä»·ç±»æ˜¯ä»€ä¹ˆ?</p>
<p>3ï¼‰åˆ¤æ–­ç­‰è¾¹ä¸‰è§’å½¢çš„æœ‰æ•ˆç­‰ä»·ç±»æ˜¯ä»€ä¹ˆ? åˆ¤æ–­ç­‰è¾¹ä¸‰è§’å½¢çš„æ— æ•ˆç­‰ä»·ç±»æ˜¯ä»€ä¹ˆ?</p>
<p>ç­”ï¼š</p>
<p>ä¸‰è§’å½¢åˆ¤æ–­æ¡ä»¶å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>1)ä¸‰è§’å½¢çš„è¾¹é•¿å‡å¤§äº0</p>
<p>2)æ„æˆä¸€èˆ¬ä¸‰è§’å½¢çš„æ¡ä»¶ï¼šä»»æ„ä¸¤è¾¹ä¹‹å’Œå¤§äºç¬¬ä¸‰è¾¹</p>
<p>3)æ„æˆç­‰è…°ä¸‰è§’å½¢çš„æ¡ä»¶ï¼šä»»æ„ä¸¤è¾¹ç›¸ç­‰</p>
<p>4)æ„æˆç­‰è…°ä¸‰è§’å½¢çš„æ¡ä»¶ï¼šä¸‰æ¡è¾¹éƒ½ç›¸ç­‰</p>
</blockquote>
<p>(1)åˆ¤æ–­ä¸€èˆ¬ä¸‰è§’å½¢çš„æœ‰æ•ˆç­‰ä»·ç±»ä¸è¾¹ç•Œå€¼è§„åˆ™è®¾è®¡ï¼š</p>
<blockquote>
<p>(aâ‰¥0)âˆ§(bâ‰¥0)âˆ§(câ‰¥0)âˆ§((a+b)&gt;c)âˆ§((a+c)&gt;b)âˆ§((b+c)&gt;a)</p>
</blockquote>
<p>åˆ¤æ–­ä¸€èˆ¬ä¸‰è§’å½¢çš„æ— æ•ˆç­‰ä»·ç±»ä¸è¾¹ç•Œå€¼è§„åˆ™è®¾è®¡ï¼š</p>
<blockquote>
<p>â‘ (aâ‰¥0)âˆ§(bâ‰¥0)âˆ§(câ‰¥0)âˆ§(((a+b)â‰¤c)âˆ¨((a+c)â‰¤b)âˆ¨((b+c)â‰¤a))</p>
<p>â‘¡(aâ‰¤0)âˆ¨(bâ‰¤0)âˆ¨(câ‰¤0)</p>
</blockquote>
<p>(2)åˆ¤æ–­ç­‰è…°ä¸‰è§’å½¢çš„æœ‰æ•ˆç­‰ä»·ç±»ä¸è¾¹ç•Œå€¼è§„åˆ™è®¾è®¡ï¼š</p>
<blockquote>
<p>(aâ‰¥0)âˆ§(bâ‰¥0)âˆ§(câ‰¥0)âˆ§((a+b)&gt;c)âˆ§((a+c)&gt;b)âˆ§((b+c)&gt;a)âˆ§((a&#x3D;b)âˆ¨(b&#x3D;c)âˆ¨(a&#x3D;c))</p>
</blockquote>
<p>åˆ¤æ–­ç­‰è…°ä¸‰è§’å½¢çš„æ— æ•ˆç­‰ä»·ç±»ä¸è¾¹ç•Œå€¼è§„åˆ™è®¾è®¡ï¼š</p>
<blockquote>
<p>â‘ (a!&#x3D;b)âˆ§(b!&#x3D;c)âˆ§(c!&#x3D;a) </p>
<p>â‘¡(aâ‰¤0)âˆ¨(bâ‰¤0)âˆ¨(câ‰¤0)</p>
</blockquote>
<p>(3)åˆ¤æ–­ç­‰è¾¹ä¸‰è§’å½¢çš„æœ‰æ•ˆç­‰ä»·ç±»ä¸è¾¹ç•Œå€¼è§„åˆ™è®¾è®¡ï¼š</p>
<blockquote>
<p>(aâ‰¥0)âˆ§(bâ‰¥0)âˆ§(câ‰¥0)âˆ§((a+b)&gt;c)âˆ§((a+c)&gt;b)âˆ§((b+c)&gt;a)âˆ§(a&#x3D;b&#x3D;c)</p>
</blockquote>
<p>åˆ¤æ–­ç­‰è¾¹ä¸‰è§’å½¢çš„æ— æ•ˆç­‰ä»·ç±»ä¸è¾¹ç•Œå€¼è§„åˆ™è®¾è®¡ï¼š</p>
<blockquote>
<p>â‘ (a!&#x3D;b)</p>
<p>â‘¡(aâ‰¤0)âˆ¨(bâ‰¤0)âˆ¨(câ‰¤0)</p>
</blockquote>
<p>æµ‹è¯•ç”¨ä¾‹</p>
<table>
<thead>
<tr>
<th>æµ‹è¯•ç”¨ä¾‹ç¼–å·</th>
<th>æµ‹è¯•ç”¨ä¾‹è¾“å…¥(a,b,c)</th>
<th>é¢„æœŸç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>(5,6,8)</td>
<td>ä¸€èˆ¬ä¸‰è§’å½¢</td>
</tr>
<tr>
<td>2</td>
<td>(5,6,5)</td>
<td>ç­‰è…°ä¸‰è§’å½¢</td>
</tr>
<tr>
<td>3</td>
<td>(5,5,5)</td>
<td>ç­‰è¾¹ä¸‰è§’å½¢</td>
</tr>
<tr>
<td>4</td>
<td>(5,0,5)</td>
<td>éä¸‰è§’å½¢</td>
</tr>
<tr>
<td>5</td>
<td>(2,2,5)</td>
<td>éä¸‰è§’å½¢</td>
</tr>
</tbody></table>
<h3 id="ç¬¬ä¸‰é¢˜"><a href="#ç¬¬ä¸‰é¢˜" class="headerlink" title="ç¬¬ä¸‰é¢˜"></a>ç¬¬ä¸‰é¢˜</h3><p>ç³»ç»Ÿçš„å¹´ã€æœˆã€æ—¥æ•°æ®ç”±Yã€Mã€Då•å…ƒæ¥å­˜å‚¨ç›¸åº”å€¼ï¼Œè‹¥è¦æµ‹è¯•NextDataï¼ˆY,M,Dï¼‰å‡½æ•°ï¼Œé‡‡ç”¨åˆ¤å®šè¡¨æ–¹æ³•è®¾è®¡ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>ç­”ï¼š</p>
<p>è¢«æµ‹å‡½æ•°åŠŸèƒ½ï¼šè¯¥ç¨‹åºè¾“å‡ºä¸ºè¾“å…¥æ—¥æœŸçš„ä¸‹ä¸€ä¸ªæ—¥æœŸã€‚</p>
<p>ä¾‹å¦‚ï¼šè¾“å…¥ä¸º2023å¹´4æœˆ2æ—¥ï¼Œå‡½æ•°è¾“å‡ºä¸º2023å¹´4æœˆ3æ—¥ã€‚</p>
<p>å‡½æ•°è¾“å…¥å˜é‡Yï¼ŒMï¼ŒDï¼Œå‡ä¸ºæ­£æ•´æ•°ï¼Œå¹¶æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š</p>
<p>1ï¼‰1900â‰¤Yâ‰¤2100</p>
<p>2ï¼‰1â‰¤Mâ‰¤12</p>
<p>3ï¼‰1â‰¤Dâ‰¤31</p>
<p>4ï¼‰èƒ½è¢« 400 æ•´é™¤ï¼Œæˆ–è€…èƒ½è¢«4æ•´é™¤ä½†ä¸èƒ½ 100 æ•´é™¤çš„éƒ¨æ˜¯é—°å¹´(366 å¤©)ï¼Œå…¶ä½™çš„å¹´ä»½å‡ä¸ºå¹³å¹´(365 å¤©)</p>
<table>
<thead>
<tr>
<th>è¾“å…¥å‚æ•°</th>
<th>æœ‰æ•ˆç­‰ä»·ç±»</th>
<th>æ— æ•ˆç­‰ä»·ç±»</th>
</tr>
</thead>
<tbody><tr>
<td>Y</td>
<td>1900â‰¤Yâ‰¤2100ï¼ŒY1é—°å¹´ï¼ŒY2å¹³å¹´</td>
<td>ï¼œ1900ï¼Œï¼2100ï¼Œéæ­£æ•´æ•°ï¼Œå…¶ä»–ç¬¦å·</td>
</tr>
<tr>
<td>M</td>
<td>1â‰¤Mâ‰¤12ï¼ŒM1{1,3,5,7,8,10}ï¼ŒM2{4,6,9,11}ï¼ŒM3{2}ï¼ŒM4{12}</td>
<td>&lt;1ï¼Œ&gt;12ï¼Œéæ­£æ•´æ•°ï¼Œå…¶ä»–ç¬¦å·</td>
</tr>
<tr>
<td>D</td>
<td>1â‰¤Dâ‰¤31ï¼ŒD1{1,27}ï¼ŒD2{28}ï¼ŒD3{29}ï¼ŒD4{30}ï¼ŒD5{31}</td>
<td>&lt;1ï¼Œ&gt;31ï¼ŒD6ï¼Œéæ­£æ•´æ•°ï¼Œå…¶ä»–ç¬¦å·</td>
</tr>
</tbody></table>
<p><em><strong>åˆ¤å®šè¡¨è®¾è®¡ï¼š</strong></em></p>
<p>ç»“æœï¼š</p>
<p>1ã€year,monthä¸å˜,day+1</p>
<p>2ã€yearä¸å˜,month+1,day&#x3D;1</p>
<p>3ã€year+1,month&#x3D;1,day&#x3D;1</p>
<p>4ã€é”™è¯¯çš„è¾“å…¥</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
<th>12</th>
</tr>
</thead>
<tbody><tr>
<td>Y</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
<td>Y1</td>
</tr>
<tr>
<td>M</td>
<td>M3</td>
<td>M3</td>
<td>M3</td>
<td>M1</td>
<td>M1</td>
<td>M1</td>
<td>M2</td>
<td>M2</td>
<td>M2</td>
<td>M4</td>
<td>M4</td>
<td>M4</td>
</tr>
<tr>
<td>D</td>
<td>D3</td>
<td>D2,D1</td>
<td>D4,D5</td>
<td>D5</td>
<td>D1,D2,D3,D4</td>
<td>D6</td>
<td>D4</td>
<td>D5,D6</td>
<td>D1,D2,D3</td>
<td>D5</td>
<td>D1,D2,D3,D4</td>
<td>D6</td>
</tr>
<tr>
<td>1</td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td>âˆš</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>âˆš</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹</th>
<th>13</th>
<th>14</th>
<th>15</th>
<th>16</th>
<th>17</th>
<th>18</th>
<th>19</th>
<th>20</th>
<th>21</th>
<th>22</th>
<th>23</th>
<th>24</th>
</tr>
</thead>
<tbody><tr>
<td>Y</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
<td>Y2</td>
</tr>
<tr>
<td>M</td>
<td>M3</td>
<td>M3</td>
<td>M3</td>
<td>M1</td>
<td>M1</td>
<td>M1</td>
<td>M2</td>
<td>M2</td>
<td>M2</td>
<td>M4</td>
<td>M4</td>
<td>M4</td>
</tr>
<tr>
<td>D</td>
<td>D2</td>
<td>D1</td>
<td>D3,D4,D5</td>
<td>D5</td>
<td>D1,D2,D3,D4</td>
<td>D6</td>
<td>D4</td>
<td>D5,D6</td>
<td>D1,D2,D3</td>
<td>D5</td>
<td>D5</td>
<td>D6</td>
</tr>
<tr>
<td>1</td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td>âˆš</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>âˆš</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
</tr>
</tbody></table>
<p>æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹åºå·</th>
<th>Y</th>
<th>M</th>
<th>D</th>
<th>é¢„æœŸè¾“å‡º</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>2023</td>
<td>4</td>
<td>1</td>
<td>2023,4,2</td>
</tr>
<tr>
<td>2</td>
<td>2023</td>
<td>3</td>
<td>28</td>
<td>2023,3,29</td>
</tr>
<tr>
<td>3</td>
<td>2023</td>
<td>3</td>
<td>29</td>
<td>2023,3,30</td>
</tr>
<tr>
<td>4</td>
<td>2023</td>
<td>3</td>
<td>30</td>
<td>2023,3,31</td>
</tr>
<tr>
<td>5</td>
<td>2023</td>
<td>3</td>
<td>31</td>
<td>2023,4,1</td>
</tr>
<tr>
<td>6</td>
<td>2023</td>
<td>11</td>
<td>28</td>
<td>2023,11,29</td>
</tr>
<tr>
<td>7</td>
<td>2023</td>
<td>11</td>
<td>29</td>
<td>2023,11,30</td>
</tr>
<tr>
<td>8</td>
<td>2023</td>
<td>11</td>
<td>30</td>
<td>2023,12,1</td>
</tr>
<tr>
<td>9</td>
<td>2023</td>
<td>11</td>
<td>31</td>
<td>é”™è¯¯</td>
</tr>
<tr>
<td>10</td>
<td>2023</td>
<td>2</td>
<td>28</td>
<td>2023,3,1</td>
</tr>
<tr>
<td>11</td>
<td>2023</td>
<td>2</td>
<td>29</td>
<td>é”™è¯¯</td>
</tr>
<tr>
<td>12</td>
<td>2023</td>
<td>2</td>
<td>30</td>
<td>é”™è¯¯</td>
</tr>
<tr>
<td>13</td>
<td>2023</td>
<td>2</td>
<td>31</td>
<td>é”™è¯¯</td>
</tr>
<tr>
<td>14</td>
<td>2020</td>
<td>2</td>
<td>28</td>
<td>2020,2,29</td>
</tr>
<tr>
<td>15</td>
<td>2020</td>
<td>2</td>
<td>29</td>
<td>2020,3,1</td>
</tr>
<tr>
<td>16</td>
<td>2020</td>
<td>2</td>
<td>30</td>
<td>é”™è¯¯</td>
</tr>
<tr>
<td>17</td>
<td>2020</td>
<td>2</td>
<td>31</td>
<td>é”™è¯¯</td>
</tr>
<tr>
<td>18</td>
<td>2020</td>
<td>12</td>
<td>28</td>
<td>2020,12,29</td>
</tr>
<tr>
<td>19</td>
<td>2020</td>
<td>12</td>
<td>29</td>
<td>2020,12,30</td>
</tr>
<tr>
<td>20</td>
<td>2020</td>
<td>12</td>
<td>30</td>
<td>2020,12,31</td>
</tr>
<tr>
<td>21</td>
<td>2020</td>
<td>12</td>
<td>31</td>
<td>2021,1,1</td>
</tr>
</tbody></table>
<hr>
<p>ä¸ªäººè§‰å¾—ä»¥ä¸Šåˆ¤å®šè¡¨çš„è®¾è®¡æ¯”è¾ƒå¤æ‚ğŸ¥ºï¼Œä¸€èˆ¬å¾ˆéš¾æƒ³åˆ°è¿™ä¹ˆè¯¦ç»†ï¼Œæˆ‘è®¤ä¸ºä¸‹é¢çš„åˆ¤å®šè¡¨æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°ğŸ¤¡</p>
<table>
<thead>
<tr>
<th></th>
<th>åºå·</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</tr>
</thead>
<tbody><tr>
<td>æ¡ä»¶</td>
<td>æ­£ç¡®è¾“å…¥å¹´Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>æ¡ä»¶</td>
<td>æ­£ç¡®è¾“å…¥æœˆM</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>æ¡ä»¶</td>
<td>æ­£ç¡®è¾“å…¥æ—¥D</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>åŠ¨ä½œ</td>
<td>å‡½æ•°è¿è¡ŒæˆåŠŸ</td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>åŠ¨ä½œ</td>
<td>å‡½æ•°è¿è¡Œå¤±è´¥</td>
<td></td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
</tbody></table>
<p>æµ‹è¯•ç”¨ä¾‹è¡¨çš„è¯å¯ä»¥æ¨¡ä»¿å‚è€ƒç­”æ¡ˆä¹¦å†™âœ</p>
<h3 id="ç¬¬å››é¢˜"><a href="#ç¬¬å››é¢˜" class="headerlink" title="ç¬¬å››é¢˜"></a>ç¬¬å››é¢˜</h3><p>é’ˆå¯¹æŸæœºæ„äººå‘˜ç®¡ç†çš„ä¸šåŠ¡è§„åˆ™éœ€æ±‚ï¼š</p>
<p>1ï¼‰å¹´è–ªåˆ¶å‘˜å·¥ï¼šä¸¥é‡è¿‡å¤±ï¼Œæ‰£å¹´ç»ˆé£é™©é‡‘çš„4%ï¼›è¿‡å¤±ï¼Œæ‰£å¹´ç»ˆé£é™©é‡‘çš„2%ã€‚</p>
<p>2ï¼‰éå¹´è–ªåˆ¶å‘˜å·¥ï¼šä¸¥é‡è¿‡å¤±ï¼Œæ‰£å½“æœˆè–ªèµ„çš„8%ï¼›è¿‡å¤±ï¼Œæ‰£å½“æœˆè–ªèµ„çš„4%ã€‚</p>
<p>è¯·ç»˜åˆ¶å‡ºå› æœå›¾å’Œåˆ¤å®šè¡¨ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>ç­”ï¼š</p>
<ul>
<li><p>å› æœåˆ†æ</p>
<p>åŸå› ï¼š</p>
<blockquote>
<p>C1ï¼šå¹´è–ªåˆ¶å‘˜å·¥</p>
<p>C3ï¼šä¸¥é‡è¿‡å¤±</p>
<p>C3ï¼šè¿‡å¤±</p>
</blockquote>
<p>ç»“æœï¼š</p>
<blockquote>
<p>e1ï¼šæ‰£å¹´ç»ˆé£é™©é‡‘çš„4%</p>
<p>e2ï¼šæ‰£å¹´ç»ˆé£é™©é‡‘çš„2%</p>
<p>e3ï¼šæ‰£æœˆè–ªèµ„çš„8%</p>
<p>e4ï¼šæ‰£æœˆè–ªèµ„çš„4%</p>
</blockquote>
</li>
<li><p>å› æœå›¾è®¾è®¡</p>
<p><img src="https://s2.loli.net/2023/05/31/7xV4hjUMqRTa3ky.png" alt="3HA4ZSM3_6U1BEFKKP_2H5U.png"></p>
</li>
<li><p>åˆ¤å®šè¡¨è®¾è®¡</p>
<table>
<thead>
<tr>
<th></th>
<th>åºå·</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</tr>
</thead>
<tbody><tr>
<td>æ¡ä»¶</td>
<td>C1ï¼šå¹´è–ªåˆ¶å‘˜å·¥</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>æ¡ä»¶</td>
<td>C3ï¼šä¸¥é‡è¿‡å¤±</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>æ¡ä»¶</td>
<td>C3ï¼šè¿‡å¤±</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>ç»“æœ</td>
<td>e1ï¼šæ‰£å¹´ç»ˆé£é™©é‡‘çš„4%</td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç»“æœ</td>
<td>e2ï¼šæ‰£å¹´ç»ˆé£é™©é‡‘çš„2%</td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç»“æœ</td>
<td>e3ï¼šæ‰£æœˆè–ªèµ„çš„8%</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç»“æœ</td>
<td>e4ï¼šæ‰£æœˆè–ªèµ„çš„4%</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
</tr>
<tr>
<td>ç»“æœ</td>
<td>ä¸æ“ä½œ</td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
</tr>
<tr>
<td>ç»“æœ</td>
<td>ä¸å¯èƒ½</td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p>æœ‰æ•ˆç­‰ä»·ç±»æµ‹è¯•ç”¨ä¾‹</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹</th>
<th>è¾“å…¥æ•°æ®</th>
<th>é¢„æœŸè¾“å‡º</th>
</tr>
</thead>
<tbody><tr>
<td>TC1</td>
<td>å¹´è–ªåˆ¶å‘˜å·¥ï¼Œä¸¥é‡è¿‡å¤±</td>
<td>æ‰£å¹´ç»ˆé£é™©é‡‘çš„4%</td>
</tr>
<tr>
<td>TC2</td>
<td>å¹´è–ªåˆ¶å‘˜å·¥ï¼Œè¿‡å¤±</td>
<td>æ‰£å¹´ç»ˆé£é™©é‡‘çš„2%</td>
</tr>
<tr>
<td>TC3</td>
<td>éå¹´è–ªåˆ¶å‘˜å·¥ï¼Œä¸¥é‡è¿‡å¤±</td>
<td>æ‰£æœˆè–ªèµ„çš„8%</td>
</tr>
<tr>
<td>TC4</td>
<td>éå¹´è–ªåˆ¶å‘˜å·¥ï¼Œè¿‡å¤±</td>
<td>æ‰£æœˆè–ªèµ„çš„4%</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="ç¬¬äº”é¢˜"><a href="#ç¬¬äº”é¢˜" class="headerlink" title="ç¬¬äº”é¢˜"></a>ç¬¬äº”é¢˜</h3><p>æµ‹è¯•ä¸€ä¸ªç™»å½•é¡µé¢åœ¨ä¸åŒæµè§ˆå™¨å’Œè¯­è¨€ä¸‹çš„åŠŸèƒ½æ­£ç¡®æ€§ï¼Œå…¶è¾“å…¥æ¡ä»¶å¦‚ä¸‹:</p>
<p>1ï¼‰è¾“å…¥é¡¹ï¼ˆè´¦å·ã€å¯†ç ï¼‰</p>
<p>2ï¼‰æµè§ˆå™¨ï¼ˆIEã€chromeã€FireFoxã€360ï¼‰</p>
<p>3ï¼‰è¯­è¨€ï¼ˆä¸­æ–‡ã€è‹±æ–‡ï¼‰</p>
<p>è¯·é—®è¿›è¡Œå®Œæ•´ç»„åˆçš„å…¼å®¹æ€§æµ‹è¯•éœ€è¦å¤šå°‘ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Ÿé‡‡ç”¨æˆå¯¹ç»„åˆçš„å…¼å®¹æ€§æµ‹è¯•éœ€è¦å¤šå°‘ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Ÿç»™å‡ºæˆå¯¹ç»„åˆæµ‹è¯•ç”¨ä¾‹è¡¨ã€‚</p>
<p>ç­”ï¼š</p>
<p>å®Œæ•´ç»„åˆæµ‹è¯•æœ‰2x2X4x2&#x3D;32 ä¸ªï¼Œæˆå¯¹ç»„åˆæµ‹è¯•éœ€è¦8ä¸ªæµ‹è¯•ç”¨ä¾‹</p>
<p>æˆå¯¹ç»„åˆæµ‹è¯•ç”¨ä¾‹è¡¨</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹</th>
<th>è´¦å·</th>
<th>å¯†ç </th>
<th>æµè§ˆå™¨</th>
<th>è¯­è¨€</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>ç©ºå€¼</td>
<td>ç©ºå€¼</td>
<td>IE</td>
<td>ä¸­æ–‡</td>
</tr>
<tr>
<td>2</td>
<td>ç©ºå€¼</td>
<td>æœ‰å€¼</td>
<td>chrome</td>
<td>è‹±æ–‡</td>
</tr>
<tr>
<td>3</td>
<td>æœ‰å€¼</td>
<td>ç©ºå€¼</td>
<td>FireFox</td>
<td>ä¸­æ–‡</td>
</tr>
<tr>
<td>4</td>
<td>æœ‰å€¼</td>
<td>æœ‰å€¼</td>
<td>360</td>
<td>è‹±æ–‡</td>
</tr>
<tr>
<td>5</td>
<td>ç©ºå€¼</td>
<td>ç©ºå€¼</td>
<td>360</td>
<td>ä¸­æ–‡</td>
</tr>
<tr>
<td>6</td>
<td>ç©ºå€¼</td>
<td>æœ‰å€¼</td>
<td>FireFox</td>
<td>è‹±æ–‡</td>
</tr>
<tr>
<td>7</td>
<td>æœ‰å€¼</td>
<td>ç©ºå€¼</td>
<td>chrome</td>
<td>ä¸­æ–‡</td>
</tr>
<tr>
<td>8</td>
<td>æœ‰å€¼</td>
<td>æœ‰å€¼</td>
<td>IE</td>
<td>è‹±æ–‡</td>
</tr>
</tbody></table>
<p><em><strong>ä»¥ä¸Šå†…å®¹æ¥è‡ªè€å¸ˆæä¾›çš„åŸç‰ˆç­”æ¡ˆï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£</strong></em>ğŸ˜†</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è½¯ä»¶æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µå¤§è½¯ä»¶æµ‹è¯•ï½ç¬¬ä¸‰æ¬¡ä½œä¸š</title>
    <url>/2023/06/01/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/test3/</url>
    <content><![CDATA[<h2 id="ç¬¬ä¸‰æ¬¡ä½œä¸š"><a href="#ç¬¬ä¸‰æ¬¡ä½œä¸š" class="headerlink" title="ç¬¬ä¸‰æ¬¡ä½œä¸š"></a>ç¬¬ä¸‰æ¬¡ä½œä¸š</h2><h3 id="ç¬¬ä¸€é¢˜"><a href="#ç¬¬ä¸€é¢˜" class="headerlink" title="ç¬¬ä¸€é¢˜"></a>ç¬¬ä¸€é¢˜</h3><p>é‡‡ç”¨JUnitè½¯ä»¶æµ‹è¯•æ¡†æ¶è¿›è¡Œæµ‹è¯•ç¨‹åºç¼–ç¨‹ï¼Œå®ç°å¯¹ä¸‹é¢javaç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæ‰¾å‡ºå…¶ä¸­ç¼ºé™·ã€‚ç„¶åä¿®æ”¹ç¼ºé™·ï¼Œç›´åˆ°é€šè¿‡å•å…ƒæµ‹è¯•ï¼Œç»™å‡ºæµ‹è¯•ç¨‹åºè„šæœ¬å’Œè¿è¡Œç»“æœç•Œé¢ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getMax</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get_max</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">	<span class="type">int</span> max;</span><br><span class="line">	<span class="keyword">if</span> (x &gt;= y) </span><br><span class="line">		max = x;</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">		max = y;</span><br><span class="line">	<span class="keyword">if</span> (z &gt;= x)</span><br><span class="line">		max = z;</span><br><span class="line">	<span class="keyword">return</span> max;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç­”ï¼š</p>
<p>æµ‹è¯•ç¨‹åºè„šæœ¬ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Assert;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> junit.framework.TestCase;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getMaxTest</span> <span class="keyword">extends</span> <span class="title class_">TestCase</span> &#123;</span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">       getMax Max=<span class="keyword">new</span> <span class="title class_">getMax</span>();</span><br><span class="line">       <span class="type">int</span> max= Max.get_max(<span class="number">7</span>,<span class="number">9</span>,<span class="number">8</span>);</span><br><span class="line">       Assert.assertEquals(<span class="number">9</span>,max);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Before</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@After</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯è¿è¡Œç»“æœï¼Œå‘ç°ä»£ç æœ‰ç¼ºé™·ï¼šzå¦‚æœæ¯”xå¤§ï¼Œä½†æ¯”yå°ï¼Œç¨‹åºä¼šè¾“å‡ºzï¼Œè€Œå®é™…æƒ…å†µæ˜¯yæœ€å¤§ã€‚</p>
<p><a href="https://imgse.com/i/p9zYRRP"><img src="https://s1.ax1x.com/2023/06/01/p9zYRRP.png" alt="p9zYRRP.png" border="0" /></a></p>
<p>ä¿®æ”¹ç¼ºé™·ï¼Œä»¥ä¸‹æ˜¯ä¿®æ”¹åçš„æºç¨‹åºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getMax</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get_max</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">	<span class="type">int</span> max;</span><br><span class="line">	<span class="keyword">if</span> (x &gt;= y) </span><br><span class="line">		max = x;</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">		max = y;</span><br><span class="line">	<span class="keyword">if</span> (z &gt;= max)</span><br><span class="line">		max = z;</span><br><span class="line">	<span class="keyword">return</span> max;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em><strong>å…¶å®å°±æ˜¯å°†å…¶ä¸­ä¸€ä¸ªxæ”¹æˆmax</strong></em></p>
<p>ä»¥ä¸‹æ˜¯å•å…ƒæµ‹è¯•é€šè¿‡çš„ç•Œé¢ï¼š</p>
<p><a href="https://imgse.com/i/p9zYoZQ"><img src="https://s1.ax1x.com/2023/06/01/p9zYoZQ.png" alt="p9zYoZQ.png" border="0" /></a></p>
<p>ç¼ºé™·ä¿®æ”¹æˆåŠŸã€‚</p>
<h3 id="ç¬¬äºŒé¢˜"><a href="#ç¬¬äºŒé¢˜" class="headerlink" title="ç¬¬äºŒé¢˜"></a>ç¬¬äºŒé¢˜</h3><p>é‡‡ç”¨Postmanæ¥å£æµ‹è¯•è½¯ä»¶å¯¹ç™¾åº¦ç™¾ç§‘<a href="https://baike.baidu.com/">https://baike.baidu.com/</a>æœç´¢å¼•æ“è¿›è¡Œæ¥å£æµ‹è¯•ã€‚å¦‚å¯¹è¯æ¡â€œè½¯ä»¶å·¥ç¨‹â€è¿”å›é¡µé¢å†…å®¹è¿›è¡Œæµ‹è¯•éªŒè¯ï¼Œç»™å‡ºè¯·æ±‚å‚æ•°è®¾ç½®ã€Testsè„šæœ¬ã€Bodyå“åº”ç»“æœã€Test Resultsç»“æœè¯´æ˜åŠè¿è¡Œç•Œé¢ã€‚</p>
<hr>
<p>ä»¥ä¸‹æ˜¯ç¬”è€…çš„åˆ†æè¿‡ç¨‹ï¼š</p>
<p>â€‹	åœ¨ç™¾åº¦ç™¾ç§‘é¡µé¢æœç´¢è½¯ä»¶å·¥ç¨‹ï¼Œå¾—åˆ°çš„ç½‘å€å¦‚ä¸‹ï¼š</p>
<p><a href="https://baike.baidu.com/item/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/25279?fromModule=lemma_search-box">https://baike.baidu.com/item/è½¯ä»¶å·¥ç¨‹/25279?fromModule=lemma_search-box</a></p>
<p>å¦‚æœæ˜¯å¸¸è§„çš„getè¯·æ±‚ï¼ˆå¤§å¤šæ•°é¡¹ç›®å¼€å‘è€…ä¼šè¿™æ ·è®¾ç½®)ï¼Œåœ¨urlé‡Œé¢åº”è¯¥æœ‰<u>?word&#x3D;è½¯ä»¶å·¥ç¨‹</u>çš„å­—ç¬¦ä¸²ï¼ˆä¸ä¸€å®šæ˜¯wordè¿™ä¸ªå•è¯ï¼Œä¸¾è¿™ä¸ªä¾‹å­è¡¨ç¤ºå½¢å¦‚è¿™ä¸ªurlï¼‰ï¼Œä½†æ˜¯è¯¥é“¾æ¥å¹¶ä¸å¦‚æ­¤ã€‚</p>
<p>â€‹	äºæ˜¯çŒœæµ‹æ˜¯postè¯·æ±‚ï¼ŒF12æ‰“å¼€å¼€å‘è€…å·¥å…·å¯¹è¾“å…¥æ¡†è¿›è¡Œåˆ†æï¼Œå‘ç°å®ƒåœ¨formè¡¨å•é‡Œï¼Œåˆæ­¥æ–­å®šæ˜¯postè¯·æ±‚ï¼Œä½†æ˜¯è¿™ä¸ªè¡¨å•ä¸æ˜¯å‘å½“å‰ç½‘å€æäº¤çš„ï¼Œè¡¨å•çš„actionå±æ€§æ˜¯&#x2F;seach&#x2F;wordï¼Œæ‰€ä»¥è¯·æ±‚çš„urlåº”è¯¥æ˜¯å…¶å¯¹åº”çš„ç»å¯¹è·¯å¾„ï¼ˆè¿˜å¾—æ‹ä¸ªå¼¯ğŸ¥ºï¼‰ï¼Œä¸º<a href="https://baike.baidu.com/search/word">https://baike.baidu.com/search/word</a></p>
<p><a href="https://imgse.com/i/p9zUnPA"><img src="https://s1.ax1x.com/2023/06/01/p9zUnPA.png" alt="p9zUnPA.png" border="0" /></a></p>
<p><a href="https://imgse.com/i/p9zalWR"><img src="https://s1.ax1x.com/2023/06/01/p9zalWR.png" alt="p9zalWR.png" border="0"></a></p>
<p>â€‹	è¿˜è¦æ³¨æ„åˆ°è¡¨å•çš„methodæ˜¯GETæ–¹æ³•ï¼Œäºæ˜¯æˆ‘å¤§èƒ†çš„çŒœæµ‹getæ–¹æ³•ä¹Ÿå¯ä»¥ï¼Œç»è¿‡postmanæµ‹è¯•ï¼Œç”¨getæ–¹æ³•å‘<a href="https://baike.baidu.com/search">https://baike.baidu.com/search</a>ä¹Ÿå¯ä»¥è¾¾åˆ°é¢„æœŸç›®æ ‡ã€‚</p>
<p><a href="https://imgse.com/i/p9za3S1"><img src="https://s1.ax1x.com/2023/06/01/p9za3S1.png" alt="p9za3S1.png" border="0"></a></p>
<hr>
<p>ç­”ï¼š</p>
<p>è¯·æ±‚å‚æ•°è®¾ç½®</p>
<blockquote>
<p>URLï¼š<a href="https://baike.baidu.com/search/word">https://baike.baidu.com/search/word</a></p>
<p>Method: post</p>
<p>Bodyï¼š</p>
<p>â€‹	é”®ï¼šword	å€¼ï¼šè½¯ä»¶å·¥ç¨‹</p>
</blockquote>
<p>æˆ–è€…</p>
<blockquote>
<p>URLï¼š<a href="https://baike.baidu.com/search">https://baike.baidu.com/search</a></p>
<p>Methodï¼šGET</p>
<p>å‚æ•°ï¼š</p>
<p>â€‹	é”®ï¼šword	å€¼ï¼šè½¯ä»¶å·¥ç¨‹</p>
</blockquote>
<p>Testsè„šæœ¬</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">pm.<span class="title function_">test</span>(<span class="string">&quot;Status code is 200&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    pm.<span class="property">response</span>.<span class="property">to</span>.<span class="property">have</span>.<span class="title function_">status</span>(<span class="number">200</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">pm.<span class="title function_">test</span>(<span class="string">&quot;Response body is not empty&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    pm.<span class="property">response</span>.<span class="property">to</span>.<span class="property">have</span>.<span class="title function_">body</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">pm.<span class="title function_">test</span>(<span class="string">&quot;The response contains the word &#x27;è½¯ä»¶å·¥ç¨‹&#x27;&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    pm.<span class="title function_">expect</span>(pm.<span class="property">response</span>.<span class="title function_">text</span>()).<span class="property">to</span>.<span class="title function_">include</span>(<span class="string">&quot;è½¯ä»¶å·¥ç¨‹&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Bodyå“åº”ç»“æœ</p>
<p>æŠŠä½ æ“ä½œç•Œé¢çš„bodyå¤åˆ¶ä¸‹æ¥å°±å¯ä»¥å•¦~å†…å®¹æœ‰å¾ˆå¤šï¼ˆæ¯•ç«Ÿæ˜¯ç™¾åº¦çš„ç¨‹åºå‘˜ğŸ˜ï¼‰</p>
<p>Test Resultsç»“æœ</p>
<p><a href="https://imgse.com/i/p9za5pn"><img src="https://s1.ax1x.com/2023/06/01/p9za5pn.png" alt="p9za5pn.png" border="0"></a></p>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°Status code is 200ï¼ŒResponse body is not emptyï¼ŒThe response contains the word â€˜è½¯ä»¶å·¥ç¨‹â€™ï¼Œä¸‰æ¬¡æµ‹è¯•å…¨éƒ¨é€šè¿‡ã€‚</p>
</blockquote>
<p>è¿è¡Œç•Œé¢</p>
<p><a href="https://imgse.com/i/p9zaIlq"><img src="https://s1.ax1x.com/2023/06/01/p9zaIlq.png" alt="p9zaIlq.png" border="0"></a></p>
<p>ä½†æ˜¯ä¸ºäº†å›¾æ–¹ä¾¿æ„Ÿè§‰ç”¨getç›´æ¥å‘<a href="https://baike.baidu.com/item/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B">https://baike.baidu.com/item/è½¯ä»¶å·¥ç¨‹</a>å‘è¯·æ±‚ä¹Ÿå¾—è¡Œï¼ˆè¿™æ ·å­å°±å°‘äº†å¾ˆå¤šåˆ†æå•¦~)</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è½¯ä»¶æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¯ä»¶æµ‹è¯•ä¸´è€ƒæ€»ç»“</title>
    <url>/2023/06/02/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/test4/</url>
    <content><![CDATA[<p>ç”±äºè€å¸ˆæ˜ç¡®è¯´ä¸è€ƒæ¦‚å¿µè®°å¿†é¢˜ğŸ˜†ï¼Œå¹¶ä¸”ä»æˆ‘ä»¬è¿™å±Šå¼€å§‹æ”¹ç‰ˆå…¨éƒ¨æ˜¯å¤§é¢˜ğŸ˜¤ï¼Œæ‰€ä»¥å°±ä¸è¦èƒŒé‚£ä¹ˆå¤šå¹²å·´å·´çš„çŸ¥è¯†ç‚¹å•¦~ï¼Œä½†æ˜¯ä¸€äº›å¿…è¦çš„æ¦‚å¿µè¿˜æ˜¯å¾—å¤§è‡´çŸ¥é“å•¥æ„æ€å§ï¼Œä»¥ä¸‹å†…å®¹éƒ½åŸºäºè€å¸ˆå‘çš„PPT(â—â€™â—¡â€™â—)</p>
<h2 id="ç¬¬ä¸€ç« -å¼•è®º"><a href="#ç¬¬ä¸€ç« -å¼•è®º" class="headerlink" title="ç¬¬ä¸€ç«  å¼•è®º"></a>ç¬¬ä¸€ç«  å¼•è®º</h2><p><strong>è½¯ä»¶æµ‹è¯•(Software Testingï¼‰</strong>æ˜¯ä¸€ç§æ£€æµ‹è½¯ä»¶çš„æ­£ç¡®æ€§ã€å®Œæ•´æ€§ã€å®‰å…¨æ€§å’Œè¯„ä¼°å…¶è´¨é‡çš„æ´»åŠ¨è¿‡ç¨‹ã€‚æ¢å¥è¯è¯´ï¼Œè½¯ä»¶æµ‹è¯•æ˜¯ä¸€ç§ä»¥å‘ç°ç¨‹åºé”™è¯¯ã€è¡¡é‡è½¯ä»¶è´¨é‡ä¸ºç›®çš„ï¼Œå¹¶å¯¹å…¶æ˜¯å¦æ»¡è¶³ç”¨æˆ·éœ€æ±‚è¿›è¡Œè¯„ä¼°çš„æ´»åŠ¨è¿‡ç¨‹ã€‚</p>
<p><strong>è½¯ä»¶è´¨é‡ä¿è¯ï¼ˆSoftware Quality Assuranceï¼ŒSQAï¼‰</strong>æ˜¯æŒ‡é€šè¿‡å¯¹è½¯ä»¶äº§å“è¿›è¡Œæœ‰è®¡åˆ’çš„è¯„å®¡ä¸å®¡è®¡ï¼Œæ¥ç¡®ä¿è½¯ä»¶å¼€å‘æŒ‰ç…§äº§å“è´¨é‡è¿‡ç¨‹æ ‡å‡†å®æ–½é¡¹ç›®çš„ç®¡ç†æ´»åŠ¨ã€‚</p>
<p>è½¯ä»¶è´¨é‡ä¿è¯ä¸è½¯ä»¶æµ‹è¯•çš„å…³ç³»ï¼š</p>
<blockquote>
<p>SQAæŒ‡å¯¼è½¯ä»¶æµ‹è¯•çš„è®¡åˆ’ä¸æ‰§è¡Œï¼Œç›‘ç£æµ‹è¯•å·¥ä½œç»“æœçš„å®¢è§‚æ€§ã€å‡†ç¡®æ€§ä¸æœ‰æ•ˆæ€§ï¼Œå¹¶ååŠ©è½¯ä»¶æµ‹è¯•çš„å·¥ä½œæµç¨‹æ”¹è¿›ã€‚</p>
<p>è½¯ä»¶æµ‹è¯•æ˜¯SQAå·¥ä½œè½å®çš„é‡è¦æ‰‹æ®µï¼Œå®ƒä¸ºSQAæä¾›æ‰€éœ€çš„è´¨é‡æ•°æ®ï¼Œä½œä¸ºè½¯ä»¶è´¨é‡è¯„ä»·çš„å®¢è§‚ä¾æ®ã€‚</p>
<p>SQAæ˜¯ä¸€é¡¹<em><strong>è½¯ä»¶è´¨é‡ç®¡ç†æ€§å·¥ä½œ</strong></em>ï¼Œä¾§é‡äºå¯¹è½¯ä»¶å¼€å‘æµç¨‹è¿›è¡Œè¯„å®¡ä¸ç›‘æ§ã€‚</p>
<p>è½¯ä»¶æµ‹è¯•æ˜¯ä¸€é¡¹<em><strong>æŠ€æœ¯æ€§å·¥ä½œ</strong></em>ï¼Œä¾§é‡äºå¯¹è½¯ä»¶è´¨é‡ç‰¹æ€§è¿›è¡Œæ£€æµ‹ä¸éªŒè¯ã€‚</p>
</blockquote>
<p><strong>æµ‹è¯•é©±åŠ¨å¼€å‘(Test-Driven Developmentï¼Œç®€ç§°TDDï¼‰</strong>æ˜¯ä¸€ç§ä¸åŒäºä¼ ç»Ÿè½¯ä»¶å¼€å‘æµç¨‹çš„è¿‡ç¨‹æ¨¡å‹ã€‚å®ƒè¦æ±‚åœ¨ç¼–å†™æŸä¸ªåŠŸèƒ½çš„ä»£ç ä¹‹å‰å…ˆç¼–å†™æµ‹è¯•ä»£ç ï¼Œç„¶åç¼–å†™åŠŸèƒ½ä»£ç ï¼Œé€šè¿‡æµ‹è¯•æ¥æ¨åŠ¨æ•´ä¸ªè½¯ä»¶å¼€å‘å·¥ä½œçš„è¿›è¡Œã€‚</p>
<p>ä¸‹é¢å“ªé¡¹æ´»åŠ¨ä¸æ˜¯è½¯ä»¶æµ‹è¯•èŒƒç•´</p>
<p>Aï¼éœ€æ±‚æ–‡æ¡£è¯„å®¡	B.è®¾è®¡è¯„å®¡	C.ä»£ç æµ‹è¯•	D.è¿‡ç¨‹è¯„å®¡</p>
<blockquote>
<p>è¿‡ç¨‹è¯„å®¡æ˜¯è´¨é‡ä¿è¯æ´»åŠ¨çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºè¯„ä¼°è½¯ä»¶å¼€å‘è¿‡ç¨‹æ˜¯å¦ç¬¦åˆæ—¢å®šæ ‡å‡†å’Œæµç¨‹ã€‚</p>
</blockquote>
<p>ç¼–ç¨‹å®Œæˆåæ‰è¿›è¡Œæµ‹è¯•å­˜åœ¨å“ªäº›é—®é¢˜?</p>
<blockquote>
<p>æµ‹è¯•çš„æ—¶é—´å¾ˆæœ‰é™ï¼Œå¾ˆéš¾è¾¾åˆ°æµ‹è¯•çš„è¦†ç›–ç‡è¦æ±‚å’Œæµ‹è¯•çš„è´¨é‡è¦æ±‚ã€‚åŒæ—¶ï¼Œå‡å¦‚åœ¨é¡¹ç›®å¼€å‘çš„åæœŸï¼Œå‘ç°ä¸€äº›è½¯ä»¶éœ€æ±‚é˜¶æ®µå’Œæ¦‚è¦è®¾è®¡é˜¶æ®µçš„é”™è¯¯å’Œé—®é¢˜ï¼Œä¿®æ”¹è¿™äº›ç¼ºé™·å¯¼è‡´çš„æˆæœ¬å°†æ˜¯éå¸¸é«˜çš„ã€‚</p>
</blockquote>
<h2 id="ç¬¬äºŒç« -è½¯ä»¶æµ‹è¯•åŸºæœ¬æ¦‚å¿µ"><a href="#ç¬¬äºŒç« -è½¯ä»¶æµ‹è¯•åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ç¬¬äºŒç«  è½¯ä»¶æµ‹è¯•åŸºæœ¬æ¦‚å¿µ"></a>ç¬¬äºŒç«  <strong>è½¯ä»¶æµ‹è¯•åŸºæœ¬æ¦‚å¿µ</strong></h2><p><strong>ç¼ºé™·</strong>(Defect)æ˜¯æŒ‡æ¬ ç¼ºæˆ–ä¸å¤Ÿå®Œå¤‡çš„åœ°æ–¹ã€‚å› ä¸ºç¼ºé™·æ˜¯ç›¸å¯¹è´¨é‡è¦æ±‚è€Œå­˜åœ¨çš„ï¼Œä»»ä½•è¿èƒŒäº†è´¨é‡è¦æ±‚ã€è¿èƒŒäº†å®¢æˆ·çš„æ„æ„¿ï¼Œä¸èƒ½æ»¡è¶³ç”¨æˆ·çš„è¦æ±‚ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç¼ºé™·ã€‚</p>
<p>IEEE STD729å…³äº<strong>è½¯ä»¶è´¨é‡</strong>å®šä¹‰:è½¯ä»¶äº§å“æˆ–æœåŠ¡æ»¡è¶³ç”¨æˆ·éœ€æ±‚çš„ç¨‹åº¦ã€‚</p>
<blockquote>
<p>â‘ è½¯ä»¶ç¼ºé™·åœ¨å¼€å‘æ—©æœŸå‡ºç°çš„æ¦‚ç‡å¤§ï¼Œåœ¨æ—©æœŸè¿›è¡Œç¼ºé™·ä¿®å¤çš„æˆæœ¬ä½ã€‚</p>
<p>â‘¡è½¯ä»¶åœ¨å¼€å‘åæœŸå‡ºç°ç¼ºé™·çš„æ¦‚ç‡å°ï¼Œä½†ä¿®å¤æˆæœ¬é«˜ã€‚</p>
<p>â‘¢è½¯ä»¶æµ‹è¯•å·¥ä½œåº”å°½æ—©å¼€å±•ã€‚</p>
</blockquote>
<p><a href="https://smms.app/image/Oc54oYf2KPN81hg" target="_blank"><img src="https://s2.loli.net/2023/06/02/Oc54oYf2KPN81hg.png" ></a></p>
<p>åœ¨ä»£ç å®¡æŸ¥ä¸­ï¼Œé™æ€æµ‹è¯•å¯å‘ç°å¦‚ä¸‹ç¼–ç¨‹ç¼ºé™·:</p>
<blockquote>
<p>å˜é‡åœ¨åˆå§‹åŒ–å‰ä½¿ç”¨ã€å˜é‡å£°æ˜åæœªä½¿ç”¨ã€å˜é‡åœ¨ä¸¤æ¬¡èµ‹å€¼ä¹‹é—´ä»æœªä½¿ç”¨</p>
<p>æ•°ç»„è®¿é—®è¶Šç•Œ</p>
<p>å­˜åœ¨ä¸å¯åˆ°è¾¾ä»£ç </p>
<p>å¾ªç¯ä¸­æ— æ¡ä»¶åˆ†æ”¯</p>
<p>æ¥å£å‚æ•°ç±»å‹æˆ–æ•°ç›®ä¸åŒ¹é…</p>
<p>ç©ºæŒ‡é’ˆæˆ–æŒ‡é’ˆç±»å‹é”™è¯¯</p>
<p>å­˜åœ¨æœªè¢«è°ƒç”¨çš„å‡½æ•°å’Œè¿‡ç¨‹</p>
</blockquote>
<p>æ¡ˆä¾‹ä¸€</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;(<span class="type">int</span>)attributeList.length();i++)&#123;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæŠŠåˆ¤æ–­æ¡ä»¶æ”¾åœ¨forè¯­å¥å†…ï¼Œæ¯ä¸€æ¬¡åˆ¤æ–­éƒ½è¦é‡æ–°è®¡ç®—lengthï¼Œ æµªè´¹èµ„æº</p>
<p>æ­£ç¡®ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> tmp_iListLength=attributeList.length()</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=O;i&lt;tmp_iListLength; i++)</span><br><span class="line">&#123;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹äºŒ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> i ;</span><br><span class="line">...</span><br><span class="line">printf(<span class="string">&quot;i= %d \n&quot;</span>,i) ;</span><br></pre></td></tr></table></figure>

<p>æ­£ç¡®ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> i=<span class="number">0</span> ;</span><br><span class="line">printf (<span class="string">&quot;i= %d \n&quot;</span>,i) ;</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹ä¸‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">int</span> array[] = <span class="literal">null</span>; <span class="comment">//å£°æ˜æ•°ç»„</span></span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];<span class="comment">//ä¸ºæ•°ç»„å¼€è¾Ÿç©ºé—´ï¼Œå¤§å°ä¸º3</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= array.length; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;array[&quot;</span> + i + <span class="string">&quot;]=&quot;</span> + array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼ºé™·åº”è¯¥æ˜¯æ•°ç»„ä¸‹æ ‡å¯èƒ½è¶Šç•Œ</p>
<p>ä¸ªäººä¿®æ”¹çš„ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">int</span> array[] = <span class="literal">null</span>; <span class="comment">//å£°æ˜æ•°ç»„</span></span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];<span class="comment">//ä¸ºæ•°ç»„å¼€è¾Ÿç©ºé—´ï¼Œå¤§å°ä¸º3</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;array[&quot;</span> + i + <span class="string">&quot;]=&quot;</span> + array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹å››</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;**********è®¡ç®—å¼€å§‹***********&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;      <span class="comment">// å®šä¹‰æ•´å‹å˜é‡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;      <span class="comment">//å®šä¹‰æ•´å‹å˜é‡</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> args[<span class="number">0</span>];  <span class="comment">// æ¥æ”¶ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> args[<span class="number">1</span>];  <span class="comment">// æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line">            i = Integer.parseInt(str1);<span class="comment">//å°†ç¬¬ä¸€ä¸ªå‚æ•°ç”±å­—ç¬¦ä¸²å˜ä¸ºæ•´å‹</span></span><br><span class="line">            j = Integer.parseInt(str2);<span class="comment">//å°†ç¬¬äºŒä¸ªå‚æ•°ç”±å­—ç¬¦ä¸²å˜ä¸ºæ•´å‹</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> i / j;           <span class="comment">//è¿›è¡Œé™¤æ³•è®¡ç®—</span></span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸¤ä¸ªæ•°å­—ç›¸é™¤çš„ç»“æœ:&quot;</span> + temp);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;<span class="comment">// æ•è·ç®—æœ¯å¼‚å¸¸System.out.println(&quot;å‡ºç°å¼‚å¸¸äº†: &quot; + e);</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;**********è®¡ç®—ç»“æŸ***********&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½çš„ç¼ºé™·ï¼š</p>
<blockquote>
<ul>
<li>åœ¨tryå—ä¸­ï¼Œä½¿ç”¨argsæ•°ç»„æ¥æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°ã€‚ç„¶è€Œï¼Œæ²¡æœ‰å¯¹argsæ•°ç»„çš„é•¿åº¦è¿›è¡Œæ£€æŸ¥æˆ–éªŒè¯ã€‚å¦‚æœæ²¡æœ‰ä¼ é€’è¶³å¤Ÿçš„å‚æ•°ï¼Œå°†ä¼šå¯¼è‡´ArrayIndexOutOfBoundsException(æ•°ç»„ç´¢å¼•è¶Šç•Œå¼‚å¸¸)ã€‚</li>
<li>åœ¨tryå—ä¸­ï¼Œå°†argsæ•°ç»„çš„å…ƒç´ ä½œä¸ºå­—ç¬¦ä¸²å‚æ•°ä¼ é€’ç»™parseInt()æ–¹æ³•è¿›è¡Œæ•´æ•°è½¬æ¢ã€‚ç„¶è€Œï¼Œå¦‚æœä¼ é€’çš„å‚æ•°æ— æ³•è§£æä¸ºæ•´æ•°ï¼Œå°†ä¼šå¯¼è‡´NumberFormatException(æ•°å­—æ ¼å¼å¼‚å¸¸)ã€‚</li>
<li>åœ¨catchå—ä¸­ï¼Œæ•è·äº†ArithmeticExceptionå¼‚å¸¸ï¼Œä½†æ˜¯è¯¥å¼‚å¸¸åªèƒ½æ•è·é™¤ä»¥0å¯¼è‡´çš„ç®—æœ¯å¼‚å¸¸ã€‚å¦‚æœå‡ºç°å…¶ä»–ç±»å‹çš„å¼‚å¸¸ï¼Œå°†æ— æ³•è¢«æ•è·å’Œå¤„ç†ã€‚</li>
</ul>
</blockquote>
<p>æ­£ç¡®ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;********** è®¡ç®—å¼€å§‹ ***********&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (args.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;ç¼ºå°‘å¿…è¦çš„å‚æ•°&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> Integer.parseInt(args[<span class="number">1</span>]);</span><br><span class="line">            </span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> i / j;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸¤ä¸ªæ•°å­—ç›¸é™¤çš„ç»“æœ: &quot;</span> + temp);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å‚æ•°æ ¼å¼é”™è¯¯: &quot;</span> + e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸º0: &quot;</span> + e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å‚æ•°é”™è¯¯: &quot;</span> + e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;********** è®¡ç®—ç»“æŸ ***********&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠ¨æ€æµ‹è¯•æ˜¯é€šè¿‡è¿è¡Œè¢«æµ‹è½¯ä»¶ç¨‹åºï¼Œè§‚å¯Ÿè¯¥ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­çš„ç³»ç»Ÿè¡Œä¸ºã€å˜é‡ç»“æœã€å†…å­˜ã€å †æ ˆç­‰è¿è¡Œæ•°æ®ï¼Œæ¥åˆ¤æ–­è½¯ä»¶ç³»ç»Ÿæ˜¯å¦å­˜åœ¨ç¼ºé™·çš„æµ‹è¯•æ´»åŠ¨ã€‚<br>åŠ¨æ€æµ‹è¯•å¯å‘ç°çš„ä¸»è¦ç¼ºé™·:</p>
<blockquote>
<p>ç¨‹åºé€»è¾‘é”™è¯¯</p>
<p>å¼‚å¸¸è¾“å…¥çš„åŠŸèƒ½å¤±æ•ˆ</p>
<p>ç©ºæŒ‡é’ˆä½¿ç”¨</p>
<p>å†…å­˜æ²¡æœ‰åŠæ—¶é‡Šæ”¾å…³é—­çš„å¯¹è±¡èµ„æº</p>
<p>Sessionå¤±æ•ˆ</p>
<p>æ²¡æœ‰å¤„ç†åœ¨ç©ºè¾“å…¥æ—¶ç‚¹å–Enteré”®æƒ…å†µ</p>
</blockquote>
<p>æ¡ˆä¾‹ä¸€</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    String name; <span class="comment">// å£°æ˜å§“åå±æ€§</span></span><br><span class="line">    <span class="type">int</span> age; <span class="comment">// å£°æ˜å¹´é¾„å±æ€§</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tell</span><span class="params">()</span> &#123; <span class="comment">// å–å¾—ä¿¡æ¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å§“å: &quot;</span> + name + <span class="string">&quot;ï¼Œå¹´é¾„: &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">per</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// å£°æ˜å¯¹è±¡</span></span><br><span class="line">        per.name = <span class="string">&quot;å¼ ä¸‰&quot;</span>; <span class="comment">// ä¸ºå§“åèµ‹å€¼</span></span><br><span class="line">        per.age = <span class="number">30</span>; <span class="comment">// ä¸ºå¹´é¾„èµ‹å€¼</span></span><br><span class="line">        per.print(); <span class="comment">// è°ƒç”¨æ–¹æ³•ï¼Œæ‰“å°ä¿¡æ¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ClassDemoç±»çš„mainæ–¹æ³•ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªPersonå¯¹è±¡perï¼Œä½†æ²¡æœ‰å®é™…å®ä¾‹åŒ–è¯¥å¯¹è±¡ï¼Œè€Œæ˜¯å°†å…¶åˆå§‹åŒ–ä¸ºnullã€‚è¿™æ„å‘³ç€perå¯¹è±¡æ²¡æœ‰è¢«æ­£ç¡®åœ°åˆ›å»ºå’Œåˆå§‹åŒ–ï¼Œå› æ­¤åœ¨å°è¯•ä¸ºperå¯¹è±¡çš„nameå’Œageå±æ€§èµ‹å€¼æ—¶ä¼šå¯¼è‡´NullPointerException(ç©ºæŒ‡é’ˆå¼‚å¸¸)ã€‚<br>åœ¨Personç±»çš„tell()æ–¹æ³•ä¸­ï¼Œæ‰“å°ä¿¡æ¯çš„è¯­å¥ä½¿ç”¨äº†per.print()ï¼Œä½†å®é™…ä¸Šåº”è¯¥è°ƒç”¨çš„æ˜¯per.tell()ï¼Œå› ä¸ºtell()æ–¹æ³•æ˜¯å®šä¹‰åœ¨Personç±»çš„ã€‚</p>
</blockquote>
<p>æ¡ˆä¾‹äºŒ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">OutputStream os=<span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    os=<span class="keyword">new</span> <span class="title class_">OutputStream</span>();</span><br><span class="line">      <span class="comment">//Do something with os here.</span></span><br><span class="line">    os.close();</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        <span class="keyword">if</span>(os!=<span class="literal">null</span>)</span><br><span class="line">         os.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­£ç¡®ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">OutputStream os=<span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    os=<span class="keyword">new</span> <span class="title class_">OutputStream</span>();</span><br><span class="line">      <span class="comment">//Do something with os here.</span></span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(os!=<span class="literal">null</span>)</span><br><span class="line">     os.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹åçš„ä»£ç ä½¿ç”¨äº† <code>finally</code> å—æ¥ç¡®ä¿åœ¨æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹éƒ½èƒ½å…³é—­è¾“å‡ºæµã€‚</p>
<p><strong>è½¯ä»¶éªŒè¯ï¼ˆ(verificationï¼‰</strong>æ˜¯æŒ‡åœ¨å¼€å‘è½¯ä»¶è¿‡ç¨‹ä¸­ï¼Œæ£€éªŒè½¯ä»¶æ˜¯å¦å·²æ­£ç¡®åœ°å®ç°äº†äº§å“è§„æ ¼è¯´æ˜ä¹¦æ‰€å®šä¹‰çš„ç³»ç»ŸåŠŸèƒ½å’Œç‰¹æ€§ã€‚<br><strong>è½¯ä»¶ç¡®è®¤(validationï¼‰</strong>æ˜¯æŒ‡åœ¨å¼€å‘è½¯ä»¶å®Œæˆåï¼Œæ£€æŸ¥è½¯ä»¶äº§å“æ˜¯å¦ç¬¦åˆç”¨æˆ·çš„çœŸå®éœ€æ±‚ã€‚</p>
<blockquote>
<p>éªŒè¯:æˆ‘ä»¬æ­£ç¡®åœ°æ„é€ äº†äº§å“å—?</p>
<p>ç¡®è®¤:æˆ‘ä»¬æ„é€ äº†æ­£ç¡®çš„äº§å“å—?</p>
</blockquote>
<p><em><strong>é»‘ç›’æµ‹è¯•</strong></em>æ˜¯æŒ‡åœ¨æµ‹è¯•ä¸­ï¼ŒæŠŠç¨‹åºçœ‹ä½œä¸€ä¸ªä¸èƒ½æ‰“å¼€çš„é»‘ç›’å­ã€‚åœ¨å®Œå…¨ä¸è€ƒè™‘ç¨‹åºå†…éƒ¨ç»“æ„å’Œå†…éƒ¨ç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œå¯¹ç¨‹åºåŠŸèƒ½è¿›è¡Œæµ‹è¯•ï¼Œæ£€æŸ¥ç¨‹åºåŠŸèƒ½æ˜¯å¦æŒ‰ç…§éœ€æ±‚è§„æ ¼è¯´æ˜è¿›è¡Œæœ‰æ•ˆå®ç°ã€æ˜¯å¦èƒ½é€‚å½“åœ°æ¥æ”¶è¾“å…¥æ•°æ®è€Œäº§ç”Ÿæ­£ç¡®çš„è¾“å‡ºä¿¡æ¯ã€‚</p>
<p>é»‘ç›’æµ‹è¯•æ˜¯ä»ç”¨æˆ·è§‚ç‚¹å‡ºå‘å¼€å±•çš„æµ‹è¯•ï¼Œå…¶ç›®çš„æ˜¯å°½å¯èƒ½å‘ç°è½¯ä»¶çš„å¤–éƒ¨è¡Œä¸ºé”™è¯¯ã€‚é»‘ç›’æµ‹è¯•å¸¸ç”¨äºå‘ç°ä»¥ä¸‹ç¼ºé™·:</p>
<blockquote>
<p>æ£€æµ‹è½¯ä»¶æ˜¯å¦æœ‰é”™è¯¯çš„åŠŸèƒ½æˆ–æœ‰åŠŸèƒ½é—æ¼<br>ä¸èƒ½æ­£ç¡®åœ°æ¥æ”¶è¾“å…¥æ•°æ®ã€è¾“å‡ºé”™è¯¯çš„ç»“æœ<br>åŠŸèƒ½æ“ä½œä¸å¤Ÿæ–¹ä¾¿<br>ç•Œé¢å‡ºé”™ã€æ‰­æ›²æˆ–ä¸ç¾è§‚<br>å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜ï¼Œå®‰è£…æ­¥éª¤ä¸æ¸…æ™°ã€ä¸çµæ´»<br>ç³»ç»Ÿåˆå§‹åŒ–å­˜åœ¨é—®é¢˜</p>
</blockquote>
<p><em><strong>ç™½ç›’æµ‹è¯•</strong></em>æ˜¯æŒ‡åœ¨äº†è§£è¢«æµ‹ç¨‹åºå†…éƒ¨é€»è¾‘ç»“æ„æƒ…å†µä¸‹ï¼Œå¯¹è¯¥ç¨‹åºçš„å†…éƒ¨å˜é‡ã€é€»è¾‘ç»“æ„ã€è¿è¡Œè·¯å¾„è¿›è¡Œæµ‹è¯•ï¼Œæ£€éªŒè¢«æµ‹ç¨‹åºçš„å†…éƒ¨åŠ¨ä½œæˆ–è¿è¡ŒåŠŸèƒ½æ˜¯å¦ç¬¦åˆè®¾è®¡è§„æ ¼è¦æ±‚ã€‚</p>
<p>ç™½ç›’æµ‹è¯•å¸¸ç”¨äºå‘ç°ä»¥ä¸‹ç¼ºé™·:</p>
<blockquote>
<p>ç¨‹åºé€»è¾‘é”™è¯¯<br>ç¨‹åºçŠ¶æ€å¼‚å¸¸<br>ç¨‹åºè·¯å¾„æ— æ³•è·³è½¬<br>å˜é‡é—æ¼åˆå§‹åŒ–</p>
</blockquote>
<p><em><strong>å•å…ƒæµ‹è¯•</strong></em></p>
<blockquote>
<p>å•å…ƒæµ‹è¯•é’ˆå¯¹è½¯ä»¶ç¨‹åºä¸­çš„<strong>æœ€å°åŠŸèƒ½å•å…ƒä»£ç </strong>ï¼ˆç±»ã€å‡½æ•°ã€æ¨¡å—æˆ–ç»„ä»¶)è¿›è¡Œæµ‹è¯•ã€‚<br>ä¸»è¦é‡‡ç”¨ç™½ç›’æµ‹è¯•æ–¹æ³•ï¼Œä»ç¨‹åºçš„å†…éƒ¨ç»“æ„å‡ºå‘è®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œæ£€æŸ¥å•å…ƒç¨‹åºå·²å®ç°åŠŸèƒ½ä¸è®¾è®¡è§„æ ¼æ˜¯å¦ä¸€è‡´ã€ä»¥åŠç¼–ç ä¸­æ˜¯å¦å­˜åœ¨é€»è¾‘é”™è¯¯ã€‚<br>å•å…ƒæµ‹è¯•ä¸€èˆ¬ç”±ç¼–ç¨‹äººå‘˜å’Œæµ‹è¯•äººå‘˜å…±åŒå®Œæˆï¼Œè€Œä»¥å¼€å‘äººå‘˜ä¸ºä¸»ã€‚é€šå¸¸éœ€è¦ç¼–å†™<strong>é©±åŠ¨æ¨¡å—</strong>å’Œ<strong>æ¡©æ¨¡å—</strong>ã€‚<br>å•å…ƒæµ‹è¯•è¿˜é‡‡ç”¨ä»£ç è¯„å®¡æ–¹æ³•ï¼ˆèµ°è¯»ã€é™æ€åˆ†æã€è¯„å®¡ï¼‰æ£€æŸ¥ç¨‹åºé”™è¯¯ï¼Œä»£ç è¯„å®¡å¯ä»¥å‘ç°ç¨‹åº**50%ï½70%**ä»£ç çš„ç¼ºé™·ã€‚</p>
</blockquote>
<p><strong>é›†æˆæµ‹è¯•</strong>ï¼ˆä¹Ÿç§°ç»„è£…æµ‹è¯•ã€è”åˆæµ‹è¯•ï¼‰æ˜¯ä¸€ç§åœ¨å•å…ƒæµ‹è¯•çš„åŸºç¡€ä¸Šï¼Œå°†è‹¥å¹²å•å…ƒæ¨¡å—æŒ‰ç…§è®¾è®¡è¦æ±‚ç»„è£…èµ·æ¥æ‰€è¿›è¡Œçš„æµ‹è¯•ï¼Œå…¶ç›®æ ‡æ˜¯å‘ç°æ¨¡å—æ¥å£ç›¸å…³é—®é¢˜ã€‚</p>
<p><strong>ç³»ç»Ÿæµ‹è¯•</strong>æ˜¯åœ¨é›†æˆæµ‹è¯•ä¹‹åï¼Œåœ¨ç³»ç»Ÿå±‚é¢æ‰€è¿›è¡Œçš„åŠŸèƒ½ç‰¹æ€§æµ‹è¯•å’ŒéåŠŸèƒ½ç‰¹æ€§æµ‹è¯•ã€‚</p>
<p><strong>éªŒæ”¶æµ‹è¯•</strong>æ˜¯åœ¨è½¯ä»¶æäº¤ç”¨æˆ·å‰ï¼Œåœ¨å®é™…ç”¨æˆ·ç¯å¢ƒä¸­ï¼ŒéªŒè¯è½¯ä»¶ç³»ç»ŸåŠŸèƒ½ã€æ€§èƒ½åŠå…¶å®ƒç‰¹æ€§æ˜¯å¦ç¬¦åˆç”¨æˆ·éœ€æ±‚ã€‚</p>
<ul>
<li>Î±æµ‹è¯•â€”â€”è½¯ä»¶å…¬å¸åœ¨å…¶äº§å“æ¨å‘å¸‚åœºå‰ï¼Œé‡‡ç”¨å®é™…è¿è¡Œç¯å¢ƒå’ŒçœŸå®æ•°æ®åœ¨è½¯ä»¶å…¬å¸å†…éƒ¨è¿›è¡Œçš„éªŒæ”¶æµ‹è¯•ã€‚</li>
<li>Î²æµ‹è¯•â€”â€”è½¯ä»¶å…¬å¸åœ¨å…¶äº§å“æ¨å‘å¸‚åœºå‰ï¼Œè¿˜éœ€è¦åœ¨å…¬å¸å¤–éƒ¨ç”¨æˆ·ä¸­è¿›è¡Œè¯•ç”¨æµ‹è¯•ã€‚é€šè¿‡æ”¶é›†è¯•ç”¨æˆ·çš„åé¦ˆæ„è§ï¼Œå¯¹è¯¥ç‰ˆæœ¬è½¯ä»¶è¿›è¡Œä¿®æ­£ä¸å®Œå–„ï¼Œæœ€ç»ˆå¾—åˆ°æ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬ã€‚</li>
</ul>
<h2 id="ç¬¬ä¸‰ç« -è½¯ä»¶æµ‹è¯•æ–¹æ³•"><a href="#ç¬¬ä¸‰ç« -è½¯ä»¶æµ‹è¯•æ–¹æ³•" class="headerlink" title="ç¬¬ä¸‰ç«  è½¯ä»¶æµ‹è¯•æ–¹æ³•"></a>ç¬¬ä¸‰ç«  è½¯ä»¶æµ‹è¯•æ–¹æ³•</h2><h3 id="åŸºäºç›´è§‰å’Œç»éªŒçš„æ–¹æ³•"><a href="#åŸºäºç›´è§‰å’Œç»éªŒçš„æ–¹æ³•" class="headerlink" title="åŸºäºç›´è§‰å’Œç»éªŒçš„æ–¹æ³•"></a>åŸºäºç›´è§‰å’Œç»éªŒçš„æ–¹æ³•</h3><blockquote>
<p><strong>Ad-hocæµ‹è¯•æ–¹æ³•</strong>å¼ºè°ƒæµ‹è¯•äººå‘˜æ›´å¤šæ ¹æ®è‡ªå·±çš„ä¸“ä¸šç»éªŒï¼Œä¸å—æµ‹è¯•ç”¨ä¾‹çº¦æŸï¼Œæ”¾å¼€æ€è·¯ã€çµæ´»åœ°è¿›è¡Œå„ç§æµ‹è¯•ã€‚<br><strong>ALAC ( Act-like-a-customerï¼Œåƒå®¢æˆ·é‚£æ ·åš</strong>ï¼‰æµ‹è¯•æ–¹æ³•æ˜¯ä¸€ç§åŸºäºå®¢æˆ·ä½¿ç”¨äº§å“çš„ç»éªŒçŸ¥è¯†è¿›è¡Œç³»ç»Ÿæµ‹è¯•ï¼Œå…¶å‡ºå‘ç‚¹æ˜¯åº”ç”¨å¸•ç´¯æ‰˜(Paretoï¼‰äºŒå…«æ³•åˆ™è¿›è¡Œé‡ç‚¹æµ‹è¯•ã€‚<br><strong>é”™è¯¯æ¨æµ‹æ³•</strong>æ˜¯æµ‹è¯•è€…æ ¹æ®è‡ªå·±çš„å·¥ä½œç»éªŒã€ä¸“ä¸šçŸ¥è¯†å’Œç›´è§‰æ¥æ¥æ¨æµ‹å‡ºè½¯ä»¶ä¸­å¯èƒ½å­˜åœ¨çš„å„ç§é”™è¯¯ï¼Œä»è€Œå¯¹è¢«æµ‹è½¯ä»¶é‡‡ç”¨é’ˆå¯¹æ€§çš„æµ‹è¯•ã€‚</p>
</blockquote>
<h3 id="åŸºäºè¾“å…¥åŸŸæ–¹æ³•ï¼ˆæ•°æ®é©±åŠ¨æµ‹è¯•ï¼‰"><a href="#åŸºäºè¾“å…¥åŸŸæ–¹æ³•ï¼ˆæ•°æ®é©±åŠ¨æµ‹è¯•ï¼‰" class="headerlink" title="åŸºäºè¾“å…¥åŸŸæ–¹æ³•ï¼ˆæ•°æ®é©±åŠ¨æµ‹è¯•ï¼‰"></a>åŸºäºè¾“å…¥åŸŸæ–¹æ³•ï¼ˆæ•°æ®é©±åŠ¨æµ‹è¯•ï¼‰</h3><p><em><strong>ç­‰ä»·ç±»åˆ’åˆ†æ³•ï¼š</strong></em></p>
<p>ä¸€ä¸ªç¨‹åºPæœ‰ä¸¤ä¸ªæ•´å‹è¾“å…¥å˜é‡I1ã€I2ï¼Œè¾“å‡ºå˜é‡ä¸ºOut,å…¶è®¡ç®—å‡½æ•°ä¸ºOut&#x3D;P(l1,I2)ï¼Œå‡å®šåœ¨å­—é•¿32ä½è®¡ç®—æœºä¸Šè¿è¡Œã€‚æ‰€æœ‰è¾“å…¥æ•°æ®ç»„åˆæœ‰å¤šå°‘?	<em><strong>2Â³Â²x 2Â³Â²&#x3D;2â¶â´</strong></em></p>
<p>ä¾‹ï¼šé‡‡è´­æ”¶è´§å•æŠ¥è¡¨ç³»ç»Ÿï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥å¤„ç†æŠ¥è¡¨çš„æ—¥æœŸã€‚å‡å®šæ—¥æœŸé™å®šåœ¨2000å¹´1æœˆ1æ—¥åˆ°2023å¹´12æœˆ30æ—¥ã€‚è¯·è®¾è®¡â€œæ—¥æœŸâ€è¾“å…¥æ•°æ®éªŒè¯çš„ç­‰ä»·ç±»ã€‚</p>
<blockquote>
<p>æœ‰æ•ˆæ—¥æœŸçš„ç­‰ä»·ç±»:2000å¹´1æœˆ1æ—¥åˆ°2023å¹´12æœˆ30æ—¥çš„æ—¥æœŸå€¼<br>æ— æ•ˆæ—¥æœŸçš„ç­‰ä»·ç±»:å°äº2000å¹´1æœˆ1æ—¥çš„æ—¥æœŸå€¼<br>æ— æ•ˆæ—¥æœŸçš„ç­‰ä»·ç±»:å¤§äº2023å¹´12æœˆ30æ—¥çš„æ—¥æœŸå€¼</p>
</blockquote>
<p>ä¾‹ï¼šé‡‡è´­æ”¶è´§å•æŠ¥è¡¨ç³»ç»Ÿï¼Œå¯¹äºå•†å“æ•°é‡è¾“å…¥æ•°æ®ï¼Œåº”ä¸ºå¤§äº0çš„æ•´æ•°ï¼Œæ‰èƒ½ç¬¦åˆä¸šåŠ¡è¦æ±‚ã€‚è¯·è®¾è®¡â€œæ•°é‡â€è¾“å…¥æ•°æ®éªŒè¯çš„ç­‰ä»·ç±»ã€‚</p>
<blockquote>
<p>æœ‰æ•ˆâ€œæ•°é‡â€å­—æ®µè¾“å…¥ç­‰ä»·ç±»:å¤§äº0çš„æ•´æ•°ã€‚<br>æ— æ•ˆâ€œæ•°é‡â€å­—æ®µè¾“å…¥ç­‰ä»·ç±»:å°äºç­‰äº0çš„æ•´æ•°ã€‚</p>
</blockquote>
<p>ä¾‹ï¼šèˆªç­è®¡åˆ’ç³»ç»Ÿï¼Œå¯¹äºæŸèˆªç­è®¾å®šæ˜¯å¦ä¸ºå¾€è¿”èˆªç­ï¼Œå…¶è¾“å…¥æ•°æ®åº”é‡‡ç”¨å¸ƒå°”æ•°å€¼ï¼Œæ‰èƒ½ç¬¦åˆä¸šåŠ¡è¦æ±‚ã€‚è¯·è®¾è®¡â€œæ¥å›ç¨‹â€è¾“å…¥æ•°æ®éªŒè¯çš„ç­‰ä»·ç±»ã€‚</p>
<blockquote>
<p>æœ‰æ•ˆçš„â€œæ¥å›ç¨‹â€å­—æ®µæ•°æ®è¾“å…¥ç­‰ä»·ç±»:çœŸ&#x2F;å‡å¸ƒå°”å€¼ã€‚<br>æ— æ•ˆçš„â€œæ¥å›ç¨‹â€å­—æ®µæ•°æ®è¾“å…¥ç­‰ä»·ç±»:å…¶å®ƒä»»ä½•å€¼ã€‚</p>
</blockquote>
<p>ä¾‹ï¼šå¯¹äºè®¡ç®—å™¨è½¯ä»¶çš„åŠ æ³•è¿ç®—åŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚è¯·è®¾è®¡â€œ+â€åŠŸèƒ½æµ‹è¯•çš„ç­‰ä»·ç±»ã€‚</p>
<blockquote>
<p>æœ‰æ•ˆçš„æ•°æ®è¾“å…¥ç­‰ä»·ç±»:æ•´å‹æ•°å€¼<br>æœ‰æ•ˆçš„æ•°æ®è¾“å…¥ç­‰ä»·ç±»:å®æ•°æ•°å€¼<br>æœ‰æ•ˆçš„æ•°æ®è¾“å…¥ç­‰ä»·ç±»:è´Ÿæ•°æ•°å€¼<br>æ— æ•ˆçš„æ•°æ®è¾“å…¥ç­‰ä»·ç±»:éæ•°å­—ç¬¦å·</p>
</blockquote>
<p>ä¾‹:å››å·åœ°ç¨å‘ç¥¨æŸ¥è¯¢é¡µé¢çš„å‘ç¥¨é‡‘é¢å­—æ®µè¾“å…¥æ£€æŸ¥åŠŸèƒ½æµ‹è¯•ã€‚</p>
<blockquote>
<p>æœ‰æ•ˆçš„â€œå‘ç¥¨é‡‘é¢â€å­—æ®µæ•°æ®è¾“å…¥ç­‰ä»·ç±»:å¤§äº0çš„æ•°å€¼æ•°æ®ã€‚<br>æ— æ•ˆçš„â€œå‘ç¥¨é‡‘é¢â€å­—æ®µæ•°æ®è¾“å…¥ç­‰ä»·ç±»:éæ•°å€¼æ•°æ®ã€‚<br>æ— æ•ˆçš„â€œå‘ç¥¨é‡‘é¢â€å­—æ®µæ•°æ®è¾“å…¥ç­‰ä»·ç±»:å°äºç­‰äº0çš„æ•°å€¼</p>
</blockquote>
<p><em><strong>è¾¹ç•Œå€¼åˆ†ææ³•</strong></em>å°±æ˜¯åœ¨æŸä¸ªè¾“å…¥å˜é‡èŒƒå›´çš„è¾¹ç•Œä¸Šï¼Œè¾“å…¥ä¸€äº›ç‰¹å®šæ•°æ®ï¼Œåˆ†æéªŒè¯ç³»ç»ŸåŠŸèƒ½æ˜¯å¦æ­£å¸¸è¿è¡Œçš„æµ‹è¯•æ–¹æ³•ã€‚</p>
<p>ä¾‹ï¼šé…’åº—é¢„è®¢ç³»ç»Ÿä¸šåŠ¡è§„å®šå®¢æˆ·æœ€å¤šå¯æå‰20å¤©é¢„è®¢é…’åº—å®¢æˆ¿ã€‚è¯·æŒ‰è¾¹ç•Œå€¼åˆ†ææ³•è®¾è®¡é…’åº—æœç´¢åŠŸèƒ½çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<blockquote>
<p>å‡å®šå®¢äººåœ¨2023-3-12è¿›è¡Œè®¢æˆ¿æ“ä½œï¼Œé¢„è®¢åé¢10åˆ°20å¤©å†…å…¥ä½å®¢æˆ¿ï¼Œå…¶æµ‹è¯•è¾¹ç•Œå€¼å¯è®¾ç½®ä¸º:2023-3-21ã€2023-3-31ã€2023-4-1</p>
</blockquote>
<p>ç­‰ä»·ç±»åˆ’åˆ†æ³•å’Œè¾¹ç•Œå€¼åˆ†ææ³•ä»…é€‚ç”¨äºå•å› ç´ ï¼ˆå•å˜é‡ï¼‰è¾“å…¥çš„æ•°æ®æµ‹è¯•ã€‚</p>
<h3 id="åŸºäºç»„åˆåŠå…¶ä¼˜åŒ–æ–¹æ³•ï¼ˆå¤šå˜é‡ï¼‰"><a href="#åŸºäºç»„åˆåŠå…¶ä¼˜åŒ–æ–¹æ³•ï¼ˆå¤šå˜é‡ï¼‰" class="headerlink" title="åŸºäºç»„åˆåŠå…¶ä¼˜åŒ–æ–¹æ³•ï¼ˆå¤šå˜é‡ï¼‰"></a>åŸºäºç»„åˆåŠå…¶ä¼˜åŒ–æ–¹æ³•ï¼ˆå¤šå˜é‡ï¼‰</h3><p><strong>åˆ¤å®šè¡¨æ–¹æ³•</strong>æ˜¯ä¸€ç§å€ŸåŠ©è¡¨æ ¼æ–¹å¼å®Œæˆå¤šæ¡ä»¶è¾“å…¥ç»„åˆä¸‹æµ‹è¯•ç”¨ä¾‹è®¾è®¡ï¼Œè¾¾è‡³å®Œå…¨è¦†ç›–è¾“å‡ºç»“æœçš„æµ‹è¯•æ–¹æ³•ã€‚å…¶è¡¨æ ¼ç»„æˆæ ·å¼å¦‚ä¸‹:</p>
<table>
<thead>
<tr>
<th></th>
<th>åºå·</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</tr>
</thead>
<tbody><tr>
<td>æ¡ä»¶</td>
<td>æ­£ç¡®è¾“å…¥å¹´Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>æ¡ä»¶</td>
<td>æ­£ç¡®è¾“å…¥æœˆM</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>æ¡ä»¶</td>
<td>æ­£ç¡®è¾“å…¥æ—¥D</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>åŠ¨ä½œ</td>
<td>å‡½æ•°è¿è¡ŒæˆåŠŸ</td>
<td>âˆš</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>åŠ¨ä½œ</td>
<td>å‡½æ•°è¿è¡Œå¤±è´¥</td>
<td></td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
</tbody></table>
<p><strong>å› æœå›¾æ³•</strong>æ˜¯ä¸€ç§åˆ©ç”¨å›¾è§£æ³•åˆ†æè¾“å…¥çš„å„ç§ç»„åˆæƒ…å†µï¼Œä»è€Œè®¾è®¡æµ‹è¯•ç”¨ä¾‹çš„å½¢å¼åŒ–æ–¹æ³•ã€‚å®ƒé€‚åˆäºæ£€æŸ¥ç¨‹åºè¾“å…¥ã€è¾“å‡ºé”™è¯¯ï¼Œè¿˜èƒ½åˆ¤å®šç¨‹åºè§„èŒƒä¸­çš„äºŒä¹‰æ€§ã€ä¸å®Œå…¨æ€§ç­‰é”™è¯¯ã€‚</p>
<p>å› æœå›¾PPTä¸Šé¢ä¸¾äº†å¥½å‡ é¡µä¾‹å­ï¼Œè‚¯å®šå¾ˆé‡è¦å“’~</p>
<p><img src="https://s2.loli.net/2023/06/02/WxI9MwjJepmurfE.png" alt="Snipaste_2023-06-02_15-46-16.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/jCuF49rsNHEm1a5.png" alt="Snipaste_2023-06-02_15-46-38.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/GqM7ES6sPwaBRKt.png" alt="Snipaste_2023-06-02_15-46-47.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/1QmJtbZgpjdr5x7.png" alt="Snipaste_2023-06-02_15-46-56.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/t8moTlbkVwfOLN3.png" alt="Snipaste_2023-06-02_15-47-10.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/L9t3abT6hHxMXNJ.png" alt="Snipaste_2023-06-02_15-48-36.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/2n1okyQVmwI9RrF.png" alt="Snipaste_2023-06-02_15-49-01.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/NWK8wLlgq2Q5AEB.png" alt="Snipaste_2023-06-02_15-50-08.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/CiUFqs6Q2tdLbj4.png" alt="Snipaste_2023-06-02_15-50-14.png"></p>
<p><img src="https://s2.loli.net/2023/06/02/YUzawnXV9oFRgex.png" alt="Snipaste_2023-06-02_15-50-20.png"></p>
<p>å½“æœ‰å¤šä¸ªè¾“å…¥å˜é‡ã€æ¯ä¸ªå˜é‡åˆæœ‰å¤šä¸ªå–å€¼ã€‚è‹¥è¦æ‰§è¡Œå…¨è¦†ç›–ç»„åˆæµ‹è¯•ï¼Œå…¶å·¥ä½œé‡éå¸¸å¤§ã€‚ä¸ºäº†æœ‰æ•ˆåœ°å‡å°‘æµ‹è¯•ç»„åˆæ•°ï¼Œå¯ä»¥é‡‡ç”¨<strong>æˆå¯¹ç»„åˆæµ‹è¯•æ–¹æ³•</strong>ï¼Œå…¶åŸºæœ¬æ€æƒ³æ˜¯æ¯ä¸¤ä¸ªè¾“å…¥å˜é‡æ‰€æœ‰å–å€¼ç»„åˆå½¢æˆä¸åŒæµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>ä¾‹ï¼š</p>
<p>æµ‹è¯•ä¸€ä¸ªç™»å½•é¡µé¢åœ¨ä¸åŒæµè§ˆå™¨å’Œè¯­è¨€ä¸‹çš„åŠŸèƒ½æ­£ç¡®æ€§ï¼Œå…¶è¾“å…¥æ¡ä»¶å¦‚ä¸‹:</p>
<p>1ï¼‰è¾“å…¥é¡¹ï¼ˆè´¦å·ã€å¯†ç ï¼‰</p>
<p>2ï¼‰æµè§ˆå™¨ï¼ˆIEã€chromeã€FireFoxã€360ï¼‰</p>
<p>3ï¼‰è¯­è¨€ï¼ˆä¸­æ–‡ã€è‹±æ–‡ï¼‰</p>
<p>æˆå¯¹ç»„åˆæµ‹è¯•ç”¨ä¾‹è¡¨</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹</th>
<th>è´¦å·</th>
<th>å¯†ç </th>
<th>æµè§ˆå™¨</th>
<th>è¯­è¨€</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>ç©ºå€¼</td>
<td>ç©ºå€¼</td>
<td>IE</td>
<td>ä¸­æ–‡</td>
</tr>
<tr>
<td>2</td>
<td>ç©ºå€¼</td>
<td>æœ‰å€¼</td>
<td>chrome</td>
<td>è‹±æ–‡</td>
</tr>
<tr>
<td>3</td>
<td>æœ‰å€¼</td>
<td>ç©ºå€¼</td>
<td>FireFox</td>
<td>ä¸­æ–‡</td>
</tr>
<tr>
<td>4</td>
<td>æœ‰å€¼</td>
<td>æœ‰å€¼</td>
<td>360</td>
<td>è‹±æ–‡</td>
</tr>
<tr>
<td>5</td>
<td>ç©ºå€¼</td>
<td>ç©ºå€¼</td>
<td>360</td>
<td>ä¸­æ–‡</td>
</tr>
<tr>
<td>6</td>
<td>ç©ºå€¼</td>
<td>æœ‰å€¼</td>
<td>FireFox</td>
<td>è‹±æ–‡</td>
</tr>
<tr>
<td>7</td>
<td>æœ‰å€¼</td>
<td>ç©ºå€¼</td>
<td>chrome</td>
<td>ä¸­æ–‡</td>
</tr>
<tr>
<td>8</td>
<td>æœ‰å€¼</td>
<td>æœ‰å€¼</td>
<td>IE</td>
<td>è‹±æ–‡</td>
</tr>
</tbody></table>
<p><strong>æ­£äº¤å®éªŒæµ‹è¯•æ³•</strong>æ˜¯ä¸€ç§ä¾æ®ä¼½ç½—å(Galois)ç†è®ºï¼Œä»å¤§é‡å®éªŒæ•°æ®ä¸­æŒ‘é€‰é€‚é‡çš„ã€å…·æœ‰ä»£è¡¨æ€§çš„æ•°æ®è¿›è¡Œå®éªŒï¼Œä»¥è¾¾åˆ°é™ä½å®éªŒæˆæœ¬çš„æ–¹æ³•ã€‚</p>
<p>æ­£äº¤è¡¨æ„æˆ</p>
<blockquote>
<p>è¡Œæ•°:æ­£äº¤è¡¨ä¸­çš„è¡Œä¸ªæ•°ï¼Œå³å®éªŒçš„æ¬¡æ•°ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬é€šè¿‡æ­£äº¤å®éªŒæ³•è®¾è®¡çš„æµ‹è¯•ç”¨ä¾‹ä¸ªæ•°ã€‚è¡Œæ•°(å³&gt;æµ‹è¯•ç”¨ä¾‹æ¬¡æ•°)&#x3D;âˆ‘(æ¯åˆ—æ°´å¹³æ•°-1)+1</p>
<p>å› ç´ æ•°:æ­£äº¤è¡¨ä¸­åˆ—çš„ä¸ªæ•°ï¼Œå³æµ‹è¯•åŠŸèƒ½ç‚¹çš„å› å­æ•°ã€‚</p>
<p>æ°´å¹³æ•°:ä»»ä½•å•ä¸ªå› ç´ èƒ½å¤Ÿå–å€¼çš„ä¸ªæ•°ã€‚æ­£äº¤è¡¨ä¸­åŒ…å«å€¼ä¸ºä»0åˆ°â€œæ°´å¹³æ•°-1â€æˆ–ä»1åˆ°â€œæ°´å¹³æ•°â€ã€‚å³è¦æµ‹è¯•åŠŸèƒ½ç‚¹çš„è¾“å…¥å–å€¼æ•°ã€‚</p>
<p>Lä»£è¡¨æ­£äº¤è¡¨ï¼Œå®ƒæ˜¯è¿ç”¨æ•°å­¦ç†è®ºåœ¨æ‹‰ä¸æ–¹å’Œæ­£äº¤æ‹‰ä¸æ–¹åŸºç¡€ä¸Šæ„é€ çš„è§„æ ¼åŒ–æ•°æ®è¡¨æ ¼ï¼Œå¸¸ç”¨çš„æœ‰Lâ‚ˆ(2â·)ã€Lâ‚‰(3â´)ã€Lâ‚â‚†(4âµ)ç­‰ã€‚</p>
</blockquote>
<p>æ­£äº¤è¡¨ç‰¹æ€§</p>
<blockquote>
<p>1)æ¯ä¸€åˆ—ä¸­å„æ•°å­—å‡ºç°çš„æ¬¡æ•°éƒ½ä¸€æ ·å¤š;<br>2)ä»»ä½•ä¸¤åˆ—æ‰€æ„æˆçš„å„æœ‰åºæ•°å¯¹å‡ºç°çš„æ¬¡æ•°éƒ½ä¸€æ ·å¤šã€‚<br>ä¾‹å¦‚åœ¨ä¸¤æ°´å¹³æ­£äº¤è¡¨ä¸­ï¼Œä»»ä½•ä¸¤åˆ—(åŒä¸€æ¨ªè¡Œå†…ï¼‰æœ‰åºå¯¹å­å…±æœ‰4ç§:(1ï¼Œ1)ã€ (1ï¼Œ2)ã€(2ï¼Œ1)ã€ (2ï¼Œ2)ã€‚æ¯ç§å¯¹æ•°å‡ºç°æ¬¡æ•°ç›¸ç­‰ã€‚åœ¨ä¸‰æ°´å¹³æƒ…å†µä¸‹ï¼Œä»»ä½•ä¸¤åˆ—(åŒä¸€æ¨ªè¡Œå†…ï¼‰æœ‰åºå¯¹å…±æœ‰9ç§ï¼Œ1.1ã€1.2ã€1.3ã€<br>2.1ã€2.2ã€2.3ã€<br>3.1ã€3.2ã€3.3ï¼Œä¸”æ¯å¯¹å‡ºç°æ•°ä¹Ÿå‡ç›¸ç­‰ã€‚</p>
</blockquote>
<p> åœ¨ä¸€ä¸ªå®¢æˆ·ä¿¡æ¯æŸ¥è¯¢ç•Œé¢ä¸­ï¼Œè¾“å…¥æ¡ä»¶æœ‰â€œå§“åâ€ã€â€œèº«ä»½è¯å·â€ã€â€œæ‰‹æœºâ€ï¼Œé‡‡ç”¨æ­£äº¤è¡¨æ–¹å¼è®¾è®¡è¯¥ç•Œé¢æŸ¥è¯¢åŠŸèƒ½çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>é’ˆå¯¹æœ¬æµ‹è¯•æœ‰3ä¸ªè¾“å…¥æ¡ä»¶ï¼Œæ¯ä¸ªè¾“å…¥æœ‰2ç§å–å€¼æƒ…å†µï¼Œå¯ä»¥é€‰æ‹©Lâ‚„(2Â³)æ­£äº¤è¡¨ï¼Œå…¶æ­£äº¤è¡¨å€¼å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>å®éªŒæ•°\åˆ—å·</th>
<th>å§“å</th>
<th>èº«ä»½è¯å·</th>
<th>æ‰‹æœº</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody></table>
<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<table>
<thead>
<tr>
<th>æµ‹è¯•ç”¨ä¾‹&#x2F;æŸ¥è¯¢æ¡ä»¶</th>
<th>å§“å</th>
<th>èº«ä»½è¯å·</th>
<th>æ‰‹æœº</th>
</tr>
</thead>
<tbody><tr>
<td>æµ‹è¯•ç”¨ä¾‹1</td>
<td>å¡«å†™</td>
<td>å¡«å†™</td>
<td>å¡«å†™</td>
</tr>
<tr>
<td>æµ‹è¯•ç”¨ä¾‹2</td>
<td>å¡«å†™</td>
<td>ç©º</td>
<td>ç©º</td>
</tr>
<tr>
<td>æµ‹è¯•ç”¨ä¾‹3</td>
<td>ç©º</td>
<td>å¡«å†™</td>
<td>ç©º</td>
</tr>
<tr>
<td>æµ‹è¯•ç”¨ä¾‹4</td>
<td>ç©º</td>
<td>ç©º</td>
<td>å¡«å†™</td>
</tr>
</tbody></table>
<h3 id="åŸºäºé€»è¾‘è¦†ç›–æ–¹æ³•"><a href="#åŸºäºé€»è¾‘è¦†ç›–æ–¹æ³•" class="headerlink" title="åŸºäºé€»è¾‘è¦†ç›–æ–¹æ³•"></a>åŸºäºé€»è¾‘è¦†ç›–æ–¹æ³•</h3><p><strong>è¯­å¥è¦†ç›–æ³•</strong>çš„åŸºæœ¬æ€æƒ³æ˜¯è®¾è®¡è‹¥å¹²æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿å¾—è¢«æµ‹ç¨‹åºä¸­çš„æ¯ä¸ªå¯æ‰§è¡Œè¯­å¥è‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡ã€‚å¦‚æœæ˜¯é¡ºåºç»“æ„ï¼Œå°±æ˜¯è®©æµ‹è¯•ä»å¤´æ‰§è¡Œåˆ°å°¾ã€‚å¦‚æœæœ‰åˆ†æ”¯ã€æ¡ä»¶å’Œå¾ªç¯ï¼Œåˆ™éœ€è¦æ‰§è¡Œè¶³å¤Ÿçš„æµ‹è¯•ç”¨ä¾‹è¦†ç›–å…¨éƒ¨è¯­å¥ã€‚</p>
<p><strong>è¯­å¥è¦†ç›–æµ‹è¯•èƒ½è§£å†³çš„é—®é¢˜</strong>:å‘ç°ç¨‹åºä¸­ä¸€äº›æ°¸è¿œä¸èƒ½è¢«æ‰§è¡Œçš„è¯­å¥ç¼ºé™·ï¼Œä½†ä¸èƒ½å‘ç°ç¨‹åºä¸­è¯­å¥é€»è¾‘é”™è¯¯ã€‚</p>
<p>è¯­å¥è¦†ç›–æµ‹è¯•å³ä½¿è¦†ç›–äº†ç¨‹åºä¸­æ¯ä¸ªè¯­å¥ï¼Œä½†å¹¶ä¸ä¸€å®šæµ‹è¯•è¦†ç›–æ‰€æœ‰åˆ†æ”¯ã€‚è¯•å›¾è¦†ç›–ç¨‹åºä¸­æ‰€æœ‰è·¯å¾„çš„æµ‹è¯•æ–¹æ³•ç§°ä¸º<strong>è·¯å¾„è¦†ç›–</strong>ã€‚è·¯å¾„æµ‹è¯•çš„æœ€ç®€å•å½¢å¼å°±æ˜¯<strong>åˆ¤å®šè¦†ç›–æµ‹è¯•</strong>ã€‚<br><strong>åˆ¤å®šè¦†ç›–æµ‹è¯•åŸºæœ¬æ€æƒ³</strong>:è®¾è®¡è‹¥å¹²ç”¨ä¾‹ï¼Œè¿è¡Œè¢«æµ‹ç¨‹åºï¼Œä½¿å¾—ç¨‹åºä¸­æ¯ä¸ªåˆ¤æ–­è¯­å¥çš„å–çœŸåˆ†æ”¯å’Œå–å‡åˆ†æ”¯è‡³å°‘æ‰§è¡Œä¸€æ¬¡ï¼Œå³åˆ¤æ–­çœŸå‡å€¼å‡å¯è¢«æ»¡è¶³ã€‚ä¸€ä¸ªåˆ¤å®šå¾€å¾€ä»£è¡¨ç¨‹åºçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥åˆ¤å®šè¦†ç›–æµ‹è¯•ä¹Ÿç§°ä¸º<strong>åˆ†æ”¯è¦†ç›–æµ‹è¯•</strong>ã€‚</p>
<p>åˆ¤å®šè¦†ç›–æµ‹è¯•èƒ½å‘ç°ç¨‹åºä¸­ä¸€äº›æ°¸è¿œä¸èƒ½è¢«æ‰§è¡Œçš„åˆ†æ”¯ç¼ºé™·ï¼Œå¯ä»¥å‘ç°éƒ¨åˆ†é€»è¾‘ç¼ºé™·ã€‚</p>
<p><strong>æ¡ä»¶è¦†ç›–</strong>çš„åŸºæœ¬æ€æƒ³æ˜¯è®¾è®¡è‹¥å¹²æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿å…¶å¯¹è¢«æµ‹ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Œä½¿æ¯ä¸ªåˆ¤æ–­ä¸­æ¯ä¸ªæ¡ä»¶çš„å¯èƒ½å–å€¼è‡³å°‘æ»¡è¶³ä¸€æ¬¡ã€‚</p>
<p>ç¬¦åˆæ¡ä»¶è¦†ç›–çš„æµ‹è¯•ç”¨ä¾‹å¹¶ä¸ä¸€å®šæ»¡è¶³åˆ¤å®šè¦†ç›–è¦æ±‚ï¼Œåä¹‹ï¼Œç¬¦åˆåˆ¤å®šè¦†ç›–çš„æµ‹è¯•ç”¨ä¾‹ä¹Ÿä¸ä¸€å®šæ»¡è¶³æ¡ä»¶è¦†ç›–è¦æ±‚ã€‚å› æ­¤ï¼Œéœ€è¦æ‰¾å‡ºç¬¦åˆä¸¤è€…çš„æµ‹è¯•ç”¨ä¾‹äº¤é›†ï¼Œè¯¥æ–¹æ³•ç§°ä¸º<strong>åˆ¤å®š-æ¡ä»¶è¦†ç›–</strong>ã€‚</p>
<p><strong>æ¡ä»¶ç»„åˆè¦†ç›–</strong>çš„åŸºæœ¬æ€æƒ³æ˜¯è®¾è®¡è¶³å¤Ÿçš„æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿å¾—åˆ¤æ–­ä¸­æ¯ä¸ªæ¡ä»¶çš„æ‰€æœ‰å–å€¼æƒ…å†µè‡³å°‘å‡ºç°ä¸€æ¬¡ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ¤æ–­æœ¬èº«çš„åˆ¤å®šç»“æœä¹Ÿè‡³å°‘å‡ºç°ä¸€æ¬¡ã€‚æ¡ä»¶ç»„åˆæµ‹è¯•ä¸ä¸€å®šèƒ½è¦†ç›–æ‰€æœ‰è·¯å¾„ã€‚</p>
<p><strong>åŸºæœ¬è·¯å¾„è¦†ç›–</strong>å°±æ˜¯è®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–ç¨‹åºä¸­æ‰€æœ‰å¯èƒ½çš„åŸºæœ¬åˆ†æ”¯è·¯å¾„ã€‚<br>åŸºæœ¬è·¯å¾„è¦†ç›–å±€é™:ä¸èƒ½ä¿è¯è¦†ç›–æ‰€æœ‰æ¡ä»¶ç»„åˆ</p>
<p>åŸºæœ¬è·¯å¾„è¦†ç›–æµ‹è¯•ç”¨ä¾‹è®¾è®¡æ­¥éª¤:</p>
<blockquote>
<p>ä¾æ®ä»£ç ç»˜åˆ¶æµç¨‹å›¾<br>ç¡®å®šæµç¨‹å›¾çš„ç¯è·¯å¤æ‚åº¦<br>ç¡®å®šå„ä¸ªç‹¬ç«‹è·¯å¾„çš„åŸºæœ¬é›†åˆ<br>è®¾è®¡æµ‹è¯•ç”¨ä¾‹è¦†ç›–æ¯æ¡åŸºæœ¬è·¯å¾„</p>
</blockquote>
<p>è®¡ç®—ç¯è·¯å¤æ‚åº¦ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰æµå›¾ä¸­çš„åŒºåŸŸæ•°ç­‰äºç¯å½¢å¤æ‚åº¦ã€‚<br>ï¼ˆ2ï¼‰æµå›¾Gçš„ç¯å½¢å¤æ‚åº¦V(G)&#x3D;E-N+2ï¼Œå…¶ä¸­ï¼ŒEæ˜¯æµå›¾ä¸­è¾¹çš„æ¡æ•°ï¼ŒNæ˜¯ç»“ç‚¹æ•°ã€‚<br>ï¼ˆ3ï¼‰æµå›¾Gçš„ç¯å½¢å¤æ‚åº¦V(G)&#x3D;P+1ï¼Œå…¶ä¸­ï¼ŒPæ˜¯æµå›¾ä¸­åˆ¤å®šç»“ç‚¹çš„æ•°ç›®ã€‚</p>
</blockquote>
<h2 id="ç¬¬å››ç« -æµ‹è¯•æµç¨‹å’Œè§„èŒƒ"><a href="#ç¬¬å››ç« -æµ‹è¯•æµç¨‹å’Œè§„èŒƒ" class="headerlink" title="ç¬¬å››ç«   æµ‹è¯•æµç¨‹å’Œè§„èŒƒ"></a>ç¬¬å››ç«   æµ‹è¯•æµç¨‹å’Œè§„èŒƒ</h2><p>è½¯ä»¶æµ‹è¯•è¿‡ç¨‹ï¼š</p>
<p>è½¯ä»¶å·¥ç¨‹è§’åº¦<br>éœ€æ±‚è¯„å®¡â†’è®¾è®¡è¯„å®¡â†’å•å…ƒæµ‹è¯•â†’é›†æˆæµ‹è¯•â†’ç³»ç»Ÿæµ‹è¯•â†’éªŒæ”¶æµ‹è¯•</p>
<p>é¡¹ç›®ç®¡ç†è§’åº¦<br>æµ‹è¯•è®¡åˆ’â†’æµ‹è¯•è®¾è®¡â†’æ‰§è¡Œä¸ç›‘æ§â†’ç»“æœåˆ†æä¸è¯„ä¼°â†’é¡¹ç›®æ€»ç»“</p>
<p><strong>æ•æ·æµ‹è¯•</strong>ï¼ˆè‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰æ˜¯ä¸€ç§éµä»æ•æ·è½¯ä»¶å¼€å‘åŸåˆ™ï¼Œæ”¯æŒæ•æ·è½¯ä»¶å¼€å‘å®ç°è´¨é‡æ§åˆ¶çš„æµ‹è¯•å®è·µã€‚<br><strong>TMap</strong> (Test Management Approachï¼Œæµ‹è¯•ç®¡ç†æ–¹æ³•)æ˜¯ä¸€ç§ä¸šåŠ¡é©±åŠ¨çš„ã€åŸºäºé£é™©ç­–ç•¥çš„ã€ç»“æ„åŒ–çš„æµ‹è¯•ç®¡ç†æ–¹æ³•ï¼Œå…¶ç›®æ ‡æ˜¯å°½æ—©åœ°å‘ç°ç¼ºé™·ï¼Œä»¥æœ€å°çš„æˆæœ¬ã€æœ‰æ•ˆåœ°ã€å½»åº•åœ°å®Œæˆæµ‹è¯•ä»»åŠ¡ï¼Œä»¥å‡å°‘è½¯ä»¶å‘å¸ƒåçš„æ”¯æŒæˆæœ¬ã€‚</p>
<p><strong>åŸºäºè„šæœ¬æµ‹è¯•</strong>(Scripted Testingï¼ŒSTï¼‰ï¼Œæ— è®ºæ˜¯æ‰‹å·¥æµ‹è¯•ï¼Œè¿˜æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œéƒ½éœ€è¦å…ˆè®¾è®¡ç”¨ä¾‹ï¼Œç”Ÿæˆæµ‹è¯•è„šæœ¬ï¼Œç„¶åæ‰§è¡Œè„šæœ¬å®æ–½æµ‹è¯•ã€‚<br><strong>æ¢ç´¢å¼æµ‹è¯•</strong>(Exploratory Testingï¼ŒETï¼‰ï¼Œä¸éœ€è¦è®¾è®¡ç”¨ä¾‹ï¼Œä¸€è¾¹æ€è€ƒï¼Œä¸€è¾¹æµ‹è¯•ã€‚<br><em><strong>åœ¨æ•æ·æµ‹è¯•ä¸­ï¼Œåˆ™ä¸»è¦é‡‡ç”¨æ¢ç´¢å¼æµ‹è¯•ï¼ŒåŸºäºè„šæœ¬æµ‹è¯•åˆ™ä½œä¸ºè¡¥å……</strong></em>;è€Œåœ¨ä¼ ç»Ÿæµ‹è¯•ä¸­ï¼Œä¸»è¦é‡‡ç”¨åŸºäºè„šæœ¬æµ‹è¯•ï¼Œæ¢ç´¢å¼æµ‹è¯•ä½œä¸ºè¡¥å……ã€‚</p>
<h2 id="ç¬¬äº”ç« -å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•"><a href="#ç¬¬äº”ç« -å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•" class="headerlink" title="ç¬¬äº”ç«  å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•"></a>ç¬¬äº”ç«  å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•</h2><p><strong>å•å…ƒé™æ€æµ‹è¯•</strong>æ˜¯æŒ‡ä¸è¿è¡Œè¢«æµ‹ç¨‹åºæœ¬èº«ï¼Œä»…é€šè¿‡åˆ†ææˆ–æ£€æŸ¥æºç¨‹åºçš„è¯­æ³•ã€ç»“æ„ã€è¿‡ç¨‹ã€æ¥å£ç­‰æ¥æ£€æŸ¥ç¨‹åºçš„æ­£ç¡®æ€§ã€‚ä¸»è¦é‡‡ç”¨äº’æŸ¥ã€èµ°æŸ¥ã€è¯„å®¡æ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼Œä¹Ÿå¯é€šè¿‡ä»£ç ç¼ºé™·æ‰«æå·¥å…·è¿›è¡Œåˆ†æå¤„ç†ã€‚</p>
<p>ä»£ç ç¤ºä¾‹1ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ç”¨æˆ·UIç•Œé¢è¾“å…¥çš„ç”¨æˆ·åï¼Œä¼ é€’åˆ°Actionå±‚ï¼Œè¿›è¡Œç”¨æˆ·è§’è‰²è¯†åˆ«æ“ä½œ</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request HttpServletRequestå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> String ç”¨æˆ·è§’è‰²ï¼Œå¦‚ç®¡ç†å‘˜/æ™®é€šç”¨æˆ·/...</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getUserRole</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">userRole</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (userName.equals(<span class="string">&quot;schadmin&quot;</span>)) &#123;</span><br><span class="line">        <span class="comment">// è¿™æ˜¯ç³»ç»Ÿåˆå§‹åŒ–æ—¶é»˜è®¤çš„ç®¡ç†å‘˜è´¦å·ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›è¡Œä»¥ä¸‹éªŒè¯æ“ä½œ...      </span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// éç³»ç»Ÿåˆå§‹åŒ–çš„è´¦å·ï¼Œè¿›è¡Œä»¥ä¸‹éªŒè¯æ“ä½œ...</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> userRole;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>userNameå¯èƒ½ä¼šå‡ºç°ç©ºæŒ‡é’ˆæƒ…å†µ</p>
<p>ä¿®æ”¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ç”¨æˆ·UIç•Œé¢è¾“å…¥çš„ç”¨æˆ·åï¼Œä¼ é€’åˆ°Actionå±‚ï¼Œè¿›è¡Œç”¨æˆ·è§’è‰²è¯†åˆ«æ“ä½œ</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request HttpServletRequestå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> String ç”¨æˆ·è§’è‰²ï¼Œå¦‚ç®¡ç†å‘˜/æ™®é€šç”¨æˆ·/...</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getUserRole</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">userRole</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;schadmin&quot;</span>.equals(userName)) &#123;</span><br><span class="line">        <span class="comment">// è¿™æ˜¯ç³»ç»Ÿåˆå§‹åŒ–æ—¶é»˜è®¤çš„ç®¡ç†å‘˜è´¦å·ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›è¡Œä»¥ä¸‹éªŒè¯æ“ä½œ...      </span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// éç³»ç»Ÿåˆå§‹åŒ–çš„è´¦å·ï¼Œè¿›è¡Œä»¥ä¸‹éªŒè¯æ“ä½œ...</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> userRole;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç ç¤ºä¾‹2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ç”¨æˆ·è¾“å…¥çš„å¹´é¾„ï¼Œè½¬æ¢ä¸ºæ•°å€¼å‹</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request HttpServletRequestå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Integer ç”¨æˆ·å¹´é¾„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUserAge</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">userAge</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userAge&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (userAge != <span class="literal">null</span>) &#123;</span><br><span class="line">        age = Integer.parseInt(userAge);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>userAgeå¯èƒ½ä¸æ˜¯å­—ç¬¦å‹æ•°å­—ã€‚</p>
<p>å»ºè®®å†™ä¸€ä¸ªUtilå·¥å…·ç±»ï¼Œå®ç°ä¸€äº›å¸¸è§çš„æ•°æ®è½¬æ¢æ–¹æ³•ï¼Œä»¥ä¾›è°ƒç”¨:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¼ å…¥çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´å‹</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> intStr String</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Integer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getIntValue</span><span class="params">(String intStr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">parseInt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (isNumeric(intStr)) &#123;</span><br><span class="line">        parseInt = Integer.parseInt(intStr);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> parseInt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç 3</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡è®¾ç”µè¯å·ç å­—ç¬¦ä¸²è®¾è®¡çš„æ ‡å‡†æ ¼å¼ä¸º: å›½å®¶ç¼–ç -åŒºä½å·ç -ç”µè¯å·ç -åˆ†æœºå·</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> strPhoneNumber String</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> String ç”µè¯å·ç  (å¦‚: ä¾‹å­ä¸­çš„2313222)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getPhoneNumber</span><span class="params">(String strPhoneNumber)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (strPhoneNumber == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(strPhoneNumber)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    String[] arrPhone = strPhoneNumber.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> arrPhone[<span class="number">2</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½å‡ºç°æ•°ç»„è¶Šç•Œé”™è¯¯ã€‚</p>
<p>ä¿®æ”¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getPhoneNumber</span><span class="params">(String strPhoneNumber)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (strPhoneNumber == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(strPhoneNumber)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    String[] arrPhone = strPhoneNumber.split(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (arrPhone.length &gt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> arrPhone[<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç 4</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeString</span><span class="params">(File file, String writeContent, String encoding)</span> <span class="keyword">throws</span> FileOperatorException &#123;</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">            file.createNewFile();</span><br><span class="line">        &#125;</span><br><span class="line">        fos = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">        fos.write(writeContent.getBytes(encoding));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileOperatorException</span>(ex);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeString</span><span class="params">(File file, String writeContent, String encoding)</span> <span class="keyword">throws</span> FileOperatorException &#123;</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">            file.createNewFile();</span><br><span class="line">        &#125;</span><br><span class="line">        fos = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">        fos.write(writeContent.getBytes(encoding));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileOperatorException</span>(ex);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;<span class="comment">//å¦‚æœæ²¡æœ‰finallyä¸‹é¢çš„æ®µè¯­å¥ï¼Œå°±æ— æ³•é‡Šæ”¾æ–‡ä»¶èµ„æº</span></span><br><span class="line">         <span class="keyword">if</span> (fos != <span class="literal">null</span>)&#123;</span><br><span class="line">             <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileOperatorException</span>(e);</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ç¡®ä¿ä»£ç åœ¨è¿è¡Œå¯é ã€åŠŸèƒ½æ­£ç¡®å¹¶ä¸”èƒ½å¤Ÿæœ‰è‰¯å¥½çš„æ€§èƒ½å“åº”ï¼Œä»…ä»…è¿›è¡Œé™æ€æµ‹è¯•æ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»å°†è¯¥å•å…ƒä»£ç è¿è¡Œèµ·æ¥ï¼ŒéªŒè¯ä»£ç ä¸šåŠ¡é€»è¾‘åˆç†æ€§ï¼Œå¹¶äº†è§£å•å…ƒä»£ç çš„å®é™…è¡¨ç°ï¼Œå³å¯¹å•å…ƒä»£ç è¿›è¡Œ<strong>åŠ¨æ€æµ‹è¯•</strong>ã€‚</p>
<p>åŠ¨æ€æµ‹è¯•å®ç°åŸç†</p>
<blockquote>
<p>é©±åŠ¨ç¨‹åº(Driver)<br>è¢«æµ‹å•å…ƒ(Unit)<br>æ¡©ç¨‹åº(Stub)</p>
</blockquote>
<p>æ¡©æ¨¡å—å’Œé©±åŠ¨æ¨¡å—çš„æ¦‚å¿µæä¸æ¸…æ¥šï¼Œé‚£ä¹ˆä¸‹é¢æ¥ä»‹ç»è¿™ä¸¤ä¸ªæ¦‚å¿µï¼š </p>
<blockquote>
<p>ã€€ã€€å‡è®¾ç°åœ¨é¡¹ç›®ç»„æŠŠä»»åŠ¡åˆ†ç»™äº†7ä¸ªäººï¼Œæ¯ä¸ªäººè´Ÿè´£å®ç°ä¸€ä¸ªæ¨¡å—ã€‚ä½ è´Ÿè´£çš„æ˜¯Bæ¨¡å—ï¼Œä½ å¾ˆä¼˜ç§€ï¼Œç¬¬ä¸€ä¸ªå®Œæˆäº†ç¼–ç å·¥ä½œï¼Œç°åœ¨éœ€è¦å¼€å±•å•å…ƒæµ‹è¯•å·¥ä½œï¼Œå…ˆåˆ†æç»“æ„å›¾ï¼š<br>ã€€ã€€1ã€ç”±äºBæ¨¡å—ä¸æ˜¯æœ€é¡¶å±‚æ¨¡å—ï¼Œæ‰€ä»¥å®ƒä¸€å®šä¸åŒ…å«mainå‡½æ•°(Aæ¨¡å—åŒ…å«mainå‡½æ•°)ï¼Œä¹Ÿå°±ä¸èƒ½ç‹¬ç«‹è¿è¡Œã€‚<br>ã€€ã€€2ã€Bæ¨¡å—è°ƒç”¨äº†Dæ¨¡å—å’ŒEæ¨¡å—ï¼Œè€Œç›®å‰Dæ¨¡å—å’ŒEæ¨¡å—éƒ½è¿˜æ²¡æœ‰å¼€å‘å¥½ï¼Œé‚£ä¹ˆæƒ³è®©Bæ¨¡å—é€šè¿‡ç¼–è¯‘å™¨çš„ç¼–è¯‘ä¹Ÿæ˜¯ä¸å¯èƒ½çš„ã€‚<br>ã€€ã€€é‚£ä¹ˆæ€æ ·æ‰èƒ½æµ‹è¯•Bæ¨¡å—å‘¢?éœ€è¦åšï¼š<br>ã€€ã€€1ã€å†™ä¸¤ä¸ªæ¨¡å—Sdå’ŒSeåˆ†åˆ«ä»£æ›¿Dæ¨¡å—å’ŒEæ¨¡å—(å‡½æ•°åã€è¿”å›å€¼ã€ä¼ é€’çš„å‚æ•°ç›¸åŒ)ï¼Œè¿™æ ·Bæ¨¡å—å°±å¯ä»¥é€šè¿‡ç¼–è¯‘äº†ã€‚Sdæ¨¡å—å’ŒSeæ¨¡å—å°±æ˜¯æ¡©æ¨¡å—ã€‚<br>ã€€ã€€2ã€å†™ä¸€ä¸ªæ¨¡å—Daç”¨æ¥ä»£æ›¿Aæ¨¡å—ï¼Œé‡Œé¢åŒ…å«mainå‡½æ•°ï¼Œå¯ä»¥åœ¨mainå‡½æ•°ä¸­è°ƒç”¨Bæ¨¡å—ï¼Œè®©Bæ¨¡å—è¿è¡Œèµ·æ¥ã€‚Daæ¨¡å—å°±æ˜¯é©±åŠ¨æ¨¡å—ã€‚<br>ã€€ã€€æ¡©æ¨¡å—çš„ä½¿å‘½é™¤äº†ä½¿å¾—ç¨‹åºèƒ½å¤Ÿç¼–è¯‘é€šè¿‡ä¹‹å¤–ï¼Œè¿˜éœ€è¦æ¨¡æ‹Ÿè¿”å›è¢«ä»£æ›¿çš„æ¨¡å—çš„å„ç§å¯èƒ½è¿”å›å€¼(ä»€ä¹ˆæ—¶å€™è¿”å›ä»€ä¹ˆå€¼éœ€è¦æ ¹æ®æµ‹è¯•ç”¨ä¾‹çš„æƒ…å†µæ¥å†³å®š)ã€‚<br>ã€€ã€€é©±åŠ¨æ¨¡å—çš„ä½¿å‘½å°±æ˜¯æ ¹æ®æµ‹è¯•ç”¨ä¾‹çš„è®¾è®¡å»è°ƒç”¨è¢«æµ‹è¯•æ¨¡å—ï¼Œå¹¶ä¸”åˆ¤æ–­è¢«æµ‹è¯•æ¨¡å—çš„è¿”å›å€¼æ˜¯å¦ä¸æµ‹è¯•ç”¨ä¾‹çš„é¢„æœŸç»“æœç›¸ç¬¦</p>
</blockquote>
<p>é›†æˆæµ‹è¯•æ¨¡å¼:</p>
<blockquote>
<p><strong>éæ¸å¢å¼é›†æˆæµ‹è¯•</strong><br>å…ˆåˆ†åˆ«æµ‹è¯•æ¯ä¸ªæ¨¡å—ï¼Œå†æŠŠæ‰€æœ‰æ¨¡å—æŒ‰è®¾è®¡è¦æ±‚ç»„è£…åœ¨ä¸€èµ·ï¼Œç„¶åå†è¿›è¡Œé›†æˆç¨‹åºçš„æµ‹è¯•ã€‚<br><strong>æ¸å¢å¼é›†æˆæµ‹è¯•</strong><br>æŠŠä¸‹ä¸€ä¸ªå¾…æµ‹è¯•çš„æ¨¡å—åŒå·²ç»æµ‹è¯•å¥½çš„æ¨¡å—ç»“åˆèµ·æ¥è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•å®Œä»¥åå†æŠŠä¸‹ä¸€ä¸ªå¾…æµ‹è¯•æ¨¡å—ç»“åˆè¿›æ¥æµ‹è¯•ã€‚</p>
</blockquote>
<p><a href="https://smms.app/image/rnOYwCVIDNeBuol" target="_blank"><img src="https://s2.loli.net/2023/06/02/rnOYwCVIDNeBuol.png" alt="HU3PI_3`VKVH_46F9W_GL_4.png"></a></p>
<p><img src="https://s2.loli.net/2023/06/02/qkVeM75SoWYvXg4.png" alt="E_Y5_DZ_B7D_8_Y_B__R_Q8.png"></p>
<p>ä»¥ä¸Šä¸¤ç§æµ‹è¯•æ¨¡å¼éƒ½å±äºæ¸å¢å¼é›†æˆæµ‹è¯•ã€‚</p>
<p>é’ˆå¯¹å¶èŠ‚ç‚¹æ¨¡å—è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸‹é¢å“ªé¡¹ä¸æ˜¯å¿…é¡»çš„?<br>A.æµ‹è¯•æ•°æ®	B.è¢«æµ‹å•å…ƒ	C.é©±åŠ¨ç¨‹åº	D.æ¡©ç¨‹åº</p>
<blockquote>
<p>ç„¶è€Œï¼Œå¯¹äºå¶èŠ‚ç‚¹æ¨¡å—çš„å•å…ƒæµ‹è¯•è€Œè¨€ï¼Œé€šå¸¸ä¸éœ€è¦ä½¿ç”¨æ¡©ç¨‹åºã€‚å¶èŠ‚ç‚¹æ¨¡å—æ˜¯æŒ‡åœ¨è½¯ä»¶ç³»ç»Ÿä¸­æ²¡æœ‰å…¶ä»–ä¾èµ–çš„æœ€åº•å±‚æ¨¡å—ï¼Œä¹Ÿè¢«ç§°ä¸ºå¶å­èŠ‚ç‚¹æˆ–å¶å­æ¨¡å—ã€‚ç”±äºå®ƒä»¬ä¸ä¾èµ–å…¶ä»–æ¨¡å—æˆ–å¤–éƒ¨ç³»ç»Ÿï¼Œæ‰€ä»¥ä¸éœ€è¦æ¨¡æ‹Ÿæˆ–æ›¿ä»£ä»»ä½•å¤–éƒ¨ä¾èµ–é¡¹çš„è¡Œä¸ºã€‚</p>
</blockquote>
<h2 id="ç¬¬å…­ç« -ç³»ç»Ÿæµ‹è¯•"><a href="#ç¬¬å…­ç« -ç³»ç»Ÿæµ‹è¯•" class="headerlink" title="ç¬¬å…­ç«  ç³»ç»Ÿæµ‹è¯•"></a>ç¬¬å…­ç«  ç³»ç»Ÿæµ‹è¯•</h2><p><strong>åŠŸèƒ½æµ‹è¯•</strong>å°±æ˜¯å¯¹è½¯ä»¶ç³»ç»Ÿçš„å„åŠŸèƒ½è¿›è¡ŒéªŒè¯ï¼Œæ ¹æ®ç³»ç»ŸåŠŸèƒ½éœ€æ±‚ï¼Œé€é¡¹æµ‹è¯•ç³»ç»ŸåŠŸèƒ½æ˜¯å¦è¾¾åˆ°ç”¨æˆ·è¦æ±‚ã€‚</p>
<p><strong>å›å½’æµ‹è¯•</strong>æ˜¯æŒ‡ä¿®æ”¹äº†æºä»£ç åï¼Œé‡æ–°è¿›è¡Œç³»ç»ŸåŠŸèƒ½æµ‹è¯•ä»¥ç¡®è®¤ä¿®æ”¹æ²¡æœ‰å¼•å…¥æ–°çš„é”™è¯¯æˆ–å¯¼è‡´å…¶ä»–ä»£ç äº§ç”Ÿé”™è¯¯ï¼ˆ<strong>å›å½’ç¼ºé™·</strong>ï¼‰ã€‚</p>
<p><strong>æ€§èƒ½æµ‹è¯•</strong>æ˜¯ä¸€ç§ä¸ºäº†å‘ç°ç³»ç»Ÿæ€§èƒ½é—®é¢˜æˆ–è·å–ç³»ç»Ÿæ€§èƒ½ç›¸å…³æŒ‡æ ‡è€Œè¿›è¡Œçš„æµ‹è¯•ã€‚ä¸€èˆ¬åœ¨çœŸå®ç¯å¢ƒã€ç‰¹å®šè´Ÿè½½æ¡ä»¶ä¸‹ï¼Œé€šè¿‡æµ‹è¯•å·¥å…·æ¨¡æ‹Ÿå®é™…è½¯ä»¶ç³»ç»Ÿçš„è¿è¡ŒåŠå…¶æ“ä½œï¼ŒåŒæ—¶ç›‘æ§æ€§èƒ½å„é¡¹æŒ‡æ ‡ï¼Œæœ€åå¯¹æµ‹è¯•ç»“æœè¿›è¡Œåˆ†ææ¥ç¡®å®šç³»ç»Ÿçš„æ€§èƒ½çŠ¶å†µã€‚</p>
<p>å¸¸è§ç³»ç»Ÿæ€§èƒ½é—®é¢˜</p>
<blockquote>
<p>èµ„æºè€—å°½:CPUä½¿ç”¨ç‡è¾¾åˆ°100%<br>èµ„æºæ³„éœ²:å†…å­˜æ³„éœ²å¯¼è‡´èµ„æºè€—å°½<br>èµ„æºç“¶é¢ˆ:ç¼ºå°‘å¯ç”¨çº¿ç¨‹ã€DBè¿æ¥èµ„æº</p>
</blockquote>
<p><strong>è´Ÿè½½æµ‹è¯•</strong>ï¼ˆLoad Testï¼‰ï¼šè´Ÿè½½æµ‹è¯•æ˜¯ä¸€ç§æ€§èƒ½æµ‹è¯•ï¼ŒæŒ‡æ•°æ®åœ¨è¶…è´Ÿè·ç¯å¢ƒä¸­è¿è¡Œï¼Œç¨‹åºæ˜¯å¦èƒ½å¤Ÿæ‰¿æ‹…ã€‚ å…³æ³¨ç‚¹ï¼šhow much</p>
<p><strong>å‹åŠ›æµ‹è¯•</strong>ï¼ˆStress Testï¼‰ï¼š å‹åŠ›æµ‹è¯•ï¼ˆåˆå«å¼ºåº¦æµ‹è¯•ï¼‰ä¹Ÿæ˜¯ä¸€ç§æ€§èƒ½æµ‹è¯•ï¼Œå®ƒåœ¨ç³»ç»Ÿèµ„æºç‰¹åˆ«ä½çš„æƒ…å†µä¸‹è½¯ä»¶ç³»ç»Ÿè¿è¡Œæƒ…å†µï¼Œç›®çš„æ˜¯æ‰¾åˆ°ç³»ç»Ÿåœ¨å“ªé‡Œå¤±æ•ˆä»¥åŠå¦‚ä½•å¤±æ•ˆçš„åœ°æ–¹ã€‚</p>
<p><strong>å®¹é‡æµ‹è¯•</strong>(Volume Test)ï¼šç¡®å®šç³»ç»Ÿå¯å¤„ç†åŒæ—¶åœ¨çº¿çš„æœ€å¤§ç”¨æˆ·æ•° å…³æ³¨ç‚¹ï¼šhow muchï¼ˆè€Œä¸æ˜¯how fastï¼‰ å®¹é‡æµ‹è¯•ï¼Œé€šå¸¸å’Œæ•°æ®åº“æœ‰å…³ï¼Œå®¹é‡å’Œè´Ÿè½½çš„åŒºåˆ«åœ¨äºï¼šå®¹é‡å…³æ³¨çš„æ˜¯å¤§å®¹é‡ï¼Œè€Œä¸éœ€è¦å…³æ³¨ä½¿ç”¨ä¸­çš„å®é™…è¡¨ç°ã€‚</p>
<p>å…¶ä¸­ï¼Œå®¹é‡æµ‹è¯•ã€è´Ÿè½½æµ‹è¯•ã€å‹åŠ›æµ‹è¯•çš„è‹±æ–‡è§£é‡Šä¸ºï¼š</p>
<blockquote>
<p>Volume Testing &#x3D; Large amounts of data<br>Load Testing &#x3D; Large amount of users<br>Stress Testing &#x3D; Too many users, too much data, too little time and too little room</p>
</blockquote>
<p>å‡è®¾ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿæœ‰1ä¸‡ä¸ªæ³¨å†Œç”¨æˆ·ï¼Œæ¯å¤©æœ‰1åŠç”¨æˆ·ä¼šåœ¨ä¸Šç­æ—¶é—´ï¼ˆ8å°æ—¶)è®¿é—®è¯¥ç³»ç»Ÿï¼Œå¹³å‡åœ¨çº¿æ—¶é—´ä¸º1ä¸ªå°æ—¶ã€‚é‚£ä¹ˆè®¿é—®è¯¥ç³»ç»Ÿçš„ä¸Šç­æ—¶é—´å¹³å‡æ¯åˆ†é’Ÿåœ¨çº¿ç”¨æˆ·æ•°ä¸ºå¤šå°‘?<br>5000Ã—60&#x2F;(8Ã—60)&#x3D;625</p>
<p><img src="https://s2.loli.net/2023/06/02/TSQZBrG6hRD1NCn.png" alt="Y_TBOAQ0UR1TJ27T2@S4SQY.png"></p>
<p><strong>å®¹é”™æ€§æµ‹è¯•</strong>æ˜¯æ£€æŸ¥ç³»ç»Ÿå®¹é”™èƒ½åŠ›ï¼Œå³ç³»ç»Ÿåœ¨å¼‚å¸¸æ¡ä»¶ä¸‹è‡ªèº«æ˜¯å¦å…·æœ‰é˜²æŠ¤æ€§çš„æªæ–½æˆ–è€…æŸç§ç¾éš¾æ€§æ¢å¤çš„æ‰‹æ®µã€‚</p>
<p><strong>å…¼å®¹æ€§æµ‹è¯•</strong>æ˜¯æŒ‡æµ‹è¯•è½¯ä»¶åœ¨ç‰¹å®šçš„ç¡¬ä»¶å¹³å°ä¸Šã€ä¸åŒçš„åº”ç”¨è½¯ä»¶ä¹‹é—´ã€ä¸åŒçš„æ“çºµç³»ç»Ÿå¹³å°ä¸Šã€ä¸åŒçš„ç½‘ç»œç­‰ç¯å¢ƒä¸­æ˜¯å¦èƒ½å¤Ÿå¾ˆå‹å¥½çš„è¿è¡Œã€‚</p>
<p><strong>è½¯ä»¶å¯é æ€§</strong>æ˜¯æŒ‡è½¯ä»¶ç³»ç»Ÿåœ¨è§„å®šæ—¶é—´å†…åŠè§„å®šç¯å¢ƒæ¡ä»¶ä¸‹ï¼Œå®Œæˆç‰¹å®šåŠŸèƒ½çš„èƒ½åŠ›ã€‚</p>
<p>è½¯ä»¶å¯é æ€§è¯„ä¼°ï¼š<br>MTTF (Mean Time To Failure)â€”â€”ç³»ç»Ÿå¹³å‡æ— æ•…éšœæ—¶é—´</p>
<p>MTTR (Mean Time To Recover)â€”â€”æ•…éšœå¹³å‡ä¿®å¤æ—¶é—´</p>
<p>å¯ç”¨æ€§åº¦é‡&#x3D; MTTF &#x2F; (MTTF+MTTRï¼‰<br>ä¾‹:å¦‚æœç³»ç»Ÿæ¯è¿è¡Œ100ä¸ªæ—¶é—´å•ä½ï¼Œä¼šæœ‰1ä¸ªæ—¶é—´å•ä½æ— æ³•æä¾›æœåŠ¡ï¼Œå…¶ç³»ç»Ÿçš„å¯ç”¨æ€§æ˜¯99%ã€‚</p>
<p>ä¸‹é¢å“ªé¡¹ä¸æ˜¯ç³»ç»Ÿæ€§èƒ½é™ä½çš„åŸå› ?<br>Aï¼èµ„æºè€—å°½	<em><strong>Bï¼å“åº”æ—¶é—´æ…¢</strong></em>	Cï¼å†…å­˜æ³„æ¼	Dï¼ç½‘ç»œæ‹¥æŒ¤</p>
<h2 id="ç¬¬ä¸ƒç« -éªŒæ”¶æµ‹è¯•"><a href="#ç¬¬ä¸ƒç« -éªŒæ”¶æµ‹è¯•" class="headerlink" title="ç¬¬ä¸ƒç«  éªŒæ”¶æµ‹è¯•"></a>ç¬¬ä¸ƒç«  éªŒæ”¶æµ‹è¯•</h2><p><strong>éªŒæ”¶æµ‹è¯•</strong>æ˜¯åœ¨è½¯ä»¶äº§å“å®Œæˆäº†ç³»ç»Ÿæµ‹è¯•ä¹‹åã€äº§å“å‘å¸ƒä¹‹å‰æ‰€è¿›è¡Œçš„è½¯ä»¶æµ‹è¯•æ´»åŠ¨ï¼Œå®ƒæ˜¯è½¯ä»¶æµ‹è¯•çš„æœ€åä¸€ä¸ªé˜¶æ®µï¼Œä¹Ÿç§°<strong>äº¤ä»˜æµ‹è¯•</strong>ã€‚</p>
<p>æœ‰äº›å†…å®¹åœ¨ç¬¬äºŒç« è¯´åˆ°å•¦ï¼</p>
<h2 id="ç¬¬å…«ç« -è½¯ä»¶æœ¬åœ°åŒ–æµ‹è¯•"><a href="#ç¬¬å…«ç« -è½¯ä»¶æœ¬åœ°åŒ–æµ‹è¯•" class="headerlink" title="ç¬¬å…«ç«  è½¯ä»¶æœ¬åœ°åŒ–æµ‹è¯•"></a>ç¬¬å…«ç«  è½¯ä»¶æœ¬åœ°åŒ–æµ‹è¯•</h2><p><strong>è½¯ä»¶æœ¬åœ°åŒ–</strong>æ˜¯æŒ‡å°†æŸè½¯ä»¶äº§å“çš„ç”¨æˆ·ç•Œé¢ã€æ–‡æ¡£èµ„æ–™ã€åœ¨çº¿å¸®åŠ©ç­‰ä»å…¶æºè¯­è¨€å‘ç›®æ ‡è¯­è¨€è¿›è¡Œè½¬åŒ–ï¼Œä½¿ä¹‹é€‚åº”ç›®æ ‡è¯­è¨€åŠæ–‡åŒ–çš„å¤„ç†è¿‡ç¨‹ã€‚</p>
<p><strong>è½¯ä»¶å›½é™…åŒ–</strong>æ˜¯æŒ‡ä¸ºä¿è¯æ‰€å¼€å‘è½¯ä»¶äº§å“èƒ½é€‚åº”å›½é™…å¸‚åœºéœ€è¦ï¼Œé€šè¿‡ç‰¹å®šçš„ç³»ç»Ÿæ¶æ„è®¾è®¡ã€ä»£ç ç¼–ç¨‹æŠ€æœ¯æ”¯æŒè½¯ä»¶èƒ½åœ¨ä¸åŒè¯­è¨€ã€ä¸åŒæ–‡åŒ–çš„å›½å®¶åŠåœ°åŒºä½¿ç”¨ï¼Œä½¿å…¶åœ¨è¿›è¡Œæœ¬åœ°åŒ–æ—¶ä¸éœ€è¦ä¿®æ”¹è½¯ä»¶çš„ç¨‹åºä»£ç ã€‚</p>
<p><strong>è½¯ä»¶æœ¬åœ°åŒ–æµ‹è¯•</strong>æ˜¯æ ¹æ®è½¯ä»¶æœ¬åœ°åŒ–å¼€å‘å®Œæˆåï¼Œè®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶åˆ©ç”¨è¿™äº›æµ‹è¯•ç”¨ä¾‹å»è¿è¡Œè¢«æµ‹è¯•è½¯ä»¶ï¼Œä»¥å‘ç°è½¯ä»¶ç¨‹åºç¼ºé™·çš„è¿‡ç¨‹ã€‚ï¼ˆå«<strong>ç¿»è¯‘éªŒè¯</strong>ï¼‰</p>
<h2 id="ç¬¬ä¹ç« -æµ‹è¯•è‡ªåŠ¨åŒ–åŠå…¶æ¡†æ¶"><a href="#ç¬¬ä¹ç« -æµ‹è¯•è‡ªåŠ¨åŒ–åŠå…¶æ¡†æ¶" class="headerlink" title="ç¬¬ä¹ç«  æµ‹è¯•è‡ªåŠ¨åŒ–åŠå…¶æ¡†æ¶"></a>ç¬¬ä¹ç«  æµ‹è¯•è‡ªåŠ¨åŒ–åŠå…¶æ¡†æ¶</h2><p><strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong>æ˜¯æŒ‡é‡‡ç”¨æµ‹è¯•å·¥å…·å®ç°ç¨‹åºé©±åŠ¨æ›¿ä»£äººé©±åŠ¨æ‰€å¼€å±•çš„è½¯ä»¶æµ‹è¯•æ´»åŠ¨ã€‚æµ‹è¯•è‡ªåŠ¨åŒ–é™¤åŒ…æ‹¬è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬æµ‹è¯•è¾…åŠ©å·¥ä½œçš„è‡ªåŠ¨åŒ–ã€‚</p>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•ä¸èƒ½å®Œæˆä¸‹é¢å“ªé¡¹è´¨é‡æŒ‡æ ‡æµ‹è¯•?</p>
<p>A.æ­£ç¡®æ€§	B.å¯é æ€§	C.æ€§èƒ½æ•ˆç‡ 	D.æ˜“ç”¨æ€§</p>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•å¯ä»¥ç”¨äºæµ‹è¯•æ­£ç¡®æ€§ã€å¯é æ€§å’Œæ€§èƒ½æ•ˆç‡ç­‰è´¨é‡æŒ‡æ ‡ï¼Œä½†å¯¹äºæ˜“ç”¨æ€§çš„æµ‹è¯•åˆ™ç›¸å¯¹æœ‰é™ã€‚æ˜“ç”¨æ€§é€šå¸¸æ¶‰åŠåˆ°ç”¨æˆ·ç•Œé¢çš„å¯æ“ä½œæ€§ã€ç”¨æˆ·ä½“éªŒå’Œç”¨æˆ·å‹å¥½æ€§ç­‰æ–¹é¢ï¼Œè¿™äº›ç‰¹å¾éš¾ä»¥å®Œå…¨é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•æ¥è¦†ç›–å’Œè¯„ä¼°ã€‚æ˜“ç”¨æ€§æµ‹è¯•é€šå¸¸éœ€è¦äººå·¥å‚ä¸ï¼Œé€šè¿‡ç”¨æˆ·å®é™…æ“ä½œå’Œåé¦ˆæ¥è¯„ä¼°ç³»ç»Ÿçš„æ˜“ç”¨æ€§ã€‚</p>
<p><strong>JUnit</strong>æ˜¯ä¸€ç§ç™½ç›’æµ‹è¯•å·¥å…·ï¼Œå› ä¸ºå®ƒä¸»è¦ç”¨äºå•å…ƒæµ‹è¯•ï¼Œå¯ä»¥ç›´æ¥è®¿é—®å’Œæµ‹è¯•ä»£ç çš„å†…éƒ¨ç»“æ„å’Œé€»è¾‘ã€‚å®ƒé€šå¸¸ç”¨äºJavaå¼€å‘ç¯å¢ƒä¸­ï¼Œç”¨äºæµ‹è¯•Javaåº”ç”¨ç¨‹åºçš„å„ä¸ªå•å…ƒå’Œæ¨¡å—ã€‚<strong>UFT</strong>ï¼ˆUnified Functional Testingï¼‰æ˜¯ä¸€ç§é»‘ç›’æµ‹è¯•å·¥å…·ï¼Œç”¨äºåŠŸèƒ½æµ‹è¯•å’Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚å®ƒä¸»è¦ç”¨äºæµ‹è¯•åº”ç”¨ç¨‹åºçš„å¤–éƒ¨è¡Œä¸ºå’Œç”¨æˆ·ç•Œé¢ï¼Œè€Œä¸éœ€è¦äº†è§£åº”ç”¨ç¨‹åºçš„å†…éƒ¨å®ç°ã€‚<br><strong>Load Runner</strong>æ˜¯ä¸€ç§æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œç”¨äºæµ‹è¯•åº”ç”¨ç¨‹åºåœ¨è´Ÿè½½å’Œå‹åŠ›æ¡ä»¶ä¸‹çš„æ€§èƒ½è¡¨ç°ã€‚å®ƒé€šå¸¸ç”¨äºæ¨¡æ‹Ÿå¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®åº”ç”¨ç¨‹åºï¼Œä»¥è¯„ä¼°å…¶æ€§èƒ½å’Œå¯é æ€§ã€‚<br><strong>Selenium</strong>æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œä¸»è¦ç”¨äºWebåº”ç”¨ç¨‹åºçš„åŠŸèƒ½æµ‹è¯•å’Œå›å½’æµ‹è¯•ã€‚å®ƒå¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œå’Œäº¤äº’ï¼Œå¹¶å¯¹åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢è¿›è¡Œæµ‹è¯•ã€‚ç”±äºå®ƒä¸»è¦å…³æ³¨åº”ç”¨ç¨‹åºçš„å¤–éƒ¨è¡Œä¸ºï¼Œå› æ­¤å®ƒä¹Ÿè¢«å½’ç±»ä¸ºé»‘ç›’æµ‹è¯•å·¥å…·ã€‚</p>
<h2 id="ç¬¬åç« -æµ‹è¯•éœ€æ±‚åˆ†æä¸æµ‹è¯•è®¡åˆ’"><a href="#ç¬¬åç« -æµ‹è¯•éœ€æ±‚åˆ†æä¸æµ‹è¯•è®¡åˆ’" class="headerlink" title="ç¬¬åç«  æµ‹è¯•éœ€æ±‚åˆ†æä¸æµ‹è¯•è®¡åˆ’"></a>ç¬¬åç«  æµ‹è¯•éœ€æ±‚åˆ†æä¸æµ‹è¯•è®¡åˆ’</h2><p>åŠŸèƒ½æµ‹è¯•èŒƒå›´</p>
<blockquote>
<p>é¡µé¢é“¾æ¥:é¡µé¢æ˜¯å¦å­˜åœ¨ã€é¡µé¢æ˜¯å¦æ­£ç¡®è·³è½¬<br>æ§ä»¶åŠŸèƒ½:æŒ‰é’®åŠŸèƒ½æ˜¯å¦æ­£ç¡®ã€åˆ—è¡¨å†…å®¹æ˜¯å¦æ­£ç¡®ã€å…‰æ ‡ä½ç½®ç§»åŠ¨æ˜¯å¦é¡ºåºæ­£ç¡®<br>è¾“å…¥æ–‡æœ¬æ¡†:æ•°æ®æ ¼å¼ã€æ•°æ®ç±»å‹ã€æ•°æ®é•¿åº¦æ˜¯å¦æ£€æŸ¥<br>Webå›¾å½¢æµ‹è¯•:å›¾ç‰‡æ–‡å­—æç¤ºæ˜¯å¦æ­£ç¡®ã€å›¾ç‰‡é“¾æ¥æ˜¯å¦æ­£ç¡®ã€å›¾ç‰‡åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹æ˜¾ç¤ºæ˜¯å¦æ­£ç¡®<br>è¡¨å•æµ‹è¯•:è¯·æ±‚æ˜¯å¦å“åº”ã€è„šæœ¬æ˜¯å¦æ­£ç¡®æ‰§è¡Œ</p>
</blockquote>
<p>éåŠŸèƒ½æµ‹è¯•èŒƒå›´ã€‚</p>
<blockquote>
<p>æ€§èƒ½æµ‹è¯•â€”â€”å“åº”æ—¶é—´ã€ååé‡ç­‰<br>å®‰å…¨æµ‹è¯•â€”â€”ç”¨æˆ·éªŒè¯ã€æˆæƒè®¿é—®ã€æ•°æ®å®‰å…¨ç­‰<br>å®¹é”™æµ‹è¯•â€”â€”éƒ¨ä»¶æŸååç³»ç»Ÿä»æ­£å¸¸è¿è¡Œèƒ½åŠ›<br>å…¼å®¹æ€§æµ‹è¯•â€”â€”ç¡¬ä»¶å…¼å®¹æ€§ã€æ“ä½œç³»ç»Ÿå…¼å®¹æ€§ã€æµè§ˆå™¨å…¼å®¹æ€§Â·å¯ä¼¸ç¼©æ€§æµ‹è¯•â€”â€”å¢åŠ å®¹é‡çš„èƒ½åŠ›<br>å¯ç”¨æ€§æµ‹è¯•â€”â€”æ­£å¸¸è¿è¡Œæ—¶é—´&#x2F;æ€»è¿è¡Œæ—¶é—´</p>
</blockquote>
<h2 id="ç¬¬åä¸€ç« -è½¯ä»¶è´¨é‡ä¿è¯"><a href="#ç¬¬åä¸€ç« -è½¯ä»¶è´¨é‡ä¿è¯" class="headerlink" title="ç¬¬åä¸€ç«  è½¯ä»¶è´¨é‡ä¿è¯"></a>ç¬¬åä¸€ç«  è½¯ä»¶è´¨é‡ä¿è¯</h2><p><strong>è½¯ä»¶åº¦é‡</strong>æ˜¯æ ¹æ®ä¸€å®šè§„åˆ™å¯¹è½¯ä»¶é¡¹ç›®ã€è½¯ä»¶è¿‡ç¨‹ã€è½¯ä»¶äº§å“è¿›è¡Œæ•°æ®å®šä¹‰ã€æ•°æ®æ”¶é›†åŠé‡åŒ–å¤„ç†ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†æ¸…æ™°åœ°ç†è§£ã€é¢„æµ‹ã€è¯„ä¼°ã€æ§åˆ¶å’Œæ”¹å–„è½¯ä»¶è´¨é‡ã€‚</p>
<p><img src="https://s2.loli.net/2023/06/02/sZKupSB7FxJXjwI.png" alt="NK38BB~K_`__MF0`3SH_VC9.png"></p>
<p><a href="https://smms.app/image/VIRA859hNGcTP1H" target="_blank"><img src="https://s2.loli.net/2023/06/02/VIRA859hNGcTP1H.png" alt="_RF_ABD_90`8@LYLXYP4R@A.png"></a></p>
<p><a href="https://smms.app/image/1rZ85Mps9dmJN3z" target="_blank"><img src="https://s2.loli.net/2023/06/02/1rZ85Mps9dmJN3z.png" alt="_Q1DGL`_SUS_P_RW~_TX6_N.png"></a></p>
<p>å†ä¸¾ä¸ªä¸Šæœºè€ƒè¯•è€ƒçš„é¢˜å§ï¼Œç»†æ€ä¹Ÿä¸æ˜¯ä¸èƒ½å‡ºå¤§é¢˜ï¼š</p>
<p>é’ˆå¯¹å¦‚ä¸‹Javaç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæ‰¾å‡ºè¯¥ç¨‹åºçš„ç¼ºé™·ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å¯¹ä¼ å…¥å‚æ•°telCodeï¼ˆç”µè¯å·ç ï¼‰è¿›è¡Œå¤„ç†ï¼Œä»ä¸­æå–è¯¥ç”µè¯å·ç çš„åº§æœºå·ç ï¼Œå¹¶å°†å…¶è¾“å‡ºè¿”å›ã€‚ </span></span><br><span class="line"><span class="comment"> * ä¾‹å¦‚ï¼Œè¾“å…¥ç”µè¯å·ç ä¸ºâ€œ86,28,83202112â€ï¼Œ è¿”å›å€¼åº”ä¸ºâ€œ83202112â€ */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getPhoneNo</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getPhoneNumber</span><span class="params">(String telCode)</span> &#123; </span><br><span class="line">	  <span class="keyword">if</span> (telCode == <span class="literal">null</span> ) &#123; </span><br><span class="line">	    <span class="keyword">return</span> <span class="string">&quot;è¾“å…¥äº†ç©ºå­—ç¬¦ä¸²&quot;</span>;&#125;</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">		String localPhone[] = telCode.split(<span class="string">&quot;,&quot;</span>); </span><br><span class="line">		<span class="keyword">return</span> localPhone[<span class="number">2</span>]; &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¾è®¡å•å…ƒæµ‹è¯•ç”¨ä¾‹è¡¨ï¼Œåœ¨è¯¥è¡¨ä¸­å¡«å†™æµ‹è¯•ç”¨ä¾‹çš„è¾“å…¥æ•°æ®å’Œé¢„æœŸç»“æœæ•°æ®ã€‚</p>
<table>
<thead>
<tr>
<th>ç”¨ä¾‹</th>
<th>telCodeå€¼</th>
<th>é¢„æœŸç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>86,28,83202112</td>
<td>83202112</td>
</tr>
<tr>
<td>2</td>
<td>Null</td>
<td>è¾“å…¥äº†ç©ºå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>3</td>
<td>ç©ºæ ¼</td>
<td>è¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯</td>
</tr>
<tr>
<td>4</td>
<td>86,83202112</td>
<td>è¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯</td>
</tr>
<tr>
<td>5</td>
<td>86,28,83202112%</td>
<td>è¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯</td>
</tr>
</tbody></table>
<p>ç¼ºé™·å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>ç”µè¯å·ç ä¸ºç©ºæ—¶æ— æ³•æç¤ºè¾“å…¥äº†ç©ºå­—ç¬¦ä¸²ã€‚</p>
</li>
<li><p>ç”µè¯å·ç è¾“å…¥ä¸ºç©ºæ ¼ï¼Œæˆ–è€…å…¶ä½æ•°ä¸ç¬¦åˆè¦æ±‚ï¼Œè¯¥ç¨‹åºæŠ¥é”™è€Œæ— æ³•ç»§ç»­è¿è¡Œï¼Œåº”è¯¥æç¤ºè¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯ã€‚</p>
</li>
<li><p>å½“ç”µè¯å·ç å«æœ‰éæ³•å­—ç¬¦ï¼Œè¯¥ç¨‹åºæ²¡æœ‰æç¤ºè¾“å…¥äº†éæ³•å­—ç¬¦ï¼Œè€Œæ˜¯ç»§ç»­è¾“å‡ºäº†éæ³•å­—ç¬¦ï¼Œåº”è¯¥æç¤ºè¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯æ‰å¯¹ã€‚</p>
</li>
</ol>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getPhoneNoTest_83202112</span> &#123;</span><br><span class="line">    getPhoneNo getPhoneNo=<span class="keyword">new</span> <span class="title class_">getPhoneNo</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getPhoneNumber</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getPhoneNo1</span><span class="params">()</span> &#123;</span><br><span class="line">        String expectedResult=<span class="string">&quot;83202112&quot;</span>;</span><br><span class="line">        assertEquals(expectedResult,getPhoneNo.getPhoneNumber(<span class="string">&quot;86,28,83202112&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getPhoneNo2</span><span class="params">()</span> &#123;</span><br><span class="line">        String expectedResult=<span class="string">&quot;è¾“å…¥äº†ç©ºå­—ç¬¦ä¸²&quot;</span>;</span><br><span class="line">        assertEquals(expectedResult,getPhoneNo.getPhoneNumber(<span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getPhoneNo3</span><span class="params">()</span> &#123;</span><br><span class="line">        String expectedResult=<span class="string">&quot;è¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯&quot;</span>;</span><br><span class="line">        assertEquals(expectedResult,getPhoneNo.getPhoneNumber(<span class="string">&quot; &quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getPhoneNo4</span><span class="params">()</span> &#123;</span><br><span class="line">        String expectedResult=<span class="string">&quot;è¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯&quot;</span>;</span><br><span class="line">        assertEquals(expectedResult,getPhoneNo.getPhoneNumber(<span class="string">&quot;86,83202112&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getPhoneNo5</span><span class="params">()</span> &#123;</span><br><span class="line">        String expectedResult=<span class="string">&quot;è¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯&quot;</span>;</span><br><span class="line">        assertEquals(expectedResult,getPhoneNo.getPhoneNumber(<span class="string">&quot;86,28,83202112%&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹åçš„æºç¨‹åºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getPhoneNo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhoneNumber</span><span class="params">(String telCode)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (telCode == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;è¾“å…¥äº†ç©ºå­—ç¬¦ä¸²&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            String localPhone[] = telCode.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (localPhone.length &lt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;è¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">phoneNumber</span> <span class="operator">=</span> localPhone[<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; phoneNumber.length(); i++) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> phoneNumber.charAt(i);</span><br><span class="line">                <span class="keyword">if</span> (c &lt; <span class="string">&#x27;0&#x27;</span> ||c &gt; <span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;è¾“å…¥ç”µè¯å·ç æ ¼å¼é”™è¯¯&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> phoneNumber;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è½¯ä»¶æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>beegoæ¡†æ¶å¼€å‘æ–‡æ¡£</title>
    <url>/2023/07/20/Go/30/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>beego æ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘ Go åº”ç”¨çš„ HTTP æ¡†æ¶ï¼Œä»–å¯ä»¥ç”¨æ¥å¿«é€Ÿå¼€å‘ APIã€Web åŠåç«¯æœåŠ¡ç­‰å„ç§åº”ç”¨ï¼Œæ˜¯ä¸€ä¸ª RESTful çš„æ¡†æ¶ï¼Œä¸»è¦è®¾è®¡çµæ„Ÿæ¥æºäº tornadoã€sinatra å’Œ flask è¿™ä¸‰ä¸ªæ¡†æ¶ï¼Œä½†æ˜¯ç»“åˆäº† Go æœ¬èº«çš„ä¸€äº›ç‰¹æ€§ï¼ˆinterfaceã€struct åµŒå…¥ç­‰ï¼‰è€Œè®¾è®¡çš„ä¸€ä¸ªæ¡†æ¶ã€‚</p>
<h2 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h2><p>beego çš„æ•´ä½“è®¾è®¡æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/architecture.png"></p>
<p>beego æ˜¯åŸºäºå…«å¤§ç‹¬ç«‹çš„æ¨¡å—æ„å»ºçš„ï¼Œæ˜¯ä¸€ä¸ªé«˜åº¦è§£è€¦çš„æ¡†æ¶ã€‚å½“åˆè®¾è®¡ beego çš„æ—¶å€™å°±æ˜¯è€ƒè™‘åŠŸèƒ½æ¨¡å—åŒ–ï¼Œç”¨æˆ·å³ä½¿ä¸ä½¿ç”¨ beego çš„ HTTP é€»è¾‘ï¼Œä¹Ÿä¾æ—§å¯ä»¥ä½¿ç”¨è¿™äº›ç‹¬ç«‹æ¨¡å—ï¼Œä¾‹å¦‚ï¼šä½ å¯ä»¥ä½¿ç”¨ cache æ¨¡å—æ¥åšä½ çš„ç¼“å­˜é€»è¾‘ï¼›ä½¿ç”¨æ—¥å¿—æ¨¡å—æ¥è®°å½•ä½ çš„æ“ä½œä¿¡æ¯ï¼›ä½¿ç”¨ config æ¨¡å—æ¥è§£æä½ å„ç§æ ¼å¼çš„æ–‡ä»¶ã€‚æ‰€ä»¥ beego ä¸ä»…å¯ä»¥ç”¨äº HTTP ç±»çš„åº”ç”¨å¼€å‘ï¼Œåœ¨ä½ çš„ socket æ¸¸æˆå¼€å‘ä¸­ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„æ¨¡å—ï¼Œè¿™ä¹Ÿæ˜¯ beego å¦‚æ­¤å—æ¬¢è¿çš„ä¸€ä¸ªåŸå› ã€‚å¤§å®¶å¦‚æœç©è¿‡ä¹é«˜çš„è¯ï¼Œåº”è¯¥çŸ¥é“å¾ˆå¤šé«˜çº§çš„ä¸œè¥¿éƒ½æ˜¯ä¸€å—ä¸€å—çš„ç§¯æœ¨æ­å»ºå‡ºæ¥çš„ï¼Œè€Œè®¾è®¡ beego çš„æ—¶å€™ï¼Œè¿™äº›æ¨¡å—å°±æ˜¯ç§¯æœ¨ï¼Œé«˜çº§æœºå™¨äººå°±æ˜¯ beegoã€‚</p>
<h2 id="æ‰§è¡Œé€»è¾‘"><a href="#æ‰§è¡Œé€»è¾‘" class="headerlink" title="æ‰§è¡Œé€»è¾‘"></a>æ‰§è¡Œé€»è¾‘</h2><p>æ—¢ç„¶ beego æ˜¯åŸºäºè¿™äº›æ¨¡å—æ„å»ºçš„ï¼Œé‚£ä¹ˆå®ƒçš„æ‰§è¡Œé€»è¾‘æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿbeego æ˜¯ä¸€ä¸ªå…¸å‹çš„ MVC æ¶æ„ï¼Œå®ƒçš„æ‰§è¡Œé€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/flow.png"></p>
<h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p>ä¸€èˆ¬çš„ beego é¡¹ç›®çš„ç›®å½•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”œâ”€â”€ conf</span><br><span class="line">â”‚   â””â”€â”€ app.conf</span><br><span class="line">â”œâ”€â”€ controllers</span><br><span class="line">â”‚   â”œâ”€â”€ admin</span><br><span class="line">â”‚   â””â”€â”€ default.go</span><br><span class="line">â”œâ”€â”€ main.go</span><br><span class="line">â”œâ”€â”€ models</span><br><span class="line">â”‚   â””â”€â”€ models.go</span><br><span class="line">â”œâ”€â”€ static</span><br><span class="line">â”‚   â”œâ”€â”€ css</span><br><span class="line">â”‚   â”œâ”€â”€ ico</span><br><span class="line">â”‚   â”œâ”€â”€ img</span><br><span class="line">â”‚   â””â”€â”€ js</span><br><span class="line">â””â”€â”€ views</span><br><span class="line">    â”œâ”€â”€ admin</span><br><span class="line">    â””â”€â”€ index.tpl</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„ç›®å½•ç»“æ„æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ Mï¼ˆmodels ç›®å½•ï¼‰ã€Vï¼ˆviews ç›®å½•ï¼‰å’Œ Cï¼ˆcontrollers ç›®å½•ï¼‰çš„ç»“æ„ï¼Œ <code>main.go</code> æ˜¯å…¥å£æ–‡ä»¶ã€‚</p>
<h1 id="å®‰è£…ä¸å‡çº§"><a href="#å®‰è£…ä¸å‡çº§" class="headerlink" title="å®‰è£…ä¸å‡çº§"></a>å®‰è£…ä¸å‡çº§</h1><h2 id="beegoå®‰è£…"><a href="#beegoå®‰è£…" class="headerlink" title="beegoå®‰è£…"></a>beegoå®‰è£…</h2><p>beego çš„å®‰è£…æ˜¯å…¸å‹çš„ Go å®‰è£…åŒ…çš„å½¢å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go get github.com/beego/beego/v2@latest</span><br></pre></td></tr></table></figure>

<h2 id="beego-å‡çº§"><a href="#beego-å‡çº§" class="headerlink" title="beego å‡çº§"></a>beego å‡çº§</h2><p>beego å‡çº§åˆ†ä¸º go æ–¹å¼å‡çº§å’Œæºç ä¸‹è½½å‡çº§ï¼š</p>
<ul>
<li><p>Go å‡çº§,é€šè¿‡è¯¥æ–¹å¼ç”¨æˆ·å¯ä»¥å‡çº§ beego æ¡†æ¶ï¼Œå¼ºçƒˆæ¨èè¯¥æ–¹å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go get -u github.com/beego/beego/v2</span><br></pre></td></tr></table></figure>
</li>
<li><p>æºç ä¸‹è½½å‡çº§ï¼Œç”¨æˆ·è®¿é—® <code>https://github.com/beego/beego</code> ,ä¸‹è½½æºç ï¼Œç„¶åè¦†ç›–åˆ° <code>$GOPATH/src/github.com/beego/beego</code> ç›®å½•ï¼Œç„¶åé€šè¿‡æœ¬åœ°æ‰§è¡Œå®‰è£…å°±å¯ä»¥å‡çº§äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go install 	github.com/beego/beego/v2</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="bee-å·¥å…·"><a href="#bee-å·¥å…·" class="headerlink" title="bee å·¥å…·"></a>bee å·¥å…·</h2><p>bee å·¥å…·æ˜¯ä¸€ä¸ªä¸ºäº†ååŠ©å¿«é€Ÿå¼€å‘ beego é¡¹ç›®è€Œåˆ›å»ºçš„é¡¹ç›®ï¼Œé€šè¿‡ bee æ‚¨å¯ä»¥å¾ˆå®¹æ˜“çš„è¿›è¡Œ beego é¡¹ç›®çš„åˆ›å»ºã€çƒ­ç¼–è¯‘ã€å¼€å‘ã€æµ‹è¯•ã€å’Œéƒ¨ç½²ã€‚</p>
<h3 id="bee-å·¥å…·çš„å®‰è£…"><a href="#bee-å·¥å…·çš„å®‰è£…" class="headerlink" title="bee å·¥å…·çš„å®‰è£…"></a>bee å·¥å…·çš„å®‰è£…</h3><p>æ‚¨å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼å®‰è£… bee å·¥å…·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># go 1.16 ä»¥å‰çš„ç‰ˆæœ¬</span></span><br><span class="line">go get -u github.com/beego/bee/v2</span><br><span class="line"></span><br><span class="line"><span class="comment"># go 1.16åŠä»¥åçš„ç‰ˆæœ¬</span></span><br><span class="line">go install github.com/beego/bee/v2@latest</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œä¹‹åï¼Œ<code>bee</code> å¯æ‰§è¡Œæ–‡ä»¶é»˜è®¤å­˜æ”¾åœ¨ <code>$GOPATH/bin</code> é‡Œé¢ï¼Œæ‰€ä»¥æ‚¨éœ€è¦æŠŠ <code>$GOPATH/bin</code> æ·»åŠ åˆ°æ‚¨çš„ç¯å¢ƒå˜é‡ä¸­ï¼Œæ‰å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p>
<h3 id="bee-å·¥å…·å‘½ä»¤è¯¦è§£"><a href="#bee-å·¥å…·å‘½ä»¤è¯¦è§£" class="headerlink" title="bee å·¥å…·å‘½ä»¤è¯¦è§£"></a>bee å·¥å…·å‘½ä»¤è¯¦è§£</h3><p>æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>bee</code>ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">version     Prints the current Bee version</span><br><span class="line">migrate     Runs database migrations</span><br><span class="line">api         Creates a Beego API application</span><br><span class="line">bale        Transforms non-Go files to Go <span class="built_in">source</span> files</span><br><span class="line">fix         Fixes your application by making it compatible with newer versions of Beego</span><br><span class="line">pro         Source code generator</span><br><span class="line">dev         Commands <span class="built_in">which</span> used to <span class="built_in">help</span> to develop beego and bee</span><br><span class="line">dlv         Start a debugging session using Delve</span><br><span class="line">dockerize   Generates a Dockerfile and docker-compose.yaml <span class="keyword">for</span> your Beego application</span><br><span class="line">generate    Source code generator</span><br><span class="line">hprose      Creates an RPC application based on Hprose and Beego frameworks</span><br><span class="line">new         Creates a Beego application</span><br><span class="line">pack        Compresses a Beego application into a single file</span><br><span class="line">rs          Run customized scripts</span><br><span class="line">run         Run the application by starting a <span class="built_in">local</span> development server</span><br><span class="line">server      serving static content over HTTP on port</span><br><span class="line">update      Update Bee</span><br></pre></td></tr></table></figure>

<h4 id="newå‘½ä»¤"><a href="#newå‘½ä»¤" class="headerlink" title="newå‘½ä»¤"></a><code>new</code>å‘½ä»¤</h4><p><code>new</code> å‘½ä»¤æ˜¯æ–°å»ºä¸€ä¸ª Web é¡¹ç›®ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸‹æ‰§è¡Œ <code>bee new &lt;é¡¹ç›®å&gt;</code> å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ã€‚ä½†æ˜¯æ³¨æ„è¯¥å‘½ä»¤å¿…é¡»åœ¨ <code>$GOPATH/src</code> ä¸‹æ‰§è¡Œã€‚æœ€åä¼šåœ¨ <code>$GOPATH/src</code> ç›¸åº”ç›®å½•ä¸‹ç”Ÿæˆå¦‚ä¸‹ç›®å½•ç»“æ„çš„é¡¹ç›®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bee new myproject</span><br><span class="line">[INFO] Creating application...</span><br><span class="line">/gopath/src/myproject/</span><br><span class="line">/gopath/src/myproject/conf/</span><br><span class="line">/gopath/src/myproject/controllers/</span><br><span class="line">/gopath/src/myproject/models/</span><br><span class="line">/gopath/src/myproject/static/</span><br><span class="line">/gopath/src/myproject/static/js/</span><br><span class="line">/gopath/src/myproject/static/css/</span><br><span class="line">/gopath/src/myproject/static/img/</span><br><span class="line">/gopath/src/myproject/views/</span><br><span class="line">/gopath/src/myproject/conf/app.conf</span><br><span class="line">/gopath/src/myproject/controllers/default.go</span><br><span class="line">/gopath/src/myproject/views/index.tpl</span><br><span class="line">/gopath/src/myproject/main.go</span><br><span class="line">13-11-25 09:50:39 [SUCC] New application successfully created!</span><br><span class="line">myproject</span><br><span class="line">â”œâ”€â”€ conf</span><br><span class="line">â”‚   â””â”€â”€ app.conf</span><br><span class="line">â”œâ”€â”€ controllers</span><br><span class="line">â”‚   â””â”€â”€ default.go</span><br><span class="line">â”œâ”€â”€ main.go</span><br><span class="line">â”œâ”€â”€ models</span><br><span class="line">â”œâ”€â”€ routers</span><br><span class="line">â”‚   â””â”€â”€ router.go</span><br><span class="line">â”œâ”€â”€ static</span><br><span class="line">â”‚   â”œâ”€â”€ css</span><br><span class="line">â”‚   â”œâ”€â”€ img</span><br><span class="line">â”‚   â””â”€â”€ js</span><br><span class="line">â”œâ”€â”€ tests</span><br><span class="line">â”‚   â””â”€â”€ default_test.go</span><br><span class="line">â””â”€â”€ views</span><br><span class="line">    â””â”€â”€ index.tpl</span><br><span class="line"></span><br><span class="line">8 directories, 4 files</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»¥ä¸Šæ˜¯å®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼Œä½†æ˜¯æˆ‘äº²æµ‹å¯ä»¥åœ¨ä»»æ„è·¯å¾„ä½¿ç”¨<code>bee new &lt;é¡¹ç›®å&gt;</code>å‘½ä»¤ï¼Œä¸ä¸€å®šè¦åœ¨<code>$GOPATH/src</code> ã€‚</p>
</blockquote>
<h4 id="api-å‘½ä»¤"><a href="#api-å‘½ä»¤" class="headerlink" title="api å‘½ä»¤"></a><code>api</code> å‘½ä»¤</h4><p>ä¸Šé¢çš„ <code>new</code> å‘½ä»¤æ˜¯ç”¨æ¥æ–°å»º Web é¡¹ç›®ï¼Œä¸è¿‡å¾ˆå¤šç”¨æˆ·ä½¿ç”¨ beego æ¥å¼€å‘ API åº”ç”¨ã€‚æ‰€ä»¥è¿™ä¸ª <code>api</code> å‘½ä»¤å°±æ˜¯ç”¨æ¥åˆ›å»º API åº”ç”¨çš„ï¼Œæ‰§è¡Œå‘½ä»¤ä¹‹åå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bee api apiproject</span><br><span class="line">create app folder: /gopath/src/apiproject</span><br><span class="line">create conf: /gopath/src/apiproject/conf</span><br><span class="line">create controllers: /gopath/src/apiproject/controllers</span><br><span class="line">create models: /gopath/src/apiproject/models</span><br><span class="line">create tests: /gopath/src/apiproject/tests</span><br><span class="line">create conf app.conf: /gopath/src/apiproject/conf/app.conf</span><br><span class="line">create controllers default.go: /gopath/src/apiproject/controllers/default.go</span><br><span class="line">create tests default.go: /gopath/src/apiproject/tests/default_test.go</span><br><span class="line">create models object.go: /gopath/src/apiproject/models/object.go</span><br><span class="line">create main.go: /gopath/src/apiproject/main.go</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªé¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apiproject</span><br><span class="line">â”œâ”€â”€ conf</span><br><span class="line">â”‚   â””â”€â”€ app.conf</span><br><span class="line">â”œâ”€â”€ controllers</span><br><span class="line">â”‚   â””â”€â”€ object.go</span><br><span class="line">â”‚   â””â”€â”€ user.go</span><br><span class="line">â”œâ”€â”€ docs</span><br><span class="line">â”‚   â””â”€â”€ doc.go</span><br><span class="line">â”œâ”€â”€ main.go</span><br><span class="line">â”œâ”€â”€ models</span><br><span class="line">â”‚   â””â”€â”€ object.go</span><br><span class="line">â”‚   â””â”€â”€ user.go</span><br><span class="line">â”œâ”€â”€ routers</span><br><span class="line">â”‚   â””â”€â”€ router.go</span><br><span class="line">â””â”€â”€ tests</span><br><span class="line">    â””â”€â”€ default_test.go</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„ç›®å½•æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å’Œ Web é¡¹ç›®ç›¸æ¯”ï¼Œå°‘äº† static å’Œ views ç›®å½•ï¼Œå¤šäº†ä¸€ä¸ª test æ¨¡å—ï¼Œç”¨æ¥åšå•å…ƒæµ‹è¯•çš„ã€‚åŒæ—¶ï¼Œè¯¥å‘½ä»¤è¿˜æ”¯æŒä¸€äº›è‡ªå®šä¹‰å‚æ•°è‡ªåŠ¨è¿æ¥æ•°æ®åº“åˆ›å»ºç›¸å…³ model å’Œ controller:<br><code>bee api [appname] [-tables=&quot;&quot;] [-driver=mysql] [-conn=&quot;root:&lt;password&gt;@tcp(127.0.0.1:3306)/test&quot;]</code><br>å¦‚æœ conn å‚æ•°ä¸ºç©ºåˆ™åˆ›å»ºä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œå¦åˆ™å°†åŸºäºé“¾æ¥ä¿¡æ¯é“¾æ¥æ•°æ®åº“åˆ›å»ºé¡¹ç›®ã€‚</p>
<blockquote>
<p>åŒæ ·ç¬”è€…äº²æµ‹è¯¥å‘½ä»¤ä¹Ÿä¸ä¸€å®šè¦åœ¨<code>$GOPATH/src</code>è¿è¡Œ</p>
</blockquote>
<h4 id="run-å‘½ä»¤"><a href="#run-å‘½ä»¤" class="headerlink" title="run å‘½ä»¤"></a><code>run</code> å‘½ä»¤</h4><p>æˆ‘ä»¬åœ¨å¼€å‘ Go é¡¹ç›®çš„æ—¶å€™æœ€å¤§çš„é—®é¢˜æ˜¯ç»å¸¸éœ€è¦è‡ªå·±æ‰‹åŠ¨å»ç¼–è¯‘å†è¿è¡Œï¼Œ<code>bee run</code> å‘½ä»¤æ˜¯ç›‘æ§ beego çš„é¡¹ç›®ï¼Œé€šè¿‡ <a href="https://github.com/howeyc/fsnotify">fsnotify</a>ç›‘æ§æ–‡ä»¶ç³»ç»Ÿã€‚ä½†æ˜¯æ³¨æ„è¯¥å‘½ä»¤å¿…é¡»åœ¨ <code>$GOPATH/src/appname</code> ä¸‹æ‰§è¡Œã€‚<br>è¿™æ ·æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°±å¯ä»¥å®æ—¶çš„çœ‹åˆ°é¡¹ç›®ä¿®æ”¹ä¹‹åçš„æ•ˆæœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bee run</span><br><span class="line">13-11-25 09:53:04 [INFO] Uses <span class="string">&#x27;myproject&#x27;</span> as <span class="string">&#x27;appname&#x27;</span></span><br><span class="line">13-11-25 09:53:04 [INFO] Initializing watcher...</span><br><span class="line">13-11-25 09:53:04 [TRAC] Directory(/gopath/src/myproject/controllers)</span><br><span class="line">13-11-25 09:53:04 [TRAC] Directory(/gopath/src/myproject/models)</span><br><span class="line">13-11-25 09:53:04 [TRAC] Directory(/gopath/src/myproject)</span><br><span class="line">13-11-25 09:53:04 [INFO] Start building...</span><br><span class="line">13-11-25 09:53:16 [SUCC] Build was successful</span><br><span class="line">13-11-25 09:53:16 [INFO] Restarting myproject ...</span><br><span class="line">13-11-25 09:53:16 [INFO] ./myproject is running...</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨å°±å¯ä»¥çœ‹åˆ°æ•ˆæœ <code>http://localhost:8080/</code>:</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/beerun.png"></p>
<p>å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº† <code>Controller</code> ä¸‹é¢çš„ <code>default.go</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œè¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">13-11-25 10:11:20 [EVEN] &quot;/gopath/src/myproject/controllers/default.go&quot;: DELETE|MODIFY</span><br><span class="line">13-11-25 10:11:20 [INFO] Start building...</span><br><span class="line">13-11-25 10:11:20 [SKIP] &quot;/gopath/src/myproject/controllers/default.go&quot;: CREATE</span><br><span class="line">13-11-25 10:11:23 [SKIP] &quot;/gopath/src/myproject/controllers/default.go&quot;: MODIFY</span><br><span class="line">13-11-25 10:11:23 [SUCC] Build was successful</span><br><span class="line">13-11-25 10:11:23 [INFO] Restarting myproject ...</span><br><span class="line">13-11-25 10:11:23 [INFO] ./myproject is running...</span><br></pre></td></tr></table></figure>

<p>åˆ·æ–°æµè§ˆå™¨æˆ‘ä»¬çœ‹åˆ°æ–°çš„ä¿®æ”¹å†…å®¹å·²ç»è¾“å‡ºã€‚</p>
<h4 id="pack-å‘½ä»¤"><a href="#pack-å‘½ä»¤" class="headerlink" title="pack å‘½ä»¤"></a><code>pack</code> å‘½ä»¤</h4><p><code>pack</code> ç›®å½•ç”¨æ¥å‘å¸ƒåº”ç”¨çš„æ—¶å€™æ‰“åŒ…ï¼Œä¼šæŠŠé¡¹ç›®æ‰“åŒ…æˆ zip åŒ…ï¼Œè¿™æ ·æˆ‘ä»¬éƒ¨ç½²çš„æ—¶å€™ç›´æ¥æŠŠæ‰“åŒ…ä¹‹åçš„é¡¹ç›®ä¸Šä¼ ï¼Œè§£å‹å°±å¯ä»¥éƒ¨ç½²äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bee pack</span><br><span class="line">app path: /gopath/src/apiproject</span><br><span class="line">GOOS darwin GOARCH amd64</span><br><span class="line">build apiproject</span><br><span class="line">build success</span><br><span class="line">exclude prefix:</span><br><span class="line">exclude suffix: .go:.DS_Store:.tmp</span><br><span class="line">file write to `/gopath/src/apiproject/apiproject.tar.gz`</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›®å½•ä¸‹æœ‰å¦‚ä¸‹çš„å‹ç¼©æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rwxr-xr-x  1 astaxie  staff  8995376 11 25 22:46 apiproject</span><br><span class="line">-rw-r--r--  1 astaxie  staff  2240288 11 25 22:58 apiproject.tar.gz</span><br><span class="line">drwxr-xr-x  3 astaxie  staff      102 11 25 22:31 conf</span><br><span class="line">drwxr-xr-x  3 astaxie  staff      102 11 25 22:31 controllers</span><br><span class="line">-rw-r--r--  1 astaxie  staff      509 11 25 22:31 main.go</span><br><span class="line">drwxr-xr-x  3 astaxie  staff      102 11 25 22:31 models</span><br><span class="line">drwxr-xr-x  3 astaxie  staff      102 11 25 22:31 tests</span><br></pre></td></tr></table></figure>

<h4 id="version-å‘½ä»¤"><a href="#version-å‘½ä»¤" class="headerlink" title="version å‘½ä»¤"></a><code>version</code> å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bee version</span><br><span class="line">______</span><br><span class="line">| ___ \</span><br><span class="line">| |_/ /  ___   ___</span><br><span class="line">| ___ \ / _ \ / _ \</span><br><span class="line">| |_/ /|  __/|  __/</span><br><span class="line">\____/  \___| \___| v2.0.4</span><br><span class="line"></span><br><span class="line">â”œâ”€â”€ GoVersion : go1.20.4</span><br><span class="line">â”œâ”€â”€ GOOS      : windows</span><br><span class="line">â”œâ”€â”€ GOARCH    : amd64</span><br><span class="line">â”œâ”€â”€ NumCPU    : 16</span><br><span class="line">â”œâ”€â”€ GOPATH    : C:\Users\19393\sdk\go1.20.4\go_workspace</span><br><span class="line">â”œâ”€â”€ GOROOT    : C:/Users/19393/sdk/go1.20.4</span><br><span class="line">â”œâ”€â”€ Compiler  : gc</span><br><span class="line">â””â”€â”€ Date      : Friday, 21 Jul 2023</span><br></pre></td></tr></table></figure>

<h4 id="generate-å‘½ä»¤"><a href="#generate-å‘½ä»¤" class="headerlink" title="generate å‘½ä»¤"></a><code>generate</code> å‘½ä»¤</h4><p>è¿™ä¸ªå‘½ä»¤æ˜¯ç”¨æ¥è‡ªåŠ¨åŒ–çš„ç”Ÿæˆä»£ç çš„ï¼ŒåŒ…å«äº†ä»æ•°æ®åº“ä¸€é”®ç”Ÿæˆ modelï¼Œè¿˜åŒ…å«äº† scaffold çš„ï¼Œé€šè¿‡è¿™ä¸ªå‘½ä»¤ï¼Œè®©å¤§å®¶å¼€å‘ä»£ç ä¸å†æ…¢</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bee generate scaffold [scaffoldname] [-fields=&quot;&quot;] [-driver=mysql] [-conn=&quot;root:@tcp(127.0.0.1:3306)/test&quot;]</span><br><span class="line">    The generate scaffold command will do a number of things for you.</span><br><span class="line">    -fields: a list of table fields. Format: field:type, ...</span><br><span class="line">    -driver: [mysql | postgres | sqlite], the default is mysql</span><br><span class="line">    -conn:   the connection string used by the driver, the default is root:@tcp(127.0.0.1:3306)/test</span><br><span class="line">    example: bee generate scaffold post -fields=&quot;title:string,body:text&quot;</span><br><span class="line"></span><br><span class="line">bee generate model [modelname] [-fields=&quot;&quot;]</span><br><span class="line">    generate RESTful model based on fields</span><br><span class="line">    -fields: a list of table fields. Format: field:type, ...</span><br><span class="line"></span><br><span class="line">bee generate controller [controllerfile]</span><br><span class="line">    generate RESTful controllers</span><br><span class="line"></span><br><span class="line">bee generate view [viewpath]</span><br><span class="line">    generate CRUD view in viewpath</span><br><span class="line"></span><br><span class="line">bee generate migration [migrationfile] [-fields=&quot;&quot;]</span><br><span class="line">    generate migration file for making database schema update</span><br><span class="line">    -fields: a list of table fields. Format: field:type, ...</span><br><span class="line"></span><br><span class="line">bee generate docs</span><br><span class="line">    generate swagger doc file</span><br><span class="line">    </span><br><span class="line">bee generate routers [-ctrlDir=/path/to/controller/directory] [-routersFile=/path/to/routers/file.go] [-routersPkg=myPackage]</span><br><span class="line">    -ctrlDir: the directory contains controllers definition. Bee scans this directory and its subdirectory to generate routers info</span><br><span class="line">    -routersFile: output file. All generated routers info will be output into this file. </span><br><span class="line">              If file not found, Bee create new one, or Bee truncates it.</span><br><span class="line">              The default value is &quot;routers/commentRouters.go&quot;</span><br><span class="line">    -routersPkg: package declaration.The default value is &quot;routers&quot;. </span><br><span class="line">              When you pass routersFile parameter, you&#x27;d better pass this parameter</span><br><span class="line"></span><br><span class="line">bee generate test [routerfile]</span><br><span class="line">    generate testcase</span><br><span class="line"></span><br><span class="line">bee generate appcode [-tables=&quot;&quot;] [-driver=mysql] [-conn=&quot;root:@tcp(127.0.0.1:3306)/test&quot;] [-level=3]</span><br><span class="line">    generate appcode based on an existing database</span><br><span class="line">    -tables: a list of table names separated by &#x27;,&#x27;, default is empty, indicating all tables</span><br><span class="line">    -driver: [mysql | postgres | sqlite], the default is mysql</span><br><span class="line">    -conn:   the connection string used by the driver.</span><br><span class="line">             default for mysql:    root:@tcp(127.0.0.1:3306)/test</span><br><span class="line">             default for postgres: postgres://postgres:postgres@127.0.0.1:5432/postgres</span><br><span class="line">    -level:  [1 | 2 | 3], 1 = models; 2 = models,controllers; 3 = models,controllers,router</span><br></pre></td></tr></table></figure>

<h4 id="migrate-å‘½ä»¤"><a href="#migrate-å‘½ä»¤" class="headerlink" title="migrate å‘½ä»¤"></a><code>migrate</code> å‘½ä»¤</h4><p>è¿™ä¸ªå‘½ä»¤æ˜¯åº”ç”¨çš„æ•°æ®åº“è¿ç§»å‘½ä»¤ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ¯æ¬¡åº”ç”¨å‡çº§ï¼Œé™çº§çš„SQLç®¡ç†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bee migrate [-driver=mysql] [-conn=&quot;root:@tcp(127.0.0.1:3306)/test&quot;]</span><br><span class="line">    run all outstanding migrations</span><br><span class="line">    -driver: [mysql | postgresql | sqlite], the default is mysql</span><br><span class="line">    -conn:   the connection string used by the driver, the default is root:@tcp(127.0.0.1:3306)/test</span><br><span class="line"></span><br><span class="line">bee migrate rollback [-driver=mysql] [-conn=&quot;root:@tcp(127.0.0.1:3306)/test&quot;]</span><br><span class="line">    rollback the last migration operation</span><br><span class="line">    -driver: [mysql | postgresql | sqlite], the default is mysql</span><br><span class="line">    -conn:   the connection string used by the driver, the default is root:@tcp(127.0.0.1:3306)/test</span><br><span class="line"></span><br><span class="line">bee migrate reset [-driver=mysql] [-conn=&quot;root:@tcp(127.0.0.1:3306)/test&quot;]</span><br><span class="line">    rollback all migrations</span><br><span class="line">    -driver: [mysql | postgresql | sqlite], the default is mysql</span><br><span class="line">    -conn:   the connection string used by the driver, the default is root:@tcp(127.0.0.1:3306)/test</span><br><span class="line"></span><br><span class="line">bee migrate refresh [-driver=mysql] [-conn=&quot;root:@tcp(127.0.0.1:3306)/test&quot;]</span><br><span class="line">    rollback all migrations and run them all again</span><br><span class="line">    -driver: [mysql | postgresql | sqlite], the default is mysql</span><br><span class="line">    -conn:   the connection string used by the driver, the default is root:@tcp(127.0.0.1:3306)/test</span><br></pre></td></tr></table></figure>

<h1 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h1><p>beego æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè¿›è¡Œå¿«é€Ÿå¼€å‘åº”ç”¨çš„æ¡†æ¶ï¼Œå¿«é€Ÿå…¥é—¨å°†å¸¦é¢†ä½ å¿«é€Ÿçš„å»ºç«‹ä¸€ä¸ª beego çš„é¡¹ç›®ï¼Œç„¶åè¿è¡Œèµ·æ¥ã€‚æ¥ç€ä¿®æ”¹ä»£ç ï¼Œè®©æˆ‘ä»¬äº†è§£æ•´ä¸ª MVC çš„è¿è¡Œæœºåˆ¶ã€‚é‚£ä¹ˆè®©æˆ‘ä»¬å¼€å§‹åˆ›å»ºé¡¹ç›®å§ï¼</p>
<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>beego çš„é¡¹ç›®åŸºæœ¬éƒ½æ˜¯é€šè¿‡ <code>bee</code> å‘½ä»¤æ¥åˆ›å»ºçš„ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºé¡¹ç›®ä¹‹å‰ç¡®ä¿ä½ å·²ç»å®‰è£…äº† bee å·¥å…·å’Œ beegoã€‚</p>
<p>ç°åœ¨ä¸€åˆ‡å°±ç»ªæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹åˆ›å»ºé¡¹ç›®äº†ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ <code>$GOPATH/src</code> æ‰€åœ¨çš„ç›®å½•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  src  bee new quickstart</span><br><span class="line">[INFO] Creating application...</span><br><span class="line">/gopath/src/quickstart/</span><br><span class="line">/gopath/src/quickstart/conf/</span><br><span class="line">/gopath/src/quickstart/controllers/</span><br><span class="line">/gopath/src/quickstart/models/</span><br><span class="line">/gopath/src/quickstart/routers/</span><br><span class="line">/gopath/src/quickstart/tests/</span><br><span class="line">/gopath/src/quickstart/static/</span><br><span class="line">/gopath/src/quickstart/static/js/</span><br><span class="line">/gopath/src/quickstart/static/css/</span><br><span class="line">/gopath/src/quickstart/static/img/</span><br><span class="line">/gopath/src/quickstart/views/</span><br><span class="line">/gopath/src/quickstart/conf/app.conf</span><br><span class="line">/gopath/src/quickstart/controllers/default.go</span><br><span class="line">/gopath/src/quickstart/views/index.tpl</span><br><span class="line">/gopath/src/quickstart/routers/router.go</span><br><span class="line">/gopath/src/quickstart/tests/default_test.go</span><br><span class="line">/gopath/src/quickstart/main.go</span><br><span class="line">2014/11/06 18:17:09 [SUCC] New application successfully created!</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸€ä¸ªç®€å•çš„å‘½ä»¤å°±åˆ›å»ºäº†ä¸€ä¸ª beego é¡¹ç›®ã€‚ä»–çš„ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">quickstart</span><br><span class="line">|-- conf</span><br><span class="line">|   `-- app.conf</span><br><span class="line">|-- controllers</span><br><span class="line">|   `-- default.go</span><br><span class="line">|-- main.go</span><br><span class="line">|-- models</span><br><span class="line">|-- routers</span><br><span class="line">|   `-- router.go</span><br><span class="line">|-- static</span><br><span class="line">|   |-- css</span><br><span class="line">|   |-- img</span><br><span class="line">|   `-- js</span><br><span class="line">|-- tests</span><br><span class="line">|   `-- default_test.go</span><br><span class="line">`-- views</span><br><span class="line">    `-- index.tpl</span><br></pre></td></tr></table></figure>

<p>ä»ç›®å½•ç»“æ„ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ MVC æ¶æ„çš„åº”ç”¨ï¼Œ<code>main.go</code> æ˜¯å…¥å£æ–‡ä»¶ã€‚</p>
<h2 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h2><p>beego é¡¹ç›®åˆ›å»ºä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆå§‹åŒ–<code>go.mod</code>æ–‡ä»¶ã€‚è¿›å…¥ç›®å½•ä¹‹åï¼Œä½¿ç”¨<code>go mod init</code>åˆå§‹åŒ–æ¨¡å—ä¾èµ–ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬å°±å¼€å§‹è¿è¡Œé¡¹ç›®ï¼Œé¦–å…ˆè¿›å…¥åˆ›å»ºçš„é¡¹ç›®ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>bee run</code> æ¥è¿è¡Œè¯¥é¡¹ç›®ï¼Œè¿™æ ·å°±å¯ä»¥åšåˆ°çƒ­ç¼–è¯‘çš„æ•ˆæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">âœ  src  cd quickstart</span><br><span class="line">âœ  quickstart  bee run</span><br><span class="line">2014/11/06 18:18:34 [INFO] Uses &#x27;quickstart&#x27; as &#x27;appname&#x27;</span><br><span class="line">2014/11/06 18:18:34 [INFO] Initializing watcher...</span><br><span class="line">2014/11/06 18:18:34 [TRAC] Directory(/gopath/src/quickstart/controllers)</span><br><span class="line">2014/11/06 18:18:34 [TRAC] Directory(/gopath/src/quickstart)</span><br><span class="line">2014/11/06 18:18:34 [TRAC] Directory(/gopath/src/quickstart/routers)</span><br><span class="line">2014/11/06 18:18:34 [TRAC] Directory(/gopath/src/quickstart/tests)</span><br><span class="line">2014/11/06 18:18:34 [INFO] Start building...</span><br><span class="line">2014/11/06 18:18:35 [SUCC] Build was successful</span><br><span class="line">2014/11/06 18:18:35 [INFO] Restarting quickstart ...</span><br><span class="line">2014/11/06 18:18:35 [INFO] ./quickstart is running...</span><br><span class="line">2014/11/06 18:18:35 [app.go:96] [I] http server Running on :8080</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æˆ‘ä»¬çš„åº”ç”¨å·²ç»åœ¨ <code>8080</code> ç«¯å£(beego çš„é»˜è®¤ç«¯å£)è·‘èµ·æ¥äº†.ä½ æ˜¯ä¸æ˜¯è§‰å¾—å¾ˆç¥å¥‡ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰ nginx å’Œ apache å±…ç„¶å¯ä»¥è‡ªå·±å¹²è¿™ä¸ªäº‹æƒ…ï¼Ÿæ˜¯çš„ï¼ŒGo å…¶å®å·²ç»åšäº†ç½‘ç»œå±‚çš„ä¸œè¥¿ï¼Œbeego åªæ˜¯å°è£…äº†ä¸€ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥åšåˆ°ä¸éœ€è¦ nginx å’Œ apacheã€‚è®©æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨çœ‹çœ‹æ•ˆæœå§ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/beerun.png"></p>
<h2 id="è·¯ç”±è®¾ç½®"><a href="#è·¯ç”±è®¾ç½®" class="headerlink" title="è·¯ç”±è®¾ç½®"></a>è·¯ç”±è®¾ç½®</h2><p>å‰é¢æˆ‘ä»¬å·²ç»åˆ›å»ºäº† beego é¡¹ç›®ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿçœ‹åˆ°å®ƒå·²ç»è¿è¡Œèµ·æ¥äº†ï¼Œé‚£ä¹ˆæ˜¯å¦‚ä½•è¿è¡Œèµ·æ¥çš„å‘¢ï¼Ÿè®©æˆ‘ä»¬ä»å…¥å£æ–‡ä»¶å…ˆåˆ†æèµ·æ¥å§ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	_ <span class="string">&quot;quickstart/routers&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/beego/beego/v2/server/web&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	web.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çœ‹åˆ° main å‡½æ•°æ˜¯å…¥å£å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“ Go çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ–¹å¼ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/init.png"></p>
<p>è¿™é‡Œæˆ‘ä»¬å°±çœ‹åˆ°äº†æˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªåŒ… <code>_ &quot;quickstart/routers&quot;</code>,è¿™ä¸ªåŒ…åªå¼•å…¥æ‰§è¡Œäº†é‡Œé¢çš„ init å‡½æ•°ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªé‡Œé¢åšäº†ä»€ä¹ˆäº‹æƒ…ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> routers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;quickstart/controllers&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/beego/beego/v2/server/web&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    web.Router(<span class="string">&quot;/&quot;</span>, &amp;controllers.MainController&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·¯ç”±åŒ…é‡Œé¢æˆ‘ä»¬çœ‹åˆ°æ‰§è¡Œäº†è·¯ç”±æ³¨å†Œ <code>web.Router</code>, è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½æ˜¯æ˜ å°„ URL åˆ° controllerï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ URL (ç”¨æˆ·è¯·æ±‚çš„åœ°å€)ï¼Œè¿™é‡Œæˆ‘ä»¬æ³¨å†Œçš„æ˜¯ <code>/</code>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è®¿é—®çš„ä¸å¸¦ä»»ä½•å‚æ•°çš„ URLï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯¹åº”çš„ Controllerï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å³å°†æŠŠè¯·æ±‚åˆ†å‘åˆ°é‚£ä¸ªæ§åˆ¶å™¨æ¥æ‰§è¡Œç›¸åº”çš„é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œç±»ä¼¼çš„æ–¹å¼æ³¨å†Œå¦‚ä¸‹è·¯ç”±ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/user&quot;</span>, &amp;controllers.UserController&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ç”¨æˆ·å°±å¯ä»¥é€šè¿‡è®¿é—® <code>/user</code> å»æ‰§è¡Œ <code>UserController</code> çš„é€»è¾‘ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„è·¯ç”±ã€‚</p>
<p>ä¸€æ—¦ run èµ·æ¥ä¹‹åï¼Œæˆ‘ä»¬çš„æœåŠ¡å°±ç›‘å¬åœ¨ä¸¤ä¸ªç«¯å£äº†ï¼Œä¸€ä¸ªæœåŠ¡ç«¯å£ 8080 ä½œä¸ºå¯¹å¤–æœåŠ¡ï¼Œå¦ä¸€ä¸ª 8088 ç«¯å£å®è¡Œå¯¹å†…ç›‘æ§ã€‚</p>
<h2 id="controller-é€»è¾‘"><a href="#controller-é€»è¾‘" class="headerlink" title="controller é€»è¾‘"></a>controller é€»è¾‘</h2><p>å‰é¢æˆ‘ä»¬äº†è§£äº†å¦‚ä½•æŠŠç”¨æˆ·çš„è¯·æ±‚åˆ†å‘åˆ°æ§åˆ¶å™¨ï¼Œè¿™å°èŠ‚æˆ‘ä»¬å°±ä»‹ç»å¤§å®¶å¦‚ä½•æ¥å†™æ§åˆ¶å™¨ï¼Œé¦–å…ˆæˆ‘ä»¬è¿˜æ˜¯ä»æºç åˆ†æå…¥æ‰‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> controllers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">        <span class="string">&quot;github.com/beego/beego/v2/server/web&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MainController <span class="keyword">struct</span> &#123;</span><br><span class="line">        web.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MainController)</span></span> Get() &#123;</span><br><span class="line">        this.Data[<span class="string">&quot;Website&quot;</span>] = <span class="string">&quot;beego.vip&quot;</span></span><br><span class="line">        this.Data[<span class="string">&quot;Email&quot;</span>] = <span class="string">&quot;astaxie@gmail.com&quot;</span></span><br><span class="line">        this.TplName = <span class="string">&quot;index.tpl&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç æ˜¾ç¤ºé¦–å…ˆæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæ§åˆ¶å™¨ <code>MainController</code>ï¼Œè¿™ä¸ªæ§åˆ¶å™¨é‡Œé¢ç»„åˆäº† <code>web.Controller</code>ï¼Œè¿™å°±æ˜¯ Go çš„ç»„åˆæ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ <code>MainController</code> è‡ªåŠ¨æ‹¥æœ‰äº†æ‰€æœ‰ <code>web.Controller</code> çš„æ–¹æ³•ã€‚</p>
<p>è€Œ <code>web.Controller</code> æ‹¥æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬ <code>Init</code>ã€<code>Prepare</code>ã€<code>Post</code>ã€<code>Get</code>ã€<code>Delete</code>ã€<code>Head</code> ç­‰æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™çš„æ–¹å¼æ¥å®ç°è¿™äº›æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬ä¸Šé¢çš„ä»£ç å°±æ˜¯é‡å†™äº† <code>Get</code> æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬å…ˆå‰ä»‹ç»è¿‡ beego æ˜¯ä¸€ä¸ª RESTful çš„æ¡†æ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è¯·æ±‚é»˜è®¤æ˜¯æ‰§è¡Œå¯¹åº” <code>req.Method</code> çš„æ–¹æ³•ã€‚ä¾‹å¦‚æµè§ˆå™¨çš„æ˜¯ <code>GET</code> è¯·æ±‚ï¼Œé‚£ä¹ˆé»˜è®¤å°±ä¼šæ‰§è¡Œ <code>MainController</code> ä¸‹çš„ <code>Get</code> æ–¹æ³•ã€‚è¿™æ ·æˆ‘ä»¬ä¸Šé¢çš„ Get æ–¹æ³•å°±ä¼šè¢«æ‰§è¡Œåˆ°ï¼Œè¿™æ ·å°±è¿›å…¥äº†æˆ‘ä»¬çš„é€»è¾‘å¤„ç†ã€‚ï¼ˆç”¨æˆ·å¯ä»¥æ”¹å˜è¿™ä¸ªè¡Œä¸ºï¼Œé€šè¿‡æ³¨å†Œè‡ªå®šä¹‰çš„å‡½æ•°åã€‚)</p>
<p>é‡Œé¢çš„ä»£ç æ˜¯éœ€è¦æ‰§è¡Œçš„é€»è¾‘ï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„è¾“å‡ºæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å„ç§æ–¹å¼è·å–æ•°æ®ï¼Œç„¶åèµ‹å€¼åˆ° <code>this.Data</code> ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨è¾“å‡ºæ•°æ®çš„ mapï¼Œå¯ä»¥èµ‹å€¼ä»»æ„ç±»å‹çš„å€¼ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯ç®€å•ä¸¾ä¾‹è¾“å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>æœ€åä¸€ä¸ªå°±æ˜¯éœ€è¦å»æ¸²æŸ“çš„æ¨¡æ¿ï¼Œ<code>this.TplName</code> å°±æ˜¯éœ€è¦æ¸²æŸ“çš„æ¨¡æ¿ï¼Œè¿™é‡ŒæŒ‡å®šäº† <code>index.tpl</code>ï¼Œå¦‚æœç”¨æˆ·ä¸è®¾ç½®è¯¥å‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¼šå»åˆ°æ¨¡æ¿ç›®å½•çš„ <code>Controller/&lt;æ–¹æ³•å&gt;.tpl</code> æŸ¥æ‰¾ï¼Œä¾‹å¦‚ä¸Šé¢çš„æ–¹æ³•ä¼šå» <code>maincontroller/get.tpl</code> ***(æ–‡ä»¶ã€æ–‡ä»¶å¤¹å¿…é¡»å°å†™)***ã€‚</p>
<p>ç”¨æˆ·è®¾ç½®äº†æ¨¡æ¿ä¹‹åç³»ç»Ÿä¼šè‡ªåŠ¨çš„è°ƒç”¨ <code>Render</code> å‡½æ•°ï¼ˆè¿™ä¸ªå‡½æ•°æ˜¯åœ¨ <code>web.Controller</code> ä¸­å®ç°çš„ï¼‰ï¼Œæ‰€ä»¥æ— éœ€ç”¨æˆ·è‡ªå·±æ¥è°ƒç”¨æ¸²æŸ“ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨æ¨¡ç‰ˆï¼Œç›´æ¥ç”¨ <code>this.Ctx.WriteString</code> è¾“å‡ºå­—ç¬¦ä¸²ï¼Œå¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">func (this *MainController) Get() &#123;</span><br><span class="line">        this.Ctx.WriteString(&quot;hello&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤æˆ‘ä»¬çš„æ§åˆ¶å™¨åˆ†æåŸºæœ¬å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ¥ç¼–å†™ modelã€‚</p>
<h2 id="model-é€»è¾‘"><a href="#model-é€»è¾‘" class="headerlink" title="model é€»è¾‘"></a>model é€»è¾‘</h2><p>æˆ‘ä»¬çŸ¥é“ Web åº”ç”¨ä¸­æˆ‘ä»¬ç”¨çš„æœ€å¤šçš„å°±æ˜¯æ•°æ®åº“æ“ä½œï¼Œè€Œ model å±‚ä¸€èˆ¬ç”¨æ¥åšè¿™äº›æ“ä½œï¼Œæˆ‘ä»¬çš„ <code>bee new</code> ä¾‹å­ä¸å­˜åœ¨ Model çš„æ¼”ç¤ºï¼Œä½†æ˜¯ <code>bee api</code> åº”ç”¨ä¸­å­˜åœ¨ model çš„åº”ç”¨ã€‚è¯´çš„ç®€å•ä¸€ç‚¹ï¼Œå¦‚æœæ‚¨çš„åº”ç”¨è¶³å¤Ÿç®€å•ï¼Œé‚£ä¹ˆ Controller å¯ä»¥å¤„ç†ä¸€åˆ‡çš„é€»è¾‘ï¼Œå¦‚æœæ‚¨çš„é€»è¾‘é‡Œé¢å­˜åœ¨ç€å¯ä»¥å¤ç”¨çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆå°±æŠ½å–å‡ºæ¥å˜æˆä¸€ä¸ªæ¨¡å—ã€‚å› æ­¤ Model å°±æ˜¯é€æ­¥æŠ½è±¡çš„è¿‡ç¨‹ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨ Model é‡Œé¢å¤„ç†ä¸€äº›æ•°æ®è¯»å–ï¼Œå¦‚ä¸‹æ˜¯ä¸€ä¸ªæ—¥å¿—åˆ†æåº”ç”¨ä¸­çš„ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;path/filepath&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	NotPV []<span class="type">string</span> = []<span class="type">string</span>&#123;<span class="string">&quot;css&quot;</span>, <span class="string">&quot;js&quot;</span>, <span class="string">&quot;class&quot;</span>, <span class="string">&quot;gif&quot;</span>, <span class="string">&quot;jpg&quot;</span>, <span class="string">&quot;jpeg&quot;</span>, <span class="string">&quot;png&quot;</span>, <span class="string">&quot;bmp&quot;</span>, <span class="string">&quot;ico&quot;</span>, <span class="string">&quot;rss&quot;</span>, <span class="string">&quot;xml&quot;</span>, <span class="string">&quot;swf&quot;</span>&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> big = <span class="number">0xFFFFFF</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">LogPV</span><span class="params">(urls <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	ext := filepath.Ext(urls)</span><br><span class="line">	<span class="keyword">if</span> ext == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> NotPV &#123;</span><br><span class="line">		<span class="keyword">if</span> v == strings.ToLower(ext) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥å¦‚æœæ‚¨çš„åº”ç”¨è¶³å¤Ÿç®€å•ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦ Model äº†ï¼›å¦‚æœä½ çš„æ¨¡å—å¼€å§‹å¤šäº†ï¼Œéœ€è¦å¤ç”¨ï¼Œéœ€è¦é€»è¾‘åˆ†ç¦»äº†ï¼Œé‚£ä¹ˆ Model æ˜¯å¿…ä¸å¯å°‘çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ†æå¦‚ä½•ç¼–å†™ View å±‚çš„ä¸œè¥¿ã€‚</p>
<h2 id="View-ç¼–å†™"><a href="#View-ç¼–å†™" class="headerlink" title="View ç¼–å†™"></a>View ç¼–å†™</h2><p>åœ¨å‰é¢ç¼–å†™ Controller çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ Get é‡Œé¢å†™è¿‡è¿™æ ·çš„è¯­å¥ <code>this.TplName = &quot;index.tpl&quot;</code>ï¼Œè®¾ç½®æ˜¾ç¤ºçš„æ¨¡æ¿æ–‡ä»¶ï¼Œé»˜è®¤æ”¯æŒ <code>tpl</code> å’Œ <code>html</code> çš„åç¼€åï¼Œå¦‚æœæƒ³è®¾ç½®å…¶ä»–åç¼€ä½ å¯ä»¥è°ƒç”¨ <code>beego.AddTemplateExt</code> æ¥å£è®¾ç½®ï¼Œé‚£ä¹ˆæ¨¡æ¿å¦‚ä½•æ¥æ˜¾ç¤ºç›¸åº”çš„æ•°æ®å‘¢ï¼Ÿbeego é‡‡ç”¨äº† Go è¯­è¨€é»˜è®¤çš„æ¨¡æ¿å¼•æ“ï¼Œæ‰€ä»¥å’Œ Go çš„æ¨¡æ¿è¯­æ³•ä¸€æ ·ï¼ŒGo æ¨¡æ¿çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•åœ¨æˆ‘<a href="https://blog.csdn.net/m0_63230155/article/details/131732504?spm=1001.2014.3001.5502">è¿™ç¯‡æ–‡ç« </a>æœ‰è®²è§£ã€‚</p>
<p>æˆ‘ä»¬çœ‹çœ‹å¿«é€Ÿå…¥é—¨é‡Œé¢çš„ä»£ç ï¼ˆå»æ‰äº† css æ ·å¼ï¼‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Beego&lt;/title&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;header class=<span class="string">&quot;hero-unit&quot;</span> style=<span class="string">&quot;background-color:#A9F16C&quot;</span>&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">                &lt;div class=<span class="string">&quot;row&quot;</span>&gt;</span><br><span class="line">                    &lt;div class=<span class="string">&quot;hero-text&quot;</span>&gt;</span><br><span class="line">                        &lt;h1&gt;Welcome to Beego!&lt;/h1&gt;</span><br><span class="line">                        &lt;p class=<span class="string">&quot;description&quot;</span>&gt;</span><br><span class="line">                            Beego is a simple &amp; powerful Go web framework which is inspired by tornado and sinatra.</span><br><span class="line">                            &lt;br /&gt;</span><br><span class="line">                            Official website: &lt;a href=<span class="string">&quot;http://&#123;&#123;.Website&#125;&#125;&quot;</span>&gt;&#123;&#123;.Website&#125;&#125;&lt;/a&gt;</span><br><span class="line">                            &lt;br /&gt;</span><br><span class="line">                            Contact me: &#123;&#123;.Email&#125;&#125;</span><br><span class="line">                        &lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/header&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨ Controller é‡Œé¢æŠŠæ•°æ®èµ‹å€¼ç»™äº† dataï¼ˆmap ç±»å‹ï¼‰ï¼Œç„¶åæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­å°±ç›´æ¥é€šè¿‡ key è®¿é—® <code>.Website</code> å’Œ <code>.Email</code> ã€‚è¿™æ ·å°±åšåˆ°äº†æ•°æ®çš„è¾“å‡ºã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è®²è§£å¦‚ä½•è®©é™æ€æ–‡ä»¶è¾“å‡ºã€‚</p>
<h2 id="é™æ€æ–‡ä»¶å¤„ç†"><a href="#é™æ€æ–‡ä»¶å¤„ç†" class="headerlink" title="é™æ€æ–‡ä»¶å¤„ç†"></a>é™æ€æ–‡ä»¶å¤„ç†</h2><p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•è¾“å‡ºé™æ€é¡µé¢ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç½‘é¡µå¾€å¾€åŒ…å«äº†å¾ˆå¤šçš„é™æ€æ–‡ä»¶ï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€JSã€CSS ç­‰ï¼Œåˆšæ‰åˆ›å»ºçš„åº”ç”¨é‡Œé¢å°±åˆ›å»ºäº†å¦‚ä¸‹ç›®å½•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”œâ”€â”€ static</span><br><span class="line">	â”‚   â”œâ”€â”€ css</span><br><span class="line">	â”‚   â”œâ”€â”€ img</span><br><span class="line">	â”‚   â””â”€â”€ js</span><br></pre></td></tr></table></figure>

<p>beego é»˜è®¤æ³¨å†Œäº† static ç›®å½•ä¸ºé™æ€å¤„ç†çš„ç›®å½•ï¼Œæ³¨å†Œæ ·å¼ï¼šURL å‰ç¼€å’Œæ˜ å°„çš„ç›®å½•ï¼ˆåœ¨<code>/main.go</code>æ–‡ä»¶ä¸­<code>web.Run()</code>ä¹‹å‰åŠ å…¥ï¼‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">StaticDir[<span class="string">&quot;/static&quot;</span>] = <span class="string">&quot;static&quot;</span></span><br></pre></td></tr></table></figure>

<p>ç”¨æˆ·å¯ä»¥è®¾ç½®å¤šä¸ªé™æ€æ–‡ä»¶å¤„ç†ç›®å½•ï¼Œä¾‹å¦‚ä½ æœ‰å¤šä¸ªæ–‡ä»¶ä¸‹è½½ç›®å½• download1ã€download2ï¼Œä½ å¯ä»¥è¿™æ ·æ˜ å°„ï¼ˆåœ¨ <code>/main.go</code> æ–‡ä»¶ä¸­ <code>web.Run()</code> ä¹‹å‰åŠ å…¥ï¼‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.SetStaticPath(<span class="string">&quot;/down1&quot;</span>, <span class="string">&quot;download1&quot;</span>)</span><br><span class="line">web.SetStaticPath(<span class="string">&quot;/down2&quot;</span>, <span class="string">&quot;download2&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ç”¨æˆ·è®¿é—® URL <code>http://localhost:8080/down1/123.txt</code> åˆ™ä¼šè¯·æ±‚ download1 ç›®å½•ä¸‹çš„ 123.txt æ–‡ä»¶ã€‚</p>
<h1 id="beego-çš„-MVC-æ¶æ„"><a href="#beego-çš„-MVC-æ¶æ„" class="headerlink" title="beego çš„ MVC æ¶æ„"></a>beego çš„ MVC æ¶æ„</h1><p>beego æ˜¯ä¸€ä¸ªå…¸å‹çš„ MVC æ¡†æ¶ï¼Œå®ƒçš„æ•´ä¸ªæ‰§è¡Œé€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/detail.png"></p>
<p>é€šè¿‡æ–‡å­—æ¥æè¿°å¦‚ä¸‹ï¼š</p>
<ol>
<li>åœ¨ç›‘å¬çš„ç«¯å£æ¥æ”¶æ•°æ®ï¼Œé»˜è®¤ç›‘å¬åœ¨ 8080 ç«¯å£ã€‚</li>
<li>ç”¨æˆ·è¯·æ±‚åˆ°è¾¾ 8080 ç«¯å£ä¹‹åè¿›å…¥ beego çš„å¤„ç†é€»è¾‘ã€‚</li>
<li>åˆå§‹åŒ– Context å¯¹è±¡ï¼Œæ ¹æ®è¯·æ±‚åˆ¤æ–­æ˜¯å¦ä¸º WebSocket è¯·æ±‚ï¼Œå¦‚æœæ˜¯çš„è¯è®¾ç½® Inputï¼ŒåŒæ—¶åˆ¤æ–­è¯·æ±‚çš„æ–¹æ³•æ˜¯å¦åœ¨æ ‡å‡†è¯·æ±‚æ–¹æ³•ä¸­ï¼ˆGETã€POSTã€PUTã€DELETEã€PATCHã€OPTIONSã€HEADï¼‰ï¼Œé˜²æ­¢ç”¨æˆ·çš„æ¶æ„ä¼ªé€ è¯·æ±‚æ”»å‡»é€ æˆä¸å¿…è¦çš„å½±å“ã€‚</li>
<li>æ‰§è¡Œ BeforeRouter è¿‡æ»¤å™¨ï¼Œå½“ç„¶åœ¨ beego é‡Œé¢æœ‰å¼€å…³è®¾ç½®ã€‚å¦‚æœç”¨æˆ·è®¾ç½®äº†è¿‡æ»¤å™¨ï¼Œé‚£ä¹ˆè¯¥å¼€å…³æ‰“å¼€ï¼Œè¿™æ ·å¯ä»¥æé«˜åœ¨æ²¡æœ‰å¼€å¯è¿‡æ»¤å™¨çš„æƒ…å†µä¸‹æé«˜æ‰§è¡Œæ•ˆç‡ã€‚å¦‚æœåœ¨æ‰§è¡Œè¿‡æ»¤å™¨è¿‡ç¨‹ä¸­ï¼ŒresponseWriter å·²ç»æœ‰æ•°æ®è¾“å‡ºäº†ï¼Œé‚£ä¹ˆå°±æå‰ç»“æŸè¯¥è¯·æ±‚ï¼Œç›´æ¥è·³è½¬åˆ°ç›‘æ§åˆ¤æ–­ã€‚</li>
<li>å¼€å§‹æ‰§è¡Œé™æ€æ–‡ä»¶çš„å¤„ç†ï¼ŒæŸ¥çœ‹ç”¨æˆ·çš„è¯·æ±‚ URL æ˜¯å¦å’Œæ³¨å†Œåœ¨é™æ€æ–‡ä»¶å¤„ç† StaticDir ä¸­çš„ prefix æ˜¯å¦åŒ¹é…ã€‚å¦‚æœåŒ¹é…çš„è¯ï¼Œé‡‡ç”¨ <code>http</code> åŒ…ä¸­é»˜è®¤çš„ ServeFile æ¥å¤„ç†é™æ€æ–‡ä»¶ã€‚</li>
<li>å¦‚æœä¸æ˜¯é™æ€æ–‡ä»¶å¼€å§‹åˆå§‹åŒ– session æ¨¡å—(å¦‚æœå¼€å¯ session çš„è¯)ï¼Œè¿™ä¸ªé‡Œé¢å¤§å®¶éœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ çš„ BeforeRouter è¿‡æ»¤å™¨ç”¨åˆ°äº† session å°±ä¼šæŠ¥é”™ï¼Œä½ åº”è¯¥æŠŠå®ƒåŠ å…¥åˆ° AfterStatic è¿‡æ»¤å™¨ä¸­ã€‚</li>
<li>å¼€å§‹æ‰§è¡Œ AfterStatic è¿‡æ»¤å™¨ï¼Œå¦‚æœåœ¨æ‰§è¡Œè¿‡æ»¤å™¨è¿‡ç¨‹ä¸­ï¼ŒresponseWriter å·²ç»æœ‰æ•°æ®è¾“å‡ºäº†ï¼Œé‚£ä¹ˆå°±æå‰ç»“æŸè¯¥è¯·æ±‚ï¼Œç›´æ¥è·³è½¬åˆ°ç›‘æ§åˆ¤æ–­ã€‚</li>
<li>æ‰§è¡Œè¿‡è¿‡æ»¤å™¨ä¹‹åï¼Œå¼€å§‹ä»å›ºå®šçš„è·¯ç”±è§„åˆ™ä¸­æŸ¥æ‰¾å’Œè¯·æ±‚ URL ç›¸åŒ¹é…çš„å¯¹è±¡ã€‚è¿™ä¸ªåŒ¹é…æ˜¯å…¨åŒ¹é…è§„åˆ™ï¼Œå³å¦‚æœç”¨æˆ·è¯·æ±‚çš„ URL æ˜¯ <code>/hello/world</code>ï¼Œé‚£ä¹ˆå›ºå®šè§„åˆ™ä¸­ <code>/hello</code> æ˜¯ä¸ä¼šåŒ¹é…çš„ï¼Œåªæœ‰å®Œå…¨åŒ¹é…æ‰ç®—åŒ¹é…ã€‚å¦‚æœåŒ¹é…çš„è¯å°±è¿›å…¥é€»è¾‘æ‰§è¡Œï¼Œå¦‚æœä¸åŒ¹é…è¿›å…¥ä¸‹ä¸€ç¯èŠ‚çš„æ­£åˆ™åŒ¹é…ã€‚</li>
<li>æ­£åˆ™åŒ¹é…æ˜¯è¿›è¡Œæ­£åˆ™çš„å…¨åŒ¹é…ï¼Œè¿™ä¸ªæ­£åˆ™æ˜¯æŒ‰ç…§ç”¨æˆ·æ·»åŠ  beego è·¯ç”±é¡ºåºæ¥è¿›è¡ŒåŒ¹é…çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ åœ¨æ·»åŠ è·¯ç”±çš„æ—¶å€™ä½ çš„é¡ºåºå½±å“ä½ çš„åŒ¹é…ã€‚å’Œå›ºå®šåŒ¹é…ä¸€æ ·ï¼Œå¦‚æœåŒ¹é…çš„è¯å°±è¿›è¡Œé€»è¾‘æ‰§è¡Œï¼Œå¦‚æœä¸åŒ¹é…è¿›å…¥ Auto åŒ¹é…ã€‚</li>
<li>å¦‚æœç”¨æˆ·æ³¨å†Œäº† AutoRouterï¼Œé‚£ä¹ˆä¼šé€šè¿‡ <code>controller/method</code> è¿™æ ·çš„æ–¹å¼å»æŸ¥æ‰¾å¯¹åº”çš„ Controller å’Œä»–å†…ç½®çš„æ–¹æ³•ï¼Œå¦‚æœæ‰¾åˆ°å°±å¼€å§‹æ‰§è¡Œé€»è¾‘ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±è·³è½¬åˆ°ç›‘æ§åˆ¤æ–­ã€‚</li>
<li>å¦‚æœæ‰¾åˆ° Controller çš„è¯ï¼Œé‚£ä¹ˆå°±å¼€å§‹æ‰§è¡Œé€»è¾‘ï¼Œé¦–å…ˆæ‰§è¡Œ BeforeExec è¿‡æ»¤å™¨ï¼Œå¦‚æœåœ¨æ‰§è¡Œè¿‡æ»¤å™¨è¿‡ç¨‹ä¸­ï¼ŒresponseWriter å·²ç»æœ‰æ•°æ®è¾“å‡ºäº†ï¼Œé‚£ä¹ˆå°±æå‰ç»“æŸè¯¥è¯·æ±‚ï¼Œç›´æ¥è·³è½¬åˆ°ç›‘æ§åˆ¤æ–­ã€‚</li>
<li>Controller å¼€å§‹æ‰§è¡Œ Init å‡½æ•°ï¼Œåˆå§‹åŒ–åŸºæœ¬çš„ä¸€äº›ä¿¡æ¯ï¼Œè¿™ä¸ªå‡½æ•°ä¸€èˆ¬éƒ½æ˜¯ beego.Controller çš„åˆå§‹åŒ–ï¼Œä¸å»ºè®®ç”¨æˆ·ç»§æ‰¿çš„æ—¶å€™ä¿®æ”¹è¯¥å‡½æ•°ã€‚</li>
<li>æ˜¯å¦å¼€å¯äº† XSRFï¼Œå¼€å¯çš„è¯å°±è°ƒç”¨ Controller çš„ XsrfTokenï¼Œç„¶åå¦‚æœæ˜¯ POST è¯·æ±‚å°±è°ƒç”¨ CheckXsrfCookie æ–¹æ³•ã€‚</li>
<li>ç»§ç»­æ‰§è¡Œ Controller çš„ Prepare å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸€èˆ¬æ˜¯é¢„ç•™ç»™ç”¨æˆ·çš„ï¼Œç”¨æ¥åš Controller é‡Œé¢çš„ä¸€äº›å‚æ•°åˆå§‹åŒ–ä¹‹ç±»çš„å·¥ä½œã€‚å¦‚æœåœ¨åˆå§‹åŒ–ä¸­ responseWriter æœ‰è¾“å‡ºï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿›å…¥ Finish å‡½æ•°é€»è¾‘ã€‚</li>
<li>å¦‚æœæ²¡æœ‰è¾“å‡ºçš„è¯ï¼Œé‚£ä¹ˆæ ¹æ®ç”¨æˆ·æ³¨å†Œçš„æ–¹æ³•æ‰§è¡Œç›¸åº”çš„é€»è¾‘ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰æ³¨å†Œï¼Œé‚£ä¹ˆå°±è°ƒç”¨ http.Method å¯¹åº”çš„æ–¹æ³•ï¼ˆGet&#x2F;Post ç­‰ï¼‰ã€‚æ‰§è¡Œç›¸åº”çš„é€»è¾‘ï¼Œä¾‹å¦‚æ•°æ®è¯»å–ï¼Œæ•°æ®èµ‹å€¼ï¼Œæ¨¡æ¿æ˜¾ç¤ºä¹‹ç±»çš„ï¼Œæˆ–è€…ç›´æ¥è¾“å‡º JSON æˆ–è€… XMLã€‚</li>
<li>å¦‚æœ responseWriter æ²¡æœ‰è¾“å‡ºï¼Œé‚£ä¹ˆå°±è°ƒç”¨ Render å‡½æ•°è¿›è¡Œæ¨¡æ¿è¾“å‡ºã€‚</li>
<li>æ‰§è¡Œ Controller çš„ Finish å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯é¢„ç•™ç»™ç”¨æˆ·ç”¨æ¥é‡å†™çš„ï¼Œç”¨äºé‡Šæ”¾ä¸€äº›èµ„æºã€‚é‡Šæ”¾åœ¨ Init ä¸­åˆå§‹åŒ–çš„ä¿¡æ¯æ•°æ®ã€‚</li>
<li>æ‰§è¡Œ AfterExec è¿‡æ»¤å™¨ï¼Œå¦‚æœæœ‰è¾“å‡ºçš„è¯å°±è·³è½¬åˆ°ç›‘æ§åˆ¤æ–­é€»è¾‘ã€‚</li>
<li>æ‰§è¡Œ Controller çš„ Destructorï¼Œç”¨äºé‡Šæ”¾ Init ä¸­åˆå§‹åŒ–çš„ä¸€äº›æ•°æ®ã€‚</li>
<li>å¦‚æœè¿™ä¸€è·¯æ‰§è¡Œä¸‹æ¥éƒ½æ²¡æœ‰æ‰¾åˆ°è·¯ç”±ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨ 404 æ˜¾ç¤ºæ‰¾ä¸åˆ°è¯¥é¡µé¢ã€‚</li>
<li>æœ€åæ‰€æœ‰çš„é€»è¾‘éƒ½æ±‡èšåˆ°äº†ç›‘æ§åˆ¤æ–­ï¼Œå¦‚æœç”¨æˆ·å¼€å¯äº†ç›‘æ§æ¨¡å—ï¼ˆé»˜è®¤æ˜¯å¼€å¯ä¸€ä¸ª 8088 ç«¯å£ç”¨äºè¿›ç¨‹å†…ç›‘æ§ï¼‰ï¼Œè¿™æ ·å°±ä¼šæŠŠè®¿é—®çš„è¯·æ±‚é“¾æ¥æ‰”ç»™ç›‘æ§ç¨‹åºå»è®°å½•å½“å‰è®¿é—®çš„ QPSï¼Œå¯¹åº”çš„é“¾æ¥è®¿é—®çš„æ‰§è¡Œæ—¶é—´ï¼Œè¯·æ±‚é“¾æ¥ç­‰ã€‚</li>
</ol>
<h1 id="controller-è®¾è®¡"><a href="#controller-è®¾è®¡" class="headerlink" title="controller è®¾è®¡"></a>controller è®¾è®¡</h1><h2 id="å‚æ•°é…ç½®"><a href="#å‚æ•°é…ç½®" class="headerlink" title="å‚æ•°é…ç½®"></a>å‚æ•°é…ç½®</h2><p>beego ç›®å‰æ”¯æŒ INIã€XMLã€JSONã€YAML æ ¼å¼çš„é…ç½®æ–‡ä»¶è§£æï¼Œä½†æ˜¯é»˜è®¤é‡‡ç”¨äº† INI æ ¼å¼è§£æï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥è·å¾—å¾ˆå¤§çš„çµæ´»æ€§ã€‚</p>
<h3 id="é»˜è®¤é…ç½®è§£æ"><a href="#é»˜è®¤é…ç½®è§£æ" class="headerlink" title="é»˜è®¤é…ç½®è§£æ"></a>é»˜è®¤é…ç½®è§£æ</h3><p>beego é»˜è®¤ä¼šè§£æå½“å‰åº”ç”¨ä¸‹çš„ <code>conf/app.conf</code> æ–‡ä»¶ã€‚</p>
<p>é€šè¿‡è¿™ä¸ªæ–‡ä»¶ä½ å¯ä»¥åˆå§‹åŒ–å¾ˆå¤š beego çš„é»˜è®¤å‚æ•°ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">appname = beepkg</span><br><span class="line">httpaddr = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">httpport = <span class="number">9090</span></span><br><span class="line">runmode =<span class="string">&quot;dev&quot;</span></span><br><span class="line">autorender = <span class="literal">false</span></span><br><span class="line">recoverpanic = <span class="literal">false</span></span><br><span class="line">viewspath = <span class="string">&quot;myview&quot;</span></span><br></pre></td></tr></table></figure>

<p>å®ƒä»¬éƒ½ç»´æŠ¤åœ¨ç»“æ„ä½“ <code>beego/server/web#Config</code> ã€‚</p>
<p>BConfig å°±æ˜¯ beego é‡Œé¢çš„é»˜è®¤çš„é…ç½®ï¼Œä¹Ÿæ˜¯ç»“æ„ä½“ <code>beego/server/web#Config</code> çš„å®ä¾‹ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡<code>web.BConfig.AppName=&quot;beepkg&quot;</code>è¿™æ ·æ¥ä¿®æ”¹ï¼Œå’Œä¸Šé¢çš„é…ç½®æ•ˆæœä¸€æ ·ï¼Œåªæ˜¯ä¸€ä¸ªåœ¨ä»£ç é‡Œé¢å†™æ­»äº†ï¼Œè€Œé…ç½®æ–‡ä»¶å°±ä¼šæ˜¾å¾—æ›´åŠ çµæ´»ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®åº”ç”¨éœ€è¦ç”¨çš„ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚ä¸‹é¢æ‰€ç¤ºçš„æ•°æ®åº“ä¿¡æ¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">mysqluser = <span class="string">&quot;root&quot;</span></span><br><span class="line">mysqlpass = <span class="string">&quot;rootpass&quot;</span></span><br><span class="line">mysqlurls = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">mysqldb   = <span class="string">&quot;beego&quot;</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆä½ å°±å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è·å–è®¾ç½®çš„é…ç½®ä¿¡æ¯:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.AppConfig.String(<span class="string">&quot;mysqluser&quot;</span>)</span><br><span class="line">web.AppConfig.String(<span class="string">&quot;mysqlpass&quot;</span>)</span><br><span class="line">web.AppConfig.String(<span class="string">&quot;mysqlurls&quot;</span>)</span><br><span class="line">web.AppConfig.String(<span class="string">&quot;mysqldb&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="ä¸åŒçº§åˆ«çš„é…ç½®"><a href="#ä¸åŒçº§åˆ«çš„é…ç½®" class="headerlink" title="ä¸åŒçº§åˆ«çš„é…ç½®"></a>ä¸åŒçº§åˆ«çš„é…ç½®</h3><p>åœ¨é…ç½®æ–‡ä»¶é‡Œé¢æ”¯æŒ sectionï¼Œå¯ä»¥æœ‰ä¸åŒçš„ Runmode çš„é…ç½®ï¼Œé»˜è®¤ä¼˜å…ˆè¯»å– runmode ä¸‹çš„é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚ä¸‹é¢çš„é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">appname = beepkg</span><br><span class="line">httpaddr = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">httpport = <span class="number">9090</span></span><br><span class="line">runmode =<span class="string">&quot;dev&quot;</span></span><br><span class="line">autorender = <span class="literal">false</span></span><br><span class="line">recoverpanic = <span class="literal">false</span></span><br><span class="line">viewspath = <span class="string">&quot;myview&quot;</span></span><br><span class="line"></span><br><span class="line">[dev]</span><br><span class="line">httpport = <span class="number">8080</span></span><br><span class="line">[prod]</span><br><span class="line">httpport = <span class="number">8088</span></span><br><span class="line">[test]</span><br><span class="line">httpport = <span class="number">8888</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„é…ç½®æ–‡ä»¶å°±æ˜¯åœ¨ä¸åŒçš„ runmode ä¸‹è§£æä¸åŒçš„é…ç½®ï¼Œä¾‹å¦‚åœ¨ dev æ¨¡å¼ä¸‹ï¼Œhttpport æ˜¯ 8080ï¼Œåœ¨ prod æ¨¡å¼ä¸‹æ˜¯ 8088ï¼Œåœ¨ test æ¨¡å¼ä¸‹æ˜¯ 8888ã€‚å…¶ä»–é…ç½®æ–‡ä»¶åŒç†ã€‚è§£æçš„æ—¶å€™ä¼˜å…ˆè§£æ runmode ä¸‹çš„é…ç½®ï¼Œç„¶åè§£æé»˜è®¤çš„é…ç½®ã€‚</p>
<h3 id="å¤šä¸ªé…ç½®æ–‡ä»¶"><a href="#å¤šä¸ªé…ç½®æ–‡ä»¶" class="headerlink" title="å¤šä¸ªé…ç½®æ–‡ä»¶"></a>å¤šä¸ªé…ç½®æ–‡ä»¶</h3><p>INI æ ¼å¼é…ç½®æ”¯æŒ <code>include</code> æ–¹å¼ï¼Œå¼•ç”¨å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¸¤ä¸ªé…ç½®æ–‡ä»¶æ•ˆæœåŒä¸Šï¼š</p>
<p>app.conf</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">appname = beepkg</span><br><span class="line">httpaddr = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">httpport = <span class="number">9090</span></span><br><span class="line"></span><br><span class="line">include <span class="string">&quot;app2.conf&quot;</span></span><br></pre></td></tr></table></figure>

<p>app2.conf</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">runmode =<span class="string">&quot;dev&quot;</span></span><br><span class="line">autorender = <span class="literal">false</span></span><br><span class="line">recoverpanic = <span class="literal">false</span></span><br><span class="line">viewspath = <span class="string">&quot;myview&quot;</span></span><br><span class="line"></span><br><span class="line">[dev]</span><br><span class="line">httpport = <span class="number">8080</span></span><br><span class="line">[prod]</span><br><span class="line">httpport = <span class="number">8088</span></span><br><span class="line">[test]</span><br><span class="line">httpport = <span class="number">8888</span></span><br></pre></td></tr></table></figure>

<p>å…³äºç³»ç»Ÿçš„é»˜è®¤å‚æ•°ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://git-books.github.io/books/beego/?p=mvc/controller/config.md">https://git-books.github.io/books/beego/?p=mvc/controller/config.md</a></p>
<h2 id="è·¯ç”±è®¾ç½®-1"><a href="#è·¯ç”±è®¾ç½®-1" class="headerlink" title="è·¯ç”±è®¾ç½®"></a>è·¯ç”±è®¾ç½®</h2><h3 id="åŸºç¡€è·¯ç”±"><a href="#åŸºç¡€è·¯ç”±" class="headerlink" title="åŸºç¡€è·¯ç”±"></a>åŸºç¡€è·¯ç”±</h3><p>ä» beego 1.2 ç‰ˆæœ¬å¼€å§‹æ”¯æŒäº†åŸºæœ¬çš„ RESTful å‡½æ•°å¼è·¯ç”±,åº”ç”¨ä¸­çš„å¤§å¤šæ•°è·¯ç”±éƒ½ä¼šå®šä¹‰åœ¨ <code>routers/router.go</code> æ–‡ä»¶ä¸­ã€‚æœ€ç®€å•çš„ beego è·¯ç”±ç”± URI å’Œé—­åŒ…å‡½æ•°ç»„æˆã€‚</p>
<h4 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Get(<span class="string">&quot;/&quot;</span>,<span class="function"><span class="keyword">func</span><span class="params">(ctx *context.Context)</span></span>&#123;</span><br><span class="line">     ctx.Output.Body([]<span class="type">byte</span>(<span class="string">&quot;hello world&quot;</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Post(<span class="string">&quot;/alice&quot;</span>,<span class="function"><span class="keyword">func</span><span class="params">(ctx *context.Context)</span></span>&#123;</span><br><span class="line">     ctx.Output.Body([]<span class="type">byte</span>(<span class="string">&quot;bob&quot;</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="å“åº”ä»»ä½•-HTTP-çš„è·¯ç”±"><a href="#å“åº”ä»»ä½•-HTTP-çš„è·¯ç”±" class="headerlink" title="å“åº”ä»»ä½• HTTP çš„è·¯ç”±"></a>å“åº”ä»»ä½• HTTP çš„è·¯ç”±</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Any(<span class="string">&quot;/foo&quot;</span>,<span class="function"><span class="keyword">func</span><span class="params">(ctx *context.Context)</span></span>&#123;</span><br><span class="line">     ctx.Output.Body([]<span class="type">byte</span>(<span class="string">&quot;bar&quot;</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="æ”¯æŒçš„åŸºç¡€å‡½æ•°"><a href="#æ”¯æŒçš„åŸºç¡€å‡½æ•°" class="headerlink" title="æ”¯æŒçš„åŸºç¡€å‡½æ•°"></a>æ”¯æŒçš„åŸºç¡€å‡½æ•°</h4><ul>
<li>web.Get(router, web.HandleFunc)</li>
<li>web.Post(router, web.HandleFunc)</li>
<li>web.Put(router, web.HandleFunc)</li>
<li>web.Patch(router, web.HandleFunc)</li>
<li>web.Head(router, web.HandleFunc)</li>
<li>web.Options(router, web.HandleFunc)</li>
<li>web.Delete(router, web.HandleFunc)</li>
<li>web.Any(router, web.HandleFunc)</li>
</ul>
<h3 id="å›ºå®šè·¯ç”±"><a href="#å›ºå®šè·¯ç”±" class="headerlink" title="å›ºå®šè·¯ç”±"></a>å›ºå®šè·¯ç”±</h3><p>å›ºå®šè·¯ç”±ä¹Ÿå°±æ˜¯å…¨åŒ¹é…çš„è·¯ç”±ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/&quot;</span>, &amp;controllers.MainController&#123;&#125;)</span><br><span class="line">web.Router(<span class="string">&quot;/admin&quot;</span>, &amp;admin.UserController&#123;&#125;)</span><br><span class="line">web.Router(<span class="string">&quot;/admin/index&quot;</span>, &amp;admin.ArticleController&#123;&#125;)</span><br><span class="line">web.Router(<span class="string">&quot;/admin/addpkg&quot;</span>, &amp;admin.AddController&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šæ‰€ç¤ºçš„è·¯ç”±å°±æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„è·¯ç”±æ–¹å¼ï¼Œä¸€ä¸ªå›ºå®šçš„è·¯ç”±ï¼Œä¸€ä¸ªæ§åˆ¶å™¨ï¼Œç„¶åæ ¹æ®ç”¨æˆ·è¯·æ±‚æ–¹æ³•ä¸åŒè¯·æ±‚æ§åˆ¶å™¨ä¸­å¯¹åº”çš„æ–¹æ³•ï¼Œå…¸å‹çš„ RESTful æ–¹å¼ã€‚</p>
<h3 id="æ­£åˆ™è·¯ç”±"><a href="#æ­£åˆ™è·¯ç”±" class="headerlink" title="æ­£åˆ™è·¯ç”±"></a>æ­£åˆ™è·¯ç”±</h3><p>ä¸ºäº†ç”¨æˆ·æ›´åŠ æ–¹ä¾¿çš„è·¯ç”±è®¾ç½®ï¼Œbeego å‚è€ƒäº† sinatra çš„è·¯ç”±å®ç°ï¼Œæ”¯æŒå¤šç§æ–¹å¼çš„è·¯ç”±ï¼š</p>
<ul>
<li><p>web.Router(â€œ&#x2F;api&#x2F;?:idâ€, &amp;controllers.RController{})</p>
<p>é»˜è®¤åŒ¹é… &#x2F;&#x2F;ä¾‹å¦‚å¯¹äºURLâ€&#x2F;api&#x2F;123â€å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæ­¤æ—¶å˜é‡â€:idâ€å€¼ä¸ºâ€123â€ï¼ŒURLâ€&#x2F;api&#x2F;â€œå¯æ­£å¸¸åŒ¹é…</p>
</li>
<li><p>web.Router(â€œ&#x2F;api&#x2F;:idâ€, &amp;controllers.RController{})</p>
<p>é»˜è®¤åŒ¹é… &#x2F;&#x2F;ä¾‹å¦‚å¯¹äºURLâ€&#x2F;api&#x2F;123â€å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæ­¤æ—¶å˜é‡â€:idâ€å€¼ä¸ºâ€123â€ï¼Œä½†URLâ€&#x2F;api&#x2F;â€œåŒ¹é…å¤±è´¥</p>
</li>
<li><p>web.Router(â€œ&#x2F;api&#x2F;:id([0-9]+)â€, &amp;controllers.RController{})</p>
<p>è‡ªå®šä¹‰æ­£åˆ™åŒ¹é… &#x2F;&#x2F;ä¾‹å¦‚å¯¹äºURLâ€&#x2F;api&#x2F;123â€å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæ­¤æ—¶å˜é‡â€:idâ€å€¼ä¸ºâ€123â€</p>
</li>
<li><p>web.Router(â€œ&#x2F;user&#x2F;:username([\w]+)â€, &amp;controllers.RController{})</p>
<p>æ­£åˆ™å­—ç¬¦ä¸²åŒ¹é… &#x2F;&#x2F;ä¾‹å¦‚å¯¹äºURLâ€&#x2F;user&#x2F;astaxieâ€å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæ­¤æ—¶å˜é‡â€:usernameâ€å€¼ä¸ºâ€astaxieâ€</p>
</li>
<li><p>web.Router(â€œ&#x2F;download&#x2F;<em>.</em>â€œ, &amp;controllers.RController{})</p>
<p>*åŒ¹é…æ–¹å¼ &#x2F;&#x2F;ä¾‹å¦‚å¯¹äºURLâ€&#x2F;download&#x2F;file&#x2F;api.xmlâ€å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæ­¤æ—¶å˜é‡â€:pathâ€å€¼ä¸ºâ€file&#x2F;apiâ€ï¼Œ â€œ:extâ€å€¼ä¸ºâ€xmlâ€</p>
</li>
<li><p>web.Router(â€œ&#x2F;download&#x2F;ceshi&#x2F;*â€, &amp;controllers.RController{})</p>
<p>*å…¨åŒ¹é…æ–¹å¼ &#x2F;&#x2F;ä¾‹å¦‚å¯¹äºURLâ€&#x2F;download&#x2F;ceshi&#x2F;file&#x2F;api.jsonâ€å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæ­¤æ—¶å˜é‡â€:splatâ€å€¼ä¸ºâ€file&#x2F;api.jsonâ€</p>
</li>
<li><p>web.Router(â€œ&#x2F;:id:intâ€, &amp;controllers.RController{})</p>
<p>int ç±»å‹è®¾ç½®æ–¹å¼ï¼ŒåŒ¹é… :idä¸ºint ç±»å‹ï¼Œæ¡†æ¶å¸®ä½ å®ç°äº†æ­£åˆ™ ([0-9]+)</p>
</li>
<li><p>web.Router(â€œ&#x2F;:hi:stringâ€, &amp;controllers.RController{})</p>
<p>string ç±»å‹è®¾ç½®æ–¹å¼ï¼ŒåŒ¹é… :hi ä¸º string ç±»å‹ã€‚æ¡†æ¶å¸®ä½ å®ç°äº†æ­£åˆ™ ([\w]+)</p>
</li>
<li><p>web.Router(â€œ&#x2F;cms_:id([0-9]+).htmlâ€, &amp;controllers.CmsController{})</p>
<p>å¸¦æœ‰å‰ç¼€çš„è‡ªå®šä¹‰æ­£åˆ™ &#x2F;&#x2F;åŒ¹é… :id ä¸ºæ­£åˆ™ç±»å‹ã€‚åŒ¹é… cms_123.html è¿™æ ·çš„ url :id &#x3D; 123</p>
</li>
</ul>
<p>å¯ä»¥åœ¨ Controller ä¸­é€šè¿‡å¦‚ä¸‹æ–¹å¼è·å–ä¸Šé¢çš„å˜é‡ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">this.Ctx.Input.Param(<span class="string">&quot;:id&quot;</span>)</span><br><span class="line">this.Ctx.Input.Param(<span class="string">&quot;:username&quot;</span>)</span><br><span class="line">this.Ctx.Input.Param(<span class="string">&quot;:splat&quot;</span>)</span><br><span class="line">this.Ctx.Input.Param(<span class="string">&quot;:path&quot;</span>)</span><br><span class="line">this.Ctx.Input.Param(<span class="string">&quot;:ext&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰æ–¹æ³•åŠ-RESTful-è§„åˆ™"><a href="#è‡ªå®šä¹‰æ–¹æ³•åŠ-RESTful-è§„åˆ™" class="headerlink" title="è‡ªå®šä¹‰æ–¹æ³•åŠ RESTful è§„åˆ™"></a>è‡ªå®šä¹‰æ–¹æ³•åŠ RESTful è§„åˆ™</h3><p>ä¸Šé¢åˆ—ä¸¾çš„æ˜¯é»˜è®¤çš„è¯·æ±‚æ–¹æ³•åï¼ˆè¯·æ±‚çš„ method å’Œå‡½æ•°åä¸€è‡´ï¼Œä¾‹å¦‚ <code>GET</code> è¯·æ±‚æ‰§è¡Œ <code>Get</code> å‡½æ•°ï¼Œ<code>POST</code> è¯·æ±‚æ‰§è¡Œ <code>Post</code> å‡½æ•°ï¼‰ï¼Œå¦‚æœç”¨æˆ·æœŸæœ›è‡ªå®šä¹‰å‡½æ•°åï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/&quot;</span>,&amp;IndexController&#123;&#125;,<span class="string">&quot;*:Index&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯ç”¨æ¥è®¾ç½®å¯¹åº” method åˆ°å‡½æ•°åï¼Œå®šä¹‰å¦‚ä¸‹</p>
<ul>
<li><code>*</code>è¡¨ç¤ºä»»æ„çš„ method éƒ½æ‰§è¡Œè¯¥å‡½æ•°</li>
<li>ä½¿ç”¨ httpmethod:funcname æ ¼å¼æ¥å±•ç¤º</li>
<li>å¤šä¸ªä¸åŒçš„æ ¼å¼ä½¿ç”¨ <code>;</code> åˆ†å‰²</li>
<li>å¤šä¸ª method å¯¹åº”åŒä¸€ä¸ª funcnameï¼Œmethod ä¹‹é—´é€šè¿‡ <code>,</code> æ¥åˆ†å‰²</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ª RESTful çš„è®¾è®¡ç¤ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/api/food&quot;</span>,&amp;RestController&#123;&#125;,<span class="string">&quot;get:ListFood&quot;</span>)</span><br><span class="line">web.Router(<span class="string">&quot;/api/food&quot;</span>,&amp;RestController&#123;&#125;,<span class="string">&quot;post:CreateFood&quot;</span>)</span><br><span class="line">web.Router(<span class="string">&quot;/api/food&quot;</span>,&amp;RestController&#123;&#125;,<span class="string">&quot;put:UpdateFood&quot;</span>)</span><br><span class="line">web.Router(<span class="string">&quot;/api/food&quot;</span>,&amp;RestController&#123;&#125;,<span class="string">&quot;delete:DeleteFood&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯å¤šä¸ª HTTP Method æŒ‡å‘åŒä¸€ä¸ªå‡½æ•°çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/api&quot;</span>,&amp;RestController&#123;&#125;,<span class="string">&quot;get,post:ApiFunc&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯ä¸åŒçš„ method å¯¹åº”ä¸åŒçš„å‡½æ•°ï¼Œé€šè¿‡ ; è¿›è¡Œåˆ†å‰²çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/api/food&quot;</span>,&amp;RestController&#123;&#125;,<span class="string">&quot;get:ListFood;post:CreateFood;put:UpdateFood;delete:DeleteFood&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å¯ç”¨çš„ HTTP Methodï¼š</p>
<ul>
<li>*: åŒ…å«ä»¥ä¸‹æ‰€æœ‰çš„å‡½æ•°</li>
<li>get: GET è¯·æ±‚</li>
<li>post: POST è¯·æ±‚</li>
<li>put: PUT è¯·æ±‚</li>
<li>delete: DELETE è¯·æ±‚</li>
<li>patch: PATCH è¯·æ±‚</li>
<li>options: OPTIONS è¯·æ±‚</li>
<li>head: HEAD è¯·æ±‚</li>
</ul>
<p>å¦‚æœåŒæ—¶å­˜åœ¨ * å’Œå¯¹åº”çš„ HTTP Methodï¼Œé‚£ä¹ˆä¼˜å…ˆæ‰§è¡Œ HTTP Method çš„æ–¹æ³•ï¼Œä¾‹å¦‚åŒæ—¶æ³¨å†Œäº†å¦‚ä¸‹æ‰€ç¤ºçš„è·¯ç”±ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/simple&quot;</span>,&amp;SimpleController&#123;&#125;,<span class="string">&quot;*:AllFunc;post:PostFunc&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆæ‰§è¡Œ <code>POST</code> è¯·æ±‚çš„æ—¶å€™ï¼Œæ‰§è¡Œ <code>PostFunc</code> è€Œä¸æ‰§è¡Œ <code>AllFunc</code>ã€‚</p>
<blockquote>
<blockquote>
<blockquote>
<p>è‡ªå®šä¹‰å‡½æ•°çš„è·¯ç”±é»˜è®¤ä¸æ”¯æŒ RESTful çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¦‚æœä½ è®¾ç½®äº† <code>web.Router(&quot;/api&quot;,&amp;RestController&#123;&#125;,&quot;post:ApiFunc&quot;)</code> è¿™æ ·çš„è·¯ç”±ï¼Œå¦‚æœè¯·æ±‚çš„æ–¹æ³•æ˜¯ <code>POST</code>ï¼Œé‚£ä¹ˆä¸ä¼šé»˜è®¤å»æ‰§è¡Œ <code>Post</code> å‡½æ•°ã€‚</p>
</blockquote>
</blockquote>
</blockquote>
<h3 id="è‡ªåŠ¨åŒ¹é…"><a href="#è‡ªåŠ¨åŒ¹é…" class="headerlink" title="è‡ªåŠ¨åŒ¹é…"></a>è‡ªåŠ¨åŒ¹é…</h3><p>ç”¨æˆ·é¦–å…ˆéœ€è¦æŠŠéœ€è¦è·¯ç”±çš„æ§åˆ¶å™¨æ³¨å†Œåˆ°è‡ªåŠ¨è·¯ç”±ä¸­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.AutoRouter(&amp;controllers.ObjectController&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆ beego å°±ä¼šé€šè¿‡åå°„è·å–è¯¥ç»“æ„ä½“ä¸­æ‰€æœ‰çš„å®ç°æ–¹æ³•ï¼Œä½ å°±å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è®¿é—®åˆ°å¯¹åº”çš„æ–¹æ³•ä¸­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">/object/login   è°ƒç”¨ ObjectController ä¸­çš„ Login æ–¹æ³•</span><br><span class="line">/object/logout  è°ƒç”¨ ObjectController ä¸­çš„ Logout æ–¹æ³•</span><br></pre></td></tr></table></figure>

<p>é™¤äº†å‰ç¼€ä¸¤ä¸ª <code>/:controller/:method</code> çš„åŒ¹é…ä¹‹å¤–ï¼Œå‰©ä¸‹çš„ url beego ä¼šå¸®ä½ è‡ªåŠ¨åŒ–è§£æä¸ºå‚æ•°ï¼Œä¿å­˜åœ¨ <code>this.Ctx.Input.Params</code> å½“ä¸­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">/object/blog/<span class="number">2013</span>/<span class="number">09</span>/<span class="number">12</span>  è°ƒç”¨ ObjectController ä¸­çš„ Blog æ–¹æ³•ï¼Œå‚æ•°å¦‚ä¸‹ï¼š<span class="keyword">map</span>[<span class="number">0</span>:<span class="number">2013</span> <span class="number">1</span>:<span class="number">09</span> <span class="number">2</span>:<span class="number">12</span>]</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•ååœ¨å†…éƒ¨æ˜¯ä¿å­˜äº†ç”¨æˆ·è®¾ç½®çš„ï¼Œä¾‹å¦‚ Loginï¼Œurl åŒ¹é…çš„æ—¶å€™éƒ½ä¼šè½¬åŒ–ä¸ºå°å†™ï¼Œæ‰€ä»¥ï¼Œ<code>/object/LOGIN</code> è¿™æ ·çš„ <code>url</code> ä¹Ÿä¸€æ ·å¯ä»¥è·¯ç”±åˆ°ç”¨æˆ·å®šä¹‰çš„ <code>Login</code> æ–¹æ³•ä¸­ã€‚</p>
<p>ç°åœ¨å·²ç»å¯ä»¥é€šè¿‡è‡ªåŠ¨è¯†åˆ«å‡ºæ¥ä¸‹é¢ç±»ä¼¼çš„æ‰€æœ‰ urlï¼Œéƒ½ä¼šæŠŠè¯·æ±‚åˆ†å‘åˆ° <code>controller</code> çš„ <code>simple</code> æ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">/controller/simple</span><br><span class="line">/controller/simple.html</span><br><span class="line">/controller/simple.json</span><br><span class="line">/controller/simple.xml</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥é€šè¿‡ <code>this.Ctx.Input.Param(&quot;:ext&quot;)</code> è·å–åç¼€åã€‚</p>
<h3 id="æ³¨è§£è·¯ç”±"><a href="#æ³¨è§£è·¯ç”±" class="headerlink" title="æ³¨è§£è·¯ç”±"></a>æ³¨è§£è·¯ç”±</h3><p>ä»2.0å¼€å§‹ï¼Œæˆ‘ä»¬ä½¿ç”¨é…ç½®<code>CommentRouterPath</code>æ¥é…ç½®æ³¨è§£è·¯ç”±çš„æ‰«æè·¯å¾„ã€‚åœ¨<code>dev</code>ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å°†è‡ªåŠ¨æ‰«æè¯¥é…ç½®æŒ‡å‘çš„ç›®å½•åŠå…¶å­ç›®å½•ï¼Œç”Ÿæˆè·¯ç”±æ–‡ä»¶ã€‚</p>
<p>ç”Ÿæˆä¹‹åï¼Œç”¨æˆ·éœ€è¦æ˜¾ç¤º Include ç›¸åº”çš„ controllerã€‚æ³¨æ„ï¼Œ controller çš„ method æ–¹æ³•ä¸Šé¢é¡»æœ‰ router æ³¨é‡Šï¼ˆ&#x2F;&#x2F; @routerï¼‰ï¼Œè¯¦ç»†çš„ä½¿ç”¨è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// CMS API</span></span><br><span class="line"><span class="keyword">type</span> CMSController <span class="keyword">struct</span> &#123;</span><br><span class="line">	web.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *CMSController)</span></span> URLMapping() &#123;</span><br><span class="line">	c.Mapping(<span class="string">&quot;StaticBlock&quot;</span>, c.StaticBlock)</span><br><span class="line">	c.Mapping(<span class="string">&quot;AllBlock&quot;</span>, c.AllBlock)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// @router /staticblock/:key [get]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *CMSController)</span></span> StaticBlock() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @router /all/:key [get]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *CMSController)</span></span> AllBlock() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥åœ¨ <code>router.go</code> ä¸­é€šè¿‡å¦‚ä¸‹æ–¹å¼æ³¨å†Œè·¯ç”±ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Include(&amp;CMSController&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>web è‡ªåŠ¨ä¼šè¿›è¡Œæºç åˆ†æï¼Œæ³¨æ„åªä¼šåœ¨ dev æ¨¡å¼ä¸‹è¿›è¡Œç”Ÿæˆï¼Œç”Ÿæˆçš„è·¯ç”±æ”¾åœ¨ â€œ&#x2F;routers&#x2F;commentsRouter.goâ€ æ–‡ä»¶ä¸­ã€‚</p>
<p>è¿™æ ·ä¸Šé¢çš„è·¯ç”±å°±æ”¯æŒäº†å¦‚ä¸‹çš„è·¯ç”±ï¼š</p>
<ul>
<li>GET &#x2F;staticblock&#x2F;:key</li>
<li>GET &#x2F;all&#x2F;:key</li>
</ul>
<p>å…¶å®æ•ˆæœå’Œè‡ªå·±é€šè¿‡ Router å‡½æ•°æ³¨å†Œæ˜¯ä¸€æ ·çš„ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/staticblock/:key&quot;</span>, &amp;CMSController&#123;&#125;, <span class="string">&quot;get:StaticBlock&quot;</span>)</span><br><span class="line">web.Router(<span class="string">&quot;/all/:key&quot;</span>, &amp;CMSController&#123;&#125;, <span class="string">&quot;get:AllBlock&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>åŒæ—¶å¤§å®¶æ³¨æ„åˆ°æ–°ç‰ˆæœ¬é‡Œé¢å¢åŠ äº† URLMapping è¿™ä¸ªå‡½æ•°ï¼Œè¿™æ˜¯æ–°å¢åŠ çš„å‡½æ•°ï¼Œç”¨æˆ·å¦‚æœæ²¡æœ‰è¿›è¡Œæ³¨å†Œï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡åå°„æ¥æ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼Œå¦‚æœæ³¨å†Œäº†å°±ä¼šé€šè¿‡ interface æ¥è¿›è¡Œæ‰§è¡Œå‡½æ•°ï¼Œæ€§èƒ½ä¸Šé¢ä¼šæå‡å¾ˆå¤šã€‚</p>
<h3 id="æ–¹æ³•è¡¨è¾¾å¼è·¯ç”±"><a href="#æ–¹æ³•è¡¨è¾¾å¼è·¯ç”±" class="headerlink" title="æ–¹æ³•è¡¨è¾¾å¼è·¯ç”±"></a>æ–¹æ³•è¡¨è¾¾å¼è·¯ç”±</h3><p>æ–¹æ³•è¡¨è¾¾å¼è·¯ç”±ä¸ä¸Šé¢çš„RESTfulåŸºæœ¬ç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯æ— éœ€åœ¨ä¼ å…¥http methodå’Œcontrolleræ–¹æ³•ï¼ˆå¦‚ï¼š<code>&quot;get:StaticBlock&quot;</code>ï¼‰ã€‚<br>åªéœ€è¦é€šè¿‡golangçš„method expressionè¿›è¡Œä¼ å…¥æ–¹æ³•è¡¨è¾¾å¼ã€‚å¦‚æœæ–¹æ³•æ˜¯receiveræ˜¯éæŒ‡é’ˆï¼Œåˆ™ç›´æ¥ä½¿ç”¨ <code>åŒ…å.Controller.Method</code> æ–¹æ³• ä¼ å…¥ï¼Œ<br>å¦‚æœreceiveræ˜¯æŒ‡é’ˆï¼Œåˆ™ä½¿ç”¨ <code>(*åŒ…å.Controller).Method</code> è¿›è¡Œä¼ å‚ã€‚å‡å¦‚åœ¨åŒåŒ…ä¸‹ï¼ŒåŒ…åå¯è¿›è¡Œçœç•¥ã€‚</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> BaseController <span class="keyword">struct</span> &#123;</span><br><span class="line">	web.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b BaseController)</span></span> Ping() &#123;</span><br><span class="line">	b.Data[<span class="string">&quot;json&quot;</span>] = <span class="string">&quot;pong&quot;</span></span><br><span class="line">	b.ServeJSON()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *BaseController)</span></span> PingPointer() &#123;</span><br><span class="line">	b.Data[<span class="string">&quot;json&quot;</span>] = <span class="string">&quot;pong_pointer&quot;</span></span><br><span class="line">	b.ServeJSON()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	web.CtrlGet(<span class="string">&quot;/ping&quot;</span>, BaseController.Ping)</span><br><span class="line">	web.CtrlGet(<span class="string">&quot;/ping_pointer&quot;</span>, (*BaseController).PingPointer)</span><br><span class="line">	web.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…±æœ‰ä»¥ä¸‹å‡ ç§å‡½æ•°ï¼š</p>
<ul>
<li>web.CtrlGet(router, pkg.controller.method)</li>
<li>web.CtrlPost(router, pkg.controller.method)</li>
<li>web.CtrlPut(router, pkg.controller.method)</li>
<li>web.CtrlPatch(router, pkg.controller.method)</li>
<li>web.CtrlHead(router, pkg.controller.method)</li>
<li>web.CtrlOptions(router, pkg.controller.method)</li>
<li>web.CtrlDelete(router, pkg.controller.method)</li>
<li>web.CtrlAny(router, pkg.controller.method)</li>
</ul>
<h2 id="æ§åˆ¶å™¨å‡½æ•°"><a href="#æ§åˆ¶å™¨å‡½æ•°" class="headerlink" title="æ§åˆ¶å™¨å‡½æ•°"></a>æ§åˆ¶å™¨å‡½æ•°</h2><h3 id="æ§åˆ¶å™¨ä»‹ç»"><a href="#æ§åˆ¶å™¨ä»‹ç»" class="headerlink" title="æ§åˆ¶å™¨ä»‹ç»"></a>æ§åˆ¶å™¨ä»‹ç»</h3><p>åŸºäº beego çš„ Controller è®¾è®¡ï¼Œåªéœ€è¦åŒ¿åç»„åˆ <code>beego.Controller</code> å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> your_package</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/beego/beego/v2/server/web&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> xxxController <span class="keyword">struct</span> &#123;</span><br><span class="line">	    web.Controller</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ§åˆ¶å™¨æ–¹æ³•"><a href="#æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="æ§åˆ¶å™¨æ–¹æ³•"></a>æ§åˆ¶å™¨æ–¹æ³•</h3><p><code>web.Controller</code> å®ç°äº†æ¥å£ <code>web.ControllerInterface</code>ï¼Œ<code>web.ControllerInterface</code> å®šä¹‰äº†å¦‚ä¸‹å‡½æ•°ï¼š</p>
<ul>
<li><p>Init(ctx *context.Context, controllerName, actionName string, app interface{})</p>
<p>è¿™ä¸ªå‡½æ•°ä¸»è¦åˆå§‹åŒ–äº† Contextã€ç›¸åº”çš„ Controller åç§°ï¼Œæ¨¡æ¿åï¼Œåˆå§‹åŒ–æ¨¡æ¿å‚æ•°çš„å®¹å™¨ Dataï¼Œapp å³ä¸ºå½“å‰æ‰§è¡Œçš„ Controller çš„ reflecttypeï¼Œè¿™ä¸ª app å¯ä»¥ç”¨æ¥æ‰§è¡Œå­ç±»çš„æ–¹æ³•ã€‚</p>
</li>
<li><p>Prepare()</p>
<p>è¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯ä¸ºäº†ç”¨æˆ·æ‰©å±•ç”¨çš„ï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨ä¸‹é¢å®šä¹‰çš„è¿™äº› Method æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œç”¨æˆ·å¯ä»¥é‡å†™è¿™ä¸ªå‡½æ•°å®ç°ç±»ä¼¼ç”¨æˆ·éªŒè¯ä¹‹ç±»ã€‚</p>
</li>
<li><p>Get()</p>
<p>å¦‚æœç”¨æˆ·è¯·æ±‚çš„ HTTP Method æ˜¯ GETï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé»˜è®¤æ˜¯ 405ï¼Œç”¨æˆ·ç»§æ‰¿çš„å­ struct ä¸­å¯ä»¥å®ç°äº†è¯¥æ–¹æ³•ä»¥å¤„ç† Get è¯·æ±‚ã€‚</p>
</li>
<li><p>Post()</p>
<p>å¦‚æœç”¨æˆ·è¯·æ±‚çš„ HTTP Method æ˜¯ POSTï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé»˜è®¤æ˜¯ 405ï¼Œç”¨æˆ·ç»§æ‰¿çš„å­ struct ä¸­å¯ä»¥å®ç°äº†è¯¥æ–¹æ³•ä»¥å¤„ç† Post è¯·æ±‚ã€‚</p>
</li>
<li><p>Delete()</p>
<p>å¦‚æœç”¨æˆ·è¯·æ±‚çš„ HTTP Method æ˜¯ DELETEï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé»˜è®¤æ˜¯ 405ï¼Œç”¨æˆ·ç»§æ‰¿çš„å­ struct ä¸­å¯ä»¥å®ç°äº†è¯¥æ–¹æ³•ä»¥å¤„ç† Delete è¯·æ±‚ã€‚</p>
</li>
<li><p>Put()</p>
<p>å¦‚æœç”¨æˆ·è¯·æ±‚çš„ HTTP Method æ˜¯ PUTï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé»˜è®¤æ˜¯ 405ï¼Œç”¨æˆ·ç»§æ‰¿çš„å­ struct ä¸­å¯ä»¥å®ç°äº†è¯¥æ–¹æ³•ä»¥å¤„ç† Put è¯·æ±‚.</p>
</li>
<li><p>Head()</p>
<p>å¦‚æœç”¨æˆ·è¯·æ±‚çš„ HTTP Method æ˜¯ HEADï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé»˜è®¤æ˜¯ 405ï¼Œç”¨æˆ·ç»§æ‰¿çš„å­ struct ä¸­å¯ä»¥å®ç°äº†è¯¥æ–¹æ³•ä»¥å¤„ç† Head è¯·æ±‚ã€‚</p>
</li>
<li><p>Patch()</p>
<p>å¦‚æœç”¨æˆ·è¯·æ±‚çš„ HTTP Method æ˜¯ PATCHï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé»˜è®¤æ˜¯ 405ï¼Œç”¨æˆ·ç»§æ‰¿çš„å­ struct ä¸­å¯ä»¥å®ç°äº†è¯¥æ–¹æ³•ä»¥å¤„ç† Patch è¯·æ±‚.</p>
</li>
<li><p>Options()</p>
<p>å¦‚æœç”¨æˆ·è¯·æ±‚çš„HTTP Methodæ˜¯OPTIONSï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé»˜è®¤æ˜¯ 405ï¼Œç”¨æˆ·ç»§æ‰¿çš„å­ struct ä¸­å¯ä»¥å®ç°äº†è¯¥æ–¹æ³•ä»¥å¤„ç† Options è¯·æ±‚ã€‚</p>
</li>
<li><p>Finish()</p>
<p>è¿™ä¸ªå‡½æ•°æ˜¯åœ¨æ‰§è¡Œå®Œç›¸åº”çš„ HTTP Method æ–¹æ³•ä¹‹åæ‰§è¡Œçš„ï¼Œé»˜è®¤æ˜¯ç©ºï¼Œç”¨æˆ·å¯ä»¥åœ¨å­ struct ä¸­é‡å†™è¿™ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œä¾‹å¦‚æ•°æ®åº“å…³é—­ï¼Œæ¸…ç†æ•°æ®ä¹‹ç±»çš„å·¥ä½œã€‚</p>
</li>
<li><p>Render() error</p>
<p>è¿™ä¸ªå‡½æ•°ä¸»è¦ç”¨æ¥å®ç°æ¸²æŸ“æ¨¡æ¿ï¼Œå¦‚æœ beego.AutoRender ä¸º true çš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œã€‚</p>
</li>
<li><p>Redirect(url string, code int)</p>
<p>é‡å®šå‘ã€‚<code>url</code>æ˜¯ç›®çš„åœ°å€ã€‚</p>
</li>
</ul>
<h3 id="å­ç±»æ‰©å±•"><a href="#å­ç±»æ‰©å±•" class="headerlink" title="å­ç±»æ‰©å±•"></a>å­ç±»æ‰©å±•</h3><p>é€šè¿‡å­ struct çš„æ–¹æ³•é‡å†™ï¼Œç”¨æˆ·å°±å¯ä»¥å®ç°è‡ªå·±çš„é€»è¾‘ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> AddController <span class="keyword">struct</span> &#123;</span><br><span class="line">    web.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *AddController)</span></span> Prepare() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *AddController)</span></span> Get() &#123;</span><br><span class="line">    this.Data[<span class="string">&quot;content&quot;</span>] = <span class="string">&quot;value&quot;</span></span><br><span class="line">    this.Layout = <span class="string">&quot;admin/layout.html&quot;</span></span><br><span class="line">    this.TplName = <span class="string">&quot;admin/add.tpl&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *AddController)</span></span> Post() &#123;</span><br><span class="line">    pkgname := this.GetString(<span class="string">&quot;pkgname&quot;</span>)</span><br><span class="line">    content := this.GetString(<span class="string">&quot;content&quot;</span>)</span><br><span class="line">    pk := models.GetCruPkg(pkgname)</span><br><span class="line">    <span class="keyword">if</span> pk.Id == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> pp models.PkgEntity</span><br><span class="line">        pp.Pid = <span class="number">0</span></span><br><span class="line">        pp.Pathname = pkgname</span><br><span class="line">        pp.Intro = pkgname</span><br><span class="line">        models.InsertPkg(pp)</span><br><span class="line">        pk = models.GetCruPkg(pkgname)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> at models.Article</span><br><span class="line">    at.Pkgid = pk.Id</span><br><span class="line">    at.Content = content</span><br><span class="line">    models.InsertArticle(at)</span><br><span class="line">    this.Ctx.Redirect(<span class="number">302</span>, <span class="string">&quot;/admin/index&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œé€šè¿‡é‡å†™æ–¹æ³•å¯ä»¥å®ç°å¯¹åº” method çš„é€»è¾‘ï¼Œå®ç° RESTFul ç»“æ„çš„é€»è¾‘å¤„ç†ã€‚</p>
<h3 id="æå‰ç»ˆæ­¢è¿è¡Œ"><a href="#æå‰ç»ˆæ­¢è¿è¡Œ" class="headerlink" title="æå‰ç»ˆæ­¢è¿è¡Œ"></a>æå‰ç»ˆæ­¢è¿è¡Œ</h3><p>æˆ‘ä»¬åº”ç”¨ä¸­ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œåœ¨ Prepare é˜¶æ®µè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœç”¨æˆ·è®¤è¯ä¸é€šè¿‡ï¼Œå°±è¾“å‡ºä¸€æ®µä¿¡æ¯ï¼Œç„¶åç›´æ¥ä¸­æ­¢è¿›ç¨‹ï¼Œä¹‹åçš„ Postã€Get ä¹‹ç±»çš„ä¸å†æ‰§è¡Œï¼Œé‚£ä¹ˆå¦‚ä½•ç»ˆæ­¢å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨ <code>StopRun</code> æ¥ç»ˆæ­¢æ‰§è¡Œé€»è¾‘ï¼Œå¯ä»¥åœ¨ä»»æ„çš„åœ°æ–¹æ‰§è¡Œã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> RController <span class="keyword">struct</span> &#123;</span><br><span class="line">    beego.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *RController)</span></span> Prepare() &#123;</span><br><span class="line">    this.Data[<span class="string">&quot;json&quot;</span>] = <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;astaxie&quot;</span>&#125;</span><br><span class="line">    this.ServeJSON()</span><br><span class="line">    this.StopRun()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<blockquote>
<p>è°ƒç”¨ StopRun ä¹‹åï¼Œå¦‚æœä½ è¿˜å®šä¹‰äº† Finish å‡½æ•°å°±ä¸ä¼šå†æ‰§è¡Œï¼Œå¦‚æœéœ€è¦é‡Šæ”¾èµ„æºï¼Œé‚£ä¹ˆè¯·è‡ªå·±åœ¨è°ƒç”¨ StopRun ä¹‹å‰æ‰‹å·¥è°ƒç”¨ Finish å‡½æ•°ã€‚</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="XSRF-è¿‡æ»¤"><a href="#XSRF-è¿‡æ»¤" class="headerlink" title="XSRF è¿‡æ»¤"></a>XSRF è¿‡æ»¤</h2><h3 id="è·¨ç«™è¯·æ±‚ä¼ªé€ "><a href="#è·¨ç«™è¯·æ±‚ä¼ªé€ " class="headerlink" title="è·¨ç«™è¯·æ±‚ä¼ªé€ "></a>è·¨ç«™è¯·æ±‚ä¼ªé€ </h3><p><a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">è·¨ç«™è¯·æ±‚ä¼ªé€ (Cross-site request forgery)</a>ï¼Œ ç®€ç§°ä¸º XSRFï¼Œæ˜¯ Web åº”ç”¨ä¸­å¸¸è§çš„ä¸€ä¸ªå®‰å…¨é—®é¢˜ã€‚å‰é¢çš„é“¾æ¥ä¹Ÿè¯¦ç»†è®²è¿°äº† XSRF æ”»å‡»çš„å®ç°æ–¹å¼ã€‚</p>
<p>å½“å‰é˜²èŒƒ XSRF çš„ä¸€ç§é€šç”¨çš„æ–¹æ³•ï¼Œæ˜¯å¯¹æ¯ä¸€ä¸ªç”¨æˆ·éƒ½è®°å½•ä¸€ä¸ªæ— æ³•é¢„çŸ¥çš„ cookie æ•°æ®ï¼Œç„¶åè¦æ±‚æ‰€æœ‰æäº¤çš„è¯·æ±‚ï¼ˆPOST&#x2F;PUT&#x2F;DELETEï¼‰ä¸­éƒ½å¿…é¡»å¸¦æœ‰è¿™ä¸ª cookie æ•°æ®ã€‚å¦‚æœæ­¤æ•°æ®ä¸åŒ¹é… ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°±å¯èƒ½æ˜¯è¢«ä¼ªé€ çš„ã€‚</p>
<p>beego æœ‰å†…å»ºçš„ XSRF çš„é˜²èŒƒæœºåˆ¶ï¼Œè¦ä½¿ç”¨æ­¤æœºåˆ¶ï¼Œä½ éœ€è¦åœ¨åº”ç”¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š <code>enablexsrf</code> è®¾å®šï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">enablexsrf = <span class="literal">true</span></span><br><span class="line">xsrfkey = <span class="number">61</span>oETzKXQAGaYdkL5gEmGeJJFuYh7EQnp2XdTP1o</span><br><span class="line">xsrfexpire = <span class="number">3600</span></span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ç›´æ¥åœ¨ main å…¥å£å¤„è¿™æ ·è®¾ç½®ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.EnableXSRF = <span class="literal">true</span></span><br><span class="line">web.XSRFKEY = <span class="string">&quot;61oETzKXQAGaYdkL5gEmGeJJFuYh7EQnp2XdTP1o&quot;</span></span><br><span class="line">web.XSRFExpire = <span class="number">3600</span>  <span class="comment">//è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤1å°æ—¶</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœå¼€å¯äº† XSRFï¼Œé‚£ä¹ˆ beego çš„ Web åº”ç”¨å°†å¯¹æ‰€æœ‰ç”¨æˆ·è®¾ç½®ä¸€ä¸ª <code>_xsrf</code> çš„ cookie å€¼ï¼ˆé»˜è®¤è¿‡æœŸ 1 å°æ—¶ï¼‰ï¼Œå¦‚æœ <code>POST PUT DELET</code> è¯·æ±‚ä¸­æ²¡æœ‰è¿™ä¸ª cookie å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚ä¼šè¢«ç›´æ¥æ‹’ç»ã€‚å¦‚æœä½ å¼€å¯äº†è¿™ä¸ªæœºåˆ¶ï¼Œé‚£ä¹ˆåœ¨æ‰€æœ‰è¢«æäº¤çš„è¡¨å•ä¸­ï¼Œä½ éƒ½éœ€è¦åŠ ä¸Šä¸€ä¸ªåŸŸæ¥æä¾›è¿™ä¸ªå€¼ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ ä¸“é—¨çš„å‡½æ•° <code>XSRFFormHTML()</code> æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p>
<p>è¿‡æœŸæ—¶é—´ä¸Šé¢æˆ‘ä»¬è®¾ç½®äº†å…¨å±€çš„è¿‡æœŸæ—¶é—´ <code>web.XSRFExpire</code>ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­ä¿®æ”¹è¿™ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¸“é—¨é’ˆå¯¹æŸä¸€ç±»å¤„ç†é€»è¾‘ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *HomeController)</span></span> Get()&#123;</span><br><span class="line">	this.XSRFExpire = <span class="number">7200</span></span><br><span class="line">	this.Data[<span class="string">&quot;xsrfdata&quot;</span>]=template.HTML(this.XSRFFormHTML())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ”¯æŒcontroller-çº§åˆ«çš„å±è”½"><a href="#æ”¯æŒcontroller-çº§åˆ«çš„å±è”½" class="headerlink" title="æ”¯æŒcontroller çº§åˆ«çš„å±è”½"></a>æ”¯æŒcontroller çº§åˆ«çš„å±è”½</h3><p>XSRF ä¹‹å‰æ˜¯å…¨å±€è®¾ç½®çš„ä¸€ä¸ªå‚æ•°,å¦‚æœè®¾ç½®äº†é‚£ä¹ˆæ‰€æœ‰çš„ API è¯·æ±‚éƒ½ä¼šè¿›è¡ŒéªŒè¯,ä½†æ˜¯æœ‰äº›æ—¶å€™API é€»è¾‘æ˜¯ä¸éœ€è¦è¿›è¡ŒéªŒè¯çš„,å› æ­¤ç°åœ¨æ”¯æŒåœ¨controller çº§åˆ«è®¾ç½®å±è”½:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> AdminController <span class="keyword">struct</span>&#123;</span><br><span class="line">	web.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *AdminController)</span></span> Prepare() &#123;</span><br><span class="line">	a.EnableXSRF = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è¯·æ±‚æ•°æ®å¤„ç†"><a href="#è¯·æ±‚æ•°æ®å¤„ç†" class="headerlink" title="è¯·æ±‚æ•°æ®å¤„ç†"></a>è¯·æ±‚æ•°æ®å¤„ç†</h2><h3 id="è·å–å‚æ•°"><a href="#è·å–å‚æ•°" class="headerlink" title="è·å–å‚æ•°"></a>è·å–å‚æ•°</h3><p>æˆ‘ä»¬ç»å¸¸éœ€è¦è·å–ç”¨æˆ·ä¼ é€’çš„æ•°æ®ï¼ŒåŒ…æ‹¬ Getã€POST ç­‰æ–¹å¼çš„è¯·æ±‚ï¼Œbeego é‡Œé¢ä¼šè‡ªåŠ¨è§£æè¿™äº›æ•°æ®ï¼Œä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è·å–æ•°æ®ï¼š</p>
<ul>
<li>GetString(key string) string</li>
<li>GetStrings(key string) []string</li>
<li>GetInt(key string) (int64, error)</li>
<li>GetBool(key string) (bool, error)</li>
<li>GetFloat(key string) (float64, error)</li>
</ul>
<p>ä½¿ç”¨ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MainController)</span></span> Post() &#123;</span><br><span class="line">	jsoninfo := this.GetString(<span class="string">&quot;jsoninfo&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> jsoninfo == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		this.Ctx.WriteString(<span class="string">&quot;jsoninfo is empty&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ éœ€è¦çš„æ•°æ®å¯èƒ½æ˜¯å…¶ä»–ç±»å‹çš„ï¼Œä¾‹å¦‚æ˜¯ int ç±»å‹è€Œä¸æ˜¯ int64ï¼Œé‚£ä¹ˆä½ éœ€è¦è¿™æ ·å¤„ç†ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MainController)</span></span> Post() &#123;</span><br><span class="line">	id := this.Input().Get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">	intid, err := strconv.Atoi(id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šå…¶ä»–çš„ request çš„ä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ <code>this.Ctx.Request</code> è·å–ä¿¡æ¯ã€‚</p>
<h3 id="ç›´æ¥è§£æåˆ°-struct"><a href="#ç›´æ¥è§£æåˆ°-struct" class="headerlink" title="ç›´æ¥è§£æåˆ° struct"></a>ç›´æ¥è§£æåˆ° struct</h3><p>å¦‚æœè¦æŠŠè¡¨å•é‡Œçš„å†…å®¹èµ‹å€¼åˆ°ä¸€ä¸ª struct é‡Œï¼Œé™¤äº†ç”¨ä¸Šé¢çš„æ–¹æ³•ä¸€ä¸ªä¸€ä¸ªè·å–å†èµ‹å€¼å¤–ï¼Œbeego æä¾›äº†é€šè¿‡å¦å¤–ä¸€ä¸ªæ›´ä¾¿æ·çš„æ–¹å¼ï¼Œå°±æ˜¯é€šè¿‡ struct çš„å­—æ®µåæˆ– tag ä¸è¡¨å•å­—æ®µå¯¹åº”ç›´æ¥è§£æåˆ° structã€‚</p>
<p>å®šä¹‰ structï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id    <span class="type">int</span>         <span class="string">`form:&quot;-&quot;`</span></span><br><span class="line">	Name  <span class="keyword">interface</span>&#123;&#125; <span class="string">`form:&quot;username&quot;`</span></span><br><span class="line">	Age   <span class="type">int</span>         <span class="string">`form:&quot;age&quot;`</span></span><br><span class="line">	Email <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¡¨å•ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">	åå­—ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">	å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">	é‚®ç®±ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;Email&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Controller é‡Œè§£æï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MainController)</span></span> Post() &#123;</span><br><span class="line">	u := user&#123;&#125;</span><br><span class="line">	<span class="keyword">if</span> err := this.ParseForm(&amp;u); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//handle error</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>StructTag form çš„å®šä¹‰å’Œ <a href="https://git-books.github.io/books/beego/view/view.md">renderformæ–¹æ³•</a> å…±ç”¨ä¸€ä¸ªæ ‡ç­¾</li>
<li>å®šä¹‰ struct æ—¶ï¼Œå­—æ®µååå¦‚æœæœ‰ form è¿™ä¸ª tagï¼Œåˆ™ä¼šä»¥æŠŠ form è¡¨å•é‡Œçš„ name å’Œ tag çš„åç§°ä¸€æ ·çš„å­—æ®µèµ‹å€¼ç»™è¿™ä¸ªå­—æ®µï¼Œå¦åˆ™å°±ä¼šæŠŠ form è¡¨å•é‡Œä¸å­—æ®µåä¸€æ ·çš„è¡¨å•å†…å®¹èµ‹å€¼ç»™è¿™ä¸ªå­—æ®µã€‚å¦‚ä¸Šé¢ä¾‹å­ä¸­ï¼Œä¼šæŠŠè¡¨å•ä¸­çš„ username å’Œ age åˆ†åˆ«èµ‹å€¼ç»™ user é‡Œçš„ Name å’Œ Age å­—æ®µï¼Œè€Œ Email é‡Œçš„å†…å®¹åˆ™ä¼šèµ‹ç»™ Email è¿™ä¸ªå­—æ®µã€‚</li>
<li>è°ƒç”¨ Controller ParseForm è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¼ å…¥çš„å‚æ•°å¿…é¡»ä¸ºä¸€ä¸ª struct çš„æŒ‡é’ˆï¼Œå¦åˆ™å¯¹ struct çš„èµ‹å€¼ä¸ä¼šæˆåŠŸå¹¶è¿”å› <code>xx must be a struct pointer</code> çš„é”™è¯¯ã€‚</li>
<li>å¦‚æœè¦å¿½ç•¥ä¸€ä¸ªå­—æ®µï¼Œæœ‰ä¸¤ç§åŠæ³•ï¼Œä¸€æ˜¯ï¼šå­—æ®µåå°å†™å¼€å¤´ï¼ŒäºŒæ˜¯ï¼š<code>form</code> æ ‡ç­¾çš„å€¼è®¾ç½®ä¸º <code>-</code></li>
</ul>
<h3 id="è·å–-Request-Body-é‡Œçš„å†…å®¹"><a href="#è·å–-Request-Body-é‡Œçš„å†…å®¹" class="headerlink" title="è·å– Request Body é‡Œçš„å†…å®¹"></a>è·å– Request Body é‡Œçš„å†…å®¹</h3><p>åœ¨ API çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ° <code>JSON</code> æˆ– <code>XML</code> æ¥ä½œä¸ºæ•°æ®äº¤äº’çš„æ ¼å¼ï¼Œå¦‚ä½•åœ¨ beego ä¸­è·å– Request Body é‡Œçš„ JSON æˆ– XML çš„æ•°æ®å‘¢ï¼Ÿ</p>
<ol>
<li>åœ¨é…ç½®æ–‡ä»¶é‡Œè®¾ç½® <code>copyrequestbody = true</code></li>
<li>åœ¨ Controller ä¸­</li>
</ol>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *ObjectController)</span></span> Post() &#123;</span><br><span class="line">	<span class="keyword">var</span> ob models.Object</span><br><span class="line">	<span class="keyword">var</span> err <span class="type">error</span></span><br><span class="line">	<span class="keyword">if</span> err = json.Unmarshal(this.Ctx.Input.RequestBody, &amp;ob); err == <span class="literal">nil</span> &#123;</span><br><span class="line">	    objectid := models.AddOne(ob)</span><br><span class="line">	    this.Data[<span class="string">&quot;json&quot;</span>] = <span class="string">&quot;&#123;\&quot;ObjectId\&quot;:\&quot;&quot;</span> + objectid + <span class="string">&quot;\&quot;&#125;&quot;</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	    this.Data[<span class="string">&quot;json&quot;</span>] = err.Error()</span><br><span class="line">	&#125;</span><br><span class="line">	this.ServeJSON()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><p>åœ¨ beego ä¸­ä½ å¯ä»¥å¾ˆå®¹æ˜“çš„å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œå°±æ˜¯åˆ«å¿˜è®°åœ¨ä½ çš„ form è¡¨å•ä¸­å¢åŠ è¿™ä¸ªå±æ€§ <code>enctype=&quot;multipart/form-data&quot;</code>ï¼Œå¦åˆ™ä½ çš„æµè§ˆå™¨ä¸ä¼šä¼ è¾“ä½ çš„ä¸Šä¼ æ–‡ä»¶ã€‚</p>
<p>æ–‡ä»¶ä¸Šä¼ ä¹‹åä¸€èˆ¬æ˜¯æ”¾åœ¨ç³»ç»Ÿçš„å†…å­˜é‡Œé¢ï¼Œå¦‚æœæ–‡ä»¶çš„ size å¤§äºè®¾ç½®çš„ç¼“å­˜å†…å­˜å¤§å°ï¼Œé‚£ä¹ˆå°±æ”¾åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œé»˜è®¤çš„ç¼“å­˜å†…å­˜æ˜¯ 64Mï¼Œä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹æ¥è°ƒæ•´è¿™ä¸ªç¼“å­˜å†…å­˜å¤§å°:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.MaxMemory = <span class="number">1</span>&lt;&lt;<span class="number">22</span></span><br></pre></td></tr></table></figure>

<p>æˆ–è€…åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡å¦‚ä¸‹è®¾ç½®ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">maxmemory = <span class="number">1</span>&lt;&lt;<span class="number">22</span></span><br></pre></td></tr></table></figure>

<p>ä¸æ­¤åŒæ—¶ï¼Œbeego æä¾›äº†å¦å¤–ä¸€ä¸ªå‚æ•°ï¼Œ<code>MaxUploadSize</code>æ¥é™åˆ¶æœ€å¤§ä¸Šä¼ æ–‡ä»¶å¤§å°â€”â€”å¦‚æœä½ ä¸€æ¬¡é•¿ä¼ å¤šä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒé™åˆ¶çš„å°±æ˜¯è¿™äº›æ‰€æœ‰æ–‡ä»¶åˆå¹¶åœ¨ä¸€èµ·çš„å¤§å°ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>MaxMemory</code>åº”è¯¥è®¾ç½®å¾—æ¯”<code>MaxUploadSize</code>å°ï¼Œè¿™ç§æƒ…å†µä¸‹ä¸¤ä¸ªå‚æ•°åˆå¹¶åœ¨ä¸€èµ·çš„æ•ˆæœåˆ™æ˜¯ï¼š</p>
<ol>
<li>å¦‚æœæ–‡ä»¶å¤§å°å°äº<code>MaxMemory</code>ï¼Œåˆ™ç›´æ¥åœ¨å†…å­˜ä¸­å¤„ç†ï¼›</li>
<li>å¦‚æœæ–‡ä»¶å¤§å°ä»‹äº<code>MaxMemory</code>å’Œ<code>MaxUploadSize</code>ä¹‹é—´ï¼Œé‚£ä¹ˆæ¯”<code>MaxMemory</code>å¤§çš„éƒ¨åˆ†å°†ä¼šæ”¾åœ¨ä¸´æ—¶ç›®å½•ï¼›</li>
<li>æ–‡ä»¶å¤§å°è¶…å‡º<code>MaxUploadSize</code>ï¼Œç›´æ¥æ‹’ç»è¯·æ±‚ï¼Œè¿”å›å“åº”ç  413</li>
</ol>
<p>Beego æä¾›äº†ä¸¤ä¸ªå¾ˆæ–¹ä¾¿çš„æ–¹æ³•æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼š</p>
<ul>
<li><p>GetFile(key string) (multipart.File, *multipart.FileHeader, error)</p>
<p>è¯¥æ–¹æ³•ä¸»è¦ç”¨äºç”¨æˆ·è¯»å–è¡¨å•ä¸­çš„æ–‡ä»¶å <code>the_file</code>ï¼Œç„¶åè¿”å›ç›¸åº”çš„ä¿¡æ¯ï¼Œç”¨æˆ·æ ¹æ®è¿™äº›å˜é‡æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼šè¿‡æ»¤ã€ä¿å­˜æ–‡ä»¶ç­‰ã€‚</p>
</li>
<li><p>SaveToFile(fromfile, tofile string) error</p>
<p>è¯¥æ–¹æ³•æ˜¯åœ¨ GetFile çš„åŸºç¡€ä¸Šå®ç°äº†å¿«é€Ÿä¿å­˜çš„åŠŸèƒ½<br>fromfile æ˜¯æäº¤æ—¶å€™çš„ html è¡¨å•ä¸­çš„ name</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;uploadname&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¿å­˜çš„ä»£ç ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *FormController)</span></span> Post() &#123;</span><br><span class="line">	f, h, err := c.GetFile(<span class="string">&quot;uploadname&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">&quot;getfile err &quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> f.Close()</span><br><span class="line">	c.SaveToFile(<span class="string">&quot;uploadname&quot;</span>, <span class="string">&quot;static/upload/&quot;</span> + h.Filename) <span class="comment">// ä¿å­˜ä½ç½®åœ¨ static/upload, æ²¡æœ‰æ–‡ä»¶å¤¹è¦å…ˆåˆ›å»º</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®ç»‘å®š"><a href="#æ•°æ®ç»‘å®š" class="headerlink" title="æ•°æ®ç»‘å®š"></a>æ•°æ®ç»‘å®š</h3><p>æ”¯æŒä»ç”¨æˆ·è¯·æ±‚ä¸­ç›´æ¥æ•°æ® bind åˆ°æŒ‡å®šçš„å¯¹è±¡,ä¾‹å¦‚è¯·æ±‚åœ°å€å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">?id=<span class="number">123</span>&amp;isok=<span class="literal">true</span>&amp;ft=<span class="number">1.2</span>&amp;ol[<span class="number">0</span>]=<span class="number">1</span>&amp;ol[<span class="number">1</span>]=<span class="number">2</span>&amp;ul[]=str&amp;ul[]=array&amp;user.Name=astaxie</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> id <span class="type">int</span></span><br><span class="line">this.Ctx.Input.Bind(&amp;id, <span class="string">&quot;id&quot;</span>)  <span class="comment">//id ==123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isok <span class="type">bool</span></span><br><span class="line">this.Ctx.Input.Bind(&amp;isok, <span class="string">&quot;isok&quot;</span>)  <span class="comment">//isok ==true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ft <span class="type">float64</span></span><br><span class="line">this.Ctx.Input.Bind(&amp;ft, <span class="string">&quot;ft&quot;</span>)  <span class="comment">//ft ==1.2</span></span><br><span class="line"></span><br><span class="line">ol := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">this.Ctx.Input.Bind(&amp;ol, <span class="string">&quot;ol&quot;</span>)  <span class="comment">//ol ==[1 2]</span></span><br><span class="line"></span><br><span class="line">ul := <span class="built_in">make</span>([]<span class="type">string</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">this.Ctx.Input.Bind(&amp;ul, <span class="string">&quot;ul&quot;</span>)  <span class="comment">//ul ==[str array]</span></span><br><span class="line"></span><br><span class="line">user <span class="keyword">struct</span>&#123;Name&#125;</span><br><span class="line">this.Ctx.Input.Bind(&amp;user, <span class="string">&quot;user&quot;</span>)  <span class="comment">//user ==&#123;Name:&quot;astaxie&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="session-æ§åˆ¶"><a href="#session-æ§åˆ¶" class="headerlink" title="session æ§åˆ¶"></a>session æ§åˆ¶</h2><p>beego å†…ç½®äº† session æ¨¡å—ï¼Œä½¿ç”¨ session ç›¸å½“æ–¹ä¾¿ï¼Œåªè¦åœ¨ main å…¥å£å‡½æ•°ä¸­è®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.BConfig.WebConfig.Session.SessionOn = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>æˆ–è€…é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">sessionon = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¿™ç§æ–¹å¼å°±å¯ä»¥å¼€å¯ sessionï¼Œå¦‚ä½•ä½¿ç”¨ sessionï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MainController)</span></span> Get() &#123;</span><br><span class="line">	v := this.GetSession(<span class="string">&quot;asta&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> v == <span class="literal">nil</span> &#123;</span><br><span class="line">		this.SetSession(<span class="string">&quot;asta&quot;</span>, <span class="type">int</span>(<span class="number">1</span>))</span><br><span class="line">		this.Data[<span class="string">&quot;num&quot;</span>] = <span class="number">0</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		this.SetSession(<span class="string">&quot;asta&quot;</span>, v.(<span class="type">int</span>)+<span class="number">1</span>)</span><br><span class="line">		this.Data[<span class="string">&quot;num&quot;</span>] = v.(<span class="type">int</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	this.TplName = <span class="string">&quot;index.tpl&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>session æœ‰å‡ ä¸ªæ–¹ä¾¿çš„æ–¹æ³•ï¼š</p>
<ul>
<li>SetSession(name string, value interface{})</li>
<li>GetSession(name string) interface{}</li>
<li>DelSession(name string)</li>
<li>SessionRegenerateID()</li>
<li>DestroySession()</li>
</ul>
<p>session æ“ä½œä¸»è¦æœ‰è®¾ç½® sessionã€è·å– sessionã€åˆ é™¤ sessionã€‚</p>
<p>å½“ç„¶ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼è‡ªå·±æ§åˆ¶è¿™äº›é€»è¾‘ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">sess:=this.StartSession()</span><br><span class="line"><span class="keyword">defer</span> sess.SessionRelease()</span><br></pre></td></tr></table></figure>

<p>sess å¯¹è±¡å…·æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li>sess.Set()</li>
<li>sess.Get()</li>
<li>sess.Delete()</li>
<li>sess.SessionID()</li>
<li>sess.Flush()</li>
</ul>
<p>ä½†æ˜¯æˆ‘è¿˜æ˜¯å»ºè®®å¤§å®¶é‡‡ç”¨ SetSessionã€GetSessionã€DelSession ä¸‰ä¸ªæ–¹æ³•æ¥æ“ä½œï¼Œé¿å…è‡ªå·±åœ¨æ“ä½œçš„è¿‡ç¨‹ä¸­èµ„æºæ²¡é‡Šæ”¾çš„é—®é¢˜ã€‚</p>
<p>å…³äº Session æ¨¡å—ä½¿ç”¨ä¸­çš„ä¸€äº›å‚æ•°è®¾ç½®ï¼š</p>
<ul>
<li><p>web.BConfig.WebConfig.Session.SessionOn</p>
<p>è®¾ç½®æ˜¯å¦å¼€å¯ Sessionï¼Œé»˜è®¤æ˜¯ falseï¼Œé…ç½®æ–‡ä»¶å¯¹åº”çš„å‚æ•°åï¼šsessiononã€‚</p>
</li>
<li><p>web.BConfig.WebConfig.Session.SessionName</p>
<p>è®¾ç½® cookies çš„åå­—ï¼ŒSession é»˜è®¤æ˜¯ä¿å­˜åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ cookies é‡Œé¢çš„ï¼Œé»˜è®¤åæ˜¯ beegosessionIDï¼Œé…ç½®æ–‡ä»¶å¯¹åº”çš„å‚æ•°åæ˜¯ï¼šsessionnameã€‚</p>
</li>
<li><p>web.BConfig.WebConfig.Session.SessionGCMaxLifetime</p>
<p>è®¾ç½® Session è¿‡æœŸçš„æ—¶é—´ï¼Œé»˜è®¤å€¼æ˜¯ 3600 ç§’ï¼Œé…ç½®æ–‡ä»¶å¯¹åº”çš„å‚æ•°ï¼šsessiongcmaxlifetimeã€‚</p>
</li>
<li><p>web.BConfig.WebConfig.Session.SessionHashFunc</p>
<p>é»˜è®¤å€¼ä¸º sha1ï¼Œé‡‡ç”¨ sha1 åŠ å¯†ç®—æ³•ç”Ÿäº§ sessionid</p>
</li>
<li><p>web.BConfig.WebConfig.Session.SessionCookieLifeTime</p>
<p>è®¾ç½® cookie çš„è¿‡æœŸæ—¶é—´ï¼Œcookie æ˜¯ç”¨æ¥å­˜å‚¨ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„æ•°æ®ã€‚</p>
</li>
</ul>
<h2 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h2><p>beego æ”¯æŒè‡ªå®šä¹‰è¿‡æ»¤ä¸­é—´ä»¶ï¼Œä¾‹å¦‚å®‰å…¨éªŒè¯ï¼Œå¼ºåˆ¶è·³è½¬ç­‰ã€‚</p>
<p>è¿‡æ»¤å™¨å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.InsertFilter(pattern <span class="type">string</span>, pos <span class="type">int</span>, filter FilterFunc, opts ...FilterOpt)</span><br></pre></td></tr></table></figure>

<p>InsertFilter å‡½æ•°çš„ä¸‰ä¸ªå¿…å¡«å‚æ•°ï¼Œä¸€ä¸ªå¯é€‰å‚æ•°</p>
<ul>
<li>pattern è·¯ç”±è§„åˆ™ï¼Œå¯ä»¥æ ¹æ®ä¸€å®šçš„è§„åˆ™è¿›è¡Œè·¯ç”±ï¼Œå¦‚æœä½ å…¨åŒ¹é…å¯ä»¥ç”¨ <code>*</code></li>
<li>position æ‰§è¡Œ Filter çš„åœ°æ–¹ï¼Œäº”ä¸ªå›ºå®šå‚æ•°å¦‚ä¸‹ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸åŒçš„æ‰§è¡Œè¿‡ç¨‹<ul>
<li>BeforeStatic é™æ€åœ°å€ä¹‹å‰<ul>
<li>BeforeRouter å¯»æ‰¾è·¯ç”±ä¹‹å‰</li>
<li>BeforeExec æ‰¾åˆ°è·¯ç”±ä¹‹åï¼Œå¼€å§‹æ‰§è¡Œç›¸åº”çš„ Controller ä¹‹å‰</li>
<li>AfterExec æ‰§è¡Œå®Œ Controller é€»è¾‘ä¹‹åæ‰§è¡Œçš„è¿‡æ»¤å™¨</li>
<li>FinishRouter æ‰§è¡Œå®Œé€»è¾‘ä¹‹åæ‰§è¡Œçš„è¿‡æ»¤å™¨</li>
</ul>
</li>
</ul>
</li>
<li>filter filter å‡½æ•° type FilterFunc func(*context.Context)</li>
<li>opts</li>
</ul>
<p>å¦‚ä¸‹ä¾‹å­æ‰€ç¤ºï¼ŒéªŒè¯ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•ï¼Œåº”ç”¨äºå…¨éƒ¨çš„è¯·æ±‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> FilterUser = <span class="function"><span class="keyword">func</span><span class="params">(ctx *context.Context)</span></span> &#123;</span><br><span class="line">    _, ok := ctx.Input.Session(<span class="string">&quot;uid&quot;</span>).(<span class="type">int</span>)</span><br><span class="line">    <span class="keyword">if</span> !ok &amp;&amp; ctx.Request.RequestURI != <span class="string">&quot;/login&quot;</span> &#123;</span><br><span class="line">        ctx.Redirect(<span class="number">302</span>, <span class="string">&quot;/login&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">web.InsertFilter(<span class="string">&quot;/*&quot;</span>, web.BeforeRouter, FilterUser)</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<blockquote>
<p>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„ä½¿ç”¨ session çš„ Filter å¿…é¡»åœ¨ BeforeStatic ä¹‹åæ‰èƒ½è·å–ï¼Œå› ä¸º session æ²¡æœ‰åœ¨è¿™ä¹‹å‰åˆå§‹åŒ–ã€‚</p>
</blockquote>
</blockquote>
</blockquote>
<p>è¿˜å¯ä»¥é€šè¿‡æ­£åˆ™è·¯ç”±è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æœåŒ¹é…å‚æ•°å°±æ‰§è¡Œï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> FilterUser = <span class="function"><span class="keyword">func</span><span class="params">(ctx *context.Context)</span></span> &#123;</span><br><span class="line">    _, ok := ctx.Input.Session(<span class="string">&quot;uid&quot;</span>).(<span class="type">int</span>)</span><br><span class="line">    <span class="keyword">if</span> !ok &#123;</span><br><span class="line">        ctx.Redirect(<span class="number">302</span>, <span class="string">&quot;/login&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">web.InsertFilter(<span class="string">&quot;/user/:id([0-9]+)&quot;</span>, web.BeforeRouter, FilterUser)</span><br></pre></td></tr></table></figure>

<h2 id="flash-æ•°æ®"><a href="#flash-æ•°æ®" class="headerlink" title="flash æ•°æ®"></a>flash æ•°æ®</h2><p>è¿™ä¸ª flash ä¸ Adobe&#x2F;Macromedia Flash æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚å®ƒä¸»è¦ç”¨äºåœ¨ä¸¤ä¸ªé€»è¾‘é—´ä¼ é€’ä¸´æ—¶æ•°æ®ï¼Œflash ä¸­å­˜æ”¾çš„æ‰€æœ‰æ•°æ®ä¼šåœ¨ç´§æ¥ç€çš„ä¸‹ä¸€ä¸ªé€»è¾‘ä¸­è°ƒç”¨åæ¸…é™¤ã€‚ä¸€èˆ¬ç”¨äºä¼ é€’æç¤ºå’Œé”™è¯¯æ¶ˆæ¯ã€‚å®ƒé€‚åˆ <a href="http://en.wikipedia.org/wiki/Post/Redirect/Get">Post&#x2F;Redirect&#x2F;Get</a> æ¨¡å¼ã€‚ä¸‹é¢çœ‹ä½¿ç”¨çš„ä¾‹å­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ˜¾ç¤ºè®¾ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *MainController)</span></span> Get() &#123;</span><br><span class="line">	flash:=web.ReadFromRequest(&amp;c.Controller)</span><br><span class="line">	<span class="keyword">if</span> n,ok:=flash.Data[<span class="string">&quot;notice&quot;</span>];ok&#123;</span><br><span class="line">		<span class="comment">// æ˜¾ç¤ºè®¾ç½®æˆåŠŸ</span></span><br><span class="line">		c.TplName = <span class="string">&quot;set_success.html&quot;</span></span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span> n,ok=flash.Data[<span class="string">&quot;error&quot;</span>];ok&#123;</span><br><span class="line">		<span class="comment">// æ˜¾ç¤ºé”™è¯¯</span></span><br><span class="line">		c.TplName = <span class="string">&quot;set_error.html&quot;</span></span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="comment">// ä¸ç„¶é»˜è®¤æ˜¾ç¤ºè®¾ç½®é¡µé¢</span></span><br><span class="line">		c.Data[<span class="string">&quot;list&quot;</span>]=GetInfo()</span><br><span class="line">		c.TplName = <span class="string">&quot;setting_list.html&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†è®¾ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *MainController)</span></span> Post() &#123;</span><br><span class="line">	flash:=web.NewFlash()</span><br><span class="line">	setting:=Settings&#123;&#125;</span><br><span class="line">	valid := Validation&#123;&#125;</span><br><span class="line">	c.ParseForm(&amp;setting)</span><br><span class="line">	<span class="keyword">if</span> b, err := valid.Valid(setting);err!=<span class="literal">nil</span> &#123;</span><br><span class="line">		flash.Error(<span class="string">&quot;Settings invalid!&quot;</span>)</span><br><span class="line">		flash.Store(&amp;c.Controller)</span><br><span class="line">		c.Redirect(<span class="string">&quot;/setting&quot;</span>,<span class="number">302</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span> b!=<span class="literal">nil</span>&#123;</span><br><span class="line">		flash.Error(<span class="string">&quot;validation err!&quot;</span>)</span><br><span class="line">		flash.Store(&amp;c.Controller)</span><br><span class="line">		c.Redirect(<span class="string">&quot;/setting&quot;</span>,<span class="number">302</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	saveSetting(setting)</span><br><span class="line">	flash.Notice(<span class="string">&quot;Settings saved!&quot;</span>)</span><br><span class="line">	flash.Store(&amp;c.Controller)</span><br><span class="line">	c.Redirect(<span class="string">&quot;/setting&quot;</span>,<span class="number">302</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç æ‰§è¡Œçš„å¤§æ¦‚é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>Get æ–¹æ³•æ‰§è¡Œï¼Œå› ä¸ºæ²¡æœ‰ flash æ•°æ®ï¼Œæ‰€ä»¥æ˜¾ç¤ºè®¾ç½®é¡µé¢ã€‚</li>
<li>ç”¨æˆ·è®¾ç½®ä¿¡æ¯ä¹‹åç‚¹å‡»é€’äº¤ï¼Œæ‰§è¡Œ Postï¼Œç„¶ååˆå§‹åŒ–ä¸€ä¸ª flashï¼Œé€šè¿‡éªŒè¯ï¼ŒéªŒè¯å‡ºé”™æˆ–è€…éªŒè¯ä¸é€šè¿‡è®¾ç½® flash çš„é”™è¯¯ï¼Œå¦‚æœé€šè¿‡äº†å°±ä¿å­˜è®¾ç½®ï¼Œç„¶åè®¾ç½® flash æˆåŠŸè®¾ç½®çš„ä¿¡æ¯ã€‚</li>
<li>è®¾ç½®å®Œæˆåè·³è½¬åˆ° Get è¯·æ±‚ã€‚</li>
<li>Get è¯·æ±‚è·å–åˆ°äº† Flash ä¿¡æ¯ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„é€»è¾‘ï¼Œå¦‚æœå‡ºé”™æ˜¾ç¤ºå‡ºé”™çš„é¡µé¢ï¼Œå¦‚æœæˆåŠŸæ˜¾ç¤ºæˆåŠŸçš„é¡µé¢ã€‚</li>
</ol>
<p>é»˜è®¤æƒ…å†µä¸‹ <code>ReadFromRequest</code> å‡½æ•°å·²ç»å®ç°äº†è¯»å–çš„æ•°æ®èµ‹å€¼ç»™ flashï¼Œæ‰€ä»¥åœ¨ä½ çš„æ¨¡æ¿é‡Œé¢ä½ å¯ä»¥è¿™æ ·è¯»å–æ•°æ®ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">&#123;&#123;.flash.<span class="type">error</span>&#125;&#125;</span><br><span class="line">&#123;&#123;.flash.warning&#125;&#125;</span><br><span class="line">&#123;&#123;.flash.notice&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>flash å¯¹è±¡æœ‰ä¸‰ä¸ªçº§åˆ«çš„è®¾ç½®ï¼š</p>
<ul>
<li>Notice æç¤ºä¿¡æ¯</li>
<li>Warning è­¦å‘Šä¿¡æ¯</li>
<li>Error é”™è¯¯ä¿¡æ¯</li>
</ul>
<h2 id="URL-æ„å»º"><a href="#URL-æ„å»º" class="headerlink" title="URL æ„å»º"></a>URL æ„å»º</h2><p>å¦‚æœå¯ä»¥åŒ¹é… URL ï¼Œé‚£ä¹ˆ beego ä¹Ÿå¯ä»¥ç”Ÿæˆ URL å—ï¼Ÿå½“ç„¶å¯ä»¥ã€‚ UrlFor() å‡½æ•°å°±æ˜¯ç”¨äºæ„å»ºæŒ‡å®šå‡½æ•°çš„ URL çš„ã€‚å®ƒæŠŠå¯¹åº”æ§åˆ¶å™¨å’Œå‡½æ•°åç»“åˆçš„å­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå…¶ä½™å‚æ•°å¯¹åº” URL ä¸­çš„å˜é‡ã€‚æœªçŸ¥å˜é‡å°†æ·»åŠ åˆ° URL ä¸­ä½œä¸ºæŸ¥è¯¢å‚æ•°ã€‚ ä¾‹å¦‚ï¼š</p>
<p>ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªç›¸åº”çš„æ§åˆ¶å™¨</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> TestController <span class="keyword">struct</span> &#123;</span><br><span class="line">	web.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *TestController)</span></span> Get() &#123;</span><br><span class="line">	this.Data[<span class="string">&quot;Username&quot;</span>] = <span class="string">&quot;astaxie&quot;</span></span><br><span class="line">	this.Ctx.Output.Body([]<span class="type">byte</span>(<span class="string">&quot;ok&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *TestController)</span></span> List() &#123;</span><br><span class="line">	this.Ctx.Output.Body([]<span class="type">byte</span>(<span class="string">&quot;i am list&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *TestController)</span></span> Params() &#123;</span><br><span class="line">	this.Ctx.Output.Body([]<span class="type">byte</span>(this.Ctx.Input.Params()[<span class="string">&quot;0&quot;</span>] + this.Ctx.Input.Params()[<span class="string">&quot;1&quot;</span>] + this.Ctx.Input.Params()[<span class="string">&quot;2&quot;</span>]))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *TestController)</span></span> Myext() &#123;</span><br><span class="line">	this.Ctx.Output.Body([]<span class="type">byte</span>(this.Ctx.Input.Param(<span class="string">&quot;:ext&quot;</span>)))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *TestController)</span></span> GetUrl() &#123;</span><br><span class="line">	this.Ctx.Output.Body([]<span class="type">byte</span>(this.UrlFor(<span class="string">&quot;.Myext&quot;</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯æˆ‘ä»¬æ³¨å†Œçš„è·¯ç”±ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.Router(<span class="string">&quot;/api/list&quot;</span>, &amp;TestController&#123;&#125;, <span class="string">&quot;*:List&quot;</span>)</span><br><span class="line">web.Router(<span class="string">&quot;/person/:last/:first&quot;</span>, &amp;TestController&#123;&#125;)</span><br><span class="line">web.AutoRouter(&amp;TestController&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆé€šè¿‡æ–¹å¼å¯ä»¥è·å–ç›¸åº”çš„URLåœ°å€ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.URLFor(<span class="string">&quot;TestController.List&quot;</span>)</span><br><span class="line"><span class="comment">// è¾“å‡º /api/list</span></span><br><span class="line"></span><br><span class="line">web.URLFor(<span class="string">&quot;TestController.Get&quot;</span>, <span class="string">&quot;:last&quot;</span>, <span class="string">&quot;xie&quot;</span>, <span class="string">&quot;:first&quot;</span>, <span class="string">&quot;asta&quot;</span>)</span><br><span class="line"><span class="comment">// è¾“å‡º /person/xie/asta</span></span><br><span class="line"></span><br><span class="line">web.URLFor(<span class="string">&quot;TestController.Myext&quot;</span>)</span><br><span class="line"><span class="comment">// è¾“å‡º /Test/Myext</span></span><br><span class="line"></span><br><span class="line">web.URLFor(<span class="string">&quot;TestController.GetUrl&quot;</span>)</span><br><span class="line"><span class="comment">// è¾“å‡º /Test/GetUrl</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡æ¿ä¸­å¦‚ä½•ä½¿ç”¨"><a href="#æ¨¡æ¿ä¸­å¦‚ä½•ä½¿ç”¨" class="headerlink" title="æ¨¡æ¿ä¸­å¦‚ä½•ä½¿ç”¨"></a>æ¨¡æ¿ä¸­å¦‚ä½•ä½¿ç”¨</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œbeego å·²ç»æ³¨å†Œäº† urlfor å‡½æ•°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„ä»£ç è¿›è¡Œè°ƒç”¨</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">&#123;&#123;urlfor <span class="string">&quot;TestController.List&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆä¸åœ¨æŠŠ URL å†™æ­»åœ¨æ¨¡æ¿ä¸­ï¼Œåè€Œè¦åŠ¨æ€æ„å»ºï¼Ÿæœ‰ä¸¤ä¸ªå¾ˆå¥½çš„ç†ç”±ï¼š</p>
<ol>
<li>åå‘è§£æé€šå¸¸æ¯”ç¡¬ç¼–ç  URL æ›´ç›´è§‚ã€‚åŒæ—¶ï¼Œæ›´é‡è¦çš„æ˜¯ä½ å¯ä»¥åªåœ¨ä¸€ä¸ªåœ°æ–¹æ”¹å˜ URL ï¼Œè€Œä¸ç”¨åˆ°å¤„ä¹±æ‰¾ã€‚</li>
<li>URL åˆ›å»ºä¼šä¸ºä½ å¤„ç†ç‰¹æ®Šå­—ç¬¦çš„è½¬ä¹‰å’Œ Unicode æ•°æ®ï¼Œä¸ç”¨ä½ æ“å¿ƒã€‚</li>
</ol>
<h2 id="å¤šç§æ ¼å¼æ•°æ®è¾“å‡º"><a href="#å¤šç§æ ¼å¼æ•°æ®è¾“å‡º" class="headerlink" title="å¤šç§æ ¼å¼æ•°æ®è¾“å‡º"></a>å¤šç§æ ¼å¼æ•°æ®è¾“å‡º</h2><p>beego å½“åˆè®¾è®¡çš„æ—¶å€™å°±è€ƒè™‘äº† API åŠŸèƒ½çš„è®¾è®¡ï¼Œè€Œæˆ‘ä»¬åœ¨è®¾è®¡ API çš„æ—¶å€™ç»å¸¸æ˜¯è¾“å‡º JSON æˆ–è€… XML æ•°æ®ï¼Œé‚£ä¹ˆ beego æä¾›äº†è¿™æ ·çš„æ–¹å¼ç›´æ¥è¾“å‡ºï¼š</p>
<p>æ³¨æ„ struct å±æ€§åº”è¯¥ ä¸º exported Identifier<br>é¦–å­—æ¯åº”è¯¥å¤§å†™</p>
<ul>
<li><p>JSON æ•°æ®ç›´æ¥è¾“å‡ºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *AddController)</span></span> Get() &#123;</span><br><span class="line">	mystruct := &#123; ... &#125;</span><br><span class="line">	this.Data[<span class="string">&quot;json&quot;</span>] = &amp;mystruct</span><br><span class="line">	this.ServeJSON()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨ ServeJSON ä¹‹åï¼Œä¼šè®¾ç½® <code>content-type</code> ä¸º <code>application/json</code>ï¼Œç„¶ååŒæ—¶æŠŠæ•°æ®è¿›è¡Œ JSON åºåˆ—åŒ–è¾“å‡ºã€‚</p>
</li>
<li><p>XML æ•°æ®ç›´æ¥è¾“å‡ºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *AddController)</span></span> Get() &#123;</span><br><span class="line">	mystruct := &#123; ... &#125;</span><br><span class="line">	this.Data[<span class="string">&quot;xml&quot;</span>]=&amp;mystruct</span><br><span class="line">	this.ServeXML()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨ ServeXML ä¹‹åï¼Œä¼šè®¾ç½® <code>content-type</code> ä¸º <code>application/xml</code>ï¼ŒåŒæ—¶æ•°æ®ä¼šè¿›è¡Œ XML åºåˆ—åŒ–è¾“å‡ºã€‚</p>
</li>
<li><p>jsonp è°ƒç”¨</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *AddController)</span></span> Get() &#123;</span><br><span class="line">	mystruct := &#123; ... &#125;</span><br><span class="line">	this.Data[<span class="string">&quot;jsonp&quot;</span>] = &amp;mystruct</span><br><span class="line">	this.ServeJSONP()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨ ServeJSONP ä¹‹åï¼Œä¼šè®¾ç½® <code>content-type</code> ä¸º <code>application/javascript</code>ï¼Œç„¶ååŒæ—¶æŠŠæ•°æ®è¿›è¡Œ JSON åºåˆ—åŒ–ï¼Œç„¶åæ ¹æ®è¯·æ±‚çš„ callback å‚æ•°è®¾ç½® jsonp è¾“å‡ºã€‚</p>
</li>
</ul>
<p>å¼€å‘æ¨¡å¼ä¸‹åºåˆ—åŒ–åè¾“å‡ºçš„æ˜¯æ ¼å¼åŒ–æ˜“é˜…è¯»çš„ JSON æˆ– XML å­—ç¬¦ä¸²ï¼›åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹åºåˆ—åŒ–åè¾“å‡ºçš„æ˜¯å‹ç¼©çš„å­—ç¬¦ä¸²ã€‚</p>
<h2 id="è¡¨å•æ•°æ®éªŒè¯"><a href="#è¡¨å•æ•°æ®éªŒè¯" class="headerlink" title="è¡¨å•æ•°æ®éªŒè¯"></a>è¡¨å•æ•°æ®éªŒè¯</h2><h3 id="å®‰è£…åŠæµ‹è¯•"><a href="#å®‰è£…åŠæµ‹è¯•" class="headerlink" title="å®‰è£…åŠæµ‹è¯•"></a>å®‰è£…åŠæµ‹è¯•</h3><p>å®‰è£…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go get github.com/beego/beego/v2/core/validation</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go test github.com/beego/beego/v2/core/validation</span><br></pre></td></tr></table></figure>

<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>ç›´æ¥ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;github.com/beego/beego/v2/core/validation&quot;</span></span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span></span><br><span class="line">    Age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    u := User&#123;<span class="string">&quot;man&quot;</span>, <span class="number">40</span>&#125;</span><br><span class="line">    valid := validation.Validation&#123;&#125;</span><br><span class="line">    valid.Required(u.Name, <span class="string">&quot;name&quot;</span>)</span><br><span class="line">    valid.MaxSize(u.Name, <span class="number">15</span>, <span class="string">&quot;nameMax&quot;</span>)</span><br><span class="line">    valid.Range(u.Age, <span class="number">0</span>, <span class="number">18</span>, <span class="string">&quot;age&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> valid.HasErrors() &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯ï¼Œè¯æ˜éªŒè¯æ²¡é€šè¿‡</span></span><br><span class="line">        <span class="comment">// æ‰“å°é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">for</span> _, err := <span class="keyword">range</span> valid.Errors &#123;</span><br><span class="line">            log.Println(err.Key, err.Message)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// or use like this</span></span><br><span class="line">    <span class="keyword">if</span> v := valid.Max(u.Age, <span class="number">140</span>, <span class="string">&quot;age&quot;</span>); !v.Ok &#123;</span><br><span class="line">        log.Println(v.Error.Key, v.Error.Message)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å®šåˆ¶é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    minAge := <span class="number">18</span></span><br><span class="line">    valid.Min(u.Age, minAge, <span class="string">&quot;age&quot;</span>).Message(<span class="string">&quot;å°‘å„¿ä¸å®œï¼&quot;</span>)</span><br><span class="line">    <span class="comment">// é”™è¯¯ä¿¡æ¯æ ¼å¼åŒ–</span></span><br><span class="line">    valid.Min(u.Age, minAge, <span class="string">&quot;age&quot;</span>).Message(<span class="string">&quot;%dä¸ç¦&quot;</span>, minAge)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ StructTag ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">    <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/beego/beego/v2/core/validation&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯å‡½æ•°å†™åœ¨ &quot;valid&quot; tag çš„æ ‡ç­¾é‡Œ</span></span><br><span class="line"><span class="comment">// å„ä¸ªå‡½æ•°ä¹‹é—´ç”¨åˆ†å· &quot;;&quot; åˆ†éš”ï¼Œåˆ†å·åé¢å¯ä»¥æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="comment">// å‚æ•°ç”¨æ‹¬å· &quot;()&quot; æ‹¬èµ·æ¥ï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ç”¨é€—å· &quot;,&quot; åˆ†å¼€ï¼Œé€—å·åé¢å¯ä»¥æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="comment">// æ­£åˆ™å‡½æ•°(Match)çš„åŒ¹é…æ¨¡å¼ç”¨ä¸¤æ–œæ  &quot;/&quot; æ‹¬èµ·æ¥</span></span><br><span class="line"><span class="comment">// å„ä¸ªå‡½æ•°çš„ç»“æœçš„ key å€¼ä¸ºå­—æ®µå.éªŒè¯å‡½æ•°å</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">    Id     <span class="type">int</span></span><br><span class="line">    Name   <span class="type">string</span> <span class="string">`valid:&quot;Required;Match(/^Bee.*/)&quot;`</span> <span class="comment">// Name ä¸èƒ½ä¸ºç©ºå¹¶ä¸”ä»¥ Bee å¼€å¤´</span></span><br><span class="line">    Age    <span class="type">int</span>    <span class="string">`valid:&quot;Range(1, 140)&quot;`</span> <span class="comment">// 1 &lt;= Age &lt;= 140ï¼Œè¶…å‡ºæ­¤èŒƒå›´å³ä¸ºä¸åˆæ³•</span></span><br><span class="line">    Email  <span class="type">string</span> <span class="string">`valid:&quot;Email; MaxSize(100)&quot;`</span> <span class="comment">// Email å­—æ®µéœ€è¦ç¬¦åˆé‚®ç®±æ ¼å¼ï¼Œå¹¶ä¸”æœ€å¤§é•¿åº¦ä¸èƒ½å¤§äº 100 ä¸ªå­—ç¬¦</span></span><br><span class="line">    Mobile <span class="type">string</span> <span class="string">`valid:&quot;Mobile&quot;`</span> <span class="comment">// Mobile å¿…é¡»ä¸ºæ­£ç¡®çš„æ‰‹æœºå·</span></span><br><span class="line">    IP     <span class="type">string</span> <span class="string">`valid:&quot;IP&quot;`</span> <span class="comment">// IP å¿…é¡»ä¸ºä¸€ä¸ªæ­£ç¡®çš„ IPv4 åœ°å€</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœä½ çš„ struct å®ç°äº†æ¥å£ validation.ValidFormer</span></span><br><span class="line"><span class="comment">// å½“ StructTag ä¸­çš„æµ‹è¯•éƒ½æˆåŠŸæ—¶ï¼Œå°†ä¼šæ‰§è¡Œ Valid å‡½æ•°è¿›è¡Œè‡ªå®šä¹‰éªŒè¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *user)</span></span> Valid(v *validation.Validation) &#123;</span><br><span class="line">    <span class="keyword">if</span> strings.Index(u.Name, <span class="string">&quot;admin&quot;</span>) != <span class="number">-1</span> &#123;</span><br><span class="line">        <span class="comment">// é€šè¿‡ SetError è®¾ç½® Name çš„é”™è¯¯ä¿¡æ¯ï¼ŒHasErrors å°†ä¼šè¿”å› true</span></span><br><span class="line">        v.SetError(<span class="string">&quot;Name&quot;</span>, <span class="string">&quot;åç§°é‡Œä¸èƒ½å«æœ‰ admin&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    valid := validation.Validation&#123;&#125;</span><br><span class="line">    u := user&#123;Name: <span class="string">&quot;Beego&quot;</span>, Age: <span class="number">2</span>, Email: <span class="string">&quot;dev@web.me&quot;</span>&#125;</span><br><span class="line">    b, err := valid.Valid(&amp;u)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="comment">// handle error</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> !b &#123;</span><br><span class="line">        <span class="comment">// validation does not pass</span></span><br><span class="line">        <span class="comment">// blabla...</span></span><br><span class="line">        <span class="keyword">for</span> _, err := <span class="keyword">range</span> valid.Errors &#123;</span><br><span class="line">            log.Println(err.Key, err.Message)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>StructTag å¯ç”¨çš„éªŒè¯å‡½æ•°ï¼š</p>
<ul>
<li><code>Required</code> ä¸ä¸ºç©ºï¼Œå³å„ä¸ªç±»å‹è¦æ±‚ä¸ä¸ºå…¶é›¶å€¼</li>
<li><code>Min(min int)</code> æœ€å°å€¼ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>int</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Max(max int)</code> æœ€å¤§å€¼ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>int</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Range(min, max int)</code> æ•°å€¼çš„èŒƒå›´ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>int</code>ï¼Œä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>MinSize(min int)</code> æœ€å°é•¿åº¦ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string slice</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>MaxSize(max int)</code> æœ€å¤§é•¿åº¦ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string slice</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Length(length int)</code> æŒ‡å®šé•¿åº¦ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string slice</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Alpha</code> alphaå­—ç¬¦ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Numeric</code> æ•°å­—ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>AlphaNumeric</code> alpha å­—ç¬¦æˆ–æ•°å­—ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Match(pattern string)</code> æ­£åˆ™åŒ¹é…ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†è¢«è½¬æˆå­—ç¬¦ä¸²å†åŒ¹é…(fmt.Sprintf(â€œ%vâ€, obj).Match)</li>
<li><code>AlphaDash</code> alpha å­—ç¬¦æˆ–æ•°å­—æˆ–æ¨ªæ  <code>-_</code>ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Email</code> é‚®ç®±æ ¼å¼ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>IP</code> IP æ ¼å¼ï¼Œç›®å‰åªæ”¯æŒ IPv4 æ ¼å¼éªŒè¯ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Base64</code> base64 ç¼–ç ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Mobile</code> æ‰‹æœºå·ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Tel</code> å›ºå®šç”µè¯å·ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>Phone</code> æ‰‹æœºå·æˆ–å›ºå®šç”µè¯å·ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
<li><code>ZipCode</code> é‚®æ”¿ç¼–ç ï¼Œæœ‰æ•ˆç±»å‹ï¼š<code>string</code>ï¼Œå…¶ä»–ç±»å‹éƒ½å°†ä¸èƒ½é€šè¿‡éªŒè¯</li>
</ul>
<h3 id="è‡ªå®šä¹‰éªŒè¯"><a href="#è‡ªå®šä¹‰éªŒè¯" class="headerlink" title="è‡ªå®šä¹‰éªŒè¯"></a>è‡ªå®šä¹‰éªŒè¯</h3><p>æˆ‘ä»¬å…è®¸è‡ªå·±æ³¨å†ŒéªŒè¯é€»è¾‘ã€‚ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">AddCustomFunc(name <span class="type">string</span>, f CustomFunc) <span class="type">error</span></span><br></pre></td></tr></table></figure>

<h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><p>æˆ‘ä»¬åœ¨åš Web å¼€å‘çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦é¡µé¢è·³è½¬å’Œé”™è¯¯å¤„ç†ï¼Œbeego è¿™æ–¹é¢ä¹Ÿè¿›è¡Œäº†è€ƒè™‘ï¼Œé€šè¿‡ <code>Redirect</code> æ–¹æ³•æ¥è¿›è¡Œè·³è½¬ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *AddController)</span></span> Get() &#123;</span><br><span class="line">	this.Redirect(<span class="string">&quot;/&quot;</span>, <span class="number">302</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä¸­æ­¢æ­¤æ¬¡è¯·æ±‚å¹¶æŠ›å‡ºå¼‚å¸¸ï¼Œbeego å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­è¿™æ ·æ“ä½œï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MainController)</span></span> Get() &#123;</span><br><span class="line">	this.Abort(<span class="string">&quot;401&quot;</span>)</span><br><span class="line">	v := this.GetSession(<span class="string">&quot;asta&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> v == <span class="literal">nil</span> &#123;</span><br><span class="line">		this.SetSession(<span class="string">&quot;asta&quot;</span>, <span class="type">int</span>(<span class="number">1</span>))</span><br><span class="line">		this.Data[<span class="string">&quot;Email&quot;</span>] = <span class="number">0</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		this.SetSession(<span class="string">&quot;asta&quot;</span>, v.(<span class="type">int</span>)+<span class="number">1</span>)</span><br><span class="line">		this.Data[<span class="string">&quot;Email&quot;</span>] = v.(<span class="type">int</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	this.TplName = <span class="string">&quot;index.tpl&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ · <code>this.Abort(&quot;401&quot;)</code> ä¹‹åçš„ä»£ç ä¸ä¼šå†æ‰§è¡Œï¼Œè€Œä¸”ä¼šé»˜è®¤æ˜¾ç¤ºç»™ç”¨æˆ·å¦‚ä¸‹é¡µé¢ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/401.png"></p>
<p>web æ¡†æ¶é»˜è®¤æ”¯æŒ 401ã€403ã€404ã€500ã€503 è¿™å‡ ç§é”™è¯¯çš„å¤„ç†ã€‚ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ç›¸åº”çš„é”™è¯¯å¤„ç†ï¼Œä¾‹å¦‚ä¸‹é¢é‡æ–°å®šä¹‰ 404 é¡µé¢ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">page_not_found</span><span class="params">(rw http.ResponseWriter, r *http.Request)</span></span>&#123;</span><br><span class="line">	t,_:= template.New(<span class="string">&quot;404.html&quot;</span>).ParseFiles(web.BConfig.WebConfig.ViewsPath+<span class="string">&quot;/404.html&quot;</span>)</span><br><span class="line">	data :=<span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	data[<span class="string">&quot;content&quot;</span>] = <span class="string">&quot;page not found&quot;</span></span><br><span class="line">	t.Execute(rw, data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	web.ErrorHandler(<span class="string">&quot;404&quot;</span>,page_not_found)</span><br><span class="line">	web.Router(<span class="string">&quot;/&quot;</span>, &amp;controllers.MainController&#123;&#125;)</span><br><span class="line">	web.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰é”™è¯¯é¡µé¢ <code>404.html</code> æ¥å¤„ç† 404 é”™è¯¯ã€‚</p>
<p>beego æ›´åŠ äººæ€§åŒ–çš„è¿˜æœ‰ä¸€ä¸ªè®¾è®¡å°±æ˜¯æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å­—ç¬¦ä¸²é”™è¯¯ç±»å‹å¤„ç†å‡½æ•°ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œç”¨æˆ·æ³¨å†Œäº†ä¸€ä¸ªæ•°æ®åº“å‡ºé”™çš„å¤„ç†é¡µé¢ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dbError</span><span class="params">(rw http.ResponseWriter, r *http.Request)</span></span>&#123;</span><br><span class="line">	t,_:= template.New(<span class="string">&quot;dberror.html&quot;</span>).ParseFiles(web.BConfig.WebConfig.ViewsPath+<span class="string">&quot;/dberror.html&quot;</span>)</span><br><span class="line">	data :=<span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	data[<span class="string">&quot;content&quot;</span>] = <span class="string">&quot;database is now down&quot;</span></span><br><span class="line">	t.Execute(rw, data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	web.ErrorHandler(<span class="string">&quot;dbError&quot;</span>,dbError)</span><br><span class="line">	web.Router(<span class="string">&quot;/&quot;</span>, &amp;controllers.MainController&#123;&#125;)</span><br><span class="line">	web.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦åœ¨å…¥å£æ³¨å†Œè¯¥é”™è¯¯å¤„ç†ä»£ç ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ä»»ä½•ä½ çš„é€»è¾‘ä¸­é‡åˆ°æ•°æ®åº“é”™è¯¯è°ƒç”¨ <code>this.Abort(&quot;dbError&quot;)</code> æ¥è¿›è¡Œå¼‚å¸¸é¡µé¢å¤„ç†ã€‚</p>
<h3 id="Controller-å®šä¹‰-Error"><a href="#Controller-å®šä¹‰-Error" class="headerlink" title="Controller å®šä¹‰ Error"></a>Controller å®šä¹‰ Error</h3><p>ä» 1.4.3 ç‰ˆæœ¬å¼€å§‹ï¼Œæ”¯æŒ Controller æ–¹å¼å®šä¹‰ Error é”™è¯¯å¤„ç†å‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥å……åˆ†åˆ©ç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ¨¡æ¿å¤„ç†ï¼Œä»¥åŠ context ç­‰æ–¹æ³•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> controllers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/beego/beego/v2/server/web&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ErrorController <span class="keyword">struct</span> &#123;</span><br><span class="line">	web.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *ErrorController)</span></span> Error404() &#123;</span><br><span class="line">	c.Data[<span class="string">&quot;content&quot;</span>] = <span class="string">&quot;page not found&quot;</span></span><br><span class="line">	c.TplName = <span class="string">&quot;404.tpl&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *ErrorController)</span></span> Error501() &#123;</span><br><span class="line">	c.Data[<span class="string">&quot;content&quot;</span>] = <span class="string">&quot;server error&quot;</span></span><br><span class="line">	c.TplName = <span class="string">&quot;501.tpl&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *ErrorController)</span></span> ErrorDb() &#123;</span><br><span class="line">	c.Data[<span class="string">&quot;content&quot;</span>] = <span class="string">&quot;database is now down&quot;</span></span><br><span class="line">	c.TplName = <span class="string">&quot;dberror.tpl&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯æœ‰ä¸€å®šè§„å¾‹çš„ï¼Œéƒ½æ˜¯ <code>Error</code> å¼€å¤´ï¼Œåé¢çš„åå­—å°±æ˜¯æˆ‘ä»¬è°ƒç”¨ <code>Abort</code> çš„åå­—ï¼Œä¾‹å¦‚ <code>Error404</code> å‡½æ•°å…¶å®è°ƒç”¨å¯¹åº”çš„å°±æ˜¯ <code>Abort(&quot;404&quot;)</code></p>
<p>æˆ‘ä»¬å°±åªè¦åœ¨ <code>web.Run</code> ä¹‹å‰é‡‡ç”¨ <code>web.ErrorController</code> æ³¨å†Œè¿™ä¸ªé”™è¯¯å¤„ç†å‡½æ•°å°±å¯ä»¥äº†</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	_ <span class="string">&quot;btest/routers&quot;</span></span><br><span class="line">	<span class="string">&quot;btest/controllers&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/beego/beego/v2/server/web&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	web.ErrorController(&amp;controllers.ErrorController&#123;&#125;)</span><br><span class="line">	web.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="modelè®¾è®¡"><a href="#modelè®¾è®¡" class="headerlink" title="modelè®¾è®¡"></a>modelè®¾è®¡</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>beego ORM æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Go è¯­è¨€ ORM æ¡†æ¶ã€‚å¥¹çš„çµæ„Ÿä¸»è¦æ¥è‡ª Django ORM å’Œ SQLAlchemyã€‚</p>
<p>ç›®å‰è¯¥æ¡†æ¶ä»å¤„äºå¼€å‘é˜¶æ®µï¼Œå¯èƒ½å‘ç”Ÿä»»ä½•å¯¼è‡´ä¸å…¼å®¹çš„æ”¹åŠ¨ã€‚</p>
<p><strong>å·²æ”¯æŒæ•°æ®åº“é©±åŠ¨ï¼š</strong></p>
<ul>
<li>MySQLï¼š<a href="https://github.com/go-sql-driver/mysql">github.com&#x2F;go-sql-driver&#x2F;mysql</a></li>
<li>PostgreSQLï¼š<a href="https://github.com/lib/pq">github.com&#x2F;lib&#x2F;pq</a></li>
<li>Sqlite3ï¼š<a href="https://github.com/mattn/go-sqlite3">github.com&#x2F;mattn&#x2F;go-sqlite3</a></li>
</ul>
<p><strong>ORM ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>æ”¯æŒ Go çš„æ‰€æœ‰ç±»å‹å­˜å‚¨</li>
<li>è½»æ¾ä¸Šæ‰‹ï¼Œé‡‡ç”¨ç®€å•çš„ CRUD é£æ ¼</li>
<li>è‡ªåŠ¨ Join å…³è”è¡¨</li>
<li>è·¨æ•°æ®åº“å…¼å®¹æŸ¥è¯¢</li>
<li>å…è®¸ç›´æ¥ä½¿ç”¨ SQL æŸ¥è¯¢ï¼æ˜ å°„</li>
<li>ä¸¥æ ¼å®Œæ•´çš„æµ‹è¯•ä¿è¯ ORM çš„ç¨³å®šä¸å¥å£®</li>
</ul>
<p><strong>å®‰è£… ORMï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go get github.com/beego/beego/v2/client/orm</span><br></pre></td></tr></table></figure>

<h2 id="å¿«é€Ÿå…¥é—¨-1"><a href="#å¿«é€Ÿå…¥é—¨-1" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/beego/beego/v2/client/orm&quot;</span></span><br><span class="line">	_ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span> <span class="comment">// import your used driver</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Model Struct</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id   <span class="type">int</span></span><br><span class="line">	Name <span class="type">string</span> <span class="string">`orm:&quot;size(100)&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// set default database</span></span><br><span class="line">	orm.RegisterDataBase(<span class="string">&quot;default&quot;</span>, <span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;username:password@tcp(127.0.0.1:3306)/db_name?charset=utf8&amp;loc=Local&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// register model</span></span><br><span class="line">	orm.RegisterModel(<span class="built_in">new</span>(User))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// create table</span></span><br><span class="line">	orm.RunSyncdb(<span class="string">&quot;default&quot;</span>, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	o := orm.NewOrm()</span><br><span class="line"></span><br><span class="line">	user := User&#123;Name: <span class="string">&quot;slene&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// insert</span></span><br><span class="line">	id, err := o.Insert(&amp;user)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ID: %d, ERR: %v\n&quot;</span>, id, err)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// update</span></span><br><span class="line">	user.Name = <span class="string">&quot;astaxie&quot;</span></span><br><span class="line">	num, err := o.Update(&amp;user)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;NUM: %d, ERR: %v\n&quot;</span>, num, err)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// read one</span></span><br><span class="line">	u := User&#123;Id: user.Id&#125;</span><br><span class="line">	err = o.Read(&amp;u)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ERR: %v\n&quot;</span>, err)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// delete</span></span><br><span class="line">	num, err = o.Delete(&amp;u)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;NUM: %d, ERR: %v\n&quot;</span>, num, err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å…³è”æŸ¥è¯¢"><a href="#å…³è”æŸ¥è¯¢" class="headerlink" title="å…³è”æŸ¥è¯¢"></a>å…³è”æŸ¥è¯¢</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id    <span class="type">int</span>    <span class="string">`orm:&quot;auto&quot;`</span></span><br><span class="line">	Title <span class="type">string</span> <span class="string">`orm:&quot;size(100)&quot;`</span></span><br><span class="line">	User  *User  <span class="string">`orm:&quot;rel(fk)&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> posts []*Post</span><br><span class="line">qs := o.QueryTable(<span class="string">&quot;post&quot;</span>)</span><br><span class="line">num, err := qs.Filter(<span class="string">&quot;User__Name&quot;</span>, <span class="string">&quot;slene&quot;</span>).All(&amp;posts)</span><br></pre></td></tr></table></figure>

<h3 id="SQL-æŸ¥è¯¢"><a href="#SQL-æŸ¥è¯¢" class="headerlink" title="SQL æŸ¥è¯¢"></a>SQL æŸ¥è¯¢</h3><p>å½“æ‚¨æ— æ³•ä½¿ç”¨ ORM æ¥è¾¾åˆ°æ‚¨çš„éœ€æ±‚æ—¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ SQL æ¥å®ŒæˆæŸ¥è¯¢ï¼æ˜ å°„æ“ä½œã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maps []orm.Params</span><br><span class="line">num, err := o.Raw(<span class="string">&quot;SELECT * FROM user&quot;</span>).Values(&amp;maps)</span><br><span class="line"><span class="keyword">for</span> _,term := <span class="keyword">range</span> maps&#123;</span><br><span class="line">	fmt.Println(term[<span class="string">&quot;id&quot;</span>],<span class="string">&quot;:&quot;</span>,term[<span class="string">&quot;name&quot;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ORMä½¿ç”¨"><a href="#ORMä½¿ç”¨" class="headerlink" title="ORMä½¿ç”¨"></a>ORMä½¿ç”¨</h2><p>æˆ‘ä»¬å»ºè®®åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªæ•°æ®åº“åº”è¯¥åªå­˜åœ¨ä¸€ä¸ª<code>ORM</code>å¯¹è±¡ã€‚</p>
<p><code>models.go</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/beego/beego/v2/client/orm&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id          <span class="type">int</span></span><br><span class="line">	Name        <span class="type">string</span></span><br><span class="line">	Profile     *Profile   <span class="string">`orm:&quot;rel(one)&quot;`</span> <span class="comment">// OneToOne relation</span></span><br><span class="line">	Post    	[]*Post <span class="string">`orm:&quot;reverse(many)&quot;`</span> <span class="comment">// è®¾ç½®ä¸€å¯¹å¤šçš„åå‘å…³ç³»</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Profile <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id          <span class="type">int</span></span><br><span class="line">	Age         <span class="type">int16</span></span><br><span class="line">	User        *User   <span class="string">`orm:&quot;reverse(one)&quot;`</span> <span class="comment">// è®¾ç½®ä¸€å¯¹ä¸€åå‘å…³ç³»(å¯é€‰)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">    Id    <span class="type">int</span></span><br><span class="line">    Title <span class="type">string</span></span><br><span class="line">    User  *User  <span class="string">`orm:&quot;rel(fk)&quot;`</span>	<span class="comment">//è®¾ç½®ä¸€å¯¹å¤šå…³ç³»</span></span><br><span class="line">    Tags  []*Tag <span class="string">`orm:&quot;rel(m2m)&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Tag <span class="keyword">struct</span> &#123;</span><br><span class="line">    Id    <span class="type">int</span></span><br><span class="line">    Name  <span class="type">string</span></span><br><span class="line">    Posts []*Post <span class="string">`orm:&quot;reverse(many)&quot;`</span> <span class="comment">//è®¾ç½®å¤šå¯¹å¤šåå‘å…³ç³»</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// éœ€è¦åœ¨initä¸­æ³¨å†Œå®šä¹‰çš„model</span></span><br><span class="line">	orm.RegisterModel(<span class="built_in">new</span>(User), <span class="built_in">new</span>(Post), <span class="built_in">new</span>(Profile), <span class="built_in">new</span>(Tag))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>main.go</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/beego/beego/v2/client/orm&quot;</span></span><br><span class="line">	_ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	orm.RegisterDriver(<span class="string">&quot;mysql&quot;</span>, orm.DRMySQL)</span><br><span class="line"></span><br><span class="line">	orm.RegisterDataBase(<span class="string">&quot;default&quot;</span>, <span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;root:root@/orm_test?charset=utf8&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é»˜è®¤ä½¿ç”¨ defaultï¼Œä½ å¯ä»¥æŒ‡å®šä¸ºå…¶ä»–æ•°æ®åº“</span></span><br><span class="line">	o := orm.NewOrm()</span><br><span class="line"></span><br><span class="line">	profile := <span class="built_in">new</span>(Profile)</span><br><span class="line">	profile.Age = <span class="number">30</span></span><br><span class="line"></span><br><span class="line">	user := <span class="built_in">new</span>(User)</span><br><span class="line">	user.Profile = profile</span><br><span class="line">	user.Name = <span class="string">&quot;slene&quot;</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(o.Insert(profile))</span><br><span class="line">	fmt.Println(o.Insert(user))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RegisterDriver"><a href="#RegisterDriver" class="headerlink" title="RegisterDriver"></a>RegisterDriver</h3><p>é»˜è®¤æ•°æ®åº“ç±»å‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">orm.DRMySQL</span><br><span class="line">orm.DRSqlite</span><br><span class="line">orm.DRPostgres</span><br><span class="line">orm.DRTiDB</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt; 1.6</span></span><br><span class="line">orm.DR_MySQL</span><br><span class="line">orm.DR_Sqlite</span><br><span class="line">orm.DR_Postgres</span><br><span class="line"><span class="comment">// å‚æ•°1   driverName</span></span><br><span class="line"><span class="comment">// å‚æ•°2   æ•°æ®åº“ç±»å‹</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªç”¨æ¥è®¾ç½® driverName å¯¹åº”çš„æ•°æ®åº“ç±»å‹</span></span><br><span class="line"><span class="comment">// mysql / sqlite3 / postgres / tidb è¿™å‡ ç§æ˜¯é»˜è®¤å·²ç»æ³¨å†Œè¿‡çš„ï¼Œæ‰€ä»¥å¯ä»¥æ— éœ€è®¾ç½®</span></span><br><span class="line">orm.RegisterDriver(<span class="string">&quot;mysql&quot;</span>, orm.DRMySQL)</span><br></pre></td></tr></table></figure>

<h3 id="RegisterDataBase"><a href="#RegisterDataBase" class="headerlink" title="RegisterDataBase"></a>RegisterDataBase</h3><p>ORM å¿…é¡»æ³¨å†Œä¸€ä¸ªåˆ«åä¸º <code>default</code> çš„æ•°æ®åº“ï¼Œä½œä¸ºé»˜è®¤ä½¿ç”¨ã€‚</p>
<p>ORM ä½¿ç”¨ golang è‡ªå·±çš„è¿æ¥æ± </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°1        æ•°æ®åº“çš„åˆ«åï¼Œç”¨æ¥åœ¨ ORM ä¸­åˆ‡æ¢æ•°æ®åº“ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// å‚æ•°2        driverName</span></span><br><span class="line"><span class="comment">// å‚æ•°3        å¯¹åº”çš„é“¾æ¥å­—ç¬¦ä¸²</span></span><br><span class="line">orm.RegisterDataBase(<span class="string">&quot;default&quot;</span>, <span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;root:root@/orm_test?charset=utf8&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚æ•°4(å¯é€‰)  è®¾ç½®æœ€å¤§ç©ºé—²è¿æ¥</span></span><br><span class="line"><span class="comment">// å‚æ•°5(å¯é€‰)  è®¾ç½®æœ€å¤§æ•°æ®åº“è¿æ¥ (go &gt;= 1.2)</span></span><br><span class="line">maxIdle := <span class="number">30</span></span><br><span class="line">maxConn := <span class="number">30</span></span><br><span class="line">orm.RegisterDataBase(<span class="string">&quot;default&quot;</span>, <span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;root:root@/orm_test?charset=utf8&quot;</span>, orm.MaxIdleConnections(maxIdle), orm.MaxOpenConnections(maxConn))</span><br></pre></td></tr></table></figure>

<h3 id="RegisterModel"><a href="#RegisterModel" class="headerlink" title="RegisterModel"></a>RegisterModel</h3><p>å°†ä½ å®šä¹‰çš„ Model è¿›è¡Œæ³¨å†Œï¼Œæœ€ä½³è®¾è®¡æ˜¯æœ‰å•ç‹¬çš„ models.go æ–‡ä»¶ï¼Œåœ¨ä»–çš„ init å‡½æ•°ä¸­è¿›è¡Œæ³¨å†Œã€‚</p>
<p>è¿·ä½ ç‰ˆ models.go</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/beego/beego/v2/client/orm&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id   <span class="type">int</span></span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	orm.RegisterModel(<span class="built_in">new</span>(User))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>RegisterModel ä¹Ÿå¯ä»¥åŒæ—¶æ³¨å†Œå¤šä¸ª model</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">orm.RegisterModel(<span class="built_in">new</span>(User), <span class="built_in">new</span>(Profile), <span class="built_in">new</span>(Post))</span><br></pre></td></tr></table></figure>

<h3 id="RegisterModelWithPrefix"><a href="#RegisterModelWithPrefix" class="headerlink" title="RegisterModelWithPrefix"></a>RegisterModelWithPrefix</h3><p>ä½¿ç”¨è¡¨åå‰ç¼€</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">orm.RegisterModelWithPrefix(<span class="string">&quot;prefix_&quot;</span>, <span class="built_in">new</span>(User))</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºåçš„è¡¨åä¸º prefix_user</p>
<h3 id="QueryTable"><a href="#QueryTable" class="headerlink" title="QueryTable"></a>QueryTable</h3><p>ä¼ å…¥è¡¨åï¼Œæˆ–è€… Model å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª <a href="https://git-books.github.io/books/beego/query.md">QuerySeter</a></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line"><span class="keyword">var</span> qs orm.QuerySeter</span><br><span class="line">qs = o.QueryTable(<span class="string">&quot;user&quot;</span>)</span><br><span class="line"><span class="comment">// å¦‚æœè¡¨æ²¡æœ‰å®šä¹‰è¿‡ï¼Œä¼šç«‹åˆ» panic</span></span><br></pre></td></tr></table></figure>

<h3 id="Raw"><a href="#Raw" class="headerlink" title="Raw"></a>Raw</h3><p>ä½¿ç”¨ sql è¯­å¥ç›´æ¥è¿›è¡Œæ“ä½œ</p>
<p>Raw å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª <a href="https://git-books.github.io/books/beego/rawsql.md">RawSeter</a> ç”¨ä»¥å¯¹è®¾ç½®çš„ sql è¯­å¥å’Œå‚æ•°è¿›è¡Œæ“ä½œ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line"><span class="keyword">var</span> r orm.RawSeter</span><br><span class="line">r = o.Raw(<span class="string">&quot;UPDATE user SET name = ? WHERE name = ?&quot;</span>, <span class="string">&quot;testing&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="CRUD-æ“ä½œ"><a href="#CRUD-æ“ä½œ" class="headerlink" title="CRUD æ“ä½œ"></a>CRUD æ“ä½œ</h2><p>å¦‚æœå·²çŸ¥ä¸»é”®çš„å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•è¿›è¡Œ CRUD æ“ä½œ</p>
<p>å¯¹ object æ“ä½œçš„å››ä¸ªæ–¹æ³• Read &#x2F; Insert &#x2F; Update &#x2F; Delete</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line">user := <span class="built_in">new</span>(User)</span><br><span class="line">user.Name = <span class="string">&quot;slene&quot;</span></span><br><span class="line"></span><br><span class="line">fmt.Println(o.Insert(user))</span><br><span class="line"></span><br><span class="line">user.Name = <span class="string">&quot;Your&quot;</span></span><br><span class="line">fmt.Println(o.Update(user))</span><br><span class="line">fmt.Println(o.Read(user))</span><br><span class="line">fmt.Println(o.Delete(user))</span><br></pre></td></tr></table></figure>

<h3 id="Read"><a href="#Read" class="headerlink" title="Read"></a>Read</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line">user := User&#123;Id: <span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">err := o.Read(&amp;user)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err == orm.ErrNoRows &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æŸ¥è¯¢ä¸åˆ°&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> err == orm.ErrMissPK &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;æ‰¾ä¸åˆ°ä¸»é”®&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	fmt.Println(user.Id, user.Name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Read é»˜è®¤é€šè¿‡æŸ¥è¯¢ä¸»é”®èµ‹å€¼ï¼Œå¯ä»¥ä½¿ç”¨æŒ‡å®šçš„å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">user := User&#123;Name: <span class="string">&quot;slene&quot;</span>&#125;</span><br><span class="line">err = o.Read(&amp;user, <span class="string">&quot;Name&quot;</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="ReadOrCreate"><a href="#ReadOrCreate" class="headerlink" title="ReadOrCreate"></a>ReadOrCreate</h3><p>å°è¯•ä»æ•°æ®åº“è¯»å–ï¼Œä¸å­˜åœ¨çš„è¯å°±åˆ›å»ºä¸€ä¸ªã€‚</p>
<p>å®ƒçš„å®ç°æœºåˆ¶ï¼Œå’Œå…·ä½“çš„æ•°æ®åº“æœ‰å…³ã€‚ä¾‹å¦‚åœ¨ MYSQL ä¸­ï¼Œæ˜¯ä½¿ç”¨</p>
<p>é»˜è®¤å¿…é¡»ä¼ å…¥ä¸€ä¸ªå‚æ•°ä½œä¸ºæ¡ä»¶å­—æ®µï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒå¤šä¸ªå‚æ•°å¤šä¸ªæ¡ä»¶å­—æ®µ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line">user := User&#123;Name: <span class="string">&quot;slene&quot;</span>&#125;</span><br><span class="line"><span class="comment">// ä¸‰ä¸ªè¿”å›å‚æ•°ä¾æ¬¡ä¸ºï¼šæ˜¯å¦æ–°åˆ›å»ºçš„ï¼Œå¯¹è±¡ Id å€¼ï¼Œé”™è¯¯</span></span><br><span class="line"><span class="keyword">if</span> created, id, err := o.ReadOrCreate(&amp;user, <span class="string">&quot;Name&quot;</span>); err == <span class="literal">nil</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> created &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;New Insert an object. Id:&quot;</span>, id)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Get an object. Id:&quot;</span>, id)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h3><p>ç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºè‡ªå¢å¥ Id çš„å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line"><span class="keyword">var</span> user User</span><br><span class="line">user.Name = <span class="string">&quot;slene&quot;</span></span><br><span class="line">user.IsActive = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">id, err := o.Insert(&amp;user)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºåä¼šè‡ªåŠ¨å¯¹ auto çš„ field èµ‹å€¼</p>
<h3 id="InsertMulti"><a href="#InsertMulti" class="headerlink" title="InsertMulti"></a>InsertMulti</h3><p>åŒæ—¶æ’å…¥å¤šä¸ªå¯¹è±¡</p>
<p>ç±»ä¼¼sqlè¯­å¥</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">table</span> (name, age) <span class="keyword">values</span>(&quot;slene&quot;, <span class="number">28</span>),(&quot;astaxie&quot;, <span class="number">30</span>),(&quot;unknown&quot;, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€ä¸ªå‚æ•° bulk ä¸ºå¹¶åˆ—æ’å…¥çš„æ•°é‡ï¼Œç¬¬äºŒä¸ªä¸ºå¯¹è±¡çš„slice</p>
<p>è¿”å›å€¼ä¸ºæˆåŠŸæ’å…¥çš„æ•°é‡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">users := []User&#123;</span><br><span class="line">	&#123;Name: <span class="string">&quot;slene&quot;</span>&#125;,</span><br><span class="line">	&#123;Name: <span class="string">&quot;astaxie&quot;</span>&#125;,</span><br><span class="line">	&#123;Name: <span class="string">&quot;unknown&quot;</span>&#125;,</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line">successNums, err := o.InsertMulti(<span class="number">100</span>, users)</span><br></pre></td></tr></table></figure>

<p>bulk ä¸º 1 æ—¶ï¼Œå°†ä¼šé¡ºåºæ’å…¥ slice ä¸­çš„æ•°æ®</p>
<h3 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h3><p>ç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºå½±å“çš„è¡Œæ•°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line">user := User&#123;Id: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">if</span> o.Read(&amp;user) == <span class="literal">nil</span> &#123;</span><br><span class="line">	user.Name = <span class="string">&quot;MyName&quot;</span></span><br><span class="line">	<span class="keyword">if</span> num, err := o.Update(&amp;user); err == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(num)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Update é»˜è®¤æ›´æ–°æ‰€æœ‰çš„å­—æ®µï¼Œå¯ä»¥æ›´æ–°æŒ‡å®šçš„å­—æ®µï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åªæ›´æ–° Name</span></span><br><span class="line">o.Update(&amp;user, <span class="string">&quot;Name&quot;</span>)</span><br><span class="line"><span class="comment">// æŒ‡å®šå¤šä¸ªå­—æ®µ</span></span><br><span class="line"><span class="comment">// o.Update(&amp;user, &quot;Field1&quot;, &quot;Field2&quot;, ...)</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®å¤æ‚æ¡ä»¶æ›´æ–°å­—æ®µå€¼å‚è§ <a href="https://git-books.github.io/books/beego/query.md#update">Update</a></p>
<h3 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h3><p>ç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºå½±å“çš„è¡Œæ•°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line"><span class="keyword">if</span> num, err := o.Delete(&amp;User&#123;Id: <span class="number">1</span>&#125;); err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Delete æ“ä½œä¼šå¯¹åå‘å…³ç³»è¿›è¡Œæ“ä½œï¼Œæ­¤ä¾‹ä¸­ Post æ‹¥æœ‰ä¸€ä¸ªåˆ° User çš„å¤–é”®ã€‚åˆ é™¤ User çš„æ—¶å€™ã€‚å¦‚æœ on_delete è®¾ç½®ä¸ºé»˜è®¤çš„çº§è”æ“ä½œï¼Œå°†åˆ é™¤å¯¹åº”çš„ Post</p>
<p><strong>Changed in 1.0.3</strong> åˆ é™¤ä»¥åä¸ä¼šåˆ é™¤ auto field çš„å€¼</p>
<h2 id="é«˜çº§æŸ¥è¯¢"><a href="#é«˜çº§æŸ¥è¯¢" class="headerlink" title="é«˜çº§æŸ¥è¯¢"></a>é«˜çº§æŸ¥è¯¢</h2><p>ORM ä»¥ <strong>QuerySeter</strong> æ¥ç»„ç»‡æŸ¥è¯¢ï¼Œæ¯ä¸ªè¿”å› <strong>QuerySeter</strong> çš„æ–¹æ³•éƒ½ä¼šè·å¾—ä¸€ä¸ªæ–°çš„ <strong>QuerySeter</strong> å¯¹è±¡ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ–¹æ³•:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å– QuerySeter å¯¹è±¡ï¼Œuser ä¸ºè¡¨å</span></span><br><span class="line">qs := o.QueryTable(<span class="string">&quot;user&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ Model ç»“æ„ä½“ä½œä¸ºè¡¨å</span></span><br><span class="line">qs = o.QueryTable(&amp;User)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å¯¹è±¡ä½œä¸ºè¡¨å</span></span><br><span class="line">user := <span class="built_in">new</span>(User)</span><br><span class="line">qs = o.QueryTable(user) <span class="comment">// è¿”å› QuerySeter</span></span><br></pre></td></tr></table></figure>

<h3 id="expr"><a href="#expr" class="headerlink" title="expr"></a>expr</h3><p>QuerySeter ä¸­ç”¨äºæè¿°å­—æ®µå’Œ sql æ“ä½œç¬¦ï¼Œä½¿ç”¨ç®€å•çš„ expr æŸ¥è¯¢æ–¹æ³•</p>
<p>å­—æ®µç»„åˆçš„å‰åé¡ºåºä¾ç…§è¡¨çš„å…³ç³»ï¼Œæ¯”å¦‚ User è¡¨æ‹¥æœ‰ Profile çš„å¤–é”®ï¼Œé‚£ä¹ˆå¯¹ User è¡¨æŸ¥è¯¢å¯¹åº”çš„ Profile.Age ä¸ºæ¡ä»¶ï¼Œåˆ™ä½¿ç”¨ <code>Profile__Age</code> æ³¨æ„ï¼Œå­—æ®µçš„åˆ†éš”ç¬¦å·ä½¿ç”¨åŒä¸‹åˆ’çº¿ <code>__</code>ï¼Œé™¤äº†æè¿°å­—æ®µï¼Œ expr çš„å°¾éƒ¨å¯ä»¥å¢åŠ æ“ä½œç¬¦ä»¥æ‰§è¡Œå¯¹åº”çš„ sql æ“ä½œã€‚æ¯”å¦‚ <code>Profile__Age__gt</code> ä»£è¡¨ Profile.Age &gt; 18 çš„æ¡ä»¶æŸ¥è¯¢ã€‚</p>
<p>æ³¨é‡Šåé¢å°†æè¿°å¯¹åº”çš„ sql è¯­å¥ï¼Œä»…ä»…æ˜¯æè¿° expr çš„ç±»ä¼¼ç»“æœï¼Œå¹¶ä¸ä»£è¡¨å®é™…ç”Ÿæˆçš„è¯­å¥ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;id&quot;</span>, <span class="number">1</span>) <span class="comment">// WHERE id = 1</span></span><br><span class="line">qs.Filter(<span class="string">&quot;profile__age&quot;</span>, <span class="number">18</span>) <span class="comment">// WHERE profile.age = 18</span></span><br><span class="line">qs.Filter(<span class="string">&quot;Profile__Age&quot;</span>, <span class="number">18</span>) <span class="comment">// ä½¿ç”¨å­—æ®µåå’Œ Field åéƒ½æ˜¯å…è®¸çš„</span></span><br><span class="line">qs.Filter(<span class="string">&quot;profile__age__gt&quot;</span>, <span class="number">18</span>) <span class="comment">// WHERE profile.age &gt; 18</span></span><br><span class="line">qs.Filter(<span class="string">&quot;profile__age__gte&quot;</span>, <span class="number">18</span>) <span class="comment">// WHERE profile.age &gt;= 18</span></span><br><span class="line">qs.Filter(<span class="string">&quot;profile__age__in&quot;</span>, <span class="number">18</span>, <span class="number">20</span>) <span class="comment">// WHERE profile.age IN (18, 20)</span></span><br><span class="line"></span><br><span class="line">qs.Filter(<span class="string">&quot;profile__age__in&quot;</span>, <span class="number">18</span>, <span class="number">20</span>).Exclude(<span class="string">&quot;profile__lt&quot;</span>, <span class="number">1000</span>)</span><br><span class="line"><span class="comment">// WHERE profile.age IN (18, 20) AND NOT profile_id &lt; 1000</span></span><br></pre></td></tr></table></figure>

<h3 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h3><p>å½“å‰æ”¯æŒçš„æ“ä½œç¬¦å·ï¼š</p>
<ul>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#exact">exact</a> &#x2F; <a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#iexact">iexact</a> ç­‰äº</li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#contains">contains</a> &#x2F; <a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#icontains">icontains</a> åŒ…å«</li>
<li>[gt &#x2F; gte](#gt &#x2F; gte) å¤§äº &#x2F; å¤§äºç­‰äº</li>
<li>[lt &#x2F; lte](#lt &#x2F; lte) å°äº &#x2F; å°äºç­‰äº</li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#startswith">startswith</a> &#x2F; <a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#istartswith">istartswith</a> ä»¥â€¦èµ·å§‹</li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#endswith">endswith</a> &#x2F; <a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#iendswith">iendswith</a> ä»¥â€¦ç»“æŸ</li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#in">in</a></li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#isnull">isnull</a></li>
</ul>
<p>åé¢ä»¥ <code>i</code> å¼€å¤´çš„è¡¨ç¤ºï¼šå¤§å°å†™ä¸æ•æ„Ÿ</p>
<h3 id="exact"><a href="#exact" class="headerlink" title="exact"></a>exact</h3><p>Filter &#x2F; Exclude &#x2F; Condition expr çš„é»˜è®¤å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;slene&quot;</span>) <span class="comment">// WHERE name = &#x27;slene&#x27;</span></span><br><span class="line">qs.Filter(<span class="string">&quot;name__exact&quot;</span>, <span class="string">&quot;slene&quot;</span>) <span class="comment">// WHERE name = &#x27;slene&#x27;</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ = åŒ¹é…ï¼Œå¤§å°å†™æ˜¯å¦æ•æ„Ÿå–å†³äºæ•°æ®è¡¨ä½¿ç”¨çš„ collation</span></span><br><span class="line">qs.Filter(<span class="string">&quot;profile_id&quot;</span>, <span class="literal">nil</span>) <span class="comment">// WHERE profile_id IS NULL</span></span><br></pre></td></tr></table></figure>

<h3 id="iexact"><a href="#iexact" class="headerlink" title="iexact"></a>iexact</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;name__iexact&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE name LIKE &#x27;slene&#x27;</span></span><br><span class="line"><span class="comment">// å¤§å°å†™ä¸æ•æ„Ÿï¼ŒåŒ¹é…ä»»æ„ &#x27;Slene&#x27; &#x27;sLENE&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="contains"><a href="#contains" class="headerlink" title="contains"></a>contains</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;name__contains&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE name LIKE BINARY &#x27;%slene%&#x27;</span></span><br><span class="line"><span class="comment">// å¤§å°å†™æ•æ„Ÿ, åŒ¹é…åŒ…å« slene çš„å­—ç¬¦</span></span><br></pre></td></tr></table></figure>

<h3 id="icontains"><a href="#icontains" class="headerlink" title="icontains"></a>icontains</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;name__icontains&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE name LIKE &#x27;%slene%&#x27;</span></span><br><span class="line"><span class="comment">// å¤§å°å†™ä¸æ•æ„Ÿ, åŒ¹é…ä»»æ„ &#x27;im Slene&#x27;, &#x27;im sLENE&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="in"><a href="#in" class="headerlink" title="in"></a>in</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;age__in&quot;</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>)</span><br><span class="line"><span class="comment">// WHERE age IN (17, 18, 19, 20)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ids:=[]<span class="type">int</span>&#123;<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>&#125;</span><br><span class="line">qs.Filter(<span class="string">&quot;age__in&quot;</span>, ids)</span><br><span class="line"><span class="comment">// WHERE age IN (17, 18, 19, 20)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒä¸Šæ•ˆæœ</span></span><br></pre></td></tr></table></figure>

<h3 id="gt-gte"><a href="#gt-gte" class="headerlink" title="gt &#x2F; gte"></a>gt &#x2F; gte</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;profile__age__gt&quot;</span>, <span class="number">17</span>)</span><br><span class="line"><span class="comment">// WHERE profile.age &gt; 17</span></span><br><span class="line"></span><br><span class="line">qs.Filter(<span class="string">&quot;profile__age__gte&quot;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="comment">// WHERE profile.age &gt;= 18</span></span><br></pre></td></tr></table></figure>

<h3 id="lt-lte"><a href="#lt-lte" class="headerlink" title="lt &#x2F; lte"></a>lt &#x2F; lte</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;profile__age__lt&quot;</span>, <span class="number">17</span>)</span><br><span class="line"><span class="comment">// WHERE profile.age &lt; 17</span></span><br><span class="line"></span><br><span class="line">qs.Filter(<span class="string">&quot;profile__age__lte&quot;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="comment">// WHERE profile.age &lt;= 18</span></span><br></pre></td></tr></table></figure>

<h3 id="startswith"><a href="#startswith" class="headerlink" title="startswith"></a>startswith</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;name__startswith&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE name LIKE BINARY &#x27;slene%&#x27;</span></span><br><span class="line"><span class="comment">// å¤§å°å†™æ•æ„Ÿ, åŒ¹é…ä»¥ &#x27;slene&#x27; èµ·å§‹çš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure>

<h3 id="istartswith"><a href="#istartswith" class="headerlink" title="istartswith"></a>istartswith</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;name__istartswith&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE name LIKE &#x27;slene%&#x27;</span></span><br><span class="line"><span class="comment">// å¤§å°å†™ä¸æ•æ„Ÿ, åŒ¹é…ä»»æ„ä»¥ &#x27;slene&#x27;, &#x27;Slene&#x27; èµ·å§‹çš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure>

<h3 id="endswith"><a href="#endswith" class="headerlink" title="endswith"></a>endswith</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;name__endswith&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE name LIKE BINARY &#x27;%slene&#x27;</span></span><br><span class="line"><span class="comment">// å¤§å°å†™æ•æ„Ÿ, åŒ¹é…ä»¥ &#x27;slene&#x27; ç»“æŸçš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure>

<h3 id="iendswith"><a href="#iendswith" class="headerlink" title="iendswith"></a>iendswith</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;name__iendswithi&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE name LIKE &#x27;%slene&#x27;</span></span><br><span class="line"><span class="comment">// å¤§å°å†™ä¸æ•æ„Ÿ, åŒ¹é…ä»»æ„ä»¥ &#x27;slene&#x27;, &#x27;Slene&#x27; ç»“æŸçš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure>

<h3 id="isnull"><a href="#isnull" class="headerlink" title="isnull"></a>isnull</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;profile__isnull&quot;</span>, <span class="literal">true</span>)</span><br><span class="line">qs.Filter(<span class="string">&quot;profile_id__isnull&quot;</span>, <span class="literal">true</span>)</span><br><span class="line"><span class="comment">// WHERE profile_id IS NULL</span></span><br><span class="line"></span><br><span class="line">qs.Filter(<span class="string">&quot;profile__isnull&quot;</span>, <span class="literal">false</span>)</span><br><span class="line"><span class="comment">// WHERE profile_id IS NOT NULL</span></span><br></pre></td></tr></table></figure>

<h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><p>ç”¨æ¥è¿‡æ»¤æŸ¥è¯¢ç»“æœï¼Œèµ·åˆ° <strong>åŒ…å«æ¡ä»¶</strong> çš„ä½œç”¨</p>
<p>å¤šä¸ª Filter ä¹‹é—´ä½¿ç”¨ <code>AND</code> è¿æ¥</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Filter(<span class="string">&quot;profile__isnull&quot;</span>, <span class="literal">true</span>).Filter(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE profile_id IS NULL AND name = &#x27;slene&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="Exclude"><a href="#Exclude" class="headerlink" title="Exclude"></a>Exclude</h3><p>ç”¨æ¥è¿‡æ»¤æŸ¥è¯¢ç»“æœï¼Œèµ·åˆ° <strong>æ’é™¤æ¡ä»¶</strong> çš„ä½œç”¨</p>
<p>ä½¿ç”¨ <code>NOT</code> æ’é™¤æ¡ä»¶</p>
<p>å¤šä¸ª Exclude ä¹‹é—´ä½¿ç”¨ <code>AND</code> è¿æ¥</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Exclude(<span class="string">&quot;profile__isnull&quot;</span>, <span class="literal">true</span>).Filter(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line"><span class="comment">// WHERE NOT profile_id IS NULL AND name = &#x27;slene&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="SetCond"><a href="#SetCond" class="headerlink" title="SetCond"></a>SetCond</h3><p>è‡ªå®šä¹‰æ¡ä»¶è¡¨è¾¾å¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">cond := orm.NewCondition()</span><br><span class="line">cond1 := cond.And(<span class="string">&quot;profile__isnull&quot;</span>, <span class="literal">false</span>).AndNot(<span class="string">&quot;status__in&quot;</span>, <span class="number">1</span>).Or(<span class="string">&quot;profile__age__gt&quot;</span>, <span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line">qs := orm.QueryTable(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">qs = qs.SetCond(cond1)</span><br><span class="line"><span class="comment">// WHERE ... AND ... AND NOT ... OR ...</span></span><br><span class="line"></span><br><span class="line">cond2 := cond.AndCond(cond1).OrCond(cond.And(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;slene&quot;</span>))</span><br><span class="line">qs = qs.SetCond(cond2).Count()</span><br><span class="line"><span class="comment">// WHERE (... AND ... AND NOT ... OR ...) OR ( ... )</span></span><br></pre></td></tr></table></figure>

<h3 id="Limit"><a href="#Limit" class="headerlink" title="Limit"></a>Limit</h3><p>é™åˆ¶æœ€å¤§è¿”å›æ•°æ®è¡Œæ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯ä»¥è®¾ç½® <code>Offset</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> DefaultRowsLimit = <span class="number">1000</span> <span class="comment">// ORM é»˜è®¤çš„ limit å€¼ä¸º 1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µä¸‹ select æŸ¥è¯¢çš„æœ€å¤§è¡Œæ•°ä¸º 1000</span></span><br><span class="line"><span class="comment">// LIMIT 1000</span></span><br><span class="line"></span><br><span class="line">qs.Limit(<span class="number">10</span>)</span><br><span class="line"><span class="comment">// LIMIT 10</span></span><br><span class="line"></span><br><span class="line">qs.Limit(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="comment">// LIMIT 10 OFFSET 20 æ³¨æ„è·Ÿ SQL åè¿‡æ¥çš„</span></span><br><span class="line"></span><br><span class="line">qs.Limit(<span class="number">-1</span>)</span><br><span class="line"><span class="comment">// no limit</span></span><br><span class="line"></span><br><span class="line">qs.Limit(<span class="number">-1</span>, <span class="number">100</span>)</span><br><span class="line"><span class="comment">// LIMIT 18446744073709551615 OFFSET 100</span></span><br><span class="line"><span class="comment">// 18446744073709551615 æ˜¯ 1&lt;&lt;64 - 1 ç”¨æ¥æŒ‡å®šæ—  limit é™åˆ¶ ä½†æœ‰ offset åç§»çš„æƒ…å†µ</span></span><br></pre></td></tr></table></figure>

<h3 id="Offset"><a href="#Offset" class="headerlink" title="Offset"></a>Offset</h3><p>è®¾ç½® åç§»è¡Œæ•°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Offset(<span class="number">20</span>)</span><br><span class="line"><span class="comment">// LIMIT 1000 OFFSET 20</span></span><br></pre></td></tr></table></figure>

<h3 id="GroupBy"><a href="#GroupBy" class="headerlink" title="GroupBy"></a>GroupBy</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.GroupBy(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;age&quot;</span>)</span><br><span class="line"><span class="comment">// GROUP BY id,age</span></span><br></pre></td></tr></table></figure>

<h3 id="OrderBy"><a href="#OrderBy" class="headerlink" title="OrderBy"></a>OrderBy</h3><p>å‚æ•°ä½¿ç”¨ <strong>expr</strong></p>
<p>åœ¨ expr å‰ä½¿ç”¨å‡å· <code>-</code> è¡¨ç¤º <code>DESC</code> çš„æ’åˆ—</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.OrderBy(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;-profile__age&quot;</span>)</span><br><span class="line"><span class="comment">// ORDER BY id ASC, profile.age DESC</span></span><br><span class="line"></span><br><span class="line">qs.OrderBy(<span class="string">&quot;-profile__age&quot;</span>, <span class="string">&quot;profile&quot;</span>)</span><br><span class="line"><span class="comment">// ORDER BY profile.age DESC, profile_id ASC</span></span><br></pre></td></tr></table></figure>

<h3 id="Distinct"><a href="#Distinct" class="headerlink" title="Distinct"></a>Distinct</h3><p>å¯¹åº” sql çš„ <code>distinct</code> è¯­å¥, è¿”å›æŒ‡å®šå­—æ®µä¸é‡å¤çš„å€¼.</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">qs.Distinct()</span><br><span class="line"><span class="comment">// SELECT DISTINCT</span></span><br></pre></td></tr></table></figure>

<h3 id="RelatedSel"><a href="#RelatedSel" class="headerlink" title="RelatedSel"></a>RelatedSel</h3><p>å…³ç³»æŸ¥è¯¢ï¼Œå‚æ•°ä½¿ç”¨ <strong>expr</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> DefaultRelsDepth = <span class="number">5</span> <span class="comment">// é»˜è®¤æƒ…å†µä¸‹ç›´æ¥è°ƒç”¨ RelatedSel å°†è¿›è¡Œæœ€å¤§ 5 å±‚çš„å…³ç³»æŸ¥è¯¢</span></span><br><span class="line"></span><br><span class="line">qs := o.QueryTable(<span class="string">&quot;post&quot;</span>)</span><br><span class="line"></span><br><span class="line">qs.RelatedSel()</span><br><span class="line"><span class="comment">// INNER JOIN user ... LEFT OUTER JOIN profile ...</span></span><br><span class="line"></span><br><span class="line">qs.RelatedSel(<span class="string">&quot;user&quot;</span>)</span><br><span class="line"><span class="comment">// INNER JOIN user ...</span></span><br><span class="line"><span class="comment">// è®¾ç½® expr åªå¯¹è®¾ç½®çš„å­—æ®µè¿›è¡Œå…³ç³»æŸ¥è¯¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è®¾ç½® null å±æ€§çš„ Field å°†ä½¿ç”¨ LEFT OUTER JOIN</span></span><br></pre></td></tr></table></figure>

<h3 id="Count"><a href="#Count" class="headerlink" title="Count"></a>Count</h3><p>ä¾æ®å½“å‰çš„æŸ¥è¯¢æ¡ä»¶ï¼Œè¿”å›ç»“æœè¡Œæ•°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">cnt, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Count() <span class="comment">// SELECT COUNT(*) FROM USER</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;Count Num: %s, %s&quot;</span>, cnt, err)</span><br></pre></td></tr></table></figure>

<h3 id="Exist"><a href="#Exist" class="headerlink" title="Exist"></a>Exist</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">exist := o.QueryTable(<span class="string">&quot;user&quot;</span>).Filter(<span class="string">&quot;UserName&quot;</span>, <span class="string">&quot;Name&quot;</span>).Exist()</span><br><span class="line">fmt.Printf(<span class="string">&quot;Is Exist: %s&quot;</span>, exist)</span><br></pre></td></tr></table></figure>

<h3 id="Update-1"><a href="#Update-1" class="headerlink" title="Update"></a>Update</h3><p>ä¾æ®å½“å‰æŸ¥è¯¢æ¡ä»¶ï¼Œè¿›è¡Œæ‰¹é‡æ›´æ–°æ“ä½œ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Filter(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;slene&quot;</span>).Update(orm.Params&#123;</span><br><span class="line">	<span class="string">&quot;name&quot;</span>: <span class="string">&quot;astaxie&quot;</span>,</span><br><span class="line">&#125;)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Affected Num: %s, %s&quot;</span>, num, err)</span><br><span class="line"><span class="comment">// SET name = &quot;astaixe&quot; WHERE name = &quot;slene&quot;</span></span><br></pre></td></tr></table></figure>

<p>åŸå­æ“ä½œå¢åŠ å­—æ®µå€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ user struct é‡Œæœ‰ä¸€ä¸ª nums int å­—æ®µ</span></span><br><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Update(orm.Params&#123;</span><br><span class="line">	<span class="string">&quot;nums&quot;</span>: orm.ColValue(orm.ColAdd, <span class="number">100</span>),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// SET nums = nums + 100</span></span><br></pre></td></tr></table></figure>

<p>orm.ColValue æ”¯æŒä»¥ä¸‹æ“ä½œ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ColAdd      <span class="comment">// åŠ </span></span><br><span class="line">ColMinus    <span class="comment">// å‡</span></span><br><span class="line">ColMultiply <span class="comment">// ä¹˜</span></span><br><span class="line">ColExcept   <span class="comment">// é™¤</span></span><br></pre></td></tr></table></figure>

<h3 id="Delete-1"><a href="#Delete-1" class="headerlink" title="Delete"></a>Delete</h3><p>ä¾æ®å½“å‰æŸ¥è¯¢æ¡ä»¶ï¼Œè¿›è¡Œæ‰¹é‡åˆ é™¤æ“ä½œ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Filter(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;slene&quot;</span>).Delete()</span><br><span class="line">fmt.Printf(<span class="string">&quot;Affected Num: %s, %s&quot;</span>, num, err)</span><br><span class="line"><span class="comment">// DELETE FROM user WHERE name = &quot;slene&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="PrepareInsert"><a href="#PrepareInsert" class="headerlink" title="PrepareInsert"></a>PrepareInsert</h3><p>ç”¨äºä¸€æ¬¡ prepare å¤šæ¬¡ insert æ’å…¥ï¼Œä»¥æé«˜æ‰¹é‡æ’å…¥çš„é€Ÿåº¦ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> users []*User</span><br><span class="line">...</span><br><span class="line">qs := o.QueryTable(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">i, _ := qs.PrepareInsert()</span><br><span class="line"><span class="keyword">for</span> _, user := <span class="keyword">range</span> users &#123;</span><br><span class="line">	id, err := i.Insert(user)</span><br><span class="line">	<span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// PREPARE INSERT INTO user (`name`, ...) VALUES (?, ...)</span></span><br><span class="line"><span class="comment">// EXECUTE INSERT INTO user (`name`, ...) VALUES (&quot;slene&quot;, ...)</span></span><br><span class="line"><span class="comment">// EXECUTE ...</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">i.Close() <span class="comment">// åˆ«å¿˜è®°å…³é—­ statement</span></span><br></pre></td></tr></table></figure>

<h3 id="All"><a href="#All" class="headerlink" title="All"></a>All</h3><p>è¿”å›å¯¹åº”çš„ç»“æœé›†å¯¹è±¡</p>
<p>All çš„å‚æ•°æ”¯æŒ *[]Type å’Œ *[]*Type ä¸¤ç§å½¢å¼çš„ slice</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> users []*User</span><br><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Filter(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;slene&quot;</span>).All(&amp;users)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Returned Rows Num: %s, %s&quot;</span>, num, err)</span><br></pre></td></tr></table></figure>

<p>All &#x2F; Values &#x2F; ValuesList &#x2F; ValuesFlat å—åˆ° <a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#limit">Limit</a> çš„é™åˆ¶ï¼Œé»˜è®¤æœ€å¤§è¡Œæ•°ä¸º 1000</p>
<p>å¯ä»¥æŒ‡å®šè¿”å›çš„å­—æ®µï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id      <span class="type">int</span></span><br><span class="line">	Title   <span class="type">string</span></span><br><span class="line">	Content <span class="type">string</span></span><br><span class="line">	Status  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åªè¿”å› Id å’Œ Title</span></span><br><span class="line"><span class="keyword">var</span> posts []Post</span><br><span class="line">o.QueryTable(<span class="string">&quot;post&quot;</span>).Filter(<span class="string">&quot;Status&quot;</span>, <span class="number">1</span>).All(&amp;posts, <span class="string">&quot;Id&quot;</span>, <span class="string">&quot;Title&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å¯¹è±¡çš„å…¶ä»–å­—æ®µå€¼å°†ä¼šæ˜¯å¯¹åº”ç±»å‹çš„é»˜è®¤å€¼</p>
<h3 id="One"><a href="#One" class="headerlink" title="One"></a>One</h3><p>å°è¯•è¿”å›å•æ¡è®°å½•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> user User</span><br><span class="line">err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Filter(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;slene&quot;</span>).One(&amp;user)</span><br><span class="line"><span class="keyword">if</span> err == orm.ErrMultiRows &#123;</span><br><span class="line">	<span class="comment">// å¤šæ¡çš„æ—¶å€™æŠ¥é”™</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;Returned Multi Rows Not One&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err == orm.ErrNoRows &#123;</span><br><span class="line">	<span class="comment">// æ²¡æœ‰æ‰¾åˆ°è®°å½•</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;Not row found&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æŒ‡å®šè¿”å›çš„å­—æ®µï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åªè¿”å› Id å’Œ Title</span></span><br><span class="line"><span class="keyword">var</span> post Post</span><br><span class="line">o.QueryTable(<span class="string">&quot;post&quot;</span>).Filter(<span class="string">&quot;Content__istartswith&quot;</span>, <span class="string">&quot;prefix string&quot;</span>).One(&amp;post, <span class="string">&quot;Id&quot;</span>, <span class="string">&quot;Title&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å¯¹è±¡çš„å…¶ä»–å­—æ®µå€¼å°†ä¼šæ˜¯å¯¹åº”ç±»å‹çš„é»˜è®¤å€¼</p>
<h3 id="Values"><a href="#Values" class="headerlink" title="Values"></a>Values</h3><p>è¿”å›ç»“æœé›†çš„ key &#x3D;&gt; value å€¼</p>
<p>key ä¸ºModelé‡Œçš„Field name, valueçš„å€¼æ˜¯interface{}ç±»å‹,ä¾‹å¦‚ï¼Œå¦‚æœä½ è¦å°†valueèµ‹å€¼ç»™structä¸­çš„æŸå­—æ®µï¼Œéœ€è¦æ ¹æ®ç»“æ„ä½“å¯¹åº”å­—æ®µç±»å‹ä½¿ç”¨<a href="https://golang.org/ref/spec#Type_assertions">æ–­è¨€</a>è·å–çœŸå®å€¼ã€‚ä¸¾ä¾‹:<code>Name : m[&quot;Name&quot;].(string)</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maps []orm.Params</span><br><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Values(&amp;maps)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Result Nums: %d\n&quot;</span>, num)</span><br><span class="line">	<span class="keyword">for</span> _, m := <span class="keyword">range</span> maps &#123;</span><br><span class="line">		fmt.Println(m[<span class="string">&quot;Id&quot;</span>], m[<span class="string">&quot;Name&quot;</span>])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿”å›æŒ‡å®šçš„ Field æ•°æ®</p>
<p><strong>TODO</strong>: æš‚ä¸æ”¯æŒçº§è”æŸ¥è¯¢ <strong>RelatedSel</strong> ç›´æ¥è¿”å› Values</p>
<p>ä½†å¯ä»¥ç›´æ¥æŒ‡å®š expr çº§è”è¿”å›éœ€è¦çš„æ•°æ®</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maps []orm.Params</span><br><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Values(&amp;maps, <span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;profile&quot;</span>, <span class="string">&quot;profile__age&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Result Nums: %d\n&quot;</span>, num)</span><br><span class="line">	<span class="keyword">for</span> _, m := <span class="keyword">range</span> maps &#123;</span><br><span class="line">		fmt.Println(m[<span class="string">&quot;Id&quot;</span>], m[<span class="string">&quot;Name&quot;</span>], m[<span class="string">&quot;Profile&quot;</span>], m[<span class="string">&quot;Profile__Age&quot;</span>])</span><br><span class="line">		<span class="comment">// map ä¸­çš„æ•°æ®éƒ½æ˜¯å±•å¼€çš„ï¼Œæ²¡æœ‰å¤æ‚çš„åµŒå¥—</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ValuesList"><a href="#ValuesList" class="headerlink" title="ValuesList"></a>ValuesList</h3><p>é¡¾åæ€ä¹‰ï¼Œè¿”å›çš„ç»“æœé›†ä»¥sliceå­˜å‚¨</p>
<p>ç»“æœçš„æ’åˆ—ä¸ Model ä¸­å®šä¹‰çš„ Field é¡ºåºä¸€è‡´</p>
<p>è¿”å›çš„æ¯ä¸ªå…ƒç´ å€¼ä»¥ string ä¿å­˜</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lists []orm.ParamsList</span><br><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).ValuesList(&amp;lists)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Result Nums: %d\n&quot;</span>, num)</span><br><span class="line">	<span class="keyword">for</span> _, row := <span class="keyword">range</span> lists &#123;</span><br><span class="line">		fmt.Println(row)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®š expr è¿”å›æŒ‡å®šçš„ Field</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lists []orm.ParamsList</span><br><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).ValuesList(&amp;lists, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;profile__age&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Result Nums: %d\n&quot;</span>, num)</span><br><span class="line">	<span class="keyword">for</span> _, row := <span class="keyword">range</span> lists &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Name: %s, Age: %s\m&quot;</span>, row[<span class="number">0</span>], row[<span class="number">1</span>])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ValuesFlat"><a href="#ValuesFlat" class="headerlink" title="ValuesFlat"></a>ValuesFlat</h3><p>åªè¿”å›ç‰¹å®šçš„ Field å€¼ï¼Œå°†ç»“æœé›†å±•å¼€åˆ°å•ä¸ª slice é‡Œ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> list orm.ParamsList</span><br><span class="line">num, err := o.QueryTable(<span class="string">&quot;user&quot;</span>).ValuesFlat(&amp;list, <span class="string">&quot;name&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Result Nums: %d\n&quot;</span>, num)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;All User Names: %s&quot;</span>, strings.Join(list, <span class="string">&quot;, &quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å…³ç³»æŸ¥è¯¢"><a href="#å…³ç³»æŸ¥è¯¢" class="headerlink" title="å…³ç³»æŸ¥è¯¢"></a>å…³ç³»æŸ¥è¯¢</h3><h4 id="User-å’Œ-Profile-æ˜¯-OneToOne-çš„å…³ç³»"><a href="#User-å’Œ-Profile-æ˜¯-OneToOne-çš„å…³ç³»" class="headerlink" title="User å’Œ Profile æ˜¯ OneToOne çš„å…³ç³»"></a>User å’Œ Profile æ˜¯ OneToOne çš„å…³ç³»</h4><p>å·²ç»å–å¾—äº† User å¯¹è±¡ï¼ŒæŸ¥è¯¢ Profileï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">user := &amp;User&#123;Id: <span class="number">1</span>&#125;</span><br><span class="line">o.Read(user)</span><br><span class="line"><span class="keyword">if</span> user.Profile != <span class="literal">nil</span> &#123;</span><br><span class="line">	o.Read(user.Profile)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥å…³è”æŸ¥è¯¢ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">user := &amp;User&#123;&#125;</span><br><span class="line">o.QueryTable(<span class="string">&quot;user&quot;</span>).Filter(<span class="string">&quot;Id&quot;</span>, <span class="number">1</span>).RelatedSel().One(user)</span><br><span class="line"><span class="comment">// è‡ªåŠ¨æŸ¥è¯¢åˆ° Profile</span></span><br><span class="line">fmt.Println(user.Profile)</span><br><span class="line"><span class="comment">// å› ä¸ºåœ¨ Profile é‡Œå®šä¹‰äº†åå‘å…³ç³»çš„ Userï¼Œæ‰€ä»¥ Profile é‡Œçš„ User ä¹Ÿæ˜¯è‡ªåŠ¨èµ‹å€¼è¿‡çš„ï¼Œå¯ä»¥ç›´æ¥å–ç”¨ã€‚</span></span><br><span class="line">fmt.Println(user.Profile.User)</span><br><span class="line"></span><br><span class="line"><span class="comment">// [SELECT T0.`id`, T0.`name`, T0.`profile_id`, T1.`id`, T1.`age` FROM `user` T0 INNER JOIN `profile` T1 ON T1.`id` = T0.`profile_id` WHERE T0.`id` = ? LIMIT 1000] - `1`</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ User åå‘æŸ¥è¯¢ Profileï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> profile Profile</span><br><span class="line">err := o.QueryTable(<span class="string">&quot;profile&quot;</span>).Filter(<span class="string">&quot;User__Id&quot;</span>, <span class="number">1</span>).One(&amp;profile)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(profile)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Post-å’Œ-User-æ˜¯-ManyToOne-å…³ç³»ï¼Œä¹Ÿå°±æ˜¯-ForeignKey-ä¸º-User"><a href="#Post-å’Œ-User-æ˜¯-ManyToOne-å…³ç³»ï¼Œä¹Ÿå°±æ˜¯-ForeignKey-ä¸º-User" class="headerlink" title="Post å’Œ User æ˜¯ ManyToOne å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ ForeignKey ä¸º User"></a>Post å’Œ User æ˜¯ ManyToOne å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ ForeignKey ä¸º User</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id    <span class="type">int</span></span><br><span class="line">	Title <span class="type">string</span></span><br><span class="line">	User  *User  <span class="string">`orm:&quot;rel(fk)&quot;`</span></span><br><span class="line">	Tags  []*Tag <span class="string">`orm:&quot;rel(m2m)&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> posts []*Post</span><br><span class="line">num, err := o.QueryTable(<span class="string">&quot;post&quot;</span>).Filter(<span class="string">&quot;User&quot;</span>, <span class="number">1</span>).RelatedSel().All(&amp;posts)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%d posts read\n&quot;</span>, num)</span><br><span class="line">	<span class="keyword">for</span> _, post := <span class="keyword">range</span> posts &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Id: %d, UserName: %d, Title: %s\n&quot;</span>, post.Id, post.User.UserName, post.Title)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [SELECT T0.`id`, T0.`title`, T0.`user_id`, T1.`id`, T1.`name`, T1.`profile_id`, T2.`id`, T2.`age` FROM `post` T0 INNER JOIN `user` T1 ON T1.`id` = T0.`user_id` INNER JOIN `profile` T2 ON T2.`id` = T1.`profile_id` WHERE T0.`user_id` = ? LIMIT 1000] - `1`</span></span><br></pre></td></tr></table></figure>

<p>æ ¹æ® Post.Title æŸ¥è¯¢å¯¹åº”çš„ Userï¼š</p>
<p>RegisterModel æ—¶ï¼ŒORM ä¹Ÿä¼šè‡ªåŠ¨å»ºç«‹ User ä¸­ Post çš„åå‘å…³ç³»ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¿›è¡ŒæŸ¥è¯¢</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> user User</span><br><span class="line">err := o.QueryTable(<span class="string">&quot;user&quot;</span>).Filter(<span class="string">&quot;Post__Title&quot;</span>, <span class="string">&quot;The Title&quot;</span>).Limit(<span class="number">1</span>).One(&amp;user)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Printf(user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Post-å’Œ-Tag-æ˜¯-ManyToMany-å…³ç³»"><a href="#Post-å’Œ-Tag-æ˜¯-ManyToMany-å…³ç³»" class="headerlink" title="Post å’Œ Tag æ˜¯ ManyToMany å…³ç³»"></a>Post å’Œ Tag æ˜¯ ManyToMany å…³ç³»</h4><p>è®¾ç½® rel(m2m) ä»¥åï¼ŒORM ä¼šè‡ªåŠ¨åˆ›å»ºä¸­é—´è¡¨</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id    <span class="type">int</span></span><br><span class="line">	Title <span class="type">string</span></span><br><span class="line">	User  *User  <span class="string">`orm:&quot;rel(fk)&quot;`</span></span><br><span class="line">	Tags  []*Tag <span class="string">`orm:&quot;rel(m2m)&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Tag <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id    <span class="type">int</span></span><br><span class="line">	Name  <span class="type">string</span></span><br><span class="line">	Posts []*Post <span class="string">`orm:&quot;reverse(many)&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€æ¡ Post çºªå½•å¯èƒ½å¯¹åº”ä¸åŒçš„ Tag çºªå½•,ä¸€æ¡ Tag çºªå½•å¯èƒ½å¯¹åº”ä¸åŒçš„ Post çºªå½•ï¼Œæ‰€ä»¥ Post å’Œ Tag å±äºå¤šå¯¹å¤šå…³ç³»,é€šè¿‡ tag name æŸ¥è¯¢å“ªäº› post ä½¿ç”¨äº†è¿™ä¸ª tag</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> posts []*Post</span><br><span class="line">num, err := dORM.QueryTable(<span class="string">&quot;post&quot;</span>).Filter(<span class="string">&quot;Tags__Tag__Name&quot;</span>, <span class="string">&quot;golang&quot;</span>).All(&amp;posts)</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ post title æŸ¥è¯¢è¿™ä¸ª post æœ‰å“ªäº› tag</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tags []*Tag</span><br><span class="line">num, err := dORM.QueryTable(<span class="string">&quot;tag&quot;</span>).Filter(<span class="string">&quot;Posts__Post__Title&quot;</span>, <span class="string">&quot;Introduce Beego ORM&quot;</span>).All(&amp;tags)</span><br></pre></td></tr></table></figure>

<h3 id="è½½å…¥å…³ç³»å­—æ®µ"><a href="#è½½å…¥å…³ç³»å­—æ®µ" class="headerlink" title="è½½å…¥å…³ç³»å­—æ®µ"></a>è½½å…¥å…³ç³»å­—æ®µ</h3><p>LoadRelated ç”¨äºè½½å…¥æ¨¡å‹çš„å…³ç³»å­—æ®µï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„ rel&#x2F;reverse - one&#x2F;many å…³ç³»</p>
<p>ManyToMany å…³ç³»å­—æ®µè½½å…¥</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è½½å…¥ç›¸åº”çš„ Tags</span></span><br><span class="line">post := Post&#123;Id: <span class="number">1</span>&#125;</span><br><span class="line">err := o.Read(&amp;post)</span><br><span class="line">num, err := o.LoadRelated(&amp;post, <span class="string">&quot;Tags&quot;</span>)</span><br><span class="line"><span class="comment">// è½½å…¥ç›¸åº”çš„ Posts</span></span><br><span class="line">tag := Tag&#123;Id: <span class="number">1</span>&#125;</span><br><span class="line">err := o.Read(&amp;tag)</span><br><span class="line">num, err := o.LoadRelated(&amp;tag, <span class="string">&quot;Posts&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>User æ˜¯ Post çš„ ForeignKeyï¼Œå¯¹åº”çš„ ReverseMany å…³ç³»å­—æ®µè½½å…¥</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id    <span class="type">int</span></span><br><span class="line">	Name  <span class="type">string</span></span><br><span class="line">	Posts []*Post <span class="string">`orm:&quot;reverse(many)&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">user := User&#123;Id: <span class="number">1</span>&#125;</span><br><span class="line">err := dORM.Read(&amp;user)</span><br><span class="line">num, err := dORM.LoadRelated(&amp;user, <span class="string">&quot;Posts&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> _, post := <span class="keyword">range</span> user.Posts &#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¤šå¯¹å¤šå…³ç³»æ“ä½œ"><a href="#å¤šå¯¹å¤šå…³ç³»æ“ä½œ" class="headerlink" title="å¤šå¯¹å¤šå…³ç³»æ“ä½œ"></a>å¤šå¯¹å¤šå…³ç³»æ“ä½œ</h3><ul>
<li>type QueryM2Mer interface {<ul>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#querym2mer-add">Add(â€¦interface{}) (int64, error)</a></li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#querym2mer-remove">Remove(â€¦interface{}) (int64, error)</a></li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#querym2mer-exist">Exist(interface{}) bool</a></li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#querym2mer-clear">Clear() (int64, error)</a></li>
<li><a href="https://git-books.github.io/books/beego/?p=mvc/model/query.md#querym2mer-count">Count() (int64, error)</a></li>
</ul>
</li>
<li>}</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ª QueryM2Mer å¯¹è±¡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line">post := Post&#123;Id: <span class="number">1</span>&#125;</span><br><span class="line">m2m := o.QueryM2M(&amp;post, <span class="string">&quot;Tags&quot;</span>)</span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°çš„å¯¹è±¡ï¼Œä¸»é”®å¿…é¡»æœ‰å€¼</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯¹è±¡éœ€è¦æ“ä½œçš„ M2M å­—æ®µ</span></span><br><span class="line"><span class="comment">// QueryM2Mer çš„ api å°†ä½œç”¨äº Id ä¸º 1 çš„ Post</span></span><br></pre></td></tr></table></figure>

<h4 id="QueryM2Mer-Add"><a href="#QueryM2Mer-Add" class="headerlink" title="QueryM2Mer Add"></a>QueryM2Mer Add</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">tag := &amp;Tag&#123;Name: <span class="string">&quot;golang&quot;</span>&#125;</span><br><span class="line">o.Insert(tag)</span><br><span class="line"></span><br><span class="line">num, err := m2m.Add(tag)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Added nums: &quot;</span>, num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Add æ”¯æŒå¤šç§ç±»å‹ Tag *Tag []*Tag []Tag []interface{}</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tags []*Tag</span><br><span class="line">...</span><br><span class="line"><span class="comment">// è¯»å– tags ä»¥å</span></span><br><span class="line">...</span><br><span class="line">num, err := m2m.Add(tags)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Added nums: &quot;</span>, num)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥å¤šä¸ªä½œä¸ºå‚æ•°ä¼ å…¥</span></span><br><span class="line"><span class="comment">// m2m.Add(tag1, tag2, tag3)</span></span><br></pre></td></tr></table></figure>

<h4 id="QueryM2Mer-Remove"><a href="#QueryM2Mer-Remove" class="headerlink" title="QueryM2Mer Remove"></a>QueryM2Mer Remove</h4><p>ä»M2Må…³ç³»ä¸­åˆ é™¤ tag</p>
<p>Remove æ”¯æŒå¤šç§ç±»å‹ Tag *Tag []*Tag []Tag []interface{}</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tags []*Tag</span><br><span class="line">...</span><br><span class="line"><span class="comment">// è¯»å– tags ä»¥å</span></span><br><span class="line">...</span><br><span class="line">num, err := m2m.Remove(tags)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Removed nums: &quot;</span>, num)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥å¤šä¸ªä½œä¸ºå‚æ•°ä¼ å…¥</span></span><br><span class="line"><span class="comment">// m2m.Remove(tag1, tag2, tag3)</span></span><br></pre></td></tr></table></figure>

<h4 id="QueryM2Mer-Exist"><a href="#QueryM2Mer-Exist" class="headerlink" title="QueryM2Mer Exist"></a>QueryM2Mer Exist</h4><p>åˆ¤æ–­ Tag æ˜¯å¦å­˜åœ¨äº M2M å…³ç³»ä¸­</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> m2m.Exist(&amp;Tag&#123;Id: <span class="number">2</span>&#125;) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Tag Exist&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="QueryM2Mer-Clear"><a href="#QueryM2Mer-Clear" class="headerlink" title="QueryM2Mer Clear"></a>QueryM2Mer Clear</h4><p>æ¸…é™¤æ‰€æœ‰ M2M å…³ç³»</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">nums, err := m2m.Clear()</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Removed Tag Nums: &quot;</span>, nums)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="QueryM2Mer-Count"><a href="#QueryM2Mer-Count" class="headerlink" title="QueryM2Mer Count"></a>QueryM2Mer Count</h4><p>è®¡ç®— Tag çš„æ•°é‡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">nums, err := m2m.Count()</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Total Nums: &quot;</span>, nums)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŸç”Ÿ-SQL-æŸ¥è¯¢"><a href="#åŸç”Ÿ-SQL-æŸ¥è¯¢" class="headerlink" title="åŸç”Ÿ SQL æŸ¥è¯¢"></a>åŸç”Ÿ SQL æŸ¥è¯¢</h2><ul>
<li>ä½¿ç”¨ Raw SQL æŸ¥è¯¢ï¼Œæ— éœ€ä½¿ç”¨ ORM è¡¨å®šä¹‰</li>
<li>å¤šæ•°æ®åº“ï¼Œéƒ½å¯ç›´æ¥ä½¿ç”¨å ä½ç¬¦å· <code>?</code>ï¼Œè‡ªåŠ¨è½¬æ¢</li>
<li>æŸ¥è¯¢æ—¶çš„å‚æ•°ï¼Œæ”¯æŒä½¿ç”¨ Model Struct å’Œ Slice, Array</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line">ids := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">var</span> r RawSter</span><br><span class="line">r = o.Raw(<span class="string">&quot;SELECT name FROM user WHERE id IN (?, ?, ?)&quot;</span>, ids)</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºä¸€ä¸ª <strong>RawSeter</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o := orm.NewOrm()</span><br><span class="line"><span class="keyword">var</span> r RawSeter</span><br><span class="line">r = o.Raw(<span class="string">&quot;UPDATE user SET name = ? WHERE name = ?&quot;</span>, <span class="string">&quot;testing&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Exec"><a href="#Exec" class="headerlink" title="Exec"></a>Exec</h3><p>æ‰§è¡Œ sql è¯­å¥ï¼Œè¿”å› <a href="http://gowalker.org/database/sql#Result">sql.Result</a> å¯¹è±¡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">res, err := o.Raw(<span class="string">&quot;UPDATE user SET name = ?&quot;</span>, <span class="string">&quot;your&quot;</span>).Exec()</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	num, _ := res.RowsAffected()</span><br><span class="line">	fmt.Println(<span class="string">&quot;mysql row affected nums: &quot;</span>, num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="QueryRow"><a href="#QueryRow" class="headerlink" title="QueryRow"></a>QueryRow</h3><p>QueryRow å’Œ QueryRows æä¾›é«˜çº§ sql mapper åŠŸèƒ½</p>
<p>æ”¯æŒ struct</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id       <span class="type">int</span></span><br><span class="line">	UserName <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user User</span><br><span class="line">err := o.Raw(<span class="string">&quot;SELECT id, user_name FROM user WHERE id = ?&quot;</span>, <span class="number">1</span>).QueryRow(&amp;user)</span><br></pre></td></tr></table></figure>

<h3 id="QueryRows"><a href="#QueryRows" class="headerlink" title="QueryRows"></a>QueryRows</h3><p>QueryRows æ”¯æŒçš„å¯¹è±¡è¿˜æœ‰ map è§„åˆ™æ˜¯å’Œ QueryRow ä¸€æ ·çš„ï¼Œä½†éƒ½æ˜¯ slice</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id       <span class="type">int</span></span><br><span class="line">	UserName <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> users []User</span><br><span class="line">num, err := o.Raw(<span class="string">&quot;SELECT id, user_name FROM user WHERE id = ?&quot;</span>, <span class="number">1</span>).QueryRows(&amp;users)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;user nums: &quot;</span>, num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="SetArgs"><a href="#SetArgs" class="headerlink" title="SetArgs"></a>SetArgs</h3><p>æ”¹å˜ Raw(sql, argsâ€¦) ä¸­çš„ args å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ RawSeter</p>
<p>ç”¨äºå•æ¡ sql è¯­å¥ï¼Œé‡å¤åˆ©ç”¨ï¼Œæ›¿æ¢å‚æ•°ç„¶åæ‰§è¡Œã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">res, err := r.SetArgs(<span class="string">&quot;arg1&quot;</span>, <span class="string">&quot;arg2&quot;</span>).Exec()</span><br><span class="line">res, err := r.SetArgs(<span class="string">&quot;arg1&quot;</span>, <span class="string">&quot;arg2&quot;</span>).Exec()</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="Values-ValuesList-ValuesFlat"><a href="#Values-ValuesList-ValuesFlat" class="headerlink" title="Values &#x2F; ValuesList &#x2F; ValuesFlat"></a>Values &#x2F; ValuesList &#x2F; ValuesFlat</h3><p>Raw SQL æŸ¥è¯¢è·å¾—çš„ç»“æœé›† Value ä¸º <code>string</code> ç±»å‹ï¼ŒNULL å­—æ®µçš„å€¼ä¸ºç©º &#96;&#96;</p>
<h3 id="Values-1"><a href="#Values-1" class="headerlink" title="Values"></a>Values</h3><p>è¿”å›ç»“æœé›†çš„ key &#x3D;&gt; value å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maps []orm.Params</span><br><span class="line">num, err := o.Raw(<span class="string">&quot;SELECT user_name FROM user WHERE status = ?&quot;</span>, <span class="number">1</span>).Values(&amp;maps)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &amp;&amp; num &gt; <span class="number">0</span> &#123;</span><br><span class="line">	fmt.Println(maps[<span class="number">0</span>][<span class="string">&quot;user_name&quot;</span>]) <span class="comment">// slene</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ValuesList-1"><a href="#ValuesList-1" class="headerlink" title="ValuesList"></a>ValuesList</h3><p>è¿”å›ç»“æœé›† slice</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lists []orm.ParamsList</span><br><span class="line">num, err := o.Raw(<span class="string">&quot;SELECT user_name FROM user WHERE status = ?&quot;</span>, <span class="number">1</span>).ValuesList(&amp;lists)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &amp;&amp; num &gt; <span class="number">0</span> &#123;</span><br><span class="line">	fmt.Println(lists[<span class="number">0</span>][<span class="number">0</span>]) <span class="comment">// slene</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ValuesFlat-1"><a href="#ValuesFlat-1" class="headerlink" title="ValuesFlat"></a>ValuesFlat</h3><p>è¿”å›å•ä¸€å­—æ®µçš„å¹³é“º slice æ•°æ®</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> list orm.ParamsList</span><br><span class="line">num, err := o.Raw(<span class="string">&quot;SELECT id FROM user WHERE id &lt; ?&quot;</span>, <span class="number">10</span>).ValuesFlat(&amp;list)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &amp;&amp; num &gt; <span class="number">0</span> &#123;</span><br><span class="line">	fmt.Println(list) <span class="comment">// []&#123;&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,...&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RowsToMap"><a href="#RowsToMap" class="headerlink" title="RowsToMap"></a>RowsToMap</h3><p>SQL æŸ¥è¯¢ç»“æœæ˜¯è¿™æ ·</p>
<table>
<thead>
<tr>
<th align="left">name</th>
<th align="left">value</th>
</tr>
</thead>
<tbody><tr>
<td align="left">total</td>
<td align="left">100</td>
</tr>
<tr>
<td align="left">found</td>
<td align="left">200</td>
</tr>
</tbody></table>
<p>æŸ¥è¯¢ç»“æœåŒ¹é…åˆ° map é‡Œ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">res := <span class="built_in">make</span>(orm.Params)</span><br><span class="line">nums, err := o.Raw(<span class="string">&quot;SELECT name, value FROM options_table&quot;</span>).RowsToMap(&amp;res, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;value&quot;</span>)</span><br><span class="line"><span class="comment">// res is a map[string]interface&#123;&#125;&#123;</span></span><br><span class="line"><span class="comment">//	&quot;total&quot;: 100,</span></span><br><span class="line"><span class="comment">//	&quot;found&quot;: 200,</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="RowsToStruct"><a href="#RowsToStruct" class="headerlink" title="RowsToStruct"></a>RowsToStruct</h3><p>SQL æŸ¥è¯¢ç»“æœæ˜¯è¿™æ ·</p>
<table>
<thead>
<tr>
<th align="left">name</th>
<th align="left">value</th>
</tr>
</thead>
<tbody><tr>
<td align="left">total</td>
<td align="left">100</td>
</tr>
<tr>
<td align="left">found</td>
<td align="left">200</td>
</tr>
</tbody></table>
<p>æŸ¥è¯¢ç»“æœåŒ¹é…åˆ° struct é‡Œ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Options <span class="keyword">struct</span> &#123;</span><br><span class="line">	Total <span class="type">int</span></span><br><span class="line">	Found <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">res := <span class="built_in">new</span>(Options)</span><br><span class="line">nums, err := o.Raw(<span class="string">&quot;SELECT name, value FROM options_table&quot;</span>).RowsToStruct(res, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;value&quot;</span>)</span><br><span class="line">fmt.Println(res.Total) <span class="comment">// 100</span></span><br><span class="line">fmt.Println(res.Found) <span class="comment">// 200</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>åŒ¹é…æ”¯æŒçš„åç§°è½¬æ¢ä¸º snake -&gt; camel, eg: SELECT user_name â€¦ éœ€è¦ä½ çš„ struct ä¸­å®šä¹‰æœ‰ UserName</p>
</blockquote>
<h3 id="Prepare"><a href="#Prepare" class="headerlink" title="Prepare"></a>Prepare</h3><p>ç”¨äºä¸€æ¬¡ prepare å¤šæ¬¡ execï¼Œä»¥æé«˜æ‰¹é‡æ‰§è¡Œçš„é€Ÿåº¦ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">p, err := o.Raw(<span class="string">&quot;UPDATE user SET name = ? WHERE name = ?&quot;</span>).Prepare()</span><br><span class="line">res, err := p.Exec(<span class="string">&quot;testing&quot;</span>, <span class="string">&quot;slene&quot;</span>)</span><br><span class="line">res, err  = p.Exec(<span class="string">&quot;testing&quot;</span>, <span class="string">&quot;astaxie&quot;</span>)</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">p.Close() <span class="comment">// åˆ«å¿˜è®°å…³é—­ statement</span></span><br></pre></td></tr></table></figure>

<h2 id="æ„é€ æŸ¥è¯¢"><a href="#æ„é€ æŸ¥è¯¢" class="headerlink" title="æ„é€ æŸ¥è¯¢"></a>æ„é€ æŸ¥è¯¢</h2><p><strong>QueryBuilder</strong> æä¾›äº†ä¸€ä¸ªç®€ä¾¿ï¼Œæµç•…çš„ SQL æŸ¥è¯¢æ„é€ å™¨ã€‚åœ¨ä¸å½±å“ä»£ç å¯è¯»æ€§çš„å‰æä¸‹ç”¨æ¥å¿«é€Ÿçš„å»ºç«‹ SQL è¯­å¥ã€‚</p>
<p><strong>QueryBuilder</strong> åœ¨åŠŸèƒ½ä¸Šä¸ ORM é‡åˆï¼Œ ä½†æ˜¯å„æœ‰åˆ©å¼Šã€‚ORM æ›´é€‚ç”¨äºç®€å•çš„ CRUD æ“ä½œï¼Œè€Œ QueryBuilder åˆ™æ›´é€‚ç”¨äºå¤æ‚çš„æŸ¥è¯¢ï¼Œä¾‹å¦‚æŸ¥è¯¢ä¸­åŒ…å«å­æŸ¥è¯¢å’Œå¤šé‡è”ç»“ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// User åŒ…è£…äº†ä¸‹é¢çš„æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> users []User</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å– QueryBuilder å¯¹è±¡. éœ€è¦æŒ‡å®šæ•°æ®åº“é©±åŠ¨å‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªè¿”å›å€¼æ˜¯é”™è¯¯å¯¹è±¡ï¼Œåœ¨è¿™é‡Œç•¥è¿‡</span></span><br><span class="line">qb, _ := orm.NewQueryBuilder(<span class="string">&quot;mysql&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„å»ºæŸ¥è¯¢å¯¹è±¡</span></span><br><span class="line">qb.Select(<span class="string">&quot;user.name&quot;</span>,</span><br><span class="line">	<span class="string">&quot;profile.age&quot;</span>).</span><br><span class="line">	From(<span class="string">&quot;user&quot;</span>).</span><br><span class="line">	InnerJoin(<span class="string">&quot;profile&quot;</span>).On(<span class="string">&quot;user.id_user = profile.fk_user&quot;</span>).</span><br><span class="line">	Where(<span class="string">&quot;age &gt; ?&quot;</span>).</span><br><span class="line">	OrderBy(<span class="string">&quot;name&quot;</span>).Desc().</span><br><span class="line">	Limit(<span class="number">10</span>).Offset(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡º SQL è¯­å¥</span></span><br><span class="line">sql := qb.String()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ SQL è¯­å¥</span></span><br><span class="line">o := orm.NewOrm()</span><br><span class="line">o.Raw(sql, <span class="number">20</span>).QueryRows(&amp;users)</span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡å‹å®šä¹‰"><a href="#æ¨¡å‹å®šä¹‰" class="headerlink" title="æ¨¡å‹å®šä¹‰"></a>æ¨¡å‹å®šä¹‰</h2><p>å¤æ‚çš„æ¨¡å‹å®šä¹‰ä¸æ˜¯å¿…é¡»çš„ï¼Œæ­¤åŠŸèƒ½ç”¨ä½œæ•°æ®åº“æ•°æ®è½¬æ¢å’Œ<a href="https://git-books.github.io/books/beego/cmd.md#%E8%87%AA%E5%8A%A8%E5%BB%BA%E8%A1%A8">è‡ªåŠ¨å»ºè¡¨</a></p>
<p>é»˜è®¤çš„è¡¨åè§„åˆ™ï¼Œä½¿ç”¨é©¼å³°è½¬è›‡å½¢ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AuthUser -&gt; auth_user</span><br><span class="line">Auth_User -&gt; auth__user</span><br><span class="line">DB_AuthUser -&gt; d_b__auth_user</span><br></pre></td></tr></table></figure>

<p>é™¤äº†å¼€å¤´çš„å¤§å†™å­—æ¯ä»¥å¤–ï¼Œé‡åˆ°å¤§å†™ä¼šå¢åŠ  <code>_</code>ï¼ŒåŸåç§°ä¸­çš„ä¸‹åˆ’çº¿ä¿ç•™ã€‚</p>
<h3 id="è‡ªå®šä¹‰è¡¨å"><a href="#è‡ªå®šä¹‰è¡¨å" class="headerlink" title="è‡ªå®šä¹‰è¡¨å"></a>è‡ªå®šä¹‰è¡¨å</h3><p>å®ç°æ¥å£<code>TableNameI</code>:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id <span class="type">int</span></span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *User)</span></span> TableName() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;auth_user&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ<a href="https://git-books.github.io/books/beego/orm.md#registermodelwithprefix">å‰ç¼€è®¾ç½®</a>ä¸º <code>prefix_</code> é‚£ä¹ˆè¡¨åä¸ºï¼šprefix_auth_user</p>
<h3 id="è®¾ç½®å‚æ•°"><a href="#è®¾ç½®å‚æ•°" class="headerlink" title="è®¾ç½®å‚æ•°"></a>è®¾ç½®å‚æ•°</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">orm:<span class="string">&quot;null;rel(fk)&quot;</span></span><br></pre></td></tr></table></figure>

<p>å¤šä¸ªè®¾ç½®é—´ä½¿ç”¨ <code>;</code> åˆ†éš”ï¼Œè®¾ç½®çš„å€¼å¦‚æœæ˜¯å¤šä¸ªï¼Œä½¿ç”¨ <code>,</code> åˆ†éš”ã€‚</p>
<h4 id="å¿½ç•¥å­—æ®µ"><a href="#å¿½ç•¥å­—æ®µ" class="headerlink" title="å¿½ç•¥å­—æ®µ"></a>å¿½ç•¥å­—æ®µ</h4><p>è®¾ç½® <code>-</code> å³å¯å¿½ç•¥ struct ä¸­çš„å­—æ®µ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">	AnyField <span class="type">string</span> <span class="string">`orm:&quot;-&quot;`</span></span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="auto"><a href="#auto" class="headerlink" title="auto"></a>auto</h4><p>å½“ Field ç±»å‹ä¸º int, int32, int64, uint, uint32, uint64 æ—¶ï¼Œå¯ä»¥è®¾ç½®å­—æ®µä¸ºè‡ªå¢å¥</p>
<ul>
<li>å½“æ¨¡å‹å®šä¹‰é‡Œæ²¡æœ‰ä¸»é”®æ—¶ï¼Œç¬¦åˆä¸Šè¿°ç±»å‹ä¸”åç§°ä¸º <code>Id</code> çš„ Field å°†è¢«è§†ä¸ºè‡ªå¢å¥ã€‚</li>
</ul>
<p>é‰´äº go ç›®å‰çš„è®¾è®¡ï¼Œå³ä½¿ä½¿ç”¨äº† uint64ï¼Œä½†ä½ ä¹Ÿä¸èƒ½å­˜å‚¨åˆ°ä»–çš„æœ€å¤§å€¼ã€‚ä¾ç„¶ä¼šä½œä¸º int64 å¤„ç†ã€‚</p>
<h4 id="pk"><a href="#pk" class="headerlink" title="pk"></a>pk</h4><p>è®¾ç½®ä¸ºä¸»é”®ï¼Œé€‚ç”¨äºè‡ªå®šä¹‰å…¶ä»–ç±»å‹ä¸ºä¸»é”®</p>
<h4 id="null"><a href="#null" class="headerlink" title="null"></a>null</h4><p>æ•°æ®åº“è¡¨é»˜è®¤ä¸º <code>NOT NULL</code>ï¼Œè®¾ç½® null ä»£è¡¨ <code>ALLOW NULL</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Name <span class="type">string</span> <span class="string">`orm:&quot;null&quot;`</span></span><br></pre></td></tr></table></figure>

<h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><p>ä¸ºå•ä¸ªå­—æ®µå¢åŠ ç´¢å¼•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Name <span class="type">string</span> <span class="string">`orm:&quot;index&quot;`</span></span><br></pre></td></tr></table></figure>

<h4 id="unique"><a href="#unique" class="headerlink" title="unique"></a>unique</h4><p>ä¸ºå•ä¸ªå­—æ®µå¢åŠ  unique é”®</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Name <span class="type">string</span> <span class="string">`orm:&quot;unique&quot;`</span></span><br></pre></td></tr></table></figure>

<h4 id="column"><a href="#column" class="headerlink" title="column"></a>column</h4><p>ä¸ºå­—æ®µè®¾ç½® db å­—æ®µçš„åç§°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Name <span class="type">string</span> <span class="string">`orm:&quot;column(user_name)&quot;`</span></span><br></pre></td></tr></table></figure>

<h4 id="size"><a href="#size" class="headerlink" title="size"></a>size</h4><p>string ç±»å‹å­—æ®µé»˜è®¤ä¸º varchar(255)</p>
<p>è®¾ç½® size ä»¥åï¼Œdb type å°†ä½¿ç”¨ varchar(size)</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Title <span class="type">string</span> <span class="string">`orm:&quot;size(60)&quot;`</span></span><br></pre></td></tr></table></figure>

<h4 id="digits-decimals"><a href="#digits-decimals" class="headerlink" title="digits &#x2F; decimals"></a>digits &#x2F; decimals</h4><p>è®¾ç½® float32, float64 ç±»å‹çš„æµ®ç‚¹ç²¾åº¦</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Money <span class="type">float64</span> <span class="string">`orm:&quot;digits(12);decimals(4)&quot;`</span></span><br></pre></td></tr></table></figure>

<p>æ€»é•¿åº¦ 12 å°æ•°ç‚¹å 4 ä½ eg: <code>99999999.9999</code></p>
<h4 id="auto-now-auto-now-add"><a href="#auto-now-auto-now-add" class="headerlink" title="auto_now &#x2F; auto_now_add"></a>auto_now &#x2F; auto_now_add</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Created time.Time <span class="string">`orm:&quot;auto_now_add;type(datetime)&quot;`</span></span><br><span class="line">Updated time.Time <span class="string">`orm:&quot;auto_now;type(datetime)&quot;`</span></span><br></pre></td></tr></table></figure>

<ul>
<li>auto_now æ¯æ¬¡ model ä¿å­˜æ—¶éƒ½ä¼šå¯¹æ—¶é—´è‡ªåŠ¨æ›´æ–°</li>
<li>auto_now_add ç¬¬ä¸€æ¬¡ä¿å­˜æ—¶æ‰è®¾ç½®æ—¶é—´</li>
</ul>
<p>å¯¹äºæ‰¹é‡çš„ update æ­¤è®¾ç½®æ˜¯ä¸ç”Ÿæ•ˆçš„</p>
<h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><p>è®¾ç½®ä¸º date æ—¶ï¼Œtime.Time å­—æ®µçš„å¯¹åº” db ç±»å‹ä½¿ç”¨ date</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Created time.Time <span class="string">`orm:&quot;auto_now_add;type(date)&quot;`</span></span><br></pre></td></tr></table></figure>

<p>è®¾ç½®ä¸º datetime æ—¶ï¼Œtime.Time å­—æ®µçš„å¯¹åº” db ç±»å‹ä½¿ç”¨ datetime</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Created time.Time <span class="string">`orm:&quot;auto_now_add;type(datetime)&quot;`</span></span><br></pre></td></tr></table></figure>

<h4 id="default"><a href="#default" class="headerlink" title="default"></a>default</h4><p>åœ¨ v2.x é‡Œé¢ï¼Œæˆ‘ä»¬æä¾›äº†é»˜è®¤å€¼çš„Filter:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;github.com/beego/beego/v2/client/orm/filter/bean&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/beego/beego/v2/client/orm&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DefaultValueTestEntity <span class="keyword">struct</span> &#123;</span><br><span class="line">Id            <span class="type">int</span></span><br><span class="line">Age           <span class="type">int</span> <span class="string">`default:&quot;12&quot;`</span></span><br><span class="line">AgeInOldStyle <span class="type">int</span> <span class="string">`orm:&quot;default(13);bee()&quot;`</span></span><br><span class="line">AgeIgnore     <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">XXX</span><span class="params">()</span></span> &#123;</span><br><span class="line">    builder := bean.NewDefaultValueFilterChainBuilder(<span class="literal">nil</span>, <span class="literal">true</span>, <span class="literal">true</span>)</span><br><span class="line">    orm.AddGlobalFilterChain(builder.FilterChain)</span><br><span class="line">    o := orm.NewOrm()</span><br><span class="line">    _, _ = o.Insert(&amp;User&#123;</span><br><span class="line">        ID: <span class="number">1</span>,</span><br><span class="line">        Name: <span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¸€ä¸ªå¾ˆé‡è¦çš„è®¤è¯†ï¼Œæ˜¯è®¤ä¸ºæ˜¾å¼è®¾ç½®å€¼æ‰æ˜¯æ›´åŠ ä¼˜é›…çš„å®è·µï¼Œæ‰€ä»¥æˆ‘ä»¬å°†é»˜è®¤å€¼çš„åŠŸèƒ½åšæˆäº†ä¸€ç§å¯é€‰çš„<code>filter</code>å®ç°ã€‚</p>
<h4 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h4><p>ä¸ºå­—æ®µæ·»åŠ æ³¨é‡Š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	Status <span class="type">int</span> <span class="string">`orm:&quot;default(1);description(è¿™æ˜¯çŠ¶æ€å­—æ®µ)&quot;`</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„: æ³¨é‡Šä¸­ç¦æ­¢åŒ…å«å¼•å·</p>
<h4 id="Precision"><a href="#Precision" class="headerlink" title="Precision"></a>Precision</h4><p>ä¸º<code>datetime</code>å­—æ®µè®¾ç½®ç²¾åº¦å€¼ä½æ•°ï¼Œä¸åŒDBæ”¯æŒæœ€å¤§ç²¾åº¦å€¼ä½æ•°ä¹Ÿä¸ä¸€è‡´ã€‚</p>
<p>type User struct {<br>â€¦<br>Created time.Time <code>orm:&quot;type(datetime);precision(4)&quot;</code><br>â€¦<br>}</p>
<h3 id="è¡¨å…³ç³»è®¾ç½®"><a href="#è¡¨å…³ç³»è®¾ç½®" class="headerlink" title="è¡¨å…³ç³»è®¾ç½®"></a>è¡¨å…³ç³»è®¾ç½®</h3><h4 id="rel-reverse"><a href="#rel-reverse" class="headerlink" title="rel &#x2F; reverse"></a>rel &#x2F; reverse</h4><p><strong>RelOneToOne</strong>:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	Profile *Profile <span class="string">`orm:&quot;null;rel(one);on_delete(set_null)&quot;`</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹åº”çš„åå‘å…³ç³» <strong>RelReverseOne</strong>:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Profile <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	User *User <span class="string">`orm:&quot;reverse(one)&quot;`</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>RelForeignKey</strong>:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	User *User <span class="string">`orm:&quot;rel(fk)&quot;`</span> <span class="comment">// RelForeignKey relation</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹åº”çš„åå‘å…³ç³» <strong>RelReverseMany</strong>:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	Posts []*Post <span class="string">`orm:&quot;reverse(many)&quot;`</span> <span class="comment">// fk çš„åå‘å…³ç³»</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>RelManyToMany</strong>:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	Tags []*Tag <span class="string">`orm:&quot;rel(m2m)&quot;`</span> <span class="comment">// ManyToMany relation</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹åº”çš„åå‘å…³ç³» <strong>RelReverseMany</strong>:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Tag <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	Posts []*Post <span class="string">`orm:&quot;reverse(many)&quot;`</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="rel-table-rel-through"><a href="#rel-table-rel-through" class="headerlink" title="rel_table &#x2F; rel_through"></a>rel_table &#x2F; rel_through</h4><p>æ­¤è®¾ç½®é’ˆå¯¹ <code>orm:&quot;rel(m2m)&quot;</code> çš„å…³ç³»å­—æ®µ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rel_table       è®¾ç½®è‡ªåŠ¨ç”Ÿæˆçš„ m2m å…³ç³»è¡¨çš„åç§°</span><br><span class="line">rel_through     å¦‚æœè¦åœ¨ m2m å…³ç³»ä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„ m2m å…³ç³»è¡¨</span><br><span class="line">                é€šè¿‡è¿™ä¸ªè®¾ç½®å…¶åç§°ï¼Œæ ¼å¼ä¸º pkg.path.ModelName</span><br><span class="line">                eg: app.models.PostTagRel</span><br><span class="line">                PostTagRel è¡¨éœ€è¦æœ‰åˆ° Post å’Œ Tag çš„å…³ç³»</span><br></pre></td></tr></table></figure>

<p>å½“è®¾ç½® rel_table æ—¶ä¼šå¿½ç•¥ rel_through</p>
<p>è®¾ç½®æ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">orm:<span class="string">&quot;rel(m2m);rel_table(the_table_name)&quot;</span></span><br><span class="line">orm:<span class="string">&quot;rel(m2m);rel_through(pkg.path.ModelName)&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="on-delete"><a href="#on-delete" class="headerlink" title="on_delete"></a>on_delete</h4><p>è®¾ç½®å¯¹åº”çš„ rel å…³ç³»åˆ é™¤æ—¶ï¼Œå¦‚ä½•å¤„ç†å…³ç³»å­—æ®µã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">cascade        çº§è”åˆ é™¤(é»˜è®¤å€¼)</span><br><span class="line">set_null       è®¾ç½®ä¸º NULLï¼Œéœ€è¦è®¾ç½® null = <span class="literal">true</span></span><br><span class="line">set_default    è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œéœ€è¦è®¾ç½® <span class="keyword">default</span> å€¼</span><br><span class="line">do_nothing     ä»€ä¹ˆä¹Ÿä¸åšï¼Œå¿½ç•¥</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	Profile *Profile <span class="string">`orm:&quot;null;rel(one);on_delete(set_null)&quot;`</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Profile <span class="keyword">struct</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	User *User <span class="string">`orm:&quot;reverse(one)&quot;`</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ Profile æ—¶å°†è®¾ç½® User.Profile çš„æ•°æ®åº“å­—æ®µä¸º NULL</span></span><br></pre></td></tr></table></figure>

<h4 id="å…³äº-on-delete-çš„ç›¸å…³ä¾‹å­"><a href="#å…³äº-on-delete-çš„ç›¸å…³ä¾‹å­" class="headerlink" title="å…³äº on_delete çš„ç›¸å…³ä¾‹å­"></a>å…³äº on_delete çš„ç›¸å…³ä¾‹å­</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    Id <span class="type">int</span></span><br><span class="line">    Name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">    Id <span class="type">int</span></span><br><span class="line">    Title <span class="type">string</span></span><br><span class="line">    User *User <span class="string">`orm:&quot;rel(fk)&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡è®¾ Post -&gt; User æ˜¯ ManyToOne çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯å¤–é”®ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">o.Filter(<span class="string">&quot;Id&quot;</span>, <span class="number">1</span>).Delete()</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™å³ä¼šåˆ é™¤ Id ä¸º 1 çš„ User ä¹Ÿä¼šåˆ é™¤å…¶å‘å¸ƒçš„ Post</p>
<p>ä¸æƒ³åˆ é™¤çš„è¯ï¼Œéœ€è¦è®¾ç½® set_null</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">    Id <span class="type">int</span></span><br><span class="line">    Title <span class="type">string</span></span><br><span class="line">    User *User <span class="string">`orm:&quot;rel(fk);null;on_delete(set_null)&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£è¿™ä¸ªæ—¶å€™ï¼Œåˆ é™¤ User åªä¼šæŠŠå¯¹åº”çš„ Post.user_id è®¾ç½®ä¸º NULL</p>
<p>å½“ç„¶æœ‰æ—¶å€™ä¸ºäº†é«˜æ€§èƒ½çš„éœ€è¦ï¼Œå¤šå­˜ç‚¹æ•°æ®æ— æ‰€è°“å•Šï¼Œé€ æˆæ‰¹é‡åˆ é™¤æ‰æ˜¯é—®é¢˜ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">    Id <span class="type">int</span></span><br><span class="line">    Title <span class="type">string</span></span><br><span class="line">    User *User <span class="string">`orm:&quot;rel(fk);null;on_delete(do_nothing)&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆåªè¦åˆ é™¤çš„æ—¶å€™ï¼Œä¸æ“ä½œ Post å°±å¯ä»¥äº†ã€‚</p>
<h3 id="æ¨¡å‹å­—æ®µä¸æ•°æ®åº“ç±»å‹çš„å¯¹åº”"><a href="#æ¨¡å‹å­—æ®µä¸æ•°æ®åº“ç±»å‹çš„å¯¹åº”" class="headerlink" title="æ¨¡å‹å­—æ®µä¸æ•°æ®åº“ç±»å‹çš„å¯¹åº”"></a>æ¨¡å‹å­—æ®µä¸æ•°æ®åº“ç±»å‹çš„å¯¹åº”</h3><p>åœ¨æ­¤åˆ—å‡º ORM æ¨èçš„å¯¹åº”æ•°æ®åº“ç±»å‹ï¼Œè‡ªåŠ¨å»ºè¡¨åŠŸèƒ½ä¹Ÿä¼šä»¥æ­¤ä¸ºæ ‡å‡†ã€‚</p>
<p>é»˜è®¤æ‰€æœ‰çš„å­—æ®µéƒ½æ˜¯ <strong>NOT NULL</strong></p>
<h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><table>
<thead>
<tr>
<th align="left">go</th>
<th align="left">mysql</th>
</tr>
</thead>
<tbody><tr>
<td align="left">int, int32 - è®¾ç½® auto æˆ–è€…åç§°ä¸º <code>Id</code> æ—¶</td>
<td align="left">integer AUTO_INCREMENT</td>
</tr>
<tr>
<td align="left">int64 - è®¾ç½® auto æˆ–è€…åç§°ä¸º <code>Id</code> æ—¶</td>
<td align="left">bigint AUTO_INCREMENT</td>
</tr>
<tr>
<td align="left">uint, uint32 - è®¾ç½® auto æˆ–è€…åç§°ä¸º <code>Id</code> æ—¶</td>
<td align="left">integer unsigned AUTO_INCREMENT</td>
</tr>
<tr>
<td align="left">uint64 - è®¾ç½® auto æˆ–è€…åç§°ä¸º <code>Id</code> æ—¶</td>
<td align="left">bigint unsigned AUTO_INCREMENT</td>
</tr>
<tr>
<td align="left">bool</td>
<td align="left">bool</td>
</tr>
<tr>
<td align="left">string - é»˜è®¤ä¸º size 255</td>
<td align="left">varchar(size)</td>
</tr>
<tr>
<td align="left">string - è®¾ç½® type(char) æ—¶</td>
<td align="left">char(size)</td>
</tr>
<tr>
<td align="left">string - è®¾ç½® type(text) æ—¶</td>
<td align="left">longtext</td>
</tr>
<tr>
<td align="left">time.Time - è®¾ç½® type ä¸º date æ—¶</td>
<td align="left">date</td>
</tr>
<tr>
<td align="left">time.Time</td>
<td align="left">datetime</td>
</tr>
<tr>
<td align="left">byte</td>
<td align="left">tinyint unsigned</td>
</tr>
<tr>
<td align="left">rune</td>
<td align="left">integer</td>
</tr>
<tr>
<td align="left">int</td>
<td align="left">integer</td>
</tr>
<tr>
<td align="left">int8</td>
<td align="left">tinyint</td>
</tr>
<tr>
<td align="left">int16</td>
<td align="left">smallint</td>
</tr>
<tr>
<td align="left">int32</td>
<td align="left">integer</td>
</tr>
<tr>
<td align="left">int64</td>
<td align="left">bigint</td>
</tr>
<tr>
<td align="left">uint</td>
<td align="left">integer unsigned</td>
</tr>
<tr>
<td align="left">uint8</td>
<td align="left">tinyint unsigned</td>
</tr>
<tr>
<td align="left">uint16</td>
<td align="left">smallint unsigned</td>
</tr>
<tr>
<td align="left">uint32</td>
<td align="left">integer unsigned</td>
</tr>
<tr>
<td align="left">uint64</td>
<td align="left">bigint unsigned</td>
</tr>
<tr>
<td align="left">float32</td>
<td align="left">double precision</td>
</tr>
<tr>
<td align="left">float64</td>
<td align="left">double precision</td>
</tr>
<tr>
<td align="left">float64 - è®¾ç½® digits, decimals æ—¶</td>
<td align="left">numeric(digits, decimals)</td>
</tr>
</tbody></table>
<h3 id="å…³ç³»å‹å­—æ®µ"><a href="#å…³ç³»å‹å­—æ®µ" class="headerlink" title="å…³ç³»å‹å­—æ®µ"></a>å…³ç³»å‹å­—æ®µ</h3><p>å…¶å­—æ®µç±»å‹å–å†³äºå¯¹åº”çš„ä¸»é”®ã€‚</p>
<ul>
<li>RelForeignKey</li>
<li>RelOneToOne</li>
<li>RelManyToMany</li>
<li>RelReverseOne</li>
<li>RelReverseMany</li>
</ul>
<h2 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h2><p>æ³¨å†Œæ¨¡å‹ä¸æ•°æ®åº“ä»¥åï¼Œè°ƒç”¨ RunCommand æ‰§è¡Œ orm å‘½ä»¤ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// orm.RegisterModel...</span></span><br><span class="line">	<span class="comment">// orm.RegisterDataBase...</span></span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">	orm.RunCommand()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">go</span> build main.<span class="keyword">go</span></span><br><span class="line">./main orm</span><br><span class="line"># ç›´æ¥æ‰§è¡Œå¯ä»¥æ˜¾ç¤ºå¸®åŠ©</span><br><span class="line"># å¦‚æœä½ çš„ç¨‹åºå¯ä»¥æ”¯æŒçš„è¯ï¼Œç›´æ¥è¿è¡Œ <span class="keyword">go</span> run main.<span class="keyword">go</span> orm ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœ</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªåŠ¨å»ºè¡¨"><a href="#è‡ªåŠ¨å»ºè¡¨" class="headerlink" title="è‡ªåŠ¨å»ºè¡¨"></a>è‡ªåŠ¨å»ºè¡¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./main orm syncdb -h</span><br><span class="line">Usage of orm <span class="built_in">command</span>: syncdb:</span><br><span class="line">  -db=<span class="string">&quot;default&quot;</span>: DataBase <span class="built_in">alias</span> name</span><br><span class="line">  -force=<span class="literal">false</span>: drop tables before create</span><br><span class="line">  -v=<span class="literal">false</span>: verbose info</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>-force=1</code> å¯ä»¥ drop table åå†å»ºè¡¨</p>
<p>ä½¿ç”¨ <code>-v</code> å¯ä»¥æŸ¥çœ‹æ‰§è¡Œçš„ sql è¯­å¥</p>
<hr>
<p>åœ¨ç¨‹åºä¸­ç›´æ¥è°ƒç”¨è‡ªåŠ¨å»ºè¡¨ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®åº“åˆ«å</span></span><br><span class="line">name := <span class="string">&quot;default&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// drop table åå†å»ºè¡¨</span></span><br><span class="line">force := <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°æ‰§è¡Œè¿‡ç¨‹</span></span><br><span class="line">verbose := <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡åˆ°é”™è¯¯ç«‹å³è¿”å›</span></span><br><span class="line">err := orm.RunSyncdb(name, force, verbose)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡ªåŠ¨å»ºè¡¨åŠŸèƒ½åœ¨é force æ¨¡å¼ä¸‹ï¼Œæ˜¯ä¼šè‡ªåŠ¨åˆ›å»ºæ–°å¢åŠ çš„å­—æ®µçš„ã€‚ä¹Ÿä¼šåˆ›å»ºæ–°å¢åŠ çš„ç´¢å¼•ã€‚</p>
<p>å¯¹äºæ”¹åŠ¨è¿‡çš„æ—§å­—æ®µï¼Œæ—§ç´¢å¼•ï¼Œéœ€è¦ç”¨æˆ·è‡ªè¡Œè¿›è¡Œå¤„ç†ã€‚</p>
<h3 id="æ‰“å°å»ºè¡¨SQL"><a href="#æ‰“å°å»ºè¡¨SQL" class="headerlink" title="æ‰“å°å»ºè¡¨SQL"></a>æ‰“å°å»ºè¡¨SQL</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./main orm sqlall -h</span><br><span class="line">Usage of orm <span class="built_in">command</span>: syncdb:</span><br><span class="line">  -db=<span class="string">&quot;default&quot;</span>: DataBase <span class="built_in">alias</span> name</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤ä½¿ç”¨åˆ«åä¸º default çš„æ•°æ®åº“ã€‚</p>
<h1 id="viewè®¾è®¡"><a href="#viewè®¾è®¡" class="headerlink" title="viewè®¾è®¡"></a>viewè®¾è®¡</h1><h2 id="æ¨¡æ¿è¯­æ³•æŒ‡å—"><a href="#æ¨¡æ¿è¯­æ³•æŒ‡å—" class="headerlink" title="æ¨¡æ¿è¯­æ³•æŒ‡å—"></a>æ¨¡æ¿è¯­æ³•æŒ‡å—</h2><p>æœ¬æ–‡è®²è¿° beego ä¸­ä½¿ç”¨çš„æ¨¡æ¿è¯­æ³•ï¼Œä¸ go æ¨¡æ¿è¯­æ³•åŸºæœ¬ç›¸åŒã€‚</p>
<h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p>go ç»Ÿä¸€ä½¿ç”¨äº† <code>&#123;&#123;` å’Œ `&#125;&#125;</code> ä½œä¸ºå·¦å³æ ‡ç­¾ï¼Œæ²¡æœ‰å…¶ä»–çš„æ ‡ç­¾ç¬¦å·ã€‚å¦‚æœæ‚¨æƒ³è¦ä¿®æ”¹ä¸ºå…¶å®ƒç¬¦å·ï¼Œå¯ä»¥å‚è€ƒ <a href="http://beego.vip/docs/mvc/view/view.md#%E6%A8%A1%E6%9D%BF%E6%A0%87%E7%AD%BE">æ¨¡æ¿æ ‡ç­¾</a>ã€‚</p>
<p>ä½¿ç”¨ <code>.</code> æ¥è®¿é—®å½“å‰ä½ç½®çš„ä¸Šä¸‹æ–‡</p>
<p>ä½¿ç”¨ <code>$</code> æ¥å¼•ç”¨å½“å‰æ¨¡æ¿æ ¹çº§çš„ä¸Šä¸‹æ–‡</p>
<p>ä½¿ç”¨ <code>$var</code> æ¥è®¿é—®åˆ›å»ºçš„å˜é‡</p>
<p>[more]</p>
<p><strong>æ¨¡æ¿ä¸­æ”¯æŒçš„ go è¯­è¨€ç¬¦å·</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;&quot;string&quot;&#125;&#125; // ä¸€èˆ¬ string</span><br><span class="line">&#123;&#123;`raw string`&#125;&#125; // åŸå§‹ string</span><br><span class="line">&#123;&#123;&#x27;c&#x27;&#125;&#125; // byte</span><br><span class="line">&#123;&#123;print nil&#125;&#125; // nil ä¹Ÿè¢«æ”¯æŒ</span><br></pre></td></tr></table></figure>

<p><strong>æ¨¡æ¿ä¸­çš„ pipeline</strong></p>
<p>å¯ä»¥æ˜¯ä¸Šä¸‹æ–‡çš„å˜é‡è¾“å‡ºï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°é€šè¿‡ç®¡é“ä¼ é€’çš„è¿”å›å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;. | FuncA | FuncB | FuncC&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ pipeline çš„å€¼ç­‰äº:</p>
<ul>
<li>false æˆ– 0</li>
<li>nil çš„æŒ‡é’ˆæˆ– interface</li>
<li>é•¿åº¦ä¸º 0 çš„ array, slice, map, string</li>
</ul>
<p>é‚£ä¹ˆè¿™ä¸ª pipeline è¢«è®¤ä¸ºæ˜¯ç©º</p>
<h4 id="if-â€¦-else-â€¦-end"><a href="#if-â€¦-else-â€¦-end" class="headerlink" title="if â€¦ else â€¦ end"></a>if â€¦ else â€¦ end</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;if pipeline&#125;&#125;&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>if åˆ¤æ–­æ—¶ï¼Œpipeline ä¸ºç©ºæ—¶ï¼Œç›¸å½“äºåˆ¤æ–­ä¸º False</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.Data[&quot;IsLogin&quot;] = true</span><br><span class="line">this.Data[&quot;IsHome&quot;] = true</span><br><span class="line">this.Data[&quot;IsAbout&quot;] = true</span><br></pre></td></tr></table></figure>

<p>æ”¯æŒåµŒå¥—çš„å¾ªç¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;if .IsHome&#125;&#125;</span><br><span class="line">&#123;&#123;else&#125;&#125;</span><br><span class="line">	&#123;&#123;if .IsAbout&#125;&#125;&#123;&#123;end&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ else if è¿›è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;if .IsHome&#125;&#125;</span><br><span class="line">&#123;&#123;else if .IsAbout&#125;&#125;</span><br><span class="line">&#123;&#123;else&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="range-â€¦-end"><a href="#range-â€¦-end" class="headerlink" title="range â€¦ end"></a>range â€¦ end</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;range pipeline&#125;&#125;&#123;&#123;.&#125;&#125;&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>pipeline æ”¯æŒçš„ç±»å‹ä¸º array, slice, map, channel</p>
<p>range å¾ªç¯å†…éƒ¨çš„ <code>.</code> æ”¹å˜ä¸ºä»¥ä¸Šç±»å‹çš„å­å…ƒç´ </p>
<p>å¯¹åº”çš„å€¼é•¿åº¦ä¸º 0 æ—¶ï¼Œrange ä¸ä¼šæ‰§è¡Œï¼Œ<code>.</code> ä¸ä¼šæ”¹å˜</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pages := []struct &#123;</span><br><span class="line">	Num int</span><br><span class="line">&#125;&#123;&#123;10&#125;, &#123;20&#125;, &#123;30&#125;&#125;</span><br><span class="line"></span><br><span class="line">this.Data[&quot;Total&quot;] = 100</span><br><span class="line">this.Data[&quot;Pages&quot;] = pages</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>.Num</code> è¾“å‡ºå­å…ƒç´ çš„ Num å±æ€§ï¼Œä½¿ç”¨ <code>$.</code> å¼•ç”¨æ¨¡æ¿ä¸­çš„æ ¹çº§ä¸Šä¸‹æ–‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;range .Pages&#125;&#125;</span><br><span class="line">	&#123;&#123;.Num&#125;&#125; of &#123;&#123;$.Total&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨åˆ›å»ºçš„å˜é‡ï¼Œåœ¨è¿™é‡Œå’Œ go ä¸­çš„ range ç”¨æ³•æ˜¯ç›¸åŒçš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;range $index, $elem := .Pages&#125;&#125;</span><br><span class="line">	&#123;&#123;$index&#125;&#125; - &#123;&#123;$elem.Num&#125;&#125; - &#123;&#123;.Num&#125;&#125; of &#123;&#123;$.Total&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>range ä¹Ÿæ”¯æŒ else</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;range .Pages&#125;&#125;</span><br><span class="line">&#123;&#123;else&#125;&#125;</span><br><span class="line">	&#123;&#123;/* å½“ .Pages ä¸ºç©º æˆ–è€… é•¿åº¦ä¸º 0 æ—¶ä¼šæ‰§è¡Œè¿™é‡Œ */&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="with-â€¦-end"><a href="#with-â€¦-end" class="headerlink" title="with â€¦ end"></a>with â€¦ end</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;with pipeline&#125;&#125;&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>with ç”¨äºé‡å®šå‘ pipeline</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;with .Field.NestField.SubField&#125;&#125;</span><br><span class="line">	&#123;&#123;.Var&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å¯¹å˜é‡èµ‹å€¼æ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;with $value := &quot;My name is %s&quot;&#125;&#125;</span><br><span class="line">	&#123;&#123;printf . &quot;slene&quot;&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>with ä¹Ÿæ”¯æŒ else</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;with pipeline&#125;&#125;</span><br><span class="line">&#123;&#123;else&#125;&#125;</span><br><span class="line">	&#123;&#123;/* å½“ pipeline ä¸ºç©ºæ—¶ä¼šæ‰§è¡Œè¿™é‡Œ */&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="define"><a href="#define" class="headerlink" title="define"></a>define</h4><p>define å¯ä»¥ç”¨æ¥å®šä¹‰è‡ªæ¨¡æ¿ï¼Œå¯ç”¨äºæ¨¡å—å®šä¹‰å’Œæ¨¡æ¿åµŒå¥—</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;define &quot;loop&quot;&#125;&#125;</span><br><span class="line">	&lt;li&gt;&#123;&#123;.Name&#125;&#125;&lt;/li&gt;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ template è°ƒç”¨æ¨¡æ¿</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">	&#123;&#123;range .Items&#125;&#125;</span><br><span class="line">		&#123;&#123;template &quot;loop&quot; .&#125;&#125;</span><br><span class="line">	&#123;&#123;end&#125;&#125;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<h4 id="template"><a href="#template" class="headerlink" title="template"></a>template</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;template &quot;æ¨¡æ¿å&quot; pipeline&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>å°†å¯¹åº”çš„ä¸Šä¸‹æ–‡ pipeline ä¼ ç»™æ¨¡æ¿ï¼Œæ‰å¯ä»¥åœ¨æ¨¡æ¿ä¸­è°ƒç”¨</p>
<p><strong>Beego ä¸­æ”¯æŒç›´æ¥è½½å…¥æ–‡ä»¶æ¨¡æ¿</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;template &quot;path/to/head.html&quot; .&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>Beego ä¼šä¾æ®ä½ è®¾ç½®çš„æ¨¡æ¿è·¯å¾„è¯»å– head.html</p>
<p>åœ¨æ¨¡æ¿ä¸­å¯ä»¥æ¥ç€è½½å…¥å…¶ä»–æ¨¡æ¿ï¼Œå¯¹äºæ¨¡æ¿çš„åˆ†æ¨¡å—å¤„ç†å¾ˆæœ‰ç”¨å¤„</p>
<h4 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h4><p>å…è®¸å¤šè¡Œæ–‡æœ¬æ³¨é‡Šï¼Œä¸å…è®¸åµŒå¥—</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;/* comment content</span><br><span class="line">support new line */&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŸºæœ¬å‡½æ•°"><a href="#åŸºæœ¬å‡½æ•°" class="headerlink" title="åŸºæœ¬å‡½æ•°"></a>åŸºæœ¬å‡½æ•°</h3><p>å˜é‡å¯ä»¥ä½¿ç”¨ç¬¦å· <code>|</code> åœ¨å‡½æ•°é—´ä¼ é€’</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;.Con | markdown | addlinks&#125;&#125;</span><br><span class="line">&#123;&#123;.Name | printf &quot;%s&quot;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ‹¬å·</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;printf &quot;nums is %s %d&quot; (printf &quot;%d %d&quot; 1 2) 3&#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="and"><a href="#and" class="headerlink" title="and"></a>and</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;and .X .Y .Z&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>and ä¼šé€ä¸€åˆ¤æ–­æ¯ä¸ªå‚æ•°ï¼Œå°†è¿”å›ç¬¬ä¸€ä¸ªä¸ºç©ºçš„å‚æ•°ï¼Œå¦åˆ™å°±è¿”å›æœ€åä¸€ä¸ªéç©ºå‚æ•°</p>
<h4 id="call"><a href="#call" class="headerlink" title="call"></a>call</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;call .Field.Func .Arg1 .Arg2&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>call å¯ä»¥è°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¼ å…¥å‚æ•°</p>
<p>è°ƒç”¨çš„å‡½æ•°éœ€è¦è¿”å› 1 ä¸ªå€¼ æˆ–è€… 2 ä¸ªå€¼ï¼Œè¿”å›ä¸¤ä¸ªå€¼æ—¶ï¼Œç¬¬äºŒä¸ªå€¼ç”¨äºè¿”å› error ç±»å‹çš„é”™è¯¯ã€‚è¿”å›çš„é”™è¯¯ä¸ç­‰äº nil æ—¶ï¼Œæ‰§è¡Œå°†ç»ˆæ­¢ã€‚</p>
<h4 id="index-1"><a href="#index-1" class="headerlink" title="index"></a>index</h4><p>index æ”¯æŒ map, slice, array, stringï¼Œè¯»å–æŒ‡å®šç±»å‹å¯¹åº”ä¸‹æ ‡çš„å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.Data[&quot;Maps&quot;] = map[string]string&#123;&quot;name&quot;: &quot;Beego&quot;&#125;</span><br><span class="line">&#123;&#123;index .Maps &quot;name&quot;&#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="len"><a href="#len" class="headerlink" title="len"></a>len</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;printf &quot;The content length is %d&quot; (.Content|len)&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>è¿”å›å¯¹åº”ç±»å‹çš„é•¿åº¦ï¼Œæ”¯æŒç±»å‹ï¼šmap, slice, array, string, chan</p>
<h4 id="not"><a href="#not" class="headerlink" title="not"></a>not</h4><p>not è¿”å›è¾“å…¥å‚æ•°çš„å¦å®šå€¼ï¼Œif true then false else true</p>
<h4 id="or"><a href="#or" class="headerlink" title="or"></a>or</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;or .X .Y .Z&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>or ä¼šé€ä¸€åˆ¤æ–­æ¯ä¸ªå‚æ•°ï¼Œå°†è¿”å›ç¬¬ä¸€ä¸ªéç©ºçš„å‚æ•°ï¼Œå¦åˆ™å°±è¿”å›æœ€åä¸€ä¸ªå‚æ•°</p>
<h4 id="print"><a href="#print" class="headerlink" title="print"></a>print</h4><p>å¯¹åº” fmt.Sprint</p>
<h4 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h4><p>å¯¹åº” fmt.Sprintf</p>
<h4 id="println"><a href="#println" class="headerlink" title="println"></a>println</h4><p>å¯¹åº” fmt.Sprintln</p>
<h4 id="urlquery"><a href="#urlquery" class="headerlink" title="urlquery"></a>urlquery</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;urlquery &quot;http://beego.vip&quot;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>å°†è¿”å›</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http%3A%2F%2Fbeego.vip</span><br></pre></td></tr></table></figure>

<h4 id="eq-ne-lt-le-gt-ge"><a href="#eq-ne-lt-le-gt-ge" class="headerlink" title="eq &#x2F; ne &#x2F; lt &#x2F; le &#x2F; gt &#x2F; ge"></a>eq &#x2F; ne &#x2F; lt &#x2F; le &#x2F; gt &#x2F; ge</h4><p>è¿™ç±»å‡½æ•°ä¸€èˆ¬é…åˆåœ¨ if ä¸­ä½¿ç”¨</p>
<p><code>eq</code>: arg1 &#x3D;&#x3D; arg2<br><code>ne</code>: arg1 !&#x3D; arg2<br><code>lt</code>: arg1 &lt; arg2<br><code>le</code>: arg1 &lt;&#x3D; arg2<br><code>gt</code>: arg1 &gt; arg2<br><code>ge</code>: arg1 &gt;&#x3D; arg2</p>
<p>eq å’Œå…¶ä»–å‡½æ•°ä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯ï¼Œæ”¯æŒå¤šä¸ªå‚æ•°ï¼Œå’Œä¸‹é¢çš„é€»è¾‘åˆ¤æ–­ç›¸åŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">arg1==arg2 || arg1==arg3 || arg1==arg4 ...</span><br></pre></td></tr></table></figure>

<p>ä¸ if ä¸€èµ·ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;if eq true .Var1 .Var2 .Var3&#125;&#125;&#123;&#123;end&#125;&#125;</span><br><span class="line">&#123;&#123;if lt 100 200&#125;&#125;&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡æ¿å¤„ç†"><a href="#æ¨¡æ¿å¤„ç†" class="headerlink" title="æ¨¡æ¿å¤„ç†"></a>æ¨¡æ¿å¤„ç†</h2><p>beego çš„æ¨¡æ¿å¤„ç†å¼•æ“é‡‡ç”¨çš„æ˜¯ Go å†…ç½®çš„ <code>html/template</code> åŒ…è¿›è¡Œå¤„ç†ï¼Œè€Œä¸” beego çš„æ¨¡æ¿å¤„ç†é€»è¾‘æ˜¯é‡‡ç”¨äº†ç¼“å­˜ç¼–è¯‘æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„æ¨¡æ¿ä¼šåœ¨ beego åº”ç”¨å¯åŠ¨çš„æ—¶å€™å…¨éƒ¨ç¼–è¯‘ç„¶åç¼“å­˜åœ¨ map é‡Œé¢ã€‚</p>
<h3 id="æ¨¡æ¿ç›®å½•"><a href="#æ¨¡æ¿ç›®å½•" class="headerlink" title="æ¨¡æ¿ç›®å½•"></a>æ¨¡æ¿ç›®å½•</h3><p>beego ä¸­é»˜è®¤çš„æ¨¡æ¿ç›®å½•æ˜¯ <code>views</code>ï¼Œç”¨æˆ·å¯ä»¥æŠŠæ¨¡æ¿æ–‡ä»¶æ”¾åˆ°è¯¥ç›®å½•ä¸‹ï¼Œbeego ä¼šè‡ªåŠ¨åœ¨è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶è¿›è¡Œè§£æå¹¶ç¼“å­˜ï¼Œå¼€å‘æ¨¡å¼ä¸‹æ¯æ¬¡éƒ½ä¼šé‡æ–°è§£æï¼Œä¸åšç¼“å­˜ã€‚å½“ç„¶ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼æ”¹å˜æ¨¡æ¿çš„ç›®å½•ï¼ˆåªèƒ½æŒ‡å®šä¸€ä¸ªç›®å½•ä¸ºæ¨¡æ¿ç›®å½•ï¼‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">beego.ViewsPath = <span class="string">&quot;myviewpath&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="è‡ªåŠ¨æ¸²æŸ“"><a href="#è‡ªåŠ¨æ¸²æŸ“" class="headerlink" title="è‡ªåŠ¨æ¸²æŸ“"></a>è‡ªåŠ¨æ¸²æŸ“</h3><p>ç”¨æˆ·æ— éœ€æ‰‹åŠ¨çš„è°ƒç”¨æ¸²æŸ“è¾“å‡ºæ¨¡æ¿ï¼Œbeego ä¼šè‡ªåŠ¨çš„åœ¨è°ƒç”¨å®Œç›¸åº”çš„ method æ–¹æ³•ä¹‹åè°ƒç”¨ Render å‡½æ•°ï¼Œå½“ç„¶å¦‚æœæ‚¨çš„åº”ç”¨æ˜¯ä¸éœ€è¦æ¨¡æ¿è¾“å‡ºçš„ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨é…ç½®æ–‡ä»¶æˆ–è€…åœ¨ <code>main.go</code> ä¸­è®¾ç½®å…³é—­è‡ªåŠ¨æ¸²æŸ“ã€‚</p>
<p>é…ç½®æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">autorender = <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>main.go æ–‡ä»¶ä¸­è®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.AutoRender = <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡æ¿æ ‡ç­¾"><a href="#æ¨¡æ¿æ ‡ç­¾" class="headerlink" title="æ¨¡æ¿æ ‡ç­¾"></a>æ¨¡æ¿æ ‡ç­¾</h3><p>Go è¯­è¨€çš„é»˜è®¤æ¨¡æ¿é‡‡ç”¨äº† <code>&#123;&#123;` å’Œ `&#125;&#125;</code> ä½œä¸ºå·¦å³æ ‡ç­¾ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™åœ¨å¼€å‘ä¸­å¯èƒ½ç•Œé¢æ˜¯é‡‡ç”¨äº† AngularJS å¼€å‘ï¼Œä»–çš„æ¨¡æ¿ä¹Ÿæ˜¯è¿™ä¸ªæ ‡ç­¾ï¼Œæ•…è€Œå¼•èµ·äº†å†²çªã€‚åœ¨ beego ä¸­ä½ å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æˆ–è€…ç›´æ¥è®¾ç½®é…ç½®å˜é‡ä¿®æ”¹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.TemplateLeft = <span class="string">&quot;&lt;&lt;&lt;&quot;</span></span><br><span class="line">web.TemplateRight = <span class="string">&quot;&gt;&gt;&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡æ¿æ•°æ®"><a href="#æ¨¡æ¿æ•°æ®" class="headerlink" title="æ¨¡æ¿æ•°æ®"></a>æ¨¡æ¿æ•°æ®</h3><p>æ¨¡æ¿ä¸­çš„æ•°æ®æ˜¯é€šè¿‡åœ¨ Controller ä¸­ <code>this.Data</code> è·å–çš„ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³åœ¨æ¨¡æ¿ä¸­è·å–å†…å®¹ <code>&#123;&#123;.Content&#125;&#125;</code> ,é‚£ä¹ˆä½ éœ€è¦åœ¨ Controller ä¸­å¦‚ä¸‹è®¾ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.Data[&quot;Content&quot;] = &quot;value&quot;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨å„ç§ç±»å‹çš„æ•°æ®æ¸²æŸ“ï¼š</p>
<ul>
<li><p>ç»“æ„ä½“</p>
<p>ç»“æ„ä½“ç»“æ„</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line">æ§åˆ¶å™¨æ•°æ®èµ‹å€¼</span><br><span class="line"></span><br><span class="line">	this.Data[<span class="string">&quot;a&quot;</span>]=&amp;A&#123;Name:<span class="string">&quot;astaxie&quot;</span>,Age:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">æ¨¡æ¿æ¸²æŸ“æ•°æ®å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">	the username is &#123;&#123;.a.Name&#125;&#125;</span><br><span class="line">	the age is &#123;&#123;.a.Age&#125;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>map</p>
<p>æ§åˆ¶å™¨æ•°æ®èµ‹å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mp[&quot;name&quot;]=&quot;astaxie&quot;</span><br><span class="line">mp[&quot;nickname&quot;] = &quot;haha&quot;</span><br><span class="line">this.Data[&quot;m&quot;]=mp</span><br></pre></td></tr></table></figure>

<p>æ¨¡æ¿æ¸²æŸ“æ•°æ®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">the username is &#123;&#123;.m.name&#125;&#125;</span><br><span class="line">the username is &#123;&#123;.m.nickname&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>slice</p>
<p>æ§åˆ¶å™¨æ•°æ®èµ‹å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ss :=[]string&#123;&quot;a&quot;,&quot;b&quot;,&quot;c&quot;&#125;</span><br><span class="line">this.Data[&quot;s&quot;]=ss</span><br></pre></td></tr></table></figure>

<p>æ¨¡æ¿æ¸²æŸ“æ•°æ®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;range $key, $val := .s&#125;&#125;</span><br><span class="line">&#123;&#123;$key&#125;&#125;</span><br><span class="line">&#123;&#123;$val&#125;&#125;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="æ¨¡æ¿åç§°"><a href="#æ¨¡æ¿åç§°" class="headerlink" title="æ¨¡æ¿åç§°"></a>æ¨¡æ¿åç§°</h3><p>beego é‡‡ç”¨äº† Go è¯­è¨€å†…ç½®çš„æ¨¡æ¿å¼•æ“ï¼Œæ‰€æœ‰æ¨¡æ¿çš„è¯­æ³•å’Œ Go çš„ä¸€æ¨¡ä¸€æ ·ï¼Œè‡³äºå¦‚ä½•å†™æ¨¡æ¿æ–‡ä»¶ï¼Œè¯¦ç»†çš„è¯·å‚è€ƒ <a href="https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/07.4.md">æ¨¡æ¿æ•™ç¨‹</a>ã€‚</p>
<p>ç”¨æˆ·é€šè¿‡åœ¨ Controller çš„å¯¹åº”æ–¹æ³•ä¸­è®¾ç½®ç›¸åº”çš„æ¨¡æ¿åç§°ï¼Œbeego ä¼šè‡ªåŠ¨çš„åœ¨ viewpath ç›®å½•ä¸‹æŸ¥è¯¢è¯¥æ–‡ä»¶å¹¶æ¸²æŸ“ï¼Œä¾‹å¦‚ä¸‹é¢çš„è®¾ç½®ï¼Œbeego ä¼šåœ¨ admin ä¸‹é¢æ‰¾ add.tpl æ–‡ä»¶è¿›è¡Œæ¸²æŸ“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.TplName = &quot;admin/add.tpl&quot;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„æ¨¡æ¿åç¼€åæ˜¯ tplï¼Œbeego é»˜è®¤æƒ…å†µä¸‹æ”¯æŒ tpl å’Œ html åç¼€åçš„æ¨¡æ¿æ–‡ä»¶ï¼Œå¦‚æœä½ çš„åç¼€åä¸æ˜¯è¿™ä¸¤ç§ï¼Œè¯·è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.AddTemplateExt(<span class="string">&quot;ä½ æ–‡ä»¶çš„åç¼€å&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å½“ä½ è®¾ç½®äº†è‡ªåŠ¨æ¸²æŸ“ï¼Œç„¶ååœ¨ä½ çš„ Controller ä¸­æ²¡æœ‰è®¾ç½®ä»»ä½•çš„ TplNameï¼Œé‚£ä¹ˆ beego ä¼šè‡ªåŠ¨è®¾ç½®ä½ çš„æ¨¡æ¿æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">c.TplName = strings.ToLower(c.controllerName) + <span class="string">&quot;/&quot;</span> + strings.ToLower(c.actionName) + <span class="string">&quot;.&quot;</span> + c.TplExt</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±æ˜¯ä½ å¯¹åº”çš„ Controller åå­—+è¯·æ±‚æ–¹æ³•å.æ¨¡æ¿åç¼€ï¼Œä¹Ÿå°±æ˜¯å¦‚æœä½ çš„ Controller åæ˜¯ <code>AddController</code>ï¼Œè¯·æ±‚æ–¹æ³•æ˜¯ <code>POST</code>ï¼Œé»˜è®¤çš„æ–‡ä»¶åç¼€æ˜¯ <code>tpl</code>ï¼Œé‚£ä¹ˆå°±ä¼šé»˜è®¤è¯·æ±‚ <code>/viewpath/AddController/post.tpl</code> æ–‡ä»¶ã€‚</p>
<h3 id="Layout-è®¾è®¡"><a href="#Layout-è®¾è®¡" class="headerlink" title="Layout è®¾è®¡"></a>Layout è®¾è®¡</h3><p>beego æ”¯æŒ layout è®¾è®¡ï¼Œä¾‹å¦‚ä½ åœ¨ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæ•´ä¸ªç®¡ç†ç•Œé¢æ˜¯å›ºå®šçš„ï¼Œåªä¼šå˜åŒ–ä¸­é—´çš„éƒ¨åˆ†ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„è®¾ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.Layout = &quot;admin/layout.html&quot;</span><br><span class="line">this.TplName = &quot;admin/add.tpl&quot;</span><br></pre></td></tr></table></figure>

<p>åœ¨ layout.html ä¸­ä½ å¿…é¡»è®¾ç½®å¦‚ä¸‹çš„å˜é‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;.LayoutContent&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>beego å°±ä¼šé¦–å…ˆè§£æ TplName æŒ‡å®šçš„æ–‡ä»¶ï¼Œè·å–å†…å®¹èµ‹å€¼ç»™ LayoutContentï¼Œç„¶åæœ€åæ¸²æŸ“ layout.html æ–‡ä»¶ã€‚</p>
<p>ç›®å‰é‡‡ç”¨é¦–å…ˆæŠŠç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶è¿›è¡Œç¼“å­˜ï¼Œæ‰€ä»¥ç”¨æˆ·è¿˜å¯ä»¥é€šè¿‡ç±»ä¼¼è¿™æ ·çš„æ–¹å¼å®ç° layoutï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;template &quot;header.html&quot; .&#125;&#125;</span><br><span class="line">Logic code</span><br><span class="line">&#123;&#123;template &quot;footer.html&quot; .&#125;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<blockquote>
<p>ç‰¹åˆ«æ³¨æ„åé¢çš„<code>.</code>,è¿™æ˜¯ä¼ é€’å½“å‰å‚æ•°åˆ°å­æ¨¡æ¿</p>
</blockquote>
</blockquote>
</blockquote>
<h3 id="LayoutSection"><a href="#LayoutSection" class="headerlink" title="LayoutSection"></a>LayoutSection</h3><p>å¯¹äºä¸€ä¸ªå¤æ‚çš„ <code>LayoutContent</code>ï¼Œå…¶ä¸­å¯èƒ½åŒ…æ‹¬æœ‰javascriptè„šæœ¬ã€CSS å¼•ç”¨ç­‰ï¼Œæ ¹æ®æƒ¯ä¾‹ï¼Œé€šå¸¸ css ä¼šæ”¾åˆ° Head å…ƒç´ ä¸­ï¼Œjavascript è„šæœ¬éœ€è¦æ”¾åˆ° body å…ƒç´ çš„æœ«å°¾ï¼Œè€Œå…¶å®ƒå†…å®¹åˆ™æ ¹æ®éœ€è¦æ”¾åœ¨åˆé€‚çš„ä½ç½®ã€‚åœ¨ <code>Layout</code> é¡µä¸­ä»…æœ‰ä¸€ä¸ª <code>LayoutContent</code> æ˜¯ä¸å¤Ÿçš„ã€‚æ‰€ä»¥åœ¨ <code>Controller</code> ä¸­å¢åŠ äº†ä¸€ä¸ª <code>LayoutSections</code>å±æ€§ï¼Œå¯ä»¥å…è®¸ <code>Layout</code> é¡µä¸­è®¾ç½®å¤šä¸ª <code>section</code>ï¼Œç„¶åæ¯ä¸ª <code>section</code> å¯ä»¥åˆ†åˆ«åŒ…å«å„è‡ªçš„å­æ¨¡æ¿é¡µã€‚</p>
<p>layout_blog.tpl:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Lin Li<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;.HtmlHead&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;.LayoutContent&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;&#123;.SideBar&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://code.jquery.com/jquery-2.0.3.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    &#123;&#123;.Scripts&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>html_head.tpl:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">     <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">     &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>scripts.tplï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    $(document).ready(function() &#123;</span><br><span class="line">        // bla bla bla</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>é€»è¾‘å¤„ç†å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> BlogsController <span class="keyword">struct</span> &#123;</span><br><span class="line">  web.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *BlogsController)</span></span> Get() &#123;</span><br><span class="line">	this.Layout = <span class="string">&quot;layout_blog.tpl&quot;</span></span><br><span class="line">	this.TplName = <span class="string">&quot;blogs/index.tpl&quot;</span></span><br><span class="line">	this.LayoutSections = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)</span><br><span class="line">	this.LayoutSections[<span class="string">&quot;HtmlHead&quot;</span>] = <span class="string">&quot;blogs/html_head.tpl&quot;</span></span><br><span class="line">	this.LayoutSections[<span class="string">&quot;Scripts&quot;</span>] = <span class="string">&quot;blogs/scripts.tpl&quot;</span></span><br><span class="line">	this.LayoutSections[<span class="string">&quot;Sidebar&quot;</span>] = <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="renderform-ä½¿ç”¨"><a href="#renderform-ä½¿ç”¨" class="headerlink" title="renderform ä½¿ç”¨"></a>renderform ä½¿ç”¨</h3><p>å®šä¹‰ struct:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id    <span class="type">int</span>         <span class="string">`form:&quot;-&quot;`</span></span><br><span class="line">	Name  <span class="keyword">interface</span>&#123;&#125; <span class="string">`form:&quot;username&quot;`</span></span><br><span class="line">	Age   <span class="type">int</span>         <span class="string">`form:&quot;age,text,å¹´é¾„ï¼š&quot;`</span></span><br><span class="line">	Sex   <span class="type">string</span></span><br><span class="line">	Intro <span class="type">string</span> <span class="string">`form:&quot;,textarea&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>StructTag çš„å®šä¹‰ç”¨çš„æ ‡ç­¾ç”¨ä¸º <code>form</code>ï¼Œå’Œ <a href="https://git-books.github.io/books/beego/controller/params.md#%E7%9B%B4%E6%8E%A5%E8%A7%A3%E6%9E%90%E5%88%B0-struct">ParseForm æ–¹æ³•</a> å…±ç”¨ä¸€ä¸ªæ ‡ç­¾ï¼Œæ ‡ç­¾åé¢æœ‰ä¸‰ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨ <code>,</code> åˆ†å‰²ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¡¨å•ä¸­ç±»å‹çš„ <code>name</code> çš„å€¼ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™ä»¥ <code>struct field name</code> ä¸ºå€¼ã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¡¨å•ç»„ä»¶çš„ç±»å‹ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™ä¸º <code>text</code>ã€‚è¡¨å•ç»„ä»¶çš„æ ‡ç­¾é»˜è®¤ä¸º <code>struct field name</code> çš„å€¼ï¼Œå¦åˆ™ä¸ºç¬¬ä¸‰ä¸ªå€¼ã€‚</li>
<li>å¦‚æœ <code>form</code> æ ‡ç­¾åªæœ‰ä¸€ä¸ªå€¼ï¼Œåˆ™ä¸ºè¡¨å•ä¸­ç±»å‹ <code>name</code> çš„å€¼ï¼Œé™¤äº†æœ€åä¸€ä¸ªå€¼å¯ä»¥å¿½ç•¥å¤–ï¼Œå…¶ä»–ä½ç½®çš„å¿…é¡»è¦æœ‰ <code>,</code> å·åˆ†å‰²ï¼Œå¦‚ï¼š<code>form:&quot;,,å§“åï¼š&quot;</code></li>
<li>å¦‚æœè¦å¿½ç•¥ä¸€ä¸ªå­—æ®µï¼Œæœ‰ä¸¤ç§åŠæ³•ï¼Œä¸€æ˜¯ï¼šå­—æ®µåå°å†™å¼€å¤´ï¼ŒäºŒæ˜¯ï¼š<code>form</code> æ ‡ç­¾çš„å€¼è®¾ç½®ä¸º <code>-</code></li>
<li>ç°åœ¨çš„ä»£ç ç‰ˆæœ¬åªèƒ½å®ç°å›ºå®šçš„æ ¼å¼ï¼Œç”¨ br æ ‡ç­¾å®ç°æ¢è¡Œï¼Œæ— æ³•å®ç° css å’Œ class ç­‰ä»£ç çš„æ’å…¥ã€‚æ‰€ä»¥ï¼Œè¦å®ç° form çš„é«˜çº§æ’ç‰ˆï¼Œä¸èƒ½ä½¿ç”¨ renderform çš„æ–¹æ³•ï¼Œè€Œéœ€è¦æ‰‹åŠ¨å¤„ç†æ¯ä¸€ä¸ªå­—æ®µã€‚</li>
</ul>
<p>controllerï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *AddController)</span></span> Get() &#123;</span><br><span class="line">	this.Data[<span class="string">&quot;Form&quot;</span>] = &amp;User&#123;&#125;</span><br><span class="line">	this.TplName = <span class="string">&quot;index.tpl&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Form çš„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ª struct çš„æŒ‡é’ˆã€‚</p>
<p>template:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">&#123;&#123;.Form | renderform&#125;&#125;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç ç”Ÿæˆçš„è¡¨å•ä¸ºï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">Sex: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;Sex&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">Intro: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;Intro&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡æ¿å‡½æ•°"><a href="#æ¨¡æ¿å‡½æ•°" class="headerlink" title="æ¨¡æ¿å‡½æ•°"></a>æ¨¡æ¿å‡½æ•°</h2><p>beego æ”¯æŒç”¨æˆ·å®šä¹‰æ¨¡æ¿å‡½æ•°ï¼Œä½†æ˜¯å¿…é¡»åœ¨ <code>web.Run()</code> è°ƒç”¨ä¹‹å‰ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hello</span><span class="params">(in <span class="type">string</span>)</span></span>(out <span class="type">string</span>)&#123;</span><br><span class="line">    out = in + <span class="string">&quot;world&quot;</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">web.AddFuncMap(<span class="string">&quot;hi&quot;</span>,hello)</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰ä¹‹åä½ å°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­è¿™æ ·ä½¿ç”¨äº†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;.Content | hi&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>ç›®å‰ beego å†…ç½®çš„æ¨¡æ¿å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li><p>dateformat</p>
<p>å®ç°äº†æ—¶é—´çš„æ ¼å¼åŒ–ï¼Œè¿”å›å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ–¹æ³• <code>&#123;&#123;dateformat .Time "2006-01-02T15:04:05Z07:00"&#125;&#125;</code>ã€‚</p>
</li>
<li><p>date</p>
<p>å®ç°äº†ç±»ä¼¼ PHP çš„ date å‡½æ•°ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ ¹æ®å­—ç¬¦ä¸²è¿”å›æ—¶é—´ï¼Œä½¿ç”¨æ–¹æ³• <code>&#123;&#123;date .T "Y-m-d H:i:s"&#125;&#125;</code>ã€‚</p>
</li>
<li><p>compare</p>
<p>å®ç°äº†æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ¯”è¾ƒï¼Œå¦‚æœç›¸åŒè¿”å› trueï¼Œå¦è€… falseï¼Œä½¿ç”¨æ–¹æ³• <code>&#123;&#123;compare .A .B&#125;&#125;</code>ã€‚</p>
</li>
<li><p>substr</p>
<p>å®ç°äº†å­—ç¬¦ä¸²çš„æˆªå–ï¼Œæ”¯æŒä¸­æ–‡æˆªå–çš„å®Œç¾æˆªå–ï¼Œä½¿ç”¨æ–¹æ³•<code> &#123;&#123;substr .Str 0 30&#125;&#125;</code>ã€‚</p>
</li>
<li><p>html2str</p>
<p>å®ç°äº†æŠŠ html è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå‰”é™¤ä¸€äº› scriptã€css ä¹‹ç±»çš„å…ƒç´ ï¼Œè¿”å›çº¯æ–‡æœ¬ä¿¡æ¯ï¼Œä½¿ç”¨æ–¹æ³• <code>&#123;&#123;html2str .Htmlinfo&#125;&#125;</code>ã€‚</p>
</li>
<li><p>str2html</p>
<p>å®ç°äº†æŠŠç›¸åº”çš„å­—ç¬¦ä¸²å½“ä½œ HTML æ¥è¾“å‡ºï¼Œä¸è½¬ä¹‰ï¼Œä½¿ç”¨æ–¹æ³• <code>&#123;&#123;str2html .Strhtml&#125;&#125;</code>ã€‚</p>
</li>
<li><p>htmlquote</p>
<p>å®ç°äº†åŸºæœ¬çš„ html å­—ç¬¦è½¬ä¹‰ï¼Œä½¿ç”¨æ–¹æ³•<code> &#123;&#123;htmlquote .quote&#125;&#125;</code>ã€‚</p>
</li>
<li><p>htmlunquote</p>
<p>å®ç°äº†åŸºæœ¬çš„åè½¬ç§»å­—ç¬¦ï¼Œä½¿ç”¨æ–¹æ³• <code>&#123;&#123;htmlunquote .unquote&#125;&#125;</code>ã€‚</p>
</li>
<li><p>renderform</p>
<p>æ ¹æ® StructTag ç›´æ¥ç”Ÿæˆå¯¹åº”çš„è¡¨å•ï¼Œä½¿ç”¨æ–¹æ³• <code>&#123;&#123;&struct | renderform&#125;&#125;</code>ã€‚</p>
</li>
<li><p>assets_js</p>
<p>ä¸º js æ–‡ä»¶ç”Ÿæˆä¸€ä¸ª <code>&lt;script&gt;</code> æ ‡ç­¾. ä½¿ç”¨æ–¹æ³• <code>&#123;&#123;assets_js src&#125;&#125;</code></p>
</li>
<li><p>assets_css</p>
<p>ä¸º css æ–‡ä»¶ç”Ÿæˆä¸€ä¸ª <code>&lt;link&gt;</code> æ ‡ç­¾. ä½¿ç”¨æ–¹æ³• <code>&#123;&#123;assets_css src&#125;&#125;</code></p>
</li>
<li><p>config</p>
<p>è·å– AppConfig çš„å€¼. ä½¿ç”¨æ–¹æ³• {<code>&#123;config configType configKey defaultValue&#125;&#125;</code>. å¯é€‰çš„ configType æœ‰ String, Bool, Int, Int64, Float, DIY</p>
</li>
<li><p>map_get</p>
<p>è·å– <code>map</code> çš„å€¼</p>
<p>ç”¨æ³•:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// In controller</span><br><span class="line">Data[&quot;m&quot;] = map[string]interface&#123;&#125; &#123;</span><br><span class="line">    &quot;a&quot;: 1,</span><br><span class="line">    &quot;1&quot;: map[string]float64&#123;</span><br><span class="line">        &quot;c&quot;: 4,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">// In view</span><br><span class="line">&#123;&#123; map_get .m &quot;a&quot; &#125;&#125; // return 1</span><br><span class="line">&#123;&#123; map_get .m 1 &quot;c&quot; &#125;&#125; // return 4</span><br></pre></td></tr></table></figure>
</li>
<li><p>urlfor</p>
<p>è·å–æ§åˆ¶å™¨æ–¹æ³•çš„ URL</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;urlfor &quot;TestController.List&quot;&#125;&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="é™æ€æ–‡ä»¶å¤„ç†-1"><a href="#é™æ€æ–‡ä»¶å¤„ç†-1" class="headerlink" title="é™æ€æ–‡ä»¶å¤„ç†"></a>é™æ€æ–‡ä»¶å¤„ç†</h2><p>Go è¯­è¨€å†…éƒ¨å…¶å®å·²ç»æä¾›äº† <code>http.ServeFile</code>ï¼Œé€šè¿‡è¿™ä¸ªå‡½æ•°å¯ä»¥å®ç°é™æ€æ–‡ä»¶çš„æœåŠ¡ã€‚beego é’ˆå¯¹è¿™ä¸ªåŠŸèƒ½è¿›è¡Œäº†ä¸€å±‚å°è£…ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹å¼è¿›è¡Œé™æ€æ–‡ä»¶æ³¨å†Œï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.SetStaticPath(<span class="string">&quot;/static&quot;</span>,<span class="string">&quot;public&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯å¾„ï¼Œurl è·¯å¾„ä¿¡æ¯</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯é™æ€æ–‡ä»¶ç›®å½•ï¼ˆç›¸å¯¹åº”ç”¨æ‰€åœ¨çš„ç›®å½•ï¼‰</li>
</ul>
<p>beego æ”¯æŒå¤šä¸ªç›®å½•çš„é™æ€æ–‡ä»¶æ³¨å†Œï¼Œç”¨æˆ·å¯ä»¥æ³¨å†Œå¦‚ä¸‹çš„é™æ€æ–‡ä»¶ç›®å½•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">web.SetStaticPath(<span class="string">&quot;/images&quot;</span>,<span class="string">&quot;images&quot;</span>)</span><br><span class="line">web.SetStaticPath(<span class="string">&quot;/css&quot;</span>,<span class="string">&quot;css&quot;</span>)</span><br><span class="line">web.SetStaticPath(<span class="string">&quot;/js&quot;</span>,<span class="string">&quot;js&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®äº†å¦‚ä¸Šçš„é™æ€ç›®å½•ä¹‹åï¼Œç”¨æˆ·è®¿é—® <code>/images/login/login.png</code>ï¼Œé‚£ä¹ˆå°±ä¼šè®¿é—®åº”ç”¨å¯¹åº”çš„ç›®å½•ä¸‹é¢çš„ <code>images/login/login.png</code> æ–‡ä»¶ã€‚å¦‚æœæ˜¯è®¿é—® <code>/static/img/logo.png</code>ï¼Œé‚£ä¹ˆå°±è®¿é—® <code>public/img/logo.png</code>æ–‡ä»¶ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ beego ä¼šåˆ¤æ–­ç›®å½•ä¸‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ç›´æ¥è¿”å› 404 é¡µé¢ï¼Œå¦‚æœè¯·æ±‚çš„æ˜¯ <code>index.html</code>ï¼Œé‚£ä¹ˆç”±äº <code>http.ServeFile</code> é»˜è®¤æ˜¯ä¼šè·³è½¬çš„ï¼Œä¸æä¾›è¯¥é¡µé¢çš„æ˜¾ç¤ºã€‚å› æ­¤ beego å¯ä»¥è®¾ç½® <code>web.BConfig.WebConfig.DirectoryIndex=true</code> è¿™æ ·æ¥ä½¿å¾—æ˜¾ç¤º <code>index.html</code> é¡µé¢ã€‚è€Œä¸”å¼€å¯è¯¥åŠŸèƒ½ä¹‹åï¼Œç”¨æˆ·è®¿é—®ç›®å½•å°±ä¼šæ˜¾ç¤ºè¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶åˆ—è¡¨ã€‚</p>
]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»ŸæœŸæœ«å¤ä¹ ä¹‹è¾“å…¥è¾“å‡ºç³»ç»Ÿ</title>
    <url>/2023/06/14/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2/</url>
    <content><![CDATA[<h1 id="è¾“å…¥è¾“å‡ºç³»ç»Ÿ"><a href="#è¾“å…¥è¾“å‡ºç³»ç»Ÿ" class="headerlink" title="è¾“å…¥è¾“å‡ºç³»ç»Ÿ"></a>è¾“å…¥è¾“å‡ºç³»ç»Ÿ</h1><p>â€‹	è¾“å…¥è¾“å‡ºç³»ç»Ÿæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­çš„ä¸»æœºä¸å¤–éƒ¨è¿›è¡Œé€šä¿¡çš„ç³»ç»Ÿã€‚åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œé€šå¸¸æŠŠå¤„ç†æœºå’Œä¸»å­˜å‚¨å™¨ä¹‹å¤–çš„éƒ¨åˆ†ç§°ä¸ºè¾“å…¥è¾“å‡ºç³»ç»Ÿï¼Œè¾“å…¥è¾“å‡ºç³»ç»Ÿçš„ç‰¹ç‚¹æ˜¯å¼‚æ­¥æ€§ã€å®æ—¶æ€§å’Œè®¾å¤‡æ— å…³æ€§ã€‚</p>
<h2 id="I-Oç³»ç»Ÿç®€ä»‹"><a href="#I-Oç³»ç»Ÿç®€ä»‹" class="headerlink" title="I&#x2F;Oç³»ç»Ÿç®€ä»‹"></a>I&#x2F;Oç³»ç»Ÿç®€ä»‹</h2><p>â€‹	<strong>è®¾å¤‡ç®¡ç†çš„å¯¹è±¡</strong>ï¼šä¸»è¦æ˜¯I&#x2F;Oè®¾å¤‡ã€‚<br>â€‹	<strong>è®¾å¤‡ç®¡ç†çš„åŸºæœ¬ä»»åŠ¡</strong>ï¼šå®Œæˆç”¨æˆ·æå‡ºçš„I&#x2F;Oè¯·æ±‚ï¼Œæé«˜I&#x2F;Oé€Ÿç‡ä»¥åŠæ”¹å–„I&#x2F;Oè®¾å¤‡çš„åˆ©ç”¨ç‡ã€‚<br>â€‹	<strong>è®¾å¤‡ç®¡ç†çš„ä¸»è¦åŠŸèƒ½æœ‰</strong>ï¼šç¼“å†²åŒºç®¡ç†ã€è®¾å¤‡åˆ†é…ã€è®¾å¤‡å¤„ç†ã€è™šæ‹Ÿè®¾å¤‡åŠå®ç°è®¾å¤‡ç‹¬ç«‹æ€§ç­‰ã€‚</p>
<p>â€‹	I&#x2F;Oè®¾å¤‡ç±»å‹ç¹å¤šï¼ŒæŒ‰è®¾å¤‡çš„<strong>å…±äº«å±æ€§</strong>åˆ†ç±»ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼Œ<strong>ç‹¬å è®¾å¤‡</strong>ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…åªå…è®¸ä¸€ä¸ªç”¨æˆ·ï¼ˆè¿›ç¨‹ï¼‰è®¿é—®çš„è®¾å¤‡ï¼Œå³ä¸´ç•Œèµ„æºã€‚<strong>å…±äº«è®¾å¤‡</strong>ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…å…è®¸å¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®çš„è®¾å¤‡ï¼Œå½“ç„¶ï¼Œæ¯ä¸€æ—¶åˆ»ä»ç„¶åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ï¼Œå¦‚ç£ç›˜ï¼ˆå¯å¯»å€å’Œå¯éšæœºè®¿é—®ï¼‰ã€‚<strong>è™šæ‹Ÿè®¾å¤‡</strong>ï¼Œé€šè¿‡è™šæ‹ŸæŠ€æœ¯å°†ä¸€å°è®¾å¤‡å˜æ¢ä¸ºè‹¥å¹²å°é€»è¾‘è®¾å¤‡ï¼Œä¾›è‹¥å¹²ä¸ªç”¨æˆ·ï¼ˆè¿›ç¨‹ï¼‰åŒæ—¶ä½¿ç”¨ã€‚</p>
<p><strong>I&#x2F;O ç³»ç»Ÿçš„åŸºæœ¬åŠŸèƒ½</strong></p>
<ol>
<li>è®¾å¤‡åˆ†é…</li>
<li>è®¾å¤‡æ˜ å°„</li>
<li>è®¾å¤‡é©±åŠ¨</li>
<li>I&#x2F;Oç¼“å†²åŒºçš„ç®¡ç†</li>
</ol>
<p><strong>é€šç”¨è®¾å¤‡ç®¡ç†åˆ†å±‚æ¨¡å‹</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_20-16-19.png"></p>
<p>â€‹	é€šå¸¸ï¼Œè®¾å¤‡å¹¶ä¸æ˜¯ç›´æ¥ä¸CPUè¿›è¡Œé€šä¿¡ï¼Œè€Œæ˜¯ä¸è®¾å¤‡æ§åˆ¶å™¨é€šä¿¡ï¼Œå› æ­¤ï¼Œåœ¨I&#x2F;Oè®¾å¤‡ä¸­åº”è¯¥å«æœ‰ä¸è®¾å¤‡æ§åˆ¶å™¨ä¹‹é—´çš„æ¥å£ï¼Œåœ¨è¯¥æ¥å£æœ‰ä¸‰ç§ç±»å‹çš„ä¿¡å·ï¼Œå„å¯¹åº”ä¸€æ¡ä¿¡å·çº¿ã€‚</p>
<p>ã€€â‘  æ•°æ®ä¿¡å·çº¿ï¼Œç”¨äºåœ¨è®¾å¤‡æ§åˆ¶å™¨ä¹‹é—´ä¼ é€æ•°æ®ä¿¡å·ï¼Œ<em>å¯¹äºè¾“å…¥è®¾å¤‡è€Œè¨€</em>ï¼Œç”±å¤–ç•Œè¾“å…¥çš„ä¿¡å·ç»è½¬æ¢å™¨è½¬æ¢åæ‰€å½¢æˆçš„æ•°æ®ï¼Œé€šå¸¸å…ˆé€å…¥ç¼“å†²å™¨ä¸­ï¼Œå½“æ•°é‡è¾¾åˆ°ä¸€å®šçš„æ¯”ç‰¹ï¼ˆå­—ç¬¦ï¼‰æ•°åï¼Œå†ä»ç¼“å†²å™¨é€šè¿‡ä¸€ç»„ä¿¡å·çº¿ä¼ é€ç»™è®¾å¤‡æ§åˆ¶å™¨ã€‚<em>å¯¹è¾“å‡ºè®¾å¤‡è€Œè¨€</em>ï¼Œåˆ™å…ˆå°†ä»è®¾å¤‡æ§åˆ¶å™¨ç»è¿‡æ•°æ®ä¿¡å·çº¿ä¼ é€æ¥çš„ä¸€æ‰¹æ•°æ®å…ˆæš‚å­˜äºç¼“å†²å™¨ä¸­ï¼Œç»è½¬æ¢å™¨åšé€‚å½“è½¬æ¢åï¼Œå†é€ä¸ªå­—ç¬¦åœ°è¾“å‡ºã€‚</p>
<p>ã€€â‘¡ æ§åˆ¶ä¿¡å·çº¿ï¼Œä½œä¸ºç”±è®¾å¤‡æ§åˆ¶å™¨å‘I&#x2F;Oè®¾å¤‡å‘é€æ§åˆ¶ä¿¡å·æ—¶çš„é€šè·¯ï¼Œè¯¥ä¿¡å·è§„å®šäº†è®¾å¤‡å°†è¦æ‰§è¡Œçš„æ“ä½œï¼Œå¦‚è¯»æ“ä½œï¼ˆæŒ‡ç”±è®¾å¤‡å‘æ§åˆ¶å™¨ä¼ é€æ•°æ®ï¼‰æˆ–å†™æ“ä½œï¼ˆç”±æ§åˆ¶å™¨æ¥å—æ•°æ®ï¼‰ï¼Œæˆ–æ‰§è¡Œç£å¤´ç§»åŠ¨ç­‰æ“ä½œã€‚</p>
<p>ã€€â‘¢ çŠ¶æ€ä¿¡å·çº¿ï¼Œç”¨äºä¼ é€è®¾å¤‡å½“å‰çŠ¶æ€çš„ä¿¡å·ï¼Œè®¾å¤‡çš„å½“å‰çŠ¶æ€æœ‰æ­£åœ¨è¯»ï¼ˆæˆ–å†™ï¼‰ï¼›è®¾å¤‡å·²è¯»ï¼ˆå†™ï¼‰å®Œæˆï¼Œå¹¶å‡†å¤‡å¥½æ–°çš„æ•°æ®ä¼ é€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160628151650952-1466573946.png"></p>
<p><em><strong>è®¾å¤‡æ§åˆ¶å™¨</strong></em>æ˜¯è®¡ç®—æœºä¸­çš„ä¸€ä¸ªå®ä½“ï¼Œå…¶<strong>ä¸»è¦èŒè´£</strong>æ˜¯<em><strong>æ§åˆ¶ä¸€ä¸ªæˆ–å¤šä¸ªI&#x2F;Oè®¾å¤‡</strong></em>ï¼Œä»¥å®ç°I&#x2F;Oè®¾å¤‡å’Œè®¡ç®—æœºä¹‹é—´çš„æ•°æ®äº¤æ¢ï¼Œå®ƒæ˜¯CPUä¸I&#x2F;Oè®¾å¤‡ä¹‹é—´çš„æ¥å£ï¼Œå®ƒæ¥æ”¶ä»CPUå‘æ¥çš„å‘½ä»¤ï¼Œå¹¶å»æ§åˆ¶I&#x2F;Oè®¾å¤‡å·¥ä½œï¼Œä»¥ä½¿å¤„ç†ä»ç¹æ‚çš„è®¾å¤‡æ§åˆ¶äº‹åŠ¡ä¸­è§£è„±å‡ºæ¥ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯ç¼–å€çš„è®¾å¤‡ï¼Œå½“å®ƒä»…æ§åˆ¶ä¸€ä¸ªè®¾å¤‡æ—¶ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå”¯ä¸€çš„è®¾å¤‡åœ°å€ï¼Œè‹¥æ§åˆ¶å™¨å¯è¿æ¥å¤šä¸ªè®¾å¤‡æ—¶ï¼Œåˆ™åº”è¯¥å«æœ‰å¤šä¸ªè®¾å¤‡åœ°å€ï¼Œå¹¶ä½¿æ¯ä¸ªè®¾å¤‡åœ°å€å¯¹åº”ä¸€ä¸ªè®¾å¤‡ã€‚</p>
<p>åœ¨æ§åˆ¶å™¨ä¸­è®¾ç½®ä¸€çŠ¶æ€å¯„å­˜å™¨ï¼Œç”¨å…¶ä¸­çš„æ¯ä¸€ä½æ¥åæ˜ è®¾å¤‡çš„æŸä¸€ç§çŠ¶æ€ï¼Œå½“CPUå°†è¯¥å¯„å­˜å™¨çš„å†…å­˜è¯»å…¥åï¼Œä¾¿å¯äº†è§£è¯¥è®¾å¤‡çš„çŠ¶æ€ã€‚<strong>I&#x2F;Oé€»è¾‘</strong>ï¼Œç”¨äºå®ç°å¯¹è®¾å¤‡çš„æ§åˆ¶ï¼Œé€šè¿‡ä¸€ç»„æ§åˆ¶çº¿ä¸å¤„ç†æœºäº¤äº’ï¼Œå¤„ç†æœºåˆ©ç”¨è¯¥é€»è¾‘å‘æ§åˆ¶å™¨å‘é€I&#x2F;Oå‘½ä»¤ï¼ŒI&#x2F;Oé€»è¾‘å¯¹æ”¶åˆ°çš„å‘½ä»¤è¿›è¡Œè¯‘ç ï¼Œæ¯å½“CPUè¦å¯åŠ¨ä¸€ä¸ªè®¾å¤‡æ—¶ï¼Œ<em>ä¸€æ–¹é¢å°†å¯åŠ¨å‘½ä»¤å‘é€ç»™æ§åˆ¶å™¨</em>ï¼Œ<em>å¦ä¸€æ–¹é¢åˆåŒæ—¶é€šè¿‡åœ°å€çº¿æŠŠåœ°å€å‘é€ç»™æ§åˆ¶å™¨</em>ï¼Œç”±æ§åˆ¶å™¨çš„I&#x2F;Oé€»è¾‘å¯¹æ”¶åˆ°çš„åœ°å€è¿›è¡Œè¯‘ç ï¼Œå†æ ¹æ®æ‰€è¯‘å‡ºçš„å‘½ä»¤å¯¹æ‰€é€‰è®¾å¤‡è¿›è¡Œæ§åˆ¶ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_20-34-48.png"></p>
<p> <em><strong>I&#x2F;Oé€šé“</strong></em></p>
<p>ã€€è™½ç„¶åœ¨CPUä¸I&#x2F;Oè®¾å¤‡ä¹‹é—´å¢åŠ äº†è®¾å¤‡æ§åˆ¶å™¨åï¼Œå¯ä»¥å¤§å¤§å‡å°‘CPUå¯¹I&#x2F;Oçš„å¹²é¢„ï¼Œä½†æ˜¯å½“ä¸»æœºæ‰€é…ç½®çš„å¤–è®¾å¾ˆå¤šæ—¶ï¼ŒCPUçš„è´Ÿæ‹…ä»ç„¶å¾ˆé‡ï¼Œå› æ­¤ï¼Œåœ¨CPUå’Œè®¾å¤‡æ§åˆ¶å™¨ä¹‹é—´åˆå¢è®¾äº†é€šé“ã€‚å…¶ä¸»è¦ç›®çš„ä½¿ä¸€äº›åŸæ¥ç”±CPUå¤„ç†çš„I&#x2F;Oä»»åŠ¡è½¬ç”±é€šé“æ¥æ‰¿æ‹…ï¼Œä»è€ŒæŠŠCPUä»ç¹æ‚çš„I&#x2F;Oä»»åŠ¡ä¸­è§£è„±å‡ºæ¥ã€‚åœ¨è®¾ç½®äº†é€šé“åï¼Œ<strong>CPUåªéœ€è¦å‘é€šé“å‘é€ä¸€æ¡I&#x2F;OæŒ‡ä»¤ï¼Œé€šé“åœ¨æ”¶åˆ°è¯¥æŒ‡ä»¤åï¼Œä¾¿ä»å†…å­˜ä¸­å–å‡ºæœ¬æ¬¡è¦æ‰§è¡Œçš„é€šé“ç¨‹åºï¼Œç„¶åæ‰§è¡Œè¯¥é€šé“ç¨‹åºï¼Œä»…å½“é€šé“å®Œæˆäº†è§„å®šçš„I&#x2F;Oä»»åŠ¡åï¼Œæ‰å‘CPUå‘ä¸­æ–­ä¿¡å·</strong>ã€‚I&#x2F;Oé€šé“æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¤„ç†æœºï¼Œ<em>å…·æœ‰æ‰§è¡ŒI&#x2F;OæŒ‡ä»¤çš„èƒ½åŠ›</em>ï¼Œå¹¶é€šè¿‡æ‰§è¡Œé€šé“ï¼ˆI&#x2F;Oï¼‰ç¨‹åºæ¥æ§åˆ¶I&#x2F;Oæ“ä½œï¼Œä½†I&#x2F;Oé€šé“ä¸ä¸€èˆ¬çš„å¤„ç†æœºä¸åŒï¼Œå› ä¸ºå…¶æŒ‡ä»¤ç±»å‹å•ä¸€åŒæ—¶æ²¡æœ‰è‡ªå·±çš„å†…å­˜ï¼Œ<em>ä¸CPUå…±äº«ä¸»å†…å­˜</em>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_20-35-21.png"></p>
<p>è™šæ‹Ÿè®¾å¤‡æ˜¯æŒ‡è¢«å¤šä¸ªç”¨æˆ·æˆ–è¿›ç¨‹äº¤æ›¿ä½¿ç”¨çš„è®¾å¤‡ï¼Œå®è§‚ä¸Šå¥½è±¡å¤šä¸ªç”¨æˆ·åŒæ—¶åœ¨ä½¿ç”¨ã€‚(Ã—ï¼‰</p>
<p><font color=red>è™šæ‹Ÿè®¾å¤‡æ˜¯æŒ‡é‡‡ç”¨é‡‡ç”¨æŸç§I&#x2F;OæŠ€æœ¯ï¼Œå°†æŸä¸ªç‹¬å è®¾å¤‡æ”¹è¿›ä¸ºå¤šç”¨æˆ·å…±äº«çš„è®¾å¤‡ï¼Œä»¥æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚(é€šè¿‡è™šæ‹ŸæŠ€æœ¯å°†ä¸€å°ç‹¬å è®¾å¤‡è™šæ‹Ÿæˆå¤šå°é€»è¾‘è®¾å¤‡ï¼Œä¾›å¤šä¸ªè¿›ç¨‹åŒæ—¶ä½¿ç”¨)</font><br>æˆ‘æ„Ÿè§‰è¯´æ³•å·®ä¸å¤šï¼Œä½†æ˜¯ç½‘ä¸Šç»™çš„ç­”æ¡ˆæ˜¯âŒã€‚</p>
<p>é€šé“æŠ€æœ¯æ ¹æœ¬ä¸Šæ˜¯ä»è½¯ä»¶ä¸Šè§£å†³æ“ä½œç³»ç»Ÿå¯¹è¾“å…¥è¾“å‡ºæ“ä½œçš„ æ§åˆ¶é—®é¢˜ã€‚ï¼ˆÃ— ï¼‰åº”è¯¥æ˜¯ç¡¬ä»¶</p>
<p>é€»è¾‘è®¾å¤‡æ˜¯ç‰©ç†è®¾å¤‡å±æ€§çš„è¡¨ç¤ºï¼Œç”¨æ¥æŒ‡å®šæŸä¸€å…·ä½“è®¾å¤‡ã€‚ï¼ˆÃ—ï¼‰ä¸ç‰¹æŒ‡æŸä¸ªå…·ä½“è®¾å¤‡ï¼Œè€Œæ˜¯å¯¹åº”ä¸€ç±»è®¾å¤‡ã€‚</p>
<p>ä»è®¾å¤‡çš„èµ„æºå±æ€§åˆ†ç±»ï¼Œå¯æŠŠè®¾å¤‡åˆ†ä¸ºç‹¬å è®¾å¤‡ã€å…±äº«è®¾å¤‡å’Œè™šæ‹Ÿè®¾å¤‡ã€‚ï¼ˆ âˆšï¼‰</p>
<p>ç”¨æˆ·åœ¨ä½¿ç”¨I&#x2F;Oè®¾å¤‡æ—¶ï¼Œé€šå¸¸é‡‡ç”¨ç‰©ç†è®¾å¤‡åï¼ŒæŒ‡æ˜å…·ä½“çš„è®¾å¤‡ã€‚ï¼ˆÃ—ï¼‰ç”¨æˆ·åœ¨ä½¿ç”¨I&#x2F;Oè®¾å¤‡æ—¶ï¼Œé€šå¸¸é‡‡ç”¨é€»è¾‘è®¾å¤‡åï¼ŒæŒ‡æ˜è®¾å¤‡ç±»å‹ã€‚</p>
<h2 id="ä¸­æ–­å¤„ç†"><a href="#ä¸­æ–­å¤„ç†" class="headerlink" title="ä¸­æ–­å¤„ç†"></a>ä¸­æ–­å¤„ç†</h2><p><strong>ä¸­æ–­å¤„ç†ç¨‹åº</strong></p>
<p>å¯¹äºä¸ºæ¯ä¸€ç±»è®¾å¤‡è®¾ç½®ä¸€ä¸ªI&#x2F;Oè¿›ç¨‹çš„è®¾å¤‡å¤„ç†æ–¹å¼ï¼Œå…¶ä¸­æ–­å¤„ç†ç¨‹åºçš„å¤„ç†è¿‡ç¨‹åˆ†æˆä»¥ä¸‹å‡ ä¸ªæ­¥éª¤<br>â–ªæµ‹å®šæ˜¯å¦æœ‰æœªå“åº”çš„ä¸­æ–­ä¿¡å·<br>â–ªç¨‹åºå®Œæˆå½“å‰æŒ‡ä»¤åæµ‹è¯•æ˜¯å¦æœ‰æœªå“åº”çš„ä¸­æ–­ä¿¡å·ã€‚<br>â–ªå¦‚æœæ²¡æœ‰ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚<br>â–ªå¦‚æœæœ‰ï¼Œåˆ™åœæ­¢åŸæœ‰è¿›ç¨‹çš„æ‰§è¡Œï¼Œå‡†å¤‡è½¬å»æ‰§è¡Œä¸­æ–­å¤„ç†ç¨‹åºï¼Œä¸ºæŠŠå¤„ç†æœºçš„æ§åˆ¶æƒè½¬äº¤ç»™ä¸­æ–­å¤„ç†ç¨‹åºåšå‡†å¤‡ã€‚</p>
<p><strong>ä¿æŠ¤è¢«ä¸­æ–­è¿›ç¨‹çš„CPU ç¯å¢ƒ</strong></p>
<p>é€šå¸¸ç”±ç¡¬ä»¶è‡ªåŠ¨å°†å¤„ç†æœºçŠ¶æ€å­—PSW å’Œç¨‹åºè®¡æ•°å™¨(PC)ä¸­çš„å†…å®¹ï¼Œä¿å­˜åœ¨ä¸­æ–­ä¿ç•™åŒº(æ ˆ)ä¸­ï¼Œç„¶åæŠŠè¢«ä¸­æ–­è¿›ç¨‹çš„CPUç°åœºä¿¡æ¯(å³åŒ…æ‹¬æ‰€æœ‰çš„CPUå¯„å­˜å™¨ï¼Œå¦‚é€šç”¨å¯„å­˜å™¨ã€æ®µå¯„å­˜å™¨ç­‰å†…å®¹)éƒ½å‹å…¥ä¸­æ–­æ ˆä¸­ã€‚</p>
<p><strong>è½¬å…¥ç›¸åº”çš„è®¾å¤‡å¤„ç†ç¨‹åº</strong></p>
<p>ç”±å¤„ç†æœºå¯¹å„ä¸ªä¸­æ–­æºè¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®å®šå¼•èµ·æœ¬æ¬¡ä¸­æ–­çš„I&#x2F;O è®¾å¤‡ï¼Œå¹¶å‘é€ä¸€åº”ç­”ä¿¡å·ç»™å‘å‡ºä¸­æ–­è¯·æ±‚çš„è¿›ç¨‹ï¼Œä½¿ä¹‹æ¶ˆé™¤è¯¥ä¸­æ–­è¯·æ±‚ä¿¡å·ï¼Œç„¶åå°†ç›¸åº”çš„è®¾å¤‡ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€è£…å…¥åˆ°ç¨‹åºè®¡æ•°å™¨ä¸­ï¼Œä½¿å¤„ç†æœºè½¬å‘ä¸­æ–­å¤„ç†ç¨‹åºã€‚</p>
<p><strong>ä¸­æ–­å¤„ç†</strong></p>
<p>è¯¥ç¨‹åºé¦–å…ˆä»è®¾å¤‡æ§åˆ¶å™¨ä¸­è¯»å‡ºè®¾å¤‡çŠ¶æ€ï¼Œä»¥åˆ¤åˆ«æœ¬æ¬¡ä¸­æ–­æ˜¯æ­£å¸¸å®Œæˆä¸­æ–­ï¼Œè¿˜æ˜¯å¼‚å¸¸ç»“æŸä¸­æ–­ã€‚<br>â–ª è‹¥æ˜¯å‰è€…ï¼Œä¸­æ–­ç¨‹åºä¾¿è¿›è¡Œç»“æŸå¤„ç†ï¼›è‹¥è¿˜æœ‰å‘½ä»¤ï¼Œå¯å†å‘æ§åˆ¶å™¨å‘é€æ–°çš„å‘½ä»¤ï¼Œè¿›è¡Œæ–°ä¸€è½®çš„æ•°æ®ä¼ é€ã€‚<br>â–ª è‹¥æ˜¯å¼‚å¸¸ç»“æŸä¸­æ–­ï¼Œåˆ™æ ¹æ®å‘ç”Ÿå¼‚å¸¸çš„åŸå› åšç›¸åº”çš„å¤„ç†ã€‚</p>
<p><strong>æ¢å¤è¢«ä¸­æ–­è¿›ç¨‹çš„ç°åœº</strong></p>
<p>å½“ä¸­æ–­å¤„ç†å®Œæˆä»¥åï¼Œä¾¿å¯å°†ä¿å­˜åœ¨ä¸­æ–­æ ˆä¸­çš„è¢«ä¸­æ–­è¿›ç¨‹çš„ç°åœºä¿¡æ¯å–å‡ºï¼Œå¹¶è£…å…¥åˆ°ç›¸åº”çš„å¯„å­˜å™¨ä¸­ï¼Œå…¶ä¸­åŒ…æ‹¬è¯¥ç¨‹åºä¸‹ä¸€æ¬¡è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€N+1ã€å¤„ç†æœºçŠ¶æ€å­—<br>PSWï¼Œä»¥åŠå„é€šç”¨å¯„å­˜å™¨å’Œæ®µå¯„å­˜å™¨çš„å†…å®¹ã€‚è¿™æ ·ï¼Œå½“å¤„ç†æœºå†æ‰§è¡Œæœ¬ç¨‹åºæ—¶ï¼Œä¾¿ä»N+1å¤„å¼€å§‹ï¼Œæœ€ç»ˆè¿”å›åˆ°è¢«ä¸­æ–­çš„ç¨‹åºã€‚</p>
<h2 id="I-Oè®¾å¤‡çš„æ§åˆ¶æ–¹å¼"><a href="#I-Oè®¾å¤‡çš„æ§åˆ¶æ–¹å¼" class="headerlink" title="I&#x2F;Oè®¾å¤‡çš„æ§åˆ¶æ–¹å¼"></a>I&#x2F;Oè®¾å¤‡çš„æ§åˆ¶æ–¹å¼</h2><p><strong>è½®è¯¢çš„å¯ç¼–ç¨‹I&#x2F;Oæ–¹å¼</strong></p>
<p>â€‹	å¯¹I&#x2F;Oè®¾å¤‡çš„æ§åˆ¶é‡‡å–<strong>ç¨‹åºI&#x2F;O</strong>æ–¹å¼ï¼Œæˆ–ç§°ä¸º<font color=blue>å¿™-ç­‰å¾…</font>æ–¹å¼ï¼Œå³åœ¨å¤„ç†æœºå‘æ§åˆ¶å™¨å‘å‡ºä¸€æ¡I&#x2F;OæŒ‡ä»¤å¯åŠ¨è¾“å…¥è®¾å¤‡è¾“å…¥æ•°æ®æ—¶ï¼Œè¦åŒæ—¶æŠŠçŠ¶æ€å¯„å­˜å™¨ä¸­çš„å¿™&#x2F;é—²æ ‡å¿—busyè®¾ç½®ä¸º1ï¼Œç„¶åä¾¿ä¸æ–­åœ°å¾ªç¯æµ‹è¯•busyï¼Œåªæœ‰å½“å…¶ä¸º0æ—¶ï¼Œè¡¨ç¤ºè¾“å…¥å®Œæˆï¼Œäºæ˜¯å¤„ç†æœºå°†æ•°æ®å¯„å­˜å™¨ä¸­çš„æ•°æ®å–å‡ºï¼Œé€å…¥å†…å­˜æŒ‡å®šå•å…ƒä¸­ï¼Œè¿™æ ·ä¾¿å®Œæˆäº†ä¸€æ¬¡çš„I&#x2F;Oã€‚åœ¨ç¨‹åºI&#x2F;Oæ–¹å¼ä¸­ï¼Œç”±äºCPUçš„é«˜é€Ÿæ€§å’ŒI&#x2F;Oè®¾å¤‡çš„ä½é€Ÿæ€§ï¼Œè‡´ä½¿CPUçš„ç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½å¤„äºç­‰å¾…I&#x2F;Oè®¾å¤‡å®Œæˆæ•°æ®I&#x2F;Oçš„å¾ªç¯æµ‹è¯•ä¸­ï¼Œé€ æˆå¯¹CPUçš„æå¤§æµªè´¹ã€‚</p>
<p><strong>ä¸­æ–­çš„å¯ç¼–ç¨‹I&#x2F;Oæ–¹å¼</strong></p>
<p>ã€€å½“æŸè¿›ç¨‹è¦å¯åŠ¨æŸä¸ªI&#x2F;Oè®¾å¤‡å·¥ä½œæ—¶ï¼Œä¾¿ç”±CPUå‘ç›¸åº”çš„è®¾å¤‡æ§åˆ¶å™¨å‘å‡ºä¸€æ¡I&#x2F;Oå‘½ä»¤ï¼Œç„¶åç«‹å³è¿”å›ç»§ç»­æ‰§è¡ŒåŸæ¥çš„ä»»åŠ¡ï¼Œè®¾å¤‡æ§åˆ¶å™¨äºæ˜¯æŒ‰ç…§è¯¥å‘½ä»¤çš„è¦æ±‚å»æ§åˆ¶æŒ‡å®šI&#x2F;Oè®¾å¤‡ï¼Œæ­¤æ—¶ï¼ŒCPUä¸I&#x2F;Oè®¾å¤‡å¹¶è¡Œæ“ä½œã€‚ä¸€æ—¦æ•°æ®è¿›å…¥æ•°æ®å¯„å­˜å™¨ï¼Œæ§åˆ¶å™¨ä¾¿é€šè¿‡æ§åˆ¶çº¿å‘CPUå‘é€ä¸€ä¸ªä¸­æ–­ä¿¡å·ï¼Œç”±CPUæ£€æŸ¥è¾“å…¥è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™ï¼Œè‹¥æ— é”™ï¼Œä¾¿ç”±æ§åˆ¶å™¨å‘é€å–èµ°æ•°æ®çš„ä¿¡å·ï¼Œå†é€šè¿‡æ§åˆ¶å™¨åŠæ•°æ®çº¿å°†æ•°æ®å†™å…¥å†…å­˜æŒ‡å®šå•å…ƒä¸­ã€‚åœ¨I&#x2F;Oè®¾å¤‡è¾“å…¥æ¯ä¸ªæ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œç”±äºæ— éœ€CPUå¹²é¢„ï¼Œå› è€Œå¯ä½¿CPUä¸I&#x2F;Oè®¾å¤‡å¹¶è¡Œå·¥ä½œï¼Œä»…å½“å®Œæˆä¸€ä¸ªæ•°æ®è¾“å…¥æ—¶ï¼Œæ‰éœ€CPUèŠ±è´¹æçŸ­çš„æ—¶é—´å»åšä¸€äº›ä¸­æ–­å¤„ç†ã€‚</p>
<p><strong>ç›´æ¥å­˜å‚¨å™¨è®¿é—®æ–¹å¼</strong></p>
<p>ã€€è™½ç„¶ä¸­æ–­é©±åŠ¨I&#x2F;Oæ¯”ç¨‹åºI&#x2F;Oæ–¹å¼æ›´æœ‰æ•ˆï¼Œä½†æ˜¯ï¼Œå®ƒä»æ˜¯ä»¥å­—ï¼ˆèŠ‚ï¼‰ä¸ºå•ä½è¿›è¡ŒI&#x2F;Oçš„ï¼Œæ¯å½“å®Œæˆä¸€ä¸ªå­—ï¼ˆèŠ‚ï¼‰çš„I&#x2F;Oæ—¶ï¼Œæ§åˆ¶å™¨ä¾¿è¦å‘CPUè¯·æ±‚ä¸€æ¬¡ä¸­æ–­ï¼Œæ¢è¨€ä¹‹ï¼Œé‡‡ç”¨ä¸­æ–­é©±åŠ¨I&#x2F;Oæ–¹å¼æ—¶çš„CPUæ˜¯ä»¥å­—ï¼ˆèŠ‚ï¼‰ä¸ºå•ä½è¿›è¡Œå¹²é¢„çš„ï¼Œå°†è¿™ç§æ–¹å¼ç”¨äºå—è®¾å¤‡çš„I&#x2F;Oæ˜¯éå¸¸ä½æ•ˆçš„ï¼Œä¾‹å¦‚ï¼Œä¸ºäº†ä»ç£ç›˜è¯»å–1KBçš„æ•°æ®å—ï¼Œéœ€è¦ä¸­æ–­CPU1Kæ¬¡ï¼Œä¸ºäº†è¿›ä¸€æ­¥å‡å°‘CPUå¯¹I&#x2F;Oçš„å¹²é¢„è€Œå¼•å…¥äº†ç›´æ¥å­˜å‚¨å™¨è®¿é—®æ–¹å¼ï¼Œè¯¥æ–¹å¼çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<p>ã€€â‘  æ•°æ®ä¼ è¾“çš„åŸºæœ¬å•ä½æ˜¯<strong>æ•°æ®å—</strong>ï¼Œå³åœ¨CPUä¸I&#x2F;Oè®¾å¤‡ä¹‹é—´ï¼Œæ¯æ¬¡ä¼ é€è‡³å°‘ä¸€ä¸ªæ•°æ®å—ã€‚</p>
<p>ã€€â‘¡ æ‰€ä¼ é€çš„æ•°æ®æ˜¯<strong>ä»è®¾å¤‡ç›´æ¥é€å…¥å†…å­˜</strong>çš„ï¼Œæˆ–è€…ç›¸åã€‚</p>
<p>ã€€â‘¢ ä»…åœ¨ä¼ é€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å—çš„å¼€å§‹å’Œç»“æŸæ—¶ï¼Œéœ€è¦CPUå¹²é¢„ï¼Œæ•´å—æ•°æ®çš„ä¼ é€æ˜¯åœ¨æ§åˆ¶å™¨çš„æ§åˆ¶ä¸‹å®Œæˆçš„ã€‚</p>
<p>ã€€DMAæ§åˆ¶å™¨ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œä¸»æœºä¸DMAæ§åˆ¶å™¨çš„æ¥å£ï¼›DMAæ§åˆ¶å™¨ä¸å—è®¾å¤‡çš„æ¥å£ï¼›I&#x2F;Oæ§åˆ¶é€»è¾‘ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160628173514952-543939858.png"></p>
<p>ã€€â‘  å‘½ä»¤&#x2F;çŠ¶æ€å¯„å­˜å™¨ï¼ˆCRï¼‰ï¼Œç”¨äºæ¥æ”¶ä»CPUå‘é€æ¥çš„I&#x2F;Oå‘½ä»¤ï¼Œæˆ–æœ‰å…³æ§åˆ¶ä¿¡æ¯ï¼Œæˆ–è®¾å¤‡çš„çŠ¶æ€ã€‚</p>
<p>ã€€â‘¡ å†…å­˜åœ°å€å¯„å­˜å™¨ï¼ˆMARï¼‰ï¼Œåœ¨è¾“å…¥æ—¶ï¼Œå®ƒå­˜æ”¾æŠŠæ•°æ®ä»è®¾å¤‡ä¼ é€åˆ°å†…å­˜çš„èµ·å§‹ç›®æ ‡åœ°å€ï¼Œåœ¨è¾“å‡ºæ—¶ï¼Œå®ƒå­˜æ”¾ç”±å†…å­˜åˆ°è®¾å¤‡çš„å†…å­˜æºåœ°å€ã€‚</p>
<p>ã€€â‘¢ æ•°æ®å¯„å­˜å™¨ï¼ˆDRï¼‰ï¼Œç”¨äºæš‚å­˜ä»è®¾å¤‡åˆ°å†…å­˜ï¼Œæˆ–ä»å†…å­˜åˆ°è®¾å¤‡çš„æ•°æ®ã€‚</p>
<p>ã€€â‘£ æ•°æ®è®¡æ•°å™¨ï¼ˆDCï¼‰ï¼Œå­˜æ”¾æœ¬æ¬¡CPUè¦è¯»æˆ–å†™çš„å­—ï¼ˆèŠ‚ï¼‰æ•°ã€‚</p>
<p> ã€€å½“CPUè¦ä»ç£ç›˜è¯»å…¥ä¸€ä¸ªæ•°æ®å—æ—¶ï¼Œä¾¿å‘ç£ç›˜æ§åˆ¶å™¨å‘é€ä¸€æ¡è¯»å‘½ä»¤ï¼Œè¯¥å‘½ä»¤è¢«é€åˆ°å…¶ä¸­çš„å‘½ä»¤å¯„å­˜å™¨ï¼ˆCRï¼‰ä¸­ï¼ŒåŒæ—¶ï¼Œè¿˜éœ€è¦å‘é€æœ¬æ¬¡è¦å°†æ•°æ®è¯»å…¥çš„å†…å­˜èµ·å§‹ç›®æ ‡åœ°å€ï¼Œè¯¥åœ°å€è¢«é€å…¥å†…å­˜åœ°å€å¯„å­˜å™¨ï¼ˆMARï¼‰ä¸­ï¼Œæœ¬æ¬¡è¦è¯»æ•°æ®çš„å­—ï¼ˆèŠ‚ï¼‰æ•°è¢«é€å…¥æ•°æ®å¯„å­˜å™¨ï¼ˆDCï¼‰ä¸­ï¼Œè¿˜é¡»å°†ç£ç›˜ä¸­çš„æºåœ°å€ç›´æ¥é€è‡³DMAæ§åˆ¶å™¨çš„I&#x2F;Oæ§åˆ¶é€»è¾‘ä¸Šï¼Œç„¶åï¼Œå¯åŠ¨DMAæ§åˆ¶å™¨è¿›è¡Œæ•°æ®ä¼ é€ï¼Œä»¥åï¼ŒCPUä¾¿å¯å»å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œæ­¤åï¼Œæ•´ä¸ªæ•°æ®ä¼ é€è¿‡ç¨‹ä¾¿ç”±DMAæ§åˆ¶å™¨è¿›è¡Œæ§åˆ¶ï¼Œå½“DMAæ§åˆ¶å™¨å·²ä»ç£ç›˜ä¸­è¯»å…¥ä¸€ä¸ªå­—ï¼ˆèŠ‚ï¼‰çš„æ•°æ®å¹¶é€å…¥æ•°æ®å¯„å­˜å™¨ï¼ˆDRï¼‰åï¼Œå†æŒªç”¨ä¸€ä¸ªå­˜å‚¨å™¨å‘¨æœŸï¼Œå°†è¯¥å­—ï¼ˆèŠ‚ï¼‰ä¼ é€åˆ°MARæ‰€æŒ‡ç¤ºçš„å†…å­˜å•å…ƒä¸­ï¼Œæ¥ç€ä¾¿å¯¹MARå†…å®¹åŠ 1ï¼Œå°†DCå†…å­˜å‡1ï¼Œè‹¥å‡åDCå†…å­˜ä¸ä¸º0ï¼Œè¡¨ç¤ºä¼ é€æœªå®Œæˆï¼Œä¾¿ç»§ç»­ä¼ é€ä¸‹ä¸€ä¸ªå­—ï¼ˆèŠ‚ï¼‰ï¼Œå¦åˆ™ï¼Œç”±DMAæ§åˆ¶å‘å‡ºä¸­æ–­è¯·æ±‚ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160628174538171-789907791.png"></p>
<p>ã€€ä¸‹å›¾å±•ç¤ºäº†ä¸‰ç§ä¸åŒæ–¹å¼çš„æµç¨‹ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160628193955531-1354950266.png">ã€€ã€€</p>
<p><strong>I&#x2F;Oé€šé“æ§åˆ¶æ–¹å¼</strong></p>
<p>ã€€è™½ç„¶DMAæ–¹å¼æ¯”èµ·ä¸­æ–­æ–¹å¼å·²ç»æ˜¾è‘—åœ°å‡å°‘CPUçš„å¹²é¢„ï¼Œå³å·²ç”±ä»¥å­—ï¼ˆèŠ‚ï¼‰ä¸ºå•ä½çš„å¹²é¢„å‡å°‘åˆ°äº†ä»¥æ•°æ®å—ä¸ºå•ä½è¿›è¡Œå¹²é¢„ï¼Œä½†CPUæ¯å‘å‡ºä¸€æ¡I&#x2F;OæŒ‡ä»¤ï¼Œä¹Ÿåªèƒ½å»è¯»ï¼ˆæˆ–å†™ï¼‰ä¸€ä¸ªè¿ç»­çš„æ•°æ®å—ï¼Œè€Œå½“æˆ‘ä»¬éœ€è¦ä¸€æ¬¡å»è¯»å¤šä¸ªæ•°æ®å—ä¸”å°†ä»–ä»¬åˆ†åˆ«ä¼ é€åˆ°ä¸åŒçš„å†…å­˜åŒºåŸŸï¼Œæˆ–è€…ç›¸åæ—¶ï¼Œåˆ™é¡»ç”±CPUåˆ†åˆ«å‘å‡ºå¤šæ¡I&#x2F;OæŒ‡ä»¤åŠè¿›è¡Œå¤šæ¬¡ä¸­æ–­æ‰èƒ½å®Œæˆã€‚I&#x2F;Oé€šé“æ–¹å¼æ˜¯DMAçš„å‘å±•ï¼Œå®ƒå¯ä»¥è¿›ä¸€æ­¥å‡å°‘CPUçš„å¹²é¢„ï¼Œå³æŠŠä¸€ä¸ªæ•°æ®å—çš„è¯»ï¼ˆæˆ–å†™ï¼‰ä¸ºå•ä½çš„å¹²é¢„å‡å°‘ä¸º<strong>å¯¹ä¸€ç»„æ•°æ®å—çš„è¯»ï¼ˆæˆ–å†™ï¼‰åŠæœ‰å…³çš„æ§åˆ¶å’Œç®¡ç†ä¸ºå•ä½çš„å¹²é¢„</strong>ã€‚åŒæ—¶ï¼Œå¯ä»¥å®ç°CPUã€é€šé“ã€I&#x2F;Oè®¾å¤‡çš„å¹¶è¡Œæ“ä½œï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_21-17-58.png"></p>
<p><strong>ä»€ä¹ˆæ˜¯ä¸­æ–­ï¼Ÿç³»ç»Ÿå†…éƒ¨ä¸­æ–­ä¸å¤–éƒ¨ä¸­æ–­æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p>ä¸­æ–­æ˜¯æŒ‡è®¡ç®—æœºåœ¨æ‰§è¡Œç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œç”±äºæŸäº›äº‹ä»¶çš„å‘ç”Ÿè€Œæš‚æ—¶ä¸­æ­¢å½“å‰ç¨‹åºçš„æ‰§è¡Œï¼Œè½¬è€Œå»æ‰§è¡Œç›¸åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¤„ç†å®Œæ¯•åå†è¿”å›åŸæ¥ç¨‹åºç»§ç»­æ‰§è¡Œçš„è¿‡ç¨‹</p>
<p>ä¸­æ–­å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šç³»ç»Ÿå†…éƒ¨ä¸­æ–­å’Œå¤–éƒ¨ä¸­æ–­ã€‚ç³»ç»Ÿå†…éƒ¨ä¸­æ–­æ˜¯æŒ‡ç”±CPUå†…éƒ¨äº§ç”Ÿçš„ä¸­æ–­ï¼Œä¾‹å¦‚é™¤é›¶é”™è¯¯ã€æº¢å‡ºé”™è¯¯ç­‰ã€‚å¤–éƒ¨ä¸­æ–­æ˜¯æŒ‡ç”±CPUå¤–éƒ¨äº§ç”Ÿçš„ä¸­æ–­ï¼Œä¾‹å¦‚æ¥è‡ªå¤–è®¾çš„ä¸­æ–­è¯·æ±‚ã€‚å¤–éƒ¨ä¸­æ–­å¯ä»¥è¿›ä¸€æ­¥åˆ†ä¸ºå¯å±è”½ä¸­æ–­å’Œä¸å¯å±è”½ä¸­æ–­ã€‚å¯å±è”½ä¸­æ–­æ˜¯æŒ‡å¯ä»¥è¢«å±è”½æˆ–å¿½ç•¥çš„ä¸­æ–­ï¼Œä¾‹å¦‚æ¥è‡ªç¡¬ç›˜ã€æ‰“å°æœºã€ç½‘å¡ç­‰å¤–è®¾çš„ä¸­æ–­è¯·æ±‚ã€‚ä¸å¯å±è”½ä¸­æ–­æ˜¯æŒ‡ä¸èƒ½è¢«å±è”½æˆ–å¿½ç•¥çš„ä¸­æ–­ï¼Œä¾‹å¦‚ç”µæºæ‰ç”µã€ç¡¬ä»¶çº¿è·¯æ•…éšœç­‰ã€‚</p>
<p><strong>ç¼ºé¡µä¸­æ–­ä¸ä¸€èˆ¬ä¸­æ–­çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>ç¼ºé¡µä¸­æ–­ä½œä¸ºä¸­æ–­,åŒæ ·éœ€è¦ç»å†ä¿æŠ¤CPUç°åœºã€åˆ†æä¸­æ–­åŸå› ã€è½¬ç¼ºé¡µä¸­æ–­å¤„ç†ç¨‹åºè¿›è¡Œå¤„ç†ã€æ¢å¤CPUç°åœºç­‰æ­¥éª¤ã€‚ä½†ç¼ºé¡µä¸­æ–­åˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¸­æ–­,å®ƒä¸ä¸€èˆ¬ä¸­æ–­çš„ä¸»è¦åŒºåˆ«æ˜¯:</p>
<p>(1) åœ¨æŒ‡ä»¤æ‰§è¡ŒæœŸé—´äº§ç”Ÿå’Œå¤„ç†ä¸­æ–­ä¿¡å·ã€‚é€šå¸¸,CPUéƒ½æ˜¯åœ¨ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå®Œåå»æ£€æŸ¥æ˜¯å¦æœ‰ä¸­æ–­è¯·æ±‚åˆ°è¾¾ã€‚è‹¥æœ‰ä¾¿å»å“åº”ä¸­æ–­;å¦åˆ™ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚è€Œç¼ºé¡µä¸­æ–­æ˜¯åœ¨æŒ‡ä»¤æ‰§è¡ŒæœŸé—´,å‘ç°æ‰€è¦è®¿é—®çš„æŒ‡ä»¤æˆ–æ•°æ®ä¸åœ¨å†…å­˜æ—¶äº§ç”Ÿå’Œå¤„ç†çš„ã€‚</p>
<p>(2) ä¸€æ¡æŒ‡ä»¤åœ¨æ‰§è¡ŒæœŸé—´,å¯èƒ½äº§ç”Ÿå¤šæ¬¡ç¼ºé¡µä¸­æ–­ã€‚ä¾‹å¦‚,å¯¹äºä¸€æ¡è¯»å–æ•°æ®çš„å¤šå­—èŠ‚æŒ‡ä»¤,æŒ‡ä»¤æœ¬èº«è·¨è¶Šä¸¤ä¸ªé¡µé¢,å‡å®šæŒ‡ä»¤åä¸€éƒ¨åˆ†æ‰€åœ¨é¡µé¢å’Œæ•°æ®æ‰€åœ¨é¡µé¢å‡ä¸åœ¨å†…å­˜,åˆ™è¯¥æŒ‡ä»¤çš„æ‰§è¡Œè‡³å°‘äº§ç”Ÿä¸¤æ¬¡ç¼ºé¡µä¸­æ–­ã€‚</p>
<p>æ€»ä¹‹ï¼Œç¼ºé¡µä¸­æ–­ä¸ä¸€èˆ¬ä¸­æ–­çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬äº§ç”Ÿå’Œå¤„ç†çš„æ—¶é—´ä¸åŒã€‚ç¼ºé¡µä¸­æ–­æ˜¯åœ¨æŒ‡ä»¤æ‰§è¡ŒæœŸé—´äº§ç”Ÿå’Œå¤„ç†çš„ï¼Œè€Œä¸€èˆ¬ä¸­æ–­æ˜¯åœ¨æŒ‡ä»¤æ‰§è¡Œå®Œåæ£€æŸ¥æ˜¯å¦æœ‰ä¸­æ–­è¯·æ±‚å†è¿›è¡Œå¤„ç†çš„ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯è®¾å¤‡çš„ç‹¬ç«‹æ€§ï¼Ÿ</strong></p>
<p>ä¹Ÿç§°è®¾å¤‡æ— å…³æ€§ï¼ŒæŒ‡åº”ç”¨ç¨‹åºç‹¬ç«‹äºå…·ä½“ä½¿ç”¨çš„ç‰©ç†è®¾å¤‡ã€‚åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨é€»è¾‘è®¾å¤‡åè¯·æ±‚ä½¿ç”¨æŸç±»è®¾å¤‡ï¼Œç³»ç»Ÿå®é™…æ‰§è¡Œæ—¶ä½¿ç”¨ç‰©ç†è®¾å¤‡åï¼Œç³»ç»Ÿå®Œæˆé€»è¾‘è®¾å¤‡ååˆ°ç‰©ç†è®¾å¤‡åçš„è½¬æ¢ã€‚</p>
<p><strong>I&#x2F;Oæ§åˆ¶æ–¹å¼ä¸­çš„ä¸­æ–­æ§åˆ¶æ–¹å¼å’ŒDMAæ–¹å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</strong></p>
<p>(1) ä¸­æ–­æ–¹å¼æ˜¯åœ¨æ•°æ®ç¼“å†²å¯„å­˜åŒºæ»¡å,å‘ä¸­æ–­è¯·æ±‚,CPUè¿›è¡Œä¸­æ–­å¤„ç†,ä½†å®ƒä»¥å­—ï¼ˆèŠ‚)ä¸ºå•ä½è¿›è¡ŒI&#x2F;0ï¼Œå¯¹å—è®¾å¤‡ä½æ•ˆã€‚;DMAæ–¹å¼åˆ™æ˜¯åœ¨æ‰€è¦æ±‚ä¼ é€çš„æ•°æ®å—å…¨éƒ¨ä¼ é€ç»“æŸæ—¶è¦æ±‚CPUè¿›è¡Œä¸­æ–­å¤„ç†,å¤§å¤§å‡å°‘äº†CPUè¿›è¡Œä¸­æ–­å¤„ç†çš„æ¬¡æ•°ã€‚</p>
<p>(2) ä¸­æ–­æ–¹å¼çš„æ•°æ®ä¼ é€æ˜¯ç”±CPUæ§åˆ¶å®Œæˆçš„;è€ŒDMAæ–¹å¼åˆ™æ˜¯åœ¨DMAæ§åˆ¶å™¨çš„æ§åˆ¶ä¸‹ä¸ç»è¿‡CPUæ§åˆ¶å®Œæˆçš„ã€‚</p>
<h2 id="ç¼“å†²ç®¡ç†"><a href="#ç¼“å†²ç®¡ç†" class="headerlink" title="ç¼“å†²ç®¡ç†"></a>ç¼“å†²ç®¡ç†</h2><p>ã€€åœ¨è®¾å¤‡ç®¡ç†ä¸­ï¼Œä¸ºäº†ç¼“å’ŒCPUä¸I&#x2F;Oè®¾å¤‡é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾ï¼Œæé«˜CPUä¸I&#x2F;Oè®¾å¤‡çš„å¹¶è¡Œæ€§ï¼Œåœ¨I&#x2F;Oè®¾å¤‡ä¸å¤„ç†æœºäº¤æ¢æ•°æ®æ—¶éƒ½ç”¨åˆ°äº†ç¼“å†²åŒºã€‚</p>
<p>ã€€â‘  ç¼“å’ŒCPUå’ŒI&#x2F;Oè®¾å¤‡é—´é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾ã€‚</p>
<p>ã€€â‘¡ å‡å°‘å¯¹CPUçš„ä¸­æ–­é¢‘ç‡ï¼Œæ”¾å®½å¯¹CPUä¸­æ–­å“åº”æ—¶é—´çš„é™åˆ¶ã€‚</p>
<p>ã€€â‘¢ æé«˜CPUå’ŒI&#x2F;Oè®¾å¤‡ä¹‹é—´çš„å¹¶è¡Œæ€§ã€‚</p>
<p><strong>å•ç¼“å†²</strong></p>
<p>ã€€æ¯å½“ç”¨æˆ·è¿›ç¨‹å‘å‡ºä¸€ä¸ªI&#x2F;Oè¯·æ±‚æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¾¿åœ¨ä¸»å­˜ä¸­ä¸ºä¹‹åˆ†é…ä¸€ä¸ªç¼“å†²åŒºï¼Œå‡å®šä»ç£ç›˜æŠŠä¸€å—æ•°æ®è¾“å…¥åˆ°ç¼“å†²åŒºçš„æ—¶é—´ä¸ºTï¼Œæ“ä½œç³»ç»Ÿå°†è¯¥ç¼“å†²åŒºä¸­çš„æ•°æ®ä¼ é€åˆ°ç”¨æˆ·åŒºçš„æ—¶é—´ä¸ºMï¼Œè€ŒCPUå¯¹è¿™ä¸€å—æ•°æ®å¤„ç†ï¼ˆè®¡ç®—ï¼‰çš„æ—¶é—´ä¸ºCï¼Œç”±äºTå’ŒCæ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œå½“T&gt;Cæ—¶ï¼Œç³»ç»Ÿå¯¹æ¯ä¸€å—æ•°æ®çš„å¤„ç†æ—¶é—´ä¸ºM+Tï¼Œåä¹‹ï¼Œä¸ºM+Cï¼Œç³»ç»Ÿå¯¹æ¯ä¸€å—æ•°æ®çš„å¤„ç†æ—¶é—´ä¸º<strong>Max(Cï¼ŒT) + M</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160628201003046-1717232929.png"></p>
<p>ã€€åœ¨å­—ç¬¦è®¾å¤‡è¾“å…¥æ—¶ï¼Œç¼“å†²åŒºç”¨äºæš‚å­˜ç”¨æˆ·è¾“å…¥çš„ä¸€è¡Œæ•°æ®ï¼Œåœ¨è¾“å…¥æœŸé—´ï¼Œç”¨æˆ·è¿›ç¨‹è¢«æŒ‚èµ·ä»¥ç­‰å¾…æ•°æ®è¾“å…¥å®Œæ¯•ï¼Œåœ¨è¾“å‡ºæ—¶ï¼Œç”¨æˆ·è¿›ç¨‹å°†ä¸€è¡Œæ•°æ®è¾“å…¥åˆ°ç¼“å†²åŒºåï¼Œç»§ç»­è¿›è¡Œå¤„ç†ï¼Œå½“ç”¨æˆ·è¿›ç¨‹å·²æœ‰ç¬¬äºŒè¡Œæ•°æ®è¾“å‡ºæ—¶ï¼Œå¦‚æœç¬¬ä¸€è¡Œæ•°æ®å°šæœªè¢«æå–å®Œæ¯•ï¼Œåˆ™æ­¤æ—¶ç”¨æˆ·è¿›ç¨‹åº”è¯¥é˜»å¡ã€‚</p>
<p><strong>åŒç¼“å†²</strong></p>
<p>ã€€ä¸ºäº†åŠ å¿«è¾“å…¥å’Œè¾“å‡ºçš„é€Ÿåº¦ï¼Œæé«˜è®¾å¤‡åˆ©ç”¨ç‡ï¼Œäººä»¬åˆå¼•å…¥äº†åŒç¼“å†²åŒºæœºåˆ¶ï¼Œç§°ä¸ºç¼“å†²å¯¹æ¢ï¼Œåœ¨è®¾å¤‡è¾“å…¥æ—¶ï¼Œå…ˆå°†æ•°æ®é€å…¥ç¬¬ä¸€ä¸ªç¼“å†²åŒºï¼Œè£…æ»¡åä¾¿è½¬å‘ç¬¬äºŒä¸ªç¼“å†²åŒºï¼Œæ­¤æ—¶æ“ä½œç³»ç»Ÿå¯ä»¥ä»ç¬¬ä¸€ç¼“å†²åŒºä¸­ç§»å‡ºæ•°æ®ï¼Œå¹¶é€å…¥ç”¨æˆ·è¿›ç¨‹ï¼Œæ¥ç€ç”±CPUå¯¹æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œåœ¨åŒç¼“å†²æ—¶ï¼Œç³»ç»Ÿå¤„ç†ä¸€å—æ•°æ®çš„æ—¶é—´å¯ä»¥ç²—ç•¥åœ°è®¤ä¸ºæ˜¯Max(Cï¼ŒT)ï¼Œå¦‚æœC&lt;Tï¼Œå¯ä½¿å—è®¾å¤‡è¿ç»­è¾“å…¥ï¼Œå¦‚æœC&gt;Tï¼Œåˆ™å¯ä½¿CPUä¸å¿…ç­‰å¾…è®¾å¤‡è¾“å…¥ã€‚å¯¹äºå­—ç¬¦è®¾å¤‡ï¼Œè‹¥é‡‡ç”¨è¡Œè¾“å…¥æ–¹å¼ï¼Œåˆ™é‡‡ç”¨åŒç¼“å†²é€šå¸¸èƒ½æ¶ˆé™¤ç”¨æˆ·çš„ç­‰å¾…æ—¶é—´ï¼Œå³ç”¨æˆ·åœ¨è¾“å…¥å®Œç¬¬ä¸€è¡Œåï¼Œåœ¨CPUæ‰§è¡Œç¬¬ä¸€è¡Œä¸­çš„å‘½ä»¤æ—¶ï¼Œç”¨æˆ·å¯ç»§ç»­å‘ç¬¬äºŒç¼“å†²åŒºè¾“å…¥ä¸‹ä¸€è¡Œæ•°æ®ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160628202211796-1310715249.png"></p>
<p><strong>å¾ªç¯ç¼“å†²</strong></p>
<p>ã€€å½“è¾“å…¥ä¸è¾“å‡ºæˆ–ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çš„é€Ÿåº¦åŸºæœ¬ç›¸åŒ¹é…æ—¶ï¼Œé‡‡ç”¨åŒç¼“å†²èƒ½è·å¾—è¾ƒå¥½çš„æ•ˆæœï¼Œå¯ä½¿ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åŸºæœ¬ä¸Šèƒ½å¹¶è¡Œæ“ä½œï¼Œä½†è‹¥ä¸¤è€…é€Ÿåº¦ç›¸å·®ç”šè¿œï¼ŒåŒç¼“å†²çš„æ•ˆæœåˆ™ä¸å¤Ÿç†æƒ³ï¼Œå› æ­¤ï¼Œå¼•å…¥äº†å¤šç¼“å†²æœºåˆ¶ï¼Œå¯å°†å¤šä¸ªç¼“å†²ç»„ç»‡æˆå¾ªç¯ç¼“å†²å½¢å¼ã€‚å¯¹äºç”¨ä½œè¾“å…¥çš„å¾ªç¯ç¼“å†²ï¼Œé€šå¸¸æ˜¯æä¾›ç»™è¾“å…¥è¿›ç¨‹æˆ–è®¡ç®—è¿›ç¨‹ä½¿ç”¨ï¼Œè¾“å…¥è¿›ç¨‹ä¸æ–­å‘ç©ºç¼“å†²å»è¾“å…¥æ•°æ®ï¼Œè€Œè®¡ç®—è¿›ç¨‹åˆ™ä»ä¸­æå–æ•°æ®è¿›è¡Œè®¡ç®—ã€‚</p>
<p>ã€€å¾ªç¯ç¼“å†²åŒºçš„ç»„æˆå¦‚ä¸‹</p>
<p>ã€€â‘  å¤šä¸ªç¼“å†²åŒºï¼Œåœ¨å¾ªç¯ç¼“å†²åŒºä¸­åŒ…æ‹¬å¤šä¸ªç¼“å†²åŒºï¼Œæ¯ä¸ªç¼“å†²åŒºçš„å¤§å°ç›¸åŒï¼Œä½œä¸ºè¾“å…¥çš„å¤šç¼“å†²åŒºå¯åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼Œç”¨äºè£…è¾“å…¥æ•°æ®çš„ç©ºç¼“å†²åŒºRã€å·²è£…æ»¡æ•°æ®çš„ç¼“å†²åŒºGä»¥åŠè®¡ç®—è¿›ç¨‹æ­£åœ¨ä½¿ç”¨çš„å…ˆè¡Œå·¥ä½œç¼“å†²åŒºC</p>
<p>ã€€â‘¡ å¤šä¸ªæŒ‡é’ˆï¼Œä½œä¸ºè¾“å…¥çš„ç¼“å†²åŒºå¯è®¾ç½®ä¸‰ä¸ªæŒ‡é’ˆï¼Œç”¨äºæŒ‡ç¤ºè®¡ç®—è¿›ç¨‹ä¸‹ä¸€ä¸ªå¯ç”¨ç¼“å†²åŒºGçš„æŒ‡é’ˆNextgã€æŒ‡ç¤ºè¾“å…¥è¿›ç¨‹ä¸‹æ¬¡å¯ç”¨çš„ç©ºç¼“å†²åŒºRçš„æŒ‡é’ˆNextiã€ä»¥åŠç”¨äºæŒ‡ç¤ºè®¡ç®—è¿›ç¨‹æ­£åœ¨ä½¿ç”¨çš„ç¼“å†²åŒºCçš„æŒ‡é’ˆCurrentã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160628203538952-358207840.png"></p>
<p>ã€€è®¡ç®—è¿›ç¨‹å’Œè¾“å…¥è¿›ç¨‹å¯ä»¥åˆ©ç”¨ä¸‹è¿°ä¸¤ä¸ªè¿‡ç¨‹æ¥ä½¿ç”¨å¾ªç¯ç¼“å†²åŒºï¼ˆå¾ªç¯ç¼“å†²çš„ä½¿ç”¨ï¼‰ã€‚</p>
<p>ã€€â‘  Getbufè¿‡ç¨‹ï¼Œå½“è®¡ç®—è¿›ç¨‹è¦ä½¿ç”¨ç¼“å†²åŒºä¸­çš„æ•°æ®æ—¶ï¼Œå¯è°ƒç”¨Getbufè¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹å°†ç”±æŒ‡é’ˆNextgæ‰€æŒ‡ç¤ºçš„ç¼“å†²åŒºæä¾›ç»™è¿›ç¨‹ä½¿ç”¨ï¼Œç›¸åº”çš„ï¼Œé¡»æŠŠå®ƒæ”¹ä¸ºç°è¡Œå·¥ä½œç¼“å†²åŒºï¼Œå¹¶å°†CurrentæŒ‡é’ˆæŒ‡å‘è¯¥ç¼“å†²åŒºçš„ç¬¬ä¸€ä¸ªå•å…ƒï¼ŒåŒæ—¶å°†Nextgç§»å‘ä¸‹ä¸€ä¸ªGç¼“å†²åŒºï¼Œç±»ä¼¼åœ°ï¼Œå½“è¾“å…¥è¿›ç¨‹è¦ä½¿ç”¨ç©ºç¼“å†²åŒºæ¥è£…å…¥æ•°æ®æ—¶ï¼Œè°ƒç”¨Getbufè¿‡ç¨‹ï¼Œç”±è¯¥è¿‡ç¨‹å°†æŒ‡é’ˆNextiæ‰€æŒ‡ç¤ºçš„ç¼“å†²åŒºæä¾›ç»™è¾“å…¥è¿›ç¨‹ä½¿ç”¨ï¼ŒåŒæ—¶å°†NextiæŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªRç¼“å†²åŒºã€‚</p>
<p>ã€€â‘¡ Releasebufè¿‡ç¨‹ï¼Œå½“è®¡ç®—è¿›ç¨‹æŠŠCç¼“å†²åŒºä¸­çš„æ•°æ®æå–å®Œæ¯•æ—¶ï¼Œä¾¿è°ƒç”¨Releasebufè¿‡ç¨‹ï¼Œå°†ç¼“å†²åŒºCé‡Šæ”¾ï¼Œæ­¤æ—¶ï¼ŒæŠŠè¯¥ç¼“å†²åŒºç”±å½“å‰ï¼ˆç°è¡Œï¼‰å·¥ä½œç¼“å†²åŒºCæ”¹ä¸ºç©ºç¼“å†²åŒºRï¼Œç±»ä¼¼åœ°ï¼Œå½“è¾“å…¥è¿›ç¨‹æŠŠç¼“å†²åŒºè£…æ»¡æ—¶ï¼Œä¹Ÿåº”è¯¥è°ƒç”¨Releasebufè¿‡ç¨‹ï¼Œå°†è¯¥ç¼“å†²åŒºé‡Šæ”¾ï¼Œå¹¶æ”¹ä¸ºGç¼“å†²åŒºã€‚</p>
<p>ã€€ä½¿ç”¨è¾“å…¥å¾ªç¯ç¼“å†²ï¼Œå¯ä½¿è¾“å…¥è¿›ç¨‹å’Œè®¡ç®—è¿›ç¨‹å¹¶è¡Œæ‰§è¡Œï¼ˆ<strong>è¿›ç¨‹åŒæ­¥</strong>ï¼‰ï¼Œç›¸åº”åœ°ï¼ŒæŒ‡é’ˆNextiå’ŒæŒ‡é’ˆNextgå°†ä¸æ–­åœ°æ²¿ç€é¡ºæ—¶é’ˆæ–¹å‘ç§»åŠ¨ï¼Œè¿™æ ·å°±ä¼šå‡ºç°å¦‚ä¸‹ä¸¤ç§æƒ…å†µã€‚</p>
<p>ã€€â‘  NextiæŒ‡é’ˆè¿½èµ¶ä¸ŠNextgæŒ‡é’ˆï¼Œè¿™æ„å‘³ç€è¾“å…¥è¿›ç¨‹çš„é€Ÿåº¦å¤§äºè®¡ç®—è¿›ç¨‹å¤„ç†æ•°æ®çš„é€Ÿåº¦ï¼Œå·²æŠŠå…¨éƒ¨å¯ç”¨çš„ç©ºç¼“å†²åŒºè£…æ»¡ï¼Œå†æ— ç¼“å†²åŒºå¯ç”¨ï¼Œæ­¤æ—¶ï¼Œè¾“å…¥è¿›ç¨‹åº”è¯¥é˜»å¡ï¼Œç›´åˆ°è®¡ç®—è¿›ç¨‹æŠŠæŸä¸ªç¼“å†²åŒºä¸­çš„æ•°æ®å…¨éƒ¨æå–å®Œï¼Œä½¿ä¹‹æˆä¸ºç©ºç¼“å†²åŒºRï¼Œå¹¶è°ƒç”¨Releasebufè¿‡ç¨‹å°†å®ƒé‡Šæ”¾æ—¶ï¼Œæ‰å°†è¾“å…¥è¿›ç¨‹å”¤é†’ï¼Œè¿™ç§æƒ…å†µç§°ä¸º<strong>ç³»ç»Ÿå—è®¡ç®—é™åˆ¶</strong>ã€‚</p>
<p>ã€€â‘¡ NextgæŒ‡é’ˆè¿½èµ¶ä¸ŠNextiæŒ‡é’ˆï¼Œè¿™æ„å‘³ç€è¾“å…¥æ•°æ®çš„é€Ÿåº¦ä½äºè®¡ç®—è¿›ç¨‹å¤„ç†æ•°æ®çš„é€Ÿåº¦ï¼Œä½¿å…¨éƒ¨è£…æœ‰è¾“å…¥æ•°æ®çš„ç¼“å†²åŒºéƒ½è¢«æŠ½ç©ºï¼Œå†æ— è£…æœ‰æ•°æ®çš„ç¼“å†²åŒºä¾›è®¡ç®—è¿›ç¨‹æå–æ•°æ®ï¼Œè¿™æ—¶ï¼Œè®¡ç®—è¿›ç¨‹åº”è¯¥é˜»å¡ï¼Œç›´è‡³è¾“å…¥è¿›ç¨‹åˆè£…æ»¡æŸä¸ªç¼“å†²åŒºï¼Œå¹¶è°ƒç”¨Releasebufè¿‡ç¨‹å°†å®ƒé‡Šæ”¾æ—¶ï¼Œæ‰å»å”¤é†’è®¡ç®—è¿›ç¨‹ï¼Œè¿™ç§æƒ…å†µç§°ä¸º<strong>ç³»ç»Ÿå—I&#x2F;Oé™åˆ¶</strong>ã€‚</p>
<p><strong>ç¼“å†²æ± </strong></p>
<p>â€‹	ä¸Šè¿°çš„ç¼“å†²åŒºä»…é€‚ç”¨äºæŸç‰¹å®šçš„I&#x2F;Oè¿›ç¨‹å’Œè®¡ç®—è¿›ç¨‹ï¼Œå› è€Œå®ƒä»¬å±äºä¸“ç”¨ç¼“å†²ï¼Œå½“ç³»ç»Ÿè¾ƒå¤§æ—¶ï¼Œå°†ä¼šæœ‰è®¸å¤šè¿™æ ·çš„å¾ªç¯ç¼“å†²ï¼Œè¿™æ ·ä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œè€Œä¸”åˆ©ç”¨ç‡ä¸é«˜ï¼Œä¸ºäº†æé«˜ç¼“å†²åŒºçš„åˆ©ç”¨ç‡ï¼Œå¼•å…¥ç¼“å†²æ± ï¼Œåœ¨æ± ä¸­è®¾ç½®äº†å¤šä¸ªå¯ä¾›è‹¥å¹²ä¸ªè¿›ç¨‹å…±äº«çš„ç¼“å†²åŒºã€‚</p>
<p>å¯¹äºæ—¢å¯ä»¥ç”¨äºè¾“å‡ºçš„å…±ç”¨ç¼“å†²æ± ï¼Œå…¶ä¸­è‡³å°‘åŒ…å«æœ‰ä¸€ä¸‹ä¸‰ç§ç±»å‹çš„ç¼“å†²åŒºï¼š</p>
<p>ã€€â‘  ç©ºï¼ˆé—²ï¼‰ç¼“å†²åŒºã€‚</p>
<p>ã€€â‘¡ è£…æ»¡è¾“å…¥æ•°æ®çš„ç¼“å†²åŒºã€‚</p>
<p>ã€€â‘¢ è£…æ»¡è¾“å‡ºæ•°æ®çš„ç¼“å†²åŒºã€‚</p>
<p>ã€€ä¸ºäº†ç®¡ç†æ–¹ä¾¿ï¼Œå°†ç›¸åŒç±»å‹çš„ç¼“å†²åŒºé“¾æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œå½¢æˆäº†ç©ºç¼“å†²é˜Ÿåˆ—emqã€è¾“å…¥é˜Ÿåˆ—inqã€è¾“å‡ºé˜Ÿåˆ—outqã€‚è¿˜å…·æœ‰å››ç§å·¥ä½œç¼“å†²åŒºï¼Œç”¨äºæ”¶å®¹è¾“å…¥æ•°æ®çš„å·¥ä½œç¼“å†²åŒºã€ç”¨äºæå–è¾“å…¥æ•°æ®çš„å·¥ä½œç¼“å†²åŒºã€ç”¨äºæ”¶å®¹è¾“å‡ºæ•°æ®çš„å·¥ä½œç¼“å†²åŒºã€ç”¨äºæå–è¾“å‡ºæ•°æ®çš„å·¥ä½œç¼“å†²åŒºã€‚</p>
<p>ã€€ç¼“å†²åŒºå¯ä»¥å·¥ä½œåœ¨æ”¶å®¹è¾“å…¥ã€æå–è¾“å…¥ã€æ”¶å®¹è¾“å‡ºã€æå–è¾“å‡ºå››ç§å·¥ä½œæ–¹å¼ä¸‹ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_09-33-43.png"></p>
<p>ã€€â‘  <strong>æ”¶å®¹è¾“å…¥</strong>ï¼Œåœ¨è¾“å…¥è¿›ç¨‹éœ€è¦è¾“å…¥æ•°æ®æ—¶ï¼Œä¾¿è°ƒç”¨Getbuf(emp)è¿‡ç¨‹ï¼Œä»ç©ºç¼“å†²é˜Ÿåˆ—çš„é˜Ÿé¦–å–å‡ºä¸€ä¸ªç©ºç¼“å†²åŒºï¼ŒæŠŠå®ƒä½œä¸ºæ”¶å®¹è¾“å…¥å·¥ä½œç¼“å†²hinï¼Œç„¶åï¼ŒæŠŠæ•°æ®è¾“å…¥å…¶ä¸­ï¼Œè£…æ»¡åå†è°ƒç”¨Putbuf(inq,hin)è¿‡ç¨‹ï¼Œå°†è¯¥ç¼“å†²åŒºæŒ‚åœ¨è¾“å…¥é˜Ÿåˆ—ä¸Šã€‚</p>
<p>ã€€â‘¡ <strong>æå–è¾“å…¥</strong>ï¼Œå½“è®¡ç®—è¿›ç¨‹éœ€è¦è¾“å…¥æ•°æ®æ—¶ï¼Œè°ƒç”¨Getbuf(inq)è¿‡ç¨‹ï¼Œä»è¾“å…¥é˜Ÿåˆ—é˜Ÿé¦–å–å‡ºä¸€ä¸ªç¼“å†²åŒºï¼Œä½œä¸ºæå–è¾“å…¥å·¥ä½œç¼“å†²åŒºsinï¼Œè®¡ç®—è¿›ç¨‹ä»ä¸­æå–æ•°æ®ï¼Œè®¡ç®—è¿›ç¨‹ç”¨å®Œè¯¥æ•°æ®åï¼Œå†è°ƒç”¨Putbuf(emq,sin)è¿‡ç¨‹ï¼Œå°†è¯¥ç¼“å†²åŒºæŒ‚åˆ°ç©ºç¼“å†²é˜Ÿåˆ—emqä¸Šã€‚</p>
<p>ã€€â‘¢ <strong>æ”¶å®¹è¾“å‡º</strong>ï¼Œå½“è®¡ç®—è¿›ç¨‹éœ€è¦è¾“å‡ºæ—¶ï¼Œè°ƒç”¨Getbuf(emq)è¿‡ç¨‹ä»ç©ºç¼“å†²åŒºé˜Ÿåˆ—emqçš„é˜Ÿé¦–å–å‡ºä¸€ä¸ªç©ºç¼“å†²åŒºï¼Œä½œä¸ºæ”¶å®¹è¾“å‡ºå·¥ä½œç¼“å†²åŒºhoutï¼Œå½“å…¶ä¸­è£…æ»¡è¾“å‡ºæ•°æ®åï¼Œåˆè°ƒç”¨Putbuf(outq,hout)è¿‡ç¨‹ï¼Œå°†è¯¥ç¼“å†²åŒºæŒ‚åœ¨outqæœ«å°¾ã€‚</p>
<p>ã€€â‘£ <strong>æå–è¾“å‡º</strong>ï¼Œç”±è¾“å‡ºè¿›ç¨‹è°ƒç”¨Getbuf(outq)è¿‡ç¨‹ï¼Œä»è¾“å‡ºé˜Ÿåˆ—é˜Ÿé¦–å–å‡ºä¸€ä¸ªè£…æ»¡è¾“å‡ºæ•°æ®çš„ç¼“å†²åŒºï¼Œä½œä¸ºæå–è¾“å‡ºå·¥ä½œç¼“å†²åŒºsoutï¼Œåœ¨æ•°æ®æå–å®Œåï¼Œå†è°ƒç”¨Putbuf(emq,sout)è¿‡ç¨‹ï¼Œå°†è¯¥ç¼“å†²åŒºæŒ‚åœ¨ç©ºç¼“å†²é˜Ÿåˆ—æœ«å°¾ã€‚</p>
<h2 id="ä¸è®¾å¤‡æ— å…³çš„I-Oè½¯ä»¶"><a href="#ä¸è®¾å¤‡æ— å…³çš„I-Oè½¯ä»¶" class="headerlink" title="ä¸è®¾å¤‡æ— å…³çš„I&#x2F;Oè½¯ä»¶"></a>ä¸è®¾å¤‡æ— å…³çš„I&#x2F;Oè½¯ä»¶</h2><p><em><strong>è®¾å¤‡ç‹¬ç«‹æ€§</strong></em></p>
<p>ã€€åº”ç”¨ç¨‹åºç‹¬ç«‹äºå…·ä½“ä½¿ç”¨çš„ç‰©ç†è®¾å¤‡ï¼Œä¸ºäº†å®ç°è®¾å¤‡ç‹¬ç«‹æ€§è€Œå¼•å…¥äº†<strong>é€»è¾‘è®¾å¤‡</strong>å’Œ<strong>ç‰©ç†è®¾å¤‡</strong>è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œä½¿ç”¨é€»è¾‘è®¾å¤‡åç§°æ¥è¯·æ±‚ä½¿ç”¨æŸç±»è®¾å¤‡ï¼Œè€Œç³»ç»Ÿåœ¨å®é™…æ‰§è¡Œæ—¶ï¼Œè¿˜å¿…é¡»ä½¿ç”¨ç‰©ç†è®¾å¤‡åç§°ã€‚å› æ­¤ï¼Œç³»ç»Ÿéœ€å…·æœ‰å°†é€»è¾‘è®¾å¤‡åç§°è½¬æ¢ä¸ºæŸç‰©ç†è®¾å¤‡åç§°çš„åŠŸèƒ½ï¼Œè¿™ç±»ä¼¼äºå­˜å‚¨å™¨ç®¡ç†æ‰€ä»‹ç»çš„é€»è¾‘åœ°å€å’Œç‰©ç†åœ°å€çš„æ¦‚å¿µï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„æ˜¯é€»è¾‘åœ°å€ï¼Œç³»ç»Ÿåœ¨åˆ†é…å’Œä½¿ç”¨å†…å­˜æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ç‰©ç†åœ°å€ã€‚</p>
<p>å®ç°è®¾å¤‡ç‹¬ç«‹æ€§åï¼Œå¯å¸¦æ¥<em>ä¸¤æ–¹é¢</em>çš„å¥½å¤„ã€‚</p>
<p>ã€€â‘  <strong>è®¾å¤‡åˆ†é…æ—¶çš„çµæ´»æ€§</strong>ï¼Œè¿›ç¨‹èƒ½å¤Ÿä»¥é€»è¾‘è®¾å¤‡åç§°æ¥è¯·æ±‚æŸç±»è®¾å¤‡æ—¶ï¼Œç³»ç»Ÿå¯ç«‹å³å°†è¯¥ç±»è®¾å¤‡ä¸­çš„ä»»ä¸€å°åˆ†é…ç»™è¿›ç¨‹ï¼Œä»…å½“æ‰€æœ‰æ­¤ç±»è®¾å¤‡å…¨éƒ¨åˆ†é…å®Œæ¯•æ—¶ï¼Œè¿›ç¨‹æ‰ä¼šé˜»å¡ã€‚</p>
<p>ã€€â‘¡ <strong>æ˜“äºå®ç°I&#x2F;Oé‡å®šå‘</strong>ï¼Œç”¨äºI&#x2F;Oæ“ä½œçš„è®¾å¤‡å¯ä»¥æ›´æ¢ï¼Œè€Œä¸å¿…æ”¹å˜åº”ç”¨ç¨‹åºã€‚ã€€ã€€</p>
<p>é©±åŠ¨ç¨‹åºæ˜¯ä¸€ä¸ªä¸ç¡¬ä»¶(æˆ–è®¾å¤‡)ç´§å¯†ç›¸å…³çš„è½¯ä»¶ï¼Œä¸ºäº†å®ç°è®¾å¤‡ç‹¬ç«‹æ€§ï¼Œå¿…é¡»å†åœ¨é©±åŠ¨ç¨‹åºä¹‹ä¸Šè®¾ç½®ä¸€å±‚è½¯ä»¶ï¼Œç§°ä¸º<strong>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶</strong>ã€‚</p>
<p>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶çš„ä¸»è¦åŠŸèƒ½å¯åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š<br>(1) æ‰§è¡Œæ‰€æœ‰è®¾å¤‡çš„å…¬æœ‰æ“ä½œã€‚<br>â‘  å¯¹ç‹¬ç«‹è®¾å¤‡çš„åˆ†é…ä¸å›æ”¶ï¼›<br>â‘¡ å°†é€»è¾‘è®¾å¤‡åæ˜ å°„ä¸ºç‰©ç†è®¾å¤‡åï¼Œè¿›ä¸€æ­¥å¯ä»¥æ‰¾åˆ°ç›¸åº”ç‰©ç†è®¾å¤‡çš„é©±åŠ¨ç¨‹åºï¼›<br>â‘¢ å¯¹è®¾å¤‡è¿›è¡Œä¿æŠ¤ï¼Œç¦æ­¢ç”¨æˆ·ç›´æ¥è®¿é—®è®¾å¤‡ï¼›<br>â‘£ ç¼“å†²ç®¡ç†<br>â‘¤ å·®é”™æ§åˆ¶<br>â‘¥ æä¾›ç‹¬ç«‹äºè®¾å¤‡çš„é€»è¾‘å—</p>
<p>(2) å‘ç”¨æˆ·å±‚(æˆ–æ–‡ä»¶å±‚)è½¯ä»¶æä¾›ç»Ÿä¸€æ¥å£<br>æ— è®ºä½•ç§è®¾å¤‡ï¼Œå®ƒä»¬å‘ç”¨æˆ·æ‰€æä¾›çš„æ¥å£åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œå¯¹å„ç§è®¾å¤‡çš„è¯»æ“ä½œï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­éƒ½ä½¿ç”¨readï¼›è€Œå¯¹å„ç§è®¾å¤‡çš„å†™æ“ä½œï¼Œä¹Ÿéƒ½ä½¿ç”¨writeã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_21-41-20.png"></p>
<h2 id="ç£ç›˜ç³»ç»ŸåŠç£ç›˜è°ƒåº¦"><a href="#ç£ç›˜ç³»ç»ŸåŠç£ç›˜è°ƒåº¦" class="headerlink" title="ç£ç›˜ç³»ç»ŸåŠç£ç›˜è°ƒåº¦"></a>ç£ç›˜ç³»ç»ŸåŠç£ç›˜è°ƒåº¦</h2><p>ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œéƒ½é…ç½®äº†ç£ç›˜å­˜å‚¨å™¨ï¼Œå¹¶ä»¥å®ƒä¸ºä¸»æ¥å­˜æ”¾æ–‡ä»¶ã€‚å¯¹æ–‡ä»¶çš„æ“ä½œï¼Œéƒ½å°†æ¶‰åŠåˆ°å¯¹ç£ç›˜çš„è®¿é—®ï¼Œç£ç›˜Iï¼Oé€Ÿåº¦çš„é«˜ä½å’Œç£ç›˜ç³»ç»Ÿçš„å¯é æ€§ï¼Œéƒ½å°†ç›´æ¥å½±å“åˆ°ç³»ç»Ÿæ€§èƒ½ã€‚å› æ­¤ï¼Œè®¾æ³•æ”¹å–„ç£ç›˜ç³»ç»Ÿçš„æ€§èƒ½ï¼Œå·²æˆä¸ºç°ä»£æ“ä½œç³»ç»Ÿçš„é‡è¦ä»»åŠ¡ä¹‹ä¸€ ã€‚</p>
<p>æé«˜ç£ç›˜I&#x2F;Oé€Ÿåº¦çš„ä¸»è¦é€”å¾„ï¼š<br>ï¼ˆ1ï¼‰é€‰æ‹©æ€§èƒ½å¥½çš„ç£ç›˜<br>ï¼ˆ2ï¼‰é‡‡ç”¨å¥½çš„ç£ç›˜è°ƒåº¦ç®—æ³•<br>ï¼ˆ3ï¼‰è®¾ç½®ç£ç›˜é«˜é€Ÿç¼“å­˜ï¼ˆDisk Cacheï¼‰<br>ï¼ˆ4ï¼‰å…¶å®ƒæ–¹æ³•<br>ï¼ˆ5ï¼‰é‡‡ç”¨é«˜åº¦å¯é ã€å¿«é€Ÿçš„å®¹é‡ç£ç›˜ç³»ç»Ÿâ€”â€”ç£ç›˜å†—ä½™é˜µåˆ—</p>
<p>æ•°æ®çš„ç»„ç»‡å’Œæ ¼å¼<br>â–ª å­˜å‚¨é¢(surface)<br>â–ª ç£é“(track)<br>â–ª æŸ±é¢<br>â–ª æ‰‡åŒº(sectors)</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_21-51-03.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_21-51-19.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_21-52-33.png"></p>
<p><em><strong>ç£ç›˜è°ƒåº¦</strong></em></p>
<p>ã€€ç£ç›˜æ˜¯å¤šä¸ªè¿›ç¨‹å…±äº«çš„è®¾å¤‡ï¼Œå½“æœ‰å¤šä¸ªè¿›ç¨‹éƒ½è¦æ±‚è®¿é—®ç£ç›˜æ—¶ï¼Œåº”é‡‡ç”¨ä¸€ç§æœ€ä½³çš„è°ƒåº¦ç®—æ³•ï¼Œä½¿<strong>å„è¿›ç¨‹å¯¹ç£ç›˜çš„å¹³å‡è®¿é—®æ—¶é—´æœ€å°</strong>ã€‚ç”±äºåœ¨è®¿é—®ç£ç›˜ä¸­ï¼Œä¸»è¦æ˜¯å¯»é“æ—¶é—´ï¼Œå› æ­¤ï¼Œç£ç›˜è°ƒåº¦çš„ç›®æ ‡æ˜¯<strong>ä½¿ç£ç›˜çš„å¹³å‡å¯»é“æ—¶é—´æœ€å°‘</strong>ã€‚</p>
<p>è¯·æ±‚åºåˆ—ï¼š55,58,39,18,90,160,150,38,184</p>
<p>ã€€â‘  <strong>å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFS, First Come First Serviceï¼‰</strong>ï¼Œè¿™æ˜¯ä¸€ç§æœ€ç®€å•çš„ç£ç›˜è°ƒåº¦ç®—æ³•ï¼Œå…¶æ ¹æ®è¿›ç¨‹è¯·æ±‚è®¿é—®ç£ç›˜çš„å…ˆåé¡ºåºè¿›è¡Œè°ƒåº¦ï¼Œä¼˜ç‚¹æ˜¯<strong>å…¬å¹³ã€ç®€å•</strong>ï¼Œæ¯ä¸ªè¿›ç¨‹çš„è¯·æ±‚éƒ½èƒ½å¾—åˆ°ä¾æ¬¡å¤„ç†ï¼Œä¸ä¼šå‡ºç°æŸä¸ªè¿›ç¨‹çš„è¯·æ±‚é•¿æœŸå¾—ä¸åˆ°æ»¡è¶³çš„æƒ…å†µã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160629084945437-806152901.png"></p>
<p>ã€€â‘¡ <strong>æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆï¼ˆSSTFï¼ŒShortest Seek Time Firstï¼‰</strong>ï¼Œè¦æ±‚è®¿é—®çš„ç£é“ä¸å½“å‰ç£å¤´æ‰€åœ¨çš„ç£é“è·ç¦»æœ€è¿‘ï¼Œä»¥ä½¿æ¯æ¬¡çš„å¯»é“æ—¶é—´æœ€çŸ­ã€‚ä½†è¿™ç§ç®—æ³•ä¸èƒ½ä¿è¯å¹³å‡å¯»é“æ—¶é—´æœ€çŸ­ã€‚SSTFç®—æ³•è™½ç„¶èƒ½è·å¾—è¾ƒå¥½çš„å¯»é“æ€§èƒ½ï¼Œä½†å´å¯èƒ½å¯¼è‡´æŸä¸ªè¿›ç¨‹å‘ç”Ÿ<strong>â€œé¥¥é¥¿â€</strong>ç°è±¡ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-18_08-50-31.png"></p>
<p>ã€€â‘¢ <strong>æ‰«æï¼ˆSCANï¼‰ç®—æ³•</strong>ï¼Œè¯¥ç®—æ³•ä¸ä»…è€ƒè™‘åˆ°æ¬²è®¿é—®çš„ç£ç›˜ä¸å½“å‰ç£é“ä¹‹é—´çš„è·ç¦»ï¼Œæ›´<strong>ä¼˜å…ˆè€ƒè™‘çš„æ˜¯ç£å¤´å½“å‰çš„ç§»åŠ¨æ–¹å‘</strong>ã€‚ä¾‹å¦‚ï¼Œå½“ç£å¤´æ­£åœ¨è‡ªé‡Œå‘å¤–ç§»åŠ¨æ—¶ï¼ŒSCANç®—æ³•æ‰€è€ƒè™‘çš„ä¸‹ä¸€ä¸ªè®¿é—®å¯¹è±¡ï¼Œåº”æ˜¯å…¶æ¬²è®¿é—®çš„ç£é“æ—¢åœ¨å½“å‰ç£é“ä¹‹å¤–ï¼Œåˆæ˜¯è·ç¦»æœ€è¿‘çš„ã€‚ç›´è‡³å†æ— æ›´å¤–çš„ç£é“éœ€è¦è®¿é—®æ—¶ï¼Œæ‰å°†ç£è‡‚æ¢å‘è‡ªå¤–å‘é‡Œç§»åŠ¨ã€‚å…¶ç±»ä¼¼ç”µæ¢¯çš„è¿è¡Œï¼Œä¹Ÿç§°ä¸º<strong>ç”µæ¢¯è°ƒåº¦ç®—æ³•</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160629090041437-489747422.png"></p>
<p>ã€€ã€€â‘£ <strong>å¾ªç¯æ‰«æï¼ˆCSCANï¼‰ç®—æ³•</strong>ï¼ŒSCANç®—æ³•æ—¢èƒ½å¤Ÿè·å¾—è¾ƒå¥½çš„å¯»é“æ€§èƒ½ï¼Œåˆèƒ½é˜²æ­¢é¥¥é¥¿ç°è±¡ï¼Œä½†æ˜¯ï¼Œå½“ç£å¤´åˆšä»é‡Œå‘å¤–ç§»åŠ¨è€Œè¶Šè¿‡äº†æŸä¸ªç£é“æ—¶ï¼Œæ°å¥½åˆæœ‰ä¸€è¿›ç¨‹è¯·æ±‚è®¿é—®æ­¤ç£é“ï¼Œè¿™æ—¶ï¼Œè¯¥è¿›ç¨‹å¿…é¡»ç­‰å¾…ï¼Œå¾…ç£å¤´ç»§ç»­ä»é‡Œå‘å¤–ï¼Œç„¶åå†ä»å¤–å‘é‡Œæ‰«æå®Œæ‰€æœ‰è¦è®¿é—®çš„ç£é“åï¼Œæ‰å¤„ç†è¯¥è¿›ç¨‹çš„è¯·æ±‚ï¼Œè‡´ä½¿è¯¥è¿›ç¨‹çš„è¯·æ±‚è¢«å¤§å¤§åœ°æ¨è¿Ÿã€‚ä¸ºäº†å‡å°‘è¿™ç§å»¶è¿Ÿï¼Œ<strong>CSCANç®—æ³•è§„å®šç£å¤´å•å‘ç§»åŠ¨</strong>ï¼Œä¾‹å¦‚ï¼Œè‡´ä½¿è‡ªé‡Œå‘å¤–ç§»åŠ¨ï¼Œå½“ç£å¤´ç§»åˆ°æœ€å¤–çš„ç£é“è®¿é—®åï¼Œç£å¤´ç«‹å³è¿”å›æœ€é‡Œçš„æ¬²è®¿é—®çš„ç£é“ï¼Œäº¦å³<strong>å°†æœ€å°çš„ç£é“å·ç´§æ¥ç€æœ€å¤§çš„ç£é“å·æ„æˆå¾ªç¯ï¼Œè¿›è¡Œå¾ªç¯æ‰«æ</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160629091148124-624346017.png"></p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»ŸæœŸæœ«å¤ä¹ ä¹‹æ“ä½œç³»ç»Ÿå¼•è®º</title>
    <url>/2023/06/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4/</url>
    <content><![CDATA[<ul>
<li>æ“ä½œç³»ç»Ÿå®šä¹‰</li>
</ul>
<p>æ“ä½œç³»ç»Ÿæ˜¯ä¸€ç»„<strong>æ§åˆ¶å’Œç®¡ç†è®¡ç®—æœºè½¯ç¡¬ä»¶èµ„æº</strong>ã€<strong>åˆç†åœ°å¯¹å„ç±»ä½œä¸šè¿›è¡Œè°ƒåº¦ä»¥åŠæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨</strong>çš„ç¨‹åºé›†åˆã€‚</p>
<p>æ“ä½œç³»ç»Ÿæ˜¯ ä½äºç¡¬ä»¶å±‚(HAL)ä¹‹ä¸Šï¼Œæ‰€æœ‰å…¶å®ƒç³»ç»Ÿè½¯ä»¶å±‚ä¹‹ä¸‹çš„ä¸€ä¸ª<strong>ç³»ç»Ÿè½¯ä»¶</strong>ï¼Œä½¿å¾—ç®¡ç†ç³»ç»Ÿä¸­çš„å„ç§è½¯ä»¶å’Œç¡¬ä»¶èµ„æºå¾—ä»¥å……åˆ†åˆ©ç”¨ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨è®¡ç®—æœºç³»ç»Ÿã€‚</p>
<ul>
<li>OSçš„ç›®æ ‡</li>
</ul>
<p><strong>æ–¹ä¾¿æ€§</strong>: æ“ä½œç³»ç»Ÿä½¿è®¡ç®—æœºæ›´æ˜“äºä½¿ç”¨ã€‚ </p>
<p><strong>æœ‰æ•ˆæ€§</strong>: æ“ä½œç³»ç»Ÿå…è®¸ä»¥æ›´æœ‰æ•ˆçš„æ–¹å¼ä½¿ç”¨è®¡ç®—æœºç³»ç»Ÿèµ„æºã€‚ æé«˜ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡ ã€æé«˜ç³»ç»Ÿçš„ååé‡ã€‚ </p>
<p><strong>å¯æ‰©å±•æ€§</strong>: åœ¨æ“ä½œç³»ç»Ÿä¸­,å…è®¸æœ‰æ•ˆåœ°å¼€å‘ï¼Œæµ‹è¯•å’Œå¼•è¿›æ–°çš„ç³»ç»ŸåŠŸèƒ½ã€‚ </p>
<p><strong>å¼€æ”¾æ€§</strong>: å®ç°åº”ç”¨ç¨‹åºçš„å¯ç§»æ¤æ€§å’Œäº’æ“ä½œæ€§,è¦æ±‚å…·æœ‰ç»Ÿä¸€ çš„å¼€æ”¾çš„ç¯å¢ƒã€‚</p>
<p>å…¶ä¸­æœ‰æ•ˆæ€§ï¼Œå¯æ‰©å±•æ€§æœ€é‡è¦ã€‚</p>
<ul>
<li>OSçš„ä½œç”¨</li>
</ul>
<p>1.ä½œä¸ºç”¨æˆ·ä¸è®¡ç®—æœºç¡¬ä»¶ç³»ç»Ÿä¹‹é—´çš„æ¥å£</p>
<p>2.ä½œä¸ºè®¡ç®—æœºç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…(è½¯ç¡¬ä»¶èµ„æº)</p>
<p>3.ä½œä¸ºæ‰©å……æœºå™¨</p>
<ul>
<li>OSçš„ç‰¹å¾</li>
</ul>
<p>1ã€å¹¶å‘æ€§ï¼ˆæœ€é‡è¦çš„ç‰¹å¾ï¼‰ 2ã€å…±äº«æ€§ 3ã€è™šæ‹Ÿæ€§ 4ã€å¼‚æ­¥æ€§</p>
<p><strong>å¹¶å‘æ˜¯æœ€é‡è¦çš„ç‰¹å¾</strong>ï¼Œå…¶å®ƒç‰¹å¾éƒ½ä»¥å¹¶å‘ä¸ºå‰æã€‚å…¶ä¸­æœ€åŸºæœ¬ç‰¹å¾æ˜¯<strong>å¹¶å‘å’Œå…±äº«</strong>ã€‚</p>
<ul>
<li>OSçš„ä¸»è¦åŠŸèƒ½</li>
</ul>
<p>1ã€å¤„ç†æœºç®¡ç†ï¼ˆCPUï¼‰</p>
<p>2ã€å­˜å‚¨å™¨ç®¡ç†</p>
<p>3ã€è®¾å¤‡ç®¡ç†</p>
<p>4ã€æ–‡ä»¶ç®¡ç†</p>
<p>5ã€æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨çš„ç”¨æˆ·æ¥å£ã€‚</p>
<ul>
<li>OSçš„åŸºæœ¬ç±»å‹</li>
</ul>
<p><strong>æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿã€åˆ†æ—¶æ“ä½œç³»ç»Ÿå’Œå®æ—¶æ“ä½œç³»ç»Ÿã€‚</strong></p>
<ul>
<li>æ‰¹å¤„ç†ã€åˆ†æ—¶ã€å®æ—¶ç³»ç»Ÿï¼ˆæ¯”è¾ƒï¼‰</li>
</ul>
<p>æ‰¹å¤„ç†ç³»ç»Ÿ(batchprocessingsystem):æ“ä½œå‘˜æŠŠç”¨æˆ·æäº¤çš„ä½œä¸šåˆ†ç±»,æŠŠä¸€æ‰¹ä½œä¸šç¼–æˆä¸€ä¸ªä½œä¸šæ‰§è¡Œåºåˆ—,ç”±ä¸“é—¨ç¼–åˆ¶çš„ç›‘ç£ç¨‹åº(monitor)è‡ªåŠ¨ä¾æ¬¡å¤„ç†ã€‚å…¶ä¸»è¦ç‰¹å¾æ˜¯:ç”¨æˆ·è„±æœºä½¿ç”¨è®¡ç®—æœºã€æˆæ‰¹å¤„ç†ã€å¤šé“ç¨‹åºè¿è¡Œã€‚</p>
<p>åˆ†æ—¶ç³»ç»Ÿ(timesharingoperationsystem):æŠŠå¤„ç†æœºçš„è¿è¡Œæ—¶é—´åˆ†æˆå¾ˆçŸ­çš„æ—¶é—´ç‰‡,æŒ‰æ—¶é—´ç‰‡è½®è½¬çš„æ–¹å¼,æŠŠå¤„ç†æœºåˆ†é…ç»™å„è¿›ç¨‹ä½¿ç”¨ã€‚å…¶ä¸»è¦ç‰¹å¾æ˜¯äº¤äº’æ€§ã€å¤šç”¨æˆ·åŒæ—¶æ€§ã€ç‹¬ç«‹æ€§ã€‚</p>
<p>æ‰€è°“â€œå®æ—¶â€ï¼Œæ˜¯è¡¨ç¤ºâ€œåŠæ—¶â€ï¼Œè€Œå®æ—¶ç³»ç»Ÿæ˜¯æŒ‡ç³»ç»Ÿèƒ½åŠæ—¶å“åº”å¤–éƒ¨äº‹ä»¶çš„è¯·æ±‚ï¼Œåœ¨è§„å®šçš„æ—¶é—´å†…å®Œæˆå¯¹è¯¥äº‹ä»¶çš„å¤„ç†ï¼Œå¹¶æ§åˆ¶æ‰€æœ‰å®æ—¶ä»»åŠ¡åè°ƒä¸€è‡´çš„è¿è¡Œã€‚å…¶ç‰¹å¾ä¸»è¦ä½“ç°åœ¨å®æ—¶æ§åˆ¶å’Œå®æ—¶ä¿¡æ¯å¤„ç†ã€‚</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥æµ…å‡ºGormï¼ˆç»“åˆå®˜æ–¹æ–‡æ¡£ï¼‰</title>
    <url>/2023/07/16/Go/27/</url>
    <content><![CDATA[<h1 id="Gorm"><a href="#Gorm" class="headerlink" title="Gorm"></a>Gorm</h1><h2 id="ä»€ä¹ˆæ˜¯ORM"><a href="#ä»€ä¹ˆæ˜¯ORM" class="headerlink" title="ä»€ä¹ˆæ˜¯ORM"></a>ä»€ä¹ˆæ˜¯ORM</h2><p>Object Relational Mappingï¼šå¯¹è±¡å…³ç³»æ˜ å°„</p>
<p>ç»“æ„ä½“ å’Œ SQLæ•°æ®åº“å­˜åœ¨æ˜ å°„ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰äº†ORMè¯­å¥</p>
<p>ä¸€å¥è¯è¯´ï¼šå°±æ˜¯å°†æ•°æ®åº“ä¸­çš„è¡¨æ•°æ®å’Œç»“æ„ä½“è¿›è¡Œå¯¹åº”çš„å…³ç³»</p>
<h2 id="ORMçš„ä¼˜ç¼ºç‚¹"><a href="#ORMçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ORMçš„ä¼˜ç¼ºç‚¹"></a>ORMçš„ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>æé«˜å¼€å‘æ•ˆç‡</li>
</ul>
<p><strong>ç¼ºç‚¹:</strong></p>
<ul>
<li>ç‰ºç‰²æ‰§è¡Œæ€§èƒ½ã€ä¸­é—´å¤šäº†ä¸€ä¸ªç¯èŠ‚ã€‘</li>
<li>ç‰ºç‰²çµæ´»æ€§</li>
<li>å¼±åŒ–SQLèƒ½åŠ›</li>
</ul>
<h2 id="gormä»‹ç»"><a href="#gormä»‹ç»" class="headerlink" title="gormä»‹ç»"></a>gormä»‹ç»</h2><p><a href="https://gitee.com/link?target=https://gorm.io/zh_CN/">ä¸­æ–‡å®˜æ–¹ç½‘ç«™</a>å†…å«ååˆ†é½å…¨çš„ä¸­æ–‡æ–‡æ¡£ï¼Œæœ‰äº†å®ƒä½ ç”šè‡³ä¸éœ€è¦å†ç»§ç»­å‘ä¸‹é˜…è¯»æœ¬æ–‡ã€‚</p>
<p>gormæ˜¯ä¸€ä¸ªä½¿ç”¨Goè¯­è¨€ç¼–å†™çš„ORMæ¡†æ¶ã€‚å®ƒæ–‡æ¡£é½å…¨ï¼Œå¯¹å¼€å‘è€…å‹å¥½ï¼Œæ”¯æŒä¸»æµæ•°æ®åº“ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go get -u gorm.io/gorm</span><br><span class="line">go get -u gorm.io/driver/mysql</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>GORM çš„å¼€å‘å·²ç»è¿ç§»è‡³ <a href="https://github.com/go-gorm">github.com&#x2F;go-gorm</a>ï¼Œimport è·¯å¾„ä¹Ÿä¿®æ”¹ä¸º <code>gorm.io/gorm</code> ï¼Œå¯¹äºä»¥å‰çš„é¡¹ç›®ï¼Œæ‚¨å¯ä»¥ç»§ç»­ä½¿ç”¨ <code>github.com/jinzhu/gorm</code> </li>
<li>æ•°æ®åº“é©±åŠ¨è¢«æ‹†åˆ†ä¸ºç‹¬ç«‹çš„é¡¹ç›®ï¼Œä¾‹å¦‚ï¼š<a href="https://github.com/go-gorm/mysql">github.com&#x2F;go-gorm&#x2F;mysql</a>ï¼Œä¸”å®ƒçš„ import è·¯å¾„ä¹Ÿå˜æ›´ä¸º <code>gorm.io/driver/mysql</code></li>
</ul>
<h2 id="è¿æ¥MySQL"><a href="#è¿æ¥MySQL" class="headerlink" title="è¿æ¥MySQL"></a>è¿æ¥MySQL</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dsn := <span class="string">&quot;user:pass@tcp(127.0.0.1:3306)/dbname?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span><br><span class="line">	db, err := gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(<span class="string">&quot;failed to connect database&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>æ³¨æ„ï¼š</strong>æƒ³è¦æ­£ç¡®çš„å¤„ç† <code>time.Time</code> ï¼Œæ‚¨éœ€è¦å¸¦ä¸Š <code>parseTime</code> å‚æ•°ï¼Œ (<a href="https://github.com/go-sql-driver/mysql#parameters">æ›´å¤šå‚æ•°</a>) è¦æ”¯æŒå®Œæ•´çš„ UTF-8 ç¼–ç ï¼Œæ‚¨éœ€è¦å°† <code>charset=utf8</code> æ›´æ”¹ä¸º <code>charset=utf8mb4</code> æŸ¥çœ‹ <a href="https://mathiasbynens.be/notes/mysql-utf8mb4">æ­¤æ–‡ç« </a> è·å–è¯¦æƒ…ã€‚</p>
</blockquote>
<h2 id="GORMåŸºæœ¬ç¤ºä¾‹"><a href="#GORMåŸºæœ¬ç¤ºä¾‹" class="headerlink" title="GORMåŸºæœ¬ç¤ºä¾‹"></a>GORMåŸºæœ¬ç¤ºä¾‹</h2><h3 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><p>åœ¨ä½¿ç”¨GORMå‰æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“<code>gorm</code>ï¼Œæ¨èä½¿ç”¨å›¾å½¢åŒ–æ•°æ®åº“ç®¡ç†è½¯ä»¶ï¼Œä¾‹å¦‚<a href="https://navicat.com.cn/products">Navicat</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE gorm;</span><br></pre></td></tr></table></figure>

<h3 id="GORMæ“ä½œMySQL"><a href="#GORMæ“ä½œMySQL" class="headerlink" title="GORMæ“ä½œMySQL"></a>GORMæ“ä½œMySQL</h3><p>ä½¿ç”¨GORMè¿æ¥ä¸Šé¢çš„<code>gorm</code>è¿›è¡Œåˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤æ“ä½œã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// UserInfo ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">type</span> UserInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">	ID     <span class="type">uint</span></span><br><span class="line">	Name   <span class="type">string</span></span><br><span class="line">	Gender <span class="type">string</span></span><br><span class="line">	Hobby  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dsn := <span class="string">&quot;root:@tcp(127.0.0.1:3306)/gorm?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span><br><span class="line">	db, err := gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(<span class="string">&quot;failed to connect database&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è‡ªåŠ¨è¿ç§»</span></span><br><span class="line">	err = db.AutoMigrate(&amp;UserInfo&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(<span class="string">&quot;failed to migrate&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	u1 := UserInfo&#123;<span class="number">1</span>, <span class="string">&quot;æ¨æ´‹&quot;</span>, <span class="string">&quot;ç”·&quot;</span>, <span class="string">&quot;ç¯®çƒ&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åˆ›å»ºè®°å½•</span></span><br><span class="line">	db.Create(&amp;u1)</span><br><span class="line">	db.Create(&amp;UserInfo&#123;<span class="number">2</span>, <span class="string">&quot;ç‹æ¥šç„¶&quot;</span>, <span class="string">&quot;å¥³&quot;</span>, <span class="string">&quot;è¶³çƒ&quot;</span>&#125;)</span><br><span class="line">	<span class="comment">// æŸ¥è¯¢</span></span><br><span class="line">	<span class="keyword">var</span> u = <span class="built_in">new</span>(UserInfo)</span><br><span class="line">	db.First(&amp;u, <span class="number">1</span>) <span class="comment">// æ ¹æ®æ•´å‹ä¸»é”®æŸ¥æ‰¾</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, u)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> uu UserInfo</span><br><span class="line">	db.First(&amp;uu, <span class="string">&quot;hobby=?&quot;</span>, <span class="string">&quot;è¶³çƒ&quot;</span>) <span class="comment">//æŸ¥æ‰¾ hobby å­—æ®µå€¼ä¸º è¶³çƒ çš„è®°å½•</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, uu)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// æ›´æ–°</span></span><br><span class="line">	db.Model(&amp;u).Update(<span class="string">&quot;hobby&quot;</span>, <span class="string">&quot;æ’çƒ&quot;</span>)</span><br><span class="line">	<span class="comment">//Update - æ›´æ–°å¤šä¸ªå­—æ®µ</span></span><br><span class="line">	db.Model(&amp;u).Updates(UserInfo&#123;Name: <span class="string">&quot;è‚–æˆ˜&quot;</span>, Hobby: <span class="string">&quot;è·³èˆ&quot;</span>&#125;) <span class="comment">// ä»…æ›´æ–°éé›¶å€¼å­—æ®µ</span></span><br><span class="line">	db.Model(&amp;uu).Updates(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;Hobby&quot;</span>: <span class="string">&quot;æ¼”æˆ&quot;</span>, <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;èµµä¸½é¢–&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åˆ é™¤</span></span><br><span class="line">	db.Delete(&amp;u, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="GORM-Modelå®šä¹‰"><a href="#GORM-Modelå®šä¹‰" class="headerlink" title="GORM Modelå®šä¹‰"></a>GORM Modelå®šä¹‰</h2><p>åœ¨ä½¿ç”¨ORMå·¥å…·æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­å®šä¹‰æ¨¡å‹ï¼ˆModelsï¼‰ä¸æ•°æ®åº“ä¸­çš„æ•°æ®è¡¨è¿›è¡Œæ˜ å°„ï¼Œåœ¨GORMä¸­æ¨¡å‹ï¼ˆModelsï¼‰é€šå¸¸æ˜¯æ­£å¸¸å®šä¹‰çš„ç»“æ„ä½“ã€åŸºæœ¬çš„goç±»å‹æˆ–å®ƒä»¬çš„æŒ‡é’ˆã€‚ åŒæ—¶ä¹Ÿæ”¯æŒ<code>sql.Scanner</code>åŠ<code>driver.Valuer</code>æ¥å£ï¼ˆinterfacesï¼‰ã€‚</p>
<h3 id="gorm-Model"><a href="#gorm-Model" class="headerlink" title="gorm.Model"></a>gorm.Model</h3><p>ä¸ºäº†æ–¹ä¾¿æ¨¡å‹å®šä¹‰ï¼ŒGORMå†…ç½®äº†ä¸€ä¸ª<code>gorm.Model</code>ç»“æ„ä½“ã€‚<code>gorm.Model</code>æ˜¯ä¸€ä¸ªåŒ…å«äº†<code>ID</code>, <code>CreatedAt</code>, <code>UpdatedAt</code>, <code>DeletedAt</code>å››ä¸ªå­—æ®µçš„Golangç»“æ„ä½“ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// gorm.Model å®šä¹‰</span></span><br><span class="line"><span class="keyword">type</span> Model <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID        <span class="type">uint</span> <span class="string">`gorm:&quot;primary_key&quot;`</span></span><br><span class="line">  CreatedAt time.Time</span><br><span class="line">  UpdatedAt time.Time</span><br><span class="line">  DeletedAt *time.Time</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥å°†å®ƒåµŒå…¥åˆ°ä½ è‡ªå·±çš„æ¨¡å‹ä¸­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å°† `ID`, `CreatedAt`, `UpdatedAt`, `DeletedAt`å­—æ®µæ³¨å…¥åˆ°`User`æ¨¡å‹ä¸­</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  gorm.Model</span><br><span class="line">  Name <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥é€šè¿‡æ ‡ç­¾ <code>embedded</code> å°†å…¶åµŒå…¥ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Author <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name  <span class="type">string</span></span><br><span class="line">    Email <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Blog <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID      <span class="type">int</span></span><br><span class="line">  Author  Author <span class="string">`gorm:&quot;embedded&quot;`</span></span><br><span class="line">  Upvotes <span class="type">int32</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç­‰æ•ˆäº</span></span><br><span class="line"><span class="keyword">type</span> Blog <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID    <span class="type">int64</span></span><br><span class="line">  Name  <span class="type">string</span></span><br><span class="line">  Email <span class="type">string</span></span><br><span class="line">  Upvotes  <span class="type">int32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ä½¿ç”¨æ ‡ç­¾ <code>embeddedPrefix</code> æ¥ä¸º db ä¸­çš„å­—æ®µåæ·»åŠ å‰ç¼€ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Blog <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID      <span class="type">int</span></span><br><span class="line">  Author  Author <span class="string">`gorm:&quot;embedded;embeddedPrefix:author_&quot;`</span></span><br><span class="line">  Upvotes <span class="type">int32</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç­‰æ•ˆäº</span></span><br><span class="line"><span class="keyword">type</span> Blog <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID          <span class="type">int64</span></span><br><span class="line">  AuthorName <span class="type">string</span></span><br><span class="line">  AuthorEmail <span class="type">string</span></span><br><span class="line">  Upvotes     <span class="type">int32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥å®Œå…¨è‡ªå·±å®šä¹‰æ¨¡å‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸ä½¿ç”¨gorm.Modelï¼Œè‡ªè¡Œå®šä¹‰æ¨¡å‹</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID   <span class="type">int</span></span><br><span class="line">  Name <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡å‹å®šä¹‰ç¤ºä¾‹"><a href="#æ¨¡å‹å®šä¹‰ç¤ºä¾‹" class="headerlink" title="æ¨¡å‹å®šä¹‰ç¤ºä¾‹"></a>æ¨¡å‹å®šä¹‰ç¤ºä¾‹</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  gorm.Model</span><br><span class="line">  Name         <span class="type">string</span></span><br><span class="line">  Age          sql.NullInt64	<span class="comment">//é›¶å€¼ç±»å‹</span></span><br><span class="line">  Birthday     *time.Time</span><br><span class="line">  Email        <span class="type">string</span>  <span class="string">`gorm:&quot;type:varchar(100);unique_index&quot;`</span></span><br><span class="line">  Role         <span class="type">string</span>  <span class="string">`gorm:&quot;size:255&quot;`</span> <span class="comment">// è®¾ç½®å­—æ®µå¤§å°ä¸º255</span></span><br><span class="line">  MemberNumber *<span class="type">string</span> <span class="string">`gorm:&quot;unique;not null&quot;`</span> <span class="comment">// è®¾ç½®ä¼šå‘˜å·ï¼ˆmember numberï¼‰å”¯ä¸€å¹¶ä¸”ä¸ä¸ºç©º</span></span><br><span class="line">  Num          <span class="type">int</span>     <span class="string">`gorm:&quot;AUTO_INCREMENT&quot;`</span> <span class="comment">// è®¾ç½® num ä¸ºè‡ªå¢ç±»å‹</span></span><br><span class="line">  Address      <span class="type">string</span>  <span class="string">`gorm:&quot;index:addr&quot;`</span> <span class="comment">// ç»™addresså­—æ®µåˆ›å»ºåä¸ºaddrçš„ç´¢å¼•</span></span><br><span class="line">  IgnoreMe     <span class="type">int</span>     <span class="string">`gorm:&quot;-&quot;`</span> <span class="comment">// å¿½ç•¥æœ¬å­—æ®µ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>GORM å€¾å‘äºçº¦å®šä¼˜äºé…ç½® é»˜è®¤æƒ…å†µä¸‹ï¼ŒGORM ä½¿ç”¨ <code>ID</code> ä½œä¸ºä¸»é”®ï¼Œä½¿ç”¨ç»“æ„ä½“åçš„ <code>è›‡å½¢å¤æ•°</code> ä½œä¸ºè¡¨åï¼Œå­—æ®µåçš„ <code>è›‡å½¢</code> ä½œä¸ºåˆ—åï¼Œå¹¶ä½¿ç”¨ <code>CreatedAt</code>ã€<code>UpdatedAt</code> å­—æ®µè¿½è¸ªåˆ›å»ºã€æ›´æ–°æ—¶é—´ã€‚</p>
<p>å¦‚æœæ‚¨éµå¾ª GORM çš„çº¦å®šï¼Œæ‚¨å°±å¯ä»¥å°‘å†™çš„é…ç½®ã€ä»£ç ã€‚ å¦‚æœçº¦å®šä¸ç¬¦åˆæ‚¨çš„å®é™…è¦æ±‚ï¼Œ<a href="https://gorm.io/zh_CN/docs/conventions.html">GORM å…è®¸ä½ é…ç½®å®ƒä»¬</a></p>
<h3 id="ç»“æ„ä½“æ ‡è®°ï¼ˆtagsï¼‰"><a href="#ç»“æ„ä½“æ ‡è®°ï¼ˆtagsï¼‰" class="headerlink" title="ç»“æ„ä½“æ ‡è®°ï¼ˆtagsï¼‰"></a>ç»“æ„ä½“æ ‡è®°ï¼ˆtagsï¼‰</h3><p>å£°æ˜ model æ—¶ï¼Œtag æ˜¯å¯é€‰çš„ï¼ŒGORM æ”¯æŒä»¥ä¸‹ tagï¼š tag åå¤§å°å†™ä¸æ•æ„Ÿï¼Œä½†å»ºè®®ä½¿ç”¨ <code>camelCase</code> é£æ ¼</p>
<h4 id="æ”¯æŒçš„ç»“æ„ä½“æ ‡è®°ï¼ˆStruct-tagsï¼‰"><a href="#æ”¯æŒçš„ç»“æ„ä½“æ ‡è®°ï¼ˆStruct-tagsï¼‰" class="headerlink" title="æ”¯æŒçš„ç»“æ„ä½“æ ‡è®°ï¼ˆStruct tagsï¼‰"></a>æ”¯æŒçš„ç»“æ„ä½“æ ‡è®°ï¼ˆStruct tagsï¼‰</h4><table>
<thead>
<tr>
<th align="center">æ ‡ç­¾å</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">column</td>
<td align="center">æŒ‡å®š db åˆ—å</td>
</tr>
<tr>
<td align="center">type</td>
<td align="center">åˆ—æ•°æ®ç±»å‹ï¼Œæ¨èä½¿ç”¨å…¼å®¹æ€§å¥½çš„é€šç”¨ç±»å‹ï¼Œä¾‹å¦‚ï¼šæ‰€æœ‰æ•°æ®åº“éƒ½æ”¯æŒ boolã€intã€uintã€floatã€stringã€timeã€bytes å¹¶ä¸”å¯ä»¥å’Œå…¶ä»–æ ‡ç­¾ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š<code>not null</code>ã€<code>size</code>, <code>autoIncrement</code>â€¦ åƒ <code>varbinary(8)</code> è¿™æ ·æŒ‡å®šæ•°æ®åº“æ•°æ®ç±»å‹ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚åœ¨ä½¿ç”¨æŒ‡å®šæ•°æ®åº“æ•°æ®ç±»å‹æ—¶ï¼Œå®ƒéœ€è¦æ˜¯å®Œæ•´çš„æ•°æ®åº“æ•°æ®ç±»å‹ï¼Œå¦‚ï¼š<code>MEDIUMINT UNSIGNED not NULL AUTO_INCREMENT</code></td>
</tr>
<tr>
<td align="center">serializer</td>
<td align="center">æŒ‡å®šå°†æ•°æ®åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–åˆ°æ•°æ®åº“ä¸­çš„åºåˆ—åŒ–å™¨, ä¾‹å¦‚: <code>serializer:json/gob/unixtime</code></td>
</tr>
<tr>
<td align="center">size</td>
<td align="center">å®šä¹‰åˆ—æ•°æ®ç±»å‹çš„å¤§å°æˆ–é•¿åº¦ï¼Œä¾‹å¦‚ <code>size: 256</code></td>
</tr>
<tr>
<td align="center">primaryKey</td>
<td align="center">å°†åˆ—å®šä¹‰ä¸ºä¸»é”®</td>
</tr>
<tr>
<td align="center">unique</td>
<td align="center">å°†åˆ—å®šä¹‰ä¸ºå”¯ä¸€é”®</td>
</tr>
<tr>
<td align="center">default</td>
<td align="center">å®šä¹‰åˆ—çš„é»˜è®¤å€¼</td>
</tr>
<tr>
<td align="center">precision</td>
<td align="center">æŒ‡å®šåˆ—çš„ç²¾åº¦</td>
</tr>
<tr>
<td align="center">scale</td>
<td align="center">æŒ‡å®šåˆ—å¤§å°</td>
</tr>
<tr>
<td align="center">not null</td>
<td align="center">æŒ‡å®šåˆ—ä¸º NOT NULL</td>
</tr>
<tr>
<td align="center">autoIncrement</td>
<td align="center">æŒ‡å®šåˆ—ä¸ºè‡ªåŠ¨å¢é•¿</td>
</tr>
<tr>
<td align="center">autoIncrementIncrement</td>
<td align="center">è‡ªåŠ¨æ­¥é•¿ï¼Œæ§åˆ¶è¿ç»­è®°å½•ä¹‹é—´çš„é—´éš”</td>
</tr>
<tr>
<td align="center">embedded</td>
<td align="center">åµŒå¥—å­—æ®µ</td>
</tr>
<tr>
<td align="center">embeddedPrefix</td>
<td align="center">åµŒå…¥å­—æ®µçš„åˆ—åå‰ç¼€</td>
</tr>
</tbody></table>
<h4 id="å…³è”ç›¸å…³æ ‡è®°ï¼ˆtagsï¼‰"><a href="#å…³è”ç›¸å…³æ ‡è®°ï¼ˆtagsï¼‰" class="headerlink" title="å…³è”ç›¸å…³æ ‡è®°ï¼ˆtagsï¼‰"></a>å…³è”ç›¸å…³æ ‡è®°ï¼ˆtagsï¼‰</h4><table>
<thead>
<tr>
<th align="left">æ ‡ç­¾</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">foreignKey</td>
<td align="left">æŒ‡å®šå½“å‰æ¨¡å‹çš„åˆ—ä½œä¸ºè¿æ¥è¡¨çš„å¤–é”®</td>
</tr>
<tr>
<td align="left">references</td>
<td align="left">æŒ‡å®šå¼•ç”¨è¡¨çš„åˆ—åï¼Œå…¶å°†è¢«æ˜ å°„ä¸ºè¿æ¥è¡¨å¤–é”®</td>
</tr>
<tr>
<td align="left">polymorphic</td>
<td align="left">æŒ‡å®šå¤šæ€ç±»å‹ï¼Œæ¯”å¦‚æ¨¡å‹å</td>
</tr>
<tr>
<td align="left">polymorphicValue</td>
<td align="left">æŒ‡å®šå¤šæ€å€¼ã€é»˜è®¤è¡¨å</td>
</tr>
<tr>
<td align="left">many2many</td>
<td align="left">æŒ‡å®šè¿æ¥è¡¨è¡¨å</td>
</tr>
<tr>
<td align="left">joinForeignKey</td>
<td align="left">æŒ‡å®šè¿æ¥è¡¨çš„å¤–é”®åˆ—åï¼Œå…¶å°†è¢«æ˜ å°„åˆ°å½“å‰è¡¨</td>
</tr>
<tr>
<td align="left">joinReferences</td>
<td align="left">æŒ‡å®šè¿æ¥è¡¨çš„å¤–é”®åˆ—åï¼Œå…¶å°†è¢«æ˜ å°„åˆ°å¼•ç”¨è¡¨</td>
</tr>
<tr>
<td align="left">constraint</td>
<td align="left">å…³ç³»çº¦æŸï¼Œä¾‹å¦‚ï¼š<code>OnUpdate</code>ã€<code>OnDelete</code></td>
</tr>
</tbody></table>
<h2 id="ä¸»é”®ã€è¡¨åã€åˆ—åçš„çº¦å®š"><a href="#ä¸»é”®ã€è¡¨åã€åˆ—åçš„çº¦å®š" class="headerlink" title="ä¸»é”®ã€è¡¨åã€åˆ—åçš„çº¦å®š"></a>ä¸»é”®ã€è¡¨åã€åˆ—åçš„çº¦å®š</h2><h3 id="ä¸»é”®ï¼ˆPrimary-Keyï¼‰"><a href="#ä¸»é”®ï¼ˆPrimary-Keyï¼‰" class="headerlink" title="ä¸»é”®ï¼ˆPrimary Keyï¼‰"></a>ä¸»é”®ï¼ˆPrimary Keyï¼‰</h3><p>GORM é»˜è®¤ä¼šä½¿ç”¨åä¸ºIDçš„å­—æ®µä½œä¸ºè¡¨çš„ä¸»é”®ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID   <span class="type">string</span> <span class="comment">// åä¸º`ID`çš„å­—æ®µä¼šé»˜è®¤ä½œä¸ºè¡¨çš„ä¸»é”®</span></span><br><span class="line">  Name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨`AnimalID`ä½œä¸ºä¸»é”®</span></span><br><span class="line"><span class="keyword">type</span> Animal <span class="keyword">struct</span> &#123;</span><br><span class="line">  AnimalID <span class="type">int64</span> <span class="string">`gorm:&quot;primary_key&quot;`</span></span><br><span class="line">  Name     <span class="type">string</span></span><br><span class="line">  Age      <span class="type">int64</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¤æ•°è¡¨åï¼ˆTable-Nameï¼‰"><a href="#å¤æ•°è¡¨åï¼ˆTable-Nameï¼‰" class="headerlink" title="å¤æ•°è¡¨åï¼ˆTable Nameï¼‰"></a>å¤æ•°è¡¨åï¼ˆTable Nameï¼‰</h3><p>GORM ä½¿ç”¨ç»“æ„ä½“åçš„ <code>è›‡å½¢å‘½å</code> ä½œä¸ºè¡¨åã€‚å¯¹äºç»“æ„ä½“ <code>User</code>ï¼Œæ ¹æ®çº¦å®šï¼Œå…¶è¡¨åä¸º <code>users</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;&#125; <span class="comment">// é»˜è®¤è¡¨åæ˜¯ `users`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Tabler <span class="keyword">interface</span> &#123;</span><br><span class="line">    TableName() <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TableName ä¼šå°† User çš„è¡¨åé‡å†™ä¸º `profiles`</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(User)</span></span> TableName() <span class="type">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;profiles&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <code>TableName</code> ä¸æ”¯æŒåŠ¨æ€å˜åŒ–ï¼Œå®ƒä¼šè¢«ç¼“å­˜ä¸‹æ¥ä»¥ä¾¿åç»­ä½¿ç”¨ã€‚æƒ³è¦ä½¿ç”¨åŠ¨æ€è¡¨åï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>Scopes</code>ï¼Œä¾‹å¦‚ï¼š</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UserTable</span><span class="params">(user User)</span></span> <span class="function"><span class="keyword">func</span> <span class="params">(tx *gorm.DB)</span></span> *gorm.DB &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">func</span> <span class="params">(tx *gorm.DB)</span></span> *gorm.DB &#123;</span><br><span class="line">    <span class="keyword">if</span> user.Admin &#123;</span><br><span class="line">      <span class="keyword">return</span> tx.Table(<span class="string">&quot;admin_users&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tx.Table(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">db.Scopes(UserTable(user)).Create(&amp;user)</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ç¦ç”¨é»˜è®¤è¡¨åçš„å¤æ•°å½¢å¼ï¼Œå¦‚æœç½®ä¸º trueï¼Œåˆ™ <code>User</code> çš„é»˜è®¤è¡¨åæ˜¯ <code>user</code>ï¼Œè¯¥æ–¹æ³•é€‚ç”¨äºv1ç‰ˆï¼Œä¹Ÿå°±æ˜¯<code>import &quot;github.com/jinzhu/gorm&quot;</code> </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.SingularTable(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥é€šè¿‡<code>Table()</code>æŒ‡å®šè¡¨åï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® User çš„å­—æ®µåˆ›å»º `deleted_users` è¡¨</span></span><br><span class="line">db.Table(<span class="string">&quot;deleted_users&quot;</span>).AutoMigrate(&amp;User&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»å¦ä¸€å¼ è¡¨æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> deletedUsers []User</span><br><span class="line">db.Table(<span class="string">&quot;deleted_users&quot;</span>).Find(&amp;deletedUsers)</span><br><span class="line"><span class="comment">// SELECT * FROM deleted_users;</span></span><br><span class="line"></span><br><span class="line">db.Table(<span class="string">&quot;deleted_users&quot;</span>).Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).Delete(&amp;User&#123;&#125;)</span><br><span class="line"><span class="comment">// DELETE FROM deleted_users WHERE name = &#x27;jinzhu&#x27;;</span></span><br></pre></td></tr></table></figure>

<p>GORMè¿˜æ”¯æŒæ›´æ”¹é»˜è®¤è¡¨åç§°è§„åˆ™ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">gorm.DefaultTableNameHandler = <span class="function"><span class="keyword">func</span> <span class="params">(db *gorm.DB, defaultTableName <span class="type">string</span>)</span></span> <span class="type">string</span>  &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;prefix_&quot;</span> + defaultTableName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ—åï¼ˆColumn-Nameï¼‰"><a href="#åˆ—åï¼ˆColumn-Nameï¼‰" class="headerlink" title="åˆ—åï¼ˆColumn Nameï¼‰"></a>åˆ—åï¼ˆColumn Nameï¼‰</h3><p>åˆ—åç”±å­—æ®µåç§°è¿›è¡Œä¸‹åˆ’çº¿åˆ†å‰²æ¥ç”Ÿæˆ( <code>è›‡å½¢å‘½å</code>)</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID        <span class="type">uint</span>      <span class="comment">// column name is `id`</span></span><br><span class="line">  Name      <span class="type">string</span>    <span class="comment">// column name is `name`</span></span><br><span class="line">  Birthday  time.Time <span class="comment">// column name is `birthday`</span></span><br><span class="line">  CreatedAt time.Time <span class="comment">// column name is `created_at`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨ç»“æ„ä½“tagæŒ‡å®šåˆ—åï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Animal <span class="keyword">struct</span> &#123;</span><br><span class="line">  AnimalId    <span class="type">int64</span>     <span class="string">`gorm:&quot;column:beast_id&quot;`</span>         <span class="comment">// set column name to `beast_id`</span></span><br><span class="line">  Birthday    time.Time <span class="string">`gorm:&quot;column:day_of_the_beast&quot;`</span> <span class="comment">// set column name to `day_of_the_beast`</span></span><br><span class="line">  Age         <span class="type">int64</span>     <span class="string">`gorm:&quot;column:age_of_the_beast&quot;`</span> <span class="comment">// set column name to `age_of_the_beast`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ—¶é—´æˆ³è·Ÿè¸ª"><a href="#æ—¶é—´æˆ³è·Ÿè¸ª" class="headerlink" title="æ—¶é—´æˆ³è·Ÿè¸ª"></a>æ—¶é—´æˆ³è·Ÿè¸ª</h2><h3 id="CreatedAt"><a href="#CreatedAt" class="headerlink" title="CreatedAt"></a>CreatedAt</h3><p>å¦‚æœæ¨¡å‹æœ‰ <code>CreatedAt</code>å­—æ®µï¼Œè¯¥å­—æ®µçš„å€¼å°†ä¼šæ˜¯åˆæ¬¡åˆ›å»ºè®°å½•çš„æ—¶é—´ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Create(&amp;user) <span class="comment">// `CreatedAt`å°†ä¼šæ˜¯å½“å‰æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">user2 := User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>, CreatedAt: time.Now()&#125;</span><br><span class="line">db.Create(&amp;user2) <span class="comment">// user2 çš„ `CreatedAt` ä¸ä¼šè¢«ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥ä½¿ç”¨`Update`æ–¹æ³•æ¥æ”¹å˜`CreateAt`çš„å€¼</span></span><br><span class="line">db.Model(&amp;user).Update(<span class="string">&quot;CreatedAt&quot;</span>, time.Now())</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥é€šè¿‡å°† <code>autoCreateTime</code> æ ‡ç­¾ç½®ä¸º <code>false</code> æ¥ç¦ç”¨æ—¶é—´æˆ³è¿½è¸ªï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  CreatedAt time.Time <span class="string">`gorm:&quot;autoCreateTime:false&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="UpdatedAt"><a href="#UpdatedAt" class="headerlink" title="UpdatedAt"></a>UpdatedAt</h3><p>å¦‚æœæ¨¡å‹æœ‰<code>UpdatedAt</code>å­—æ®µï¼Œè¯¥å­—æ®µçš„å€¼å°†ä¼šæ˜¯æ¯æ¬¡æ›´æ–°è®°å½•çš„æ—¶é—´ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Save(&amp;user) <span class="comment">// `UpdatedAt`å°†ä¼šæ˜¯å½“å‰æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">db.Model(&amp;user).Update(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>) <span class="comment">// `UpdatedAt`å°†ä¼šæ˜¯å½“å‰æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">db.Model(&amp;user).UpdateColumn(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>) <span class="comment">// `UpdatedAt` ä¸ä¼šè¢«ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line">user2 := User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>, UpdatedAt: time.Now()&#125;</span><br><span class="line">db.Create(&amp;user2) <span class="comment">// åˆ›å»ºè®°å½•æ—¶ï¼Œuser2 çš„ `UpdatedAt` ä¸ä¼šè¢«ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line">user3 := User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>, UpdatedAt: time.Now()&#125;</span><br><span class="line">db.Save(&amp;user3) <span class="comment">// æ›´æ–°æ—¶ï¼Œuser3 çš„ `UpdatedAt` ä¼šä¿®æ”¹ä¸ºå½“å‰æ—¶é—´</span></span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥é€šè¿‡å°† <code>autoUpdateTime</code> æ ‡ç­¾ç½®ä¸º <code>false</code> æ¥ç¦ç”¨æ—¶é—´æˆ³è¿½è¸ªï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  UpdatedAt time.Time <span class="string">`gorm:&quot;autoUpdateTime:false&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="DeletedAt"><a href="#DeletedAt" class="headerlink" title="DeletedAt"></a>DeletedAt</h3><p>å¦‚æœæ¨¡å‹æœ‰<code>DeletedAt</code>å­—æ®µï¼Œè°ƒç”¨<code>Delete</code>åˆ é™¤è¯¥è®°å½•æ—¶ï¼Œå°†ä¼šè®¾ç½®<code>DeletedAt</code>å­—æ®µä¸ºå½“å‰æ—¶é—´ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†è®°å½•ä»æ•°æ®åº“ä¸­åˆ é™¤ã€‚</p>
<h2 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h2><h3 id="åˆ›å»ºè®°å½•"><a href="#åˆ›å»ºè®°å½•" class="headerlink" title="åˆ›å»ºè®°å½•"></a>åˆ›å»ºè®°å½•</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	ID       <span class="type">uint</span></span><br><span class="line">	Name     <span class="type">string</span></span><br><span class="line">	Age      <span class="type">uint8</span></span><br><span class="line">	Birthday time.Time</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dsn := <span class="string">&quot;root:@tcp(127.0.0.1:3306)/gorm?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span><br><span class="line">	db, err := gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(<span class="string">&quot;failed to connect database&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// è‡ªåŠ¨è¿ç§»</span></span><br><span class="line">	err = db.AutoMigrate(&amp;User&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(<span class="string">&quot;failed to migrate&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	user := User&#123;Name: <span class="string">&quot;Jinzhu&quot;</span>, Age: <span class="number">18</span>, Birthday: time.Now()&#125;</span><br><span class="line"></span><br><span class="line">	result := db.Create(&amp;user)       <span class="comment">// é€šè¿‡æ•°æ®çš„æŒ‡é’ˆæ¥åˆ›å»º</span></span><br><span class="line">	fmt.Println(user.ID)             <span class="comment">// è¿”å›æ’å…¥æ•°æ®çš„ä¸»é”®</span></span><br><span class="line">	fmt.Println(result.Error)        <span class="comment">// è¿”å› error</span></span><br><span class="line">	fmt.Println(result.RowsAffected) <span class="comment">// è¿”å›æ’å…¥è®°å½•çš„æ¡æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>Create()</code> åˆ›å»ºå¤šé¡¹è®°å½•ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">users := []User&#123;</span><br><span class="line">		&#123;Name: <span class="string">&quot;Jinzhu&quot;</span>, Age: <span class="number">18</span>, Birthday: time.Now()&#125;,</span><br><span class="line">		&#123;Name: <span class="string">&quot;Jackson&quot;</span>, Age: <span class="number">19</span>, Birthday: time.Now()&#125;,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	result := db.Create(users) <span class="comment">// pass a slice to insert multiple row</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(result.Error)        <span class="comment">// returns error</span></span><br><span class="line">	fmt.Println(result.RowsAffected) <span class="comment">// returns inserted records count</span></span><br></pre></td></tr></table></figure>

<h3 id="ç”¨æŒ‡å®šçš„å­—æ®µåˆ›å»ºè®°å½•"><a href="#ç”¨æŒ‡å®šçš„å­—æ®µåˆ›å»ºè®°å½•" class="headerlink" title="ç”¨æŒ‡å®šçš„å­—æ®µåˆ›å»ºè®°å½•"></a>ç”¨æŒ‡å®šçš„å­—æ®µåˆ›å»ºè®°å½•</h3><p>åˆ›å»ºè®°å½•å¹¶ä¸ºæŒ‡å®šçš„å­—æ®µåˆ†é…å€¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Select(<span class="string">&quot;Name&quot;</span>, <span class="string">&quot;Age&quot;</span>, <span class="string">&quot;CreatedAt&quot;</span>).Create(&amp;user)</span><br><span class="line"><span class="comment">// INSERT INTO `users` (`name`,`age`,`created_at`) VALUES (&quot;jinzhu&quot;, 18, &quot;2020-07-04 11:05:21.775&quot;)</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºè®°å½•å¹¶å¿½ç•¥è¦çœç•¥çš„ä¼ é€’å­—æ®µçš„å€¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Omit(<span class="string">&quot;Name&quot;</span>, <span class="string">&quot;Age&quot;</span>, <span class="string">&quot;CreatedAt&quot;</span>).Create(&amp;user)</span><br><span class="line"><span class="comment">// INSERT INTO `users` (`birthday`,`updated_at`) VALUES (&quot;2020-01-01 00:00:00.000&quot;, &quot;2020-07-04 11:05:21.775&quot;)</span></span><br></pre></td></tr></table></figure>

<h3 id="æ‰¹é‡æ’å…¥"><a href="#æ‰¹é‡æ’å…¥" class="headerlink" title="æ‰¹é‡æ’å…¥"></a>æ‰¹é‡æ’å…¥</h3><p>è‹¥è¦æœ‰æ•ˆåœ°æ’å…¥å¤§é‡è®°å½•ï¼Œè¯·å°†ä¸€ä¸ªåˆ‡ç‰‡ä¼ é€’ç»™ <code>Create </code>æ–¹æ³•ã€‚GORM å°†ç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„ SQL è¯­å¥æ¥æ’å…¥æ‰€æœ‰æ•°æ®å¹¶å›å¡«ä¸»é”®å€¼ï¼Œé’©å­æ–¹æ³•ä¹Ÿå°†è¢«è°ƒç”¨ã€‚å½“è®°å½•å¯ä»¥åˆ†æˆå¤šä¸ªæ‰¹å¤„ç†æ—¶ï¼Œå®ƒå°†å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> users = []User&#123;&#123;Name: <span class="string">&quot;jinzhu1&quot;</span>&#125;, &#123;Name: <span class="string">&quot;jinzhu2&quot;</span>&#125;, &#123;Name: <span class="string">&quot;jinzhu3&quot;</span>&#125;&#125;</span><br><span class="line">	db.Create(&amp;users)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, user := <span class="keyword">range</span> users &#123;</span><br><span class="line">		fmt.Println(user.ID) <span class="comment">// 1,2,3</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥åœ¨ä½¿ç”¨ <code>CreateInBatches </code>åˆ›å»ºæ—¶æŒ‡å®šæ‰¹å¤„ç†å¤§å°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> users = []User&#123;&#123;Name: <span class="string">&quot;jinzhu_1&quot;</span>&#125;, ...,&#123;Name: <span class="string">&quot;jinzhu_10000&quot;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// batch size 100</span></span><br><span class="line">	db.CreateInBatches(users, <span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<h3 id="æ ¹æ®-Map-åˆ›å»º"><a href="#æ ¹æ®-Map-åˆ›å»º" class="headerlink" title="æ ¹æ® Map åˆ›å»º"></a>æ ¹æ® Map åˆ›å»º</h3><p>GORM æ”¯æŒä»<code> map [ string ] interface &#123;&#125;</code>å’Œ<code>[] map [ string ] interface &#123;&#125;&#123;&#125;</code>åˆ›å»ºï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Model(&amp;User&#123;&#125;).Create(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line">		<span class="string">&quot;Name&quot;</span>: <span class="string">&quot;jinzhu&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="number">18</span>,</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// batch insert from `[]map[string]interface&#123;&#125;&#123;&#125;`</span></span><br><span class="line">	db.Model(&amp;User&#123;&#125;).Create([]<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line">		&#123;<span class="string">&quot;Name&quot;</span>: <span class="string">&quot;jinzhu_1&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;Name&quot;</span>: <span class="string">&quot;jinzhu_2&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="number">20</span>&#125;,</span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„: ä» map åˆ›å»ºæ—¶ï¼Œä¸ä¼šè°ƒç”¨ hookï¼Œä¸ä¼šä¿å­˜å…³è”ï¼Œä¸»é”®å€¼ä¹Ÿä¸ä¼šè¿”å›å¡«å……</p>
</blockquote>
<h3 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h3><p>å¯ä»¥é€šè¿‡ tag å®šä¹‰å­—æ®µçš„é»˜è®¤å€¼ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID   <span class="type">int64</span></span><br><span class="line">  Name <span class="type">string</span> <span class="string">`gorm:&quot;default:galeone&quot;`</span></span><br><span class="line">  Age  <span class="type">int64</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong>é€šè¿‡tagå®šä¹‰å­—æ®µçš„é»˜è®¤å€¼ï¼Œåœ¨åˆ›å»ºè®°å½•æ—¶å€™ç”Ÿæˆçš„ SQL è¯­å¥ä¼šæ’é™¤æ²¡æœ‰å€¼æˆ–å€¼ä¸º é›¶å€¼ çš„å­—æ®µã€‚ åœ¨å°†è®°å½•æ’å…¥åˆ°æ•°æ®åº“åï¼ŒGormä¼šä»æ•°æ®åº“åŠ è½½é‚£äº›å­—æ®µçš„é»˜è®¤å€¼ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> user = User&#123;Name: <span class="string">&quot;&quot;</span>, Age: <span class="number">99</span>&#125;</span><br><span class="line">db.Create(&amp;user)</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç å®é™…æ‰§è¡Œçš„SQLè¯­å¥æ˜¯<code>INSERT INTO users(&quot;age&quot;) values(&#39;99&#39;);</code>ï¼Œæ’é™¤äº†é›¶å€¼å­—æ®µ<code>Name</code>ï¼Œè€Œåœ¨æ•°æ®åº“ä¸­è¿™ä¸€æ¡æ•°æ®ä¼šä½¿ç”¨è®¾ç½®çš„é»˜è®¤å€¼ä½œä¸ºNameå­—æ®µçš„å€¼ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong>æ‰€æœ‰å­—æ®µçš„é›¶å€¼, æ¯”å¦‚<code>0</code>, <code>&quot;&quot;</code>,<code>false</code>æˆ–è€…å…¶å®ƒ<code>é›¶å€¼</code>ï¼Œéƒ½ä¸ä¼šä¿å­˜åˆ°æ•°æ®åº“å†…ï¼Œä½†ä¼šä½¿ç”¨ä»–ä»¬çš„é»˜è®¤å€¼ã€‚ å¦‚æœä½ æƒ³é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æŒ‡é’ˆæˆ–å®ç° <code>Scanner/Valuer</code>æ¥å£ï¼Œæ¯”å¦‚ï¼š</p>
<h4 id="ä½¿ç”¨æŒ‡é’ˆæ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“"><a href="#ä½¿ç”¨æŒ‡é’ˆæ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“" class="headerlink" title="ä½¿ç”¨æŒ‡é’ˆæ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“"></a>ä½¿ç”¨æŒ‡é’ˆæ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	ID   <span class="type">int64</span></span><br><span class="line">	Name *<span class="type">string</span> <span class="string">`gorm:&quot;default:galeone&quot;`</span></span><br><span class="line">	Age  <span class="type">int64</span>   </span><br><span class="line">&#125;</span><br><span class="line">user := User&#123;Name: <span class="built_in">new</span>(<span class="type">string</span>), Age: <span class="number">18</span>&#125;</span><br><span class="line">db.Create(&amp;user)  <span class="comment">// æ­¤æ—¶æ•°æ®åº“ä¸­è¯¥æ¡è®°å½•nameå­—æ®µçš„å€¼å°±æ˜¯&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨Scanner-Valueræ¥å£æ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“"><a href="#ä½¿ç”¨Scanner-Valueræ¥å£æ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“" class="headerlink" title="ä½¿ç”¨Scanner&#x2F;Valueræ¥å£æ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“"></a>ä½¿ç”¨Scanner&#x2F;Valueræ¥å£æ–¹å¼å®ç°é›¶å€¼å­˜å…¥æ•°æ®åº“</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ Scanner/Valuer</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	ID <span class="type">int64</span></span><br><span class="line">	Name sql.NullString <span class="string">`gorm:&quot;default:&#x27;galeone&#x27;&quot;`</span> <span class="comment">// sql.NullString å®ç°äº†Scanner/Valueræ¥å£</span></span><br><span class="line">	Age  <span class="type">int64</span></span><br><span class="line">&#125;</span><br><span class="line">user := User&#123;Name: sql.NullString&#123;Valid: <span class="literal">true</span>&#125;, Age: <span class="number">18</span>&#125;</span><br><span class="line">db.Create(&amp;user)  <span class="comment">// æ­¤æ—¶æ•°æ®åº“ä¸­è¯¥æ¡è®°å½•nameå­—æ®µçš„å€¼å°±æ˜¯&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ‰©å±•åˆ›å»ºé€‰é¡¹"><a href="#æ‰©å±•åˆ›å»ºé€‰é¡¹" class="headerlink" title="æ‰©å±•åˆ›å»ºé€‰é¡¹"></a>æ‰©å±•åˆ›å»ºé€‰é¡¹</h3><p>ä¾‹å¦‚<code>PostgreSQL</code>æ•°æ®åº“ä¸­å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼å®ç°åˆå¹¶æ’å…¥, æœ‰åˆ™æ›´æ–°, æ— åˆ™æ’å…¥ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸ºInstertè¯­å¥æ·»åŠ æ‰©å±•SQLé€‰é¡¹</span></span><br><span class="line">db.Set(<span class="string">&quot;gorm:insert_option&quot;</span>, <span class="string">&quot;ON CONFLICT&quot;</span>).Create(&amp;product)</span><br><span class="line"><span class="comment">// INSERT INTO products (name, code) VALUES (&quot;name&quot;, &quot;code&quot;) ON CONFLICT;</span></span><br></pre></td></tr></table></figure>

<h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h2><h3 id="ä¸€èˆ¬æŸ¥è¯¢"><a href="#ä¸€èˆ¬æŸ¥è¯¢" class="headerlink" title="ä¸€èˆ¬æŸ¥è¯¢"></a>ä¸€èˆ¬æŸ¥è¯¢</h3><p>GORM æä¾›äº† <code>First</code>ã€<code>Take</code>ã€<code>Last</code> æ–¹æ³•ï¼Œä»¥ä¾¿ä»æ•°æ®åº“ä¸­æ£€ç´¢å•ä¸ªå¯¹è±¡ã€‚å½“æŸ¥è¯¢æ•°æ®åº“æ—¶å®ƒæ·»åŠ äº† <code>LIMIT 1</code> æ¡ä»¶ï¼Œä¸”æ²¡æœ‰æ‰¾åˆ°è®°å½•æ—¶ï¼Œå®ƒä¼šè¿”å› <code>ErrRecordNotFound</code> é”™è¯¯ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®ä¸»é”®æŸ¥è¯¢ç¬¬ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="keyword">var</span> user User</span><br><span class="line">result := db.First(&amp;user)</span><br><span class="line">fmt.Println(result.RowsAffected) <span class="comment">// è¿”å›æ‰¾åˆ°çš„è®°å½•æ•°</span></span><br><span class="line">fmt.Println(result.Error)        <span class="comment">// returns error or nil</span></span><br><span class="line"><span class="comment">//// SELECT * FROM users ORDER BY id LIMIT 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éšæœºè·å–ä¸€æ¡è®°å½•</span></span><br><span class="line">db.Take(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users LIMIT 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®ä¸»é”®æŸ¥è¯¢æœ€åä¸€æ¡è®°å½•</span></span><br><span class="line">db.Last(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users ORDER BY id DESC LIMIT 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰çš„è®°å½•</span></span><br><span class="line">db.Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æŒ‡å®šçš„æŸæ¡è®°å½•(ä»…å½“ä¸»é”®ä¸ºæ•´å‹æ—¶å¯ç”¨)</span></span><br><span class="line">db.First(&amp;user, <span class="number">10</span>)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE id = 10;</span></span><br><span class="line"></span><br><span class="line">db.First(&amp;user, <span class="number">10</span>)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE id = 10;</span></span><br><span class="line"></span><br><span class="line">db.First(&amp;user, <span class="string">&quot;10&quot;</span>)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE id = 10;</span></span><br><span class="line"></span><br><span class="line">db.Find(&amp;users, []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE id IN (1,2,3);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸»é”®ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">db.First(&amp;user, <span class="string">&quot;id = ?&quot;</span>, <span class="string">&quot;1b74413f-f3b8-409f-ac47-e8c062e3472a&quot;</span>)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE id = &quot;1b74413f-f3b8-409f-ac47-e8c062e3472a&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœä½ æƒ³é¿å…<code>ErrRecordNotFound</code>é”™è¯¯ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>Find</code>ï¼Œæ¯”å¦‚<code>db.Limit(1).Find(&amp;user)</code>ï¼Œ<code>Find</code>æ–¹æ³•å¯ä»¥æ¥å—structå’Œsliceçš„æ•°æ®ã€‚</p>
</blockquote>
<blockquote>
<p>å¯¹å•ä¸ªå¯¹è±¡ä½¿ç”¨<code>Find</code>è€Œä¸å¸¦limitï¼Œ<code>db.Find(&amp;user)</code>å°†ä¼šæŸ¥è¯¢æ•´ä¸ªè¡¨å¹¶ä¸”åªè¿”å›ç¬¬ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ˜¯æ€§èƒ½ä¸é«˜å¹¶ä¸”ä¸ç¡®å®šçš„ã€‚</p>
</blockquote>
<h3 id="Where-æ¡ä»¶"><a href="#Where-æ¡ä»¶" class="headerlink" title="Where æ¡ä»¶"></a>Where æ¡ä»¶</h3><h4 id="æ™®é€šSQLæŸ¥è¯¢"><a href="#æ™®é€šSQLæŸ¥è¯¢" class="headerlink" title="æ™®é€šSQLæŸ¥è¯¢"></a>æ™®é€šSQLæŸ¥è¯¢</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Get first matched record</span></span><br><span class="line">db.Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).First(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name = &#x27;jinzhu&#x27; limit 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Get all matched records</span></span><br><span class="line">db.Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name = &#x27;jinzhu&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;&gt;</span></span><br><span class="line">db.Where(<span class="string">&quot;name &lt;&gt; ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name &lt;&gt; &#x27;jinzhu&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// IN</span></span><br><span class="line">db.Where(<span class="string">&quot;name IN (?)&quot;</span>, []<span class="type">string</span>&#123;<span class="string">&quot;jinzhu&quot;</span>, <span class="string">&quot;jinzhu 2&quot;</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name in (&#x27;jinzhu&#x27;,&#x27;jinzhu 2&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// LIKE</span></span><br><span class="line">db.Where(<span class="string">&quot;name LIKE ?&quot;</span>, <span class="string">&quot;%jin%&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name LIKE &#x27;%jin%&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// AND</span></span><br><span class="line">db.Where(<span class="string">&quot;name = ? AND age &gt;= ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>, <span class="string">&quot;22&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name = &#x27;jinzhu&#x27; AND age &gt;= 22;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Time</span></span><br><span class="line">db.Where(<span class="string">&quot;updated_at &gt; ?&quot;</span>, lastWeek).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE updated_at &gt; &#x27;2000-01-01 00:00:00&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// BETWEEN</span></span><br><span class="line">db.Where(<span class="string">&quot;created_at BETWEEN ? AND ?&quot;</span>, lastWeek, today).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE created_at BETWEEN &#x27;2000-01-01 00:00:00&#x27; AND &#x27;2000-01-08 00:00:00&#x27;;</span></span><br></pre></td></tr></table></figure>

<h4 id="Struct-MapæŸ¥è¯¢"><a href="#Struct-MapæŸ¥è¯¢" class="headerlink" title="Struct &amp; MapæŸ¥è¯¢"></a>Struct &amp; MapæŸ¥è¯¢</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Struct</span></span><br><span class="line">db.Where(&amp;User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>, Age: <span class="number">20</span>&#125;).First(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name = &quot;jinzhu&quot; AND age = 20 LIMIT 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Map</span></span><br><span class="line">db.Where(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;jinzhu&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">20</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name = &quot;jinzhu&quot; AND age = 20;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»é”®çš„åˆ‡ç‰‡</span></span><br><span class="line">db.Where([]<span class="type">int64</span>&#123;<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE id IN (20, 21, 22);</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong>å½“é€šè¿‡ç»“æ„ä½“è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ŒGORMå°†ä¼šåªé€šè¿‡éé›¶å€¼å­—æ®µæŸ¥è¯¢ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ çš„å­—æ®µå€¼ä¸º<code>0</code>ï¼Œ<code>&#39;&#39;</code>ï¼Œ<code>false</code>æˆ–è€…å…¶ä»–<code>é›¶å€¼</code>æ—¶ï¼Œå°†ä¸ä¼šè¢«ç”¨äºæ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Where(&amp;User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>, Age: <span class="number">0</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name = &quot;jinzhu&quot;;</span></span><br></pre></td></tr></table></figure>

<p>è‹¥è¦åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«é›¶å€¼ï¼Œå¯ä»¥ä½¿ç”¨æ˜ å°„ï¼Œè¯¥æ˜ å°„å°†åŒ…å«æ‰€æœ‰é”®å€¼ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œä¾‹å¦‚:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Where(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;Name&quot;</span>: <span class="string">&quot;jinzhu&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="number">0</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE name = &quot;jinzhu&quot; AND age = 0;</span></span><br></pre></td></tr></table></figure>

<h3 id="æŒ‡å®šç»“æ„ä½“æŸ¥è¯¢å­—æ®µ"><a href="#æŒ‡å®šç»“æ„ä½“æŸ¥è¯¢å­—æ®µ" class="headerlink" title="æŒ‡å®šç»“æ„ä½“æŸ¥è¯¢å­—æ®µ"></a>æŒ‡å®šç»“æ„ä½“æŸ¥è¯¢å­—æ®µ</h3><p>åœ¨ä½¿ç”¨ struct è¿›è¡Œæœç´¢æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¼ é€’ç›¸å…³çš„å­—æ®µåæˆ– dbname åˆ° Where ()æ¥æŒ‡å®šåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨ struct ä¸­çš„å“ªäº›ç‰¹å®šå€¼ï¼Œä¾‹å¦‚:</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Where(&amp;User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>&#125;, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;Age&quot;</span>).Find(&amp;users)<span class="comment">// SELECT * FROM users WHERE name = &quot;jinzhu&quot; AND age = 0;</span></span><br><span class="line">db.Where(&amp;User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>&#125;, <span class="string">&quot;Age&quot;</span>).Find(&amp;users)<span class="comment">// SELECT * FROM users WHERE age = 0;</span></span><br></pre></td></tr></table></figure>

<h3 id="Not-æ¡ä»¶"><a href="#Not-æ¡ä»¶" class="headerlink" title="Not æ¡ä»¶"></a>Not æ¡ä»¶</h3><p>ä½œç”¨ä¸ Where ç±»ä¼¼çš„æƒ…å½¢å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Not(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).First(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name &lt;&gt; &quot;jinzhu&quot; LIMIT 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Not In</span></span><br><span class="line">db.Not(<span class="string">&quot;name&quot;</span>, []<span class="type">string</span>&#123;<span class="string">&quot;jinzhu&quot;</span>, <span class="string">&quot;jinzhu 2&quot;</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name NOT IN (&quot;jinzhu&quot;, &quot;jinzhu 2&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Not In slice of primary keys</span></span><br><span class="line">db.Not([]<span class="type">int64</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;).First(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE id NOT IN (1,2,3);</span></span><br><span class="line"></span><br><span class="line">db.Not([]<span class="type">int64</span>&#123;&#125;).First(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Plain SQL</span></span><br><span class="line">db.Not(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).First(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE NOT(name = &quot;jinzhu&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Struct</span></span><br><span class="line">db.Not(User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>&#125;).First(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name &lt;&gt; &quot;jinzhu&quot;;</span></span><br></pre></td></tr></table></figure>

<h3 id="Oræ¡ä»¶"><a href="#Oræ¡ä»¶" class="headerlink" title="Oræ¡ä»¶"></a>Oræ¡ä»¶</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Where(<span class="string">&quot;role = ?&quot;</span>, <span class="string">&quot;admin&quot;</span>).Or(<span class="string">&quot;role = ?&quot;</span>, <span class="string">&quot;super_admin&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE role = &#x27;admin&#x27; OR role = &#x27;super_admin&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Struct</span></span><br><span class="line">db.Where(<span class="string">&quot;name = &#x27;jinzhu&#x27;&quot;</span>).Or(User&#123;Name: <span class="string">&quot;jinzhu 2&quot;</span>, Age: <span class="number">18</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE name = &#x27;jinzhu&#x27; OR (name = &#x27;jinzhu 2&#x27; AND age = 18);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Map</span></span><br><span class="line">db.Where(<span class="string">&quot;name = &#x27;jinzhu&#x27;&quot;</span>).Or(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;jinzhu 2&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE name = &#x27;jinzhu&#x27; OR (name = &#x27;jinzhu 2&#x27; AND age = 18);</span></span><br></pre></td></tr></table></figure>

<h3 id="å†…è”æ¡ä»¶"><a href="#å†…è”æ¡ä»¶" class="headerlink" title="å†…è”æ¡ä»¶"></a>å†…è”æ¡ä»¶</h3><p>ä½œç”¨ä¸<code>Where</code>æŸ¥è¯¢ç±»ä¼¼ï¼Œå½“å†…è”æ¡ä»¶ä¸å¤šä¸ª<a href="https://www.liwenzhou.com/posts/Go/gorm-crud/#autoid-1-3-1">ç«‹å³æ‰§è¡Œæ–¹æ³•</a>ä¸€èµ·ä½¿ç”¨æ—¶, å†…è”æ¡ä»¶ä¸ä¼šä¼ é€’ç»™åé¢çš„ç«‹å³æ‰§è¡Œæ–¹æ³•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®ä¸»é”®è·å–è®°å½• (åªé€‚ç”¨äºæ•´å½¢ä¸»é”®)</span></span><br><span class="line">db.First(&amp;user, <span class="number">23</span>)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE id = 23 LIMIT 1;</span></span><br><span class="line"><span class="comment">// æ ¹æ®ä¸»é”®è·å–è®°å½•, å¦‚æœå®ƒæ˜¯ä¸€ä¸ªéæ•´å½¢ä¸»é”®</span></span><br><span class="line">db.First(&amp;user, <span class="string">&quot;id = ?&quot;</span>, <span class="string">&quot;string_primary_key&quot;</span>)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE id = &#x27;string_primary_key&#x27; LIMIT 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Plain SQL</span></span><br><span class="line">db.Find(&amp;user, <span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name = &quot;jinzhu&quot;;</span></span><br><span class="line"></span><br><span class="line">db.Find(&amp;users, <span class="string">&quot;name &lt;&gt; ? AND age &gt; ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>, <span class="number">20</span>)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE name &lt;&gt; &quot;jinzhu&quot; AND age &gt; 20;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Struct</span></span><br><span class="line">db.Find(&amp;users, User&#123;Age: <span class="number">20</span>&#125;)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE age = 20;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Map</span></span><br><span class="line">db.Find(&amp;users, <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;age&quot;</span>: <span class="number">20</span>&#125;)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE age = 20;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¡¥å……ï¼š<code>&lt;&gt;</code> æ˜¯ SQL ä¸­çš„æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œç”¨äºæ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰ã€‚åœ¨ Go è¯­è¨€ä¸­ï¼Œ<code>&lt;&gt;</code> è¢«ç”¨ä½œ <code>db.Find</code> æ–¹æ³•çš„æŸ¥è¯¢æ¡ä»¶ã€‚</p>
</blockquote>
<h3 id="é¢å¤–æŸ¥è¯¢é€‰é¡¹"><a href="#é¢å¤–æŸ¥è¯¢é€‰é¡¹" class="headerlink" title="é¢å¤–æŸ¥è¯¢é€‰é¡¹"></a>é¢å¤–æŸ¥è¯¢é€‰é¡¹</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸ºæŸ¥è¯¢ SQL æ·»åŠ é¢å¤–çš„ SQL æ“ä½œ</span></span><br><span class="line">db.Set(<span class="string">&quot;gorm:query_option&quot;</span>, <span class="string">&quot;FOR UPDATE&quot;</span>).First(&amp;user, <span class="number">10</span>)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE id = 10 FOR UPDATE;</span></span><br></pre></td></tr></table></figure>

<h3 id="Find-è‡³-map"><a href="#Find-è‡³-map" class="headerlink" title="Find è‡³ map"></a>Find è‡³ map</h3><p>GORM å…è®¸æ‰«æç»“æœè‡³ <code>map[string]interface&#123;&#125;</code> æˆ– <code>[]map[string]interface&#123;&#125;</code>ï¼Œæ­¤æ—¶åˆ«å¿˜äº†æŒ‡å®š <code>Model</code> æˆ– <code>Table</code>ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">result := map[string]interface&#123;&#125;&#123;&#125;</span><br><span class="line">db.Model(&amp;User&#123;&#125;).First(&amp;result, &quot;id = ?&quot;, 1)</span><br><span class="line"></span><br><span class="line">var results []map[string]interface&#123;&#125;</span><br><span class="line">db.Table(&quot;users&quot;).Find(&amp;results)</span><br></pre></td></tr></table></figure>

<h3 id="FirstOrInit"><a href="#FirstOrInit" class="headerlink" title="FirstOrInit"></a>FirstOrInit</h3><p>è·å–ç¬¬ä¸€æ¡åŒ¹é…çš„è®°å½•ï¼Œæˆ–è€…æ ¹æ®ç»™å®šçš„æ¡ä»¶åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹ï¼ˆä»…æ”¯æŒ sturct å’Œ map æ¡ä»¶ï¼‰</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœªæ‰¾åˆ° userï¼Œåˆ™æ ¹æ®ç»™å®šçš„æ¡ä»¶åˆå§‹åŒ–ä¸€æ¡è®°å½•</span></span><br><span class="line">db.FirstOrInit(&amp;user, User&#123;Name: <span class="string">&quot;non_existing&quot;</span>&#125;)</span><br><span class="line"><span class="comment">// user -&gt; User&#123;Name: &quot;non_existing&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°äº† `name` = `jinzhu` çš„ user</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>&#125;).FirstOrInit(&amp;user)</span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 111, Name: &quot;Jinzhu&quot;, Age: 18&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°äº† `name` = `jinzhu` çš„ user</span></span><br><span class="line">db.FirstOrInit(&amp;user, <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;jinzhu&quot;</span>&#125;)</span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 111, Name: &quot;Jinzhu&quot;, Age: 18&#125;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨åŒ…å«æ›´å¤šçš„å±æ€§çš„ç»“æ„ä½“åˆå§‹åŒ– userï¼Œ<code>Attrs</code> ä¸ä¼šè¢«ç”¨äºç”ŸæˆæŸ¥è¯¢ SQL</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœªæ‰¾åˆ° userï¼Œåˆ™æ ¹æ®ç»™å®šçš„æ¡ä»¶ä»¥åŠ Attrs åˆå§‹åŒ– user</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;non_existing&quot;</span>&#125;).Attrs(User&#123;Age: <span class="number">20</span>&#125;).FirstOrInit(&amp;user)</span><br><span class="line"><span class="comment">// SELECT * FROM USERS WHERE name = &#x27;non_existing&#x27; ORDER BY id LIMIT 1;</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;Name: &quot;non_existing&quot;, Age: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœªæ‰¾åˆ° userï¼Œåˆ™æ ¹æ®ç»™å®šçš„æ¡ä»¶ä»¥åŠ Attrs åˆå§‹åŒ– user</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;non_existing&quot;</span>&#125;).Attrs(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>).FirstOrInit(&amp;user)</span><br><span class="line"><span class="comment">// SELECT * FROM USERS WHERE name = &#x27;non_existing&#x27; ORDER BY id LIMIT 1;</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;Name: &quot;non_existing&quot;, Age: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°äº† `name` = `jinzhu` çš„ userï¼Œåˆ™å¿½ç•¥ Attrs</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;Jinzhu&quot;</span>&#125;).Attrs(User&#123;Age: <span class="number">20</span>&#125;).FirstOrInit(&amp;user)</span><br><span class="line"><span class="comment">// SELECT * FROM USERS WHERE name = jinzhu&#x27; ORDER BY id LIMIT 1;</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 111, Name: &quot;Jinzhu&quot;, Age: 18&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä¸ç®¡æ˜¯å¦æ‰¾åˆ°è®°å½•ï¼Œ<code>Assign</code> éƒ½ä¼šå°†å±æ€§èµ‹å€¼ç»™ structï¼Œä½†è¿™äº›å±æ€§ä¸ä¼šè¢«ç”¨äºç”ŸæˆæŸ¥è¯¢ SQLï¼Œä¹Ÿä¸ä¼šè¢«ä¿å­˜åˆ°æ•°æ®åº“</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœªæ‰¾åˆ° userï¼Œæ ¹æ®æ¡ä»¶å’Œ Assign å±æ€§åˆå§‹åŒ– struct</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;non_existing&quot;</span>&#125;).Assign(User&#123;Age: <span class="number">20</span>&#125;).FirstOrInit(&amp;user)</span><br><span class="line"><span class="comment">// user -&gt; User&#123;Name: &quot;non_existing&quot;, Age: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ° `name` = `jinzhu` çš„è®°å½•ï¼Œä¾ç„¶ä¼šæ›´æ–° Assign ç›¸å…³çš„å±æ€§</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;Jinzhu&quot;</span>&#125;).Assign(User&#123;Age: <span class="number">20</span>&#125;).FirstOrInit(&amp;user)</span><br><span class="line"><span class="comment">// SELECT * FROM USERS WHERE name = jinzhu&#x27; ORDER BY id LIMIT 1;</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 111, Name: &quot;Jinzhu&quot;, Age: 20&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="FirstOrCreate"><a href="#FirstOrCreate" class="headerlink" title="FirstOrCreate"></a>FirstOrCreate</h3><p>è·å–åŒ¹é…çš„ç¬¬ä¸€æ¡è®°å½•æˆ–è€…æ ¹æ®ç»™å®šæ¡ä»¶åˆ›å»ºä¸€æ¡æ–°çºªå½•ï¼ˆä»… struct, map æ¡ä»¶æœ‰æ•ˆï¼‰ï¼Œ<code>RowsAffected</code> è¿”å›åˆ›å»ºã€æ›´æ–°çš„è®°å½•æ•°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœªæ‰¾åˆ° Userï¼Œæ ¹æ®ç»™å®šæ¡ä»¶åˆ›å»ºä¸€æ¡æ–°çºªå½•</span></span><br><span class="line">result := db.FirstOrCreate(&amp;user, User&#123;Name: <span class="string">&quot;non_existing&quot;</span>&#125;)</span><br><span class="line"><span class="comment">// INSERT INTO &quot;users&quot; (name) VALUES (&quot;non_existing&quot;);</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 112, Name: &quot;non_existing&quot;&#125;</span></span><br><span class="line"><span class="comment">// result.RowsAffected // =&gt; 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ° `name` = `jinzhu` çš„ User</span></span><br><span class="line">result := db.Where(User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>&#125;).FirstOrCreate(&amp;user)</span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 111, Name: &quot;jinzhu&quot;, &quot;Age&quot;: 18&#125;</span></span><br><span class="line"><span class="comment">// result.RowsAffected // =&gt; 0</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨åŒ…å«æ›´å¤šçš„å±æ€§çš„ç»“æ„ä½“åˆ›å»ºè®°å½•ï¼Œ<code>Attrs</code> ä¸ä¼šè¢«ç”¨äºç”ŸæˆæŸ¥è¯¢ SQL ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœªæ‰¾åˆ° userï¼Œæ ¹æ®æ¡ä»¶å’Œ Assign å±æ€§åˆ›å»ºè®°å½•</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;non_existing&quot;</span>&#125;).Attrs(User&#123;Age: <span class="number">20</span>&#125;).FirstOrCreate(&amp;user)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE name = &#x27;non_existing&#x27; ORDER BY id LIMIT 1;</span></span><br><span class="line"><span class="comment">// INSERT INTO &quot;users&quot; (name, age) VALUES (&quot;non_existing&quot;, 20);</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 112, Name: &quot;non_existing&quot;, Age: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°äº† `name` = `jinzhu` çš„ userï¼Œåˆ™å¿½ç•¥ Attrs</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>&#125;).Attrs(User&#123;Age: <span class="number">20</span>&#125;).FirstOrCreate(&amp;user)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE name = &#x27;jinzhu&#x27; ORDER BY id LIMIT 1;</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 111, Name: &quot;jinzhu&quot;, Age: 18&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä¸ç®¡æ˜¯å¦æ‰¾åˆ°è®°å½•ï¼Œ<code>Assign</code> éƒ½ä¼šå°†å±æ€§èµ‹å€¼ç»™ structï¼Œå¹¶å°†ç»“æœå†™å›æ•°æ®åº“</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœªæ‰¾åˆ° userï¼Œæ ¹æ®æ¡ä»¶å’Œ Assign å±æ€§åˆ›å»ºè®°å½•</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;non_existing&quot;</span>&#125;).Assign(User&#123;Age: <span class="number">20</span>&#125;).FirstOrCreate(&amp;user)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE name = &#x27;non_existing&#x27; ORDER BY id LIMIT 1;</span></span><br><span class="line"><span class="comment">// INSERT INTO &quot;users&quot; (name, age) VALUES (&quot;non_existing&quot;, 20);</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 112, Name: &quot;non_existing&quot;, Age: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°äº† `name` = `jinzhu` çš„ userï¼Œä¾ç„¶ä¼šæ ¹æ® Assign æ›´æ–°è®°å½•</span></span><br><span class="line">db.Where(User&#123;Name: <span class="string">&quot;jinzhu&quot;</span>&#125;).Assign(User&#123;Age: <span class="number">20</span>&#125;).FirstOrCreate(&amp;user)</span><br><span class="line"><span class="comment">// SELECT * FROM users WHERE name = &#x27;jinzhu&#x27; ORDER BY id LIMIT 1;</span></span><br><span class="line"><span class="comment">// UPDATE users SET age=20 WHERE id = 111;</span></span><br><span class="line"><span class="comment">// user -&gt; User&#123;ID: 111, Name: &quot;jinzhu&quot;, Age: 20&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="é«˜çº§æŸ¥è¯¢"><a href="#é«˜çº§æŸ¥è¯¢" class="headerlink" title="é«˜çº§æŸ¥è¯¢"></a>é«˜çº§æŸ¥è¯¢</h3><h4 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h4><p>åŸºäº <code>*gorm.expr</code> çš„å­æŸ¥è¯¢</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Where(<span class="string">&quot;amount &gt; (?)&quot;</span>, db.Table(<span class="string">&quot;orders&quot;</span>).Select(<span class="string">&quot;AVG(amount)&quot;</span>)).Find(&amp;orders)</span><br><span class="line"><span class="comment">// SELECT * FROM &quot;orders&quot; WHERE amount &gt; (SELECT AVG(amount) FROM &quot;orders&quot;);</span></span><br><span class="line"></span><br><span class="line">subQuery := db.Select(<span class="string">&quot;AVG(age)&quot;</span>).Where(<span class="string">&quot;name LIKE ?&quot;</span>, <span class="string">&quot;name%&quot;</span>).Table(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">db.Select(<span class="string">&quot;AVG(age) as avgage&quot;</span>).Group(<span class="string">&quot;name&quot;</span>).Having(<span class="string">&quot;AVG(age) &gt; (?)&quot;</span>, subQuery).Find(&amp;results)</span><br><span class="line"><span class="comment">// SELECT AVG(age) as avgage FROM `users` GROUP BY `name` HAVING AVG(age) &gt; (SELECT AVG(age) FROM `users` WHERE name LIKE &quot;name%&quot;)</span></span><br></pre></td></tr></table></figure>

<h5 id="From-å­æŸ¥è¯¢"><a href="#From-å­æŸ¥è¯¢" class="headerlink" title="From å­æŸ¥è¯¢"></a>From å­æŸ¥è¯¢</h5><p>GORM å…è®¸æ‚¨åœ¨ <code>Table</code> æ–¹æ³•ä¸­é€šè¿‡ FROM å­å¥ä½¿ç”¨å­æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Table(<span class="string">&quot;(?) as u&quot;</span>, db.Model(&amp;User&#123;&#125;).Select(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>)).Where(<span class="string">&quot;age = ?&quot;</span>, <span class="number">18</span>).Find(&amp;User&#123;&#125;)</span><br><span class="line"><span class="comment">// SELECT * FROM (SELECT `name`,`age` FROM `users`) as u WHERE `age` = 18</span></span><br><span class="line"></span><br><span class="line">subQuery1 := db.Model(&amp;User&#123;&#125;).Select(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">subQuery2 := db.Model(&amp;Pet&#123;&#125;).Select(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">db.Table(<span class="string">&quot;(?) as u, (?) as p&quot;</span>, subQuery1, subQuery2).Find(&amp;User&#123;&#125;)</span><br><span class="line"><span class="comment">// SELECT * FROM (SELECT `name` FROM `users`) as u, (SELECT `name` FROM `pets`) as p</span></span><br></pre></td></tr></table></figure>

<h4 id="é€‰æ‹©å­—æ®µ"><a href="#é€‰æ‹©å­—æ®µ" class="headerlink" title="é€‰æ‹©å­—æ®µ"></a>é€‰æ‹©å­—æ®µ</h4><p>Selectï¼ŒæŒ‡å®šä½ æƒ³ä»æ•°æ®åº“ä¸­æ£€ç´¢å‡ºçš„å­—æ®µï¼Œé»˜è®¤ä¼šé€‰æ‹©å…¨éƒ¨å­—æ®µã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Select(<span class="string">&quot;name, age&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT name, age FROM users;</span></span><br><span class="line"></span><br><span class="line">db.Select([]<span class="type">string</span>&#123;<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>&#125;).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT name, age FROM users;</span></span><br><span class="line"></span><br><span class="line">db.Table(<span class="string">&quot;users&quot;</span>).Select(<span class="string">&quot;COALESCE(age,?)&quot;</span>, <span class="number">42</span>).Rows()</span><br><span class="line"><span class="comment">//// SELECT COALESCE(age,&#x27;42&#x27;) FROM users;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¯´æ˜ï¼š<code>.Select(&quot;COALESCE(age, ?)&quot;, 42)</code>: è¿™æ˜¯æŒ‡å®šæŸ¥è¯¢çš„å­—æ®µã€‚åœ¨è¿™é‡Œä½¿ç”¨äº† <code>COALESCE</code> å‡½æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ª SQL å‡½æ•°ï¼Œç”¨äºåœ¨ç»“æœé›†ä¸­é€‰æ‹©ç¬¬ä¸€ä¸ªé NULL çš„å€¼ã€‚<code>age</code> æ˜¯å­—æ®µåï¼Œå¦‚æœ <code>age</code> å­—æ®µçš„å€¼ä¸º NULLï¼Œåˆ™ä¼šé€‰æ‹©åé¢æä¾›çš„æ›¿ä»£å€¼ <code>42</code>ã€‚å› æ­¤ï¼Œè¯¥æŸ¥è¯¢å°†ä¼šè¿”å› â€œusersâ€ è¡¨ä¸­æ¯è¡Œçš„ â€œageâ€ å­—æ®µå€¼ï¼Œå¦‚æœ â€œageâ€ å­—æ®µä¸º NULLï¼Œåˆ™è¿”å› 42ã€‚</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID     <span class="type">uint</span></span><br><span class="line">  Name   <span class="type">string</span></span><br><span class="line">  Age    <span class="type">int</span></span><br><span class="line">  Gender <span class="type">string</span></span><br><span class="line">  <span class="comment">// å‡è®¾åé¢è¿˜æœ‰å‡ ç™¾ä¸ªå­—æ®µ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> APIUser <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID   <span class="type">uint</span></span><br><span class="line">  Name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ—¶ä¼šè‡ªåŠ¨é€‰æ‹© `id`, `name` å­—æ®µ</span></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Limit(<span class="number">10</span>).Find(&amp;APIUser&#123;&#125;)</span><br><span class="line"><span class="comment">// SELECT `id`, `name` FROM `users` LIMIT 10</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>æ³¨æ„</strong> <code>QueryFields</code> æ¨¡å¼ä¼šæ ¹æ®å½“å‰ model çš„æ‰€æœ‰å­—æ®µåç§°è¿›è¡Œ selectã€‚</p>
</blockquote>
<h4 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h4><p>Orderï¼ŒæŒ‡å®šä»æ•°æ®åº“ä¸­æ£€ç´¢å‡ºè®°å½•çš„é¡ºåºã€‚è®¾ç½®ç¬¬äºŒä¸ªå‚æ•° reorder ä¸º <code>true</code> ï¼Œå¯ä»¥è¦†ç›–å‰é¢å®šä¹‰çš„æ’åºæ¡ä»¶ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Order(<span class="string">&quot;age desc, name&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users ORDER BY age desc, name;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šå­—æ®µæ’åº</span></span><br><span class="line">db.Order(<span class="string">&quot;age desc&quot;</span>).Order(<span class="string">&quot;name&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users ORDER BY age desc, name;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦†ç›–æ’åº</span></span><br><span class="line">db.Order(<span class="string">&quot;age desc&quot;</span>).Find(&amp;users1).Order(<span class="string">&quot;age&quot;</span>, <span class="literal">true</span>).Find(&amp;users2)</span><br><span class="line"><span class="comment">//// SELECT * FROM users ORDER BY age desc; (users1)</span></span><br><span class="line"><span class="comment">//// SELECT * FROM users ORDER BY age; (users2)</span></span><br></pre></td></tr></table></figure>

<h4 id="æ•°é‡å’Œåç§»"><a href="#æ•°é‡å’Œåç§»" class="headerlink" title="æ•°é‡å’Œåç§»"></a>æ•°é‡å’Œåç§»</h4><p>Limitï¼ŒæŒ‡å®šä»æ•°æ®åº“æ£€ç´¢å‡ºçš„æœ€å¤§è®°å½•æ•°ã€‚Offsetï¼ŒæŒ‡å®šå¼€å§‹è¿”å›è®°å½•å‰è¦è·³è¿‡çš„è®°å½•æ•°ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Limit(<span class="number">3</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">// SELECT * FROM users LIMIT 3;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Cancel limit condition with -1</span></span><br><span class="line">db.Limit(<span class="number">10</span>).Find(&amp;users1).Limit(<span class="number">-1</span>).Find(&amp;users2)</span><br><span class="line"><span class="comment">// SELECT * FROM users LIMIT 10; (users1)</span></span><br><span class="line"><span class="comment">// SELECT * FROM users; (users2)</span></span><br><span class="line"></span><br><span class="line">db.Offset(<span class="number">3</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">// SELECT * FROM users OFFSET 3;</span></span><br><span class="line"></span><br><span class="line">db.Limit(<span class="number">10</span>).Offset(<span class="number">5</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">// SELECT * FROM users OFFSET 5 LIMIT 10;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Cancel offset condition with -1</span></span><br><span class="line">db.Offset(<span class="number">10</span>).Find(&amp;users1).Offset(<span class="number">-1</span>).Find(&amp;users2)</span><br><span class="line"><span class="comment">// SELECT * FROM users OFFSET 10; (users1)</span></span><br><span class="line"><span class="comment">// SELECT * FROM users; (users2)</span></span><br></pre></td></tr></table></figure>

<h4 id="æ€»æ•°"><a href="#æ€»æ•°" class="headerlink" title="æ€»æ•°"></a>æ€»æ•°</h4><p>Countï¼Œè¯¥ model èƒ½è·å–çš„è®°å½•æ€»æ•°ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).Or(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu 2&quot;</span>).Find(&amp;users).Count(&amp;count)</span><br><span class="line"><span class="comment">//// SELECT * from USERS WHERE name = &#x27;jinzhu&#x27; OR name = &#x27;jinzhu 2&#x27;; (users)</span></span><br><span class="line"><span class="comment">//// SELECT count(*) FROM users WHERE name = &#x27;jinzhu&#x27; OR name = &#x27;jinzhu 2&#x27;; (count)</span></span><br><span class="line"></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).Count(&amp;count)</span><br><span class="line"><span class="comment">//// SELECT count(*) FROM users WHERE name = &#x27;jinzhu&#x27;; (count)</span></span><br><span class="line"></span><br><span class="line">db.Table(<span class="string">&quot;deleted_users&quot;</span>).Count(&amp;count)</span><br><span class="line"><span class="comment">//// SELECT count(*) FROM deleted_users;</span></span><br><span class="line"></span><br><span class="line">db.Table(<span class="string">&quot;deleted_users&quot;</span>).Select(<span class="string">&quot;count(distinct(name))&quot;</span>).Count(&amp;count)</span><br><span class="line"><span class="comment">//// SELECT count( distinct(name) ) FROM deleted_users; (count)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong> <code>Count</code> å¿…é¡»æ˜¯é“¾å¼æŸ¥è¯¢çš„æœ€åä¸€ä¸ªæ“ä½œ ï¼Œå› ä¸ºå®ƒä¼šè¦†ç›–å‰é¢çš„ <code>SELECT</code>ï¼Œä½†å¦‚æœé‡Œé¢ä½¿ç”¨äº† <code>count</code> æ—¶ä¸ä¼šè¦†ç›–</p>
<h4 id="Group-Having"><a href="#Group-Having" class="headerlink" title="Group &amp; Having"></a>Group &amp; Having</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">rows, err := db.Table(<span class="string">&quot;orders&quot;</span>).Select(<span class="string">&quot;date(created_at) as date, sum(amount) as total&quot;</span>).Group(<span class="string">&quot;date(created_at)&quot;</span>).Rows()</span><br><span class="line"><span class="keyword">for</span> rows.Next() &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨Scanå°†å¤šæ¡ç»“æœæ‰«æè¿›äº‹å…ˆå‡†å¤‡å¥½çš„ç»“æ„ä½“åˆ‡ç‰‡ä¸­</span></span><br><span class="line"><span class="keyword">type</span> Result <span class="keyword">struct</span> &#123;</span><br><span class="line">	Date time.Time</span><br><span class="line">	Total <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> rets []Result</span><br><span class="line">db.Table(<span class="string">&quot;users&quot;</span>).Select(<span class="string">&quot;date(created_at) as date, sum(age) as total&quot;</span>).Group(<span class="string">&quot;date(created_at)&quot;</span>).Scan(&amp;rets)</span><br><span class="line"></span><br><span class="line">rows, err := db.Table(<span class="string">&quot;orders&quot;</span>).Select(<span class="string">&quot;date(created_at) as date, sum(amount) as total&quot;</span>).Group(<span class="string">&quot;date(created_at)&quot;</span>).Having(<span class="string">&quot;sum(amount) &gt; ?&quot;</span>, <span class="number">100</span>).Rows()</span><br><span class="line"><span class="keyword">for</span> rows.Next() &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Result <span class="keyword">struct</span> &#123;</span><br><span class="line">  Date  time.Time</span><br><span class="line">  Total <span class="type">int64</span></span><br><span class="line">&#125;</span><br><span class="line">db.Table(<span class="string">&quot;orders&quot;</span>).Select(<span class="string">&quot;date(created_at) as date, sum(amount) as total&quot;</span>).Group(<span class="string">&quot;date(created_at)&quot;</span>).Having(<span class="string">&quot;sum(amount) &gt; ?&quot;</span>, <span class="number">100</span>).Scan(&amp;results)</span><br></pre></td></tr></table></figure>

<h4 id="Distinct"><a href="#Distinct" class="headerlink" title="Distinct"></a>Distinct</h4><p>ä»æ¨¡å‹ä¸­é€‰æ‹©ä¸åŒçš„å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Distinct(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>).Order(<span class="string">&quot;name, age desc&quot;</span>).Find(&amp;results)</span><br></pre></td></tr></table></figure>

<p><code>Distinct</code> works with <a href="https://gorm.io/zh_CN/docs/advanced_query.html#pluck"><code>Pluck</code></a> and <a href="https://gorm.io/zh_CN/docs/advanced_query.html#count"><code>Count</code></a> too.</p>
<h4 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h4><p>Joinsï¼ŒæŒ‡å®šè¿æ¥æ¡ä»¶</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> result <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name  <span class="type">string</span></span><br><span class="line">  Email <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Select(<span class="string">&quot;users.name, emails.email&quot;</span>).Joins(<span class="string">&quot;left join emails on emails.user_id = users.id&quot;</span>).Scan(&amp;result&#123;&#125;)</span><br><span class="line"><span class="comment">// SELECT users.name, emails.email FROM `users` left join emails on emails.user_id = users.id</span></span><br><span class="line"></span><br><span class="line">rows, err := db.Table(<span class="string">&quot;users&quot;</span>).Select(<span class="string">&quot;users.name, emails.email&quot;</span>).Joins(<span class="string">&quot;left join emails on emails.user_id = users.id&quot;</span>).Rows()</span><br><span class="line"><span class="keyword">for</span> rows.Next() &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">db.Table(<span class="string">&quot;users&quot;</span>).Select(<span class="string">&quot;users.name, emails.email&quot;</span>).Joins(<span class="string">&quot;left join emails on emails.user_id = users.id&quot;</span>).Scan(&amp;results)</span><br><span class="line"></span><br><span class="line"><span class="comment">// multiple joins with parameter</span></span><br><span class="line">db.Joins(<span class="string">&quot;JOIN emails ON emails.user_id = users.id AND emails.email = ?&quot;</span>, <span class="string">&quot;jinzhu@example.org&quot;</span>).Joins(<span class="string">&quot;JOIN credit_cards ON credit_cards.user_id = users.id&quot;</span>).Where(<span class="string">&quot;credit_cards.number = ?&quot;</span>, <span class="string">&quot;411111111111&quot;</span>).Find(&amp;user)</span><br></pre></td></tr></table></figure>

<h4 id="Pluck"><a href="#Pluck" class="headerlink" title="Pluck"></a>Pluck</h4><p>Pluckï¼ŒæŸ¥è¯¢ model ä¸­çš„ä¸€ä¸ªåˆ—ä½œä¸ºåˆ‡ç‰‡ï¼Œå¦‚æœæ‚¨æƒ³è¦æŸ¥è¯¢å¤šä¸ªåˆ—ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨ <a href="https://www.liwenzhou.com/posts/Go/gorm-crud/#Scan"><code>Scan</code></a></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ages []<span class="type">int64</span></span><br><span class="line">db.Find(&amp;users).Pluck(<span class="string">&quot;age&quot;</span>, &amp;ages)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> names []<span class="type">string</span></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Pluck(<span class="string">&quot;name&quot;</span>, &amp;names)</span><br><span class="line"></span><br><span class="line">db.Table(<span class="string">&quot;deleted_users&quot;</span>).Pluck(<span class="string">&quot;name&quot;</span>, &amp;names)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æƒ³æŸ¥è¯¢å¤šä¸ªå­—æ®µï¼Ÿ è¿™æ ·åšï¼š</span></span><br><span class="line">db.Select(<span class="string">&quot;name, age&quot;</span>).Find(&amp;users)</span><br></pre></td></tr></table></figure>

<h4 id="æ‰«æ"><a href="#æ‰«æ" class="headerlink" title="æ‰«æ"></a>æ‰«æ</h4><p>Scanï¼Œæ‰«æç»“æœè‡³ä¸€ä¸ª struct.</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Result <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name <span class="type">string</span></span><br><span class="line">  Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result Result</span><br><span class="line">db.Table(<span class="string">&quot;users&quot;</span>).Select(<span class="string">&quot;name, age&quot;</span>).Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;Antonio&quot;</span>).Scan(&amp;result)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> results []Result</span><br><span class="line">db.Table(<span class="string">&quot;users&quot;</span>).Select(<span class="string">&quot;name, age&quot;</span>).Where(<span class="string">&quot;id &gt; ?&quot;</span>, <span class="number">0</span>).Scan(&amp;results)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸç”Ÿ SQL</span></span><br><span class="line">db.Raw(<span class="string">&quot;SELECT name, age FROM users WHERE name = ?&quot;</span>, <span class="string">&quot;Antonio&quot;</span>).Scan(&amp;result)</span><br></pre></td></tr></table></figure>

<h4 id="Count"><a href="#Count" class="headerlink" title="Count"></a>Count</h4><p>Count ç”¨äºè·å–åŒ¹é…çš„è®°å½•æ•°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> count <span class="type">int64</span></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).Or(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu 2&quot;</span>).Count(&amp;count)</span><br><span class="line"><span class="comment">// SELECT count(1) FROM users WHERE name = &#x27;jinzhu&#x27; OR name = &#x27;jinzhu 2&#x27;</span></span><br><span class="line"></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).Count(&amp;count)</span><br><span class="line"><span class="comment">// SELECT count(1) FROM users WHERE name = &#x27;jinzhu&#x27;; (count)</span></span><br><span class="line"></span><br><span class="line">db.Table(<span class="string">&quot;deleted_users&quot;</span>).Count(&amp;count)</span><br><span class="line"><span class="comment">// SELECT count(1) FROM deleted_users;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Count with Distinct</span></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Distinct(<span class="string">&quot;name&quot;</span>).Count(&amp;count)</span><br><span class="line"><span class="comment">// SELECT COUNT(DISTINCT(`name`)) FROM `users`</span></span><br><span class="line"></span><br><span class="line">db.Table(<span class="string">&quot;deleted_users&quot;</span>).Select(<span class="string">&quot;count(distinct(name))&quot;</span>).Count(&amp;count)</span><br><span class="line"><span class="comment">// SELECT count(distinct(name)) FROM deleted_users</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Count with Group</span></span><br><span class="line">users := []User&#123;</span><br><span class="line">  &#123;Name: <span class="string">&quot;name1&quot;</span>&#125;,</span><br><span class="line">  &#123;Name: <span class="string">&quot;name2&quot;</span>&#125;,</span><br><span class="line">  &#123;Name: <span class="string">&quot;name3&quot;</span>&#125;,</span><br><span class="line">  &#123;Name: <span class="string">&quot;name3&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Group(<span class="string">&quot;name&quot;</span>).Count(&amp;count)</span><br><span class="line">count <span class="comment">// =&gt; 3</span></span><br></pre></td></tr></table></figure>

<h3 id="é“¾å¼æ“ä½œç›¸å…³"><a href="#é“¾å¼æ“ä½œç›¸å…³" class="headerlink" title="é“¾å¼æ“ä½œç›¸å…³"></a>é“¾å¼æ“ä½œç›¸å…³</h3><h4 id="é“¾å¼æ“ä½œ"><a href="#é“¾å¼æ“ä½œ" class="headerlink" title="é“¾å¼æ“ä½œ"></a>é“¾å¼æ“ä½œ</h4><p>Method Chainingï¼ŒGorm å®ç°äº†é“¾å¼æ“ä½œæ¥å£ï¼Œæ‰€ä»¥ä½ å¯ä»¥æŠŠä»£ç å†™æˆè¿™æ ·ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢</span></span><br><span class="line">tx := db.Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ›´å¤šæ¡ä»¶</span></span><br><span class="line"><span class="keyword">if</span> someCondition &#123;</span><br><span class="line">  tx = tx.Where(<span class="string">&quot;age = ?&quot;</span>, <span class="number">20</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  tx = tx.Where(<span class="string">&quot;age = ?&quot;</span>, <span class="number">30</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> yetAnotherCondition &#123;</span><br><span class="line">  tx = tx.Where(<span class="string">&quot;active = ?&quot;</span>, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è°ƒç”¨ç«‹å³æ‰§è¡Œæ–¹æ³•å‰ä¸ä¼šç”Ÿæˆ<code>Query</code>è¯­å¥ï¼Œå€ŸåŠ©è¿™ä¸ªç‰¹æ€§ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥å¤„ç†ä¸€äº›é€šç”¨é€»è¾‘ã€‚</p>
<h4 id="ç«‹å³æ‰§è¡Œæ–¹æ³•"><a href="#ç«‹å³æ‰§è¡Œæ–¹æ³•" class="headerlink" title="ç«‹å³æ‰§è¡Œæ–¹æ³•"></a>ç«‹å³æ‰§è¡Œæ–¹æ³•</h4><p>Immediate methods ï¼Œç«‹å³æ‰§è¡Œæ–¹æ³•æ˜¯æŒ‡é‚£äº›ä¼šç«‹å³ç”Ÿæˆ<code>SQL</code>è¯­å¥å¹¶å‘é€åˆ°æ•°æ®åº“çš„æ–¹æ³•, ä»–ä»¬ä¸€èˆ¬æ˜¯<code>CRUD</code>æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p>
<p><code>Create</code>, <code>First</code>, <code>Find</code>, <code>Take</code>, <code>Save</code>, <code>UpdateXXX</code>, <code>Delete</code>, <code>Scan</code>, <code>Row</code>, <code>Rows</code>â€¦</p>
<p>è¿™æœ‰ä¸€ä¸ªåŸºäºä¸Šé¢é“¾å¼æ–¹æ³•ä»£ç çš„ç«‹å³æ‰§è¡Œæ–¹æ³•çš„ä¾‹å­ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">tx.Find(&amp;user)</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆçš„SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;jinzhu&#x27;</span> <span class="keyword">AND</span> age <span class="operator">=</span> <span class="number">30</span> <span class="keyword">AND</span> active <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h4 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a>èŒƒå›´</h4><p><code>Scopes</code>ï¼ŒScopeæ˜¯å»ºç«‹åœ¨é“¾å¼æ“ä½œçš„åŸºç¡€ä¹‹ä¸Šçš„ã€‚</p>
<p>åŸºäºå®ƒï¼Œä½ å¯ä»¥æŠ½å–ä¸€äº›é€šç”¨é€»è¾‘ï¼Œå†™å‡ºæ›´å¤šå¯é‡ç”¨çš„å‡½æ•°åº“ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AmountGreaterThan1000</span><span class="params">(db *gorm.DB)</span></span> *gorm.DB &#123;</span><br><span class="line">  <span class="keyword">return</span> db.Where(<span class="string">&quot;amount &gt; ?&quot;</span>, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PaidWithCreditCard</span><span class="params">(db *gorm.DB)</span></span> *gorm.DB &#123;</span><br><span class="line">  <span class="keyword">return</span> db.Where(<span class="string">&quot;pay_mode_sign = ?&quot;</span>, <span class="string">&quot;C&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PaidWithCod</span><span class="params">(db *gorm.DB)</span></span> *gorm.DB &#123;</span><br><span class="line">  <span class="keyword">return</span> db.Where(<span class="string">&quot;pay_mode_sign = ?&quot;</span>, <span class="string">&quot;C&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">OrderStatus</span><span class="params">(status []<span class="type">string</span>)</span></span> <span class="function"><span class="keyword">func</span> <span class="params">(db *gorm.DB)</span></span> *gorm.DB &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">func</span> <span class="params">(db *gorm.DB)</span></span> *gorm.DB &#123;</span><br><span class="line">    <span class="keyword">return</span> db.Scopes(AmountGreaterThan1000).Where(<span class="string">&quot;status IN (?)&quot;</span>, status)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">db.Scopes(AmountGreaterThan1000, PaidWithCreditCard).Find(&amp;orders)</span><br><span class="line"><span class="comment">// æŸ¥æ‰¾æ‰€æœ‰é‡‘é¢å¤§äº 1000 çš„ä¿¡ç”¨å¡è®¢å•</span></span><br><span class="line"></span><br><span class="line">db.Scopes(AmountGreaterThan1000, PaidWithCod).Find(&amp;orders)</span><br><span class="line"><span class="comment">// æŸ¥æ‰¾æ‰€æœ‰é‡‘é¢å¤§äº 1000 çš„ COD è®¢å•</span></span><br><span class="line"></span><br><span class="line">db.Scopes(AmountGreaterThan1000, OrderStatus([]<span class="type">string</span>&#123;<span class="string">&quot;paid&quot;</span>, <span class="string">&quot;shipped&quot;</span>&#125;)).Find(&amp;orders)</span><br><span class="line"><span class="comment">// æŸ¥æ‰¾æ‰€æœ‰é‡‘é¢å¤§äº 1000 ä¸”å·²ä»˜æ¬¾æˆ–è€…å·²å‘è´§çš„è®¢å•</span></span><br></pre></td></tr></table></figure>

<h4 id="å¤šä¸ªç«‹å³æ‰§è¡Œæ–¹æ³•"><a href="#å¤šä¸ªç«‹å³æ‰§è¡Œæ–¹æ³•" class="headerlink" title="å¤šä¸ªç«‹å³æ‰§è¡Œæ–¹æ³•"></a>å¤šä¸ªç«‹å³æ‰§è¡Œæ–¹æ³•</h4><p>Multiple Immediate Methodsï¼Œåœ¨ GORM ä¸­ä½¿ç”¨å¤šä¸ªç«‹å³æ‰§è¡Œæ–¹æ³•æ—¶ï¼Œåä¸€ä¸ªç«‹å³æ‰§è¡Œæ–¹æ³•ä¼šå¤ç”¨å‰ä¸€ä¸ª<strong>ç«‹å³æ‰§è¡Œæ–¹æ³•</strong>çš„æ¡ä»¶ (ä¸åŒ…æ‹¬å†…è”æ¡ä»¶) ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Where(<span class="string">&quot;name LIKE ?&quot;</span>, <span class="string">&quot;jinzhu%&quot;</span>).Find(&amp;users, <span class="string">&quot;id IN (?)&quot;</span>, []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;).Count(&amp;count)</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆçš„ Sql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;jinzhu%&#x27;</span> <span class="keyword">AND</span> id <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;jinzhu%&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h2><h3 id="ä¿å­˜æ‰€æœ‰å­—æ®µ"><a href="#ä¿å­˜æ‰€æœ‰å­—æ®µ" class="headerlink" title="ä¿å­˜æ‰€æœ‰å­—æ®µ"></a>ä¿å­˜æ‰€æœ‰å­—æ®µ</h3><p><code>Save()</code>é»˜è®¤ä¼šæ›´æ–°è¯¥å¯¹è±¡çš„æ‰€æœ‰å­—æ®µï¼Œå³ä½¿ä½ æ²¡æœ‰èµ‹å€¼ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.First(&amp;user)</span><br><span class="line"></span><br><span class="line">user.Name = <span class="string">&quot;jinzhu 2&quot;</span></span><br><span class="line">user.Age = <span class="number">100</span></span><br><span class="line">db.Save(&amp;user)</span><br><span class="line"></span><br><span class="line"><span class="comment">// UPDATE users SET name=&#x27;jinzhu 2&#x27;, age=100, birthday=&#x27;2016-01-01&#x27;, updated_at = &#x27;2013-11-17 21:34:10&#x27; WHERE id=111;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ›´æ–°å•ä¸ªåˆ—"><a href="#æ›´æ–°å•ä¸ªåˆ—" class="headerlink" title="æ›´æ–°å•ä¸ªåˆ—"></a>æ›´æ–°å•ä¸ªåˆ—</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Update with conditions</span></span><br><span class="line">db.Model(&amp;User&#123;&#125;).Where(<span class="string">&quot;active = ?&quot;</span>, <span class="literal">true</span>).Update(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="comment">// UPDATE users SET name=&#x27;hello&#x27;, updated_at=&#x27;2013-11-17 21:34:10&#x27; WHERE active=true;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// User&#x27;s ID is `111`:</span></span><br><span class="line">db.Model(&amp;user).Update(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="comment">// UPDATE users SET name=&#x27;hello&#x27;, updated_at=&#x27;2013-11-17 21:34:10&#x27; WHERE id=111;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Update with conditions and model value</span></span><br><span class="line">db.Model(&amp;user).Where(<span class="string">&quot;active = ?&quot;</span>, <span class="literal">true</span>).Update(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="comment">// UPDATE users SET name=&#x27;hello&#x27;, updated_at=&#x27;2013-11-17 21:34:10&#x27; WHERE id=111 AND active=true;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ›´æ–°å¤šåˆ—"><a href="#æ›´æ–°å¤šåˆ—" class="headerlink" title="æ›´æ–°å¤šåˆ—"></a>æ›´æ–°å¤šåˆ—</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Update attributes with `struct`, will only update non-zero fields</span></span><br><span class="line">db.Model(&amp;user).Updates(User&#123;Name: <span class="string">&quot;hello&quot;</span>, Age: <span class="number">18</span>, Active: <span class="literal">false</span>&#125;)</span><br><span class="line"><span class="comment">// UPDATE users SET name=&#x27;hello&#x27;, age=18, updated_at = &#x27;2013-11-17 21:34:10&#x27; WHERE id = 111;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Update attributes with `map`</span></span><br><span class="line">db.Model(&amp;user).Updates(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>, <span class="string">&quot;active&quot;</span>: <span class="literal">false</span>&#125;)</span><br><span class="line"><span class="comment">// UPDATE users SET name=&#x27;hello&#x27;, age=18, active=false, updated_at=&#x27;2013-11-17 21:34:10&#x27; WHERE id=111;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„: å½“ä½¿ç”¨ struct æ›´æ–°æ—¶ï¼ŒGORM å°†åªæ›´æ–°éé›¶å­—æ®µã€‚æ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨<code> map</code> æ›´æ–°å±æ€§æˆ–ä½¿ç”¨ <code>Select </code>æŒ‡å®šè¦æ›´æ–°çš„å­—æ®µ</p>
</blockquote>
<h3 id="æ— Hooksæ›´æ–°"><a href="#æ— Hooksæ›´æ–°" class="headerlink" title="æ— Hooksæ›´æ–°"></a>æ— Hooksæ›´æ–°</h3><p>ä¸Šé¢çš„æ›´æ–°æ“ä½œä¼šè‡ªåŠ¨è¿è¡Œ model çš„ <code>BeforeUpdate</code>, <code>AfterUpdate</code> æ–¹æ³•ï¼Œæ›´æ–° <code>UpdatedAt</code> æ—¶é—´æˆ³, åœ¨æ›´æ–°æ—¶ä¿å­˜å…¶ <code>Associations</code>, å¦‚æœä½ ä¸æƒ³è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>UpdateColumn</code>ï¼Œ <code>UpdateColumns</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°å•ä¸ªå±æ€§ï¼Œç±»ä¼¼äº `Update`</span></span><br><span class="line">db.Model(&amp;user).UpdateColumn(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="comment">//// UPDATE users SET name=&#x27;hello&#x27; WHERE id = 111;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å¤šä¸ªå±æ€§ï¼Œç±»ä¼¼äº `Updates`</span></span><br><span class="line">db.Model(&amp;user).UpdateColumns(User&#123;Name: <span class="string">&quot;hello&quot;</span>, Age: <span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">//// UPDATE users SET name=&#x27;hello&#x27;, age=18 WHERE id = 111;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ‰¹é‡æ›´æ–°"><a href="#æ‰¹é‡æ›´æ–°" class="headerlink" title="æ‰¹é‡æ›´æ–°"></a>æ‰¹é‡æ›´æ–°</h3><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ Model æŒ‡å®šä¸»é”®å€¼çš„è®°å½•ï¼ŒGORM å°†æ‰§è¡Œæ‰¹é‡æ›´æ–°ï¼Œæ‰¹é‡æ›´æ–°æ—¶<code>Hooksï¼ˆé’©å­å‡½æ•°ï¼‰</code>ä¸ä¼šè¿è¡Œã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Update with struct</span></span><br><span class="line">db.Model(User&#123;&#125;).Where(<span class="string">&quot;role = ?&quot;</span>, <span class="string">&quot;admin&quot;</span>).Updates(User&#123;Name: <span class="string">&quot;hello&quot;</span>, Age: <span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// UPDATE users SET name=&#x27;hello&#x27;, age=18 WHERE role = &#x27;admin&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Update with map</span></span><br><span class="line">db.Table(<span class="string">&quot;users&quot;</span>).Where(<span class="string">&quot;id IN ?&quot;</span>, []<span class="type">int</span>&#123;<span class="number">10</span>, <span class="number">11</span>&#125;).Updates(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// UPDATE users SET name=&#x27;hello&#x27;, age=18 WHERE id IN (10, 11);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ `RowsAffected` è·å–æ›´æ–°è®°å½•æ€»æ•°</span></span><br><span class="line">db.Model(User&#123;&#125;).Updates(User&#123;Name: <span class="string">&quot;hello&quot;</span>, Age: <span class="number">18</span>&#125;).RowsAffected</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨SQLè¡¨è¾¾å¼æ›´æ–°"><a href="#ä½¿ç”¨SQLè¡¨è¾¾å¼æ›´æ–°" class="headerlink" title="ä½¿ç”¨SQLè¡¨è¾¾å¼æ›´æ–°"></a>ä½¿ç”¨SQLè¡¨è¾¾å¼æ›´æ–°</h3><p>å…ˆæŸ¥è¯¢è¡¨ä¸­çš„ç¬¬ä¸€æ¡æ•°æ®ä¿å­˜è‡³userå˜é‡ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> user User</span><br><span class="line">db.First(&amp;user)</span><br><span class="line">db.Model(&amp;user).Update(<span class="string">&quot;age&quot;</span>, gorm.Expr(<span class="string">&quot;age * ? + ?&quot;</span>, <span class="number">2</span>, <span class="number">100</span>))</span><br><span class="line"><span class="comment">//// UPDATE `users` SET `age` = age * 2 + 100, `updated_at` = &#x27;2020-02-16 13:10:20&#x27;  WHERE `users`.`id` = 1;</span></span><br><span class="line"></span><br><span class="line">db.Model(&amp;user).Updates(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;age&quot;</span>: gorm.Expr(<span class="string">&quot;age * ? + ?&quot;</span>, <span class="number">2</span>, <span class="number">100</span>)&#125;)</span><br><span class="line"><span class="comment">//// UPDATE &quot;users&quot; SET &quot;age&quot; = age * &#x27;2&#x27; + &#x27;100&#x27;, &quot;updated_at&quot; = &#x27;2020-02-16 13:05:51&#x27; WHERE `users`.`id` = 1;</span></span><br><span class="line"></span><br><span class="line">db.Model(&amp;user).UpdateColumn(<span class="string">&quot;age&quot;</span>, gorm.Expr(<span class="string">&quot;age - ?&quot;</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment">//// UPDATE &quot;users&quot; SET &quot;age&quot; = age - 1 WHERE &quot;id&quot; = &#x27;1&#x27;;</span></span><br><span class="line"></span><br><span class="line">db.Model(&amp;user).Where(<span class="string">&quot;age &gt; 10&quot;</span>).UpdateColumn(<span class="string">&quot;age&quot;</span>, gorm.Expr(<span class="string">&quot;age - ?&quot;</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment">//// UPDATE &quot;users&quot; SET &quot;age&quot; = age - 1 WHERE &quot;id&quot; = &#x27;1&#x27; AND quantity &gt; 10;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹Hooksä¸­çš„å€¼"><a href="#ä¿®æ”¹Hooksä¸­çš„å€¼" class="headerlink" title="ä¿®æ”¹Hooksä¸­çš„å€¼"></a>ä¿®æ”¹Hooksä¸­çš„å€¼</h3><p>å¦‚æœä½ æƒ³ä¿®æ”¹ <code>BeforeUpdate</code>, <code>BeforeSave</code> ç­‰ Hooks ä¸­æ›´æ–°çš„å€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>scope.SetColumn</code>, ä¾‹å¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(user *User)</span></span> BeforeSave(scope *gorm.Scope) (err <span class="type">error</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> pw, err := bcrypt.GenerateFromPassword(user.Password, <span class="number">0</span>); err == <span class="literal">nil</span> &#123;</span><br><span class="line">    scope.SetColumn(<span class="string">&quot;EncryptedPassword&quot;</span>, pw)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å…¶å®ƒæ›´æ–°é€‰é¡¹"><a href="#å…¶å®ƒæ›´æ–°é€‰é¡¹" class="headerlink" title="å…¶å®ƒæ›´æ–°é€‰é¡¹"></a>å…¶å®ƒæ›´æ–°é€‰é¡¹</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸º update SQL æ·»åŠ å…¶å®ƒçš„ SQL</span></span><br><span class="line">db.Model(&amp;user).Set(<span class="string">&quot;gorm:update_option&quot;</span>, <span class="string">&quot;OPTION (OPTIMIZE FOR UNKNOWN)&quot;</span>).Update(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="comment">//// UPDATE users SET name=&#x27;hello&#x27;, updated_at = &#x27;2013-11-17 21:34:10&#x27; WHERE id=111 OPTION (OPTIMIZE FOR UNKNOWN);</span></span><br></pre></td></tr></table></figure>

<h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><h3 id="åˆ é™¤è®°å½•"><a href="#åˆ é™¤è®°å½•" class="headerlink" title="åˆ é™¤è®°å½•"></a>åˆ é™¤è®°å½•</h3><p><strong>è­¦å‘Š</strong> åˆ é™¤è®°å½•æ—¶ï¼Œè¯·ç¡®ä¿ä¸»é”®å­—æ®µæœ‰å€¼ï¼ŒGORM ä¼šé€šè¿‡ä¸»é”®å»åˆ é™¤è®°å½•ï¼Œå¦‚æœä¸»é”®ä¸ºç©ºï¼ŒGORM ä¼šåˆ é™¤è¯¥ model çš„æ‰€æœ‰è®°å½•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤ç°æœ‰è®°å½•</span></span><br><span class="line">db.Delete(&amp;email)</span><br><span class="line"><span class="comment">//// DELETE from emails where id=10;</span></span><br><span class="line"></span><br><span class="line">db.Delete(&amp;User&#123;&#125;, <span class="number">10</span>)</span><br><span class="line"><span class="comment">// DELETE FROM users WHERE id = 10;</span></span><br><span class="line"></span><br><span class="line">db.Delete(&amp;User&#123;&#125;, <span class="string">&quot;10&quot;</span>)</span><br><span class="line"><span class="comment">// DELETE FROM users WHERE id = 10;</span></span><br><span class="line"></span><br><span class="line">db.Delete(&amp;users, []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;)</span><br><span class="line"><span class="comment">// DELETE FROM users WHERE id IN (1,2,3);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦é¢å¤–æ¡ä»¶çš„åˆ é™¤</span></span><br><span class="line">db.Where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;jinzhu&quot;</span>).Delete(&amp;email)</span><br><span class="line"><span class="comment">// DELETE from emails where id = 10 AND name = &quot;jinzhu&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºåˆ é™¤ SQL æ·»åŠ é¢å¤–çš„ SQL æ“ä½œ</span></span><br><span class="line">db.Set(<span class="string">&quot;gorm:delete_option&quot;</span>, <span class="string">&quot;OPTION (OPTIMIZE FOR UNKNOWN)&quot;</span>).Delete(&amp;email)</span><br><span class="line"><span class="comment">//// DELETE from emails where id=10 OPTION (OPTIMIZE FOR UNKNOWN);</span></span><br></pre></td></tr></table></figure>

<h3 id="æ‰¹é‡åˆ é™¤"><a href="#æ‰¹é‡åˆ é™¤" class="headerlink" title="æ‰¹é‡åˆ é™¤"></a>æ‰¹é‡åˆ é™¤</h3><p>å¦‚æœæŒ‡å®šçš„å€¼ä¸åŒ…æ‹¬ä¸»å±æ€§ï¼Œé‚£ä¹ˆ GORM ä¼šæ‰§è¡Œæ‰¹é‡åˆ é™¤ï¼Œå®ƒå°†åˆ é™¤æ‰€æœ‰åŒ¹é…çš„è®°å½•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Where(<span class="string">&quot;email LIKE ?&quot;</span>, <span class="string">&quot;%jinzhu%&quot;</span>).Delete(Email&#123;&#125;)</span><br><span class="line"><span class="comment">//// DELETE from emails where email LIKE &quot;%jinzhu%&quot;;</span></span><br><span class="line"></span><br><span class="line">db.Delete(Email&#123;&#125;, <span class="string">&quot;email LIKE ?&quot;</span>, <span class="string">&quot;%jinzhu%&quot;</span>)</span><br><span class="line"><span class="comment">//// DELETE from emails where email LIKE &quot;%jinzhu%&quot;;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥å°†ä¸€ä¸ªä¸»é”®åˆ‡ç‰‡ä¼ é€’ç»™<code>Delete</code> æ–¹æ³•ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆçš„åˆ é™¤æ•°æ®é‡å¤§çš„è®°å½•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> users = []User&#123;&#123;ID: <span class="number">1</span>&#125;, &#123;ID: <span class="number">2</span>&#125;, &#123;ID: <span class="number">3</span>&#125;&#125;</span><br><span class="line">db.Delete(&amp;users)</span><br><span class="line"><span class="comment">// DELETE FROM users WHERE id IN (1,2,3);</span></span><br><span class="line"></span><br><span class="line">db.Delete(&amp;users, <span class="string">&quot;name LIKE ?&quot;</span>, <span class="string">&quot;%jinzhu%&quot;</span>)</span><br><span class="line"><span class="comment">// DELETE FROM users WHERE name LIKE &quot;%jinzhu%&quot; AND id IN (1,2,3); </span></span><br></pre></td></tr></table></figure>

<h3 id="è½¯åˆ é™¤"><a href="#è½¯åˆ é™¤" class="headerlink" title="è½¯åˆ é™¤"></a>è½¯åˆ é™¤</h3><p>å¦‚æœä¸€ä¸ª model æœ‰ <code>DeletedAt</code> å­—æ®µï¼Œä»–å°†è‡ªåŠ¨è·å¾—è½¯åˆ é™¤çš„åŠŸèƒ½ï¼ å½“è°ƒç”¨ <code>Delete</code> æ–¹æ³•æ—¶ï¼Œ è®°å½•ä¸ä¼šçœŸæ­£çš„ä»æ•°æ®åº“ä¸­è¢«åˆ é™¤ï¼Œ åªä¼šå°†<code>DeletedAt</code> å­—æ®µçš„å€¼ä¼šè¢«è®¾ç½®ä¸ºå½“å‰æ—¶é—´</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">db.Delete(&amp;user)</span><br><span class="line"><span class="comment">//// UPDATE users SET deleted_at=&quot;2013-10-29 10:23&quot; WHERE id = 111;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¹é‡åˆ é™¤</span></span><br><span class="line">db.Where(<span class="string">&quot;age = ?&quot;</span>, <span class="number">20</span>).Delete(&amp;User&#123;&#125;)</span><br><span class="line"><span class="comment">//// UPDATE users SET deleted_at=&quot;2013-10-29 10:23&quot; WHERE age = 20;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢è®°å½•æ—¶ä¼šå¿½ç•¥è¢«è½¯åˆ é™¤çš„è®°å½•</span></span><br><span class="line">db.Where(<span class="string">&quot;age = 20&quot;</span>).Find(&amp;user)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE age = 20 AND deleted_at IS NULL;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Unscoped æ–¹æ³•å¯ä»¥æŸ¥è¯¢è¢«è½¯åˆ é™¤çš„è®°å½•</span></span><br><span class="line">db.Unscoped().Where(<span class="string">&quot;age = 20&quot;</span>).Find(&amp;users)</span><br><span class="line"><span class="comment">//// SELECT * FROM users WHERE age = 20;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ å¹¶ä¸æƒ³åµŒå¥—<code>gorm.Model</code>ï¼Œä½ ä¹Ÿå¯ä»¥åƒä¸‹æ–¹ä¾‹å­é‚£æ ·å¼€å¯è½¯åˆ é™¤ç‰¹æ€§ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID      <span class="type">int</span></span><br><span class="line">  Deleted gorm.DeletedAt</span><br><span class="line">  Name    <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ°¸ä¹…åˆ é™¤"><a href="#æ°¸ä¹…åˆ é™¤" class="headerlink" title="æ°¸ä¹…åˆ é™¤"></a>æ°¸ä¹…åˆ é™¤</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Unscoped æ–¹æ³•å¯ä»¥ç‰©ç†åˆ é™¤è®°å½•</span></span><br><span class="line">db.Unscoped().Delete(&amp;order)</span><br><span class="line"><span class="comment">//// DELETE FROM orders WHERE id=10;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Go</tag>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»ŸæœŸæœ«å¤ä¹ ä¹‹å­˜å‚¨å™¨ç®¡ç†</title>
    <url>/2023/06/14/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1/</url>
    <content><![CDATA[<h1 id="å­˜å‚¨å™¨ç®¡ç†"><a href="#å­˜å‚¨å™¨ç®¡ç†" class="headerlink" title="å­˜å‚¨å™¨ç®¡ç†"></a>å­˜å‚¨å™¨ç®¡ç†</h1><p>æ“ä½œç³»ç»Ÿçš„èŒèƒ½ä¹‹ä¸€ï¼Œä¸»è¦ä»»åŠ¡æ˜¯ä¸º<a href="https://baike.baidu.com/item/%E5%A4%9A%E9%81%93%E7%A8%8B%E5%BA%8F?fromModule=lemma_inlink">å¤šé“ç¨‹åº</a>çš„è¿è¡Œæä¾›è‰¯å¥½çš„ç¯å¢ƒï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨å­˜å‚¨å™¨ï¼Œæé«˜å­˜å‚¨å™¨çš„åˆ©ç”¨ç‡ä»¥åŠèƒ½ä»é€»è¾‘ä¸Š<a href="https://baike.baidu.com/item/%E6%89%A9%E5%85%85%E5%86%85%E5%AD%98?fromModule=lemma_inlink">æ‰©å……å†…å­˜</a>ã€‚ä¸»è¦ç›®çš„å’ŒåŠŸèƒ½ï¼š</p>
<p>1ã€ä¸»å­˜å‚¨å™¨çš„åˆ†é…å’Œç®¡ç†</p>
<p>2ã€æé«˜ä¸»å­˜å‚¨å™¨çš„åˆ©ç”¨ç‡</p>
<p>3ã€â€œæ‰©å……â€ä¸»å­˜å®¹é‡</p>
<p>4ã€å­˜å‚¨ä¿æŠ¤</p>
<h2 id="å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„"><a href="#å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„" class="headerlink" title="å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„"></a>å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„</h2><p><strong>ä¸»å­˜å‚¨å™¨</strong></p>
<p>ã€€ç”¨äºä¿å­˜è¿›ç¨‹è¿è¡Œæ—¶çš„ç¨‹åºå’Œæ•°æ®ã€‚CPUçš„ æ§åˆ¶éƒ¨ä»¶åªèƒ½ä»ä¸»å­˜ä¸­å–å¾—æŒ‡ä»¤å’Œæ•°æ®åˆ°CPUå¯„ å­˜å™¨ï¼ŒåŒæ ·ï¼ŒCPUå¯„å­˜å™¨ä¸­çš„æ•°æ®å¯å­˜å…¥ä¸»å­˜ã€‚ CPUä¸å¤–è®¾äº¤æ¢æ•°æ®å¿…é¡»ä¾æ‰˜äºä¸»å­˜ã€‚</p>
<p><strong>å¯„å­˜å™¨</strong></p>
<p>ã€€å¯„å­˜å™¨è®¿é—®é€Ÿåº¦æœ€å¿«ï¼Œèƒ½ä¸CPUåè°ƒå·¥ä½œï¼Œä»·æ ¼æ˜‚è´µï¼Œå®¹é‡ä¸å¤§ï¼Œå¯„å­˜å™¨ç”¨äºåŠ é€Ÿå­˜å‚¨å™¨çš„è®¿é—®é€Ÿåº¦ï¼Œå¦‚ç”¨å¯„å­˜å™¨å­˜æ”¾æ“ä½œæ•°ï¼Œæˆ–ç”¨ä½œåœ°å€å¯„å­˜å™¨åŠ å¿«åœ°å€è½¬æ¢é€Ÿåº¦ç­‰ã€‚</p>
<p><strong>é«˜é€Ÿç¼“å­˜</strong></p>
<p>â€‹	CPUå¯¹é«˜é€Ÿç¼“å­˜çš„è®¿é—®ï¼Œå…¶é€Ÿåº¦æ¯”è®¿é—®ä¸»å­˜å¿«ï¼Œæ¯”è®¿é—®å¯„å­˜å™¨æ…¢ã€‚ æ ¹æ®ç¨‹åºæ‰§è¡Œçš„å±€éƒ¨æ€§åŸç†ï¼Œå°†ä¸»å­˜ä¸­ä¸€äº›ç»å¸¸è®¿é—®çš„æ•°æ®å­˜æ”¾åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼Œå‡å°‘è®¿é—®ä¸»å­˜çš„æ¬¡æ•°ï¼Œæé«˜ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦ã€‚ æœ‰äº›è®¡ç®—æœºç³»ç»Ÿè®¾ç½®äº†ä¸¤çº§é«˜é€Ÿç¼“å­˜ï¼Œå³ï¼Œä¸€çº§é«˜é€Ÿç¼“å­˜ä¸äºŒçº§é«˜é€Ÿç¼“å­˜ã€‚cpuè®¿é—®ä¸€çº§é«˜é€Ÿç¼“å­˜æœ€å¿«ã€‚ï¼ˆi9 12900Kï¼Œä¸‰çº§ç¼“å­˜ï¼š30MBï¼‰</p>
<p><strong>ç£ç›˜ç¼“å­˜</strong></p>
<p>ã€€å†…å­˜ä¸­ä¸€å—å­˜å‚¨åŒºï¼Œå¯¹åº”äºæŸå›ºå®šç£ç›˜ï¼Œä¸´æ—¶å­˜å‚¨ç£ç›˜æ•°æ®ï¼ˆå¦‚ï¼Œæ•°æ®é¢„å–ï¼‰ã€‚ç£ç›˜çš„IOé€Ÿåº¦è¿œä½äºå¯¹ä¸»å­˜çš„è®¿é—®é€Ÿåº¦ï¼Œå› æ­¤å°†é¢‘ç¹ä½¿ç”¨çš„ä¸€éƒ¨åˆ†ç£ç›˜æ•°æ®å’Œä¿¡æ¯æš‚æ—¶å­˜æ”¾åœ¨ç£ç›˜ç¼“å­˜ä¸­ï¼Œå¯å‡å°‘è®¿é—®ç£ç›˜çš„æ¬¡æ•°ï¼Œç£ç›˜ç¼“å­˜æœ¬èº«å¹¶ä¸æ˜¯ä¸€ç§å®é™…å­˜åœ¨çš„å­˜å‚¨ä»‹è´¨ï¼Œå®ƒä¾æ‰˜äºå›ºå®šç£ç›˜ï¼Œæä¾›å¯¹ä¸»å­˜å‚¨å™¨ç©ºé—´çš„æ‰©å……ï¼Œå³<strong>åˆ©ç”¨ä¸»å­˜ä¸­çš„å­˜å‚¨ç©ºé—´ï¼Œæ¥æš‚å­˜ä»ç£ç›˜ä¸­è¯»å‡ºæˆ–å†™å…¥çš„ä¿¡æ¯</strong>ï¼Œä¸»å­˜å¯ä»¥çœ‹åšæ˜¯è¾…å­˜çš„é«˜é€Ÿç¼“å­˜ï¼Œå› ä¸ºï¼Œè¾…å­˜ä¸­çš„æ•°æ®å¿…é¡»å¤åˆ¶åˆ°ä¸»å­˜æ–¹èƒ½ä½¿ç”¨ï¼Œåä¹‹ï¼Œæ•°æ®ä¹Ÿå¿…é¡»å…ˆå­˜åœ¨ä¸»å­˜ä¸­ï¼Œæ‰èƒ½è¾“å‡ºåˆ°è¾…å­˜ã€‚</p>
<blockquote>
<p>é€Ÿåº¦ï¼šå¯„å­˜å™¨&gt;é«˜é€Ÿç¼“å­˜&gt;ä¸»å­˜&gt;ç£ç›˜ç¼“å­˜<br>å®¹é‡ï¼šå¯„å­˜å™¨&lt;é«˜é€Ÿç¼“å­˜&lt;ä¸»å­˜&lt;ç£ç›˜ç¼“å­˜<br>ä»·æ ¼ï¼šå¯„å­˜å™¨&gt;é«˜é€Ÿç¼“å­˜&gt;ä¸»å­˜&gt;ç£ç›˜ç¼“å­˜</p>
</blockquote>
<h3 id="å­˜å‚¨åˆ†é…çš„ä¸‰ç§æ–¹å¼"><a href="#å­˜å‚¨åˆ†é…çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="å­˜å‚¨åˆ†é…çš„ä¸‰ç§æ–¹å¼"></a>å­˜å‚¨åˆ†é…çš„ä¸‰ç§æ–¹å¼</h3><p>1.<strong>ç›´æ¥æŒ‡å®šæ–¹å¼</strong>ï¼šç¨‹åºå‘˜åœ¨ç¼–ç¨‹åºæ—¶ï¼Œæˆ–ç¼–è¯‘ç¨‹åº(æ±‡ç¼–ç¨‹åº)å¯¹æºç¨‹åºè¿›è¡Œç¼–è¯‘(æ±‡ç¼–)æ—¶ï¼Œä½¿ç”¨å®é™…å­˜å‚¨åœ°å€ã€‚</p>
<p>2.<strong>é™æ€åˆ†é…æ–¹å¼</strong>(Static Allocation) ï¼š ç”¨æˆ·åœ¨ç¼–ç¨‹æ—¶ï¼Œæˆ–ç”±ç¼–è¯‘ç¨‹åºäº§ç”Ÿçš„ç›®çš„ç¨‹åºï¼Œå‡å¯ä»å…¶åœ°å€ç©ºé—´çš„é›¶åœ°å€å¼€å§‹ï¼›å½“è£…é…ç¨‹åºå¯¹å…¶è¿›è¡Œè¿æ¥è£…å…¥æ—¶æ‰ç¡®å®šå®ƒä»¬åœ¨ä¸»å­˜ä¸­çš„ç›¸åº”ä½ç½®ï¼Œä»è€Œç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­˜å‚¨åˆ†é…æ˜¯åœ¨è£…å…¥æ—¶å®ç°çš„ã€‚</p>
<p>3.<strong>åŠ¨æ€åˆ†é…æ–¹å¼</strong>(Dynamic Allocation)ï¼š åŠ¨æ€åˆ†é…æ˜¯ä¸€ç§æ›´åŠ æœ‰æ•ˆçš„ä½¿ç”¨ä¸»å­˜å‚¨å™¨çš„æ–¹æ³•ã€‚ è¿™ç§åŠ¨æ€å­˜å‚¨åˆ†é…æ–¹å¼çš„ç‰¹ç‚¹æ˜¯ï¼š </p>
<blockquote>
<p>(1)ä½œä¸šåœ¨å­˜å‚¨ç©ºé—´ä¸­çš„ä½ç½®ï¼Œä¹Ÿæ˜¯åœ¨å…¶è£…å…¥æ—¶ç¡®å®šçš„ï¼›<br>(2)åœ¨å…¶æ‰§è¡Œè¿‡ç¨‹ä¸­å¯æ ¹æ®éœ€è¦ç”³è¯·é™„åŠ çš„å­˜å‚¨ç©ºé—´ï¼›<br>(3)ä¸€ä¸ªä½œä¸šå·²å ç”¨çš„éƒ¨åˆ†å­˜å‚¨åŒºåŸŸä¸å†éœ€è¦æ—¶ï¼Œå¯ä»¥è¦æ±‚å½’è¿˜ç»™ç³»ç»Ÿã€‚</p>
</blockquote>
<p>å…³äºåç©ºé—´ï¼Œåœ°å€ç©ºé—´(é€»è¾‘åœ°å€é›†åˆï¼Œè™š)ï¼Œå­˜å‚¨ç©ºé—´(ç‰©ç†åœ°å€é›†åˆï¼Œå®)çš„ç†è§£:</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_09-18-41.png"></p>
<h2 id="ç¨‹åºçš„è£…å…¥å’Œé“¾æ¥"><a href="#ç¨‹åºçš„è£…å…¥å’Œé“¾æ¥" class="headerlink" title="ç¨‹åºçš„è£…å…¥å’Œé“¾æ¥"></a>ç¨‹åºçš„è£…å…¥å’Œé“¾æ¥</h2><p>â€‹	ä¸ºäº†ä½¿ç¨‹åºèƒ½å¤Ÿè¿è¡Œï¼Œå¿…é¡»å…ˆä¸ºä¹‹åˆ›å»ºè¿›ç¨‹ï¼Œè€Œåˆ›å»ºè¿›ç¨‹çš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯å°†ç¨‹åºå’Œæ•°æ®è£…å…¥å†…å­˜ï¼Œå¦‚ä½•å°†ä¸€ä¸ªç”¨æˆ·æºç¨‹åºå˜ä¸ºä¸€ä¸ªå¯åœ¨å†…å­˜ä¸­æ‰§è¡Œçš„ç¨‹åºï¼Œé€šå¸¸è¦ç»è¿‡å¦‚ä¸‹å‡ æ­¥ï¼Œé¦–å…ˆæ˜¯ç¼–è¯‘ï¼ˆç”±ç¼–è¯‘ç¨‹åºå°†ç”¨æˆ·æºä»£ç ç¼–è¯‘æˆè‹¥å¹²ä¸ªç›®æ ‡æ¨¡å—ï¼‰ï¼Œå…¶æ¬¡æ˜¯é“¾æ¥ï¼ˆç”±é“¾æ¥ç¨‹åºå°†ç¼–è¯‘åå½¢æˆçš„ä¸€ç»„ç›®æ ‡æ¨¡å—ï¼Œä»¥åŠå®ƒä»¬æ‰€éœ€è¦çš„åº“å‡½æ•°é“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„è£…å…¥æ¨¡å—ï¼‰ï¼Œæœ€åæ˜¯è£…å…¥ï¼ˆç”±è£…å…¥ç¨‹åºå°†è£…å…¥æ¨¡å—è£…å…¥å†…å­˜ï¼‰ã€‚</p>
<h3 id="ç¨‹åºçš„è£…å…¥"><a href="#ç¨‹åºçš„è£…å…¥" class="headerlink" title="ç¨‹åºçš„è£…å…¥"></a>ç¨‹åºçš„è£…å…¥</h3><p>â‘  <strong>ç»å¯¹è£…å…¥æ–¹å¼</strong>ï¼Œå¦‚æœåœ¨ç¼–è¯‘æ—¶çŸ¥é“ç¨‹åºé©»ç•™åœ¨å†…å­˜çš„ä»€ä¹ˆä½ç½®ï¼Œé‚£ä¹ˆï¼Œç¼–è¯‘ç¨‹åºå°†äº§ç”Ÿç»å¯¹åœ°å€çš„ç›®æ ‡ä»£ç ï¼Œç»å¯¹è£…å…¥æ–¹å¼æŒ‰ç…§è£…å…¥æ¨¡å—ä¸­çš„åœ°å€ï¼Œå°†ç¨‹åºå’Œæ•°æ®è£…å…¥å†…å­˜ï¼Œè£…å…¥æ¨¡å—è¢«è£…å…¥å†…å­˜åï¼Œç”±äºç¨‹åºä¸­çš„<strong>é€»è¾‘åœ°å€ä¸å®é™…å†…å­˜åœ°å€å®Œå…¨ç›¸åŒ</strong>ï¼Œæ•…ä¸éœ€è¦å¯¹ç¨‹åºå’Œæ•°æ®çš„åœ°å€è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>â‘¡ <strong>å¯é‡å®šä½è£…å…¥æ–¹å¼</strong>ï¼Œç»å¯¹è£…å…¥æ–¹å¼åªé€‚ç”¨äºå•é“ç¨‹åºç¯å¢ƒï¼Œåœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹(ç¼–è¯‘ç¨‹åºä¸å¯èƒ½äº‹å…ˆçŸ¥é“æ‰€ç¼–è¯‘çš„ç›®æ ‡æ¨¡å—åº”æ”¾åœ¨å†…å­˜çš„ä½•å¤„)ï¼Œæ‰€å¾—åˆ°çš„ç›®æ ‡æ¨¡å—çš„èµ·å§‹åœ°å€é€šå¸¸éƒ½æ˜¯ä»¥0å¼€å§‹çš„ï¼Œç¨‹åºä¸­çš„å…¶ä»–åœ°å€ä¹Ÿéƒ½æ˜¯ç›¸å¯¹äºèµ·å§‹åœ°å€è®¡ç®—çš„ï¼Œæ­¤æ—¶åº”é‡‡ç”¨å¯é‡å®šä½è£…å…¥æ–¹å¼ï¼Œæ ¹æ®å†…å­˜çš„å½“å‰æƒ…å†µï¼Œå°†è£…å…¥æ¨¡å—è£…å…¥åˆ°å†…å­˜çš„é€‚å½“ä½ç½®ã€‚è¯¥æ–¹å¼ä¼šä½¿è£…å…¥æ¨¡å—ä¸­çš„æ‰€æœ‰é€»è¾‘åœ°å€ä¸å®é™…è£…å…¥å†…å­˜çš„ç‰©ç†åœ°å€ä¸åŒï¼Œéœ€è¦å¯¹æ•°æ®åœ°å€å’ŒæŒ‡ä»¤åœ°å€è¿›è¡Œä¿®æ”¹ï¼Œé€šå¸¸æŠŠå†è£…å…¥æ—¶å¯¹ç›®æ ‡ç¨‹åºä¸­æŒ‡ä»¤å’Œæ•°æ®çš„ä¿®æ”¹è¿‡ç¨‹ç§°ä¸ºé‡å®šä½ã€‚</p>
<p><em><strong>é™æ€é‡å®šä½</strong></em>  </p>
<p>åœ°å€å˜æ¢æ˜¯åœ¨è£…å…¥å†…å­˜æ—¶ä¸€æ¬¡å®Œæˆçš„ï¼Œä¸”ä»¥åä¸èƒ½ç§»åŠ¨ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹,ç‰©ç†åœ°å€&#x3D;ç›¸å¯¹åœ°å€+å†…å­˜ä¸­çš„èµ·å§‹åœ°å€ï¼Œé€‚ç”¨äºå¤šé“ç¨‹åºç¯å¢ƒï¼Œå¯ä»¥å°†è£…å…¥æ¨¡å—è£…å…¥åˆ°å†…å­˜ä¸­ä»»ä½•å…è®¸çš„ä½ç½®ã€‚</p>
<p><em><strong>åŠ¨æ€é‡å®šä½</strong></em></p>
<p>è£…å…¥ç¨‹åºå°†è£…å…¥æ¨¡å—è£…å…¥å†…å­˜åï¼Œå¹¶ä¸ç«‹å³æŠŠè£…å…¥æ¨¡å—ä¸­çš„ç›¸å¯¹åœ°å€è½¬æ¢ä¸ºç»å¯¹åœ°å€ï¼Œè€Œæ˜¯æŠŠè¿™ç§åœ°å€è½¬æ¢æ¨è¿Ÿåˆ°<font color=red>ç¨‹åºæ‰§è¡Œæ—¶</font>è¿›è¡Œã€‚åœ¨ç¡¬ä»¶åœ°å€å˜æ¢æœºæ„çš„æ”¯æŒä¸‹ï¼Œéšç€å¯¹æ¯æ¡æŒ‡ä»¤æˆ–æ•°æ®çš„è®¿é—®è‡ªåŠ¨è¿›è¡Œåœ°å€å˜æ¢ã€‚åˆ©ç”¨ä¸€ä¸ªé‡å®šä½å¯„å­˜å™¨(RR)æ¥å®ç°ã€‚</p>
<h3 id="ç¨‹åºçš„é“¾æ¥"><a href="#ç¨‹åºçš„é“¾æ¥" class="headerlink" title="ç¨‹åºçš„é“¾æ¥"></a>ç¨‹åºçš„é“¾æ¥</h3><p>â‘  <strong>é™æ€é“¾æ¥</strong>ï¼Œåœ¨ç¨‹åºè¿è¡Œä¹‹å‰ï¼Œå…ˆå°†å„ç›®æ ‡æ¨¡å—åŠå®ƒä»¬æ‰€éœ€çš„åº“å‡½æ•°ï¼Œé“¾æ¥æˆä¸€ä¸ª</p>
<p>å®Œæ•´çš„è£…å…¥æ¨¡å—ï¼ˆåˆç§°æ‰§è¡Œæ¨¡å—ï¼‰ï¼Œéœ€è¦å¯¹ç›¸å¯¹åœ°å€è¿›è¡Œä¿®æ”¹ï¼ˆç”±äºç¼–è¯‘ç¨‹åºäº§ç”Ÿçš„æ‰€æœ‰ç›®æ ‡æ¨¡å—ä¸­ï¼Œä½¿ç”¨çš„éƒ½æ˜¯ç›¸å¯¹åœ°å€ï¼Œå…¶èµ·å§‹åœ°å€éƒ½ä¸º0ï¼Œæ¯ä¸ªæ¨¡å—ä¸­çš„åœ°å€éƒ½æ˜¯ç›¸å¯¹äºèµ·å§‹åœ°å€è®¡ç®—çš„ï¼‰ã€‚ä¹Ÿéœ€è¦å˜æ¢å¤–éƒ¨è°ƒç”¨ç¬¦å·ï¼ˆå°†æ¯ä¸ªæ¨¡å—ä¸­æ‰€ç”¨çš„å¤–éƒ¨è°ƒç”¨ç¬¦å·éƒ½å˜æ¢ä¸ºç›¸å¯¹åœ°å€ï¼‰ï¼Œè¿™ç§å…ˆè¿›è¡Œé“¾æ¥æ‰€<strong>å½¢æˆçš„ä¸€ä¸ªå®Œæ•´çš„è£…å…¥æ¨¡å—</strong>ï¼Œåˆç§°ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šå¸¸éƒ½ä¸å†æ‹†å¼€å®ƒï¼Œè¦è¿è¡Œæ—¶å¯ç›´æ¥å°†å®ƒè£…å…¥å†…å­˜ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_09-44-17.png"></p>
<p>â‘¡ <strong>è£…å…¥æ—¶åŠ¨æ€é“¾æ¥</strong>ï¼Œç”¨æˆ·æºç¨‹åºç»ç¼–è¯‘åæ‰€å¾—æ˜¯ç›®æ ‡æ¨¡å—ï¼Œæ˜¯åœ¨<strong>è£…å…¥å†…å­˜æ—¶è¾¹è£…å…¥è¾¹é“¾æ¥</strong>çš„ï¼Œå³åœ¨è£…å…¥ä¸€ä¸ªç›®æ ‡æ¨¡å—æ—¶ï¼Œè‹¥å‘ç”Ÿä¸€ä¸ªå¤–éƒ¨æ¨¡å—è°ƒç”¨äº‹ä»¶ï¼Œå°†å¼•èµ·è£…å…¥ç¨‹åºå»æ‰¾å‡ºç›¸åº”çš„å¤–éƒ¨ç›®æ ‡æ¨¡å—ï¼Œå¹¶å°†å®ƒè£…å…¥å†…å­˜ï¼Œè£…å…¥æ—¶åŠ¨æ€é“¾æ¥æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼Œä¾¿äºä¿®æ”¹å’Œæ›´æ–°ï¼ˆå„ç›®æ ‡æ¨¡å—æ˜¯åˆ†å¼€çš„å­˜æ”¾çš„ï¼Œæ‰€ä»¥è¦ä¿®æ”¹æˆ–æ›´æ–°å„ç›®æ ‡æ¨¡å—éå¸¸å®¹æ˜“ï¼‰ï¼Œä¾¿äºå®ç°å¯¹ç›®æ ‡æ¨¡å—çš„å…±äº«ï¼ˆå¾ˆå®¹æ˜“å°†ä¸€ä¸ªç›®æ ‡æ¨¡å—é“¾æ¥åˆ°å‡ ä¸ªåº”ç”¨æ¨¡å—ä¸Šï¼Œå®ç°å¤šä¸ªåº”ç”¨ç¨‹åºå¯¹è¯¥æ¨¡å—çš„å…±äº«ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_09-46-03.png"></p>
<p>é‡‡ç”¨è£…å…¥æ—¶åŠ¨æ€é“¾æ¥æ–¹å¼ï¼Œè™½ç„¶å¯å°†ä¸€ä¸ªè£…å…¥æ¨¡å—è£…å…¥ åˆ°å†…å­˜çš„ä»»ä½•åœ°æ–¹ï¼Œä½†è£…å…¥æ¨¡å—çš„ç»“æ„æ˜¯é™æ€çš„ï¼Œè¡¨ç°åœ¨ï¼š 1. è¿›ç¨‹ï¼ˆç¨‹åºï¼‰åœ¨æ•´ä¸ªæ‰§è¡ŒæœŸé—´ï¼Œè£…å…¥æ¨¡å—æ˜¯ä¸æ”¹å˜çš„ï¼› 2. æ¯æ¬¡è¿è¡Œæ—¶çš„è£…å…¥æ¨¡å—æ˜¯ç›¸åŒçš„ã€‚å¹¶ä¸”äº‹å…ˆæ— æ³•çŸ¥é“æœ¬æ¬¡ è¦è¿è¡Œå“ªäº›æ¨¡å—ï¼Œåªèƒ½å°†æ‰€æœ‰å¯èƒ½è¦è¿è¡Œçš„æ¨¡å—åœ¨è£…å…¥æ—¶ å…¨éƒ¨é“¾æ¥åœ¨ä¸€èµ·ï¼Œè€Œå®é™…ä¸Šå¾€å¾€æœ‰äº›ç›®æ ‡æ¨¡å—æ ¹æœ¬ä¸ä¼šè¿ è¡Œã€‚</p>
<p>â‘¢ <strong>è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥</strong>ï¼Œå°†æŸäº›æ¨¡å—çš„é“¾æ¥æ¨è¿Ÿåˆ°<strong>ç¨‹åºæ‰§è¡Œæ—¶æ‰è¿›è¡Œé“¾æ¥</strong>ï¼Œå³åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“å‘ç°ä¸€ä¸ªè¢«è°ƒç”¨æ¨¡å—å°šæœªè£…å…¥å†…å­˜æ—¶ï¼Œç«‹å³ç”±OSå»æ‰¾åˆ°è¯¥æ¨¡å—å¹¶å°†ä¹‹è£…å…¥å†…å­˜ï¼ŒæŠŠå®ƒé“¾æ¥åˆ°è°ƒç”¨è€…æ¨¡å—ä¸Šï¼Œå‡¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æœªè¢«è°ƒç”¨åˆ°çš„æ¨¡å—ï¼Œéƒ½ä¸ä¼šè¢«è°ƒå…¥å†…å­˜å’Œè¢«é“¾æ¥åˆ°è£…å…¥æ¨¡å—ä¸Šï¼Œè¿™æ ·ä¸ä»…åŠ å¿«ç¨‹åºçš„è£…å…¥è¿‡ç¨‹ï¼ŒåŒæ—¶ä¹ŸèŠ‚çœäº†å¤§é‡çš„å†…å­˜ç©ºé—´ã€‚</p>
<p><font color=red>è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥æ˜¯ç›®å‰æœ€å¸¸ä½¿ç”¨çš„é“¾æ¥æ–¹å¼</font>ã€‚</p>
<h2 id="è¿ç»­åˆ†é…å­˜å‚¨ç®¡ç†æ–¹å¼"><a href="#è¿ç»­åˆ†é…å­˜å‚¨ç®¡ç†æ–¹å¼" class="headerlink" title="è¿ç»­åˆ†é…å­˜å‚¨ç®¡ç†æ–¹å¼"></a>è¿ç»­åˆ†é…å­˜å‚¨ç®¡ç†æ–¹å¼</h2><h3 id="è¿ç»­åˆ†é…æ–¹å¼"><a href="#è¿ç»­åˆ†é…æ–¹å¼" class="headerlink" title="è¿ç»­åˆ†é…æ–¹å¼"></a>è¿ç»­åˆ†é…æ–¹å¼</h3><p><strong>å•ä¸€è¿ç»­åˆ†é…</strong></p>
<p>ã€€è¿™æ˜¯ä¸€ç§æœ€ç®€å•çš„å­˜å‚¨ç®¡ç†æ–¹å¼ï¼Œä½†åªèƒ½åœ¨å•ç”¨æˆ·ã€å•ä»»åŠ¡çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œå°†å†…å­˜åˆ†ä¸ºç³»ç»ŸåŒºå’Œç”¨æˆ·åŒºï¼Œç³»ç»ŸåŒºä¾›OSä½¿ç”¨ï¼Œé€šå¸¸æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ï¼Œç”¨æˆ·åŒºæ˜¯æŒ‡é™¤ç³»ç»ŸåŒºä»¥å¤–çš„å…¨éƒ¨å†…å­˜ç©ºé—´ï¼Œæä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚</p>
<p><strong>å›ºå®šåˆ†åŒºåˆ†é…</strong></p>
<p>ã€€å›ºå®šåˆ†åŒºåˆ†é…æ˜¯ä¸€ç§æœ€ç®€å•çš„å¯è¿è¡Œå¤šé“ç¨‹åºçš„å­˜å‚¨ç®¡ç†æ–¹å¼ï¼Œå°†å†…å­˜ç”¨æˆ·ç©ºé—´åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå›ºå®šå¤§å°çš„åŒºåŸŸï¼Œåœ¨æ¯ä¸ªåˆ†åŒºåªè£…å…¥ä¸€é“ä½œä¸šï¼Œè¿™æ ·ï¼Œä¾¿å…è®¸å¤šé“ä½œä¸šå¹¶å‘æ‰§è¡Œï¼Œå½“æœ‰ç©ºé—²åˆ†åŒºæ—¶ï¼Œä¾¿å¯ä»¥å†ä»å¤–å­˜çš„åå¤‡ä½œä¸šé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªé€‚å½“å¤§å°çš„ä½œä¸šè£…å…¥è¯¥åˆ†åŒºï¼Œå½“è¯¥ä½œä¸šç»“æŸæ—¶ï¼Œåˆå¯å†ä»åå¤‡ä½œä¸šé˜Ÿåˆ—ä¸­æ‰¾å‡ºå¦ä¸€ä½œä¸šè°ƒå…¥è¯¥åˆ†åŒºã€‚</p>
<p>ã€€å¯¹äºå†…å­˜çš„ç”¨æˆ·ç©ºé—´çš„åˆ’åˆ†ï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§æ–¹æ³•ã€‚</p>
<p>ã€€â‘  åˆ†åŒºå¤§å°ç›¸ç­‰ï¼Œå³æ‰€æœ‰çš„å†…å­˜åˆ†åŒºå¤§å°ç›¸ç­‰ã€‚ç¼ºç‚¹æ˜¯ç¼ºä¹çµæ´»æ€§ï¼Œå³å½“ç¨‹åºå¤ªå°æ—¶ï¼Œä¼šé€ æˆå†…å­˜èµ„æºçš„æµªè´¹ï¼Œç¨‹åºå¤ªå¤§æ—¶ï¼Œä¸€ä¸ªåˆ†åŒºç”±ä¸è¶³ä»¥è£…å…¥è¯¥ç¨‹åºï¼Œåªæ˜¯è¯¥ç¨‹åºæ— æ³•è¿è¡Œã€‚</p>
<p>ã€€â‘¡ åˆ†åŒºå¤§å°ä¸ç­‰ï¼ŒæŠŠå†…å­˜åŒºåˆ’åˆ†æˆå«æœ‰å¤šä¸ªè¾ƒå°çš„åˆ†åŒºã€é€‚é‡ä¸­ç­‰åˆ†é…å’Œå°‘é‡å¤§åˆ†åŒºï¼Œè¿™æ ·ï¼Œä¾¿å¯æ ¹æ®ç¨‹åºçš„å¤§å°ä¸ºä¹‹åˆ†é…é€‚å½“çš„åˆ†åŒºã€‚</p>
<p>ã€€ä¸ºäº†ä¾¿äºå†…å­˜åˆ†é…ï¼Œå°†åˆ†åŒºæŒ‰å¤§å°è¿›è¡Œæ’é˜Ÿï¼Œå¹¶ä¸ºä¹‹å»ºç«‹ä¸€å¼ <strong>åˆ†åŒºè¯´æ˜</strong>è¡¨ï¼Œå…¶ä¸­å„è¡¨é¡¹åŒ…æ‹¬å¯ç”¨äºåˆ†é…çš„åˆ†åŒºæ•°ã€æ¯ä¸ªåˆ†åŒºçš„èµ·å§‹åœ°å€ã€å¤§å°ã€çŠ¶æ€ï¼ˆæ˜¯å¦å·²åˆ†é…ï¼‰ï¼Œå½“æœ‰ä¸€ä¸ªç¨‹åºéœ€è¦è£…å…¥æ—¶ï¼Œç”±å†…å­˜åˆ†é…ç¨‹åºæ£€ç´¢è¯¥è¡¨ï¼Œä»ä¸­æ‰¾å‡ºä¸€ä¸ªèƒ½æ»¡è¶³è¦æ±‚çš„ï¼Œå°šæœªåˆ†é…çš„åˆ†åŒºï¼Œå°†ä¹‹åˆ†é…ç»™è¯¥ç¨‹åºï¼Œç„¶åå°†è¯¥è¡¨é¡¹ä¸­çš„çŠ¶æ€è®¾ç½®ä¸ºå·²åˆ†é…ï¼Œè‹¥æœªæ‰¾åˆ°å¤§å°è¶³å¤Ÿçš„åˆ†åŒºï¼Œåˆ™æ‹’ç»ä¸ºè¯¥ç”¨æˆ·åˆ†é…å†…å­˜ã€‚</p>
<table>
<thead>
<tr>
<th>åˆ†åŒºå·</th>
<th>å¤§å°</th>
<th>å§‹å€</th>
<th>çŠ¶æ€</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>12K</td>
<td>20K</td>
<td>å·²åˆ†é…</td>
</tr>
<tr>
<td>2</td>
<td>32K</td>
<td>32K</td>
<td>å·²åˆ†é…</td>
</tr>
<tr>
<td>3</td>
<td>64K</td>
<td>64K</td>
<td>å·²åˆ†é…</td>
</tr>
<tr>
<td>4</td>
<td>128K</td>
<td>128K</td>
<td>æœªåˆ†é…</td>
</tr>
</tbody></table>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-02-41.png"></p>
<p>å†…å­˜ä¸­å·²åˆ†é…ç»™ç”¨æˆ·ä½†æœªè¢«åˆ©ç”¨çš„åŒºåŸŸç§° ä¸º <font color=red>â€œå†…é›¶å¤´â€ ï¼ˆå†…ç¢ç‰‡ï¼‰</font>ã€‚ å›ºå®šåˆ†åŒºåˆ†é…æœ‰å†…é›¶å¤´äº§ç”Ÿã€‚</p>
<p><font color=red>å¤–é›¶å¤´</font>(External Fragment )ï¼š æ²¡æœ‰åˆ†é…ä½†æ— æ³•åˆ†é…çš„ç©ºé—´ ï¼Œå¤ªå°è€Œæ— æ³•åˆ†é…ï¼Œâ€œåˆ†ä¸å‡ºå»çš„ç©ºé—´â€</p>
<p><strong>åŠ¨æ€åˆ†åŒºåˆ†é…</strong></p>
<p>åŠ¨æ€åˆ†åŒºåˆ†é…æ˜¯æŒ‡æ ¹æ®è¿›ç¨‹çš„å®é™…éœ€è¦ï¼ŒåŠ¨æ€åœ°ä¸ºä¹‹åˆ†é…è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚å³åˆ†åŒºçš„è¾¹ç•Œå¯ä»¥ç§»åŠ¨ï¼Œåˆ†åŒºçš„å¤§å°æ˜¯å¯å˜çš„ã€‚åŠ¨æ€åˆ†åŒºåˆæœ‰ä¸¤ç§ä¸åŒé€‰æ‹©ï¼Œä¸€ç§æ˜¯åˆ†åŒºçš„æ•°ç›®å›ºå®šå¤§å°æ˜¯å¯å˜çš„ï¼Œè€Œå¦ä¸€ç§åˆ™å…è®¸åˆ†åŒºçš„æ•°ç›®å’Œå¤§å°éƒ½æ˜¯å¯å˜çš„ã€‚ ä¸ºäº†è¯´æ˜å®ƒä»¬ä¹‹é—´çš„é‡è¦å·®å¼‚ï¼Œæˆ‘ ä»¬è€ƒè™‘ä¸€ä¸ªå…·æœ‰256Kå­—èŠ‚å­˜å‚¨å™¨çš„ç³»ç»Ÿã€‚</p>
<p><em>åˆ†åŒºæ•°ç›®å›ºå®š</em></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-13-50.png"></p>
<p><em>åˆ†åŒºæ•°ç›®å¯å˜</em></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-14-02.png"></p>
<p>ä¸ºå®ç°å¯å˜åˆ†åŒºåˆ†é…ï¼Œå¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-16-26.png"></p>
<p><strong>å¯é‡å®šä½åˆ†åŒºåˆ†é…</strong></p>
<p>â€‹	åœ¨è¿ç»­åˆ†é…æ–¹å¼ä¸­ï¼Œå¿…é¡»æŠŠä¸€ä¸ªç³»ç»Ÿæˆ–ç”¨æˆ·ç¨‹åºè£…å…¥ä¸€è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œè‹¥æœåœ¨ç³»ç»Ÿä¸­åªæœ‰è‹¥å¹²ä¸ªå°çš„åˆ†åŒºï¼Œå³ä½¿ä»–ä»¬å®¹é‡æ€»å’Œå¤§äºè¦è£…å…¥çš„ç¨‹åºï¼Œä½†ç”±äºè¿™äº›åˆ†åŒºä¸ç›¸é‚»æ¥ï¼Œä¹Ÿæ— æ³•æŠŠè¯¥ç¨‹åºè£…å…¥å†…å­˜ã€‚è‹¥æƒ³è£…å…¥ï¼Œåˆ™å°†å†…å­˜ä¸­çš„æ‰€æœ‰ä½œä¸šè¿›è¡Œç§»åŠ¨ï¼Œä½¿ä»–ä»¬å…¨éƒ¨ç›¸é‚»æ¥ï¼Œè¿™æ ·ï¼Œå³å¯æŠŠåŸæ¥åˆ†æ•£çš„å¤šä¸ªå°åˆ†åŒºæ‹¼æ¥æˆä¸€ä¸ªå¤§åˆ†åŒºï¼Œè¿™æ—¶ï¼Œå°±å¯ä»¥æŠŠä½œä¸šè£…å…¥è¯¥åŒºã€‚ç»è¿‡ç´§å‡‘åçš„æŸäº›ç”¨æˆ·ç¨‹åºåœ¨å†…å­˜ä¸­çš„ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œæ­¤æ—¶è‹¥ä¸å¯¹ç¨‹åºå’Œæ•°æ®çš„åœ°å€åŠ ä»¥ä¿®æ”¹ï¼ˆå˜æ¢ï¼‰ï¼Œåˆ™ç¨‹åºå¿…å°†æ— æ³•æ‰§è¡Œï¼Œä¸ºæ­¤ï¼Œ<strong>åœ¨æ¯æ¬¡ç´§å‡‘ä¹‹åï¼Œéƒ½å¿…é¡»å¯¹ç§»åŠ¨äº†çš„æ•°æ®å’Œç¨‹åºè¿›è¡Œé‡å®šå‘</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160625173645781-121254084.png"></p>
<p>ã€€åœ¨åŠ¨æ€è¿è¡Œæ—¶è£…å…¥çš„æ–¹å¼ä¸­ï¼Œä½œä¸šè£…å…¥å†…å­˜åçš„æ‰€æœ‰åœ°å€éƒ½ä»ç„¶æ˜¯ç›¸å¯¹åœ°å€ï¼Œå°†ç›¸å¯¹åœ°å€è½¬åŒ–ä¸ºç‰©ç†åœ°å€çš„å·¥ä½œï¼Œé€€æ¨è¿Ÿåˆ°ç¨‹åºæŒ‡ä»¤è¦çœŸæ­£æ‰§è¡Œæ—¶è¿›è¡Œã€‚ä¸ºäº†ä½¿åœ°å€å˜æ¢ä¸å½±å“æŒ‡ä»¤çš„æ‰§è¡Œé€Ÿåº¦ï¼Œåœ¨ç³»ç»Ÿä¸­å¢è®¾äº†ä¸€ä¸ªé‡å®šä½å¯„å­˜å™¨ï¼Œç”¨å®ƒæ¥å­˜æ”¾ç¨‹åºï¼ˆæ•°æ®ï¼‰åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€ã€‚åœ¨ç¨‹åºæ‰§è¡Œæ—¶ï¼ŒçœŸæ­£è®¿é—®çš„å†…å­˜åœ°å€æ˜¯ç›¸å¯¹åœ°å€ä¸é‡å®šä½å¯„å­˜å™¨ä¸­çš„åœ°å€ç›¸åŠ è€Œå½¢æˆçš„ã€‚è¯¥åŠ¨ä½œæ˜¯éšç€å¯¹æ¯æ¡æŒ‡ä»¤æˆ–æ•°æ®çš„è®¿é—®è‡ªåŠ¨è¿›è¡Œçš„ï¼Œæ•…ç§°ä¸º<strong>åŠ¨æ€é‡å®šä½</strong>ï¼Œå½“ç³»ç»Ÿå¯¹å†…å­˜è¿›è¡Œäº†ç´§å‡‘è€Œä½¿è‹¥å¹²ç¨‹åºåœ¨å†…å­˜ä¸­ç§»åŠ¨æ—¶ï¼Œä¸éœ€è¦å¯¹ç¨‹åºåšä»»ä½•ä¿®æ”¹ï¼Œåªè¦ç”¨è¯¥ç¨‹åºåœ¨å†…å­˜çš„æ–°èµ·å§‹åœ°å€å»ç½®æ¢åŸæ¥çš„èµ·å§‹åœ°å€å³å¯ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-59-06.png"></p>
<p>ã€€åŠ¨æ€é‡å®šä½åˆ†åŒºåˆ†é…ç®—æ³•ä¸åŠ¨æ€åˆ†åŒºåˆ†é…ç®—æ³•åŸºæœ¬ä¸Šç›¸åŒï¼Œå·®åˆ«ä»…åœ¨äºï¼šåœ¨è¿™ç§åˆ†é…ç®—æ³•ä¸­ï¼Œ<strong>å¢åŠ äº†ç´§å‡‘åŠŸèƒ½</strong>ï¼Œé€šå¸¸ï¼Œåœ¨æ‰¾ä¸åˆ°è¶³å¤Ÿå¤§çš„ç©ºé—²åˆ†åŒºæ¥æ»¡è¶³ç”¨æˆ·éœ€æ±‚æ—¶è¿›è¡Œç´§å‡‘ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-59-26.png"></p>
<h3 id="åˆ†åŒºåˆ†é…ç®—æ³•"><a href="#åˆ†åŒºåˆ†é…ç®—æ³•" class="headerlink" title="åˆ†åŒºåˆ†é…ç®—æ³•"></a>åˆ†åŒºåˆ†é…ç®—æ³•</h3><ul>
<li><p><strong>æœ€ä½³é€‚åº”ç®—æ³•</strong>(Best fit: BF) ï¼šå°±æ˜¯ä¸ºä¸€ä½œä¸šé€‰æ‹©åˆ†åŒºæ—¶æ€»æ˜¯å¯»æ‰¾<em><strong>å…¶å¤§å°æœ€æ¥è¿‘ä½œä¸šæ‰€è¦æ±‚çš„å­˜å‚¨åŒºåŸŸ</strong></em>ã€‚å³ï¼šæŠŠä½œä¸šæ”¾ å…¥è¿™æ ·çš„åˆ†åŒºåå‰©ä¸‹çš„é›¶å¤´æœ€å°ã€‚ </p>
<p>  ä¼˜ç‚¹ï¼šå¦‚æœå­˜å‚¨ç©ºé—´ä¸­å…·æœ‰æ­£å¥½æ˜¯æ‰€è¦æ±‚å¤§å°çš„å­˜å‚¨ç©ºç™½åŒºï¼Œåˆ™å¿…ç„¶è¢«é€‰ä¸­ï¼›å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ç©ºç™½åŒºï¼Œä¹Ÿåªå¯¹æ¯”è¦æ±‚ç¨å¤§çš„ç©ºç™½åŒºè¿›è¡Œåˆ’åˆ†ï¼Œè€Œç»ä¸ä¼šå»åˆ’åˆ†ä¸€ä¸ªæ›´å¤§çš„ç©ºç™½åŒºã€‚å› æ­¤ï¼Œå…¶åé‡åˆ°å¤§ä½œä¸šåˆ°æ¥æ—¶ï¼Œä½œä¸šè¦æ±‚çš„å­˜å‚¨åŒºåŸŸå°±æ¯”è¾ƒå®¹æ˜“å¾—åˆ°æ»¡è¶³ã€‚ ä¸ºäº†åŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ï¼Œåº”å°†å­˜å‚¨ç©ºé—´ä¸­æ‰€æœ‰çš„ç©ºç™½åŒºæŒ‰å…¶<strong>å¤§å°é€’å¢</strong>çš„é¡ºåºé“¾æ¥èµ·æ¥ï¼Œç»„æˆä¸€ç©ºç™½åŒºé“¾(Free List)ã€‚</p>
<p>  <img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-22-52.png"></p>
<p>  ç¼ºç‚¹ï¼šé‡‡ç”¨æœ€ä½³é€‚åº”ç®—æ³•ï¼Œåœ¨æ¯æ¬¡åˆ†é…æ—¶ï¼Œæ€»æ˜¯äº§ç”Ÿæœ€å°çš„ç©ºç™½åŒºã€‚å› æ­¤ï¼Œç»è¿‡ä¸€æ®µæ—¶æœŸåï¼Œå­˜å‚¨ç©ºé—´ä¸­ å¯èƒ½ç•™è®¸å¤šè¿™æ ·çš„ç©ºç™½åŒºï¼Œç”±äºå…¶å¤ªå°è€Œæ— æ³•ä½¿ç”¨ã€‚ä¸ºäº†æ”¹å–„è¿™ç§æƒ…å†µï¼Œåœ¨è¯¥ç®—æ³•ä¸­è®¾ç½®ä¸€å‚æ•°Gï¼Œç”¨å®ƒæ¥ç¡® å®šæœ€å°åˆ†åŒºçš„å¤§å°ã€‚å½“é€‰æ‹©ä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œå¦‚æœé€‰ä¸­çš„ç©ºç™½åŒºä¸è¦æ±‚çš„å¤§å°ä¹‹å·®å°äºGï¼Œåˆ™ä¸å†å¯¹å®ƒåˆ’åˆ†ï¼Œè€ŒæŠŠæ•´ä¸ªè¿™ä¸ªç©ºç™½åŒºåˆ†é…ç»™ç”³è¯·çš„ä½œä¸šã€‚ æœ€ä½³é€‚åº”ç®—æ³•çš„å¦ä¸€ç¼ºç‚¹æ˜¯ï¼šåœ¨å›æ”¶ä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œ ä¸ºäº†æŠŠå®ƒæ’å…¥åˆ°ç©ºç™½åŒºé“¾ä¸­åˆé€‚çš„ä½ç½®ä¸Šä¹Ÿé¢‡ä¸ºè´¹æ—¶ã€‚ æ‰€ä»¥ï¼Œè¿™ç§ç®—æ³•ä¹çœ‹èµ·æ¥æ˜¯æœ€ä½³çš„ï¼Œå…¶å®åˆ™ä¸ç„¶ã€‚ã€€</p>
</li>
<li><p><strong>æœ€åé€‚åº”ç®—æ³•</strong>(Worst fit: WF)ï¼šä¸æœ€ä½³é€‚åº”ç®—æ³•ç›¸åï¼Œå®ƒåœ¨ä¸ºä½œä¸šé€‰æ‹©å­˜å‚¨åŒºåŸŸæ—¶ï¼Œæ€»æ˜¯å¯»æ‰¾æœ€å¤§çš„ç©ºç™½åŒºã€‚åœ¨åˆ’åˆ†åå‰©ä¸‹çš„ç©ºç™½åŒºä¹Ÿæ˜¯æœ€å¤§çš„ï¼Œå› è€Œå¯¹ä»¥åçš„åˆ†é…å¾ˆå¯èƒ½ä»ç„¶æ˜¯æœ‰ç”¨çš„ï¼Œè¿™æ˜¯è¯¥ç®—æ³•çš„ä¸€ä¸ªä¼˜ç‚¹ã€‚ä½†æ˜¯ï¼Œç”±äºæœ€å¤§çš„ç©ºç™½å—æ€»æ˜¯é¦–å…ˆè¢«åˆ†é…è€Œè¿›è¡Œ åˆ’åˆ†ï¼Œå½“æœ‰å¤§çš„ä½œä¸šæ—¶ï¼Œå…¶å­˜å‚¨ç©ºé—´çš„ç”³è¯·å¾€å¾€å¾—ä¸åˆ°æ»¡è¶³ï¼Œè¿™æ˜¯è¯¥ç®—æ³•çš„ä¸€ä¸ªç¼ºç‚¹ã€‚ä¸ºäº†æ”¯æŒè¿™ä¸ªç®—æ³•çš„å®ç°ï¼Œç©ºç™½å—åº”ä»¥<strong>å¤§å°é€’å‡</strong>çš„é¡ºåºé“¾æ¥èµ·æ¥ã€‚</p>
</li>
<li><p><strong>é¦–æ¬¡é€‚åº”ç®—æ³•</strong>(First Fit: FF) ï¼šæ¯ä¸ªç©ºç™½åŒºæŒ‰å…¶åœ¨å­˜å‚¨ç©ºé—´ä¸­<strong>åœ°å€é€’å¢</strong>çš„é¡ºåºé“¾åœ¨ä¸€ èµ·ï¼Œå³æ¯ä¸ªåç»§ç©ºç™½åŒºçš„èµ·å§‹åœ°å€æ€»æ˜¯æ¯”å‰è€…çš„å¤§ã€‚åœ¨ ä¸ºä½œä¸šåˆ†é…å­˜å‚¨åŒºåŸŸæ—¶ï¼Œä»è¿™ä¸ªç©ºç™½åŒºé“¾çš„å§‹ç«¯å¼€å§‹æŸ¥æ‰¾ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªè¶³ä»¥æ»¡è¶³è¯·æ±‚çš„ç©ºç™½å—ï¼Œè€Œä¸ç®¡å®ƒç©¶ç«Ÿ æœ‰å¤šå¤§ã€‚ æ˜¾ç„¶ï¼Œè¿™ä¸ªç®—æ³•å€¾å‘äºä¼˜å…ˆåˆ©ç”¨å­˜å‚¨ç©º é—´ä¸­ä½å€éƒ¨åˆ†çš„ç©ºç™½åŒºã€‚</p>
<p>ä¸»è¦ä¼˜ç‚¹ï¼šç®—æ³•ç®€å•ï¼ŒæŸ¥æ‰¾é€Ÿåº¦å¿«ï¼›ç•™åœ¨é«˜å€éƒ¨åˆ†çš„å¤§çš„ç©ºç™½åŒºè¢«åˆ’åˆ†çš„æœºä¼šè¾ƒå°‘ï¼Œå› è€Œåœ¨å¤§ä½œä¸šåˆ°æ¥æ—¶ä¹Ÿæ¯”è¾ƒå®¹æ˜“å¾—åˆ°æ»¡è¶³ã€‚ ä¸»è¦ç¼ºç‚¹ï¼šè¿™ç§ç®—æ³•å¸¸å¸¸åˆ©ç”¨ä¸€ä¸ªå¤§çš„ç©ºç™½åŒºé€‚åº”å°ä½œä¸šçš„è¯·æ±‚ï¼Œä»è€Œç•™ä¸‹ä¸€äº›è¾ƒå°çš„æ— æ³•ç”¨çš„ç©ºç™½åŒºï¼Œå­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜ï¼›è€Œä¸”ï¼Œç”±äºæ‰€æœ‰çš„è¯·æ±‚éƒ½æ˜¯ä»ç©ºç™½åŒºé“¾çš„å§‹ç«¯å¼€å§‹æŸ¥æ‰¾ï¼Œå› è€Œè¿™äº›å°è€Œæ— ç”¨çš„ç©ºç™½åŒºé›†ä¸­åœ¨è¿™ä¸ªé“¾çš„å‰ç«¯ï¼Œç›¸åº”åœ°ï¼Œä¸€äº›è¾ƒå¤§ç©ºç™½åŒºåœ¨é“¾çš„å°¾ç«¯æ‰èƒ½å‘ç°ï¼Œè¿™ç§æƒ…å†µå°†ä½¿æ‰¾åˆ°åˆé€‚ç©ºç™½åŒºçš„é€Ÿåº¦é™ä½ã€‚<strong>åœ¨ä½åœ°å€éƒ¨åˆ†ä¼šç§¯ç´¯å¤§é‡å¤–é›¶å¤´</strong>ã€‚</p>
</li>
<li><p><strong>ä¸‹æ¬¡é€‚åº”ç®—æ³•</strong>(Next fit: NF) ï¼šè¯¥ç®—æ³•å®é™…ä¸Šæ˜¯é¦–æ¬¡é€‚åº”ç®—æ³•çš„ä¸€ç§å˜å½¢ï¼Œæ•…ä¹Ÿè¢«ç§°ä¸ºå¸¦æ—‹è½¬æŒ‡é’ˆçš„é¦–æ¬¡é€‚åº”ç®—æ³•(Next Fit with Roving Pointer)ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬æŠŠå­˜å‚¨ç©ºé—´ä¸­ç©ºç™½åŒºæ„æˆä¸€ä¸ªå¾ªç¯é“¾ã€‚æ¯æ¬¡ä¸ºå­˜å‚¨è¯·æ±‚æŸ¥æ‰¾åˆé€‚çš„åˆ†åŒºæ—¶ï¼Œæ€»æ˜¯ä»<em><strong>ä¸Šæ¬¡æŸ¥æ‰¾ç»“æŸçš„åœ°æ–¹å¼€å§‹</strong></em>ï¼Œåªè¦æ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºç™½åŒºï¼Œå°±å°†å®ƒåˆ’åˆ†ååˆ†é…å‡ºå»ã€‚æ˜¾ç„¶ï¼Œé‡‡ç”¨è¿™ä¸€ç­–ç•¥åï¼Œå­˜å‚¨ç©ºé—´çš„åˆ©ç”¨æ›´åŠ å‡è¡¡ï¼Œè€Œä¸è‡³äºä½¿å°çš„ç©ºç™½åŒºé›†ä¸­äºå­˜å‚¨å™¨çš„ä¸€ç«¯ã€‚ ä½†æ˜¯ï¼Œåœ¨å­˜å‚¨å™¨çš„å¦ä¸€ç«¯ä¹Ÿä¸å¯èƒ½ä¿ç•™å¤§çš„ç©ºç™½å—ï¼Œå› æ­¤ï¼Œå½“éœ€è¦è·å¾—ç›¸å½“å¤§çš„ç©ºç™½åŒºæ—¶ï¼Œèƒ½æ»¡è¶³çš„å¯èƒ½æ€§å‡å°‘äº†ã€‚</p>
</li>
<li><p><strong>å¿«é€Ÿé€‚åº”ç®—æ³•</strong>ï¼ˆQuik fit: QF)ï¼šå°†ç©ºé—²åˆ†åŒºæ ¹æ®å…¶å®¹é‡å¤§å°è¿›è¡Œåˆ†ç±»ï¼Œå¯¹äºæ¯ä¸€ç±»å…·<br>æœ‰ç›¸åŒå®¹é‡çš„æ‰€æœ‰ç©ºé—²åˆ†åŒºï¼Œå•ç‹¬è®¾ç«‹ä¸€ä¸ªç©ºé—²åˆ†åŒºé“¾è¡¨ã€‚è¿™æ ·ï¼Œç³»ç»Ÿä¸­å­˜åœ¨å¤šä¸ªç©ºé—²åˆ†åŒºé“¾è¡¨ï¼›åŒæ—¶ï¼Œåœ¨å†…å­˜ä¸­è®¾ç«‹ä¸€å¼ ç®¡ç†åˆ†åŒºç±»å‹ï¼Œå¹¶è®°å½•äº†è¯¥ç±»å‹ç©ºé—²åˆ†åŒºé“¾è¡¨è¡¨å¤´çš„ç´¢å¼•è¡¨ï¼Œè¯¥è¡¨çš„æ¯ä¸€ä¸ªè¡¨é¡¹è®°å½•äº†å¯¹åº”ç±»å‹ç©ºé—²åˆ†åŒºé“¾è¡¨è¡¨å¤´çš„æŒ‡é’ˆã€‚<br>â¢åˆ†é…è¿‡ç¨‹ï¼šæ ¹æ®è¿›ç¨‹çš„é•¿åº¦ï¼Œå¯»æ‰¾åˆ°èƒ½å®¹çº³å®ƒçš„æœ€å°ç©ºé—²åˆ†åŒºé“¾è¡¨ï¼Œå¹¶å–ä¸‹ç¬¬ä¸€å—è¿›è¡Œåˆ†é…å³å¯ã€‚</p>
<p>ä¼˜ç‚¹ï¼š1.æŸ¥æ‰¾æ•ˆç‡é«˜ã€‚2.è¯¥ç®—æ³•åœ¨è¿›è¡Œç©ºé—²åˆ†åŒºåˆ†é…æ—¶ï¼Œä¸ä¼šå¯¹ä»»ä½•åˆ†åŒºäº§ç”Ÿåˆ†<br>å‰²ï¼Œæ‰€ä»¥èƒ½ä¿ç•™å¤§çš„åˆ†åŒºï¼Œæ»¡è¶³å¯¹å¤§ç©ºé—´çš„éœ€æ±‚ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚<br>â¢ç¼ºç‚¹ï¼š1.åœ¨åˆ†åŒºå½’è¿˜ä¸»å­˜æ—¶ç®—æ³•å¤æ‚ï¼Œç³»ç»Ÿå¼€é”€è¾ƒå¤§ã€‚2.è¯¥ç®—æ³•åœ¨åˆ†é…ç©ºé—²åˆ†åŒºæ—¶æ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½ï¼Œä¸€ä¸ªåˆ†åŒºåªå±äºä¸€ä¸ªè¿›ç¨‹ï¼Œå› æ­¤åœ¨ä¸ºè¿›ç¨‹æ‰€åˆ†é…çš„ä¸€ä¸ªåˆ†åŒºä¸­ï¼Œæˆ–<br>å¤šæˆ–å°‘åœ°å­˜åœ¨ä¸€å®šçš„æµªè´¹ã€‚ç©ºé—²åˆ†åŒºåˆ’åˆ†è¶Šç»†ï¼Œæµªè´¹åˆ™è¶Šä¸¥é‡ã€‚</p>
</li>
</ul>
<h3 id="åˆ†åŒºåˆ†é…æ“ä½œ"><a href="#åˆ†åŒºåˆ†é…æ“ä½œ" class="headerlink" title="åˆ†åŒºåˆ†é…æ“ä½œ"></a>åˆ†åŒºåˆ†é…æ“ä½œ</h3><p><em>åˆ†é…å†…å­˜</em></p>
<p>ç³»ç»Ÿåˆ©ç”¨æŸç§åˆ†é…ç®—æ³•ï¼Œä»ç©ºé—²åˆ†åŒºé“¾ï¼ˆè¡¨ï¼‰ä¸­æ‰¾åˆ°æ‰€éœ€å¤§å°çš„åˆ†åŒºï¼Œå…¶æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-42-15.png"></p>
<p><em>å›æ”¶å†…å­˜</em></p>
<p>å½“è¿›ç¨‹è¿è¡Œå®Œæ¯•é‡Šæ”¾å†…å­˜æ—¶ï¼Œç³»ç»Ÿæ ¹æ®å›æ”¶åŒºçš„é¦–å€ï¼Œä»ç©ºé—²åŒºé“¾ï¼ˆè¡¨ï¼‰ä¸­æ‰¾åˆ°ç›¸åº”çš„æ’å…¥ç‚¹ï¼Œæ­¤æ—¶ä¼šå‡ºç°å¦‚ä¸‹å››ç§æƒ…å†µä¹‹ä¸€ï¼š<strong>å›æ”¶åˆ†åŒºä¸æ’å…¥ç‚¹çš„å‰ä¸€ä¸ªç©ºé—²åŒºF1ç›¸é‚»æ¥</strong>ï¼Œæ­¤æ—¶å°†å›æ”¶åŒºä¸æ’å…¥ç‚¹çš„å‰ä¸€åˆ†åŒºåˆå¹¶ï¼Œä¸å¿…ä¸ºå›æ”¶åŒºåˆ†é…æ–°è¡¨é¡¹ï¼Œåªéœ€è¦ä¿®æ”¹å‰ä¸€åˆ†åŒºF1çš„å¤§å°ã€‚<strong>å›æ”¶åˆ†åŒºä¸æ’å…¥ç‚¹çš„åä»¥ç©ºé—²åˆ†åŒºF2ç›¸é‚»æ¥</strong>ï¼Œæ­¤æ—¶å°†ä¸¤åˆ†åŒºåˆå¹¶ï¼Œå½¢æˆæ–°çš„ç©ºé—²åˆ†åŒºï¼Œç”¨å›æ”¶åŒºçš„é¦–å€ä½œä¸ºæ–°ç©ºé—²åŒºçš„é¦–å€ï¼Œå¤§å°ä¸ºä¸¤è€…ä¹‹å’Œã€‚<strong>å›æ”¶åŒºåŒæ—¶ä¸æ’å…¥ç‚¹çš„å‰ã€åä¸¤ä¸ªåˆ†åŒºé‚»æ¥</strong>ï¼Œæ­¤æ—¶å°†ä¸‰ä¸ªåˆ†åŒºåˆå¹¶ï¼Œä½¿ç”¨F1çš„è¡¨é¡¹å’ŒF1çš„é¦–å€ï¼Œå–æ¶ˆF2çš„è¡¨é¡¹ï¼Œå¤§å°ä¸ºä¸‰è€…ä¹‹å’Œã€‚<strong>å›æ”¶åŒºæ—¢ä¸ä¸F1é‚»æ¥ï¼Œä¹Ÿä¸ä¸F2é‚»æ¥</strong>ï¼Œè¿™æ—¶ä¸ºå›æ”¶åŒºå•ç‹¬å»ºç«‹ä¸€ä¸ªæ–°è¡¨é¡¹ï¼Œå¡«å†™å›æ”¶åŒºçš„é¦–å€å’Œå¤§å°ï¼Œå¹¶æ ¹æ®å…¶é¦–å€æ’å…¥åˆ°ç©ºé—²é“¾ä¸­çš„é€‚å½“ä½ç½®ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160625171237203-1234395843.png"></p>
<h3 id="ä¼™ä¼´ç³»ç»Ÿ"><a href="#ä¼™ä¼´ç³»ç»Ÿ" class="headerlink" title="ä¼™ä¼´ç³»ç»Ÿ"></a>ä¼™ä¼´ç³»ç»Ÿ</h3><p>â€‹	ä¼™ä¼´ç³»ç»Ÿè§„å®šï¼Œæ— è®ºå·²åˆ†é…åˆ†åŒºè¿˜æ˜¯ç©ºé—²åˆ†åŒºï¼Œå…¶å¤§å°å‡ä¸º2çš„kæ¬¡å¹‚ï¼Œkä¸ºæ•´æ•°ï¼Œ1&lt;&#x3D; k &lt;&#x3D; mï¼Œå…¶ä¸­ï¼Œ2^1è¡¨ç¤ºåˆ†é…çš„æœ€å°åˆ†åŒºçš„å¤§å°ï¼Œ2^mè¡¨ç¤ºåˆ†é…çš„æœ€å¤§åˆ†åŒºçš„å¤§å°ï¼Œé€šå¸¸2^mæ˜¯æ•´ä¸ªå¯åˆ†é…å†…å­˜çš„å¤§å°ã€‚å‡è®¾ç³»ç»Ÿå¼€å§‹æ—¶çš„åˆå§‹å®¹é‡ä¸º2^mä¸ªå­—ï¼Œç”±äºä¸æ–­åˆ‡åˆ†ï¼Œå¯èƒ½ä¼šå½¢æˆè‹¥å¹²ä¸ªä¸è¿ç»­çš„ç©ºé—²åˆ†åŒºï¼Œå°†è¿™äº›ç©ºé—²åˆ†åŒºæ ¹æ®åˆ†åŒºçš„å¤§å°è¿›è¡Œåˆ†ç±»ï¼Œå¯¹äºæ¯ä¸€ç±»å…·æœ‰ç›¸åŒå¤§å°çš„æ‰€æœ‰ç©ºé—²åˆ†åŒºï¼Œå•ç‹¬è®¾ç«‹ä¸€ä¸ªç©ºé—²åˆ†åŒºåŒå‘é“¾è¡¨ã€‚è¿™æ ·ï¼Œä¸åŒå¤§å°çš„ç©ºé—²åˆ†åŒºå½¢æˆäº†kä¸ªç©ºé—²åˆ†åŒºé“¾è¡¨ã€‚</p>
<p>ã€€å½“éœ€è¦ä¸ºè¿›ç¨‹åˆ†é…ä¸€ä¸ªé•¿åº¦ä¸ºnçš„å­˜å‚¨ç©ºé—´æ—¶ï¼Œé¦–å…ˆè®¡ç®—ä¸€ä¸ªiå€¼ï¼Œä½¿2^i-1 &lt; n &lt;&#x3D; 2^iï¼Œç„¶åï¼Œåœ¨ç©ºé—²åˆ†åŒºå¤§å°ä¸º2^içš„ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œè‹¥æ‰¾åˆ°ï¼Œå³æŠŠè¯¥ç©ºé—²åˆ†åŒºåˆ†é…ç»™è¿›ç¨‹ï¼Œå¦åˆ™ï¼Œè¡¨æ˜2^içš„ç©ºé—²åˆ†åŒºå·²ç»è€—å°½ï¼Œåœ¨å¤§å°ä¸º2^i+1çš„ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™å°†è¯¥ç©ºé—²åˆ†åŒºåˆ†ä¸ºä¸¤ä¸ªå¤§å°ä¸º2^içš„åˆ†åŒºï¼Œä¸€ä¸ªç”¨äºåˆ†é…ï¼Œä¸€ä¸ªåŠ å…¥åˆ°å¤§å°ä¸º2^içš„ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­ï¼Œè‹¥è¿˜æ˜¯ä¸å­˜åœ¨ï¼Œåˆ™ç»§ç»­åœ¨å¤§å°ä¸º2^i+2çš„ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™å°†ç©ºé—²åˆ†åŒºè¿›è¡Œä¸¤æ¬¡åˆ†å‰²ï¼Œä¸€æ¬¡åˆ†å‰²ä¸ºä¸¤ä¸ªå¤§å°ä¸º2^i+1çš„ç©ºé—²åˆ†åŒºï¼Œä¸€ä¸ªåŠ å…¥åˆ°å¤§å°ä¸º2^i+1çš„ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­ï¼Œå¦å¤–ä¸€ä¸ªç»§ç»­è¿›è¡Œåˆ†å‰²ï¼Œåˆ†æˆä¸¤ä¸ªå¤§å°2^içš„ç©ºé—²å—ï¼Œä¸€ä¸ªç”¨äºåˆ†é…ï¼Œå¦å¤–ä¸€ä¸ªåŠ å…¥åˆ°å¤§å°ä¸º2^içš„ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­ï¼Œä»¥æ­¤ç±»æ¨ã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦å¯¹2^kçš„ç©ºé—²åˆ†åŒºè¿›è¡Œkæ­¤åˆ†å‰²æ‰èƒ½å¾—åˆ°æ‰€éœ€åˆ†åŒºã€‚</p>
<p>ã€€å½“å›æ”¶ç©ºé—²åˆ†åŒºæ—¶ï¼Œä¹Ÿéœ€è¦ç»è¿‡å¤šæ¬¡åˆå¹¶ï¼Œå¦‚å›æ”¶å¤§å°ä¸º2^içš„ç©ºé—²åˆ†åŒºæ—¶ï¼Œè‹¥äº‹å…ˆå·²ç»å­˜åœ¨2^içš„ç©ºé—²åˆ†åŒºï¼Œåˆ™åº”å°†å…¶ä¸ä¼™ä¼´åˆ†åŒºåˆå¹¶ä¸ºä¸€ä¸ªå¤§å°ä¸º2^i+1çš„ç©ºé—²åˆ†åŒºï¼Œè‹¥äº‹å…ˆå·²å­˜åœ¨2^i+1çš„ç©ºé—²åˆ†åŒºï¼Œåˆ™å†æ¬¡è¿›è¡Œåˆå¹¶ï¼Œåˆå¹¶ä¸º2^i+2çš„åˆ†åŒºï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_10-52-24.png"></p>
<h2 id="åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼"><a href="#åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼" class="headerlink" title="åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼"></a>åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼</h2><h3 id="é¡µé¢ä¸é¡µè¡¨"><a href="#é¡µé¢ä¸é¡µè¡¨" class="headerlink" title="é¡µé¢ä¸é¡µè¡¨"></a>é¡µé¢ä¸é¡µè¡¨</h3><p>ã€€åˆ†é¡µå­˜å‚¨ç®¡ç†æ˜¯å°†ä¸€ä¸ª<strong>è¿›ç¨‹çš„é€»è¾‘åœ°å€ç©ºé—´åˆ†æˆè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„ç‰‡</strong>ï¼Œç§°ä¸ºé¡µé¢æˆ–é¡µï¼Œå¹¶ä¸ºå„é¡µè¿›è¡Œç¼–å·ï¼Œä»0å¼€å§‹ã€‚ç›¸åº”åœ°ï¼Œ<strong>æŠŠå†…å­˜ç©ºé—´åˆ†æˆä¸é¡µé¢ç›¸åŒå¤§å°çš„è‹¥å¹²ä¸ªå­˜å‚¨å—</strong>ï¼Œç§°ä¸ºï¼ˆç‰©ç†ï¼‰å—æˆ–è€…é¡µæ¡†ï¼Œä¹ŸåŒæ ·ä¸ºå®ƒä»¬ç¼–å·ï¼Œå¦‚0#å—ï¼Œ1#å—ç­‰ã€‚åœ¨æœªè¿›ç¨‹åˆ†é…å†…å­˜æ—¶ï¼Œä»¥å—ä¸ºå•ä½å°†è¿›ç¨‹çš„è‹¥å¹²ä¸ªé¡µåˆ†åˆ«è£…å…¥åˆ°å¤šä¸ªå¯ä»¥ä¸ç›¸é‚»æ¥çš„ç‰©ç†å—ä¸­ï¼Œç”±äºè¿›ç¨‹çš„æœ€åä¸€é¡µç»å¸¸è£…ä¸æ»¡ä¸€å—è€Œå½¢æˆä¸å¯åˆ©ç”¨çš„ç¢ç‰‡ï¼Œç§°ä¹‹ä¸ºé¡µå†…ç¢ç‰‡(ç¨‹åºå¤§å°ä¸€èˆ¬ä¸æ˜¯é¡µå¤§å°çš„æ•´æ•°å€)ã€‚</p>
<p>ã€€é¡µé¢å¤§å°ç”±æœºå™¨çš„åœ°å€ç»“æ„å†³å®šã€‚æŸä¸€æœºå™¨åªèƒ½é‡‡ç”¨ä¸€ç§å¤§å°çš„é¡µé¢ã€‚</p>
<ul>
<li><p>å°é¡µé¢</p>
</li>
<li><p>å¤§é¡µé¢</p>
</li>
</ul>
<p>â€‹	é¡µé¢çš„å¤§å°é€šå¸¸åœ¨1KB~8KBä¹‹é—´ã€‚</p>
<p>ã€€åˆ†é¡µåœ°å€ä¸­çš„åœ°å€ç»“æ„å¦‚ä¸‹</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_11-15-18.png"></p>
<p>ã€€åœ¨åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼ä¸­ï¼Œä»»ä½•ä¸€ä¸ªé€»è¾‘åœ°å€éƒ½å¯è½¬å˜ä¸ºï¼šé¡µå·+é¡µå†…ä½ç§»é‡ã€‚å‰ä¸€éƒ¨åˆ†ä¸ºé¡µå·Pï¼Œåä¸€éƒ¨åˆ†ä¸ºä½ç§»é‡Wï¼ˆæˆ–ç§°ä¸ºé¡µå†…åœ°å€ï¼‰ï¼Œæ€»å…±32ä½ï¼Œå…¶ä¸­0<del>11ä½ä¸ºé¡µå†…åœ°å€ï¼Œæ¯é¡µå¤§å°4KBï¼Œ12</del>31ä½ä¸ºé¡µå·ï¼Œåœ°å€ç©ºé—´æœ€å¤šå…è®¸1Mä¸ªé¡µé¢ã€‚</p>
<p>è®¾æœ‰ä¸€é€»è¾‘åœ°å€Aï¼Œé¡µé¢å¤§å°ä¸ºLï¼Œåˆ™åœ¨åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼ä¸­ï¼Œå®ƒçš„åœ°å€è¢«è½¬æ¢ï¼š<br>é¡µå· P&#x3D;INT[A&#x2F;L]<br>é¡µå†…ä½ç§»é‡ W&#x3D;A MOD L<br>å¦‚æœ‰é€»è¾‘åœ°å€ä¸ºï¼š2170ï¼Œé¡µé¢å¤§å°ä¸º1KBï¼Œåˆ™<br>P&#x3D;INT[2170&#x2F;1024]&#x3D;2ï¼›W&#x3D;2170 MOD 1024&#x3D;122</p>
<p>ã€€ä¸ºäº†èƒ½å¤Ÿä¿è¯åœ¨å†…å­˜ä¸­æ‰¾åˆ°æ¯ä¸ªé¡µé¢æ‰€å¯¹åº”çš„ç‰©ç†å—ï¼Œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹å»ºç«‹äº†ä¸€å¼ é¡µé¢æ˜ å°„è¡¨ï¼Œç®€ç§°ä¸ºé¡µè¡¨ã€‚é¡µè¡¨é¡¹çºªå½•äº†ç›¸åº”é¡µåœ¨å†…å­˜ä¸­å¯¹åº”çš„ç‰©ç†å—å·ï¼Œåœ¨é…ç½®äº†é¡µè¡¨åï¼Œè¿›ç¨‹æ‰§è¡Œæ—¶ï¼Œé€šè¿‡æŸ¥æ‰¾è¯¥è¡¨ï¼Œå³å¯æ‰¾åˆ°æ¯é¡µåœ¨å†…å­˜ä¸­çš„ç‰©ç†å—å·ï¼Œ<strong>é¡µè¡¨å®ç°äº†ä»é¡µå·åˆ°ç‰©ç†å—å·çš„åœ°å€æ˜ åƒ</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_11-13-45.png"></p>
<p>ã€€å³ä½¿åœ¨ç®€å•çš„åˆ†é¡µç³»ç»Ÿä¸­ï¼Œä¹Ÿå¸¸åœ¨é¡µè¡¨çš„è¡¨é¡¹ä¸­è®¾ç½®ä¸€å­˜å–æ§åˆ¶å­—æ®µï¼Œç”¨äºå¯¹è¯¥å­˜å‚¨å—ä¸­çš„å†…å­˜åŠ ä»¥ä¿æŠ¤ï¼Œå½“å­˜å–æ§åˆ¶å­—æ®µä»…æœ‰ä¸€ä½æ—¶ï¼Œå¯ç”¨æ¥è§„å®šè¯¥å­˜å‚¨å—ä¸­çš„å†…å­˜æ—¶å…è®¸è¯»&#x2F;å†™ï¼Œè¿˜æ˜¯åªè¯»ï¼›è‹¥å­˜å–æ§åˆ¶å­—æ®µä¸ºäºŒä½ï¼Œåˆ™å¯è§„å®šä¸ºè¯»&#x2F;å†™ã€åªè¯»ã€åªæ‰§è¡Œç­‰å­˜å–æ–¹å¼ã€‚</p>
<h3 id="åœ°å€å˜æ¢æœºæ„"><a href="#åœ°å€å˜æ¢æœºæ„" class="headerlink" title="åœ°å€å˜æ¢æœºæ„"></a>åœ°å€å˜æ¢æœºæ„</h3><p>ã€€åœ°å€å˜æ¢æœºæ„çš„åŠŸèƒ½å°†ç”¨æˆ·çš„é€»è¾‘åœ°å€è½¬å˜ä¸ºå†…å­˜ä¸­çš„ç‰©ç†åœ°å€ã€‚é€»è¾‘åœ°å€ç”±é¡µå·å’Œé¡µå†…ä½ç§»é‡ç»„æˆã€‚é¡µçš„å¤§å°å’Œå†…å­˜ç‰©ç†å—çš„å¤§å°æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥é¡µå†…ä½ç§»é‡å³ä¸ºç‰©ç†å—å†…ä½ç§»é‡ã€‚<strong>åœ°å€å˜æ¢ä»»åŠ¡æ˜¯å€ŸåŠ©é¡µè¡¨æ¥å®Œæˆçš„</strong>ã€‚</p>
<p>ã€€é¡µè¡¨çš„åŠŸèƒ½å¯ä»¥ç”±ä¸€ç»„ä¸“é—¨çš„å¯„å­˜å™¨æ¥å®ç°ï¼Œä¸€ä¸ªé¡µè¡¨é¡¹ç”¨ä¸€ä¸ªå¯„å­˜å™¨ï¼Œç”±äºå¯„å­˜å™¨å…·æœ‰è¾ƒé«˜çš„è®¿é—®é€Ÿåº¦ï¼Œå› è€Œæœ‰åˆ©äºæé«˜åœ°å€å˜æ¢çš„é€Ÿåº¦ï¼Œä½†æˆæœ¬è¾ƒé«˜ï¼Œä¸”é¡µè¡¨é¡¹ä¸€èˆ¬ä¼šå¾ˆå¤šï¼Œéƒ½ä½¿ç”¨å¯„å­˜å™¨å®ç°ä¸å¤ªç°å®ï¼Œå› æ­¤ï¼Œ<strong>é¡µè¡¨å¤§å¤šé©»ç•™åœ¨å†…å­˜</strong>ã€‚åœ¨ç³»ç»Ÿä¸­åªè®¾ç½®ä¸€ä¸ª<strong>é¡µè¡¨å¯„å­˜å™¨PTR(Page-Table Register)ï¼Œç”¨äºå­˜æ”¾é¡µè¡¨åœ¨å†…å­˜çš„å§‹å€å’Œé¡µè¡¨çš„é•¿åº¦</strong>ï¼Œå¹³æ—¶ï¼Œé¡µè¡¨çš„å§‹å€å’Œé¡µè¡¨é•¿åº¦å­˜æ”¾åœ¨æœ¬è¿›ç¨‹çš„PCBä¸­ï¼Œå½“è°ƒåº¦ç¨‹åºè°ƒåº¦åˆ°æŸè¿›ç¨‹æ—¶ï¼Œå°†è¿™ä¸¤ä¸ªæ•°æ®è£…å…¥é¡µè¡¨å¯„å­˜å™¨ï¼Œå› æ­¤ï¼Œåœ¨å•å¤„ç†æœºç¯å¢ƒä¸‹ï¼Œè™½ç„¶ç³»ç»Ÿä¸­å¯ä»¥è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œä½†åªéœ€è¦ä¸€ä¸ªé¡µè¡¨å¯„å­˜å™¨ã€‚</p>
<p>ã€€å½“è¿›ç¨‹è¦è®¿é—®æŸä¸ªé€»è¾‘åœ°å€ä¸­çš„æ•°æ®æ—¶ï¼Œåˆ†é¡µåœ°å€å˜æ¢æœºæ„ä¼šè‡ªåŠ¨åœ°å°†æœ‰æ•ˆåœ°å€ï¼ˆç›¸å¯¹åœ°å€ï¼‰åˆ†ä¸ºé¡µå·å’Œé¡µå†…åç§»é‡ä¸¤éƒ¨åˆ†ï¼Œä»PTRä¸­å¾—åˆ°é¡µè¡¨é¦–å€ï¼Œå†ä»¥é¡µå·ä¸ºç´¢å¼•å»æ£€ç´¢é¡µè¡¨ï¼ŒæŸ¥æ‰¾æ“ä½œç”±ç¡¬ä»¶æ‰§è¡Œï¼Œåœ¨æ‰§è¡Œæ£€ç´¢å‰ï¼Œå…ˆå°†é¡µå·ä¸é¡µè¡¨é•¿åº¦è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥é¡µå·å¤§äºæˆ–ç­‰äºé¡µè¡¨é•¿åº¦ï¼Œåˆ™è¡¨ç¤ºæœ¬æ¬¡è®¿é—®çš„åœ°å€è¶…è¶Šäº†è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œè¿™ä¸€é”™è¯¯å°†è¢«ç³»ç»Ÿå‘ç°å¹¶äº§ç”Ÿä¸€ä¸ªåœ°å€è¶Šç•Œä¸­æ–­ã€‚è‹¥æœªå‡ºç°é”™è¯¯ï¼Œåˆ™å°†é¡µè¡¨å§‹å€åŠ ä¸Š<em><strong>é¡µå·ä¸é¡µé¢å¤§å°ä¹˜ç§¯</strong></em>ï¼Œä¾¿å¾—åˆ°è¯¥è¡¨é¡¹åœ¨é¡µè¡¨ä¸­çš„ä½ç½®ï¼Œäºæ˜¯å¯ä»ä¸­å¾—åˆ°è¯¥é¡µçš„ç‰©ç†å—å·ï¼Œå°†ä¹‹è£…å…¥ç‰©ç†åœ°å€å¯„å­˜å™¨ï¼Œä¸æ­¤åŒæ—¶ï¼Œå†å°†é¡µå†…åœ°å€é€å…¥ç‰©ç†åœ°å€å¯„å­˜å™¨çš„å—å†…åœ°å€å­—æ®µä¸­ï¼Œè¿™æ ·ï¼Œä¾¿å®Œæˆäº†é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160625211026453-286611371.png"></p>
<p>ã€€ä¸Šè¿°æ“ä½œä¸­ï¼Œæ¯æ¬¡å­˜å–ä¸€ä¸ªæ•°æ®æ—¶ï¼Œéƒ½ä¼š<strong>è®¿é—®å†…å­˜ä¸¤æ¬¡</strong>ï¼Œç¬¬ä¸€æ¬¡æ˜¯è®¿é—®å†…å­˜ä¸­çš„é¡µè¡¨ï¼Œä»ä¸­æ‰¾åˆ°æŒ‡å®šé¡µçš„ç‰©ç†å—å·ï¼Œå†å°†å—å·ä¸é¡µå†…åç§»é‡Wæ‹¼æ¥ï¼Œä»¥å½¢æˆç‰©ç†åœ°å€ï¼Œç¬¬äºŒæ¬¡è®¿é—®æ—¶ï¼Œæ‰æ˜¯ä»ç¬¬ä¸€æ¬¡æ‰€å¾—çš„åœ°å€ä¸­è·å¾—æ‰€éœ€æ•°æ®ï¼Œå› æ­¤ï¼Œè¿™ç§æ–¹å¼ä¼šä½¿è®¡ç®—æœºçš„å¤„ç†é€Ÿåº¦é™ä½ä¸€åŠï¼Œä¸ºäº†æé«˜åœ°å€å˜æ¢é€Ÿåº¦ï¼Œå¯ä»¥åœ¨åœ°å€å˜æ¢æœºæ„ä¸­å¢è®¾ä¸€ä¸ªå…·æœ‰å¹¶è¡ŒæŸ¥è¯¢èƒ½åŠ›çš„<strong>é«˜é€Ÿç¼“å†²å¯„å­˜å™¨</strong>ï¼Œåˆç§°ä¸º<strong>è”æƒ³å¯„å­˜å™¨æˆ–å¿«è¡¨</strong>ï¼ˆTLBï¼‰ï¼Œä¸“é—¨ä¿å­˜å½“å‰è¿›ç¨‹æœ€è¿‘è®¿é—®è¿‡çš„ä¸€ç»„é¡µè¡¨é¡¹ã€‚</p>
<p>ã€€æ­¤æ—¶çš„å˜æ¢è¿‡ç¨‹å¦‚ä¸‹ï¼Œåœ¨CPUç»™å‡ºæœ‰æ•ˆåœ°å€åï¼ˆé€»è¾‘åœ°å€ï¼‰ï¼Œç”±åœ°å€å˜æ¢æœºæ„è‡ªåŠ¨çš„å°†é¡µå·Pé€å…¥é«˜é€Ÿç¼“å†²å¯„å­˜å™¨ï¼Œå¹¶å°†æ­¤é¡µå·ä¸é«˜é€Ÿç¼“å­˜ä¸­çš„æ‰€æœ‰é¡µå·è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥å…¶ä¸­æœ‰ä¸ä¹‹ç›¸åŒ¹é…çš„é¡µå·ï¼ˆ<strong>å‘½ä¸­</strong>ï¼‰ï¼Œä¾¿è¡¨ç¤ºæ‰€è¦è®¿é—®çš„é¡µè¡¨é¡¹åœ¨å¿«è¡¨ä¸­ï¼Œäºæ˜¯ï¼Œå¯ä»¥ç›´æ¥ä»å¿«è¡¨ä¸­è¯»å‡ºè¯¥é¡µæ‰€å¯¹åº”çš„ç‰©ç†å—å·ï¼Œå¹¶é€åˆ°ç‰©ç†åœ°å€å¯„å­˜å™¨ä¸­ï¼Œå¦‚åœ¨å¿«è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼ˆ<strong>å‘½ä¸­å¤±è´¥</strong>ï¼‰ï¼Œåˆ™è¿˜éœ€è¦å†è®¿é—®å†…å­˜ä¸­çš„é¡µè¡¨ï¼Œæ‰¾åˆ°åï¼ŒæŠŠä»é¡µè¡¨é¡¹è¯»å‡ºçš„ç‰©ç†å—å¥½é€å…¥åœ°å€å¯„å­˜å™¨ï¼ŒåŒæ—¶ï¼Œå†å°†æ­¤é¡µè¡¨é¡¹å­˜å…¥å¿«è¡¨çš„å¯„ä¸€ä¸ªå¯„å­˜å™¨å•å…ƒï¼Œå³ä¿®æ”¹å¿«è¡¨ï¼Œå¦‚æœå¿«è¡¨å·²æ»¡ï¼Œåˆ™OSéœ€è¦æ‰¾åˆ°ä¸€ä¸ªè€çš„ä¸”å·²è¢«è®¤ä¸ºä¸å†éœ€è¦çš„é¡µè¡¨é¡¹ï¼Œå°†å®ƒæ¢å‡ºã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160625212714688-1055550023.png">ã€€</p>
<p><em>ä¾‹1ï¼šæŸé‡‡ç”¨åˆ†é¡µå­˜å‚¨ç®¡ç†çš„ç³»ç»Ÿä¸­ï¼Œç‰©ç†åœ°å€å 20ä½ï¼Œé€»è¾‘åœ°å€ä¸­é¡µå·å 6ä½ï¼Œé¡µé¢å¤§å°ä¸º1KBï¼Œé—®ï¼š</em><br>â‘´è¯¥ç³»ç»Ÿçš„å†…å­˜ç©ºé—´å¤§å°ä¸ºå¤šå°‘ï¼Ÿæ¯ä¸ªå­˜å‚¨å—çš„å¤§å°ä¸ºå¤šå°‘ï¼Ÿé€»è¾‘åœ°å€å…±å‡ ä½ï¼Ÿæ¯ä¸ªä½œä¸šçš„æœ€å¤§é•¿åº¦ä¸ºå¤šå°‘ï¼Ÿ<br>â‘µè‹¥ç¬¬0ã€1ã€2é¡µåˆ†åˆ«æ”¾åœ¨ç¬¬3ã€7ã€9å­˜å‚¨å—ä¸­ï¼Œåˆ™é€»è¾‘åœ°å€0420Hå¯¹åº”çš„ç‰©ç†åœ°å€æ˜¯å¤šå°‘ï¼Ÿ<br>åœ¨åˆ†é¡µå­˜å‚¨ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæ ¹æ®é¢˜æ„ï¼š<br>â‘´ç‰©ç†åœ°å€å 20ä½ï¼Œæ‰€ä»¥è¯¥ç³»ç»Ÿçš„å†…å­˜ç©ºé—´å¤§å°<br>ä¸ºï¼š1MB<br>å­˜å‚¨å—çš„å¤§å°ä¸é¡µé¢å¤§å°ç›¸åŒï¼Œè€Œé¡µé¢å¤§å°ä¸º1KBï¼Œå› æ­¤å­˜å‚¨å—çš„å¤§å°ä¸ºï¼š1KB<br>ç”±äºé¡µé¢å¤§å°ä¸º1KBï¼Œå 10ä½ï¼Œè€Œé¡µå·å 6ä½ï¼Œå› æ­¤é€»è¾‘åœ°å€å…±16ä½ï¼Œ<br>ä» è€Œ è¯¥ ç³» ç»Ÿ ä¸­ æ¯ ä¸ª ä½œ ä¸š çš„ æœ€ å¤§ é•¿ åº¦ ä¸º ï¼š64KB<br>â‘µæ³•1ï¼ˆå…¨éƒ¨è½¬æ¢æˆ10è¿›åˆ¶ï¼‰ï¼š<br>é€»è¾‘åœ°å€ï¼š0420H&#x3D;1056<br>å› ä¸º1K&lt;&#x3D;1056&lt;2K-1ï¼Œæ‰€ä»¥åœ¨1å·é¡µé¢å†…ï¼Œå…¶é¡µå†…ä½ç§»é‡ä¸ºï¼š1056-1K&#x3D;32ï¼› è€Œ1å·é¡µé¢å¯¹åº”7å·ç‰©ç†å—ï¼Œæ‰€ä»¥ç‰©ç†åœ°å€ä¸ºï¼š7Ã—1K+32&#x3D;7200ã€‚<br>æ³•2ï¼ˆå°†é¡µé¢è½¬æ¢æˆ16è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š<br>é¡µé¢å¤§å°ï¼š1K&#x3D;0400H ã€‚å› ä¸º0400H&lt;&#x3D;0420H&lt;07FFHï¼Œæ‰€ä»¥åœ¨1å·é¡µé¢å†…ï¼Œå…¶é¡µå†…ä½ç§»é‡ä¸ºï¼š0420H-0400H&#x3D;20Hï¼›è€Œ1å· é¡µ é¢ å¯¹ åº” 7 å· ç‰© ç† å— ï¼Œ æ‰€ ä»¥ ç‰© ç† åœ° å€ ä¸º ï¼š<br>7Ã—0400H +20H&#x3D;1C20Hã€‚</p>
<p><em><strong>è®¿é—®å†…å­˜çš„æœ‰æ•ˆæ—¶é—´ EAT</strong></em><br>å®šä¹‰ï¼šä»è¿›ç¨‹å‘å‡ºæŒ‡å®šé€»è¾‘åœ°å€çš„è®¿é—®è¯·æ±‚ï¼Œç»è¿‡åœ°å€å˜æ¢ï¼Œå†åˆ°å†…å­˜ä¸­æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å•å…ƒå¹¶å–å‡ºæ•°æ®ï¼Œæ‰€èŠ±è´¹çš„æ€»æ—¶é—´ã€‚<br>â¢å¦‚æ£€ç´¢å¿«è¡¨æ—¶é—´ä¸º20 nsï¼Œè®¿é—®å†…å­˜ä¸º100 nsã€‚</p>
<ul>
<li>è‹¥èƒ½åœ¨å¿«è¡¨ä¸­æ£€ç´¢åˆ°CPUç»™å‡ºçš„é¡µå·ï¼Œåˆ™CPUå­˜å–ä¸€<br>ä¸ªæ•°æ®å…±éœ€120 nsã€‚</li>
<li>å¦åˆ™ï¼Œéœ€è¦220 nsçš„æ—¶é—´ã€‚</li>
</ul>
<p><strong>æœ‰æ•ˆè®¿é—®æ—¶é—´</strong> &#x3D; HitRÃ—(TLB+MA) + (1-HitR)Ã—(TLB+2MA)ï¼ŒHitRä¸ºå‘½ä¸­ç‡ã€‚</p>
<p>ä¾‹ï¼šè®¾è®¿é—®ä¸»å­˜æ—¶é—´ä¸º200ns,è®¿é—®è”æƒ³å­˜å‚¨å™¨ä¸º40nsï¼Œå‘½ä¸­ç‡ä¸º90ï¼…ï¼Œåˆ™å¹³å‡å­˜å–æ—¶é—´ä¸ºå¤šå°‘ï¼Ÿ<br>æŸ¥é¡µè¡¨ä¸¤æ¬¡è®¿å­˜ï¼š200ï¼‹200ï¼400ns<br>æŸ¥å¿«è¡¨ï¼Œå¹³å‡ä¸ºï¼š40+200&#x3D;240ns<br>(200+40)Ã—90ï¼…ï¼‹(200+200+40)Ã—10ï¼…&#x3D;260ns</p>
<h3 id="ä¸¤çº§å’Œå¤šçº§é¡µè¡¨"><a href="#ä¸¤çº§å’Œå¤šçº§é¡µè¡¨" class="headerlink" title="ä¸¤çº§å’Œå¤šçº§é¡µè¡¨"></a>ä¸¤çº§å’Œå¤šçº§é¡µè¡¨</h3><p>ã€€ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå¯ä»¥æ”¯æŒéå¸¸å¤§çš„é€»è¾‘åœ°å€ç©ºé—´ï¼ˆ2^32~2^64ï¼‰ï¼Œè¿™æ ·ï¼Œé¡µè¡¨å°±å˜å¾—éå¸¸å¤§ï¼Œè¦å ç”¨éå¸¸å¤§çš„å†…å­˜ç©ºé—´ï¼Œå¦‚ï¼Œå…·æœ‰32ä½é€»è¾‘åœ°å€ç©ºé—´çš„åˆ†é¡µç³»ç»Ÿï¼Œè§„å®šé¡µé¢å¤§å°ä¸º4KBï¼Œåˆ™åœ¨æ¯ä¸ªè¿›ç¨‹é¡µè¡¨ä¸­çš„é¡µè¡¨é¡¹å¯è¾¾1M(2^20)ä¸ªï¼Œåˆå› ä¸ºæ¯ä¸ªé¡µè¡¨é¡¹å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œæ•…æ¯ä¸ªè¿›ç¨‹ä»…ä»…é¡µè¡¨å°±è¦å ç”¨1MBçš„å†…å­˜ç©ºé—´ï¼Œè€Œä¸”è¦æ±‚è¿ç»­ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸ç°å®çš„ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•è§£å†³è¯¥é—®é¢˜ã€‚</p>
<p>ã€€ã€€â‘  é‡‡ç”¨ç¦»æ•£åˆ†é…æ–¹å¼æ¥è§£å†³éš¾ä»¥æ‰¾åˆ°ä¸€å—è¿ç»­çš„å¤§å†…å­˜ç©ºé—´çš„é—®é¢˜ã€‚</p>
<p>ã€€ã€€â‘¡ åªå°†å½“å‰éœ€è¦çš„éƒ¨åˆ†é¡µè¡¨é¡¹è°ƒå…¥å†…å­˜ï¼Œå…¶ä½™é¡µè¡¨é¡¹ä»é©»ç•™åœ¨ç£ç›˜ä¸Šï¼Œéœ€è¦æ—¶å†è°ƒå…¥ã€‚</p>
<p>ã€€ã€€å¯¹äºè¦æ±‚è¿ç»­çš„å†…å­˜ç©ºé—´æ¥å­˜æ”¾é¡µè¡¨çš„é—®é¢˜ï¼Œå¯åˆ©ç”¨å°†é¡µè¡¨è¿›è¡Œåˆ†é¡µï¼Œå¹¶ç¦»æ•£åœ°å°†å„ä¸ªé¡µé¢åˆ†åˆ«å­˜æ”¾åœ¨ä¸åŒçš„ç‰©ç†å—ä¸­çš„åŠæ³•æ¥è§£å†³ï¼ŒåŒæ ·çš„ï¼Œä¹Ÿè¦ä¸ºç¦»æ•£åˆ†é…åœ¨é¡µè¡¨å†å»ºç«‹ä¸€å¼ é¡µè¡¨ï¼Œç§°ä¸ºå¤–å±‚é¡µè¡¨ã€‚åœ¨æ¯ä¸ªé¡µè¡¨é¡¹ä¸­è®°å½•äº†é¡µè¡¨é¡µé¢çš„ç‰©ç†å—å·ï¼Œä»¥32ä½é€»è¾‘åœ°å€ç©ºé—´ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_12-58-51.png"></p>
<p>ã€€ã€€å±‚é¡µå·P1ä¸º10ä½ï¼Œå¯ä»¥è¡¨ç¤º1024ä¸ªç‰©ç†å—å·ï¼Œå¤–å±‚é¡µè¡¨ä¸­çš„å¤–å±‚ä¹Ÿå†…åœ°å€P2ä¸º10ä½ï¼Œå¯ä»¥è¡¨ç¤º1024ä¸ªç‰©ç†å—å·ï¼Œé¡µå†…åœ°å€ä¸º12ä½ï¼Œè¡¨ç¤ºé¡µé¢å¤§å°ä¸º4Kã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160625203109875-1471651688.png"></p>
<p>ã€€ã€€åœ¨é¡µè¡¨çš„æ¯ä¸€ä¸ªè¡¨é¡¹ä¸­å­˜æ”¾çš„æ˜¯è¿›ç¨‹çš„æŸé¡µåœ¨å†…å­˜ä¸­çš„<strong>ç‰©ç†å—å·</strong>ï¼Œå¦‚ç¬¬0é¡µçš„0é¡µå­˜æ”¾1#ç‰©ç†å—ï¼Œç¬¬1é¡µå­˜æ”¾4#ç‰©ç†å—ï¼Œè€Œåœ¨å¤–å±‚é¡µè¡¨çš„æ¯ä¸ªé¡µè¡¨é¡¹ä¸­ï¼Œæ‰€å­˜æ”¾çš„æ˜¯æŸé¡µè¡¨åˆ†é¡µçš„<strong>é¦–å€</strong>ï¼Œå¦‚ç¬¬0é¡µé¡µè¡¨å­˜æ”¾åœ¨1011#ç‰©ç†å—ä¸­ï¼Œç¬¬1é¡µé¡µè¡¨å­˜æ”¾åœ¨1078#ç‰©ç†å—ä¸­ã€‚</p>
<p>ã€€ã€€ä¸ºäº†å®ç°åœ°å€å˜æ¢ï¼Œåœ¨åœ°å€å˜æ¢æœºæ„ä¸­éœ€è¦å¢è®¾ä¸€ä¸ªå¤–å±‚é¡µè¡¨å¯„å­˜å™¨ï¼Œç”¨äºå­˜æ”¾å¤–å±‚é¡µè¡¨çš„å§‹å€ï¼Œå¹¶åˆ©ç”¨é€»è¾‘åœ°å€ä¸­çš„å¤–å±‚é¡µå·ï¼Œä½œä¸ºå¤–å±‚é¡µè¡¨çš„ç´¢å¼•ï¼Œä»ä¸­æ‰¾åˆ°æŒ‡å®šé¡µè¡¨åˆ†é¡µçš„å§‹å€ï¼Œåœ¨åˆ©ç”¨P2ä½œä¸ºæŒ‡å®šé¡µè¡¨åˆ†é¡µçš„ç´¢å¼•ï¼Œæ‰¾åˆ°æŒ‡å®šçš„é¡µè¡¨é¡¹ï¼Œå…¶ä¸­å³å«æœ‰è¯¥é¡µåœ¨å†…å­˜çš„ç‰©ç†å—å·ï¼Œç”¨è¯¥å—å·å’Œé¡µå†…åœ°å€då³å¯æ„æˆè®¿é—®çš„å†…å­˜ç‰©ç†åœ°å€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_12-59-13.png"></p>
<p>ã€€åˆ©ç”¨ç¦»æ•£åˆ†é…æ–¹æ³•å®ç°çš„ä¸¤çº§é¡µè¡¨åªæ˜¯è§£å†³äº†å¤§é¡µè¡¨æ— éœ€å¤§ç‰‡è¿ç»­å­˜å‚¨ç©ºé—´é—®é¢˜ï¼Œä½†å¹¶æœªå‡å°‘ç”¨è¾ƒå°‘å†…å­˜å»å­˜æ”¾å¤§é¡µè¡¨é—®é¢˜ï¼Œæœ‰å…³æ­¤ç±»é—®é¢˜çš„æˆåŠŸè§£å†³æ–¹æ¡ˆæ”¾åœ¨è™šæ‹Ÿå­˜å‚¨å™¨<br>ç®¡ç†ä¸­ã€‚</p>
<p>ã€€å¯¹äº64ä½çš„æœºå™¨è€Œè¨€ï¼Œé‡‡ç”¨ä¸¤çº§é¡µè¡¨å·²ç»ä¸å¤ªåˆé€‚ï¼Œå¦‚æœé¡µé¢å¤§å°ä»é‡‡ç”¨4KBï¼Œé‚£ä¹ˆå‰©ä¸‹52ä½ï¼Œè‹¥è¿˜æ˜¯æŒ‰ç…§ç‰©ç†å—çš„å¤§å°ï¼ˆ2^12ä½ï¼‰æ¥åˆ’åˆ†é¡µè¡¨ï¼Œæ¯ä¸ªé¡µè¡¨é¡¹4Bï¼Œæ•…ä¸€é¡µä¸­å¯å­˜æ”¾2^10ä¸ªé¡µè¡¨é¡¹ï¼Œåˆ™å°†ä½™ä¸‹çš„42ä½ç”¨äºå¤–å±‚é¡µå·ï¼Œæ­¤æ—¶ï¼Œå¤–å±‚é¡µè¡¨ä¸­å¯èƒ½æœ‰4096Gä¸ªé¡µè¡¨é¡¹ï¼Œè¦å ç”¨16384GBçš„è¿ç»­å†…å­˜ç©ºé—´ï¼Œæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚ä½¿ç”¨1MBçš„é¡µé¢ï¼Œå‰©44ä½ã€‚è‹¥æŒ‰1MBæ¥åˆ’åˆ†é¡µè¡¨ï¼Œè¿˜å‰©26ä½ç”¨äºäºŒçº§é¡µè¡¨ï¼ŒäºŒçº§é¡µè¡¨æœ‰64Mä¸ªé¡µè¡¨é¡¹ï¼Œå <br>256MBç©ºé—´å¿…é¡»é‡‡ç”¨å¤šçº§é¡µè¡¨ï¼Œå³å°†å¤–å±‚é¡µè¡¨å†è¿›è¡Œåˆ†é¡µã€‚è‹¥è®¡ç®—æœºçš„è™šæ‹Ÿåœ°å€ç©ºé—´å¤§å°ä¸º2^64ï¼Œé¡µé¢å¤§å°ä¸º4KBï¼Œé¡µè¡¨é¡¹ä¸º4Bï¼Œåˆ™æœ€å°‘é¡µè¡¨çš„çº§æ•°ä¸º6çº§ï¼Œé¦–å…ˆæ€»çš„é¡µé¢ä¸ªæ•°ä¸º2^52ï¼ˆ64 - 12ï¼‰ï¼Œå…¶æ¬¡ï¼Œæ¯ä¸ªç‰©ç†å—èƒ½è£…å…¥çš„é¡µè¡¨é¡¹ä¸º4KB&#x2F;4B &#x3D; 2^10ä¸ªï¼Œ10 * 6 &gt; 52ï¼Œå³æœ€å°‘éœ€è¦6çº§ã€‚</p>
<p><em><strong>åç½®é¡µè¡¨Inverted Page Tableï¼ˆIPTï¼‰</strong></em></p>
<p>é€»è¾‘ç©ºé—´è¶Šæ¥è¶Šå¤§ï¼Œé¡µè¡¨å å†…å­˜ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œä¸ºäº†è§£å†³å¤§é¡µè¡¨é—®é¢˜å å†…å­˜å¤šç°è±¡ï¼Œå‡å°‘å†…å­˜å¼€é”€ï¼Œé¿å…ä¸€ä¸ªè¿›ç¨‹ä¸€ä¸ªé¡µè¡¨ã€‚<strong>IPTæ€æƒ³ï¼š</strong>ï¼ˆ1ï¼‰IPTæ˜¯ä¸ºä¸»å­˜ä¸­çš„æ¯ä¸€ä¸ªç‰©ç†å—å»ºç«‹ä¸€ä¸ªé¡µè¡¨é¡¹å¹¶æŒ‰ç…§å—å·æ’åºï¼›ï¼ˆ2ï¼‰è¯¥è¡¨æ¯ä¸ªè¡¨é¡¹åŒ…å«æ­£åœ¨è®¿é—®è¯¥ç‰©ç†å—çš„è¿›ç¨‹æ ‡è¯†ã€é¡µå·åŠç‰¹å¾ä½,ç”¨æ¥å®Œæˆä¸»å­˜ç‰©ç†å—åˆ°è®¿é—®è¿›ç¨‹çš„é¡µå·çš„è½¬æ¢ã€‚</p>
<blockquote>
<p>å¸¸é‡‡ç”¨éƒ¨åˆ†è£…å…¥ï¼Œæ‰€ä»¥å¿…é¡»ä¸ºæ¯ä¸ªè¿›ç¨‹å»ºç«‹ä¸€ä¸ªå¤–éƒ¨é¡µè¡¨ã€‚å½“è¯¥é¡µä¸åœ¨ä¸»å­˜æ—¶ï¼Œéœ€è¦è®¿é—®å¤–éƒ¨é¡µè¡¨ã€‚<br>åç½®é¡µè¡¨åªç´¢å¼•æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹é¡µé¢<br>å› ä¸ºIPTéƒ½å¤§ï¼Œæ‰€ä»¥åˆ©ç”¨è¿›ç¨‹æ ‡è¯†ç¬¦å’Œé¡µå·å»æ£€ç´¢æ˜¯ç›¸å½“è´¹æ—¶çš„ã€‚é‡‡ç”¨Hashè¡¨æ¥æ£€ç´¢ã€‚</p>
</blockquote>
<p>åç½®é¡µè¡¨åœ°å€è½¬æ¢è¿‡ç¨‹å¦‚ä¸‹:<br>ç»™å‡ºè¿›ç¨‹æ ‡è¯†å’Œé¡µå·,ç”¨å®ƒä»¬å»æ¯”è¾ƒIPT,è‹¥æ•´ä¸ªåç½®é¡µè¡¨ä¸­æœªèƒ½æ‰¾åˆ°åŒ¹é…çš„é¡µè¡¨é¡¹,è¯´æ˜è¯¥é¡µä¸åœ¨ä¸»å­˜,äº§ç”Ÿè¯·æ±‚è°ƒé¡µä¸­æ–­,è¯·æ±‚æ“ä½œç³»ç»Ÿè°ƒå…¥;å¦åˆ™ï¼Œè¯¥è¡¨é¡¹çš„åºå·ä¾¿æ˜¯ç‰©ç†å—å·,å—å·åŠ ä¸Šä½ç§»,ä¾¿å½¢æˆç‰©ç†åœ°å€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_13-38-32.png"></p>
<p><em><strong>å¯¹æ¢</strong></em></p>
<p>ã€€å¯¹æ¢æŒ‡æŠŠå†…å­˜ä¸­æš‚ä¸èƒ½è¿è¡Œçš„è¿›ç¨‹æˆ–æš‚æ—¶ä¸ç”¨å’Œç¨‹åºå’Œæ•°æ®ï¼Œæ¢åˆ°å¤–å­˜ä¸Šï¼Œä»¥è…¾å‡ºè¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼ŒæŠŠå·²å…·å¤‡è¿è¡Œæ¡ä»¶çš„è¿›ç¨‹ï¼Œæˆ–è¿›ç¨‹æ‰€éœ€è¦çš„ç¨‹åºå’Œæ•°æ®ï¼Œæ¢å…¥å†…å­˜ã€‚å¯¹æ¢æ˜¯ç³»ç»Ÿè¡Œä¸ºï¼Œæ˜¯æé«˜å†…å­˜çš„åˆ©ç”¨ç‡çš„æœ‰æ•ˆæªæ–½ã€‚å¸¸ç”¨äºå¤šé“ç¨‹åºç³»ç»Ÿæˆ–å°å‹åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œä¸åˆ†åŒºå­˜å‚¨ç®¡ç†é…åˆä½¿ç”¨ã€‚å®ç°ï¼šå¯åœ¨ç³»ç»Ÿä¸­è®¾ä¸€å¯¹æ¢è¿›ç¨‹ï¼Œä»¥æ‰§è¡Œæ¢è¿›å†…å­˜ã€æ¢å‡ºè‡³å¤–å­˜æ“ä½œã€‚</p>
<p>åˆ†ç±»ï¼š</p>
<ul>
<li>â€œæ•´ä½“å¯¹æ¢â€ï¼ˆè¿›ç¨‹å¯¹æ¢ï¼‰ï¼š<br>å¯¹æ¢ä»¥æ•´ä¸ªè¿›ç¨‹ä¸ºå•ä½ï¼Œç”¨äºåˆ†æ—¶ç³»ç»Ÿï¼Œä»¥è§£å†³å†…å­˜ç´§å¼ çš„é—®é¢˜ï¼›</li>
<li>â€œé¡µé¢å¯¹æ¢&#x2F;åˆ†æ®µå¯¹æ¢â€ï¼š<br>å¯¹æ¢ä»¥â€œé¡µâ€æˆ–â€œæ®µâ€ä¸ºå•ä½è¿›è¡Œâ€œéƒ¨åˆ†å¯¹æ¢â€ï¼Œè¯¥æ–¹æ³•æ˜¯å®ç°è¯·æ±‚åˆ†é¡µåŠè¯·æ±‚åˆ†æ®µå­˜å‚¨å™¨çš„åŸºç¡€ï¼Œæ”¯æŒè™šå­˜ç³»ç»Ÿã€‚</li>
</ul>
<p>ä¸ºå®ç°å¯¹æ¢ï¼Œç³»ç»Ÿéœ€è¦ä¸‰æ–¹é¢çš„åŠŸèƒ½ï¼šã€€</p>
<ol>
<li><p><strong>å¯¹æ¢ç©ºé—´çš„ç®¡ç†</strong>ï¼Œåœ¨å…·æœ‰å¯¹æ¢åŠŸèƒ½çš„OSä¸­ï¼Œé€šå¸¸æŠŠ<strong>å¤–å­˜åˆ†ä¸ºæ–‡ä»¶åŒºå’Œå¯¹æ¢åŒº</strong>ï¼Œå‰è€…ç”¨äºå­˜æ”¾æ–‡ä»¶ï¼Œåè€…ç”¨äºå­˜æ”¾ä»å†…å­˜æ¢å‡ºçš„è¿›ç¨‹ã€‚ç”±äºæ–‡ä»¶é€šå¸¸æ˜¯è¾ƒé•¿ä¹…çš„é©»ç•™åœ¨å¤–å­˜ä¸Šï¼Œæ–‡ä»¶åŒºçš„ç®¡ç†ä¸»è¦ç›®æ ‡æ˜¯<em>æé«˜å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡</em>ï¼Œé‡‡å–ç¦»æ•£åˆ†é…æ–¹å¼(ç”¨æŒ‡é’ˆç›¸è¿)ï¼Œè¿›ç¨‹é€šå¸¸åœ¨å¯¹æ¢åŒºä¸­é©»ç•™çš„æ—¶é—´è¾ƒçŸ­æš‚ï¼Œå¯¹æ¢æ“ä½œè¾ƒé¢‘ç¹ï¼Œæ•…å¯¹å¯¹æ¢ç©ºé—´ç®¡ç†çš„ä¸»è¦ç›®æ ‡æ˜¯<em>æé«˜è¿›ç¨‹æ¢å…¥å’Œæ¢å‡ºçš„é€Ÿåº¦</em>ï¼Œé‡‡å–çš„æ˜¯è¿ç»­åˆ†é…çš„æ–¹å¼ï¼Œè¾ƒå°‘è€ƒè™‘å¤–å­˜ä¸­çš„ç¢ç‰‡é—®é¢˜ã€‚ä¸ºäº†èƒ½å¯¹å¯¹æ¢åŒºä¸­çš„ç©ºé—²ç›˜å—è¿›è¡Œç®¡ç†ï¼Œåœ¨ç³»ç»Ÿä¸­åº”é…ç½®ç›¸åº”çš„æ•°æ®ç»“æ„ï¼Œä»¥è®°å½•å¤–å­˜çš„ä½¿ç”¨æƒ…å†µã€‚ç©ºé—²åˆ†åŒºè¡¨æˆ–ç©ºé—²åˆ†åŒºé“¾ã€‚åœ¨ç©ºé—²åˆ†åŒºè¡¨ä¸­çš„æ¯ä¸ªè¡¨ç›®åº”åŒ…å«ä¸¤é¡¹ï¼Œå³å¯¹æ¢åˆ†åŒºé¦–å€å’Œå¯¹æ¢åŒºé•¿åº¦ï¼Œå®ƒä»¬çš„åŸºæœ¬å•ä½éƒ½æ˜¯<strong>ç›˜å—</strong>ã€‚</p>
</li>
<li><p><strong>è¿›ç¨‹çš„æ¢å‡º</strong>ï¼Œé€‰æ‹©ï¼šé¦–å…ˆé€‰æ‹©<strong>é˜»å¡</strong>æˆ–<strong>ç¡çœ çŠ¶æ€</strong>çš„è¿›ç¨‹ï¼Œè‹¥æœ‰å¤šä¸ªï¼ŒæŒ‰ä¼˜å…ˆçº§<strong>ç”±ä½åˆ°é«˜</strong>è¿›è¡Œé€‰æ‹©ã€‚è‹¥æ²¡æœ‰æ­¤çŠ¶æ€è¿›ç¨‹ï¼Œåˆ™é€‰æ‹©<strong>å°±ç»ª</strong>çŠ¶æ€çš„ï¼Œä»ç„¶æŒ‰ä¼˜å…ˆçº§ç”±ä½åˆ°é«˜è¿›è¡Œé€‰æ‹©ã€‚ä¸ºé¿å…æŸè¿›ç¨‹è¢«é¢‘ç¹çš„æ¢å…¥æ¢å‡ºï¼Œè¿˜åº”è€ƒè™‘è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„é©»ç•™æ—¶é—´ï¼Œä¼˜å…ˆé€‰æ‹©<strong>é©»ç•™æ—¶é—´é•¿</strong>çš„è¿›ç¨‹ã€‚</p>
</li>
<li><p><strong>è¿›ç¨‹çš„æ¢å…¥</strong>ï¼Œâ‘ ä» PCBé›†åˆä¸­æŸ¥æ‰¾â€œå°±ç»ªä¸”æ¢å‡ºâ€çš„è¿›ç¨‹ï¼Œæœ‰å¤šä¸ªï¼Œåˆ™é€‰æ‹©æ¢å‡ºæ—¶é—´æœ€é•¿çš„ã€‚â‘¡æ ¹æ®è¿›ç¨‹å¤§å°ç”³è¯·å†…å­˜ï¼ŒæˆåŠŸåˆ™è¯»å…¥ï¼Œå¦åˆ™è¦å…ˆæ‰§è¡Œæ¢å‡ºï¼Œå†æ¢å…¥ã€‚â‘¢è‹¥è¿˜æœ‰å¯æ¢å…¥è¿›ç¨‹ï¼Œåˆ™è½¬å‘â‘ ã€‚ç›´è‡³æ— â€œå°±ç»ªä¸”æ¢å‡ºâ€è¿›ç¨‹æˆ–æ— æ³•è·å¾—è¶³å¤Ÿå†…å­˜ç©ºé—´ä¸ºæ­¢ã€‚</p>
</li>
</ol>
<h2 id="åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼"><a href="#åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼" class="headerlink" title="åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼"></a>åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼</h2><h3 id="åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼çš„å¼•å…¥"><a href="#åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼çš„å¼•å…¥" class="headerlink" title="åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼çš„å¼•å…¥"></a>åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼çš„å¼•å…¥</h3><p>ä»å›ºå®šåˆ†åŒºåˆ°åŠ¨æ€åˆ†åŒºåˆ†é…ï¼Œå†åˆ°åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼ï¼Œå…¶ä¸»è¦åŠ¨åŠ›ä¸ºæé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œå¼•å…¥åˆ†æ®µå­˜å‚¨ç®¡ç†çš„ç›®çš„åœ¨äºæ»¡è¶³ç”¨æˆ·åœ¨ç¼–ç¨‹å’Œä½¿ç”¨ä¸Šå¤šæ–¹é¢çš„è¦æ±‚ã€‚å¦‚</p>
<p>ã€€â‘  æ–¹ä¾¿ç¼–ç¨‹ï¼Œç”¨æˆ·å¯ä»¥æŠŠè‡ªå·±çš„ä½œä¸šæŒ‰ç…§é€»è¾‘å…³ç³»åˆ’åˆ†ä¸ºè‹¥å¹²æ®µï¼Œæ¯ä¸ªæ®µéƒ½æ˜¯ä»0å¼€å§‹ç¼–å€ï¼Œå¹¶æœ‰è‡ªå·±çš„åå­—å’Œé•¿åº¦ã€‚</p>
<p>ã€€â‘¡ åˆ†æ®µå…±äº«ï¼Œåœ¨å®ç°å¯¹ç¨‹åºå’Œæ•°æ®çš„å…±äº«æ—¶ï¼Œæ˜¯ä»¥ä¿¡æ¯çš„é€»è¾‘å•ä½ä¸ºåŸºç¡€çš„ï¼Œæ¯”å¦‚å…±äº«æŸä¸ªå‡½æ•°ã€‚</p>
<p>ã€€â‘¢ åˆ†æ®µä¿æŠ¤ï¼Œå¯¹å†…å­˜ä¸­ä¿¡æ¯çš„ä¿æŠ¤åŒæ ·æ˜¯å¯¹ä¿¡æ¯çš„é€»è¾‘å•ä½è¿›è¡Œä¿æŠ¤ã€‚</p>
<p>ã€€â‘£ åŠ¨æ€å¢é•¿ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ•°æ®æ®µåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¾€å¾€ä¼šä¸æ–­å¢é•¿ï¼Œè€Œå®ç°æ— æ³•ç¡®åˆ‡çŸ¥é“æ•°æ®æ®µä¼šå¢é•¿åˆ°å¤šå¤§ï¼Œåˆ†æ®µå¯ä»¥è¾ƒå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ã€€â‘¤ åŠ¨æ€é“¾æ¥ï¼Œå†è¿è¡Œæ—¶ï¼Œå…ˆå°†ä¸»ç¨‹åºæ‰€å¯¹åº”çš„ç›®æ ‡ç¨‹åºè£…å…¥å†…å­˜å¹¶å¯åŠ¨è¿è¡Œï¼Œå½“è¿è¡Œè¿‡ç¨‹ä¸­æœ‰éœ€è¦è°ƒç”¨æŸæ®µæ—¶ï¼Œæ‰å°†è¯¥æ®µè°ƒå…¥å†…å­˜å¹¶è¿›è¡Œé“¾æ¥ã€‚</p>
<h3 id="åˆ†æ®µç³»ç»Ÿçš„åŸºæœ¬åŸç†"><a href="#åˆ†æ®µç³»ç»Ÿçš„åŸºæœ¬åŸç†" class="headerlink" title="åˆ†æ®µç³»ç»Ÿçš„åŸºæœ¬åŸç†"></a>åˆ†æ®µç³»ç»Ÿçš„åŸºæœ¬åŸç†</h3><p>ã€€åœ¨åˆ†æ®µç®¡ç†ä¸­ï¼Œä½œä¸šçš„åœ°å€ç©ºé—´è¢«åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ®µï¼Œæ¯ä¸ªæ®µå®šä¹‰äº†ä¸€ç»„é€»è¾‘ä¿¡æ¯ï¼Œå¦‚æœ‰ä¸»ç¨‹åºæ®µMAINï¼Œå­ç¨‹åºæ®µXï¼Œæ•°æ®æ®µDåŠæ ˆæ®µSï¼Œæ¯ä¸ªæ®µéƒ½æœ‰è‡ªå·±çš„åå­—ï¼Œæ¯ä¸ªæ®µä»0å¼€å§‹ç¼–å€ï¼Œå¹¶é‡‡ç”¨ä¸€æ®µè¿ç»­çš„åœ°å€ç©ºé—´ï¼Œæ®µçš„é•¿åº¦ç”±ç›¸åº”çš„é€»è¾‘ä¿¡æ¯ç»„çš„é•¿åº¦å†³å®šï¼Œå› è€Œå„æ®µé•¿åº¦ä¸ç­‰ï¼Œæ•´ä¸ªä½œä¸šçš„åœ°å€ç©ºé—´ç”±äºæ˜¯åˆ†æˆå¤šä¸ªæ®µï¼Œå› è€Œæ˜¯äºŒç»´çš„ï¼Œå³å…¶<strong>é€»è¾‘åœ°å€ç”±æ®µå·å’Œæ®µå†…åœ°å€æ„æˆ</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_13-53-24.png"></p>
<p>â€‹	è¯¥ç³»ç»Ÿå¯å…è®¸ä¸€ä¸ªä½œä¸šå…è®¸æœ€é•¿æœ‰64Kä¸ªæ®µï¼Œæ¯ä¸ªæ®µçš„æœ€å¤§é•¿åº¦ä¸º64KBã€‚</p>
<p>ã€€åœ¨åˆ†æ®µå¼å­˜å‚¨ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä¸ºæ¯ä¸ªåˆ†æ®µåˆ†é…ä¸€ä¸ªè¿ç»­çš„åˆ†åŒºï¼Œè€Œè¿›ç¨‹ä¸­çš„å„ä¸ªæ®µå¯ä»¥ç¦»æ•£åœ°ç§»å…¥å†…å­˜ä¸­ä¸åŒçš„åˆ†åŒºï¼Œä¸ºäº†ä½¿ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œèƒ½å¤Ÿç‰©ç†å†…å­˜ä¸­æ‰¾å‡ºæ¯ä¸ªé€»è¾‘æ®µæ‰€å¯¹åº”çš„ä½ç½®ï¼Œåº”è¯¥ä¸ºæ¯ä¸ªè¿›ç¨‹å»ºç«‹ä¸€å¼ æ®µæ˜ å°„è¡¨ï¼Œç§°ä¸º<strong>æ®µè¡¨</strong>ï¼Œæ¯ä¸ªæ®µåœ¨è¡¨ä¸­æœ‰ä¸€ä¸ªè¡¨é¡¹ï¼Œå…¶ä¸­è®°å½•äº†è¯¥æ®µåœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€å’Œæ®µçš„é•¿åº¦ã€‚æ®µè¡¨å¯ä»¥å­˜æ”¾åœ¨ä¸€ç»„å¯„å­˜å™¨ä¸­ï¼Œè¿™æ ·æœ‰åˆ©äºæé«˜åœ°å€è½¬æ¢é€Ÿåº¦ï¼Œä½†é€šå¸¸å°†æ®µè¡¨æ”¾åœ¨å†…å­˜ä¸­ã€‚<strong>æ®µè¡¨ç”¨äºå®ç°ä»é€»è¾‘æ®µåˆ°ç‰©ç†å†…å­˜åŒºçš„æ˜ å°„</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160626090308469-1366473959.png"></p>
<p>ã€€ä¸ºäº†å®ç°ä»è¿›ç¨‹çš„é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„å˜æ¢åŠŸèƒ½ï¼Œåœ¨ç³»ç»Ÿä¸­è®¾ç½®äº†æ®µè¡¨å¯„å­˜å™¨ï¼Œ<strong>ç”¨äºå­˜æ”¾æ®µè¡¨å§‹å€å’Œæ®µè¡¨é•¿åº¦TL</strong>ï¼Œåœ¨è¿›è¡Œåœ°å€å˜æ¢æ—¶ï¼Œç³»ç»Ÿå°†é€»è¾‘åœ°å€ä¸­çš„æ®µå·ä¸æ®µè¡¨é•¿åº¦TLè¿›è¡Œæ¯”è¾ƒï¼Œè‹¥S&gt;TLï¼Œè¡¨ç¤ºæ®µå·å¤ªå¤§ï¼Œè®¿é—®è¶Šç•Œï¼Œäº§ç”Ÿè¶Šç•Œä¸­æ–­ä¿¡å·ï¼Œè‹¥æœªè¶Šç•Œï¼Œåˆ™æ ¹æ®æ®µè¡¨çš„å§‹å€å’Œè¯¥æ®µçš„æ®µå·ï¼Œè®¡ç®—è¯¥æ®µå¯¹åº”æ®µè¡¨é¡¹çš„ä½ç½®ï¼Œä»ä¸­è¯»å‡ºè¯¥æ®µåœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€ï¼Œç„¶åï¼Œå†æ£€æŸ¥æ®µå†…åœ°å€dæ˜¯å¦è¶…è¿‡è¯¥æ®µçš„æ®µé•¿SLï¼Œè‹¥è¶…è¿‡ï¼ŒåŒæ ·å‘å‡ºè¶Šç•Œä¸­æ–­ä¿¡å·ï¼Œè‹¥æœªè¶…è¿‡ï¼Œåˆ™å°†è¯¥æ®µçš„åŸºå€ä¸æ®µå†…åœ°å€dç›¸åŠ ï¼Œå³å¾—åˆ°è¦è®¿é—®çš„å†…å­˜ç‰©ç†åœ°å€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160626092459344-1686459587.png"></p>
<p>ã€€æ¯æ¬¡è®¿é—®ä¸€ä¸ªæ•°æ®æ—¶ï¼ˆéœ€ç»™å‡ºæ®µå·å’Œæ®µå†…åœ°å€ï¼‰ï¼Œä¹Ÿéœ€è¦è®¿é—®ä¸¤æ¬¡å†…å­˜ï¼Œç¬¬ä¸€æ¬¡æ ¹æ®æ®µå·è·å¾—åŸºå€ï¼Œç¬¬äºŒæ¬¡æ ¹æ®åŸºå€ä¸æ®µå†…åœ°å€ä¹‹å’Œè®¿é—®çœŸå®æ•°æ®çš„ç‰©ç†åœ°å€ã€‚è¿™é™ä½äº†è®¡ç®—æœºçš„é€Ÿç‡ï¼Œä¹Ÿå¯ä»¥å¢è®¾ä¸€ä¸ªè”æƒ³å­˜å‚¨å™¨ï¼Œç”¨æ¥ä¿å­˜æœ€è¿‘å¸¸ç”¨çš„æ®µè¡¨é¡¹ï¼Œç”¨æ¥åŠ é€Ÿå­˜å–æ•°æ®çš„æ—¶é—´ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_14-06-30.png"></p>
<h3 id="ä¿¡æ¯å…±äº«"><a href="#ä¿¡æ¯å…±äº«" class="headerlink" title="ä¿¡æ¯å…±äº«"></a>ä¿¡æ¯å…±äº«</h3><p>ä¸€ä¸ªå¤šç”¨æˆ·ç³»ç»Ÿå¯æ¥çº³40ä¸ªç”¨æˆ·ï¼Œå®ƒä»¬éƒ½æ‰§è¡Œä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘ç¨‹åº(ED)ï¼ŒEDä»£ç å…±160Kï¼Œæ¯ä¸ªç”¨æˆ·è¿˜æœ‰40Kçš„æ•°æ®åŒº(DA)ã€‚<br>ä¸é‡‡ç”¨ä¿¡æ¯å…±äº«æ—¶éœ€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Ÿ<br>( 160K + 40K ) * 40 &#x3D; 8000K<br>é‡‡ç”¨ä¿¡æ¯å…±äº«ï¼ˆè‹¥EDå¯å…±äº«ï¼‰åå ç”¨çš„å†…å­˜ç©ºé—´ï¼Ÿ<br>160K + 40K * 40 &#x3D; 1760Kã€€</p>
<p>åˆ†é¡µä¸åˆ†æ®µå­˜åœ¨å¾ˆå¤§çš„ç›¸ä¼¼æ€§ï¼Œå¦‚éƒ½é‡‡ç”¨ç¦»æ•£åˆ†é…æ–¹å¼ï¼Œéƒ½éœ€è¦é€šè¿‡åœ°å€æ˜ å°„æœºæ„å®ç°åœ°å€å˜æ¢ï¼Œä½†ä¸¤è€…çš„ä¸»è¦<strong>åŒºåˆ«</strong>å¦‚ä¸‹ã€‚</p>
<p><em>åˆ†é¡µå…±äº«</em></p>
<ul>
<li>å¯¹äºæ•°æ®é¡µé¢ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒç®€å•ã€‚å› ä¸ºè¿™ä¸ªæ•°æ®é¡µé¢å¯ä»¥å®‰æ’åœ¨è¯¸ä½œä¸šåœ°å€ç©ºé—´ä¸­çš„ä»»ä½•ä¸€é¡µé¢ä¸Šã€‚</li>
<li>å¯¹äºä»£ç é¡µé¢ï¼Œå®ƒå¿…é¡»æŠŠå…±äº«çš„ä»£ç å®‰æ’åˆ°æ‰€æœ‰å…±äº«å®ƒçš„ä½œä¸šåœ°å€ç©ºé—´ä¸­ç›¸åŒé¡µå·çš„é¡µé¢ä¸­ã€‚å³å…±äº«ä»£ç æ‰€åœ¨çš„åœ°å€ç©ºé—´å¿…é¡»é‡å ã€‚ä¹‹æ‰€ä»¥æœ‰è¿™ç§è¦æ±‚ï¼Œæ˜¯å› ä¸ºä¸€ä¸ªä½œä¸šåœ¨è¿è¡Œå‰å¿…é¡»é“¾æ¥å¥½ï¼Œè€Œé“¾æ¥åï¼Œä¸€ä¸ªä¾‹ç¨‹çš„æ‰€å é¡µå·å°±ç¡®å®šäº†ã€‚å¦‚æœå…¶å®ƒä½œä¸šè¦å…±äº«è¯¥ä¾‹ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿å®ƒå…·æœ‰ç›¸åŒçš„é¡µå·ï¼Œæ‰èƒ½æ­£ç¡®è¿è¡Œã€‚</li>
</ul>
<p><em>åˆ†æ®µå…±äº«</em>ã€€</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_14-23-02.png"></p>
<p>åˆ†æ®µçš„å…±äº«æ˜¯é€šè¿‡ä¸¤ä¸ªä½œä¸šæ®µè¡¨çš„ç›¸åº”è¡¨ç›®éƒ½æŒ‡å‘COSè¿‡ç¨‹çš„åŒä¸€ç‰©ç†å‰¯æœ¬æ¥å®ç°çš„ã€‚<br>è¯´æ˜ï¼š<br>â‘´ç”±äºæ®µå·æ˜¯åœ¨åŠ¨æ€é“¾æ¥è¿‡ç¨‹ä¸­åˆ†é…çš„ï¼Œè€Œä¸”ï¼Œç³»ç»Ÿä¸å¯èƒ½äº‹å…ˆçŸ¥é“æŸä¸ªè¿‡ç¨‹å°†ä¸ºå“ªäº›ä½œä¸šæ‰€è°ƒç”¨ï¼›å› æ­¤ï¼Œä¸€ä¸ªå…¬å…±è¿‡ç¨‹ä¸ä¸€å®šä¹Ÿæ— éœ€èµ‹ç›¸åŒçš„æ®µå·ã€‚<br>ä¾‹å¦‚ï¼Œ[COS]åœ¨ä½œä¸š1çš„åœ°å€ç©ºé—´ä¸­ï¼Œå…¶æ®µå·ä¸º6ï¼Œä½†åœ¨ä½œä¸š2çš„åœ°å€ç©ºé—´ä¸­å…¶æ®µå·ä¸º3ã€‚<br>â‘µå½“æŸä¸ªå…±äº«æ®µç§»å‡ºä¸»å­˜åï¼Œå¿…é¡»åœ¨å…±äº«è¯¥æ®µçš„æ¯ä¸ªä½œä¸šä¹‹æ®µè¡¨çš„ç›¸åº”è¡¨ç›®ä¸­ï¼Œç½®çŠ¶æ€ä¸ºâ€œä¸åœ¨ä¸»å­˜â€æ ‡å¿—ã€‚</p>
<p><strong>åˆ†é¡µå’Œåˆ†æ®µçš„ä¸»è¦åŒºåˆ«</strong></p>
<p>â‘  é¡µæ˜¯ä¿¡æ¯çš„ç‰©ç†å•ä½ï¼Œåˆ†é¡µæ˜¯ä¸ºå®ç°ç¦»æ•£åˆ†é…æ–¹å¼ï¼Œä»¥<strong>æ¶ˆå‡å†…å­˜çš„å¤–é›¶å¤´ï¼Œæé«˜å†…å­˜çš„åˆ©ç”¨ç‡</strong>ï¼Œæˆ–è€…è¯´ï¼Œåˆ†é¡µä»…ä»…æ˜¯ç”±äºç³»ç»Ÿç®¡ç†çš„éœ€è¦è€Œä¸æ˜¯ç”¨æˆ·çš„éœ€è¦ï¼Œæ®µåˆ™æ˜¯ä¿¡æ¯çš„é€»è¾‘å•ä½ï¼Œå®ƒå«æœ‰ä¸€ç»„æ„ä¹‰ç›¸å¯¹å®Œæ•´çš„ä¿¡æ¯ï¼Œåˆ†æ®µçš„ç›®çš„æ˜¯ä¸ºäº†èƒ½æ›´å¥½åœ°æ»¡è¶³ç”¨æˆ·çš„éœ€è¦ã€‚</p>
<p>â‘¡ é¡µçš„å¤§å°å›ºå®šä¸”ç”±ç³»ç»Ÿå†³å®šï¼Œç”±ç³»ç»ŸæŠŠé€»è¾‘åœ°å€åˆ’åˆ†ä¸ºé¡µå·å’Œé¡µå†…åœ°å€ä¸¤éƒ¨åˆ†ï¼Œæ˜¯ç”±æœºå™¨ç¡¬ä»¶å®ç°çš„ï¼Œä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œåªå­˜åœ¨ä¸€ç§å¤§å°çš„é¡µé¢ï¼Œæ®µçš„é•¿åº¦åˆ™ä¸å›ºå®šï¼Œå†³å®šäºç”¨æˆ·æ‰€ç¼–å†™çš„ç¨‹åºï¼Œé€šå¸¸ç”±ç¼–è¯‘ç¨‹åºåœ¨å¯¹æºç¨‹åºè¿›è¡Œç¼–è¯‘æ—¶ï¼Œæ ¹æ®ä¿¡æ¯çš„æ€§è´¨æ¥åˆ’åˆ†ã€‚</p>
<p>â‘¢ åˆ†é¡µçš„ä½œä¸šçš„åœ°å€ç©ºé—´æ˜¯ä¸€ç»´çš„ï¼Œå³å•ä¸€çš„çº¿æ€§çš„åœ°å€ç©ºé—´ï¼Œç¨‹åºå‘˜åªåˆ©ç”¨ä¸€ä¸ªè®°å¿†ç¬¦å³å¯è¡¨ç¤ºä¸€ä¸ªåœ°å€ï¼Œè€Œåˆ†æ®µçš„ä½œä¸šåœ°å€ç©ºé—´æ˜¯äºŒç»´çš„ï¼Œç¨‹åºå‘˜åœ¨æ ‡è¯†ä¸€ä¸ªåœ°å€æ˜¯ï¼Œéœ€è¦ç»™å‡ºæ®µåå’Œæ®µå†…åœ°å€ã€‚</p>
<h3 id="æ®µé¡µå¼å­˜å‚¨ç®¡ç†æ–¹å¼"><a href="#æ®µé¡µå¼å­˜å‚¨ç®¡ç†æ–¹å¼" class="headerlink" title="æ®µé¡µå¼å­˜å‚¨ç®¡ç†æ–¹å¼"></a>æ®µé¡µå¼å­˜å‚¨ç®¡ç†æ–¹å¼</h3><p>ã€€åˆ†é¡µç³»ç»Ÿèƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼ˆä½†æ˜¯ä¼šå­˜åœ¨é¡µå†…ç¢ç‰‡ï¼‰ï¼Œåˆ†æ®µç³»ç»Ÿåˆ™èƒ½å¤Ÿå¾ˆå¥½åœ°æ»¡è¶³ç”¨æˆ·éœ€è¦ã€‚è‹¥èƒ½å°†ä¸¤ç§æ–¹å¼ç»“åˆèµ·æ¥ï¼Œæ—¢å…·æœ‰åˆ†æ®µç³»ç»Ÿçš„ä¾¿äºå®ç°ã€åˆ†æ®µå¯å…±äº«ã€æ˜“äºä¿æŠ¤ã€å¯åŠ¨æ€é“¾æ¥ç­‰ä¼˜ç‚¹ï¼Œåˆèƒ½åƒåˆ†é¡µç³»ç»Ÿé‚£æ ·å¾ˆå¥½åœ°è§£å†³å†…å­˜çš„å¤–éƒ¨ç¢ç‰‡é—®é¢˜ï¼ŒåŸºäºæ­¤ï¼Œæå‡ºäº†æ®µé¡µå¼ç³»ç»Ÿã€‚</p>
<p>ã€€æ®µé¡µå¼ç³»ç»Ÿå…ˆå°†ç”¨æˆ·ç¨‹åºåˆ†æˆè‹¥å¹²ä¸ªæ®µï¼Œå†æŠŠæ®µåˆ†ä¸ºè‹¥å¹²ä¸ªé¡µï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªæ®µèµ‹äºˆä¸€ä¸ªæ®µåã€‚æ®µé¡µå¼ç³»ç»Ÿä¸­ï¼Œåœ°å€ç»“æ„ç”±æ®µå·ã€æ®µå†…é¡µå·ã€é¡µå†…åœ°å€ä¸‰éƒ¨åˆ†æ„æˆã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_14-24-02.png"></p>
<p>ã€€åœ¨æ®µé¡µå¼ç³»ç»Ÿä¸­ï¼Œä¸ºäº†ä¾¿äºå®ç°åœ°å€è½¬æ¢ï¼Œé¡»é…ç½®ä¸€ä¸ªæ®µè¡¨å¯„å­˜å™¨ï¼Œå…¶ä¸­å­˜æ”¾æ®µè¡¨å§‹å€å’Œæ®µè¡¨é•¿TLï¼Œè¿›è¡Œåœ°å€å˜æ¢æ—¶ï¼Œé¦–å…ˆåˆ©ç”¨æ®µå·Sï¼Œå°†å®ƒä¸æ®µè¡¨é•¿TLè¿›è¡Œæ¯”è¾ƒï¼Œè‹¥S&lt;TLï¼Œè¡¨ç¤ºæœªè¶Šç•Œï¼Œäºæ˜¯åˆ©ç”¨æ®µè¡¨å§‹å€å’Œæ®µå·æ¥æ±‚å‡ºè¯¥æ®µæ‰€å¯¹åº”çš„æ®µè¡¨é¡¹åœ¨æ®µè¡¨ä¸­çš„ä½ç½®ï¼Œä»ä¸­å¾—åˆ°è¯¥æ®µçš„é¡µè¡¨å§‹å€ï¼Œå¹¶åˆ©ç”¨é€»è¾‘åœ°å€ä¸­çš„æ®µå†…é¡µå·Pæ¥è·å¾—å¯¹åº”é¡µçš„é¡µè¡¨é¡¹ä½ç½®ï¼Œä»ä¸­è¯»å‡ºè¯¥é¡µæ‰€åœ¨çš„ç‰©ç†å—å·bï¼Œå†åˆ©ç”¨bå’Œé¡µå†…åœ°å€æ„æˆç‰©ç†åœ°å€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160626100219578-1875843366.png"></p>
<p>ã€€åœ¨æ®µé¡µå¼ç³»ç»Ÿä¸­ï¼Œä¸ºäº†è·å¾—ä¸€æ¡æŒ‡ä»¤æˆ–æ•°æ®ï¼Œéœ€è¦<strong>è®¿é—®å†…å­˜ä¸‰æ¬¡</strong>ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æ—¶è®¿é—®å†…å­˜ä¸­çš„æ®µè¡¨ï¼Œä»ä¸­å–å¾—é¡µè¡¨å§‹å€ï¼Œç¬¬äºŒæ¬¡è®¿é—®æ˜¯è®¿é—®å†…å­˜ä¸­çš„é¡µè¡¨ï¼Œä»ä¸­å–å‡ºè¯¥é¡µæ‰€åœ¨çš„ç‰©ç†å—å·ï¼Œå¹¶å°†è¯¥å—å·ä¸é¡µå†…åœ°å€ä¸€èµ·å½¢æˆæŒ‡ä»¤æˆ–æ•°æ®çš„ç‰©ç†åœ°å€ï¼Œç¬¬ä¸‰æ¬¡è®¿é—®æ‰æ˜¯çœŸæ­£çš„ä»ç¬¬äºŒæ¬¡è®¿é—®æ‰€å¾—çš„åœ°å€ä¸­ï¼Œå–å‡ºæŒ‡ä»¤æˆ–æ•°æ®ã€‚åŒæ ·ï¼Œä¹Ÿå¯ä»¥å¢è®¾é«˜é€Ÿç¼“å†²å¯„å­˜å™¨ç”¨äºåŠ å¿«è®¿é—®é€Ÿåº¦ï¼Œè¡¨é¡¹åº”åŒ…æ‹¬æ®µå·ã€é¡µå·ã€ç‰©ç†å—å·ã€‚</p>
<p>åˆ†é¡µç®¡ç†æä¾›( A)ç»´çš„åœ°å€ç»“æ„ï¼Œåˆ†æ®µç®¡ç†æä¾›(B )ç»´çš„åœ°å€ç»“æ„ï¼Œæ®µé¡µå¼ç®¡ç†æä¾›(C )ç»´çš„åœ°å€ç»“æ„ã€‚</p>
<p>A. 1 B. 2 C. 3 D. 4</p>
<p>æ®µé¡µå¼ç®¡ç†æ¯å–ä¸€æ¬¡æ•°æ®ï¼Œè¦è®¿é—®(C )æ¬¡å†…å­˜;è‹¥æ”¹ä¸ºåˆ†é¡µå¼ç®¡ç†æˆ–è€…åˆ†æ®µå¼ç®¡ç†ï¼Œè¦è®¿é—®( B)æ¬¡å†…å­˜ã€‚</p>
<p>A. 1 B. 2 C. 3 D. 4</p>
<p>é¡µç®¡ç†çš„ä¸»è¦ä»»åŠ¡ä¹‹ä¸€æ˜¯å®ç°ï¼ˆé€»è¾‘é¡µå· ï¼‰åˆ°ï¼ˆ ç‰©ç†å—å·ï¼‰ çš„å†…å­˜åœ°å€æ˜ åƒã€‚</p>
<p>åœ¨åˆ†æ®µç®¡ç†ä¸­ï¼Œç³»ç»Ÿä¸ºæ¯ä¸ªè¿è¡Œçš„ä½œä¸šå»ºç«‹ä¸€ä¸ª(æ®µè¡¨)ï¼Œå…¶å†…å®¹ä¸»è¦åŒ…æ‹¬(æ®µå·)ã€(æ®µé•¿)ã€(å†…å­˜èµ·å§‹åœ°å€)å’ŒçŠ¶æ€æ ‡å¿—ã€‚æ®µè¡¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨ç¨‹åºçš„é€»è¾‘æ®µä¸ç‰©ç†å†…å­˜ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å½“ç¨‹åºè®¿é—®å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šä½¿ç”¨æ®µè¡¨æ¥æŸ¥æ‰¾é€»è¾‘åœ°å€å¯¹åº”çš„ç‰©ç†åœ°å€ï¼Œç„¶åå°†æ•°æ®ä»ç‰©ç†å†…å­˜ä¸­è¯»å–æˆ–å†™å…¥  ã€‚</p>
<p>åœ¨åˆ†æ®µç®¡ç†çš„åœ°å€å˜æ¢è¿‡ç¨‹ä¸­ï¼Œè‹¥æ‰§è¡ŒæŸæ¡æŒ‡ä»¤ï¼Œé¦–å…ˆè¦æ‰¾åˆ°è¯¥ä½œä¸šæ®µè¡¨çš„(å§‹å€)ï¼Œç„¶åæ ¹æ®é€»è¾‘åœ°å€ä¸­çš„æ®µå·å»æŸ¥æ‰¾(æ®µè¡¨é¡¹)ï¼Œå¾—åˆ°è¯¥æ®µçš„å†…å­˜ä¸­çš„(ç‰©ç†å§‹å€)ï¼Œå…¶å€¼ä¸æ®µå†…ä½ç§»é‡(ç›¸åŠ )ï¼Œå¾—åˆ°(æ“ä½œçš„å®é™…åœ°å€)ã€‚</p>
<h2 id="è™šæ‹Ÿå­˜å‚¨å™¨çš„åŸºæœ¬æ¦‚å¿µ"><a href="#è™šæ‹Ÿå­˜å‚¨å™¨çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="è™šæ‹Ÿå­˜å‚¨å™¨çš„åŸºæœ¬æ¦‚å¿µ"></a>è™šæ‹Ÿå­˜å‚¨å™¨çš„åŸºæœ¬æ¦‚å¿µ</h2><h3 id="è™šæ‹Ÿå­˜å‚¨å™¨æ¦‚è¿°"><a href="#è™šæ‹Ÿå­˜å‚¨å™¨æ¦‚è¿°" class="headerlink" title="è™šæ‹Ÿå­˜å‚¨å™¨æ¦‚è¿°"></a>è™šæ‹Ÿå­˜å‚¨å™¨æ¦‚è¿°</h3><p>å‰é¢æ‰€ä»‹ç»çš„å­˜å‚¨å™¨ç®¡ç†æ–¹å¼éƒ½æœ‰å…±åŒçš„ç‰¹ç‚¹ï¼š<br>â€œä¸€æ¬¡æ€§â€: è¦æ±‚å°†ä¸€ä¸ªä½œä¸šå…¨éƒ¨è£…å…¥å†…å­˜æ‰èƒ½è¿è¡Œï¼Œ</p>
<ul>
<li><p>å¤§ä½œä¸šæ— æ³•è¿è¡Œã€‚</p>
</li>
<li><p>é™åˆ¶ä½œä¸šå¹¶å‘æ‰§è¡Œçš„ç¨‹åº¦ã€‚</p>
</li>
</ul>
<p>â€œé©»ç•™æ€§â€: ä½œä¸šè£…å…¥åä¸€ç›´é©»ç•™å†…å­˜ç›´åˆ°ä½œä¸šå®Œæˆã€‚</p>
<ul>
<li>å†…å­˜ä¸­å­˜åœ¨ä¸€äº›å·²æ— ç”¨çš„ã€æˆ–æš‚æ—¶ä¸ç”¨çš„ç¨‹åºæˆ–æ•°æ®ï¼Œæµªè´¹å†…å­˜ç©ºé—´ã€‚</li>
</ul>
<p>å‡ºç°äº†ä¸‹é¢ä¸¤ç§æƒ…å†µï¼š</p>
<p>ã€€â‘  æœ‰çš„ä½œä¸šå¾ˆå¤§ï¼Œå…¶æ‰€è¦æ±‚çš„å†…å­˜ç©ºé—´è¶…è¿‡äº†å†…å­˜æ€»å®¹é‡ï¼Œä½œä¸šä¸èƒ½å…¨éƒ¨è¢«è£…å…¥å†…å­˜ï¼Œè‡´ä½¿è¯¥ä½œä¸šæ— æ³•è¿è¡Œã€‚</p>
<p>ã€€â‘¡ æœ‰å¤§é‡ä½œä¸šè¦æ±‚è¿è¡Œï¼Œä½†ç”±äºå†…å­˜å®¹é‡ä¸è¶³ä»¥å®¹çº³æ‰€æœ‰è¿™äº›ä½œä¸šï¼Œåªèƒ½å°†å°‘æ•°ä½œä¸šè£…å…¥å†…å­˜è®©ä»–ä»¬å…ˆè¿è¡Œï¼Œè€Œå°†å…¶ä»–å¤§é‡ä½œä¸šç•™åœ¨å¤–å­˜ä¸Šç­‰å¾…ã€‚</p>
<p>ã€€ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥å¢åŠ ç‰©ç†å†…å­˜ï¼Œä½†æ˜¯å…¶ä¸å¤ªç°å®ï¼Œå¦å¤–æ˜¯ä»é€»è¾‘ä¸Šæ‰©å……å†…å­˜å®¹é‡ã€‚</p>
<p>ã€€åŸºäºç¨‹åºçš„å±€éƒ¨æ€§åŸç†ï¼ˆæ—¶é—´å±€é™æ€§å’Œç©ºé—²å±€é™æ€§ï¼‰ï¼Œç¨‹åºåœ¨è¿è¡Œä¹‹å‰ï¼Œæ²¡æœ‰å¿…è¦å…¨éƒ¨è£…å…¥å†…å­˜ï¼Œä»…éœ€å°†é‚£äº›å½“å‰è¦è¿è¡Œçš„å°‘æ•°é¡µé¢æˆ–æ®µå…ˆè£…å…¥å†…å­˜ä¾¿å¯è¿è¡Œã€‚å…¶ä½™éƒ¨åˆ†æš‚ç•™åœ¨ç£ç›˜ä¸Šï¼Œç¨‹åºè¿è¡Œæ—¶ï¼Œå¦‚æœå®ƒæ‰€è¦è®¿é—®çš„é¡µï¼ˆæ®µï¼‰å·²ç»è°ƒå…¥å†…å­˜ï¼Œä¾¿å¯ç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œä½†å¦‚æœç¨‹åºæ‰€è¦è®¿é—®çš„é¡µï¼ˆæ®µï¼‰å°šæœªè°ƒå…¥å†…å­˜ï¼ˆç¼ºé¡µæˆ–ç¼ºæ®µï¼‰ï¼Œæ­¤æ—¶ç¨‹åºåº”åˆ©ç”¨OSçš„è¯·æ±‚è°ƒé¡µï¼ˆæ®µï¼‰åŠŸèƒ½ï¼Œå°†å®ƒä»¬è°ƒå…¥å†…å­˜ï¼Œä»¥ä½¿è¿›ç¨‹ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚å¦‚æœæ­¤æ—¶å†…å­˜å·²æ»¡ï¼Œæ— æ³•å†è£…å…¥æ–°çš„é¡µï¼ˆæ®µï¼‰ï¼Œåˆ™è¿˜éœ€åˆ©ç”¨é¡µï¼ˆæ®µï¼‰çš„ç½®æ¢åŠŸèƒ½ï¼Œå°†å†…å­˜ä¸­æš‚æ—¶ä¸ç”¨çš„é¡µï¼ˆæ®µï¼‰è°ƒè‡³ç£ç›˜ä¸Šï¼Œå†å°†è¦è®¿é—®çš„é¡µï¼ˆæ®µï¼‰è°ƒå…¥å†…å­˜ï¼Œä½¿ç¨‹åºç»§ç»­æ‰§è¡Œã€‚è¿™æ ·ï¼Œå¯ä»¥ä½¿å¾ˆå¤§çš„ç”¨æˆ·ç¨‹åºåœ¨è¾ƒå°çš„å†…å­˜ç©ºé—´ä¸­è¿è¡Œã€‚ä»ç”¨æˆ·çš„è°ƒå…¥çœ‹ï¼Œè¯¥ç³»ç»Ÿå…·æœ‰å¾ˆå¤§çš„å†…å­˜å®¹é‡ï¼Œä½†æ˜¯ï¼Œç”¨æˆ·çœ‹åˆ°çš„å¤§å®¹é‡åªæ˜¯ä¸€ç§æ„Ÿè§‰ï¼Œè¿™ç§å­˜å‚¨å™¨è¢«ç§°ä¸º<strong>è™šæ‹Ÿå­˜å‚¨å™¨</strong>ã€‚æ‰€è°“è™šæ‹Ÿå­˜å‚¨å™¨ï¼Œæ˜¯æŒ‡å…·æœ‰<strong>è¯·æ±‚è°ƒå…¥åŠŸèƒ½å’Œç½®æ¢åŠŸèƒ½</strong>ï¼Œèƒ½ä»é€»è¾‘ä¸Šå¯¹å†…å­˜å®¹é‡åŠ ä»¥æ‰©å……çš„ä¸€ç§å­˜å‚¨å™¨ç³»ç»Ÿï¼Œå…¶é€»è¾‘å®¹é‡ç”±<strong>å†…å­˜å®¹é‡å’Œå¤–å­˜å®¹é‡ä¹‹å’Œ</strong>å†³å®šï¼Œ<strong>å…¶è¿è¡Œé€Ÿåº¦æ¥è¿‘å†…å­˜ï¼Œæˆæœ¬æ¥è¿‘å¤–å­˜</strong>ã€‚</p>
<p>è™šæ‹Ÿå­˜å‚¨å™¨è™½ç„¶ç»™ç”¨æˆ·æä¾›äº†ç‰¹å¤§åœ°å€ç©ºé—´ï¼Œä½†å…¶å®¹é‡ä¸<br>æ˜¯æ— é™å¤§ï¼Œä¸»è¦å—ä¸¤ä¸ªæ–¹é¢çš„é™åˆ¶ï¼š</p>
<ul>
<li>æŒ‡ä»¤ä¸­è¡¨ç¤ºåœ°å€çš„å­—é•¿<br>å¦‚ï¼šè‹¥CPUçš„æœ‰æ•ˆåœ°å€é•¿åº¦ä¸º32ä½ï¼Œåˆ™å¯ä»¥è¡¨ç¤ºçš„åœ°å€æœ€å¤§ç©ºé—´ä¸º2^32ï¼Œé€»è¾‘ç©ºé—´å¤§å°ä¸º4Gï¼Œå³è™šå­˜å®¹é‡ä¸º 4GBã€‚<em>ä¸ç‰©ç†ç©ºé—´çš„å¤§å°æ— ç›´æ¥å…³ç³»</em>ã€‚</li>
<li>å¤–å­˜çš„å®¹é‡ï¼ˆå¯¹æ¢åŒºï¼‰</li>
</ul>
<h3 id="è™šæ‹Ÿå­˜å‚¨å™¨çš„å®ç°æ–¹æ³•"><a href="#è™šæ‹Ÿå­˜å‚¨å™¨çš„å®ç°æ–¹æ³•" class="headerlink" title="è™šæ‹Ÿå­˜å‚¨å™¨çš„å®ç°æ–¹æ³•"></a>è™šæ‹Ÿå­˜å‚¨å™¨çš„å®ç°æ–¹æ³•</h3><p>ä¸€ã€è¯·æ±‚åˆ†é¡µç³»ç»Ÿ<br>å®ƒæ˜¯åœ¨çº¯åˆ†é¡µç³»ç»Ÿçš„åŸºç¡€ä¸Šå¢åŠ äº†è¯·æ±‚è°ƒé¡µã€é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½æ‰€å½¢æˆçš„é¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€‚ä¸ºäº†å®ç°è¯·æ±‚è°ƒé¡µã€é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½ï¼Œç³»ç»Ÿå¿…é¡»æä¾›å¦‚ä¸‹çš„ç¡¬ä»¶æ”¯æŒï¼š</p>
<ol>
<li>è¯·æ±‚åˆ†é¡µçš„é¡µè¡¨æœºåˆ¶ã€‚</li>
<li>ç¼ºé¡µä¸­æ–­æœºæ„ã€‚</li>
<li>åœ°å€å˜æ¢æœºæ„ã€‚<br> æ­¤å¤–ï¼Œå®ç°è¯·æ±‚è°ƒé¡µã€é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½è¿˜éœ€å¾—åˆ°<br> OSçš„æ”¯æŒã€‚</li>
</ol>
<p>äºŒã€è¯·æ±‚åˆ†æ®µç³»ç»Ÿ<br>å®ƒæ˜¯åœ¨çº¯åˆ†æ®µç³»ç»Ÿçš„åŸºç¡€ä¸Šå¢åŠ äº†è¯·æ±‚è°ƒæ®µã€åˆ†æ®µç½®æ¢ä¸¤å¤§åŠŸèƒ½æ‰€å½¢æˆçš„æ®µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€‚ä¸ºäº†å®ç°è¯·æ±‚è°ƒæ®µã€åˆ†æ®µç½®æ¢ä¸¤å¤§åŠŸèƒ½ï¼Œç³»ç»Ÿå¿…é¡»æä¾›å¦‚ä¸‹çš„ç¡¬ä»¶æ”¯æŒï¼š</p>
<ol>
<li>è¯·æ±‚åˆ†æ®µçš„æ®µè¡¨æœºåˆ¶ã€‚</li>
<li>ç¼ºæ®µä¸­æ–­æœºæ„ã€‚</li>
<li>åœ°å€å˜æ¢æœºæ„ã€‚<br> æ­¤å¤–ï¼Œå®ç°è¯·æ±‚è°ƒæ®µã€åˆ†æ®µç½®æ¢ä¸¤å¤§åŠŸèƒ½è¿˜éœ€<br> å¾—åˆ°OSçš„æ”¯æŒã€‚</li>
</ol>
<p>ä¸‰ã€æ®µé¡µå¼è™šæ‹Ÿç³»ç»Ÿ<br>ç›®å‰ï¼Œè®¸å¤šè™šæ‹Ÿå­˜å‚¨ç®¡ç†ç³»ç»Ÿæ˜¯å»ºç«‹åœ¨æ®µé¡µå¼ç³»ç»Ÿçš„åŸºç¡€ä¸Šçš„ï¼Œé€šè¿‡å¢åŠ äº†è¯·æ±‚è°ƒé¡µã€<br>é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½æ‰€å½¢æˆçš„æ®µé¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€‚<br>å¦‚ï¼šIntel 80386å¤„ç†æœºä¾¿æ”¯æŒæ®µé¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€‚</p>
<h3 id="è™šæ‹Ÿå­˜å‚¨å™¨çš„ç‰¹å¾"><a href="#è™šæ‹Ÿå­˜å‚¨å™¨çš„ç‰¹å¾" class="headerlink" title="è™šæ‹Ÿå­˜å‚¨å™¨çš„ç‰¹å¾"></a>è™šæ‹Ÿå­˜å‚¨å™¨çš„ç‰¹å¾</h3><p>1ï¼å¤šæ¬¡æ€§<br>å¤šæ¬¡æ€§æ˜¯æŒ‡ä¸€ä¸ªä½œä¸šè¢«åˆ†æˆå¤šæ¬¡è°ƒå…¥å†…å­˜è¿è¡Œã€‚<br>2ï¼å¯¹æ¢æ€§<br>å¯¹æ¢æ€§æ˜¯æŒ‡ä½œä¸šçš„è¿è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œæ¢è¿›ã€æ¢å‡ºã€‚æ¢è¿›å’Œæ¢å‡ºèƒ½æœ‰æ•ˆåœ°æé«˜å†…å­˜åˆ©ç”¨ç‡ã€‚<br>3ï¼è™šæ‹Ÿæ€§<br>è™šæ‹Ÿæ€§æ˜¯æŒ‡èƒ½å¤Ÿä»é€»è¾‘ä¸Šæ‰©å……å†…å­˜å®¹é‡ï¼Œä½¿ç”¨æˆ·æ‰€çœ‹åˆ°çš„å†…å­˜å®¹é‡è¿œå¤§äºå®é™…å†…å­˜å®¹é‡ã€‚</p>
<p>è™šæ‹Ÿæ€§æ˜¯ä»¥å¤šæ¬¡æ€§å’Œå¯¹æ¢æ€§ä¸ºåŸºç¡€çš„ï¼›è€Œå¤šæ¬¡æ€§å’Œå¯¹æ¢æ€§åˆå¿…é¡»å»ºç«‹åœ¨ç¦»æ•£åˆ†é…çš„åŸºç¡€ä¸Šã€‚</p>
<p>è™šå­˜å®ç°çš„ç†è®ºä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿç¨‹åºæ‰§è¡Œçš„å±€éƒ¨æ€§åŸç†</p>
<p>å¦‚ä½•å°†ç¨‹åºåˆ’åˆ†æˆéƒ¨åˆ†ï¼Ÿåˆ†é¡µæˆ–åˆ†æ®µ</p>
<h2 id="è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼"><a href="#è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼" class="headerlink" title="è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼"></a>è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼</h2><p>è¯·æ±‚åˆ†é¡µæ˜¯å»ºç«‹åœ¨åˆ†é¡µåŸºç¡€ä¸Šçš„ï¼Œå¢åŠ äº†è¯·æ±‚è°ƒé¡µåŠŸèƒ½å’Œé¡µé¢ç½®æ¢åŠŸèƒ½ã€‚</p>
<h3 id="è¯·æ±‚åˆ†é¡µä¸­çš„ç¡¬ä»¶æ”¯æŒ"><a href="#è¯·æ±‚åˆ†é¡µä¸­çš„ç¡¬ä»¶æ”¯æŒ" class="headerlink" title="è¯·æ±‚åˆ†é¡µä¸­çš„ç¡¬ä»¶æ”¯æŒ"></a>è¯·æ±‚åˆ†é¡µä¸­çš„ç¡¬ä»¶æ”¯æŒ</h3><p>ã€€â‘  <strong>é¡µè¡¨æœºåˆ¶</strong>ï¼Œåœ¨è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰çš„é¡µè¡¨ï¼Œå…¶é¡µæè¿°å­æœ‰äº†æ–°çš„æ‰©å……ï¼Œè¿™æ˜¯è¿›è¡Œåœ°å€å˜æ¢æœºæ„æ‰€å¿…é¡»çš„ï¼Œå¢åŠ å››ä¸ªä¿¡æ¯æ ‡è¯†ä½ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_14-50-00.png"></p>
<blockquote>
<p>(1)çŠ¶æ€ä½(å­˜åœ¨ä½)Dï¼šç”¨äºè¯´æ˜è¯¥é¡µæ˜¯å¦å·²è°ƒå…¥å†…å­˜ï¼Œä¾›ç¨‹åºè®¿é—®æ—¶å‚è€ƒï¼›D&#x3D;0ï¼Œè¯¥é¡µä¸åœ¨å†…å­˜ã€‚D&#x3D;1ï¼Œè¯¥é¡µåœ¨å†…å­˜ã€‚<br>(2)è®¿é—®ä½Aï¼šç”¨äºè®°å½•æœ¬é¡µåœ¨ä¸€æ®µæ—¶é—´å†…è¢«è®¿é—®çš„æ¬¡æ•°ï¼Œæˆ–æœ€è¿‘å·²æœ‰å¤šé•¿æ—¶é—´æœªè¢«è®¿é—®ï¼Œæä¾›ç»™ç½®æ¢ç®—æ³•é€‰æ‹©æ¢å‡ºé¡µé¢æ—¶å‚è€ƒã€‚A&#x3D;0ï¼Œè¯¥é¡µæœªè¢«è®¿é—® ã€‚A&#x3D;1ï¼Œè¯¥é¡µè¢«è®¿é—®<br>(3)ä¿®æ”¹ä½Mï¼šç”¨äºè¡¨ç¤ºè¯¥é¡µåœ¨è°ƒå…¥å†…å­˜åæ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼Œä¹Ÿæ˜¯æä¾›ç»™ç½®æ¢ç®—æ³•åœ¨æ¢å‡ºé¡µé¢æ—¶æ˜¯å¦å°†è¯¥é¡µé¢å†™å›å¤–å­˜ä½œå‚è€ƒã€‚M&#x3D;0ï¼Œè¯¥é¡µåœ¨å†…å­˜ä¸­æœªè¢«ä¿®æ”¹ã€‚M&#x3D;1ï¼Œè¯¥é¡µåœ¨å†…å­˜ä¸­å·²ç»è¢«ä¿®æ”¹<br>(4)å¤–å­˜åœ°å€ï¼šç”¨äºæŒ‡å‡ºè¯¥é¡µåœ¨å¤–å­˜ä¸Šçš„åœ°å€ï¼Œä¾›è°ƒå…¥è¯¥é¡µæ—¶ä½¿ç”¨ã€‚</p>
</blockquote>
<p>ã€€â‘¡ <strong>ç¼ºé¡µä¸­æ–­æœºæ„</strong>ï¼Œå½“è¦è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªç¼ºé¡µä¸­æ–­ï¼Œè¯·æ±‚OSå°†ç¼ºçš„é¡µé¢è°ƒå…¥å†…å­˜ï¼Œç¼ºé¡µä½œä¸ºä¸­æ–­ï¼Œä¹Ÿéœ€è¦ç»è¿‡ä¿æŠ¤CPUç°åœºã€åˆ†æä¸­æ–­åŸå› ã€è½¬å…¥ä¸­æ–­å¤„ç†ç¨‹åºè¿›è¡Œå¤„ç†ã€æ¢å¤CPUç¯å¢ƒç­‰ã€‚ä½†æ˜¯ï¼Œå…¶ä¸ä¸€èˆ¬ä¸­æ–­ç›¸æ¯”æœ‰ä¸€äº›ä¸åŒï¼Œä¸»è¦åœ¨äºï¼šåœ¨æŒ‡ä»¤æ‰§è¡ŒæœŸé—´äº§ç”Ÿå’Œå¤„ç†ä¸­æ–­ä¿¡å·ï¼ˆé€šå¸¸CPUéƒ½æ˜¯åœ¨ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå®Œåï¼Œæ‰æ£€æŸ¥æ˜¯å¦æœ‰ä¸­æ–­è¯·æ±‚åˆ°è¾¾ï¼Œè‹¥æœ‰ï¼Œåˆ™å“åº”ï¼Œå¦åˆ™ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç„¶è€Œï¼Œç¼ºé¡µä¸­æ–­æ˜¯åœ¨æŒ‡ä»¤æ‰§è¡ŒæœŸé—´ï¼Œå‘ç°æ‰€è¦è®¿é—®çš„æŒ‡ä»¤æˆ–æ•°æ®ä¸å†å†…å­˜æ—¶æ‰€äº§ç”Ÿå’Œå¤„ç†çš„ï¼‰ï¼Œä¸€æ¡æŒ‡ä»¤åœ¨æ‰§è¡ŒæœŸé—´ï¼Œå¯èƒ½äº§ç”Ÿå¤šæ¬¡ç¼ºé¡µä¸­æ–­ã€‚</p>
<p>ã€€â‘¢ <strong>åœ°å€å˜æ¢æœºæ„</strong>ï¼Œåœ¨åˆ†é¡µç³»ç»Ÿåœ°å€å˜æ¢åŸºç¡€ä¸Šï¼Œå†ä¸ºå®ç°è™šæ‹Ÿå­˜å‚¨å™¨è€Œå¢åŠ çš„æŸäº›åŠŸèƒ½è€Œå½¢æˆã€‚å¦‚äº§ç”Ÿå’Œå¤„ç†ç¼ºé¡µä¸­æ–­ï¼Œä»¥åŠä»å†…å­˜ä¸­æ¢å‡ºä¸€é¡µåŠŸèƒ½ç­‰ã€‚</p>
<p><strong>ç¼ºé¡µä¸­æ–­å¤„ç†è¿‡ç¨‹</strong></p>
<p>ï¼ˆ1ï¼‰æ“ä½œç³»ç»Ÿæ¥æ”¶åˆ°è¿›ç¨‹äº§ç”Ÿçš„ç¼ºé¡µä¸­æ–­ä¿¡å·ï¼Œå¯åŠ¨ä¸­æ–­å¤„ç†ä¾‹ç¨‹ï¼Œä¿ç•™å¤„ç†æœºç°åœºï¼›<br>ï¼ˆ2ï¼‰æ“ä½œç³»ç»Ÿé€šçŸ¥å¤„ç†æœºä»å¤–å­˜è¯»å–æŒ‡å®šçš„é¡µé¢ï¼›<br>ï¼ˆ3ï¼‰å¤„ç†æœºæ¿€æ´»I&#x2F;Oè®¾å¤‡ï¼›<br>ï¼ˆ4ï¼‰ æ£€æŸ¥å†…å­˜æœ‰æ— è¶³å¤Ÿçš„ç©ºé—²ç©ºé—´è£…å…¥è¯¥é¡µé¢ï¼Ÿè‹¥æœ‰ï¼Œè½¬ï¼ˆ6ï¼‰ï¼Œå¦åˆ™ï¼Œæ‰§è¡Œï¼ˆ5ï¼‰ï¼›<br>ï¼ˆ5ï¼‰ åˆ©ç”¨é¡µé¢ç½®æ¢ç®—æ³•ï¼Œé€‰æ‹©å†…å­˜ä¸­çš„æŸä¸ªé¡µé¢ï¼Œæ¢å‡ºå†…å­˜ï¼›<br>ï¼ˆ6ï¼‰ å°†æŒ‡å®šé¡µé¢ä»å¤–å­˜è£…å…¥å†…å­˜ï¼›<br>ï¼ˆ7ï¼‰ æ›´æ–°è¯¥è¿›ç¨‹çš„é¡µè¡¨ï¼›<br>ï¼ˆ8ï¼‰ æ›´æ–°å¿«è¡¨ï¼›<br>ï¼ˆ9ï¼‰è®¡ç®—ç‰©ç†åœ°å€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_14-53-05.png"></p>
<h3 id="å†…å­˜åˆ†é…ç­–ç•¥å’Œåˆ†é…ç®—æ³•"><a href="#å†…å­˜åˆ†é…ç­–ç•¥å’Œåˆ†é…ç®—æ³•" class="headerlink" title="å†…å­˜åˆ†é…ç­–ç•¥å’Œåˆ†é…ç®—æ³•"></a>å†…å­˜åˆ†é…ç­–ç•¥å’Œåˆ†é…ç®—æ³•</h3><p><strong>æœ€å°ç‰©ç†å—æ•°</strong>ï¼šæ˜¯æŒ‡èƒ½ä¿è¯è¿›ç¨‹æ­£å¸¸è¿è¡Œæ‰€éœ€çš„æœ€å°‘ç‰©ç†å—æ•°ã€‚è‹¥ç³»ç»Ÿä¸ºæŸè¿›ç¨‹æ‰€åˆ†é…çš„ç‰©ç†å—æ•°å°‘äºæ­¤å€¼æ—¶ï¼Œè¿›ç¨‹å°†æ— æ³•è¿è¡Œã€‚</p>
<p>å¯¹äºæŸäº›ç®€å•çš„æœºå™¨ï¼Œè‹¥æ˜¯å•åœ°å€æŒ‡ä»¤ä¸”é‡‡ç”¨ç›´æ¥å¯»å€æ–¹å¼ï¼Œåˆ™æ‰€éœ€çš„æœ€å°‘ç‰©ç†å—æ•°ä¸º2ã€‚(åœ¨ç›´æ¥å¯»å€æ–¹å¼ä¸­ï¼ŒæŒ‡ä»¤ä¸­ç»™å‡ºçš„æ˜¯æ“ä½œæ•°çš„åœ°å€ã€‚å› æ­¤ï¼Œéœ€è¦è‡³å°‘ä¸¤ä¸ªç‰©ç†å—ï¼Œä¸€ä¸ªç”¨äºå­˜å‚¨æŒ‡ä»¤ï¼Œå¦ä¸€ä¸ªç”¨äºå­˜å‚¨æ“ä½œæ•°ã€‚)<br>å¦‚æœè¯¥æœºå™¨å…è®¸é—´æ¥å¯»å€æ—¶ï¼Œåˆ™è‡³å°‘è¦æ±‚æœ‰ç‰©ç†å—æ•°ä¸º3ã€‚(è¿™æ˜¯å› ä¸ºåœ¨é—´æ¥å¯»å€æ–¹å¼ä¸­ï¼ŒæŒ‡ä»¤ä¸­ç»™å‡ºçš„æ˜¯æ“ä½œæ•°åœ°å€çš„åœ°å€ã€‚å› æ­¤ï¼Œéœ€è¦è‡³å°‘ä¸‰ä¸ªç‰©ç†å—ï¼Œä¸€ä¸ªç”¨äºå­˜å‚¨æŒ‡ä»¤ï¼Œä¸€ä¸ªç”¨äºå­˜å‚¨æ“ä½œæ•°åœ°å€çš„åœ°å€ï¼Œå¦ä¸€ä¸ªç”¨äºå­˜å‚¨æ“ä½œæ•°)</p>
<h4 id="åˆ†é…ç­–ç•¥"><a href="#åˆ†é…ç­–ç•¥" class="headerlink" title="åˆ†é…ç­–ç•¥"></a>åˆ†é…ç­–ç•¥</h4><p>åœ¨è¯·æ±‚åˆ†é¡µç³»ç»Ÿä¸­ï¼Œå¯é‡‡å–ä¸¤ç§å†…å­˜åˆ†é…ç­–ç•¥ï¼Œå›ºå®šå’Œå¯å˜åˆ†é…ç­–ç•¥ï¼Œåœ¨è¿›è¡Œç½®æ¢æ—¶ï¼Œä¹Ÿå¯é‡‡ç”¨å…¨å±€ç½®æ¢å’Œå±€éƒ¨ç½®æ¢ï¼Œå¯ç»„åˆå‡ºå¦‚ä¸‹ä¸‰ç§é€‚ç”¨çš„ç­–ç•¥ã€‚</p>
<p><strong>å›ºå®šåˆ†é…å±€éƒ¨ç½®æ¢</strong>ï¼ˆä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†å—ï¼Œæ•´ä¸ªè¿è¡ŒæœŸä¸å†æ”¹å˜ï¼Œå¦‚æœè¿›ç¨‹åœ¨è¿è¡Œä¸­å‘ç°ç¼ºé¡µï¼Œåˆ™åªèƒ½ä»è¯¥è¿›ç¨‹åœ¨å†…å­˜çš„nä¸ªé¡µé¢ä¸­é€‰å‡ºä¸€é¡µæ¢å‡ºï¼Œç„¶åå†è°ƒå…¥ä¸€é¡µï¼Œä»¥ä¿è¯åˆ†é…ç»™è¯¥è¿›ç¨‹çš„å†…å­˜ç©ºé—´ä¸å˜ï¼Œè‹¥å¼€å§‹ä¸ºè¿›ç¨‹åˆ†é…çš„ç‰©ç†å—æ•°å¤ªå°‘ï¼Œåˆ™ä¼šé¢‘ç¹ç¼ºé¡µï¼Œé™ä½ç³»ç»Ÿååé‡ï¼Œè‹¥å¤ªå¤šï¼Œåˆ™ä½¿å†…å­˜ä¸­é©»ç•™çš„è¿›ç¨‹æ•°ç›®å‡å°‘ï¼Œè¿›è€Œé€ æˆCPUç©ºé—²æˆ–å…¶ä»–èµ„æºç©ºé—²çš„æƒ…å†µï¼‰</p>
<p><strong>å¯å˜åˆ†é…å…¨å±€ç½®æ¢</strong>ï¼ˆå…ˆä¸ºç³»ç»Ÿä¸­çš„æ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†å—ï¼Œè€ŒOSè‡ªèº«ä¹Ÿä¿æŒä¸€ä¸ª<strong>ç©ºé—²ç‰©ç†å—é˜Ÿåˆ—</strong>ï¼Œå½“æŸè¿›ç¨‹å‘ç°ç¼ºé¡µæ—¶ï¼Œç”±ç³»ç»Ÿä»ç©ºé—²ç‰©ç†å—é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªç‰©ç†å—åˆ†é…ç»™è¯¥è¿›ç¨‹ï¼Œå¹¶å°†æ¬²è°ƒå…¥çš„ç¼ºé¡µè£…å…¥å…¶ä¸­ï¼Œä»…å½“ç©ºé—²ç‰©ç†é˜Ÿåˆ—çš„ç‰©ç†å—ç”¨å®Œæ—¶ï¼ŒOSæ‰èƒ½ä»å†…å­˜ä¸­é€‰æ‹©ä¸€é¡µè°ƒå‡ºï¼Œè¯¥é¡µå¯èƒ½æ˜¯ç³»ç»Ÿä¸­ä»»ä¸€è¿›ç¨‹çš„é¡µï¼Œè¿™æ ·ï¼Œä¼šä½¿é‚£ä¸ªè¿›ç¨‹çš„ç‰©ç†å—å‡å°‘ï¼Œè¿›è€Œä½¿ç¼ºé¡µç‡å¢åŠ ï¼‰</p>
<p><strong>å¯å˜åˆ†é…å±€éƒ¨ç½®æ¢</strong>ï¼ˆä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†å—ï¼Œå½“è¿›ç¨‹ç¼ºé¡µæ—¶ï¼Œåªå…è®¸ä»è¯¥è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„é¡µé¢ä¸­é€‰å‡ºä¸€é¡µæ¢å‡ºï¼Œè¿™æ ·ä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹çš„è¿è¡Œï¼Œ<em>å¦‚æœè¯¥è¿›ç¨‹é¢‘ç¹å‘ç”Ÿç¼ºé¡µï¼Œåˆ™ç³»ç»Ÿéœ€è¦å†ä¸ºè¯¥è¿›ç¨‹åˆ†é…è‹¥å¹²é™„åŠ çš„ç‰©ç†å—ï¼Œç›´è‡³è¯¥è¿›ç¨‹çš„ç¼ºé¡µç‡å‡å°‘åˆ°é€‚å½“ç¨‹åº¦ä¸ºæ­¢</em>ï¼Œåä¹‹ï¼Œè‹¥ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨è¿è¡Œè¿‡ç¨‹ä¸­çš„ç¼ºé¡µç‡ç‰¹åˆ«ä½ï¼Œåˆ™æ­¤æ—¶å¯é€‚å½“å‡å°‘åˆ†é…ç»™è¯¥è¿›ç¨‹çš„ç‰©ç†å—æ•°ï¼Œä½†ä¸åº”è¯¥å¼•èµ·ç¼ºé¡µç‡æ˜æ˜¾å¢åŠ ï¼‰ã€‚</p>
<h4 id="åˆ†é…ç®—æ³•"><a href="#åˆ†é…ç®—æ³•" class="headerlink" title="åˆ†é…ç®—æ³•"></a>åˆ†é…ç®—æ³•</h4><p>å¯é‡‡ç”¨<strong>å¹³å‡åˆ†é…ç®—æ³•</strong>ï¼ˆå°†ç³»ç»Ÿä¸­æ‰€æœ‰å¯ä¾›åˆ†é…çš„ç‰©ç†å—å¹³å‡åˆ†é…ç»™å„ä¸ªè¿›ç¨‹ï¼‰ã€<strong>æŒ‰æ¯”ä¾‹åˆ†é…</strong>ï¼ˆæ ¹æ®è¿›ç¨‹çš„å¤§å°æŒ‰æ¯”ä¾‹åˆ†é…ç‰©ç†å—ï¼‰ã€<strong>è€ƒè™‘ä¼˜å…ˆæƒçš„åˆ†é…ç®—æ³•</strong>ï¼ˆå°†é‡è¦çš„ï¼Œç´§è¿«çš„ä½œä¸šåˆ†é…è¾ƒå¤šçš„å†…å­˜ç©ºé—´ï¼Œå¯å°†ç³»ç»Ÿçš„ç‰©ç†å—åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æŒ‰æ¯”ä¾‹åˆ†é…ç»™å„è¿›ç¨‹ï¼Œå¦ä¸€éƒ¨åˆ†åˆ™æ ¹æ®è¿›ç¨‹çš„ä¼˜å…ˆæƒé€‚å½“åœ°å¢åŠ ç›¸åº”ä»½é¢åï¼Œåˆ†é…ç»™è¿›ç¨‹ã€‚åœ¨æœ‰çš„ç³»ç»Ÿä¸­ï¼Œå¦‚é‡è¦çš„å®æ—¶æ§åˆ¶ç³»ç»Ÿï¼Œåˆ™å¯èƒ½æ˜¯å®Œå…¨æŒ‰ä¼˜å…ˆæƒæ¥ä¸ºå„è¿›ç¨‹åˆ†é…ç‰©ç†å—ã€‚ï¼‰</p>
<h3 id="è°ƒé¡µç­–ç•¥"><a href="#è°ƒé¡µç­–ç•¥" class="headerlink" title="è°ƒé¡µç­–ç•¥"></a>è°ƒé¡µç­–ç•¥</h3><p><em>ç³»ç»Ÿåº”å½“åœ¨ä½•æ—¶æŠŠä¸€ä¸ªé¡µé¢è£…å…¥å†…å­˜ï¼Ÿ</em></p>
<ul>
<li><p>é¢„è°ƒé¡µ (Prepaging)</p>
<p>å¯é‡‡ç”¨ä¸€ç§ä»¥é¢„æµ‹ä¸ºåŸºç¡€çš„é¢„è°ƒé¡µç­–ç•¥ï¼Œå°†é‚£äº›é¢„è®¡åœ¨ä¸ä¹…ä¹‹åä¾¿ä¼šè¢«è®¿é—®çš„é¡µé¢ï¼Œé¢„å…ˆè°ƒå…¥å†…å­˜ã€‚<br>å¤„ç†è¿‡ç¨‹ï¼š<br>å½“è¿›ç¨‹åˆ›å»ºæ—¶ï¼Œé¢„å…ˆä¸ºè¿›ç¨‹è£…å…¥å¤šä¸ªé¡µé¢ã€‚ç¼ºé¡µä¸­æ–­æ—¶ï¼Œç³»ç»Ÿä¸ºè¿›ç¨‹è£…å…¥æŒ‡å®šçš„é¡µé¢ä»¥åŠä¸ä¹‹ç›¸ä¸´çš„å¤šä¸ªé¡µé¢ã€‚<br>è‹¥å±€éƒ¨æ€§å¾ˆå·®ï¼Œé¢„å…ˆè£…å…¥çš„å¾ˆå¤šé¡µé¢ä¸ä¼šå¾ˆå¿«è¢«å¼•ç”¨ï¼Œå¹¶ä¼šå ç”¨å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œåè€Œé™ä½ç³»ç»Ÿçš„æ•ˆç‡ã€‚é¢„è°ƒé¡µçš„æˆåŠŸç‡ä»…çº¦50ï¼…ã€‚</p>
</li>
<li><p>è¯·æ±‚è°ƒé¡µ (Demand Paging)</p>
<p>ä»…å½“è¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡æ£€æŸ¥é¡µè¡¨å‘ç°ç›¸åº”<br>é¡µé¢ä¸åœ¨å†…å­˜æ—¶ï¼Œæ‰è£…å…¥è¯¥é¡µé¢ã€‚å½“è¿›ç¨‹åˆšå¼€å§‹æ‰§è¡Œæ—¶ï¼Œç”±äºé¢„å…ˆæœªè£…å…¥è¿›ç¨‹çš„<br>é¡µé¢ï¼Œæ•…éœ€è¦é¢‘ç¹åœ°ç”³è¯·è£…å…¥é¡µé¢ã€‚æ‰§è¡Œä¸€æ®µæ—¶<br>é—´ä»¥åï¼Œè¿›ç¨‹çš„ç¼ºé¡µç‡å°†ä¸‹é™ã€‚é‡‡ç”¨è¯·æ±‚è°ƒé¡µæ–¹å¼ï¼Œä¸€æ¬¡è£…å…¥è¯·æ±‚çš„ä¸€ä¸ªé¡µé¢ï¼Œ<br>ç£ç›˜I&#x2F;Oçš„å¯åŠ¨é¢‘ç‡è¾ƒé«˜ï¼Œç³»ç»Ÿçš„å¼€é”€è¾ƒå¤§ã€‚</p>
</li>
</ul>
<p><em>ä½•å¤„è°ƒå…¥é¡µé¢ï¼Ÿ</em></p>
<p>ï¼ˆ1ï¼‰å¯¹æ¢åŒºï¼šç³»ç»Ÿæ‹¥æœ‰è¶³å¤Ÿçš„å¯¹æ¢åŒºç©ºé—´ï¼Œè¿™æ—¶å¯ä»¥å…¨éƒ¨ä»å¯¹æ¢åŒºè°ƒå…¥æ‰€éœ€é¡µé¢ï¼Œä»¥æé«˜è°ƒé¡µçš„é€Ÿåº¦ã€‚<br>ï¼ˆ2ï¼‰æ–‡ä»¶åŒºã€å¯¹æ¢åŒºï¼šç³»ç»Ÿç¼ºå°‘è¶³å¤Ÿçš„å¯¹æ¢åŒºç©ºé—´ï¼Œè¿™æ—¶å‡¡æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„æ–‡ä»¶ï¼Œéƒ½ç›´æ¥ä»æ–‡ä»¶åŒºè°ƒå…¥ï¼›è€Œå½“æ¢å‡ºè¿™äº›é¡µé¢æ—¶ï¼Œç”±äºå®ƒä»¬æœªè¢«ä¿®æ”¹è€Œä¸å¿…å†å°†å®ƒä»¬æ¢å‡ºï¼Œä»¥åå†è°ƒå…¥æ—¶ï¼Œä»ä»<strong>æ–‡ä»¶åŒº</strong>ç›´æ¥è°ƒå…¥ã€‚ ä½†å¯¹äºé‚£äº›å¯èƒ½è¢«ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œåœ¨å°†å®ƒä»¬æ¢å‡ºæ—¶ï¼Œä¾¿é¡»è°ƒåˆ°<strong>å¯¹æ¢åŒº</strong>ï¼Œä»¥åéœ€è¦æ—¶ï¼Œå†ä»å¯¹æ¢åŒºè°ƒå…¥ã€‚<br>ï¼ˆ3ï¼‰UNIXæ–¹å¼ã€‚ç”±äºä¸è¿›ç¨‹æœ‰å…³çš„æ–‡ä»¶éƒ½æ”¾åœ¨æ–‡ä»¶åŒºï¼Œåº”ä»æ–‡ä»¶åŒºè°ƒå…¥ã€‚æ•…å‡¡æ˜¯æœªè¿è¡Œè¿‡çš„é¡µé¢ï¼Œéƒ½åº”ä»æ–‡ä»¶åŒºè°ƒå…¥ã€‚è€Œå¯¹äºæ›¾ç»è¿è¡Œè¿‡ä½†åˆè¢«æ¢å‡ºçš„é¡µé¢ï¼Œç”±äºæ˜¯è¢«æ”¾åœ¨å¯¹æ¢åŒºï¼Œå› æ­¤åœ¨ä¸‹æ¬¡è°ƒå…¥æ—¶ï¼Œåº”ä»å¯¹æ¢åŒºè°ƒå…¥ã€‚</p>
<p><em>é¡µé¢è°ƒå…¥è¿‡ç¨‹ï¼Ÿ</em></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_15-22-39.png"></p>
<p><em>ç¼ºé¡µç‡</em></p>
<p>å‡è®¾ï¼šé€»è¾‘ç©ºé—´ä¸ºné¡µï¼Œå†…å­˜ç‰©ç†å—æ•°ä¸ºm(m&lt;&#x3D;n)ï¼Œåœ¨è¿è¡ŒæœŸé—´è®¿é—®é¡µé¢æˆåŠŸSæ¬¡ï¼Œå¤±è´¥Fæ¬¡ï¼Œæ€»è®¿é—®æ¬¡æ•°ä¸ºA&#x3D;S+Fæ¬¡ï¼Œåˆ™ç¼ºé¡µç‡ä¸ºï¼šf&#x3D;F&#x2F;A</p>
<p>ç¼ºé¡µç‡çš„å½±å“å› ç´ ï¼š</p>
<blockquote>
<p>é¡µé¢å¤§å°<br>è¿›ç¨‹æ‰€åˆ†é…ç‰©ç†å—çš„æ•°ç›®<br>é¡µé¢ç½®æ¢ç®—æ³•<br>ç¨‹åºçš„å›ºæœ‰ç‰¹æ€§</p>
</blockquote>
<p>è¯·æ±‚åˆ†é¡µç®¡ç†è¿‡ç¨‹ä¸­ï¼Œä½œä¸šåœ°å€ç©ºé—´åŒæ ·å—åˆ°å†…å­˜å®¹é‡å¤§å°çš„é™åˆ¶ã€‚é”™è¯¯</p>
<p>ç³»ç»Ÿæ˜¯é€šè¿‡ ()ã€()å’Œ()æ¥å®ç°åŠ¨æ€åˆ†é¡µç®¡ç†çš„ï¼Œåˆ†åˆ«ç”¨ä»¥è§£å†³ä½•æ—¶æŠŠä½œä¸šéœ€è¦çš„ä¿¡æ¯æŒ‰()ä»å¤–å­˜è°ƒå…¥å†…å­˜ï¼›å†…å­˜ä¸­æ— ç©ºé—²é¡µæ¡†ï¼Œå¦‚ä½•å°†å·²å æ®çš„é¡µæ¡†é‡Šæ”¾ï¼›å®Œæˆè™šæ‹Ÿåœ°å€å˜æ¢ä¸ºå¯¹åº”çš„ç‰©ç†åœ°å€ã€‚(è°ƒå…¥ç­–ç•¥ï¼Œæ›¿æ¢ç­–ç•¥ï¼Œåœ°å€å˜æ¢ï¼Œä¸€å®šè§„åˆ™ï¼›)</p>
<p>å†…å­˜æ‰©å……çš„æ¦‚å¿µæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åœ¨ç‰©ç†ä¸Šè¿›è¡Œæ‰©å……ï¼Œä¸ºç³»ç»Ÿå¢é…æ›´å¤šçš„å­˜å‚¨èŠ¯ç‰‡ï¼Œä»¥æ‰©å¤§ ()ï¼›å¦ä¸€ç§æ˜¯åˆ©ç”¨ç›®å‰æœºå™¨ä¸­å®é™…å†…å­˜ç©ºé—´ï¼Œå€ŸåŠ©è½¯ä»¶æŠ€æœ¯ï¼Œå®ç°å†…å­˜æ‰©å……ï¼Œç§°ä¸º()ï¼Œä¸»è¦æŠ€æœ¯æœ‰()å’Œ()ä¸¤ç§ã€‚(ç‰©ç†ç©ºé—´ï¼Œè™šæ‹Ÿå†…å­˜ï¼Œè¯·æ±‚åˆ†é¡µç®¡ç†ï¼Œè¯·æ±‚åˆ†æ®µç®¡ç†ï¼›)</p>
<h3 id="é¡µé¢ç½®æ¢ç®—æ³•"><a href="#é¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="é¡µé¢ç½®æ¢ç®—æ³•"></a>é¡µé¢ç½®æ¢ç®—æ³•</h3><h4 id="æœ€ä½³ç½®æ¢ç®—æ³•-Optimal"><a href="#æœ€ä½³ç½®æ¢ç®—æ³•-Optimal" class="headerlink" title="æœ€ä½³ç½®æ¢ç®—æ³•(Optimal)"></a>æœ€ä½³ç½®æ¢ç®—æ³•(Optimal)</h4><p>æœ€ç†æƒ³çš„é¡µé¢ç½®æ¢ç­–ç•¥æ˜¯ï¼š<em><strong>ä»ä¸»å­˜ä¸­ç§»å‡ºæ°¸è¿œä¸å†éœ€è¦çš„é¡µé¢ï¼›å¦‚æ— è¿™æ ·çš„é¡µé¢å­˜åœ¨ï¼Œåˆ™åº”é€‰æ‹©æœ€é•¿æ—¶é—´ä¸éœ€è¦è®¿é—®çš„é¡µé¢</strong></em>ã€‚ æœ€ä½³ç½®æ¢ç®—æ³•æ˜¯ä¸€ç§ç†æƒ³åŒ–çš„ç®—æ³•ï¼Œå®ƒå…·æœ‰æœ€å¥½çš„æ€§èƒ½ï¼Œä½†å®é™…ä¸Šå´éš¾äºå®ç°ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_15-27-38.png"></p>
<h4 id="å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•-FIFO"><a href="#å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•-FIFO" class="headerlink" title="å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•(FIFO)"></a>å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•(FIFO)</h4><p>è¯¥ç®—æ³•çš„å®è´¨æ˜¯ï¼šæ€»æ˜¯é€‰æ‹©ä½œä¸šä¸­é©»ç•™æ—¶é—´æœ€é•¿(å³æœ€è€)çš„ä¸€é¡µæ·˜æ±°ã€‚å³ï¼šå…ˆè¿›å…¥ä¸»å­˜çš„é¡µé¢å…ˆé€€å‡ºä¸»å­˜ã€‚ç®—æ³•å®ç°æ¯”è¾ƒå®¹æ˜“ï¼Œå¦‚åˆ†é…ç»™ä¸€ä¸ªä½œä¸šçš„å­˜å‚¨å—æ•°ä¸ºmï¼Œåªéœ€å»ºç«‹ä¸€ä¸ªmä¸ªå…ƒç´ çš„é˜Ÿåˆ—è¡¨Q(0)ã€Q(1)ã€â€¦ã€Q(m-1)å’Œä¸€ä¸ªæ›¿æ¢æŒ‡é’ˆã€‚è¯¥é˜Ÿåˆ—æ˜¯æŒ‰é¡µé¢è°ƒå…¥ä¸»å­˜çš„å…ˆåé¡ºåºæ’åˆ—çš„ï¼Œè€Œ<strong>æŒ‡é’ˆå§‹ç»ˆæŒ‡å‘æœ€æ—©è°ƒå…¥ä¸»å­˜çš„ä¸€é¡µ</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_15-29-09.png"></p>
<p>1ã€è¯¥ç®—æ³•çš„å‡ºå‘ç‚¹æ˜¯æœ€æ—©è°ƒå…¥å†…å­˜çš„é¡µé¢ä¸å†è¢«è®¿é—®çš„å¯èƒ½æ€§ä¼šå¤§ä¸€äº›ã€‚<br>2ã€è¯¥ç®—æ³•å®ç°æ¯”è¾ƒç®€å•ï¼Œå¯¹å…·æœ‰çº¿æ€§é¡ºåºè®¿é—®çš„ç¨‹åºæ¯”è¾ƒåˆé€‚ï¼Œè€Œå¯¹å…¶ä»–æƒ…å†µæ•ˆç‡ä¸é«˜ã€‚å› ä¸ºç»å¸¸è¢«è®¿é—®çš„é¡µé¢ï¼Œå¾€å¾€åœ¨å†…å­˜ä¸­åœç•™æœ€ä¹…ï¼Œç»“æœè¿™äº›å¸¸ç”¨çš„é¡µé¢å´å› å˜è€è€Œè¢«æ·˜æ±°ã€‚</p>
<p>å…ˆè¿›å…ˆå‡ºç®—æ³•å­˜åœ¨ä¸€ç§å¼‚å¸¸ç°è±¡ï¼Œå³åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå‡ºç°åˆ†é…ç»™çš„è¿›ç¨‹ç‰©ç†å—æ•°å¢å¤šï¼Œç¼ºé¡µæ¬¡æ•°æœ‰æ—¶å¢åŠ ï¼Œæœ‰æ—¶å‡å°‘çš„å¥‡æ€ªç°è±¡ï¼Œè¿™ç§ç°è±¡ç§°ä¸º<strong>Belady</strong>ç°è±¡ã€‚ä¾‹å¦‚ï¼š</p>
<table>
<thead>
<tr>
<th>ç‰©ç†å—æ•°</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody><tr>
<td>ç¼ºé¡µæ¬¡æ•°</td>
<td>9</td>
<td>10</td>
<td>5</td>
</tr>
</tbody></table>
<h4 id="æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨-LRU-ç½®æ¢ç®—æ³•"><a href="#æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨-LRU-ç½®æ¢ç®—æ³•" class="headerlink" title="æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨(LRU)ç½®æ¢ç®—æ³•"></a>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨(LRU)ç½®æ¢ç®—æ³•</h4><p>è¿™ç§ç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œæ ¹æ®ä¸€ä¸ªä½œä¸šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¿‡å»çš„é¡µé¢è®¿é—®è¸ªè¿¹æ¥æ¨æµ‹æœªæ¥çš„è¡Œä¸ºã€‚å®ƒè®¤ä¸ºè¿‡å»ä¸€æ®µæ—¶é—´é‡Œä¸æ›¾è¢«è®¿é—®è¿‡çš„é¡µé¢ï¼Œåœ¨æœ€è¿‘çš„å°†æ¥å¯èƒ½ä¹Ÿä¸ä¼šå†è¢«è®¿é—®ã€‚<br>ç®—æ³•çš„å®è´¨æ˜¯ï¼šå½“éœ€è¦ç½®æ¢ä¸€é¡µé¢æ—¶ï¼Œé€‰æ‹©åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…æœ€ä¹…ä¸ç”¨çš„é¡µé¢äºˆä»¥æ·˜æ±°ã€‚<br>å®ç°è¿™ç§æŠ€æœ¯ï¼Œæ˜¯é€šè¿‡å‘¨æœŸæ€§åœ°å¯¹â€œé¡µé¢è®¿é—®â€ä½è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åˆ©ç”¨å®ƒæ¥è®°å½•ä¸€ä¸ªé¡µé¢è‡ªä¸Šæ¬¡è®¿é—®ä»¥æ¥æ‰€ç»å†çš„æ—¶é—´ t ï¼Œå¹¶é€‰æ‹© t ä¸ºæœ€å¤§çš„é¡µäºˆä»¥æ·˜æ±°ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_15-38-21.png"></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºä»»ä½•ä¸€ä¸ªé¡µçš„è®¿é—®é¡ºåº(æˆ–åºåˆ—)å’Œä»»ä½•ä¸€ç§æ¢é¡µç®—æ³•ï¼Œå¦‚æœåˆ†ç»™çš„ç‰©ç†å—æ•°å¢åŠ ï¼Œåˆ™ç¼ºé¡µ(æ‰€è®¿é—®é¡µä¸åœ¨ä¸»å­˜)çš„é¢‘ç‡åº”è¯¥å‡å°‘ã€‚ä½†è¿™ä¸ªç»“è®ºå¹¶ä¸æ™®éæˆç«‹ï¼Œå¯¹äºæŸäº›é¡µé¢è®¿é—®åºåˆ—ï¼ŒFIFOæœ‰éšç€åˆ†ç»™çš„é¡µæ¶æ•°å¢åŠ ï¼Œç¼ºé¡µé¢‘ç‡ä¹Ÿå¢åŠ çš„å¼‚å¸¸ç°è±¡ã€‚</p>
<p><strong>LRUç®—æ³•</strong>éœ€è¦ä»¥ä¸‹ä¸¤ç±»ç¡¬ä»¶çš„æ”¯æŒï¼š<br>1.å¯„å­˜å™¨ã€‚ç”¨äºè®°å½•æŸè¿›ç¨‹åœ¨å†…å­˜ä¸­å„é¡µä½¿ç”¨æƒ…å†µã€‚<br>2.æ ˆã€‚ç”¨äºä¿å­˜å½“å‰è¿›ç¨‹ä½¿ç”¨çš„å„ä¸ªé¡µé¢çš„é¡µé¢å·ã€‚</p>
<p>ï¼ˆ1ï¼‰ç§»ä½å¯„å­˜å™¨ï¼š<br>ä¸ºäº†è®°å½•æŸè¿›ç¨‹åœ¨å†…å­˜ä¸­å„é¡µçš„ä½¿ç”¨æƒ…å†µï¼Œé¡»ä¸ºæ¯ä¸ªåœ¨å†…å­˜ä¸­çš„é¡µé¢é…ç½®ä¸€ä¸ªç§»ä½å¯„å­˜å™¨å¯è¡¨ç¤ºä¸ºï¼š<br>R&#x3D;Rn-1Rn-2Rn-3Â·Â·Â·R2R1RO</p>
<ul>
<li>å½“è¿›ç¨‹è®¿é—®æŸç‰©ç†å—æ—¶ï¼Œè¦å°†ç›¸åº”å¯„å­˜å™¨çš„æœ€é«˜ä½Rn-1ä½ç½®<br>æˆ1ã€‚ç³»ç»Ÿæ¯éš”ä¸€å®šæ—¶é—´ï¼ˆä¾‹å¦‚100 msï¼‰å°†å¯„å­˜å™¨å³ç§»ä¸€ä½ã€‚</li>
<li>å¦‚æœæˆ‘ä»¬æŠŠnä½å¯„å­˜å™¨çš„æ•°çœ‹ä½œæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œé‚£ä¹ˆï¼Œå…·æœ‰æœ€<br>å°æ•°å€¼çš„å¯„å­˜å™¨æ‰€å¯¹åº”çš„é¡µé¢ï¼Œå°±æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ã€‚</li>
</ul>
<p>ä¾‹ï¼šæŸè¿›ç¨‹åœ¨å†…å­˜ä¸­å…·æœ‰8ä¸ªé¡µé¢<br>R&#x3D; R7 R6 R5 R4 R3 R2 R1 R0ï¼Œæ¯100mså°†å¯„å­˜å™¨å³ç§»ä¸€ä½ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_15-41-09.png"></p>
<p>(2) æ ˆã€‚æ¯å½“è¿›ç¨‹è®¿é—®æ—¶æŸé¡µé¢æ—¶ï¼Œä¾¿å°†è¯¥é¡µé¢å·ä»<strong>æ ˆä¸­ç§»å‡ºï¼Œå‹å…¥æ ˆé¡¶</strong>ã€‚è¿™æ ·æ ˆåº•åˆ™æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨é¡µé¢çš„é¡µé¢å·ã€‚ ä¾‹å¦‚:å‡å®šä¸€è¿›ç¨‹è®¿é—®æŸé¡µé¢çš„æ—¶é¡µé¢å·å¦‚ä¸‹(5ä¸ªå­˜å‚¨å—ï¼‰ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_15-41-21.png"></p>
<h4 id="æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•LFU"><a href="#æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•LFU" class="headerlink" title="æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•LFU"></a>æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•LFU</h4><p>æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•LFUï¼ˆLeast Frequently Used)é€‰æ‹©åˆ°å½“å‰æ—¶é—´ä¸ºæ­¢è¢«è®¿é—®æ¬¡æ•°æœ€å°‘çš„é¡µé¢è¢«ç½®æ¢ã€‚<br>1ã€åŸºæœ¬æ–¹æ³•ï¼š<br>è®°å½•æ¯ä¸ªé¡µé¢çš„è®¿é—®æ¬¡æ•°ï¼Œæœ€å°‘è®¿é—®çš„é¡µé¢é¦–å…ˆè€ƒè™‘æ·˜æ±°<br>2ã€å®é™…é‡‡å–æ–¹æ³•<br>ä¸ºé¡µé¢è®¾ç½®ç§»ä½å¯„å­˜å™¨ã€‚<br>ä¸LRUçš„åŒºåˆ«ï¼šR1&#x3D;10000000ï¼ŒR2&#x3D;01110100<br>LRUâ€”â€”â€”-æ·˜æ±°R2<br>LFUâ€”â€”â€”-æ·˜æ±°R1</p>
<h4 id="ç®€å•çš„Clockç½®æ¢ç®—æ³•ï¼ˆNRUï¼‰"><a href="#ç®€å•çš„Clockç½®æ¢ç®—æ³•ï¼ˆNRUï¼‰" class="headerlink" title="ç®€å•çš„Clockç½®æ¢ç®—æ³•ï¼ˆNRUï¼‰"></a>ç®€å•çš„Clockç½®æ¢ç®—æ³•ï¼ˆNRUï¼‰</h4><p>å½“é‡‡ç”¨ç®€å•clockç®—æ³•æ—¶ï¼Œä¸ºæ¯é¡µè®¾ç½®ä¸€ä½è®¿é—®ä½ï¼Œå†å°†å†…å­˜ä¸­çš„æ‰€æœ‰é¡µé¢éƒ½é€šè¿‡é“¾æ¥æŒ‡é’ˆé“¾æ¥æˆä¸€ä¸ªå¾ªç¯é˜Ÿåˆ—ã€‚<br>â¢å½“æŸé¡µè¢«è®¿é—®æ—¶ï¼Œå…¶è®¿é—®ä½è¢«ç½®1ã€‚<br>â¢ç½®æ¢ç¨‹åºä»<strong>ä¸Šæ¬¡åœæ­¢ä½ç½®</strong>å¼€å§‹æ£€æŸ¥é¡µé¢çš„è®¿é—®ä½ã€‚<br>â¢å¦‚æœæ˜¯0ï¼Œå°±é€‰æ‹©è¯¥é¡µæ¢å‡ºï¼›<br>â¢è‹¥ä¸º1ï¼Œåˆ™é‡æ–°å°†å®ƒç½®0ï¼Œæš‚ä¸æ¢å‡ºï¼Œè€Œç»™è¯¥é¡µç¬¬äºŒæ¬¡é©»ç•™å†…å­˜çš„æœºä¼šã€‚<br>â¢ç”±äºè¯¥ç®—æ³•æ˜¯å¾ªç¯åœ°æ£€æŸ¥å„é¡µé¢çš„ä½¿ç”¨æƒ…å†µï¼Œæ•…ç§°ä¸ºclockç®—æ³•ã€‚ç½®æ¢æ—¶æ˜¯å°†æœªä½¿ç”¨è¿‡çš„é¡µé¢æ¢å‡ºå»ï¼Œæ•…åˆæŠŠè¯¥ç®—æ³•ç§°ä¸ºæœ€è¿‘æœªç”¨ç®—æ³•NRUã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_15-42-14.png"></p>
<h4 id="æ”¹è¿›å‹Clockç½®æ¢ç®—æ³•"><a href="#æ”¹è¿›å‹Clockç½®æ¢ç®—æ³•" class="headerlink" title="æ”¹è¿›å‹Clockç½®æ¢ç®—æ³•"></a>æ”¹è¿›å‹Clockç½®æ¢ç®—æ³•</h4><p>ç³»ç»ŸæŠŠä¸€ä¸ªé¡µé¢ç§»å‡ºå†…å­˜æ—¶ï¼Œå¦‚æœè¯¥é¡µé¢é©»ç•™å†…å­˜æœŸé—´æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆä¸å¿…æŠŠå®ƒå†™å›è¾…å­˜ï¼Œå¦åˆ™ç³»ç»Ÿå¿…é¡»æŠŠå®ƒå†™å›è¾…å­˜ã€‚è¿™è¡¨æ˜ï¼Œæ¢å‡ºæœªä¿®æ”¹è¿‡çš„é¡µé¢æ¯”æ¢å‡ºè¢«ä¿®æ”¹è¿‡çš„é¡µé¢å¼€é”€å°ã€‚<br>â– æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¾æ®ä¸Šè¿°ç»“è®ºæ”¹è¿›CLOCKç®—æ³•ã€‚æ”¹è¿›åçš„CLOCKç®—æ³•å°†åœ¨ç½®æ¢èŒƒå›´å†…é¦–é€‰ï¼š<br>â– <em><strong>åœ¨æœ€è¿‘æ²¡æœ‰è¢«ä½¿ç”¨è¿‡</strong></em>ï¼›<br>â– <em><strong>åœ¨é©»ç•™å†…å­˜æœŸé—´æ²¡æœ‰è¢«ä¿®æ”¹è¿‡çš„é¡µé¢ä½œä¸ºè¢«ç½®æ¢é¡µé¢</strong></em>ã€‚<br>â¢ç”±è®¿é—®ä½Aå’Œä¿®æ”¹ä½Må¯ä»¥ç»„åˆæˆä¸‹é¢å››ç§ç±»å‹<br>çš„é¡µé¢ï¼š<br>â¢1ç±»ï¼ˆA&#x3D;0ï¼ŒM&#x3D;0ï¼‰ï¼šè¡¨ç¤ºè¯¥é¡µæœ€è¿‘æ—¢æœªå½¼è®¿é—®ï¼Œåˆæœªè¢«ä¿®æ”¹ï¼Œæ˜¯æœ€ä½³æ·˜æ±°é¡µã€‚<br>â¢2ç±»ï¼ˆA&#x3D;0ï¼ŒM&#x3D;1ï¼‰ï¼šè¡¨ç¤ºè¯¥é¡µæœ€è¿‘æœªè¢«è®¿é—®ï¼Œä½†å·²è¢«ä¿®æ”¹ï¼Œå¹¶ä¸æ˜¯å¾ˆå¥½çš„æ·˜æ±°é¡µã€‚<br>â¢3ç±»ï¼ˆA&#x3D;1ï¼ŒM&#x3D;0ï¼‰ï¼šæœ€è¿‘å·²è¢«è®¿é—®ï¼Œä½†æœªè¢«ä¿®æ”¹ï¼šè¯¥é¡µæœ‰å¯èƒ½å†è¢«è®¿é—®ã€‚<br>â¢4ç±»ï¼ˆA&#x3D;1ï¼ŒM&#x3D;1ï¼‰ï¼šæœ€è¿‘å·²è¢«è®¿é—®ä¸”è¢«ä¿®æ”¹ï¼Œè¯¥é¡µå¯èƒ½å†è¢«è®¿é—®ã€‚<br>æ‰§è¡Œè¿‡ç¨‹å¯åˆ†æˆä»¥ä¸‹ä¸‰æ­¥ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰ä»æŒ‡é’ˆæ‰€æŒ‡ç¤ºçš„å½“å‰ä½ç½®å¼€å§‹ï¼Œæ‰«æå¾ªç¯é˜Ÿåˆ—ï¼Œå¯»æ‰¾A&#x3D;0ä¸”M&#x3D;0çš„ç¬¬ä¸€ç±»é¡µé¢ï¼Œå°†æ‰€é‡åˆ°çš„ç¬¬ä¸€ä¸ªé¡µé¢ä½œä¸ºæ‰€é€‰ä¸­çš„æ·˜æ±°é¡µã€‚åœ¨ç¬¬ä¸€æ¬¡æ‰«ææœŸé—´ä¸æ”¹å˜è®¿é—®ä½Aã€‚<br>ï¼ˆ2ï¼‰å¦‚æœç¬¬ä¸€æ­¥å¤±è´¥ï¼Œå³æŸ¥æ‰¾ä¸€å‘¨åæœªé‡åˆ°<strong>ç¬¬ä¸€ç±»é¡µé¢</strong>ï¼Œåˆ™å¼€å§‹ç¬¬äºŒè½®æ‰«æï¼Œå¯»æ‰¾A&#x3D;0ä¸”Mï¼1çš„<strong>ç¬¬äºŒç±»é¡µé¢</strong>ï¼Œå°†æ‰€é‡åˆ°çš„ç¬¬ä¸€ä¸ªè¿™ç±»é¡µé¢ä½œä¸ºæ·˜æ±°é¡µã€‚<em><strong>åœ¨ç¬¬äºŒè½®æ‰«ææœŸé—´ï¼Œå°†æ‰€æœ‰æ‰«æè¿‡çš„é¡µé¢çš„è®¿é—®ä½Aéƒ½ç½®0</strong></em>ã€‚<br>ï¼ˆ3ï¼‰å¦‚æœç¬¬äºŒæ­¥ä¹Ÿå¤±è´¥ï¼Œäº¦å³æœªæ‰¾åˆ°ç¬¬äºŒç±»é¡µé¢ï¼Œåˆ™å°†æŒ‡é’ˆè¿”å›åˆ°å¼€å§‹çš„ä½ç½®ï¼Œå¹¶å°†æ‰€æœ‰çš„è®¿é—®ä½å¤0ã€‚ç„¶åé‡å¤ç¬¬ä¸€æ­¥ï¼Œå¦‚æœä»å¤±è´¥ï¼Œå¿…è¦æ—¶å†é‡å¤ç¬¬äºŒæ­¥ï¼Œæ­¤æ—¶ä¸€å®šèƒ½æ‰¾åˆ°è¢«æ·˜æ±°çš„é¡µ ã€‚</p>
</blockquote>
<h2 id="æŠ–åŠ¨ä¸å·¥ä½œé›†"><a href="#æŠ–åŠ¨ä¸å·¥ä½œé›†" class="headerlink" title="æŠ–åŠ¨ä¸å·¥ä½œé›†"></a>æŠ–åŠ¨ä¸å·¥ä½œé›†</h2><p>æœ‰æ•ˆè®¿é—®æ—¶é—´æ˜¯æŒ‡è®¿é—®å­˜å‚¨å™¨æ‰€éœ€æ—¶é—´çš„å¹³å‡å€¼ã€‚å‡è®¾ä½¿ç”¨äº†å¿«è¡¨ï¼Œåˆ™CPUè®¿é—®å†…å­˜æ—¶æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š<br>è®¾å†…å­˜è¯»å†™å‘¨æœŸä¸ºtï¼ŒæŸ¥æ‰¾å¿«è¡¨æ—¶é—´ä¸ºÎ»ï¼Œç¼ºé¡µä¸­æ–­å¤„ç†æ—¶é—´ä¸ºÉ›</p>
<ul>
<li>é¡µé¢åœ¨å†…å­˜ä¸”é¡µè¡¨é¡¹åœ¨å¿«è¡¨ä¸­ï¼šåªéœ€ä¸€æ¬¡è®¿é—®å†…å­˜<br>EAT&#x3D; Î» + t</li>
<li>é¡µé¢åœ¨å†…å­˜ä½†é¡µè¡¨é¡¹ä¸åœ¨å¿«è¡¨ä¸­ï¼šéœ€ä¸¤æ¬¡è®¿é—®å†…å­˜ï¼Œä¸€æ¬¡è¯»å–é¡µ<br>è¡¨ï¼Œä¸€æ¬¡è¯»å–æ•°æ®ï¼Œå¦å¤–è¿˜éœ€æ›´æ–°å¿«è¡¨ã€‚<br>EAT&#x3D; Î» + t + t + Î»&#x3D;2(Î» + t)</li>
<li>é¡µé¢ä¸åœ¨å†…å­˜ï¼šè€ƒè™‘æŸ¥æ‰¾å¿«è¡¨æ—¶é—´ã€æŸ¥æ‰¾é¡µè¡¨æ—¶é—´ã€ç¼ºé¡µä¸­æ–­å¤„<br>ç†æ—¶é—´ã€æ›´æ–°å¿«è¡¨æ—¶é—´ã€è®¿é—®å®é™…ç‰©ç†åœ°å€æ—¶é—´<br>EAT&#x3D; Î» + t +É› + Î» + t &#x3D; É› + 2(Î» + t)<br>å¼•å…¥å¿«è¡¨å‘½ä¸­ç‡ä¸ºÎ±ï¼Œç¼ºé¡µä¸­æ–­ç‡ä¸ºfï¼Œåˆ™æœ‰æ•ˆè®¿é—®å†…å­˜<br>æ—¶é—´ä¸ºï¼š<br>EAT&#x3D; Î» + Î± t + (1- Î±)[t + f(t +É› +Î») + (1-f)(t+Î»)]</li>
</ul>
<p>å½“è¿›ç¨‹è¦æ±‚è£…å…¥æ–°çš„é¡µé¢æˆ–ç¨‹åºæ®µæ—¶ï¼Œå¦‚æœå½“å‰æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—²ç©ºé—´ï¼Œéœ€è¦äº¤æ¢ä¸€äº›é¡µé¢æˆ–æ®µåˆ°å¤–å­˜ã€‚å¦‚æœè¢«äº¤æ¢å‡ºå»çš„é¡µé¢æˆ–æ®µå¾ˆå¿«å°†è¢«è¿›ç¨‹ä½¿ç”¨ï¼Œåˆ™<br>åˆéœ€è¦å°†å…¶æ¢å…¥å†…å­˜ã€‚<br>å¦‚æœç³»ç»ŸèŠ±è´¹å¤§é‡çš„æ—¶é—´æŠŠç¨‹åºå’Œæ•°æ®é¢‘ç¹åœ°æ¢å…¥å’Œæ¢å‡ºå†…å­˜è€Œä¸æ˜¯æ‰§è¡Œç”¨æˆ·æŒ‡ä»¤ï¼Œé‚£ä¹ˆï¼Œç§°ç³»ç»Ÿå‡ºç°äº†<strong>æŠ–åŠ¨</strong>ã€‚å‡ºç°æŠ–åŠ¨ç°è±¡æ—¶ï¼Œç³»ç»Ÿæ˜¾å¾—éå¸¸ç¹å¿™ï¼Œä½†æ˜¯ååé‡å¾ˆä½ï¼Œç”šè‡³äº§å‡ºä¸ºé›¶ã€‚<br>æ ¹æœ¬åŸå› ï¼šé€‰æ‹©çš„é¡µé¢æˆ–æ®µä¸æ°å½“ã€‚æ˜¾ç„¶ï¼Œé˜²æ­¢çš„æ ¹æœ¬æ‰‹æ®µç»™è¿›ç¨‹åˆ†é…è¶³å¤Ÿå¤šçš„å¸§ã€‚</p>
<p><strong>æŠ–åŠ¨</strong>ï¼šå¦‚æœè¿è¡Œè¿›ç¨‹çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½ç”¨äºé¡µé¢çš„æ¢å…¥&#x2F;æ¢å‡ºï¼Œè€Œå‡ ä¹ä¸èƒ½å®Œæˆä»»ä½•æœ‰æ•ˆçš„å·¥ä½œï¼Œåˆ™ç§°æ­¤è¿›ç¨‹å¤„äºæŠ–åŠ¨çŠ¶æ€ã€‚æŠ–åŠ¨åˆç§°ä¸ºé¢ ç°¸ã€‚<br>æŠ–åŠ¨åˆ†ä¸ºï¼š</p>
<ul>
<li><p>å±€éƒ¨æŠ–åŠ¨</p>
</li>
<li><p>å…¨å±€æŠ–åŠ¨</p>
</li>
</ul>
<p>æŠ–åŠ¨äº§ç”Ÿçš„åŸå› æœ‰ï¼š</p>
<blockquote>
<p>è¿›ç¨‹åˆ†é…çš„ç‰©ç†å—å¤ªå°‘<br>ç½®æ¢ç®—æ³•é€‰æ‹©ä¸å½“<br>å…¨å±€ç½®æ¢ä½¿æŠ–åŠ¨ä¼ æ’­</p>
</blockquote>
<p>åªè¦åˆ†é…çš„å¸§ç©ºé—´èƒ½è¦†ç›–æ•´ä¸ªå±€éƒ¨å°±ä¸ä¼šå‡ºç°å¤ªå¤šçš„ç¼ºé¡µ!å·¥ä½œé›†æ¨¡å‹å°±ç”¨æ¥è®¡ç®—ä¸€ä¸ªå±€éƒ¨çš„å®½åº¦(å¸§æ•°)ã€‚</p>
<p>å·¥ä½œé›†å®šä¹‰ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_16-08-44.png"></p>
<h2 id="è¯·æ±‚åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼"><a href="#è¯·æ±‚åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼" class="headerlink" title="è¯·æ±‚åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼"></a>è¯·æ±‚åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼</h2><p>ä¸€ã€<strong>æ®µè¡¨æœºåˆ¶</strong><br>åœ¨è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ®µè¡¨ï¼Œå…¶æ®µæè¿°å­å¢åŠ äº”ä¸ªä¿¡æ¯æ ‡è¯†ä½ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_16-09-13.png"></p>
<p>(1)çŠ¶æ€ä½(å­˜åœ¨ä½)Pï¼šç”¨äºè¯´æ˜è¯¥æ®µæ˜¯å¦å·²è°ƒå…¥å†…å­˜ï¼Œä¾›ç¨‹åºè®¿é—®æ—¶å‚è€ƒï¼›<br>P&#x3D;0ï¼Œè¯¥æ®µä¸åœ¨å†…å­˜ã€‚P&#x3D;1ï¼Œè¯¥æ®µåœ¨å†…å­˜<br>(2)è®¿é—®ä½Aï¼šç”¨äºè®°å½•æœ¬æ®µåœ¨ä¸€æ®µæ—¶é—´å†…è¢«è®¿é—®çš„æ¬¡æ•°ï¼Œæä¾›ç»™ç½®æ¢ç®—æ³•é€‰æ‹©æ¢å‡ºæ®µæ—¶å‚è€ƒã€‚A&#x3D;0ï¼Œè¯¥æ®µæœªè¢«è®¿é—®ã€‚ A&#x3D;1ï¼Œè¯¥æ®µè¢«è®¿é—®<br>(3)ä¿®æ”¹ä½Mï¼šç”¨äºè¡¨ç¤ºè¯¥æ®µåœ¨è°ƒå…¥å†…å­˜åæ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼Œä¹Ÿæ˜¯æä¾›ç»™ç½®æ¢ç®—æ³•åœ¨æ¢å‡ºæ®µæ—¶æ˜¯å¦å°†è¯¥æ®µå†™å›å¤–å­˜ä½œå‚è€ƒã€‚M&#x3D;0ï¼Œè¯¥æ®µåœ¨å†…å­˜ä¸­æœªè¢«ä¿®æ”¹ã€‚M&#x3D;1ï¼Œè¯¥æ®µåœ¨å†…å­˜ä¸­å·²ç»è¢«ä¿®æ”¹<br>(4)å¤–å­˜åœ°å€ï¼šç”¨äºæŒ‡å‡ºè¯¥æ®µåœ¨å¤–å­˜ä¸Šçš„åœ°å€ï¼Œä¾›è°ƒå…¥è¯¥æ®µæ—¶ä½¿ç”¨ã€‚<br>(5)å¢è¡¥ä½ï¼šè¯´æ˜è¯¥åˆ†æ®µæ˜¯å¦å…è®¸æ‰©å±•ï¼Œæ­¤å¤–å¦‚è¯¥æ®µå·²è¢«å¢è¡¥ï¼Œåˆ™åœ¨å†™å›è¾…å­˜æ—¶ï¼Œéœ€å¦é€‰æ‹©è¾…å­˜ç©ºé—´ï¼›</p>
<p> äºŒã€<strong>ç¼ºé¡µä¸­æ–­æœºæ„</strong>ï¼Œè¿›ç¨‹è¿è¡Œæ—¶å‘ç°æ‰€éœ€çš„æ®µå°šæœªè°ƒå…¥å†…å­˜ï¼Œä¾¿ç”±ç¼ºæ®µä¸­æ–­æœºæ„äº§ç”Ÿä¸€ä¸ªç¼ºæ®µä¸­æ–­ä¿¡å·ï¼Œè¿›å…¥OSåç”±ç¼ºæ®µä¸­æ–­å¤„ç†ç¨‹åºå°†æ‰€éœ€è¦çš„æ®µè°ƒå…¥å†…å­˜ã€‚éœ€è¦åœ¨ä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡ŒæœŸé—´ï¼Œäº§ç”Ÿå’Œå¤„ç†ä¸­æ–­ï¼Œä»¥åŠä¸€æ¡æŒ‡ä»¤æ‰§è¡ŒæœŸé—´ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¤šæ¬¡ç¼ºæ®µä¸­æ–­ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_16-10-24.png"></p>
<p>ä¸‰ã€<strong>åœ°å€å˜æ¢æœºæ„</strong>ï¼Œå…¶åœ¨åˆ†æ®µç³»ç»Ÿåœ°å€å˜æ¢æœºæ„åŸºç¡€ä¸Šå½¢æˆï¼Œå¢åŠ äº†ç¼ºæ®µä¸­æ–­çš„è¯·æ±‚å’Œå¤„ç†åŠŸèƒ½ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_16-10-35.png"></p>
<p>ä¸ºäº†å®ç°åˆ†æ®µå…±äº«ï¼Œå¯åœ¨ç³»ç»Ÿä¸­é…ç½®ä¸€å¼ å…±äº«æ®µè¡¨ï¼Œæ‰€æœ‰å…±äº«æ®µéƒ½åœ¨å…±äº«æ®µè¡¨<br>ä¸­å æœ‰ä¸€ä¸ªè¡¨é¡¹ã€‚</p>
<p>å…±äº«è¿›ç¨‹è®¡æ•°ï¼šè®°å½•æœ‰å¤šå°‘è¿›ç¨‹å…±äº«è¯¥æ®µã€‚<br>å­˜å–æ§åˆ¶å­—æ®µï¼šå¯¹åŒä¸€å…±äº«æ®µï¼Œä¸åŒè¿›ç¨‹æœ‰ä¸åŒçš„æ“ä½œæƒé™ã€‚<br>æ®µå·ï¼šå…±äº«æ®µåœ¨ä¸åŒè¿›ç¨‹ä¸­æœ‰ä¸åŒçš„æ®µå·ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_16-10-50.png"></p>
<p>å…±äº«æ®µçš„åˆ†é…ä¸å›æ”¶</p>
<ul>
<li><p>å…±äº«æ®µçš„åˆ†é…<br>åœ¨ä¸ºå…±äº«æ®µåˆ†é…å†…å­˜æ—¶ï¼Œå¯¹ç¬¬ä¸€ä¸ªè¯·æ±‚ä½¿ç”¨è¯¥å…±äº«æ®µçš„è¿›ç¨‹ï¼Œç”±ç³»ç»Ÿä¸ºè¯¥å…±äº«æ®µåˆ†é…ä¸€ç‰©ç†åŒºï¼Œå†æŠŠå…±äº«æ®µè°ƒå…¥è¯¥åŒºï¼ŒåŒæ—¶å°†è¯¥åŒºçš„å§‹å€å¡«å…¥è¯·æ±‚è¿›ç¨‹çš„æ®µè¡¨çš„ç›¸åº”é¡¹ä¸­ï¼Œè¿˜é¡»åœ¨å…±äº«æ®µè¡¨ä¸­å¢åŠ ä¸€è¡¨é¡¹ï¼Œå¡«å†™æœ‰å…³æ•°æ®ï¼ŒæŠŠcountç½®ä¸º1ï¼›ä¹‹åï¼Œå½“åˆæœ‰å…¶å®ƒè¿›ç¨‹éœ€è¦è°ƒç”¨è¯¥å…±äº«æ®µæ—¶ï¼Œç”±äºè¯¥å…±äº«æ®µå·²è¢«è°ƒå…¥å†…å­˜ï¼Œæ•…æ­¤æ—¶æ— é¡»å†ä¸ºè¯¥æ®µåˆ†é…å†…å­˜ï¼Œè€Œåªéœ€åœ¨è°ƒç”¨è¿›ç¨‹çš„æ®µè¡¨ä¸­ï¼Œå¢åŠ ä¸€è¡¨é¡¹ï¼Œå¡«å†™è¯¥å…±äº«æ®µçš„ç‰©ç†åœ°å€ï¼›åœ¨å…±<br>äº«æ®µè¡¨ä¸­ï¼Œå¡«ä¸Šè°ƒç”¨è¿›ç¨‹çš„è¿›ç¨‹åã€å­˜å–æ§åˆ¶ç­‰ï¼Œå†æ‰§è¡Œcountï¼šï¼countï¼‹1æ“ä½œï¼Œä»¥è¡¨æ˜æœ‰ä¸¤ä¸ªè¿›ç¨‹å…±äº«è¯¥æ®µã€‚</p>
</li>
<li><p>å…±äº«æ®µçš„å›æ”¶<br>å½“å…±äº«æ­¤æ®µçš„æŸè¿›ç¨‹ä¸å†éœ€è¦è¯¥æ®µæ—¶ï¼Œåº”å°†è¯¥æ®µé‡Šæ”¾ï¼ŒåŒ…æ‹¬æ’¤æ¶ˆè¯¥è¿›ç¨‹æ®µè¡¨ä¸­å…±äº«æ®µæ‰€å¯¹åº”çš„è¡¨é¡¹ï¼Œä»¥åŠæ‰§è¡Œcount:&#x3D;count-1æ“ä½œã€‚è‹¥countç»“æœä¸º0ï¼Œåˆ™é¡»ç”±ç³»ç»Ÿå›æ”¶è¯¥å…±äº«æ®µçš„ç‰©ç†å†…å­˜ï¼Œä»¥åŠå–æ¶ˆåœ¨å…±äº«æ®µè¡¨ä¸­è¯¥æ®µæ‰€å¯¹åº”çš„è¡¨é¡¹ï¼Œè¡¨æ˜æ­¤æ—¶å·²æ²¡æœ‰è¿›ç¨‹ä½¿ç”¨è¯¥æ®µï¼›å¦åˆ™(å‡1ç»“æœä¸ä¸º0)ï¼Œ åˆ™åªæ˜¯å–æ¶ˆè°ƒç”¨è€…è¿›ç¨‹åœ¨å…±äº«æ®µè¡¨ä¸­çš„æœ‰å…³è®°å½•ã€‚</p>
</li>
</ul>
<p><em><strong>ç¯ä¿æŠ¤</strong></em></p>
<p>ä½ç¼–å·çš„ç¯å…·æœ‰é«˜ä¼˜å…ˆæƒã€‚OSæ ¸å¿ƒå¤„äº0ç¯å†…ï¼›æŸäº›é‡è¦çš„å®ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»ŸæœåŠ¡ï¼Œå å±…ä¸­é—´ç¯ï¼›è€Œä¸€èˆ¬çš„åº”ç”¨ç¨‹åºåœ¨å¤–ç¯ä¸Šã€‚</p>
<p>ç¯ä¿æŠ¤çš„åŸºæœ¬åŸåˆ™æ˜¯ï¼š</p>
<ul>
<li>ä¸€ä¸ªç¨‹åºå¯ä»¥è®¿é—®é©»ç•™åœ¨ç›¸åŒç¯æˆ–è¾ƒä½ç‰¹æƒç¯ä¸­çš„<br>æ•°æ®ï¼›</li>
<li>ä¸€ä¸ªç¨‹åºå¯ä»¥è°ƒç”¨é©»ç•™åœ¨ç›¸åŒç¯æˆ–è¾ƒé«˜ç‰¹æƒç¯ä¸­çš„<br>æœåŠ¡ã€‚</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_16-11-18.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-14_16-11-39.png"></p>
<p>åœ¨è™šæ‹Ÿæ®µå¼å­˜å‚¨ç®¡ç†ä¸­ï¼Œè‹¥é€»è¾‘åœ°å€çš„æ®µå†…åœ°å€å¤§äºæ®µè¡¨ä¸­è¯¥æ®µçš„æ®µé•¿ï¼Œåˆ™å‘ç”Ÿ(è¶Šç•Œä¸­æ–­)   ã€‚</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»ŸæœŸæœ«å¤ä¹ ä¹‹å¤„ç†æœºè°ƒåº¦ä¸æ­»é”</title>
    <url>/2023/06/16/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/6/</url>
    <content><![CDATA[<h1 id="å¤„ç†æœºè°ƒåº¦ä¸æ­»é”"><a href="#å¤„ç†æœºè°ƒåº¦ä¸æ­»é”" class="headerlink" title="å¤„ç†æœºè°ƒåº¦ä¸æ­»é”"></a>å¤„ç†æœºè°ƒåº¦ä¸æ­»é”</h1><p>å¤„ç†æœºæ˜¯ç³»ç»Ÿæœ€é‡è¦çš„èµ„æºï¼Œæé«˜å¤„ç†æœºçš„åˆ©ç”¨ç‡å’Œæ”¹å–„ç³»ç»Ÿæ€§èƒ½ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå¤„ç†æœºè°ƒåº¦æ€§èƒ½çš„å¥½åã€‚</p>
<h2 id="è°ƒåº¦çš„å±‚æ¬¡"><a href="#è°ƒåº¦çš„å±‚æ¬¡" class="headerlink" title="è°ƒåº¦çš„å±‚æ¬¡"></a>è°ƒåº¦çš„å±‚æ¬¡</h2><p>1ï¼‰é«˜çº§è°ƒåº¦ï¼ˆä½œä¸šè°ƒåº¦ï¼Œé•¿ç¨‹è°ƒåº¦ï¼‰<br>2ï¼‰ä½çº§è°ƒåº¦ï¼ˆè¿›ç¨‹è°ƒåº¦ï¼ŒçŸ­ç¨‹è°ƒåº¦ï¼‰<br>3ï¼‰ä¸­çº§è°ƒåº¦ï¼ˆäº¤æ¢è°ƒåº¦ï¼Œ ä¸­ç¨‹è°ƒåº¦ï¼‰</p>
<p>1ã€é«˜çº§è°ƒåº¦<br>â–ªè°ƒåº¦å¯¹è±¡ï¼šä½œä¸š<br>â–ªåˆç§°ä½œä¸šè°ƒåº¦ã€é•¿ç¨‹è°ƒåº¦ã€æ¥çº³è°ƒåº¦<br>â–ªå®ç°ï¼šä½œä¸šç®¡ç†ç¨‹åº<br>â–ªå°†<strong>å¤–å­˜ä½œä¸šè°ƒå…¥å†…å­˜</strong>ï¼Œåˆ›å»ºPCBç­‰ï¼Œæ’å…¥å°±ç»ªé˜Ÿåˆ—ã€‚<br>â–ªç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿï¼Œåˆ†&#x2F;å®æ—¶ç³»ç»Ÿä¸€èˆ¬ç›´æ¥å…¥å†…å­˜ï¼Œæ— æ­¤ç¯èŠ‚ã€‚<br>â–ªé¢‘åº¦ï¼šæœ€ä½ï¼Œåˆ†é’Ÿçº§</p>
<p>2ã€ä½çº§è°ƒåº¦<br>â–ªåˆç§°è¿›ç¨‹è°ƒåº¦æˆ–çŸ­ç¨‹è°ƒåº¦<br>â–ªå¯¹è±¡ï¼šå°±ç»ªè¿›ç¨‹ï¼ˆæˆ–å†…æ ¸çº¿ç¨‹ï¼‰<br>â–ªåŠŸèƒ½ï¼šå†³å®šå°±ç»ªé˜Ÿåˆ—ä¸­çš„å“ªä¸ªè¿›ç¨‹åº”è·å¾—å¤„ç†æœºï¼Œå¹¶å°†å¤„ç†æœºåˆ†é…ç»™é€‰ä¸­çš„è¿›ç¨‹ã€‚<br>â–ªå®ç°è€… ï¼šåˆ†æ´¾ç¨‹åºï¼ˆdispatcher)<br>â–ªåº”ç”¨èŒƒå›´ï¼šéƒ½æœ‰<br>â–ªé¢‘åº¦ï¼šæœ€é¢‘ç¹ï¼Œæ¯«ç§’çº§</p>
<p> å¼•èµ·è¿›ç¨‹è°ƒåº¦çš„å› ç´ å¯å½’ç»“ä¸ºè¿™æ ·å‡ ä¸ªï¼š<br>â‘ æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–å› å‘ç”ŸæŸäº‹ä»¶è€Œä¸èƒ½å†ç»§ç»­æ‰§è¡Œï¼›<br>â‘¡æ‰§è¡Œä¸­çš„è¿›ç¨‹å› æå‡ºI&#x2F;Oè¯·æ±‚è€Œæš‚åœæ‰§è¡Œï¼›<br>â‘¢åœ¨è¿›ç¨‹é€šä¿¡æˆ–åŒæ­¥è¿‡ç¨‹ä¸­æ‰§è¡Œäº†æŸç§åŸè¯­æ“ä½œï¼Œå¦‚Pæ“ä½œï¼ˆwaitæ“ä½œï¼‰ã€BlockåŸè¯­ã€ WakeupåŸè¯­ç­‰ã€‚</p>
<p>3.ä¸­çº§è°ƒåº¦<br>â–ªåˆç§°å†…å­˜è°ƒåº¦ã€ä¸­ç¨‹è°ƒåº¦<br>â–ªå¯¹è±¡ï¼šæŒ‚èµ·çš„è¿›ç¨‹<br>â–ªåŠŸèƒ½ï¼šæŠŠå¤–å­˜ä¸Šé‚£äº›å·²ç»å…·å¤‡è¿è¡Œæ¡ä»¶çš„å°±ç»ªè¿›ç¨‹é‡æ–°è½½å…¥å†…å­˜ã€‚ä»é™æ­¢å°±ç»ªåˆ°æ´»åŠ¨å°±ç»ªã€‚<br>â–ªå®ç°ï¼šå†…å­˜ç®¡ç†ä¸­çš„å¯¹æ¢è¿›ç¨‹<br>â–ªåº”ç”¨èŒƒå›´ï¼šå…·æœ‰å¯¹æ¢åŠŸèƒ½çš„æ“ä½œç³»ç»Ÿ<br>â–ªé¢‘åº¦ï¼šä¸­ç­‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_19-10-49.png"></p>
<h2 id="è°ƒåº¦ç®—æ³•çš„å‡†åˆ™"><a href="#è°ƒåº¦ç®—æ³•çš„å‡†åˆ™" class="headerlink" title="è°ƒåº¦ç®—æ³•çš„å‡†åˆ™"></a>è°ƒåº¦ç®—æ³•çš„å‡†åˆ™</h2><p><em><strong>é¢å‘ç”¨æˆ·çš„å‡†åˆ™</strong></em></p>
<p>ã€€â‘  å‘¨è½¬æ—¶é—´çŸ­ï¼Œå‘¨è½¬æ—¶é—´æ˜¯æŒ‡ä»ä½œä¸šè¢«æäº¤ç»™ç³»ç»Ÿå¼€å§‹ï¼Œåˆ°ä½œä¸šå®Œæˆä¸ºæ­¢è¿™æ®µæ—¶é—´é—´éš”ï¼Œå®ƒåŒ…æ‹¬å››éƒ¨åˆ†ï¼šä½œä¸šåœ¨å¤–å­˜åå¤‡é˜Ÿåˆ—ä¸Šç­‰å¾…è°ƒåº¦çš„æ—¶é—´ï¼Œè¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸Šç­‰å¾…è¿›ç¨‹è°ƒåº¦çš„æ—¶é—´ï¼Œè¿›ç¨‹åœ¨CPUä¸Šæ‰§è¡Œçš„æ—¶é—´ï¼Œè¿›ç¨‹ç­‰å¾…I&#x2F;Oæ“ä½œå®Œæˆçš„æ—¶é—´ã€‚</p>
<p>ã€€â‘¡ å“åº”æ—¶é—´å¿«ï¼Œä»ç”¨æˆ·é€šè¿‡é”®ç›˜æäº¤ä¸€ä¸ªè¯·æ±‚å¼€å§‹ï¼Œç›´åˆ°å±å¹•ä¸Šæ˜¾ç¤ºå‡ºå¤„ç†ç»“æœä¸ºæ­¢çš„ä¸€æ®µæ—¶é—´é—´éš”ã€‚åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šè¾“å…¥æ—¶é—´ã€å¤„ç†æ—¶é—´ã€æ˜¾ç¤ºæ—¶é—´ã€‚</p>
<p>ã€€â‘¢ æˆªæ­¢æ—¶é—´çš„ä¿è¯ï¼ŒæŸä»»åŠ¡å¿…é¡»å¼€å§‹æ‰§è¡Œçš„æœ€è¿Ÿæ—¶é—´ï¼Œæˆ–å¿…é¡»å®Œæˆçš„æœ€è¿Ÿæ—¶é—´ã€‚</p>
<p>ã€€â‘£ ä¼˜å…ˆæƒå‡†åˆ™ï¼Œè®©æŸäº›ç´§æ€¥çš„ä½œä¸šèƒ½å¤Ÿå¾—åˆ°åŠæ—¶å¤„ç†ã€‚</p>
<p><em><strong>é¢å‘ç³»ç»Ÿçš„å‡†åˆ™</strong></em></p>
<p>ã€€â‘  ç³»ç»Ÿååé‡é«˜ï¼ŒæŒ‡åœ¨å•ä½æ—¶é—´å†…ç³»ç»Ÿæ‰€å®Œæˆçš„ä½œä¸šæ•°ã€‚</p>
<p>ã€€â‘¡ å¤„ç†æœºåˆ©ç”¨ç‡å¥½</p>
<p>ã€€â‘¢ å„ç±»èµ„æºçš„å¹³è¡¡åˆ©ç”¨</p>
<p><em><strong>æœ€ä¼˜å‡†åˆ™</strong></em></p>
<p>â–æœ€å¤§çš„CPUåˆ©ç”¨ç‡<br>â–æœ€å¤§çš„ååé‡<br>â–æœ€çŸ­çš„å‘¨è½¬æ—¶é—´<br>â–æœ€çŸ­çš„ç­‰å¾…æ—¶é—´<br>â–æœ€çŸ­çš„å“åº”æ—¶é—´</p>
<p>CPUåˆ©ç”¨ç‡ &#x3D; CPUçš„æœ‰æ•ˆå·¥ä½œæ—¶é—´ &#x2F; ï¼ˆCPUæœ‰æ•ˆå·¥ä½œæ—¶é—´ + CPUç©ºé—²ç­‰å¾…æ—¶é—´ï¼‰</p>
<p>å¹³å‡å‘¨è½¬æ—¶é—´ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_19-14-39.png"></p>
<p>å¸¦æƒå‘¨è½¬æ—¶é—´ï¼šä½œä¸šçš„å‘¨è½¬æ—¶é—´Tä¸ç³»ç»Ÿä¸ºå®ƒæä¾›æœåŠ¡çš„æ—¶é—´Tsä¹‹æ¯”ã€‚ W &#x3D; T&#x2F;Ts<br>â–ªå¸¦æƒå‘¨è½¬æ—¶é—´æ ‡æ˜äº†ä½œä¸šé¢å¤–ç­‰å¾…å’Œä½œä¸šæ‰§è¡Œæ—¶é—´ä¹‹é—´çš„æ¯”ä¾‹ã€‚<br>â–ªå¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´ï¼šååº”è°ƒåº¦ç®—æ³•çš„å¥½åã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_19-25-56.png"></p>
<h2 id="è°ƒåº¦ç®—æ³•"><a href="#è°ƒåº¦ç®—æ³•" class="headerlink" title="è°ƒåº¦ç®—æ³•"></a>è°ƒåº¦ç®—æ³•</h2><h3 id="å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•"><a href="#å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•" class="headerlink" title="å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•"></a>å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•</h3><p>å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼ˆFirst Come FirstServiceï¼ŒFCFS)ï¼šæŒ‰ç…§ä½œä¸šæäº¤æˆ–è¿›ç¨‹å˜ä¸ºå°±ç»ªçŠ¶æ€çš„å…ˆåæ¬¡åºï¼Œåˆ†æ´¾CPUï¼›å½“å‰ä½œä¸šæˆ–è¿›ç¨‹å ç”¨CPUï¼Œç›´åˆ°æ‰§è¡Œå®Œæˆ–é˜»å¡ï¼Œæ‰ä¸»åŠ¨åœ°å‡ºè®©CPUã€‚ FCFSç®—æ³•æ¯”è¾ƒæœ‰åˆ©äºé•¿ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ï¼Œè€Œä¸åˆ©äºçŸ­ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ã€‚ FCFSè°ƒåº¦ç®—æ³•æœ‰åˆ©äºCPUç¹å¿™å‹çš„ä½œä¸šï¼Œè€Œä¸åˆ©äºI&#x2F;Oç¹å¿™å‹çš„ä½œä¸šã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_19-37-49.png"></p>
<p>å¯è§çŸ­ä½œä¸šçš„å¸¦æƒå‘¨è½¬æ—¶é—´æ˜æ˜¾é«˜äºé•¿ä½œä¸šã€‚</p>
<h3 id="çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ç®—æ³•"><a href="#çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ç®—æ³•" class="headerlink" title="çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ç®—æ³•"></a>çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ç®—æ³•</h3><p>çŸ­ä½œä¸š(è¿›ç¨‹)ä¼˜å…ˆè°ƒåº¦ç®—æ³•SJ(P)Fï¼Œæ˜¯æŒ‡å¯¹çŸ­ä½œä¸šæˆ–çŸ­è¿›ç¨‹ä¼˜å…ˆè°ƒåº¦çš„ç®—æ³•ã€‚å®ƒä»¬å¯ä»¥åˆ†åˆ«ç”¨äºä½œä¸šè°ƒåº¦å’Œè¿›ç¨‹è°ƒåº¦ã€‚<br>â¢çŸ­ä½œä¸šä¼˜å…ˆ(SJF)çš„è°ƒåº¦ç®—æ³•ï¼Œæ˜¯ä»åå¤‡é˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–è‹¥å¹²ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„ä½œä¸šï¼Œå°†å®ƒä»¬è°ƒå…¥å†…å­˜è¿è¡Œã€‚<br>â¢çŸ­è¿›ç¨‹ä¼˜å…ˆ(SPF)è°ƒåº¦ç®—æ³•ï¼Œåˆ™æ˜¯ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å®ƒï¼Œä½¿å®ƒç«‹å³æ‰§è¡Œå¹¶ä¸€ç›´æ‰§è¡Œåˆ°å®Œæˆï¼Œæˆ–å‘ç”ŸæŸäº‹ä»¶è€Œè¢«é˜»å¡æ”¾å¼ƒå¤„ç†æœºæ—¶ï¼Œå†é‡æ–°è°ƒåº¦ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_19-40-34.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_19-41-38.png"></p>
<h3 id="ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•"><a href="#ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•" class="headerlink" title="ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•"></a>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•</h3><p>Priority-scheduling algorithm, PSAï¼Œå¤–éƒ¨èµ‹äºˆä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ç›¸åº”çš„ä¼˜å…ˆçº§ï¼Œä¾‹å¦‚ä»¥ä½œ<br>ä¸šçš„ç´§è¿«ç¨‹åº¦ä½œä¸ºä¼˜å…ˆçº§ã€‚é€‰æ‹©ä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹æŠ•å…¥è¿è¡Œã€‚å³å¯ç”¨äºä½œä¸šè°ƒåº¦ç®—æ³•ï¼Œä¹Ÿå¯ç”¨äºè¿›ç¨‹è°ƒåº¦ã€‚åˆ†ä¸ºéæŠ¢å å¼ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•å’ŒæŠ¢å å¼ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ã€‚</p>
<p>ä¾‹é¢˜ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/20210420203522284.png"></p>
<p>éæŠ¢å å¼ï¼š</p>
<blockquote>
<p>0æ—¶åˆ»(P1):åªæœ‰P1åˆ°è¾¾ï¼ŒP1ä¸Šå¤„ç†æœºã€‚</p>
<p>7æ—¶åˆ»(P2ã€P3ï¼ŒP4):P1è¿è¡Œå®Œæˆä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºï¼Œå…¶ä½™è¿›ç¨‹éƒ½å·²åˆ°è¾¾ï¼ŒP3ä¼˜å…ˆçº§æœ€é«˜ï¼ŒP3ä¸Šå¤„ç†æœºã€‚</p>
<p>8æ—¶åˆ»(P2ã€P4):P3å®Œæˆï¼ŒP2P4ä¼˜å…ˆçº§ç›¸åŒï¼Œç”±äºP2å…ˆåˆ°è¾¾ï¼Œå› æ­¤P2ä¼˜å…ˆä¸Šå¤„ç†æœºã€‚</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/20210420203821701.png"></p>
<p>æŠ¢å å¼ï¼š</p>
<blockquote>
<p>0æ—¶åˆ»(P1):åªæœ‰P1åˆ°è¾¾ï¼ŒP1ä¸Šå¤„ç†æœºã€‚</p>
<p>2æ—¶åˆ»(P2):P2åˆ°è¾¾å°±ç»ªé˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§æ¯”P1æ›´é«˜ï¼Œå‘ç”ŸæŠ¢å ã€‚P1å›åˆ°å°±ç»ªé˜Ÿåˆ—ï¼ŒP2ä¸Šå¤„ç†æœºã€‚</p>
<p>4æ—¶åˆ»(P1ã€P3):P3åˆ°è¾¾ï¼Œä¼˜å…ˆçº§æ¯”P2æ›´é«˜ï¼ŒP2å›åˆ°å°±ç»ªé˜Ÿåˆ—ï¼ŒP3æŠ¢å å¤„ç†æœºã€‚</p>
<p>5æ—¶åˆ»(P1ã€P2ã€P4):P3å®Œæˆï¼Œä¸»åŠ¨é‡Šæ”¾å¤„ç†æœºï¼ŒåŒæ—¶ï¼ŒP4ä¹Ÿåˆ°è¾¾ï¼Œç”±äºP2æ¯”P4æ›´å…ˆè¿›å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œå› æ­¤é€‰æ‹©P2ä¸Šå¤„ç†æœº</p>
<p>7æ—¶åˆ»(P1P4):P2å®Œæˆï¼Œå°±ç»ªé˜Ÿåˆ—åªå‰©P1ã€P4ï¼ŒP4ä¸Šå¤„ç†æœºã€‚11æ—¶åˆ»(P1):P4å®Œæˆï¼ŒP1ä¸Šå¤„ç†æœº</p>
<p>16æ—¶åˆ»():P1å®Œæˆï¼Œæ‰€æœ‰è¿›ç¨‹å‡å®Œæˆã€‚</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/20210420204141551.png"></p>
<h3 id="é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•"><a href="#é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•" class="headerlink" title="é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•"></a>é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•</h3><p>Highest Response Ratio Nextï¼Œ HRRNï¼Œèµ‹äºˆä½œä¸šåŠ¨æ€ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§éšä½œä¸šç­‰å¾…æ—¶é—´å»¶é•¿è€Œå¢åŠ ï¼Œä»è€Œä½¿é•¿ä½œä¸šçš„ä¼˜å…ˆçº§åœ¨ç­‰å¾…æœŸé—´ä¸æ–­å¢åŠ ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_19-41-38.png"></p>
<p>ä¼˜å…ˆçº§ç›¸å½“äºå“åº”æ¯”Rpã€‚</p>
<p>å¦‚æœä½œä¸šçš„ç­‰å¾…æ—¶é—´ç›¸åŒï¼Œåˆ™è¦æ±‚æœåŠ¡çš„æ—¶é—´æ„ˆçŸ­ï¼Œå…¶ä¼˜å…ˆæƒæ„ˆé«˜ï¼Œå› è€Œè¯¥ç®—æ³•æœ‰åˆ©äºçŸ­ä½œä¸šã€‚å½“è¦æ±‚æœåŠ¡çš„æ—¶é—´ç›¸åŒæ—¶ï¼Œä½œä¸šçš„ä¼˜å…ˆæƒå†³å®šäºå…¶ç­‰å¾…æ—¶é—´ï¼Œç­‰å¾…æ—¶é—´æ„ˆé•¿ï¼Œå…¶ä¼˜å…ˆæƒæ„ˆé«˜ï¼Œå› è€Œå®ƒå®ç°çš„æ˜¯å…ˆæ¥å…ˆæœåŠ¡ã€‚å¯¹äºé•¿ä½œä¸šï¼Œä½œä¸šçš„ä¼˜å…ˆçº§å¯ä»¥éšç­‰å¾…æ—¶é—´çš„å¢åŠ è€Œæé«˜ï¼Œ ä»è€Œä¹Ÿå¯è·å¾—å¤„ç†æœºã€‚ç®€è¨€ä¹‹ï¼Œè¯¥ç®—æ³•æ—¢ç…§é¡¾äº†çŸ­ä½œä¸šï¼Œåˆè€ƒè™‘äº†ä½œä¸šåˆ°è¾¾çš„å…ˆåæ¬¡åºï¼Œä¸ä¼šä½¿é•¿ä½œä¸šé•¿æœŸå¾—ä¸åˆ°æœåŠ¡ã€‚</p>
<table>
<thead>
<tr>
<th>ä½œä¸š</th>
<th>åˆ°è¾¾æ—¶é—´</th>
<th>æœåŠ¡æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>0</td>
<td>6</td>
</tr>
<tr>
<td>B</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>C</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>D</td>
<td>4</td>
<td>1</td>
</tr>
</tbody></table>
<p>ï¼ˆ1ï¼‰å…ˆæ‰§è¡ŒAä½œä¸š</p>
<table>
<thead>
<tr>
<th>ä½œä¸š</th>
<th>åˆ°è¾¾æ—¶é—´</th>
<th>æœåŠ¡æ—¶é—´</th>
<th>å¼€å§‹æ—¶é—´</th>
<th>ç»“æŸæ—¶é—´</th>
<th>å‘¨è½¬æ—¶é—´</th>
<th>å¸¦æƒå‘¨è½¬æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>0</td>
<td>6</td>
<td>0</td>
<td>6</td>
<td>6</td>
<td>1</td>
</tr>
<tr>
<td>B</td>
<td>3</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>D</td>
<td>4</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ï¼ˆ2ï¼‰æ ¹æ®å“åº”æ¯”ï¼Œæ‰§è¡ŒDä½œä¸š</p>
<p>ç­‰å¾…æ—¶é—´ &#x3D; ä¸Šä¸€ä¸ªä½œä¸šè°ƒå…¥å®Œæˆæ—¶é—´ - è¯¥ä½œä¸šåˆ°è¾¾çš„æ—¶é—´</p>
<p>å“åº”æ¯”é«˜çš„å…ˆæ‰§è¡Œ</p>
<p>Rï¼ˆBï¼‰ &#x3D; 1 + ï¼ˆ6 - 3ï¼‰&#x2F; 2 &#x3D; 2.5<br>Rï¼ˆCï¼‰ &#x3D; 1 + ï¼ˆ6 - 4ï¼‰&#x2F; 4 &#x3D; 1.5<br>Rï¼ˆDï¼‰&#x3D; 1 + ï¼ˆ6 - 4ï¼‰ &#x2F; 1 &#x3D; 3</p>
<table>
<thead>
<tr>
<th>ä½œä¸š</th>
<th>åˆ°è¾¾æ—¶é—´</th>
<th>æœåŠ¡æ—¶é—´</th>
<th>å¼€å§‹æ—¶é—´</th>
<th>ç»“æŸæ—¶é—´</th>
<th>å‘¨è½¬æ—¶é—´</th>
<th>å¸¦æƒå‘¨è½¬æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>0</td>
<td>6</td>
<td>0</td>
<td>6</td>
<td>6</td>
<td>1</td>
</tr>
<tr>
<td>B</td>
<td>3</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>D</td>
<td>4</td>
<td>1</td>
<td>6</td>
<td>7</td>
<td>3</td>
<td>3</td>
</tr>
</tbody></table>
<p>ï¼ˆ3ï¼‰æ ¹æ®å“åº”æ¯”ï¼Œæ‰§è¡ŒBä½œä¸š<br>Rï¼ˆBï¼‰ &#x3D; 1 + ï¼ˆ7 - 3ï¼‰&#x2F; 2 &#x3D; 3<br>Rï¼ˆCï¼‰ &#x3D; 1 + ï¼ˆ7 - 4ï¼‰&#x2F; 4 &#x3D; 1.75</p>
<table>
<thead>
<tr>
<th>ä½œä¸š</th>
<th>åˆ°è¾¾æ—¶é—´</th>
<th>æœåŠ¡æ—¶é—´</th>
<th>å¼€å§‹æ—¶é—´</th>
<th>ç»“æŸæ—¶é—´</th>
<th>å‘¨è½¬æ—¶é—´</th>
<th>å¸¦æƒå‘¨è½¬æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>0</td>
<td>6</td>
<td>0</td>
<td>6</td>
<td>6</td>
<td>1</td>
</tr>
<tr>
<td>B</td>
<td>3</td>
<td>2</td>
<td>7</td>
<td>10</td>
<td>7</td>
<td>3.5</td>
</tr>
<tr>
<td>C</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>D</td>
<td>4</td>
<td>1</td>
<td>6</td>
<td>7</td>
<td>3</td>
<td>3</td>
</tr>
</tbody></table>
<p>ï¼ˆ4ï¼‰æœ€åæ‰§è¡ŒCä½œä¸š</p>
<table>
<thead>
<tr>
<th>ä½œä¸š</th>
<th>åˆ°è¾¾æ—¶é—´</th>
<th>æœåŠ¡æ—¶é—´</th>
<th>å¼€å§‹æ—¶é—´</th>
<th>ç»“æŸæ—¶é—´</th>
<th>å‘¨è½¬æ—¶é—´</th>
<th>å¸¦æƒå‘¨è½¬æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>0</td>
<td>6</td>
<td>0</td>
<td>6</td>
<td>6</td>
<td>1</td>
</tr>
<tr>
<td>B</td>
<td>3</td>
<td>2</td>
<td>7</td>
<td>10</td>
<td>7</td>
<td>3.5</td>
</tr>
<tr>
<td>C</td>
<td>4</td>
<td>4</td>
<td>10</td>
<td>14</td>
<td>10</td>
<td>2.5</td>
</tr>
<tr>
<td>D</td>
<td>4</td>
<td>1</td>
<td>6</td>
<td>7</td>
<td>3</td>
<td>3</td>
</tr>
</tbody></table>
<h3 id="æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•"><a href="#æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•" class="headerlink" title="æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•"></a>æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•</h3><p>RRï¼Œç³»ç»Ÿå°†æ‰€æœ‰çš„å°±ç»ªè¿›ç¨‹æŒ‰å…ˆæ¥å…ˆæœåŠ¡çš„åŸåˆ™æ’æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¯æ¬¡è°ƒåº¦æ—¶ï¼ŒæŠŠCPUåˆ†é…ç»™é˜Ÿé¦–è¿›ç¨‹ï¼Œå¹¶ä»¤å…¶æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œå½“æ‰§è¡Œçš„æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼Œç”±ä¸€ä¸ªè®¡æ—¶å™¨å‘å‡ºæ—¶é’Ÿä¸­æ–­è¯·æ±‚ï¼Œè°ƒåº¦ç¨‹åºä¾¿æ®æ­¤ä¿¡æ¯æ¥åœæ­¢è¯¥è¿›ç¨‹çš„æ‰§è¡Œï¼Œå°†å®ƒé€åˆ°<strong>å°±ç»ªé˜Ÿåˆ—æœ«å°¾</strong>ï¼Œç„¶åï¼Œå†æŠŠå¤„ç†æœºåˆ†é…ç»™å°±ç»ª<strong>é˜Ÿåˆ—ä¸­å¿ƒçš„é˜Ÿé¦–</strong>è¿›ç¨‹ï¼ŒåŒæ—¶ä¹Ÿè®©å®ƒæ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯å°±ç»ªé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰è¿›ç¨‹åœ¨ä¸€ä¸ªç»™å®šçš„æ—¶é—´å†…å‡èƒ½è·å¾—ä¸€ä¸ªæ—¶é—´ç‰‡çš„å¤„ç†æœºæ‰§è¡Œæ—¶é—´ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_20-17-31.png"></p>
<h3 id="å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•"><a href="#å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•" class="headerlink" title="å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•"></a>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•</h3><p>ï¼ˆ1ï¼‰è®¾ç½®å¤šä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œå¹¶ä¸ºå„ä¸ªé˜Ÿåˆ—èµ‹äºˆä¸åŒçš„ä¼˜å…ˆçº§ã€‚ ç¬¬ä¸€ä¸ªæœ€é«˜ï¼Œä»¥åä¾æ¬¡é™ä½ã€‚<br>ï¼ˆ2ï¼‰æ¯ä¸ªé˜Ÿåˆ—ä¸­è¿›ç¨‹æ‰§è¡Œæ—¶é—´ç‰‡çš„å¤§å°ä¹Ÿå„ä¸ç›¸åŒï¼Œè¿›ç¨‹æ‰€åœ¨é˜Ÿåˆ—çš„ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå…¶ç›¸åº”çš„æ—¶é—´ç‰‡å°±è¶ŠçŸ­ã€‚</p>
<p>ï¼ˆ3ï¼‰å½“ä¸€ä¸ªæ–°è¿›ç¨‹è¿›å…¥å†…å­˜åï¼Œé¦–å…ˆå°†å®ƒæ”¾å…¥ç¬¬ä¸€é˜Ÿåˆ—çš„<strong>æœ«å°¾</strong>ï¼ŒæŒ‰FCFSåŸåˆ™æ’é˜Ÿç­‰å¾…è°ƒåº¦ã€‚å½“è½®åˆ°è¯¥è¿›ç¨‹æ‰§è¡Œæ—¶ï¼Œå¦‚å®ƒèƒ½åœ¨è¯¥æ—¶é—´ç‰‡å†…å®Œæˆï¼Œä¾¿å¯å‡†å¤‡æ’¤ç¦»ç³»ç»Ÿï¼›å¦‚æœå®ƒåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡ç»“æŸæ—¶å°šæœªå®Œæˆï¼Œè°ƒåº¦ç¨‹åºä¾¿å°†è¯¥è¿›ç¨‹è½¬å…¥ç¬¬äºŒé˜Ÿåˆ—çš„<strong>æœ«å°¾</strong>ï¼Œå†åŒæ ·åœ°æŒ‰FCFSåŸåˆ™ç­‰å¾…è°ƒåº¦æ‰§è¡Œï¼›å¦‚æœå®ƒåœ¨ç¬¬äºŒé˜Ÿåˆ—ä¸­è¿è¡Œä¸€ä¸ªæ—¶é—´ç‰‡åä»æœªå®Œæˆï¼Œå†ä¾æ¬¡å°†å®ƒæ”¾å…¥ç¬¬ä¸‰é˜Ÿåˆ—ï¼Œâ€¦â€¦ã€‚</p>
<p>ï¼ˆ4ï¼‰<strong>ä»…å½“ç¬¬ä¸€é˜Ÿåˆ—ç©ºé—²æ—¶ï¼Œè°ƒåº¦ç¨‹åºæ‰è°ƒåº¦ç¬¬äºŒé˜Ÿåˆ—ä¸­çš„è¿›ç¨‹è¿è¡Œ</strong>ã€‚</p>
<p>æœªæ‰§è¡Œå®Œæ—¶é—´ç‰‡çš„è¿›ç¨‹è¢«æŠ¢å åå¦‚ä½•å¤„ç†ï¼Ÿ<br>ç­”ï¼šä¸é™çº§ï¼Œåˆ°é˜Ÿåˆ—æœ«å°¾ï¼Œä¸”ä¸‹ä¸€æ¬¡è¿è¡Œæ—¶ä»ç„¶æ˜¯ä¸€ä¸ªå®Œæ•´æ—¶é—´ç‰‡ï¼ˆè¯¥é˜Ÿåˆ—å¯¹åº”çš„ï¼‰</p>
<p>æ³¨æ„ï¼šç»Ÿä¸€ä¸ºæŠ¢å å¼ã€‚é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­æœ‰è¿›ç¨‹è¿›å…¥æ—¶ï¼Œä¼šæŠ¢å ä½ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­è¿›ç¨‹çš„CPUã€‚è¢«æŠ¢å çš„è¿›ç¨‹ä¸é™çº§ï¼Œå›åˆ°åŸçº§é˜Ÿåˆ—ä¸­ï¼Œä¸‹æ¬¡ä»ç„¶æ‰§è¡Œè¯¥çº§é˜Ÿåˆ—çš„æ—¶é—´ç‰‡ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_20-18-14.png"></p>
<p>ä¾‹é¢˜ï¼šå‡è®¾ä¸€ä¸ªå¤šçº§åé¦ˆé˜Ÿåˆ—çš„å®ç°å…±æœ‰4çº§ï¼Œå„ä¸ªé˜Ÿåˆ—çš„æ—¶é—´ç‰‡é•¿åº¦æ˜¯1ã€2ã€4ã€6ç§’ï¼Œå·²çŸ¥å½“å‰ä»…åœ¨ç¬¬ä¸€çº§é˜Ÿåˆ—ä¸Šæœ‰ä¸€ä¸ªæ‰§è¡Œæ—¶é•¿ä¸º10ç§’çš„è¿›ç¨‹ï¼Œåœ¨ä¸¤ç§’åå°†æœ‰ä¸€ä¸ªæ‰§è¡Œæ—¶é•¿ä¸º8ç§’çš„ä»»åŠ¡Aåˆ°è¾¾ï¼Œè¯·ç®—å‡ºä»»åŠ¡Açš„å‘¨è½¬æ—¶é—´ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_20-19-50.png"></p>
<p>Aä»»åŠ¡ç»“æŸæ—¶é—´ä¸º18ç§’ã€‚Aä»»åŠ¡çš„å‘¨è½¬æ—¶é—´ä¸º16ç§’ã€‚</p>
<h2 id="æ­»é”çš„æ¦‚å¿µã€åŸå› "><a href="#æ­»é”çš„æ¦‚å¿µã€åŸå› " class="headerlink" title="æ­»é”çš„æ¦‚å¿µã€åŸå› "></a>æ­»é”çš„æ¦‚å¿µã€åŸå› </h2><p>æ‰€è°“æ­»é”ï¼ˆDeadlockï¼‰ï¼Œæ˜¯æŒ‡<strong>å¤šä¸ªè¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§åƒµå±€</strong>ï¼ˆDeadlyEmbraceï¼‰ï¼Œå½“è¿›ç¨‹å¤„äºè¿™ç§åƒµæŒçŠ¶æ€æ—¶ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•å†å‘å‰æ¨è¿›ã€‚</p>
<p><strong>å¯é‡ç”¨èµ„æº</strong>æ˜¯ä¸€ç§å¯ä¾›ç”¨æˆ·é‡å¤ä½¿ç”¨å¤šæ¬¡çš„èµ„æºã€‚</p>
<p>å¯æ¶ˆè€—èµ„æºåˆç§°ä¸º<strong>ä¸´æ—¶æ€§èµ„æº</strong>ã€‚</p>
<p><strong>å¯æŠ¢å æ€§èµ„æº</strong>ï¼Œåˆç§°å¯å‰¥å¤ºæ€§èµ„æº</p>
<p>ä¸€ä¸ªè¿›ç¨‹åœ¨ä½¿ç”¨æŸä¸ªèµ„æºæ—¶,ç³»ç»Ÿå¯ä»¥å‰¥å¤ºå…¶ä½¿ç”¨æƒ,å°†è¯¥èµ„æºåˆ†é…ç»™å…¶ä»–è¿›ç¨‹.</p>
<p>å…¸å‹èµ„æºï¼šCPU ã€å†…å­˜</p>
<p><strong>ä¸å¯æŠ¢å æ€§èµ„æº</strong>ï¼Œåˆç§°éå‰¥å¤ºæ€§èµ„æº</p>
<p>æŸä¸ªèµ„æºä¸€æ—¦åˆ†é…ç»™æŸä¸ªè¿›ç¨‹ï¼Œåˆ™ç³»ç»Ÿä¸èƒ½å‰¥å¤ºè¿›ç¨‹çš„ä½¿ç”¨æƒï¼Œåªèƒ½ç”±è¿›ç¨‹é‡Šæ”¾èµ„æºï¼Œæˆ–è€…è¿›ç¨‹ç»ˆæ­¢è¿è¡Œã€‚</p>
<p>å…¸å‹èµ„æºï¼šæ‰“å°æœºã€å…‰ç›˜åˆ»å½•æœºã€ç£å¸¦æœº</p>
<p><em><strong>äº§ç”Ÿæ­»é”çš„åŸå› </strong></em></p>
<p>ï¼ˆ1ï¼‰ç«äº‰èµ„æº<br>ï¼ˆ2ï¼‰è¿›ç¨‹é—´æ¨è¿›é¡ºåºéæ³•</p>
<p>äº§ç”Ÿæ­»é”ä¸­çš„ç«äº‰èµ„æºä¹‹ä¸€æŒ‡çš„æ˜¯ç«äº‰ä¸å¯å‰¥å¤ºèµ„æº(ä¾‹å¦‚ï¼šç³»ç»Ÿä¸­åªæœ‰ä¸€å°æ‰“å°æœºï¼Œå¯ä¾›è¿›ç¨‹P1ä½¿ç”¨ï¼Œå‡å®šP1å·²å ç”¨äº†æ‰“å°æœºï¼Œè‹¥P2ç»§ç»­è¦æ±‚æ‰“å°æœºæ‰“å°å°†é˜»å¡)ã€‚äº§ç”Ÿæ­»é”ä¸­çš„ç«äº‰èµ„æºå¦å¤–ä¸€ç§èµ„æºæŒ‡çš„æ˜¯ç«äº‰ä¸´æ—¶èµ„æº(ä¸´æ—¶èµ„æºåŒ…æ‹¬ç¡¬ä»¶ä¸­æ–­ã€ä¿¡å·ã€æ¶ˆæ¯ã€ç¼“å†²åŒºå†…çš„æ¶ˆæ¯ç­‰)ï¼Œé€šå¸¸æ¶ˆæ¯é€šä¿¡é¡ºåºè¿›è¡Œä¸å½“ï¼Œåˆ™ä¼šäº§ç”Ÿæ­»é”ã€‚</p>
<p>äº§ç”Ÿæ­»é”çš„åŸå› ä¹‹ä¸€æ˜¯å¯¹è®¡ç®—æœºæ“ä½œä¸å½“ï¼Œé€ æˆè®¡ç®—æœºæ­»æœºã€‚ï¼ˆ Ã—ï¼‰</p>
<h2 id="äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶"><a href="#äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶" class="headerlink" title="äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶"></a>äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶</h2><p>æ­»é”çš„å‘ç”Ÿå¿…é¡»å…·å¤‡ä¸‹åˆ—å››ä¸ªå¿…è¦æ¡ä»¶ï¼š<br>ï¼ˆ1ï¼‰äº’æ–¥æ¡ä»¶<br>ï¼ˆ2ï¼‰è¯·æ±‚å’Œä¿æŒæ¡ä»¶<br>ï¼ˆ3ï¼‰ä¸å‰¥å¤ºæ¡ä»¶<br>ï¼ˆ4ï¼‰ç¯è·¯ç­‰å¾…æ¡ä»¶</p>
<p>ç¯è·¯ç­‰å¾…æ¡ä»¶æ˜¯æŒ‡ï¼Œåœ¨æ­»é”å‘ç”Ÿçš„æ—¶å€™ï¼Œä¸¤ä¸ªçº¿ç¨‹è·å–èµ„æºçš„é¡ºåºæ„æˆäº†ç¯å½¢é“¾ã€‚æ¯”å¦‚ï¼Œçº¿ç¨‹ A å·²ç»æŒæœ‰èµ„æº 2ï¼Œè€Œæƒ³è¯·æ±‚èµ„æº 1ï¼Œ çº¿ç¨‹ B å·²ç»è·å–äº†èµ„æº 1ï¼Œè€Œæƒ³è¯·æ±‚èµ„æº 2ï¼Œè¿™å°±å½¢æˆèµ„æºè¯·æ±‚ç­‰å¾…çš„ç¯å½¢å›¾ã€‚</p>
<h2 id="æ­»é”é¢„é˜²"><a href="#æ­»é”é¢„é˜²" class="headerlink" title="æ­»é”é¢„é˜²"></a>æ­»é”é¢„é˜²</h2><p>ä¸ºäº†ä¸å‘ç”Ÿæ­»é”ï¼Œå¿…é¡»è®¾æ³•ç ´åäº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€ã€‚å› ä¸º<strong>äº’æ–¥æ¡ä»¶</strong>æ˜¯ç”±è®¾å¤‡çš„å›ºæœ‰å±æ€§æ‰€å†³å®šçš„ï¼Œä¸ä»…ä¸èƒ½æ”¹å˜ï¼Œè¿˜åº”åŠ ä»¥ä¿è¯ã€‚</p>
<p><em><strong>ç ´åâ€œè¯·æ±‚å’Œä¿æŒâ€æ¡ä»¶</strong></em></p>
<p>ç³»ç»Ÿè§„å®šæ‰€æœ‰è¿›ç¨‹åœ¨å¼€å§‹è¿è¡Œä¹‹å‰ï¼Œéƒ½å¿…é¡»<strong>ä¸€æ¬¡æ€§åœ°ç”³è¯·å…¶åœ¨æ•´ä¸ªè¿è¡Œè¿‡ç¨‹æ‰€éœ€çš„å…¨éƒ¨èµ„æº</strong>ã€‚ä»è€Œè¿›ç¨‹åœ¨æ•´ä¸ªè¿è¡ŒæœŸé—´ï¼Œä¾¿ä¸ä¼šå†æå‡ºèµ„æºè¦æ±‚ï¼Œä»è€Œæ‘’å¼ƒäº†è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼Œç”±æ­¤å¯ä»¥é¿å…å‘ç”Ÿæ­»é”ã€‚</p>
<p>ä¼˜ç‚¹ï¼šç®€å•ã€æ˜“äºå®ç°ä¸”å¾ˆå®‰å…¨ã€‚ç¼ºç‚¹ï¼šèµ„æºè¢«ä¸¥é‡æµªè´¹ï¼Œä½¿è¿›ç¨‹å»¶è¿Ÿè¿è¡Œ</p>
<p><em><strong>æ‘’å¼ƒâ€œä¸å‰¥å¤ºâ€æ¡ä»¶</strong></em></p>
<p>å½“ä¸€ä¸ªå·²ç»ä¿æŒäº†æŸäº›èµ„æºçš„è¿›ç¨‹ï¼Œ<strong>å†æå‡ºæ–°çš„èµ„æºè¯·æ±‚è€Œä¸èƒ½ç«‹å³å¾—åˆ°æ»¡è¶³æ—¶ï¼Œå¿…é¡»é‡Šæ”¾å®ƒå·²ç»ä¿æŒäº†çš„æ‰€æœ‰èµ„æº</strong>ã€‚å¾…ä»¥åéœ€è¦æ—¶å†é‡æ–°ç”³è¯·ã€‚ä»è€Œæ‘’å¼ƒäº†â€œä¸å‰¥å¤ºâ€æ¡ä»¶ã€‚<br>ç¼ºç‚¹ï¼šå®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚ä¸”è¦ä»˜å‡ºå¾ˆå¤§ä»£ä»·ã€‚<br>ä¸€ä¸ªèµ„æºåœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œå®ƒçš„è¢«è¿«é‡Šæ”¾å¯èƒ½ä¼šé€ æˆå‰æ®µå·¥ä½œçš„å¤±æ•ˆã€‚ä¼šä½¿è¿›ç¨‹å‰åä¸¤æ¬¡è¿è¡Œçš„ä¿¡æ¯ä¸è¿ç»­ã€‚å› åå¤åœ°ç”³è¯·å’Œé‡Šæ”¾èµ„æºï¼Œè‡´ä½¿è¿›ç¨‹æ‰§è¡Œè¢«æ— é™æ¨è¿Ÿï¼Œå»¶é•¿è¿›ç¨‹å‘¨è½¬æ—¶é—´ã€å¢åŠ ç³»ç»Ÿå¼€é”€ã€é™ä½ååé‡ã€‚</p>
<p><em><strong>æ‘’å¼ƒâ€œç¯è·¯ç­‰å¾…â€æ¡ä»¶</strong></em></p>
<p>ç³»ç»Ÿå°†æ‰€æœ‰èµ„æºæŒ‰ç±»å‹è¿›è¡Œçº¿æ€§æ’é˜Ÿï¼Œå¹¶èµ‹äºˆä¸åŒçš„åºå·ã€‚ æ‰€æœ‰è¿›ç¨‹å¯¹èµ„æºçš„è¯·æ±‚å¿…é¡»ä¸¥æ ¼æŒ‰ç…§èµ„æºåºå·é€’å¢çš„æ¬¡åºæå‡ºã€‚</p>
<p>ä¼˜ç‚¹ï¼šèµ„æºåˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡éƒ½æœ‰æ˜æ˜¾çš„æ”¹å–„ã€‚</p>
<p>å­˜åœ¨çš„é—®é¢˜ï¼šé¦–å…ˆæ˜¯ä¸ºç³»ç»Ÿä¸­å„ç±»èµ„æºæ‰€åˆ†é…ï¼ˆç¡®å®šï¼‰çš„åºå·ï¼Œå¿…é¡»ç›¸å¯¹ç¨³å®šï¼Œè¿™å°±é™åˆ¶äº†æ–°ç±»å‹è®¾å¤‡çš„å¢åŠ ï¼›ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ä½¿ç”¨å„ç±»èµ„æºçš„é¡ºåºï¼Œä¸ç³»ç»Ÿè§„å®šçš„é¡ºåºä¸åŒï¼Œé€ æˆå¯¹èµ„æºçš„æµªè´¹ ;é™åˆ¶ç”¨æˆ·ç®€å•ã€è‡ªä¸»åœ°ç¼–ç¨‹ ã€‚</p>
<h2 id="å®‰å…¨çŠ¶æ€"><a href="#å®‰å…¨çŠ¶æ€" class="headerlink" title="å®‰å…¨çŠ¶æ€"></a>å®‰å…¨çŠ¶æ€</h2><p>æ‰€è°“å®‰å…¨çŠ¶æ€ï¼Œæ˜¯æŒ‡ç³»ç»Ÿèƒ½æŒ‰æŸç§è¿›ç¨‹é¡ºåºï¼Œå¦‚&lt;P1ï¼ŒP2ï¼Œâ€¦ï¼ŒPn&gt;ï¼Œä¾æ¬¡ä¸ºnä¸ªè¿›ç¨‹åˆ†é…å…¶æ‰€éœ€èµ„æºï¼Œç›´è‡³å…¶æœ€å¤§éœ€æ±‚ï¼Œä½¿æ¯ä¸ªè¿›ç¨‹éƒ½å¯é¡ºåˆ©åœ°å®Œæˆï¼Œç§°ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ã€‚ç§°ã€ˆP1ï¼ŒP2ï¼Œâ€¦ï¼ŒPnã€‰åºåˆ—ä¸ºå®‰å…¨åºåˆ—ã€‚å¦åˆ™ï¼Œå¦‚æœç³»ç»Ÿæ— æ³•æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªå®‰å…¨åºåˆ—ï¼Œåˆ™ç§°ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€ã€‚</p>
<p>å¦‚æœä¸€ä¸ªç³»ç»Ÿåœ¨å®‰å…¨çŠ¶æ€ï¼Œå°±æ²¡æœ‰æ­»é”ã€‚å¦‚æœä¸€ä¸ªç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€ï¼Œå°±æœ‰å¯èƒ½æ­»é”ã€‚é¿å…æ­»é”çš„å®è´¨ï¼šç¡®ä¿ç³»ç»Ÿä¸è¿›å…¥ä¸å®‰å…¨çŠ¶æ€ã€‚</p>
<p>å‡å®šç³»ç»Ÿä¸­æœ‰ä¸‰ä¸ªè¿›ç¨‹P1ã€P2å’ŒP3ï¼Œå…±æœ‰12å°ç£å¸¦æœºã€‚è¿›ç¨‹P1æ€»å…±è¦æ±‚10å°ç£å¸¦æœºï¼ŒP2å’ŒP3åˆ†åˆ«è¦æ±‚4å°å’Œ9å°ã€‚å‡è®¾åœ¨T0 æ—¶åˆ»è¿›ç¨‹P1ã€P2å’ŒP3å·²åˆ†åˆ«è·å¾—5å°ã€2å°å’Œ2å°ç£å¸¦æœºï¼Œå°šæœ‰3å°ç©ºé—²æœªåˆ†é…ï¼Œåœ¨T0æ—¶åˆ»ç³»ç»Ÿæ˜¯å¦å®‰å…¨ï¼Ÿ</p>
<table>
<thead>
<tr>
<th>è¿›ç¨‹</th>
<th>æœ€å¤§éœ€æ±‚</th>
<th>å·²åˆ†é…</th>
<th>å¯ç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>P1</td>
<td>10</td>
<td>5</td>
<td>3</td>
</tr>
<tr>
<td>P2</td>
<td>4</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>P3</td>
<td>9</td>
<td>2</td>
<td></td>
</tr>
</tbody></table>
<p>T0æ—¶åˆ»ç³»ç»Ÿæ˜¯å®‰å…¨çš„,å­˜åœ¨ä¸€ä¸ªå®‰å…¨åºåˆ—&lt;P2,P1,P3&gt;</p>
<h2 id="æ­»é”é¿å…"><a href="#æ­»é”é¿å…" class="headerlink" title="æ­»é”é¿å…"></a>æ­»é”é¿å…</h2><p>é¿å…æ­»é”çš„å…³é”®åœ¨äºå¦‚ä½•å‡†ç¡®çš„é¢„æµ‹æ˜¯å¦ä¼šå‡ºç°æ­»é”ï¼Œä»è€Œé¿å…æ­»é”ã€‚</p>
<h3 id="é“¶è¡Œå®¶ç®—æ³•"><a href="#é“¶è¡Œå®¶ç®—æ³•" class="headerlink" title="é“¶è¡Œå®¶ç®—æ³•"></a>é“¶è¡Œå®¶ç®—æ³•</h3><p>ä¾‹ï¼šæœ‰å››ä¸ªé¡¾å®¢ï¼šAï¼ŒBï¼ŒCï¼ŒDï¼Œæ¯ä¸ªé¡¾å®¢åˆ†æˆè‹¥å¹²æ¬¡å€Ÿæ¬¾ï¼›å¹¶åœ¨ç¬¬ä¸€æ¬¡å€Ÿæ¬¾æ—¶ï¼Œé¡¾å®¢æå‡ºçš„æœ€å¤§è´·æ¬¾æ•°é‡åˆ†åˆ«ä¸º6ã€5ã€4ã€7ã€‚é“¶è¡Œå®¶çŸ¥é“ä¸æ˜¯æ‰€æœ‰é¡¾å®¢éƒ½é©¬ä¸Šéœ€è¦å…¶å…¨éƒ¨è´·æ¬¾ï¼ˆ6+5+4+7&#x3D;22ï¼‰ã€‚ å› æ­¤ï¼Œä»–åªä¿ç•™10ä¸ªå•ä½æ•°é‡(è€Œä¸æ˜¯å…¨éƒ¨22ä¸ªå•ä½)ä¸ºè¿™äº›é¡¾å®¢æœåŠ¡ã€‚</p>
<table>
<thead>
<tr>
<th>é¡¾å®¢</th>
<th>æ‹¥æœ‰</th>
<th>æœ€å¤§è¦æ±‚</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>0</td>
<td>6</td>
</tr>
<tr>
<td>B</td>
<td>0</td>
<td>5</td>
</tr>
<tr>
<td>C</td>
<td>0</td>
<td>4</td>
</tr>
<tr>
<td>D</td>
<td>0</td>
<td>7</td>
</tr>
</tbody></table>
<p>é“¶è¡Œå®¶æ‹¥æœ‰é‡:10</p>
<table>
<thead>
<tr>
<th>é¡¾å®¢</th>
<th>æ‹¥æœ‰</th>
<th>æœ€å¤§è¦æ±‚</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>B</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>C</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>D</td>
<td>4</td>
<td>7</td>
</tr>
</tbody></table>
<p>å½“å‰å‰©ä½™é‡: 2</p>
<table>
<thead>
<tr>
<th>é¡¾å®¢</th>
<th>æ‹¥æœ‰</th>
<th>æœ€å¤§è¦æ±‚</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>B</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>C</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>D</td>
<td>4</td>
<td>7</td>
</tr>
</tbody></table>
<p>å½“Bè¯·æ±‚1ä¸ªæ—¶ï¼Œå½“å‰å‰©ä½™é‡:1ã€‚ç°åœ¨é“¶è¡Œå®¶è¦ç ´äº§äº†ï¼Œå‰©ä½™çš„èµ„é‡‘è´·ç»™è°éƒ½ä¸å¤Ÿï¼Œå› æ­¤é¡¹ç›®ä¸èƒ½å®Œæˆï¼Œé“¶è¡Œå®¶ä¸èƒ½æ”¶å›è´·æ¬¾ã€‚é”™è¯¯å‘ç”Ÿåœ¨æœ€åè´·æ¬¾ç»™Bçš„1ä¸ªäº¿ä¸Šã€‚</p>
<table>
<thead>
<tr>
<th>é¡¾å®¢</th>
<th>æ‹¥æœ‰</th>
<th>æœ€å¤§è¦æ±‚</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>B</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>C</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>D</td>
<td>4</td>
<td>7</td>
</tr>
</tbody></table>
<p>å½“å‰å‰©ä½™é‡: 2<br>Bè¯·æ±‚ï¼šä¸è´·æ¬¾ï¼›Cè¯·æ±‚2ä¸ªäº¿ï¼šå¯ä»¥è´·æ¬¾<br>Cå®Œæˆé¡¹ç›®åï¼Œè¿˜å‡º4ï¼Œè¿™ä¸ª4é“¶è¡Œå®¶ä¸‹æ¬¡å¯è´·ç»™Bï¼Œä¹Ÿå¯è´·ç»™Då…¶ä¸­çš„3ï¼Œä¸ç®¡å¦‚ä½•å¤„ç†ï¼ŒBæˆ–Déƒ½èƒ½å®Œæˆå½’è¿˜5æˆ–å½’è¿˜7ï¼›æœ€åè´·ç»™Aæ‰€éœ€èµ„é‡‘5ã€‚æœ€ç»ˆï¼ŒAã€Bã€Cã€Déƒ½å®Œæˆäº†é¡¹ç›®ï¼Œé“¶è¡Œå®¶å¾—åˆ°äº†è´·æ¬¾åˆ©æ¶¦ã€‚å­˜åœ¨çš„å®‰å…¨åºåˆ—æ˜¯ï¼šCã€Bã€Dã€Aæˆ–Cã€Dã€Bã€A</p>
<p>é“¶è¡Œå®¶ç®—æ³•èƒ½é¢„æµ‹ä¸€ç¬”è´·æ¬¾ä¸šåŠ¡å¯¹é“¶è¡Œæ˜¯å¦æ˜¯å®‰å…¨çš„ï¼Œè¯¥ç®—æ³•ä¹Ÿèƒ½é¢„æµ‹ä¸€æ¬¡èµ„æºåˆ†é…å¯¹è®¡ç®—æœºç³»ç»Ÿæ˜¯å¦æ˜¯å®‰å…¨çš„ã€‚ä¸ºå®ç°é“¶è¡Œå®¶ç®—æ³•ï¼Œç³»ç»Ÿä¸­å¿…é¡»è®¾ç½®è‹¥å¹²<strong>æ•°æ®ç»“æ„</strong>ã€‚</p>
<ul>
<li>nä¸ªè¿›ç¨‹ï¼ˆP1ï¼ŒP2ï¼Œâ€¦ï¼ŒPnï¼‰</li>
<li>mç±»èµ„æºï¼ˆR1ï¼ŒR2ï¼Œâ€¦ï¼ŒRmï¼‰</li>
<li>å¯åˆ©ç”¨èµ„æºå‘é‡ï¼šavailable[j]&#x3D;kï¼Œèµ„æºRjç±»æœ‰kä¸ªå¯ç”¨</li>
<li>æœ€å¤§éœ€æ±‚çŸ©é˜µï¼šMax[i, j]&#x3D;kï¼Œè¿›ç¨‹Piæœ€å¤§è¯·æ±‚kä¸ªRjç±»èµ„æº</li>
<li>åˆ†é…çŸ©é˜µï¼šAllocation[i, j]&#x3D;kï¼Œè¿›ç¨‹Piåˆ†é…åˆ°kä¸ªRjç±»èµ„æº</li>
<li>éœ€æ±‚çŸ©é˜µï¼šNeed[i, j]&#x3D;kï¼Œè¿›ç¨‹Piè¿˜éœ€è¦kä¸ªRjç±»èµ„æº</li>
</ul>
<p>ä¸‰ä¸ªçŸ©é˜µçš„å…³ç³»ï¼š Need[i, j] &#x3D; Max[i, j] â€“ Allocation[i, j]</p>
<p>è®¾Requestiï¼Œæ˜¯è¿›ç¨‹Piçš„è¯·æ±‚å‘é‡ï¼Œå½“Piå‘å‡ºèµ„æºè¯·æ±‚åï¼Œç³»ç»ŸæŒ‰ä¸‹è¿°æ­¥éª¤è¿›è¡Œæ£€æŸ¥ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_21-30-34.png"></p>
<p><em>ç³»ç»Ÿæ‰€æ‰§è¡Œçš„å®‰å…¨æ€§ç®—æ³•å¯æè¿°å¦‚ä¸‹</em>ï¼š</p>
<p>ï¼ˆ1ï¼‰è®¾ç½®ä¸¤ä¸ªå‘é‡ï¼š<br>â‘ å·¥ä½œå‘é‡Work: å®ƒè¡¨ç¤ºç³»ç»Ÿå¯æä¾›ç»™è¿›ç¨‹ç»§ç»­è¿è¡Œæ‰€éœ€çš„å„ç±»èµ„æºæ•°ç›®ï¼ŒWork &#x3D;Available<br>â‘¡Finishï¼šå¼€å§‹æ—¶å…ˆåšFinish[i] &#x3D; falseï¼›å½“æœ‰è¶³å¤Ÿèµ„æºåˆ†é…ç»™è¿›ç¨‹æ—¶ï¼Œå†ä»¤Finish[i] &#x3D; trueã€‚<br>ï¼ˆ2ï¼‰ä»è¿›ç¨‹é›†åˆä¸­æ‰¾åˆ°ä¸€ä¸ªèƒ½æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„è¿›ç¨‹ï¼š<br>â‘ Finish[i] &#x3D; falseï¼›<br>â‘¡Need[i,j] â‰¤ work[j]ï¼›<br>è‹¥æ‰¾åˆ°ï¼Œæ‰§è¡Œæ­¥éª¤ï¼ˆ3)ï¼›å¦åˆ™ï¼Œæ‰§è¡Œæ­¥éª¤ï¼ˆ4ï¼‰ã€‚</p>
<p>ï¼ˆ3ï¼‰å½“è¿›ç¨‹åªè·å¾—èµ„æºåï¼Œå¯é¡ºåˆ©æ‰§è¡Œï¼Œç›´è‡³å®Œæˆï¼Œå¹¶é‡Šæ”¾å‡ºåˆ†é…ç»™å®ƒçš„èµ„æºï¼Œæ•…åº”æ‰§è¡Œï¼š<br>    Work[ j ] &#x3D; Work[ i ] + Allocation[ i,j ]ï¼›<br>    Finish[ i ] &#x3D; true;<br>    go to step 2ï¼›<br>ï¼ˆ4ï¼‰å¦‚æœæ‰€æœ‰è¿›ç¨‹çš„Finish[i] ï¼ trueéƒ½æ»¡è¶³ï¼Œåˆ™è¡¨ç¤ºç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ï¼›å¦åˆ™ï¼Œç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_21-31-12.png"></p>
<p>ä¾‹é¢˜ï¼šå‡å®šç³»ç»Ÿä¸­æœ‰äº”ä¸ªè¿›ç¨‹{P0ï¼ŒP1ï¼ŒP2ï¼ŒP3ï¼ŒP4} å’Œä¸‰ç±»èµ„æº{A ,B,C},å„ç§èµ„æºçš„æ•°é‡åˆ†åˆ«ä¸º10ã€5ã€7ï¼Œåœ¨T0 æ—¶åˆ»çš„èµ„æºåˆ†é…æƒ…å†µ</p>
<table>
<thead>
<tr>
<th>è¿›ç¨‹</th>
<th>Max (A, B, C)</th>
<th>Allocation (A, B, C)</th>
<th>Need (A, B, C)</th>
<th>Available (A, B, C)</th>
</tr>
</thead>
<tbody><tr>
<td>P0</td>
<td>7 5 3</td>
<td>0 1 0</td>
<td>7 4 3</td>
<td>3 3 2</td>
</tr>
<tr>
<td>P1</td>
<td>3 2 2</td>
<td>2 0 0</td>
<td>1 2 2</td>
<td></td>
</tr>
<tr>
<td>P2</td>
<td>9 0 2</td>
<td>3 0 2</td>
<td>6 0 0</td>
<td></td>
</tr>
<tr>
<td>P3</td>
<td>2 2 2</td>
<td>2 1 1</td>
<td>0 1 1</td>
<td></td>
</tr>
<tr>
<td>P4</td>
<td>4 3 3</td>
<td>0 0 2</td>
<td>4 3 1</td>
<td></td>
</tr>
</tbody></table>
<p><em>åˆ©ç”¨å®‰å…¨æ€§ç®—æ³•å¯¹T0æ—¶åˆ»çš„èµ„æºåˆ†é…æƒ…å†µè¿›è¡Œåˆ†æ</em></p>
<table>
<thead>
<tr>
<th>è¿›ç¨‹</th>
<th>Work (A, B, C)</th>
<th>Need (A, B, C)</th>
<th>Allocation (A, B, C)</th>
<th>Work+Allocation (A, B, C)</th>
<th>Finish</th>
</tr>
</thead>
<tbody><tr>
<td>P1</td>
<td>3 3 2</td>
<td>1 2 2</td>
<td>2 0 0</td>
<td>5 3 2</td>
<td>TRUE</td>
</tr>
<tr>
<td>P3</td>
<td>5 3 2</td>
<td>0 1 1</td>
<td>2 1 1</td>
<td>7 4 3</td>
<td>TRUE</td>
</tr>
<tr>
<td>P4</td>
<td>7 4 3</td>
<td>4 3 1</td>
<td>0 0 2</td>
<td>7 4 5</td>
<td>TRUE</td>
</tr>
<tr>
<td>P2</td>
<td>7 4 5</td>
<td>6 0 0</td>
<td>3 0 2</td>
<td>10 4 7</td>
<td>TRUE</td>
</tr>
<tr>
<td>P0</td>
<td>10 4 7</td>
<td>7 4 3</td>
<td>0 1 0</td>
<td>10 5 7</td>
<td>TRUE</td>
</tr>
</tbody></table>
<p><em>åˆ¤æ–­è¯·æ±‚æ˜¯å¦å¯ä»¥æ»¡è¶³</em></p>
<p>P1è¯·æ±‚èµ„æºï¼šP1å‘å‡ºè¯·æ±‚å‘é‡Request1(1,0,2),ç³»ç»ŸæŒ‰é“¶è¡Œå®¶ç®—æ³•è¿›è¡Œæ£€æŸ¥<br>â‘ Request1ï¼ˆ1ï¼Œ0ï¼Œ2ï¼‰â‰¤Need1ï¼ˆ1ï¼Œ2ï¼Œ2ï¼‰<br>â‘¡Request1ï¼ˆ1ï¼Œ0ï¼Œ2ï¼‰â‰¤Available1ï¼ˆ3,3,2)<br>â‘¢ç³»ç»Ÿå…ˆå‡å®šå¯ä¸ºP1åˆ†é…èµ„æºï¼Œå¹¶ä¿®æ”¹Availableï¼ŒAllocation1å’ŒNeed1å‘é‡ï¼Œç”±æ­¤å½¢æˆçš„èµ„æºå˜åŒ–æƒ…å†µå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚<br>â‘£å†åˆ©ç”¨å®‰å…¨æ€§ç®—æ³•æ£€æŸ¥æ­¤æ—¶ç³»ç»Ÿæ˜¯å¦å®‰å…¨ã€‚</p>
<p><em>å‡è®¾åˆ†é…åè°ƒæ•´è¡¨æ ¼</em></p>
<table>
<thead>
<tr>
<th>è¿›ç¨‹</th>
<th>Max (A, B, C)</th>
<th>Allocation (A, B, C)</th>
<th>Need (A, B, C)</th>
<th>Available (A, B, C)</th>
</tr>
</thead>
<tbody><tr>
<td>P0</td>
<td>7 5 3</td>
<td>0 1 0</td>
<td>7 4 3</td>
<td>2 3 0</td>
</tr>
<tr>
<td>P1</td>
<td>3 2 2</td>
<td>3 0 2</td>
<td>0 2 0</td>
<td></td>
</tr>
<tr>
<td>P2</td>
<td>9 0 2</td>
<td>3 0 2</td>
<td>6 0 0</td>
<td></td>
</tr>
<tr>
<td>P3</td>
<td>2 2 2</td>
<td>2 1 1</td>
<td>0 1 1</td>
<td></td>
</tr>
<tr>
<td>P4</td>
<td>4 3 3</td>
<td>0 0 2</td>
<td>4 3 1</td>
<td></td>
</tr>
</tbody></table>
<p><em>P1 ç”³è¯·èµ„æºæ—¶çš„å®‰å…¨æ€§æ£€æŸ¥</em></p>
<table>
<thead>
<tr>
<th>è¿›ç¨‹</th>
<th>Work (A, B, C)</th>
<th>Need (A, B, C)</th>
<th>Allocation (A, B, C)</th>
<th>Work+Allocation (A, B, C)</th>
<th>Finish</th>
</tr>
</thead>
<tbody><tr>
<td>P1</td>
<td>2 3 0</td>
<td>0 2 0</td>
<td>2 0 3</td>
<td>5 3 2</td>
<td>TRUE</td>
</tr>
<tr>
<td>P3</td>
<td>5 3 2</td>
<td>0 1 1</td>
<td>2 1 1</td>
<td>7 4 3</td>
<td>TRUE</td>
</tr>
<tr>
<td>P4</td>
<td>7 4 3</td>
<td>4 3 1</td>
<td>0 0 2</td>
<td>7 4 5</td>
<td>TRUE</td>
</tr>
<tr>
<td>P0</td>
<td>7 4 5</td>
<td>7 5 5</td>
<td>0 1 0</td>
<td>7 5 5</td>
<td>TRUE</td>
</tr>
<tr>
<td>P2</td>
<td>10 5 5</td>
<td>6 0 0</td>
<td>3 0 2</td>
<td>10 5 7</td>
<td>TRUE</td>
</tr>
</tbody></table>
<p>P4è¯·æ±‚èµ„æºï¼šP4å‘å‡ºè¯·æ±‚å‘é‡Request4ï¼ˆ3,3,0ï¼‰ï¼Œç³»ç»ŸæŒ‰é“¶è¡Œå®¶ç®—æ³•è¿›è¡Œæ£€æŸ¥ï¼š<br>â‘ Request4ï¼ˆ3ï¼Œ3ï¼Œ0ï¼‰â‰¤Need4ï¼ˆ4ï¼Œ3ï¼Œ1ï¼‰ï¼›<br>â‘¡Request4(3ï¼Œ3ï¼Œ 0)â‰®Availableï¼ˆ2ï¼Œ3ï¼Œ0ï¼‰ï¼Œè®©P4ç­‰å¾…ã€‚</p>
<p>P0è¯·æ±‚èµ„æºï¼šP0å‘å‡ºè¯·æ±‚å‘é‡Requst0(0,2,0ï¼‰ï¼Œç³»ç»ŸæŒ‰é“¶è¡Œå®¶ç®—æ³•è¿›è¡Œæ£€æŸ¥ï¼š<br>â‘ Request0ï¼ˆ0, 2,0ï¼‰â‰¤Need0ï¼ˆ7ï¼Œ4ï¼Œ3ï¼‰ï¼›<br>â‘¡Request0ï¼ˆ0,2,0ï¼‰â‰¤Availableï¼ˆ2ï¼Œ3ï¼Œ0ï¼‰ï¼›<br>â‘¢ç³»ç»Ÿæš‚æ—¶å…ˆå‡å®šå¯ä¸ºP0åˆ†é…èµ„æºï¼Œå¹¶ä¿®æ”¹æœ‰å…³æ•°æ®ï¼Œ<br>å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>è¿›ç¨‹</th>
<th>Allocation (A, B, C)</th>
<th>Need (A, B, C)</th>
<th>Available (A, B, C)</th>
</tr>
</thead>
<tbody><tr>
<td>P0</td>
<td>0 3 0</td>
<td>7 2 3</td>
<td>2 1 0</td>
</tr>
<tr>
<td>P1</td>
<td>3 0 2</td>
<td>0 2 0</td>
<td></td>
</tr>
<tr>
<td>P2</td>
<td>3 0 2</td>
<td>6 0 0</td>
<td></td>
</tr>
<tr>
<td>P3</td>
<td>2 1 1</td>
<td>0 1 1</td>
<td></td>
</tr>
<tr>
<td>P4</td>
<td>0 0 2</td>
<td>4 3 1</td>
<td></td>
</tr>
</tbody></table>
<p>è¿›è¡Œå®‰å…¨æ€§æ£€æŸ¥ï¼šå¯ç”¨èµ„æºAvailableï¼ˆ2ï¼Œ1ï¼Œ0ï¼‰å·²ä¸èƒ½æ»¡è¶³ä»»ä½•è¿›ç¨‹çš„éœ€è¦ï¼Œæ•…ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œæ­¤æ—¶ç³»ç»Ÿä¸åˆ†é…èµ„æºã€‚</p>
<p><em><strong>é¿å…æ­»é”çš„é™åˆ¶æ¡ä»¶</strong></em><br>a) é¢„å…ˆå¿…é¡»ç”³æ˜æ¯ä¸ªè¿›ç¨‹éœ€è¦çš„èµ„æºæ€»é‡ï¼›<br>b) è¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå…¶æ‰§è¡Œé¡ºåºå–å†³äºç³»ç»Ÿå®‰å…¨ï¼Œè€Œéè¿›ç¨‹é—´çš„åŒæ­¥è¦æ±‚ï¼›<br> c) ç³»ç»Ÿå¿…é¡»æä¾›å›ºå®šæ•°é‡çš„èµ„æºä¾›è¿›ç¨‹ä½¿ç”¨ï¼›</p>
<p>è¡¥å……é—®é¢˜ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_22-30-20.png"></p>
<h2 id="æ­»é”æ£€æµ‹å’Œè§£é™¤"><a href="#æ­»é”æ£€æµ‹å’Œè§£é™¤" class="headerlink" title="æ­»é”æ£€æµ‹å’Œè§£é™¤"></a>æ­»é”æ£€æµ‹å’Œè§£é™¤</h2><p>æ£€æµ‹æ­»é”çš„åŸºæœ¬æ€æƒ³: åˆ©ç”¨æŸç§ç®—æ³•å¯¹èµ„æºè¯·æ±‚å’Œåˆ†é…ä¿¡æ¯åŠ ä»¥æ£€æŸ¥ï¼Œä»¥åˆ¤æ–­æ˜¯å¦å­˜<br>åœ¨æ­»é”ã€‚</p>
<p><em><strong>èµ„æºåˆ†é…å›¾ G &#x3D; (N,E)</strong></em></p>
<p>ï¼ˆ1ï¼‰æŠŠNåˆ†ä¸ºä¸¤ä¸ªäº’æ–¥çš„å­é›†ï¼Œå³ä¸€ç»„è¿›ç¨‹ç»“ç‚¹P&#x3D;{P1,P2ï¼Œâ€¦ï¼ŒPnï¼‰å’Œä¸€ç»„èµ„æºç»“ç‚¹R&#x3D;{r1, r2, â€¦, rn}ï¼ŒNï¼P U Rã€‚<br>ï¼ˆ2ï¼‰å‡¡å±äºEä¸­çš„ä¸€ä¸ªè¾¹eâˆˆ Eéƒ½è¿æ¥ç€Pä¸­çš„ä¸€ä¸ªç»“ç‚¹å’ŒRä¸­çš„ä¸€ä¸ªç»“ç‚¹ï¼Œeï¼{Pi,rj} å®ƒè¡¨ç¤ºè¿›ç¨‹pjè¯·æ±‚ä¸€ä¸ªå•ä½çš„rjèµ„æºã€‚ e&#x3D;{rjï¼ŒPi} å®ƒè¡¨ç¤ºæŠŠä¸€ä¸ªå•ä½çš„èµ„æºrjåˆ†é…ç»™è¿›ç¨‹Piã€‚</p>
<p><strong>é‡è¦ç»“è®º</strong>ï¼šå¦‚æœèµ„æºåˆ†é…å›¾ä¸­ä¸å­˜åœ¨ç¯è·¯ï¼Œåˆ™ç³»ç»Ÿä¸­ä¸å­˜åœ¨æ­»é”ï¼›åä¹‹ï¼Œå¦‚æœèµ„æºåˆ†é…å›¾ä¸­å­˜åœ¨ç¯è·¯ï¼Œåˆ™ç³»ç»Ÿä¸­å¯èƒ½å­˜åœ¨æ­»é”ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨æ­»é”ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-17_09-36-47.png"></p>
<p><strong>èµ„æºåˆ†é…å›¾åŠ ä»¥ç®€åŒ–çš„æ–¹æ³•</strong></p>
<p>ï¼ˆ1ï¼‰å¯»æ‰¾ä¸€ä¸ªæ—¢ä¸é˜»å¡åˆéå­¤ç«‹çš„è¿›ç¨‹ç»“ç‚¹Piï¼ˆèƒ½åˆ†é…ç»™æ»¡è¶³Piè¦æ±‚çš„èµ„æºæ•°ï¼‰ï¼Œè‹¥æ— ï¼Œåˆ™ç®—æ³•ç»“æŸï¼›<br>ï¼ˆ2ï¼‰å»é™¤Piçš„æ‰€æœ‰åˆ†é…è¾¹å’Œè¯·æ±‚è¾¹ï¼Œä½¿Piæˆä¸ºä¸€ä¸ªå­¤ç«‹èŠ‚ç‚¹ï¼›<br>ï¼ˆ3ï¼‰è½¬æ­¥éª¤ï¼ˆ1ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-17_09-46-23.png"></p>
<p>è‹¥èƒ½æ¶ˆå»èµ„æºåˆ†é…å›¾ä¸­æ‰€æœ‰ç»“ç‚¹çš„è¿æ¥è¾¹ï¼Œä½¿å…¨éƒ¨ç»“ç‚¹éƒ½æˆä¸ºå­¤ç«‹ç»“ç‚¹ï¼Œåˆ™ç§°è¯¥å›¾æ˜¯å¯å®Œå…¨ç®€åŒ–å›¾ï¼›è‹¥ä¸èƒ½ä½¿è¯¥å›¾å®Œå…¨ç®€åŒ–ï¼Œåˆ™ç§°è¯¥å›¾æ˜¯ä¸å¯å®Œå…¨åŒ–ç®€å›¾ã€‚ å¯ä»¥è¯æ˜ï¼šå½“ä¸”ä»…å½“<strong>ç³»ç»ŸæŸçŠ¶æ€Sæ‰€å¯¹åº”çš„èµ„æºåˆ†é…å›¾æ˜¯ä¸å¯å®Œå…¨åŒ–ç®€çš„ï¼Œåˆ™Sæ˜¯æ­»é”çŠ¶æ€</strong>ã€‚è¯¥å……åˆ†æ¡ä»¶ç§°ä¸ºæ­»é”å®šç†ã€‚</p>
<p><em><strong>æ­»é”çš„è§£é™¤</strong></em></p>
<p>å½“å‘ç°æœ‰è¿›ç¨‹æ­»é”æ—¶ï¼Œå¸¸é‡‡ç”¨çš„ä¸¤ç§æ–¹æ³•æ˜¯<br>è§£é™¤æ­»é”ï¼š<br>ï¼ˆ1ï¼‰å‰¥å¤ºèµ„æºã€‚ä»å…¶å®ƒè¿›ç¨‹å‰¥å¤ºè¶³å¤Ÿæ•°é‡çš„èµ„æºç»™æ­»é”è¿›ç¨‹ï¼Œä»¥è§£é™¤æ­»é”çŠ¶æ€ã€‚<br>ï¼ˆ2ï¼‰æ’¤æ¶ˆè¿›ç¨‹ã€‚æœ€ç®€å•çš„æ’¤æ¶ˆè¿›ç¨‹çš„æ–¹æ³•ï¼Œæ˜¯ä½¿å…¨éƒ¨æ­»é”è¿›ç¨‹éƒ½å¤­æŠ˜æ‰ï¼›æˆ–è€…æŒ‰ç…§æŸç§é¡ºåºï¼ˆ<strong>æŒ‰ç…§è§£é™¤æ­»é”å¤æ‚åº¦é€’å¢çš„é¡ºåº</strong>ï¼‰é€ä¸ªåœ°æ’¤æ¶ˆè¿›ç¨‹ï¼Œç›´è‡³æœ‰è¶³å¤Ÿçš„èµ„æºå¯ç”¨ï¼Œä½¿æ­»é”çŠ¶æ€æ¶ˆé™¤ä¸ºæ­¢ã€‚</p>
<hr>
<p>æ­»é”äº§ç”Ÿï¼Œå¿…é¡»è¦æ»¡è¶³å››ä¸ªå¿…è¦æ¡ä»¶ï¼Œæ‰€ä»¥ï¼Œä¸ºé¿å…æ­»é”äº§ç”Ÿï¼Œä¸»è¦æ³¨æ„å¦‚ä½•ä¸è®©è¿™å››ä¸ªå¿…è¦æ¡ä»¶æˆç«‹ï¼Œå¹¶æ‰“ç ´å¾ªç¯ç­‰å¾…èµ„æºçš„ç¯è·¯ã€‚ï¼ˆÃ—ï¼‰æ³¨æ„é¿å…ä¸é¢„é˜²çš„å·®å¼‚</p>
<p>æ­»é”çš„æ£€æµ‹å¯ä»¥é€šè¿‡ï¼ˆèµ„æºåˆ†é… ï¼‰å›¾ï¼Œåˆ©ç”¨ï¼ˆ æ­»é”ï¼‰å®šç†æ¥å®ç°ã€‚</p>
<p>ä»€ä¹ˆå«ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ï¼Ÿå¸¸ç”¨ä»€ä¹ˆæ–¹æ³•ä¿æŒç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ï¼Ÿ</p>
<p>å¦‚æœæ“ä½œç³»ç»Ÿèƒ½ä¿è¯æ‰€æœ‰çš„è¿›ç¨‹åœ¨æœ‰é™çš„æ—¶é—´å†…å¾—åˆ°éœ€è¦çš„å…¨éƒ¨èµ„æº,åˆ™ç§°ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ã€‚å¸¸ç”¨é“¶è¡Œå®¶ç®—æ³•åŠ¨æ€åœ°æ£€æµ‹ç³»ç»Ÿä¸­çš„èµ„æºåˆ†é…æƒ…å†µå’Œè¿›ç¨‹å¯¹èµ„æºçš„éœ€æ±‚æƒ…å†µè¿›è¡Œèµ„æºåˆ†é…,ç¡®ä¿ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ã€‚</p>
<p>ç³»ç»Ÿä¸­æœ‰3ä¸ªè¿›ç¨‹ï¼Œ4ä¸ªç›¸åŒç±»å‹çš„èµ„æºï¼Œæ¯ä¸ªè¿›ç¨‹æœ€å¤šéœ€è¦2ä¸ªèµ„æºï¼Œè¯¥ç³»ç»Ÿæ˜¯å¦å›å‘ç”Ÿæ­»é”ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>ä¸ä¼šå‘ç”Ÿæ­»é”ï¼Œ6-4&lt;3ã€‚</p>
<p>èµ„æºåˆ†é…å›¾å¦‚ä¸‹å›¾ï¼Œç³»ç»Ÿæ˜¯å¦å¤„äºæ­»é”çŠ¶æ€ï¼Ÿ</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-17_09-58-35.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-17_09-58-47.png"></p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»ŸæœŸæœ«å¤ä¹ ä¹‹è¿›ç¨‹ç®¡ç†</title>
    <url>/2023/06/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5/</url>
    <content><![CDATA[<h1 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h1><p>æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹ç®¡ç†æ˜¯æ•´ä¸ªæ“ä½œç³»ç»Ÿç®¡ç†ä¸­çš„æ ¸å¿ƒï¼Œå®ƒåŒ…å«äº†è¿›ç¨‹çš„è°ƒåº¦ã€åè°ƒä»¥åŠè¿›ç¨‹é€šä¿¡ã€‚</p>
<h2 id="è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µ-ã€æ¯”è¾ƒ"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µ-ã€æ¯”è¾ƒ" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µ ã€æ¯”è¾ƒ"></a>è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µ ã€æ¯”è¾ƒ</h2><p>â€‹	å…¸å‹çš„è¿›ç¨‹å®šä¹‰æœ‰ï¼š<br>ï¼ˆ1ï¼‰è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œã€‚<br>ï¼ˆ2ï¼‰è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåŠå…¶æ•°æ®åœ¨å¤„ç†æœºä¸Šé¡ºåºæ‰§è¡Œæ—¶æ‰€å‘ç”Ÿçš„æ´»åŠ¨ã€‚<br>ï¼ˆ3ï¼‰è¿›ç¨‹æ˜¯ç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸Šè¿è¡Œçš„è¿‡ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ã€‚</p>
<p>â€‹	<strong>çº¿ç¨‹</strong>æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯<strong>ç‹¬ç«‹è¿è¡Œå’Œç‹¬ç«‹è°ƒåº¦</strong>çš„åŸºæœ¬å•ä½ï¼ˆCPUä¸ŠçœŸæ­£è¿è¡Œçš„æ˜¯çº¿ç¨‹ï¼‰ã€‚çº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰ä¸€ç‚¹åœ¨è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„èµ„æº(å¦‚ç¨‹åºè®¡æ•°å™¨,ä¸€ç»„å¯„å­˜å™¨å’Œæ ˆ)ï¼Œä½†æ˜¯å®ƒå¯ä¸åŒå±ä¸€ä¸ªè¿›ç¨‹çš„å…¶ä»–çš„<strong>çº¿ç¨‹å…±äº«</strong>è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æºã€‚</p>
<p>å¯¹æ¯”ï¼š</p>
<p>çº¿ç¨‹åªæ‹¥æœ‰å°‘é‡åœ¨è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„èµ„æºã€‚<br>è¿›ç¨‹å ç”¨èµ„æºå¤šï¼Œçº¿ç¨‹å ç”¨èµ„æºå°‘ï¼Œä½¿ç”¨çµæ´»ã€‚<br>çº¿ç¨‹ä¸èƒ½è„±ç¦»è¿›ç¨‹è€Œå­˜åœ¨ï¼Œçº¿ç¨‹çš„å±‚æ¬¡å…³ç³»ï¼Œæ‰§è¡Œé¡ºåºå¹¶ä¸æ˜æ˜¾ï¼Œä¼šå¢åŠ ç¨‹åºçš„å¤æ‚åº¦ã€‚<br>æ²¡æœ‰é€šè¿‡ä»£ç æ˜¾ç¤ºåˆ›å»ºçº¿ç¨‹çš„è¿›ç¨‹ï¼Œå¯ä»¥çœ‹æˆæ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„è¿›ç¨‹ã€‚</p>
<blockquote>
<p>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„åŸºæœ¬å•ä½</p>
<p>è¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„èµ„æºç©ºé—´ï¼Œè€Œçº¿ç¨‹ä¸CPUèµ„æºåˆ†é…æ— å…³ï¼Œå¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€è¿›ç¨‹å†…çš„èµ„æºï¼Œä½¿ç”¨ç›¸åŒçš„åœ°å€ç©ºé—´ã€‚</p>
<p>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«è‹¥å¹²ä¸ªçº¿ç¨‹ã€‚</p>
</blockquote>
<h2 id="å‰è¶‹å›¾"><a href="#å‰è¶‹å›¾" class="headerlink" title="å‰è¶‹å›¾"></a>å‰è¶‹å›¾</h2><p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_22-37-22.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_22-37-36.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_22-37-52.png"></p>
<h2 id="è¿›ç¨‹çš„åŸºæœ¬çŠ¶æ€åŠè½¬æ¢"><a href="#è¿›ç¨‹çš„åŸºæœ¬çŠ¶æ€åŠè½¬æ¢" class="headerlink" title="è¿›ç¨‹çš„åŸºæœ¬çŠ¶æ€åŠè½¬æ¢"></a>è¿›ç¨‹çš„åŸºæœ¬çŠ¶æ€åŠè½¬æ¢</h2><p><em><strong>è¿›ç¨‹çš„ä¸‰ç§åŸºæœ¬çŠ¶æ€</strong></em></p>
<p>å°±ç»ªçŠ¶æ€(Ready)ï¼šå½“è¿›ç¨‹å·²åˆ†é…åˆ°é™¤CPUä»¥å¤–çš„æ‰€æœ‰å¿…è¦èµ„æºåï¼Œåªè¦å†è·å¾—CPUï¼Œå°±å¯ä»¥ç«‹å³è¿è¡Œï¼Œè¿›ç¨‹è¿™æ—¶çš„çŠ¶æ€ç§°ä¸ºå°±ç»ªçŠ¶æ€ã€‚åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­å¯èƒ½å¤šä¸ªè¿›ç¨‹å¤„äºå°±ç»ªçŠ¶æ€ï¼Œé€šå¸¸å°†å®ƒä»¬æ’æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œç§°ä¸ºå°±ç»ªé˜Ÿåˆ—ã€‚</p>
<p>æ‰§è¡ŒçŠ¶æ€(Running)ï¼šè¿›ç¨‹å·²è·å¾—CPUï¼Œå…¶ç¨‹åºæ­£åœ¨æ‰§è¡Œã€‚</p>
<p>é˜»å¡çŠ¶æ€(Blocked)ï¼šæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ç”±äºå‘ç”ŸæŸäº‹ä»¶è€Œæš‚æ—¶æ— æ³•ç»§ç»­æ‰§è¡Œæ—¶ï¼Œä¾¿æ”¾å¼ƒå¤„ç†æœºè€Œå¤„äºæš‚åœçŠ¶æ€ï¼ŒæŠŠè¿™ç§æš‚åœçŠ¶æ€ç§°ä¸ºé˜»å¡çŠ¶æ€ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºç­‰å¾…çŠ¶æ€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_09-14-09.png"></p>
<p><em><strong>è¿›ç¨‹äº”ç§çŠ¶æ€åŠè½¬æ¢æ¨¡å‹</strong></em></p>
<p>â—¼å°±ç»ªï¼šå‡†å¤‡æ‰§è¡Œ<br>â—¼æ‰§è¡Œï¼šå ç”¨å¤„ç†æœºï¼ˆå•å¤„ç†æœºç¯å¢ƒä¸­ï¼ŒæŸä¸€æ—¶åˆ»ä»…ä¸€ä¸ªè¿›ç¨‹å ç”¨å¤„ç†æœºï¼‰<br>â—¼é˜»å¡ï¼šç­‰å¾…æŸäº‹ä»¶å‘ç”Ÿæ‰èƒ½æ‰§è¡Œï¼Œå¦‚ç­‰å¾…I&#x2F;Oå®Œæˆç­‰<br>â—¼æ–°å»ºï¼šè¿›ç¨‹å·²ç»åˆ›å»ºï¼Œä½†æœªè¢«OSæ¥çº³ä¸ºå¯æ‰§è¡Œè¿›ç¨‹ï¼Œå¹¶ä¸”ç¨‹åºè¿˜åœ¨è¾…å­˜ï¼ŒPCBåœ¨å†…å­˜<br>â—¼ç»ˆæ­¢ï¼šå› åœæ­¢æˆ–å–æ¶ˆï¼Œè¢«OSä»æ‰§è¡ŒçŠ¶æ€é‡Šæ”¾</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_09-21-57.png"></p>
<p><em><strong>çŠ¶æ€è½¬æ¢</strong></em><br>â‘  ç©º â†’ æ–°çŠ¶æ€	æ–°åˆ›å»ºçš„è¿›ç¨‹é¦–å…ˆå¤„äºæ–°çŠ¶æ€ã€‚<br>â‘¡ æ–°çŠ¶æ€ â†’ å°±ç»ªçŠ¶æ€	å½“ç³»ç»Ÿå…è®¸å¢åŠ å°±ç»ªè¿›ç¨‹æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ¥çº³æ–°å»ºçŠ¶æ€è¿›ç¨‹ï¼Œå°†å®ƒå˜ä¸ºå°±ç»ªçŠ¶æ€ï¼Œæ’å…¥å°±ç»ªé˜Ÿåˆ—ä¸­ã€‚<br>â‘¢ å°±ç»ªçŠ¶æ€ â†’ æ‰§è¡ŒçŠ¶æ€	å½“å¤„ç†æœºç©ºé—²æ—¶ï¼Œå°†ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œè¯¥é€‰æ‹©è¿‡ç¨‹ç§°ä¸º<strong>è¿›ç¨‹è°ƒåº¦</strong>ï¼Œæˆ–å°†å¤„ç†æœºåˆ†æ´¾ç»™ä¸€ä¸ªè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹çŠ¶æ€ä»å°±ç»ªè½¬å˜ä¸ºæ‰§è¡Œã€‚<br>â‘£ æ‰§è¡ŒçŠ¶æ€ â†’ ç»ˆæ­¢çŠ¶æ€	æ‰§è¡ŒçŠ¶æ€çš„è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–å‡ºç°è¯¸å¦‚è®¿é—®åœ°å€è¶Šç•Œã€éæ³•æŒ‡ä»¤ç­‰é”™è¯¯ï¼Œè€Œè¢«å¼‚å¸¸ç»“æŸï¼Œåˆ™è¿›ç¨‹ä»æ‰§è¡ŒçŠ¶æ€è½¬æ¢ä¸ºç»ˆæ­¢çŠ¶æ€ã€‚</p>
<p>â‘¤ æ‰§è¡ŒçŠ¶æ€ â†’ å°±ç»ªçŠ¶æ€	åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œ<strong>æ—¶é—´ç‰‡ç”¨å®Œï¼Œæˆ–ä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹åˆ°æ¥</strong>ï¼Œå°†ä¸­æ–­è¾ƒä½ä¼˜å…ˆçº§è¿›ç¨‹çš„æ‰§è¡Œã€‚è¿›ç¨‹ä»æ‰§è¡ŒçŠ¶æ€è½¬å˜ä¸ºå°±ç»ªçŠ¶æ€ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒåº¦ã€‚<br>â‘¥ æ‰§è¡ŒçŠ¶æ€ â†’ é˜»å¡çŠ¶æ€	æ‰§è¡Œè¿›ç¨‹éœ€è¦ç­‰å¾…æŸäº‹ä»¶å‘ç”Ÿã€‚é€šå¸¸ï¼Œä¼šå› ä¸ºè¿›ç¨‹éœ€è¦çš„ç³»ç»Ÿè°ƒç”¨ä¸èƒ½ç«‹å³å®Œæˆï¼Œå¦‚è¯»æ–‡ä»¶ã€å…±äº«è™šæ‹Ÿå†…å­˜ã€ç­‰å¾…I&#x2F;Oæ“ä½œã€ç­‰å¾…å¦ä¸€è¿›ç¨‹ä¸ä¹‹é€šä¿¡ç­‰äº‹ä»¶è€Œé˜»å¡ã€‚<br>â‘¦ é˜»å¡çŠ¶æ€ â†’ å°±ç»ªçŠ¶æ€	å½“é˜»å¡è¿›ç¨‹ç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿï¼Œå°±è½¬æ¢ä¸ºå°±ç»ªçŠ¶æ€ã€‚è¿›å…¥å°±ç»ªé˜Ÿåˆ—æ’é˜Ÿï¼Œç­‰å¾…è¢«è°ƒåº¦æ‰§è¡Œã€‚</p>
<p><em><strong>å¤šä¸ªè¿›ç¨‹ç«äº‰å†…å­˜èµ„æº</strong></em></p>
<p>â—¼å†…å­˜èµ„æºç´§å¼ <br>â—¼æ— å°±ç»ªè¿›ç¨‹ï¼Œå¤„ç†æœºç©ºé—²ï¼šI&#x2F;Oçš„é€Ÿåº¦æ¯”å¤„ç†æœºçš„é€Ÿåº¦æ…¢å¾—å¤šï¼Œå¯èƒ½å‡ºç°å…¨éƒ¨è¿›ç¨‹é˜»å¡,ç­‰å¾…I&#x2F;O</p>
<p><em>è§£å†³åŠæ³•</em></p>
<p>â—¼é‡‡ç”¨äº¤æ¢æŠ€æœ¯ï¼šæ¢å‡ºä¸€éƒ¨åˆ†è¿›ç¨‹åˆ°å¤–å­˜ï¼Œä»¥è…¾å‡ºå†…å­˜ç©ºé—´ï¼ˆå¯¹æ¢ï¼‰<br>â—¼é‡‡ç”¨è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯ï¼šæ¯ä¸ªè¿›ç¨‹åªèƒ½è£…å…¥ä¸€éƒ¨åˆ†ç¨‹åºå’Œæ•°æ®ï¼ˆå­˜å‚¨ç®¡ç†éƒ¨åˆ†ï¼‰</p>
<p>ä½¿æ‰§è¡Œçš„è¿›ç¨‹æš‚åœæ‰§è¡Œã€é™æ­¢ä¸‹æ¥ã€‚æˆ‘ä»¬æŠŠè¿™ç§é™æ­¢çŠ¶æ€ç§°ä¸º<strong>æŒ‚èµ·çŠ¶æ€</strong>ï¼ˆç”±æ´»åŠ¨åˆ°é™æ­¢ï¼Œç”±å†…å­˜åˆ°å¤–å­˜ï¼‰ã€‚</p>
<p><em><strong>æŒ‚èµ·ä¸é˜»å¡</strong></em></p>
<p>åŒºåˆ†ä¸¤ä¸ªæ¦‚å¿µï¼š<br>è¿›ç¨‹æ˜¯å¦ç­‰å¾…äº‹ä»¶ï¼Œé˜»å¡ä¸å¦? è¿›ç¨‹æ˜¯å¦è¢«æ¢å‡ºå†…å­˜ï¼ŒæŒ‚èµ·ä¸å¦ï¼Ÿ</p>
<p>ï¼”ç§çŠ¶æ€ç»„åˆ<br>å°±ç»ªï¼šè¿›ç¨‹åœ¨å†…å­˜ï¼Œå‡†å¤‡æ‰§è¡Œ<br>é˜»å¡ï¼šè¿›ç¨‹åœ¨å†…å­˜ï¼Œç­‰å¾…äº‹ä»¶<br>å°±ç»ª&#x2F;æŒ‚èµ·ï¼ˆé™æ­¢å°±ç»ªï¼‰ï¼šè¿›ç¨‹åœ¨å¤–å­˜ï¼Œåªè¦è°ƒå…¥å†…å­˜å³å¯æ‰§è¡Œ<br>é˜»å¡&#x2F;æŒ‚èµ·ï¼ˆé™æ­¢é˜»å¡ï¼‰ï¼šè¿›ç¨‹åœ¨å¤–å­˜ï¼Œç­‰å¾…äº‹ä»¶</p>
<p>è‹¥è¿›ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼Œå½“å¼•èµ·é˜»å¡çš„æ¡ä»¶è¢«è§£é™¤æ—¶ï¼Œè¿›ç¨‹çŠ¶æ€åº”å˜ä¸ºè¿è¡ŒçŠ¶æ€ã€‚(Ã—)</p>
<p>â‘  è¿›ç¨‹ç”±ç¨‹åºå’Œæ•°æ®ä¸¤éƒ¨åˆ†ç»„æˆã€‚ï¼ˆÃ— ï¼‰<br>â‘¡ ç¨‹åºçš„å°é—­æ€§æ˜¯æŒ‡è¯¥ç¨‹åºä¸å…è®¸æŸäº›è¿›ç¨‹è°ƒç”¨ã€‚ï¼ˆ Ã—ï¼‰<br>â‘¢ æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æ˜¯<strong>èµ„æºåˆ†é…</strong> ã€<strong>è°ƒåº¦</strong>å’Œç®¡ç†çš„æœ€å°ç‹¬ç«‹å•ä½ ï¼Œ æ“ä½œç³»ç»Ÿçš„å„ç§æ´»åŠ¨éƒ½ä¸<strong>è¿›ç¨‹</strong>æœ‰å…³ã€‚</p>
<h2 id="PCBçš„ä½œç”¨"><a href="#PCBçš„ä½œç”¨" class="headerlink" title="PCBçš„ä½œç”¨"></a>PCBçš„ä½œç”¨</h2><p>ä¸ºä½¿ç¨‹åºï¼ˆå«æ•°æ®ï¼‰èƒ½ç‹¬ç«‹è¿è¡Œï¼Œåº”ä¸ºä¹‹é…ç½®ä¸€è¿›ç¨‹æ§åˆ¶å—ï¼Œå³<strong>PCB</strong>(Process Control Block)ï¼› è€Œç”±ç¨‹åºæ®µã€ç›¸å…³çš„æ•°æ®æ®µå’ŒPCBä¸‰éƒ¨åˆ†ä¾¿æ„æˆäº†è¿›ç¨‹å®ä½“ã€‚æ‰€è°“åˆ›å»ºè¿›ç¨‹ï¼Œå®è´¨ä¸Šæ˜¯åˆ›å»ºè¿›ç¨‹å®ä½“ä¸­çš„PCBï¼›è€Œæ’¤æ¶ˆè¿›ç¨‹ï¼Œå®è´¨ä¸Šæ˜¯æ’¤æ¶ˆè¿›ç¨‹çš„PCBã€‚</p>
<p><em><strong>è¿›ç¨‹æ§åˆ¶å—çš„ä½œç”¨</strong></em><br>1ï¼‰ ä½œä¸ºç‹¬ç«‹è¿è¡ŒåŸºæœ¬å•ä½çš„æ ‡å¿—ï¼›<br>2ï¼‰ èƒ½å®ç°é—´æ–­æ€§è¿è¡Œæ–¹å¼ï¼›<br>3ï¼‰ æä¾›è¿›ç¨‹ç®¡ç†æ‰€éœ€è¦çš„ä¿¡æ¯ï¼›<br>4ï¼‰ æä¾›è¿›ç¨‹è°ƒåº¦æ‰€éœ€è¦çš„ä¿¡æ¯ï¼›<br>5ï¼‰ å®ç°ä¸å…¶ä»–è¿›ç¨‹çš„åŒæ­¥ä¸é€šä¿¡ã€‚</p>
<p>PCB(process control block)å¸¸é©»å†…å­˜ï¼Œæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ï¼›</p>
<p><em><strong>è¿›ç¨‹æ§åˆ¶å—ä¸­çš„ä¿¡æ¯</strong></em><br>1ï¼‰è¿›ç¨‹æ ‡è¯†ç¬¦<br>2ï¼‰å¤„ç†æœºçŠ¶æ€<br>3ï¼‰è¿›ç¨‹è°ƒåº¦ä¿¡æ¯<br>4ï¼‰è¿›ç¨‹æ§åˆ¶ä¿¡æ¯</p>
<p><em><strong>PCBçš„ç»„ç»‡æ–¹å¼</strong></em></p>
<p>1ï¼‰çº¿æ€§æ–¹å¼<br>å°†ç³»ç»Ÿä¸­çš„æ‰€æœ‰PCBç»„ç»‡åœ¨ä¸€å¼ çº¿æ€§è¡¨ä¸­ï¼Œå°†è¯¥è¡¨çš„é¦–åœ°å€å­˜æ”¾åœ¨ä¸€ä¸ªä¸“ç”¨åŒºåŸŸä¸­ã€‚<br>2ï¼‰é“¾æ¥æ–¹å¼<br>æŠŠå…·æœ‰åŒä¸€çŠ¶æ€çš„PCBï¼Œç”¨å…¶ä¸­çš„é“¾æ¥å­—é“¾æ¥æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ’æˆå°±ç»ªé˜Ÿåˆ—ï¼Œè‹¥å¹²ä¸ªé˜»å¡é˜Ÿåˆ—ä»¥åŠç©ºç™½é˜Ÿåˆ—ã€‚<br>3ï¼‰ç´¢å¼•æ–¹å¼<br>ç³»ç»Ÿæ ¹æ®æ‰€æœ‰è¿›ç¨‹çš„çŠ¶æ€å»ºç«‹å‡ å¼ ç´¢å¼•è¡¨ã€‚</p>
<h2 id="è¿›ç¨‹æ§åˆ¶çš„åŸè¯­æ“ä½œ"><a href="#è¿›ç¨‹æ§åˆ¶çš„åŸè¯­æ“ä½œ" class="headerlink" title="è¿›ç¨‹æ§åˆ¶çš„åŸè¯­æ“ä½œ"></a>è¿›ç¨‹æ§åˆ¶çš„åŸè¯­æ“ä½œ</h2><p><strong>åŸè¯­</strong></p>
<p>æ˜¯ç”±è‹¥å¹²æ¡æŒ‡ä»¤ç»„æˆçš„ï¼Œæ˜¯ç”¨äºå®Œæˆä¸€å®šåŠŸèƒ½çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚<br>â¢ åŸè¯­æ˜¯åŸå­æ“ä½œï¼šä¸€ä¸ªæ“ä½œä¸­çš„æ‰€æœ‰åŠ¨ä½œè¦ä¹ˆå…¨åšï¼Œè¦ä¹ˆå…¨ä¸åšã€‚ï¼ˆæ“ä½œä¸å¯ä¸­æ–­ï¼‰<br>â¢ <em>åŸå­æ“ä½œåœ¨ç³»ç»Ÿæ€ä¸‹æ‰§è¡Œï¼Œå¸¸é©»å†…å­˜</em>ã€‚<br>â¢ åŸè¯­çš„ä½œç”¨æ˜¯ä¸ºäº†å®ç°è¿›ç¨‹çš„é€šä¿¡å’Œæ§åˆ¶ï¼Œç³»ç»Ÿå¯¹è¿›ç¨‹çš„æ§åˆ¶å¦‚ä¸ä½¿ç”¨åŸè¯­ä¼šé€ æˆå…¶çŠ¶æ€çš„ä¸ç¡®å®šæ€§ï¼Œè¾¾ä¸åˆ°è¿›ç¨‹æ§åˆ¶çš„ç›®çš„ã€‚</p>
<p><em><strong>è¿›ç¨‹åˆ›å»º</strong></em><br>è°ƒç”¨è¿›ç¨‹<strong>åˆ›å»ºåŸè¯­Creat</strong>ï¼ˆ ï¼‰æŒ‰ä¸‹è¿°æ­¥éª¤åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼š<br>ï¼ˆ1ï¼‰ç”³è¯·ç©ºç™½PCBã€‚<br>ï¼ˆ2ï¼‰ä¸ºæ–°è¿›ç¨‹åˆ†é…èµ„æºã€‚<br>ï¼ˆ3ï¼‰åˆå§‹åŒ–è¿›ç¨‹æ§åˆ¶å—ã€‚åŒ…æ‹¬ï¼šâ‘ åˆå§‹åŒ–æ ‡è¯†ä¿¡æ¯ã€‚â‘¡åˆå§‹åŒ–å¤„ç†æœºçŠ¶æ€ä¿¡æ¯ã€‚â‘¢åˆå§‹åŒ–å¤„ç†æœºæ§åˆ¶ä¿¡æ¯ã€‚<br>ï¼ˆ4ï¼‰å°†æ–°è¿›ç¨‹æ’å…¥å°±ç»ªé˜Ÿåˆ—ã€‚</p>
<p><em><strong>è¿›ç¨‹é˜»å¡è¿‡ç¨‹</strong></em><br>1)æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå½“å‘ç°ä¸Šè¿°æŸäº‹ä»¶æ—¶ï¼Œç”±äºæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œäºæ˜¯è¿›ç¨‹ä¾¿é€šè¿‡è°ƒç”¨<strong>é˜»å¡åŸè¯­block</strong>( )æŠŠè‡ªå·±é˜»å¡ã€‚<br>2)æŠŠè¿›ç¨‹æ§åˆ¶å—ä¸­çš„ç°è¡ŒçŠ¶æ€ç”±â€œæ‰§è¡Œâ€æ”¹ä¸ºâ€œé˜»å¡â€ï¼Œå¹¶å°†PCBæ’å…¥é˜»å¡é˜Ÿåˆ—ã€‚<br>3)è½¬è°ƒåº¦ç¨‹åºè¿›è¡Œé‡æ–°è°ƒåº¦ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å¦ä¸€å°±ç»ªè¿›ç¨‹ï¼Œå¹¶è¿›è¡Œåˆ‡æ¢ã€‚</p>
<p><em><strong>è¿›ç¨‹çš„å”¤é†’</strong></em><br>å½“è¢«é˜»å¡è¿›ç¨‹æ‰€æœŸå¾…çš„äº‹ä»¶å‡ºç°æ—¶ï¼Œåˆ™ç”±æœ‰å…³è¿›ç¨‹ï¼ˆæ¯”å¦‚ï¼Œç”¨å®Œå¹¶é‡Šæ”¾äº†è¯¥I&#x2F;Oè®¾å¤‡çš„è¿›ç¨‹ï¼‰è°ƒç”¨<strong>å”¤é†’åŸè¯­wakeup</strong>ï¼ˆ ï¼‰ï¼Œå°†ç­‰å¾…è¯¥äº‹ä»¶çš„è¿›ç¨‹å”¤é†’ã€‚<br>1ï¼‰é¦–å…ˆæŠŠè¢«é˜»å¡çš„è¿›ç¨‹ä»ç­‰å¾…è¯¥äº‹ä»¶çš„é˜»å¡é˜Ÿåˆ—ä¸­ç§»å‡ºï¼Œå°†å…¶PCBä¸­çš„ç°è¡ŒçŠ¶æ€ç”±é˜»å¡æ”¹ä¸ºå°±ç»ªã€‚<br>2ï¼‰ç„¶åå†å°†è¯¥PCBæ’å…¥åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ã€‚</p>
<p>BlockåŸè¯­å’ŒWakeupæ˜¯ä¸€å¯¹ä½œç”¨ç›¸åçš„åŸè¯­ï¼›æœ‰å‰è€…å°±å¿…å®šç”±åè€…ï¼Œå¦åˆ™ï¼šè¢«é˜»å¡çš„è¿›ç¨‹å°†ä¼šå› ä¸èƒ½è¢«å”¤é†’è€Œé•¿æœŸå¤„äºé˜»å¡çŠ¶æ€ï¼Œä»è€Œæ— æ³•ç»§ç»­è¿è¡Œã€‚</p>
<p><em><strong>è¿›ç¨‹çš„æŒ‚èµ·</strong></em><br>å½“å‡ºç°äº†å¼•èµ·è¿›ç¨‹æŒ‚èµ·çš„äº‹ä»¶æ—¶ï¼Œç³»ç»Ÿå°†åˆ©ç”¨<strong>æŒ‚èµ·åŸè¯­suspend</strong>ï¼ˆ ï¼‰å°†æŒ‡å®šè¿›ç¨‹è¿›ç¨‹æŒ‚èµ·ã€‚<br>æŒ‚èµ·åŸè¯­çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ï¼š<br>â€¢é¦–å…ˆæ£€æŸ¥è¢«æŒ‚èµ·è¿›ç¨‹çš„çŠ¶æ€ï¼Œè‹¥å¤„äºæ´»åŠ¨å°±ç»ªçŠ¶æ€ï¼Œä¾¿å°†å…¶æ”¹ä¸ºé™æ­¢å°±ç»ªï¼›<br>â€¢å¯¹äºæ´»åŠ¨é˜»å¡çŠ¶æ€çš„è¿›ç¨‹ï¼Œåˆ™å°†ä¹‹æ”¹ä¸ºé™æ­¢é˜»å¡çŠ¶æ€ã€‚</p>
<p><em><strong>è¿›ç¨‹çš„æ¿€æ´»è¿‡ç¨‹</strong></em><br>1ï¼‰å½“å‘ç”Ÿæ¿€æ´»è¿›ç¨‹çš„äº‹ä»¶æ—¶ï¼Œåˆ™å¯å°†åœ¨å¤–å­˜ä¸Šå¤„äºé™æ­¢å°±ç»ªçŠ¶æ€çš„è¿›ç¨‹æ¢å…¥å†…å­˜ã€‚<br>2ï¼‰ç³»ç»Ÿåˆ©ç”¨<strong>æ¿€æ´»åŸè¯­active</strong>ï¼ˆ ï¼‰å°†æŒ‡å®šè¿›ç¨‹æ¿€æ´»:<br>â–ªæ¿€æ´»åŸè¯­å…ˆå°†è¿›ç¨‹ä»å¤–å­˜è°ƒå…¥å†…å­˜ï¼Œæ£€æŸ¥è¯¥è¿›ç¨‹çš„ç°è¡ŒçŠ¶æ€;<br>â–ªè‹¥æ˜¯é™æ­¢å°±ç»ªï¼Œä¾¿å°†ä¹‹æ”¹ä¸ºæ´»åŠ¨å°±ç»ªï¼›è‹¥ä¸ºé™æ­¢é˜»å¡ï¼Œä¾¿å°†ä¹‹æ”¹ä¸ºæ´»åŠ¨é˜»å¡ã€‚</p>
<ol>
<li>åŸè¯­æ˜¯æŒ‡æ“ä½œç³»ç»Ÿä¸­çš„åˆå§‹åŒ–ç¨‹åºã€‚ï¼ˆÃ— ï¼‰</li>
<li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥ç”±ç³»ç»Ÿåˆ›å»ºï¼Œæˆ–è€…ç”±(çˆ¶è¿›ç¨‹ )ç”¨åˆ›å»ºåŸè¯­åˆ›å»ºã€‚è¢«åˆ›å»ºçš„è¿›ç¨‹å¼€å§‹å¤„äºç­‰å¾…çŠ¶æ€ã€‚åœ¨æ¡ä»¶æˆç†Ÿæ—¶ï¼Œé‡‡ç”¨(è°ƒåº¦ ) åŸè¯­ä¸ºå®ƒä»¬åˆ†é…é™¤ï¼ˆå¤„ç†æœºï¼‰ä»¥å¤–çš„æ‰€éœ€èµ„æºï¼Œå¹¶è¢«æ’åˆ—åˆ°(å°±ç»ª )é˜Ÿåˆ—ä¸­ã€‚</li>
<li>è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå› ä¸º(ç¼ºä¹èµ„æº )ã€ç­‰å¾…I&#x2F;Oæ“ä½œç­‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé€šè¿‡( é˜»å¡)åŸè¯­å°†å®ƒæ’¤ä¸‹ï¼Œæ’å…¥( ç­‰å¾…)é˜Ÿåˆ—ï¼Œå¹¶å¼•èµ·æ–°çš„( è¿›ç¨‹è°ƒåº¦)ã€‚</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/616953-20160619213048991-866706486.png"></p>
<h2 id="è¿›ç¨‹åŒæ­¥"><a href="#è¿›ç¨‹åŒæ­¥" class="headerlink" title="è¿›ç¨‹åŒæ­¥"></a>è¿›ç¨‹åŒæ­¥</h2><p>ä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®çš„èµ„æºä¸º<strong>ä¸´ç•Œèµ„æº</strong>ã€‚</p>
<p>æ¯ä¸ªè¿›ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç ç§°ä¸º<strong>ä¸´ç•ŒåŒº</strong></p>
<p><strong>è¿›ç¨‹äº’æ–¥</strong>ï¼šä¸€ä¸ªè¿›ç¨‹æ­£åœ¨è®¿é—®ä¸´ç•Œèµ„æºï¼Œå¦ä¸€ä¸ªè¦è®¿é—®è¯¥èµ„æºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…ã€‚</p>
<p><em><strong>åŒæ­¥æœºåˆ¶åº”éµå¾ªçš„è§„åˆ™</strong></em><br>1)ç©ºé—²è®©è¿›<br>2)å¿™åˆ™ç­‰å¾…<br>3)æœ‰é™ç­‰å¾…<br>4)è®©æƒç­‰å¾…</p>
<p>å¹¶å‘è¿›ç¨‹å¯ä»¥åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œäº¤æ›¿è®¿é—®ä¸´ç•Œèµ„æºã€‚ï¼ˆÃ—ï¼‰</p>
<p><em><strong>è§£å†³ä¸´ç•ŒåŒºï¼ˆäº’æ–¥ï¼‰é—®é¢˜çš„å‡ ç±»æ–¹æ³•</strong></em><br>ï¼ˆ1ï¼‰ç¡¬ä»¶åŒæ­¥æœºåˆ¶<br>ï¼ˆ2ï¼‰ä¿¡å·é‡æœºåˆ¶<br>ï¼ˆ3ï¼‰ç®¡ç¨‹æœºåˆ¶</p>
<h2 id="ä¿¡å·é‡æœºåˆ¶"><a href="#ä¿¡å·é‡æœºåˆ¶" class="headerlink" title="ä¿¡å·é‡æœºåˆ¶"></a>ä¿¡å·é‡æœºåˆ¶</h2><p>1ï¼‰æ•´å‹ä¿¡å·é‡<br>2ï¼‰è®°å½•å‹ä¿¡å·é‡<br>3ï¼‰ANDå‹ä¿¡å·é‡<br>4ï¼‰ä¿¡å·é‡é›†</p>
<p><em><strong>æ•´å‹ä¿¡å·é‡</strong></em></p>
<p>å®šä¹‰ä¸ºä¸€ä¸ªæ•´å‹é‡ ,ä»…èƒ½é€šè¿‡ä¸¤ä¸ªæ ‡å‡†çš„åŸå­æ“ä½œwaitï¼ˆSï¼‰å’Œsignalï¼ˆSï¼‰æ¥è®¿é—®ã€‚åˆç§°ä¸ºPã€Væ“ä½œã€‚<br><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_10-30-23.png"></p>
<p>1ï¼‰Pã€Væ“ä½œ(å³wait(s)å’Œsignal(s))ä¸ºåŸè¯­æ“ä½œâ€”â€”ä¸å¯ä¸­æ–­<br>2ï¼‰æ•´å‹ä¿¡å·é‡çš„ä½¿ç”¨ï¼š<br>â‘  å¿…é¡»ç½®ä¸€æ¬¡ä¸”åªèƒ½ç½®ä¸€æ¬¡åˆå€¼ï¼Œå¹¶ä¸”åˆå€¼ä¸èƒ½ä¸ºè´Ÿæ•°ã€‚<br>â‘¡ åªèƒ½æ‰§è¡ŒPã€Væ“ä½œã€‚<br>â‘¢å¿…é¡»æˆå¯¹ä½¿ç”¨Pã€Væ“ä½œï¼šPæ“ä½œé—æ¼åˆ™ä¸èƒ½ä¿è¯äº’æ–¥è®¿é—®ï¼ŒVæ“ä½œé—æ¼åˆ™ä¸èƒ½åœ¨ä½¿ç”¨ä¸´ç•Œèµ„æºä¹‹åå°†å…¶é‡Šæ”¾ï¼›Pï¼ŒVæ¬¡åºä¸èƒ½é”™è¯¯ã€é‡å¤æˆ–é—æ¼ã€‚<br>3ï¼‰æ•´å‹ä¿¡å·é‡çš„ç¼ºç‚¹ï¼šæœªéµå¾ªåŒæ­¥æœºåˆ¶çš„â€œè®©æƒç­‰å¾…â€ä¸€ç›´åˆ¤æ–­æ˜¯å¦å¤„ç†å®Œï¼Œå ç”¨å¤„ç†æœºã€‚ï¼ˆä½¿ç¨‹åºå¤„äºå¿™ç­‰çŠ¶æ€ï¼Œè¿™æ„å‘³ç€å½“ä¸€ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…ä¿¡å·é‡æ—¶ï¼Œå®ƒä¼šä¸æ–­åœ°æ£€æŸ¥ä¿¡å·é‡çš„å€¼ï¼Œè€Œä¸æ˜¯é‡Šæ”¾CPUèµ„æºï¼Œè¿™ä¼šæµªè´¹å¤§é‡çš„CPUæ—¶é—´ã€‚ï¼‰</p>
<p><em><strong>è®°å½•å‹ä¿¡å·é‡</strong></em></p>
<p>è®°å½•å‹ä¿¡å·é‡æœºåˆ¶ï¼Œåˆ™æ˜¯ä¸€ç§ä¸å­˜åœ¨â€œå¿™ç­‰â€ç°è±¡çš„è¿›ç¨‹åŒæ­¥æœºåˆ¶ã€‚</p>
<p>è®°å½•å‹ä¿¡å·é‡çš„waitï¼ˆSï¼‰æ“ä½œï¼ˆ å³P(S) ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">procedure wait(S)</span><br><span class="line">	var S: semaphore;</span><br><span class="line">		begin</span><br><span class="line">			S.value:ï¼S.value-1;</span><br><span class="line">			if S.valueï¼œ0 then block(S.L);</span><br><span class="line">		end</span><br></pre></td></tr></table></figure>

<p>S.valueï¼œ0ï¼Œè¯¥ç±»èµ„æºå·²ç»åˆ†é…å®Œæ¯•ï¼Œè¿›ç¨‹å¿…é¡»æ”¾å¼ƒå¤„ç†æœºï¼Œè‡ªæˆ‘é˜»å¡ã€‚</p>
<p>è®°å½•å‹ä¿¡å·é‡é‡‡ç”¨äº†â€œè®©æƒç­‰å¾…â€ç­–ç•¥ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…ä¿¡å·é‡æ—¶ï¼Œå®ƒä¼šè¢«<strong>é˜»å¡å¹¶é‡Šæ”¾CPUèµ„æº</strong>ï¼Œç›´åˆ°è¢«å”¤é†’è¿™æ ·å°±é¿å…äº†å¿™ç­‰ç°è±¡ã€‚</p>
<p>è®°å½•å‹ä¿¡å·é‡çš„signalï¼ˆSï¼‰æ“ä½œï¼ˆ å³V(S) ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">procedure signalï¼ˆSï¼‰</span><br><span class="line">	var S:semaphore;</span><br><span class="line">	begin</span><br><span class="line">		S.value:ï¼S.value+1;</span><br><span class="line">		if S.valueâ‰¤0 then wakeup(S.L);</span><br><span class="line">	end</span><br></pre></td></tr></table></figure>

<p>S.value&gt;0è¡¨ç¤ºæœ‰S.valueä¸ªèµ„æºå¯ç”¨;S.value&#x3D;0è¡¨ç¤ºæ— èµ„æºå¯ç”¨ã€‚</p>
<p>S.valueâ‰¤0 ï¼Œåœ¨ä¿¡å·é‡é“¾è¡¨ä¸­ï¼Œä»æœ‰ç­‰å¾…è¯¥èµ„æºçš„è¿›ç¨‹è¢«é˜»å¡ã€‚</p>
<p>è®°å½•å‹ä¿¡å·é‡: è‹¥S.value&lt;0ï¼Œåˆ™| S.value|è¡¨ç¤ºSç­‰å¾…é˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ä¸ªæ•°ã€‚</p>
<p><em><strong>ANDå‹ä¿¡å·é‡</strong></em></p>
<p>ANDåŒæ­¥æœºåˆ¶çš„åŸºæœ¬æ€æƒ³ï¼šå°†è¿›ç¨‹åœ¨æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦çš„æ‰€æœ‰èµ„æºï¼Œä¸€æ¬¡æ€§å…¨éƒ½åœ°åˆ†é…ç»™è¿›ç¨‹ï¼Œå¾…è¿›ç¨‹ä½¿ç”¨å®Œåå†ä¸€èµ·é‡Šæ”¾ã€‚åªè¦å°šæœ‰ä¸€ä¸ªèµ„æºæœªèƒ½åˆ†é…ç»™è¿›ç¨‹ï¼Œå…¶å®ƒæ‰€æœ‰å¯èƒ½ä¸ºä¹‹åˆ†é…çš„èµ„æºï¼Œä¹Ÿä¸åˆ†é…ç»™ä»–ã€‚ åœ¨waitæ“ä½œä¸­ï¼Œå¢åŠ äº†ä¸€ä¸ªâ€œANDâ€æ¡ä»¶ï¼Œæ•…ç§°ä¸ºANDåŒæ­¥ï¼Œæˆ–ç§°ä¸º<strong>åŒæ—¶wait</strong>æ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Swaitï¼ˆS1ï¼ŒS2ï¼ŒÂ·Â·Â·ï¼ŒSn ï¼‰ &#123;</span><br><span class="line">	whileï¼ˆtrueï¼‰&#123;</span><br><span class="line">		ifï¼ˆ S1â‰¥1 and S2â‰¥1 andâ€¦and Snâ‰¥1 ï¼‰&#123;</span><br><span class="line">			for (i = 1 ; i&lt;= n; i++)&#123;</span><br><span class="line">				Si = Si â€“ 1;</span><br><span class="line">		&#125;</span><br><span class="line">		break;</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">			è°ƒç”¨è¿›ç¨‹è¿›å…¥ç¬¬ä¸€ä¸ªå°äº1çš„ä¿¡å·é‡çš„ç­‰å¾…é˜Ÿåˆ—Sj.queue;é˜»å¡è°ƒç”¨è¿›ç¨‹;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Ssignalï¼ˆS1ï¼ŒS2ï¼ŒÂ·Â·Â·ï¼ŒSnï¼‰&#123;</span><br><span class="line">	for( i = 1; i&lt;= n; i++ )&#123;</span><br><span class="line">		Si = Si+1;</span><br><span class="line">		for (each process P waiting in Si.queue)</span><br><span class="line">			ä»ç­‰å¾…é˜Ÿåˆ—Si.queueä¸­å–å‡ºè¿›ç¨‹Pæ”¾å…¥å°±ç»ªé˜Ÿåˆ—;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em><strong>ä¿¡å·é‡é›†</strong></em></p>
<p>ä¸€èˆ¬ä¿¡å·é‡é›†æ˜¯æŒ‡åŒæ—¶éœ€è¦<strong>å¤šç§èµ„æº</strong>ã€æ¯ç§<strong>å ç”¨çš„æ•°ç›®ä¸åŒ</strong>ã€ä¸”å¯åˆ†é…çš„èµ„æºè¿˜å­˜åœ¨ä¸€ä¸ªä¸´ç•Œå€¼æ—¶çš„ä¿¡å·é‡å¤„ç†ã€‚ä¸€èˆ¬ä¿¡å·é‡é›†çš„åŸºæœ¬æ€è·¯å°±æ˜¯åœ¨ANDå‹ä¿¡å·é‡é›†çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å……ï¼Œåœ¨ä¸€æ¬¡åŸè¯­æ“ä½œä¸­å®Œæˆæ‰€æœ‰çš„èµ„æºç”³è¯·</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Swaitï¼ˆS1ï¼Œt1ï¼Œd1ï¼Œâ€¦ï¼ŒSnï¼Œtnï¼Œdnï¼‰ï¼ˆæ»¡è¶³tiâ‰¥ diï¼‰</span><br><span class="line">	if( S1 â‰¥t1 &amp;â€¦&amp; Snâ‰¥tn)&#123;</span><br><span class="line">		for( i =1; i&lt;=n; i++)&#123;</span><br><span class="line">			Si ï¼Si ï¼ di;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">			è°ƒç”¨è¿›ç¨‹è¿›å…¥ç¬¬ä¸€ä¸ªå°äº1çš„ä¿¡å·é‡çš„ç­‰å¾…é˜Ÿåˆ—Sj.queue;é˜»å¡è°ƒç”¨è¿›ç¨‹;</span><br><span class="line">	&#125;//end if</span><br><span class="line">&#125;//end Swait</span><br></pre></td></tr></table></figure>

<p>tnä¸ºèµ„æºä¸‹é™å€¼ï¼Œdnä¸ºéœ€æ±‚é‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Ssignalï¼ˆS1ï¼Œd1ï¼ŒÂ·Â·Â·ï¼ŒSnï¼Œdnï¼‰&#123;</span><br><span class="line">	for( i =1; i&lt;= n; i++)&#123;</span><br><span class="line">		Si = Si + diï¼›</span><br><span class="line">		for (each process P waiting in Si.queue)</span><br><span class="line">			ä»ç­‰å¾…é˜Ÿåˆ—Si.queueä¸­å–å‡ºè¿›ç¨‹Pæ”¾å…¥å°±ç»ªé˜Ÿåˆ—;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¿¡å·é‡åº”ç”¨"><a href="#ä¿¡å·é‡åº”ç”¨" class="headerlink" title="ä¿¡å·é‡åº”ç”¨"></a>ä¿¡å·é‡åº”ç”¨</h2><p><em><strong>åˆ©ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹äº’æ–¥</strong></em></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_11-35-54.png"></p>
<p><em><strong>åˆ©ç”¨ä¿¡å·é‡å®ç°å‰è¶‹å…³ç³»</strong></em></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_10-31-12.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p1( )&#123; S1ï¼› signalï¼ˆaï¼‰ï¼›signalï¼ˆbï¼‰ï¼›&#125;</span><br><span class="line">p2( )&#123; wait(a); S2ï¼›signalï¼ˆcï¼‰ï¼›signalï¼ˆdï¼‰; &#125;</span><br><span class="line">p3( )&#123; waitï¼ˆbï¼‰ï¼›S3ï¼›signalï¼ˆeï¼‰ï¼›&#125;</span><br><span class="line">p4( )&#123; waitï¼ˆcï¼‰ï¼›S4ï¼›signalï¼ˆfï¼‰ï¼›&#125;</span><br><span class="line">p5( )&#123; waitï¼ˆdï¼‰ï¼›S5ï¼›signalï¼ˆgï¼‰ï¼›&#125;</span><br><span class="line">p6( )&#123; waitï¼ˆeï¼‰ï¼›waitï¼ˆfï¼‰ï¼›waitï¼ˆgï¼‰ï¼›S6ï¼›&#125;</span><br><span class="line"></span><br><span class="line">void main( )&#123;</span><br><span class="line">	semaphore a,b,c,d,e,f,g;</span><br><span class="line">	a.value=b.value=c.value=0;</span><br><span class="line">	d.value=e.value=f.value=g.value=0;</span><br><span class="line">cobegin</span><br><span class="line">	p1( ); p2( ); p3( ); p4( ); p5( ); p6( );</span><br><span class="line">coend;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿¡å·é‡çš„ç‰©ç†æ„ä¹‰æ˜¯å½“ä¿¡å·é‡å¤§äºé›¶æ—¶è¡¨ç¤ºï¼ˆèµ„æºçš„æ•°ç›® ï¼‰ï¼›å½“ä¿¡å·é‡å°äºé›¶æ—¶ï¼Œå…¶ç»å¯¹å€¼ä¸ºï¼ˆ ç­‰å¾…è¯¥èµ„æºçš„è¿›ç¨‹æ•°ç›®ï¼‰ ã€‚</p>
<p>æœ‰mä¸ªè¿›ç¨‹å…±äº«åŒä¸€ä¸´ç•Œèµ„æºï¼Œè‹¥ä½¿ç”¨ä¿¡å·é‡æœºåˆ¶å®ç°å¯¹ä¸´ç•Œèµ„æºçš„äº’æ–¥è®¿é—®ï¼Œåˆ™ä¿¡å·<br>é‡å€¼çš„å˜åŒ–èŒƒå›´æ˜¯ï¼ˆ [1-mï¼Œ1]ï¼‰ã€‚</p>
<h2 id="ç»å…¸è¿›ç¨‹åŒæ­¥é—®é¢˜"><a href="#ç»å…¸è¿›ç¨‹åŒæ­¥é—®é¢˜" class="headerlink" title="ç»å…¸è¿›ç¨‹åŒæ­¥é—®é¢˜"></a>ç»å…¸è¿›ç¨‹åŒæ­¥é—®é¢˜</h2><p>â—¼ç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…é—®é¢˜<br>â—¼å“²å­¦å®¶è¿›é¤é—®é¢˜<br>â—¼è¯»è€…â€”â€”å†™è€…é—®é¢˜</p>
<h3 id="ç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…é—®é¢˜"><a href="#ç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…é—®é¢˜" class="headerlink" title="ç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…é—®é¢˜"></a>ç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…é—®é¢˜</h3><p>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è¿›ç¨‹å…±äº«ä¸€ä¸ªå¤§å°å›ºå®šçš„ç¼“å†²åŒºï¼Œå…¶ä¸­ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ï¼Œå¹¶å°†ç”Ÿäº§çš„æ•°æ®å­˜å…¥ç¼“å†²åŒºï¼Œå¹¶æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ä»ç¼“å†²åŒºä¸­å–æ•°æ®ã€‚</p>
<p>â—†å‡è®¾ç¼“å†²åŒºçš„å¤§å°ä¸ºnï¼ˆå­˜å‚¨å•å…ƒçš„ä¸ªæ•°ï¼‰ï¼Œå®ƒå¯ä»¥è¢«ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å¾ªç¯ä½¿ç”¨ã€‚<br>â—†åˆ†åˆ«è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆinå’Œoutï¼ŒæŒ‡å‘ç”Ÿäº§è€…å°†å­˜æ”¾æ•°æ®çš„å­˜å‚¨å•å…ƒå’Œæ¶ˆè´¹è€…å°†å–æ•°æ®çš„å­˜å‚¨å•å…ƒ</p>
<p>ç”Ÿäº§è€…ï¼æ¶ˆè´¹è€…ä¹‹é—´æ»¡è¶³çš„æ¡ä»¶ï¼š<br>â—† æ¶ˆè´¹è€…æƒ³æ¥æ”¶æ•°æ®æ—¶ï¼Œæœ‰ç•Œç¼“å†²åŒºä¸­è‡³å°‘æœ‰ä¸€ä¸ªå•å…ƒæ˜¯æ»¡çš„ï¼ˆåŒæ­¥é—®é¢˜ï¼‰<br>â—† ç”Ÿäº§è€…æƒ³å‘é€æ•°æ®æ—¶ï¼Œæœ‰ç•Œç¼“å†²åŒºä¸­è‡³å°‘æœ‰ä¸€ä¸ªå•å…ƒæ˜¯ç©ºçš„ï¼ˆåŒæ­¥é—®é¢˜ï¼‰<br>â—† æœ‰ç•Œç¼“å†²åŒºæ˜¯ä¸´ç•Œèµ„æºï¼ˆäº’æ–¥é—®é¢˜ï¼‰</p>
<p>full&#x3D;0; è¡¨ç¤ºå½“å‰é˜Ÿåˆ—ä¸­å·²æœ‰çš„æ•°æ®ä¸ªæ•°<br>empty&#x3D;n; è¡¨ç¤ºå½“å‰é˜Ÿåˆ—ä¸­è¿˜å¯ä»¥æ”¾çš„æ•°æ®ä¸ªæ•°</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_12-54-32.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-16_12-55-12.png"></p>
<p><em><strong>åˆ©ç”¨è®°å½•å‹ä¿¡å·é‡è§£å†³ç”Ÿäº§è€…ä¸€æ¶ˆè´¹è€…é—®é¢˜</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int in=0, out=0;</span><br><span class="line">item buffer [n];</span><br><span class="line">semaphore mutex=1, empty=n, full=0; </span><br><span class="line">void producer();</span><br><span class="line">void consumer();</span><br><span class="line">void main()&#123;</span><br><span class="line">	cobegin</span><br><span class="line">		producer(); consumer();</span><br><span class="line">	coend</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void producer( )&#123;</span><br><span class="line">	do&#123;</span><br><span class="line">		â€¦</span><br><span class="line">		Produce an item in nextp;</span><br><span class="line">		â€¦</span><br><span class="line">		wait(empty);</span><br><span class="line">		wait(mutex);</span><br><span class="line">		buffer(in):=nextp;</span><br><span class="line">		in:=(in+1) mod n;</span><br><span class="line">		signal(mutex);</span><br><span class="line">		signal(full);</span><br><span class="line">	&#125;while(TRUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void consumer&#123;</span><br><span class="line">	do&#123;</span><br><span class="line">        wait(full);</span><br><span class="line">        wait(mutex);</span><br><span class="line">        nextc:=buffer(out);</span><br><span class="line">        out:=(out+1) mod n;</span><br><span class="line">        signal(mutex);</span><br><span class="line">        signal(empty);</span><br><span class="line">		Consumer the item in nextc;</span><br><span class="line">		â€¦â€¦</span><br><span class="line">	&#125;while(TRUE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>wait(empty)</code>æ˜¯ä¸€ä¸ªåŒæ­¥Pæ“ä½œï¼Œå› ä¸ºå®ƒç”¨äºåŒæ­¥ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ“ä½œã€‚å½“ç¼“å†²åŒºå·²æ»¡æ—¶ï¼Œç”Ÿäº§è€…éœ€è¦ç­‰å¾…æ¶ˆè´¹è€…ä»ç¼“å†²åŒºä¸­å–å‡ºä¸€ä¸ªäº§å“ï¼Œæ‰èƒ½ç»§ç»­å‘ç¼“å†²åŒºä¸­æ·»åŠ æ–°çš„äº§å“ã€‚<code>wait(mutex)</code>æ˜¯ä¸€ä¸ªäº’æ–¥Pæ“ä½œï¼Œå› ä¸ºå®ƒç”¨äºä¿æŠ¤å¯¹å…±äº«èµ„æºï¼ˆå³ç¼“å†²åŒºï¼‰çš„äº’æ–¥è®¿é—®ã€‚å½“ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…éœ€è¦è®¿é—®ç¼“å†²åŒºæ—¶ï¼Œå®ƒä»¬å¿…é¡»å…ˆè·å¾—å¯¹ç¼“å†²åŒºçš„äº’æ–¥è®¿é—®æƒã€‚</p>
<p>â‘  P.Væ“ä½œå¿…é¡»æˆå¯¹å‡ºç°ï¼Œæœ‰ä¸€ä¸ªPæ“ä½œå°±ä¸€å®šæœ‰ä¸€ä¸ªVæ“ä½œï¼›<br>â‘¡ å½“ä¸ºäº’æ–¥æ“ä½œæ—¶ï¼ŒPVå¤„äºåŒä¸€è¿›ç¨‹ï¼›<br>â‘¢ å½“ä¸ºåŒæ­¥æ“ä½œæ—¶ï¼Œåˆ™PVä¸åœ¨åŒä¸€è¿›ç¨‹ä¸­å‡ºç°ï¼›<br>â‘£ å¦‚æœP(S1)å’ŒP(S2)ä¸¤ä¸ªæ“ä½œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œé‚£ä¹ˆPæ“ä½œçš„é¡ºåºè‡³å…³é‡è¦ï¼Œ<strong>ä¸€ä¸ªåŒæ­¥Pæ“ä½œä¸ä¸€ä¸ªäº’æ–¥Pæ“ä½œåœ¨ä¸€èµ·æ—¶,åŒæ­¥Pæ“ä½œåœ¨äº’æ–¥Pæ“ä½œä¹‹å‰</strong>ï¼›<br>â‘¤ ä¸¤ä¸ªVæ“ä½œçš„é¡ºåºæ— å…³ç´§è¦ã€‚</p>
<p><em><strong>åˆ©ç”¨ANDä¿¡å·é‡è§£å†³ç”Ÿäº§è€…â€”æ¶ˆè´¹è€…é—®é¢˜</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int in=0, out=0;</span><br><span class="line">item buffer[ n ];</span><br><span class="line">semaphore mutex=1, empty=n, full=0;</span><br><span class="line">void producer( )&#123;</span><br><span class="line">	do&#123;</span><br><span class="line">		â€¦</span><br><span class="line">		produce an item in nextp;</span><br><span class="line">		â€¦</span><br><span class="line">		Swait(empty, mutex);</span><br><span class="line">        buffer[in] = nextp;</span><br><span class="line">        in = (in+1) % n;</span><br><span class="line">		Ssignal(mutex, full);</span><br><span class="line">	&#125;while(TRUE);</span><br><span class="line">&#125; //end producer</span><br><span class="line"></span><br><span class="line">void consumer&#123;</span><br><span class="line">	do&#123;</span><br><span class="line">        Swait(full, mutex);</span><br><span class="line">        nextc = buffer[out];</span><br><span class="line">        out = (out+1) % n;</span><br><span class="line">        Ssignal(mutex, empty);</span><br><span class="line">        consumer the item in nextc;</span><br><span class="line">	&#125;while(TRUE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å“²å­¦å®¶è¿›é¤é—®é¢˜"><a href="#å“²å­¦å®¶è¿›é¤é—®é¢˜" class="headerlink" title="å“²å­¦å®¶è¿›é¤é—®é¢˜"></a>å“²å­¦å®¶è¿›é¤é—®é¢˜</h3><p>5ä¸ªå“²å­¦å®¶å›´ç»•ä¸€å¼ åœ†æ¡Œè€Œåï¼Œæ¯ä¸ªå“²å­¦å®¶å‰é¢æœ‰ä¸€ç¢Ÿç©ºå¿ƒé¢ï¼Œç”±äºé¢å¾ˆæ»‘ï¼Œæ‰€ä»¥è¦ä¸¤æŠŠç­·å­æ‰èƒ½å¤¹ä½ã€‚ç›¸é‚»ä¸¤ä¸ªç¢Ÿå­ä¹‹é—´æœ‰ä¸€æŠŠç­·å­ã€‚å“²å­¦å®¶åªæœ‰ä¸¤ç§æ´»åŠ¨ï¼Œåœ¨æ„Ÿè§‰åˆ°é¥¿æ—¶ï¼Œåˆ†ä¸¤æ¬¡å–å·¦è¾¹å’Œå³è¾¹çš„ç­·å­ï¼ˆä¸åˆ†æ¬¡åºï¼‰ï¼Œå¦‚æœæˆåŠŸçš„å¾—åˆ°ä¸¤æŠŠç­·å­ï¼Œå°±åƒé¥­ï¼Œåƒå®Œåç»§ç»­æ€è€ƒã€‚</p>
<p><em><strong>åˆ©ç”¨è®°å½•å‹ä¿¡å·é‡è§£å†³å“²å­¦å®¶è¿›é¤é—®é¢˜</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semaphore chopstick[5] = &#123;1, 1, 1, 1, 1&#125;;</span><br><span class="line"></span><br><span class="line">do &#123;</span><br><span class="line">    wait(chopstick[i]);</span><br><span class="line">    wait(chopstick[(i + 1) % 5]);</span><br><span class="line"></span><br><span class="line">    // Eat</span><br><span class="line"></span><br><span class="line">    signal(chopstick[i]);</span><br><span class="line">    signal(chopstick[(i + 1) % 5]);</span><br><span class="line"></span><br><span class="line">    // Think</span><br><span class="line"></span><br><span class="line">&#125; while (TRUE);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è™½ç„¶ä¸Šè¿°è§£æ³•å¯ä»¥ä¿è¯ä¸ä¼šæœ‰ä¸¤ä¸ªç›¸é‚»çš„å“²å­¦å®¶åŒæ—¶è¿›é¤ã€‚ä½†å´æœ‰å¯èƒ½å¼•èµ·æ­»é”ã€‚å‡å¦‚äº”ä½å“²å­¦å®¶åŒæ—¶é¥¥é¥¿è€Œå„è‡ªæ‹¿èµ·å·¦è¾¹çš„ç­·å­çš„æ—¶å€™ï¼Œå°±ä¼šä½¿äº”ä¸ªä¿¡å·é‡chopstickå‡ä¸ºé›¶ã€‚å½“ä»–ä»¬åœ¨è¯•å›¾å»æ‹¿å³è¾¹çš„ç­·å­ï¼Œéƒ½å°†å› ä¸ºæ— ç­·å­å¯æ‹¿è€Œæ— é™æœŸçš„ç­‰å¾…ã€‚</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<ol>
<li><strong>è‡³å¤šåªå…è®¸æœ‰å››ä½å“²å­¦å®¶åŒæ—¶å»æ‹¿å·¦è¾¹çš„ç­·å­</strong>ï¼Œæœ€ç»ˆèƒ½ä¿è¯è‡³å°‘æœ‰ä¸€ä½å“²å­¦å®¶èƒ½å¤Ÿè¿›é¤ï¼Œå¹¶åœ¨ç”¨æ¯•æ—¶èƒ½é‡Šæ”¾å‡ºä»–ç”¨è¿‡çš„ä¸¤åªç­·å­ï¼Œä»è€Œä½¿æ›´å¤šçš„å“²å­¦å®¶èƒ½å¤Ÿè¿›é¤ã€‚</li>
<li>ä»…å½“å“²å­¦å®¶çš„<strong>å·¦ã€å³ä¸¤åªç­·å­å‡å¯ç”¨</strong>æ—¶ï¼Œæ‰å…è®¸ä»–æ‹¿èµ·ç­·å­è¿›é¤ã€‚</li>
<li>è§„å®šå¥‡æ•°å·å“²å­¦å®¶å…ˆæ‹¿ä»–å·¦è¾¹çš„ç­·å­ï¼Œç„¶åå†å»æ‹¿å³è¾¹çš„ç­·å­ï¼›è€Œå¶æ•°å·å“²å­¦å®¶åˆ™ç›¸åã€‚æŒ‰æ­¤è§„å®šï¼Œå°†æ˜¯1ã€2å·å“²å­¦å®¶ç«äº‰1å·ç­·å­ï¼›3ã€4å·å“²å­¦å®¶ç«äº‰3å·ç­·å­ã€‚å³äº”ä½å“²å­¦å®¶éƒ½å…ˆç«äº‰å¥‡æ•°å·ç­·å­ï¼Œè·å¾—åï¼Œå†å»ç«äº‰å¶æ•°å·ç­·å­ï¼Œæœ€åæ€»ä¼šæœ‰ä¸€ä½å“²å­¦å®¶èƒ½è·å¾—ä¸¤åªç­·å­è€Œè¿›é¤ã€‚</li>
</ol>
<p><em><strong>åˆ©ç”¨ANDä¿¡å·é‡è§£å†³å“²å­¦å®¶è¿›é¤é—®é¢˜</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semaphore chopstick[5] = &#123;1, 1, 1, 1, 1&#125;;</span><br><span class="line"></span><br><span class="line">do &#123;</span><br><span class="line">    // ...</span><br><span class="line"></span><br><span class="line">    think;</span><br><span class="line"></span><br><span class="line">    Sswait(chopstick[(i + 1) % 5], chopstick[i]);</span><br><span class="line"></span><br><span class="line">    // Eat</span><br><span class="line"></span><br><span class="line">    Ssignal(chopstick[(i + 1) % 5], chopstick[i]);</span><br><span class="line"></span><br><span class="line">&#125; while (TRUE);</span><br></pre></td></tr></table></figure>

<h3 id="è¯»è€…â€”â€”å†™è€…é—®é¢˜"><a href="#è¯»è€…â€”â€”å†™è€…é—®é¢˜" class="headerlink" title="è¯»è€…â€”â€”å†™è€…é—®é¢˜"></a>è¯»è€…â€”â€”å†™è€…é—®é¢˜</h3><p>é—®é¢˜æè¿°ï¼šå¯¹äºç³»ç»Ÿä¸­çš„å…±äº«å¯¹è±¡ï¼ŒæŠŠåªè¦æ±‚è¯»è¯¥æ–‡ä»¶çš„è¿›ç¨‹ç§°ä¸ºâ€œreaderè¿›ç¨‹â€ï¼Œå…¶å®ƒè¿›ç¨‹ç§°ä¸ºâ€œwriterè¿›ç¨‹â€ã€‚æ‰€è°“è¯»è€…â€”â€”å†™è€…é—®é¢˜ï¼Œæ˜¯æŒ‡ä¿è¯ä¸€ä¸ªwriteè¿›ç¨‹å¿…é¡»ä¸å…¶å®ƒè¿›ç¨‹äº’æ–¥åœ°è®¿é—®å…±äº«å¯¹è±¡çš„åŒæ­¥é—®é¢˜ã€‚</p>
<p><em><strong>åˆ©ç”¨è®°å½•å‹ä¿¡å·é‡è§£å†³è¯»è€…â€”å†™è€…é—®é¢˜</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semaphore rmutex=1, wmutex = 1;</span><br><span class="line">int readcount = 0;</span><br><span class="line"></span><br><span class="line">void reader() &#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        wait(rmutex);</span><br><span class="line">        if (readcount == 0) then wait(wmutex);</span><br><span class="line">        readcount = readcount + 1;</span><br><span class="line">        signal(rmutex);</span><br><span class="line"></span><br><span class="line">        // Perform read operation</span><br><span class="line"></span><br><span class="line">        wait(rmutex);</span><br><span class="line">        readcount = readcount - 1;</span><br><span class="line">        if (readcount == 0) then signal(wmutex);</span><br><span class="line">        signal(rmutex);</span><br><span class="line">    &#125; while (TRUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void writer() &#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        wait(wmutex);</span><br><span class="line">        </span><br><span class="line">        // Perform write operation</span><br><span class="line">        </span><br><span class="line">        signal(wmutex);</span><br><span class="line">    &#125; while (TRUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">    cobegin</span><br><span class="line">        reader();</span><br><span class="line">        writer();</span><br><span class="line">    coend</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em><strong>ä¿¡å·é‡é›†è§£å†³è¯»è€…â€”å†™è€…é—®é¢˜</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int RN;</span><br><span class="line">Semaphore L = RN, mx = 1;</span><br><span class="line"></span><br><span class="line">// RNæ ‡ç¤ºåŒæ—¶å…è®¸å¤šå°‘è¯»è¿›ç¨‹å­˜åœ¨</span><br><span class="line">void reader() &#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        swait(L, 1, 1);</span><br><span class="line">        swait(mx, 1, 0);</span><br><span class="line"></span><br><span class="line">        // Perform read operation</span><br><span class="line"></span><br><span class="line">        ssignal(L, 1);</span><br><span class="line">    &#125; while (TRUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void writer() &#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        swait(mx, 1, 1;L, RN, 0);</span><br><span class="line">        </span><br><span class="line">        // Perform write operation</span><br><span class="line"></span><br><span class="line">        ssignal(mx, 1);</span><br><span class="line">    &#125; while (TRUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">    cobegin</span><br><span class="line">        reader();</span><br><span class="line">        writer();</span><br><span class="line">    coend</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è¯¾å ‚ç»ƒä¹ "><a href="#è¯¾å ‚ç»ƒä¹ " class="headerlink" title="è¯¾å ‚ç»ƒä¹ "></a>è¯¾å ‚ç»ƒä¹ </h3><p>æœ‰ä¸€ä¸ªç†å‘å¸ˆï¼Œä¸€æŠŠç†å‘æ¤…å’ŒnæŠŠä¾›ç­‰å€™ç†å‘çš„é¡¾å®¢åçš„æ¤…å­ã€‚å¦‚æœæ²¡æœ‰é¡¾å®¢ï¼Œç†å‘å¸ˆä¾¿åœ¨ç†å‘æ¤…ä¸Šç¡è§‰ï¼›å½“ä¸€ä¸ªé¡¾å®¢åˆ°æ¥æ—¶ï¼Œå¿…é¡»å”¤é†’ç†å‘å¸ˆè¿›è¡Œç†å‘ï¼›å¦‚æœç†å‘å¸ˆæ­£åœ¨ç†å‘æ—¶åˆæœ‰é¡¾å®¢åˆ°æ¥ï¼Œåˆ™å¦‚æœæœ‰ç©ºæ¤…å­å¯åï¼Œä»–å°±åä¸‹æ¥ç­‰ï¼Œå¦‚æœæ²¡æœ‰ç©ºæ¤…å­ï¼Œä»–å°±ç¦»å¼€ã€‚ä¸ºç†å‘å¸ˆå’Œé¡¾å®¢å„ç¼–ä¸€æ®µç¨‹åºæè¿°ä»–ä»¬çš„è¡Œä¸ºã€‚</p>
<p>ä½¿ç”¨ä¸‰ä¸ªä¿¡å·é‡ï¼š<br>â—¼ customersç”¨æ¥è®°å½•ç­‰å€™ç†å‘çš„é¡¾å®¢æ•°ï¼ˆä¸åŒ…æ‹¬æ­£åœ¨ç†å‘çš„é¡¾å®¢ï¼‰ï¼Œå…¶åˆå€¼ä¸º0ï¼›<br>â—¼ barbersè®°å½•æ­£åœ¨ç­‰å€™é¡¾å®¢çš„ç†å‘å¸ˆæ•°ï¼Œå…¶å€¼ä¸º0æˆ–1ï¼›<br>â—¼ mutexç”¨äºå®ç°å…±äº«å˜é‡çš„äº’æ–¥è®¿é—®ï¼Œå…¶åˆå€¼ä¸º1ã€‚<br>â—¼ å…±äº«å˜é‡countï¼Œå®ƒä¹Ÿç”¨äºè®°å½•ç­‰å€™çš„é¡¾å®¢æ•°ï¼Œå®ƒå®é™…ä¸Šæ˜¯customersçš„ä¸€ä¸ªå¤‡ä»½ï¼Œä¹‹æ‰€ä»¥ä½¿ç”¨countæ˜¯å› ä¸ºæ— æ³•è¯»å–ä¿¡å·é‡çš„å½“å‰å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semaphore customers = 0; // ç­‰å€™çš„é¡¾å®¢æ•°</span><br><span class="line">semaphore barbers = 0;   // ç­‰å€™é¡¾å®¢çš„ç†å‘å¸ˆæ•°</span><br><span class="line">semaphore mutex = 1;</span><br><span class="line">int count = 0;           // ç­‰å€™çš„é¡¾å®¢æ•°ï¼ˆè¿˜æ²¡ç†å‘ï¼‰</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">    cobegin</span><br><span class="line">        barbers();</span><br><span class="line">        customers();</span><br><span class="line">    coend</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">barber() &#123;</span><br><span class="line">    while (true) &#123;</span><br><span class="line">        p(customers); // æ˜¯å¦æœ‰ç­‰å€™çš„é¡¾å®¢</span><br><span class="line">        p(mutex);</span><br><span class="line">        count = count - 1; // é¡¾å®¢æ•°å‡1</span><br><span class="line">        v(barbers);       // ç†å‘å¸ˆå¼€å§‹ç†å‘</span><br><span class="line">        v(mutex);</span><br><span class="line">        ç†å‘;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">customer() &#123;</span><br><span class="line">    p(mutex);</span><br><span class="line">    if (count &lt; n) &#123;</span><br><span class="line">        count = count + 1; // è‹¥æœ‰ç©ºæ¤…å­åˆ™ç­‰å€™çš„é¡¾å®¢æ•°åŠ 1</span><br><span class="line">        v(customers);</span><br><span class="line">        v(mutex);</span><br><span class="line">        p(barbers);//æ— ç†å‘å¸ˆ,é¡¾å®¢åç€</span><br><span class="line">        ç†å‘;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        v(mutex); // æ— ç©ºæ¤…å­åˆ™ç¦»å¼€</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è¿›ç¨‹é€šä¿¡"><a href="#è¿›ç¨‹é€šä¿¡" class="headerlink" title="è¿›ç¨‹é€šä¿¡"></a>è¿›ç¨‹é€šä¿¡</h2><p>è¿›ç¨‹é€šä¿¡â€”â€”æ˜¯æŒ‡è¿›ç¨‹ä¹‹é—´çš„ä¿¡æ¯äº¤æ¢ã€‚ç”±äºæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œå› æ­¤ä¸€ä¸ªè¿›ç¨‹æ— æ³•ç›´æ¥è®¿é—®å¦ä¸€ä¸ªè¿›ç¨‹çš„å˜é‡æˆ–æ•°æ®ç»“æ„ã€‚</p>
<p><em><strong>è¿›ç¨‹é€šä¿¡çš„ç±»å‹</strong></em></p>
<p>1.å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿ<br>ï¼ˆ1ï¼‰åŸºäºå…±äº«æ•°æ®ç»“æ„çš„é€šä¿¡æ–¹å¼ã€‚<br>ï¼ˆ2ï¼‰åŸºäºå…±äº«å­˜å‚¨åŒºçš„é€šä¿¡æ–¹å¼ã€‚<br>2.æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ<br>â€¢ æ˜¯ç›®å‰çš„ä¸»è¦é€šä¿¡æ–¹å¼ï¼Œä¿¡æ¯å•ä½ï¼šæ¶ˆæ¯ï¼ˆæŠ¥æ–‡ï¼‰<br>â€¢ å®ç°ï¼šä¸€ç»„é€šä¿¡å‘½ä»¤ï¼ˆåŸè¯­ï¼‰ï¼Œå…·æœ‰é€æ˜æ€§â†’åŒæ­¥çš„å®ç°ã€‚<br>å®ç°æ–¹å¼çš„ä¸åŒï¼Œè€Œåˆ†æˆï¼š<br>ï¼ˆ1ï¼‰ç›´æ¥é€šä¿¡æ–¹å¼</p>
<p>è¿™æ˜¯æŒ‡å‘é€è¿›ç¨‹åˆ©ç”¨OSæ‰€æä¾›çš„å‘é€å‘½ä»¤ï¼Œç›´æ¥æŠŠæ¶ˆæ¯å‘é€ç»™ç›®æ ‡è¿›ç¨‹ã€‚<br>ç³»ç»Ÿæä¾›ä¸‹è¿°ä¸¤æ¡é€šä¿¡å‘½ä»¤ï¼ˆåŸè¯­ï¼‰ï¼š<br>Send ï¼ˆReceiverï¼Œ messageï¼‰ï¼›Receiveï¼ˆSenderï¼Œ messageï¼‰ï¼›</p>
<p>ä¾‹ï¼šè§£å†³ç”Ÿäº§â€”æ¶ˆè´¹é—®é¢˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">do&#123;</span><br><span class="line">	â€¦ </span><br><span class="line">	produce an item in nextp; </span><br><span class="line">	â€¦</span><br><span class="line">	send(consumer, nextp);</span><br><span class="line">&#125;while(TRUE);</span><br><span class="line">do&#123;</span><br><span class="line">	receive( producer, nextc);</span><br><span class="line">	â€¦</span><br><span class="line">	consumer the item in nextc;</span><br><span class="line">&#125;while(TRUE);</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰é—´æ¥é€šä¿¡æ–¹å¼</p>
<p>æŒ‡è¿›ç¨‹ä¹‹é—´åˆ©ç”¨<strong>ä¿¡ç®±</strong>çš„é€šä¿¡æ–¹å¼ã€‚å‘é€è¿›ç¨‹å‘é€ç»™ç›®æ ‡è¿›ç¨‹çš„æ¶ˆæ¯å­˜æ”¾ä¿¡ç®±ï¼›æ¥æ”¶è¿›ç¨‹åˆ™ä»è¯¥ä¿¡ç®±ä¸­ï¼Œå–å‡ºå¯¹æ–¹å‘é€ç»™è‡ªå·±çš„æ¶ˆæ¯ï¼›æ¶ˆæ¯åœ¨ä¿¡ç®±ä¸­å¯ä»¥å®‰å…¨åœ°ä¿å­˜ï¼Œåªå…è®¸æ ¸å‡†çš„ç›®æ ‡ç”¨æˆ·éšæ—¶è¯»å–ã€‚ç³»ç»Ÿä¸ºä¿¡ç®±é€šä¿¡æä¾›äº†è‹¥å¹²æ¡åŸè¯­ï¼Œåˆ†åˆ«ç”¨äºä¿¡ç®±çš„<br>åˆ›å»ºã€æ’¤æ¶ˆå’Œæ¶ˆæ¯çš„å‘é€ã€æ¥æ”¶ç­‰ã€‚</p>
<p>Send (mailbox, message);Receive (mailbox, message)</p>
<p>3.ç®¡é“ï¼ˆPipeï¼‰é€šä¿¡</p>
<p>ç®¡é“ï¼šè¿æ¥ä¸€ä¸ªè¯»è¿›ç¨‹å’Œä¸€ä¸ªå†™è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„å…±äº«æ–‡ä»¶ã€‚<br>åŠŸèƒ½ï¼šå¤§é‡çš„æ•°æ®å‘æ”¶ã€‚</p>
<p>4.ä¿¡å·</p>
<hr>
<p>åœ¨ç”Ÿäº§è€…â€”æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œå¦‚æœç¼ºå°‘äº†signal(full)æˆ–signal(empty)ï¼Œå¯¹æ‰§è¡Œç»“æœå°†ä¼šæœ‰ä½•å½±å“ï¼Ÿ</p>
<p><strong>å¦‚æœç¼ºå°‘äº†<code>signal(full)</code>ï¼Œåˆ™æ¶ˆè´¹è€…è¿›ç¨‹å°†æ— æ³•ä»ç¼“å†²åŒºä¸­å–å‡ºäº§å“</strong>ã€‚è¿™æ˜¯å› ä¸ºæ¶ˆè´¹è€…è¿›ç¨‹åœ¨æ¯æ¬¡å–å‡ºäº§å“ä¹‹å‰ï¼Œéƒ½ä¼šè°ƒç”¨<code>wait(full)</code>æ¥æ£€æŸ¥ç¼“å†²åŒºä¸­æ˜¯å¦æœ‰äº§å“ã€‚å¦‚æœç¼ºå°‘äº†<code>signal(full)</code>ï¼Œåˆ™ç¼“å†²åŒºä¸­çš„äº§å“æ•°é‡å°†æ°¸è¿œä¸º0ï¼Œæ¶ˆè´¹è€…è¿›ç¨‹å°†ä¸€ç›´è¢«é˜»å¡ã€‚<strong>å¦‚æœç¼ºå°‘äº†<code>signal(empty)</code>ï¼Œåˆ™ç”Ÿäº§è€…è¿›ç¨‹å°†æ— æ³•å‘ç¼“å†²åŒºä¸­æ·»åŠ æ–°çš„äº§å“</strong>ã€‚è¿™æ˜¯å› ä¸ºç”Ÿäº§è€…è¿›ç¨‹åœ¨æ¯æ¬¡ç”Ÿäº§æ–°äº§å“ä¹‹å‰ï¼Œéƒ½ä¼šè°ƒç”¨<code>wait(empty)</code>æ¥æ£€æŸ¥ç¼“å†²åŒºæ˜¯å¦æœ‰ç©ºé—²ä½ç½®ã€‚å¦‚æœç¼ºå°‘äº†<code>signal(empty)</code>ï¼Œåˆ™ç¼“å†²åŒºä¸­çš„ç©ºé—²ä½ç½®æ•°é‡å°†æ°¸è¿œä¸º0ï¼Œç”Ÿäº§è€…è¿›ç¨‹å°†ä¸€ç›´è¢«é˜»å¡ã€‚</p>
<p>å°è¯•åˆ©ç”¨è®°å½•å‹ä¿¡å·é‡å†™å‡ºä¸€ä¸ªä¸ä¼šå‡ºç°æ­»é”çš„å“²å­¦å®¶è¿›é¤é—®é¢˜çš„ç®—æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semaphore chopstick[5] = &#123;1, 1, 1, 1, 1&#125;;</span><br><span class="line">semaphore num = 4;</span><br><span class="line"></span><br><span class="line">void philosopher(int i) &#123;</span><br><span class="line">    while (true) &#123;</span><br><span class="line">        wait(num);</span><br><span class="line">        wait(chopstick[i]);</span><br><span class="line">        wait(chopstick[(i + 1) % 5]);</span><br><span class="line"></span><br><span class="line">        // è¿›è¡Œè¿›é¤æ“ä½œ</span><br><span class="line"></span><br><span class="line">        signal(chopstick[i]);</span><br><span class="line">        signal(chopstick[(i + 1) % 5]);</span><br><span class="line">        signal(num);</span><br><span class="line"></span><br><span class="line">        // è¿›è¡Œæ€è€ƒæ“ä½œ</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯•ä¿®æ”¹ä¸‹é¢ç”Ÿäº§è€…â€”æ¶ˆè´¹è€…é—®é¢˜è§£æ³•ä¸­çš„é”™è¯¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void producer() &#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        // ç”Ÿæˆä¸€ä¸ªé¡¹ç›® nextp</span><br><span class="line"></span><br><span class="line">        wait(mutex);</span><br><span class="line">        wait(full);</span><br><span class="line">        buffer[in] = nextp;</span><br><span class="line">        signal(mutex);</span><br><span class="line">    &#125; while (TRUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void consumer() &#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        wait(mutex);</span><br><span class="line">        wait(empty);</span><br><span class="line">        nextc = buffer[out];</span><br><span class="line">        out = (out + 1) % n;</span><br><span class="line">        signal(mutex);</span><br><span class="line"></span><br><span class="line">        // æ¶ˆè´¹ nextc é¡¹ç›®</span><br><span class="line">    &#125; while (TRUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void producer() &#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        // ç”Ÿæˆä¸€ä¸ªé¡¹ç›® nextp</span><br><span class="line"></span><br><span class="line">        wait(empty);</span><br><span class="line">        wait(mutex);</span><br><span class="line">        buffer[in] = nextp;</span><br><span class="line">        in = (in + 1) % n;</span><br><span class="line">        signal(mutex);</span><br><span class="line">        signal(full);</span><br><span class="line">    &#125; while (TRUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void consumer() &#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        wait(full);</span><br><span class="line">        wait(mutex);</span><br><span class="line">        nextc = buffer[out];</span><br><span class="line">        out = (out + 1) % n;</span><br><span class="line">        signal(mutex);</span><br><span class="line">        signal(empty);</span><br><span class="line"></span><br><span class="line">        // æ¶ˆè´¹ nextc é¡¹ç›®</span><br><span class="line">    &#125; while (TRUE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»ŸæœŸæœ«å¤ä¹ ä¹‹shellç¼–ç¨‹</title>
    <url>/2023/06/17/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/7/</url>
    <content><![CDATA[<p><strong>Shell</strong>æ˜¯ç³»ç»Ÿçš„<strong>ç”¨æˆ·ç•Œé¢</strong>ï¼Œæä¾›äº†<strong>ç”¨æˆ·</strong>ä¸<strong>å†…æ ¸</strong>è¿›è¡Œäº¤äº’æ“ä½œçš„ä¸€ç§<strong>æ¥å£</strong>ã€‚å®ƒæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å¹¶æŠŠå®ƒé€å…¥å†…æ ¸å»æ‰§è¡Œã€‚</p>
<p>â‘ Shellæ˜¯ä¸€ä¸ª<strong>å‘½ä»¤è§£é‡Šå™¨</strong>ï¼Œå®ƒè§£é‡Šç”±ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å¹¶ä¸”æŠŠå®ƒä»¬é€åˆ°å†…æ ¸ã€‚</p>
<p>â‘¡Shellæ˜¯ä¸€ä¸ªè§£é‡Šå‹çš„ç¨‹åºè®¾è®¡è¯­è¨€ã€‚</p>
<p>ä»¥ä¸‹å¯¹linuxè¿›ç¨‹ç®¡ç†çš„ä½œç”¨æè¿°æ­£ç¡®çš„æœ‰ï¼ˆABCï¼‰ </p>
<p> A.åˆ¤æ–­æœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ </p>
<p>B.æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰çš„è¿›ç¨‹ </p>
<p>C.æ€æ­»è¿›ç¨‹ </p>
<p>D.æŸ¥çœ‹æœåŠ¡å™¨CPUä¿¡æ¯</p>
<h2 id="ç®€å•å‘½ä»¤"><a href="#ç®€å•å‘½ä»¤" class="headerlink" title="ç®€å•å‘½ä»¤"></a>ç®€å•å‘½ä»¤</h2><ol>
<li><p>dateï¼šæ‰“å°æˆ–è®¾ç½®ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´ã€‚</p>
</li>
<li><p>whoï¼šæŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰å·²ç™»å½•ç”¨æˆ·çš„æƒ…å†µã€‚</p>
</li>
<li><p>passwdï¼šä¿®æ”¹ç”¨æˆ·å¯†ç ã€‚</p>
</li>
<li><p>logout, loginï¼šç™»å½•shellçš„ç™»å½•å’Œæ³¨é”€å‘½ä»¤ã€‚</p>
</li>
<li><p>pwdï¼šæ‰“å°å·¥ä½œè·¯å¾„ã€‚</p>
</li>
<li><p>more, less, head,tailï¼šæ˜¾ç¤ºæˆ–éƒ¨åˆ†æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ã€‚</p>
</li>
<li><p>lp&#x2F;lpstat&#x2F;cancel, lpr&#x2F;lpq&#x2F;lprmï¼šæ‰“å°æ–‡ä»¶ã€‚</p>
</li>
<li><p>chmod u+xï¼šæ›´æ”¹æ–‡ä»¶æƒé™ã€‚</p>
</li>
<li><p>rm -fr dirï¼šåˆ é™¤éç©ºç›®å½•ã€‚</p>
</li>
<li><p>cp -R dirï¼šæ‹·è´ç›®å½•ã€‚</p>
</li>
<li><p>fg jobidï¼šå°†ä¸€ä¸ªåå°è¿›ç¨‹æ”¾åˆ°å‰å°ã€‚</p>
<ul>
<li>ä½¿ç”¨Ctrl+zå¯ä»¥å°†å‰å°è¿›ç¨‹æŒ‚èµ·ï¼ˆsuspendï¼‰ï¼Œç„¶åå¯ä»¥ä½¿ç”¨bgjobidå‘½ä»¤å°†å…¶æ”¾åˆ°åå°è¿è¡Œã€‚</li>
</ul>
<ul>
<li>ä½¿ç”¨job&amp;å¯ä»¥ç›´æ¥è®©ä½œä¸šåœ¨åå°è¿è¡Œã€‚</li>
</ul>
</li>
<li><p>killï¼šåˆ é™¤æ‰§è¡Œä¸­çš„ç¨‹åºæˆ–å·¥ä½œã€‚</p>
</li>
<li><p>psï¼šåˆ—å‡ºå½“å‰è¿è¡Œçš„è¿›ç¨‹ã€‚</p>
<ul>
<li>ä¸å¸¦å‚æ•°çš„pså‘½ä»¤è¿è¡Œæ—¶, æ˜¾ç¤ºè¯¥ç”¨æˆ·å½“å‰æ´»åŠ¨è¿›ç¨‹çš„åŸºæœ¬ä¿¡æ¯</li>
<li>pså‘½ä»¤çš„å¸¸ç”¨ä»»é€‰é¡¹ -e (æˆ–-a) æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰æ´»åŠ¨è¿›ç¨‹çš„ä¿¡æ¯.</li>
<li>-f æ˜¾ç¤ºè¯¥è¿›ç¨‹çš„æ‰€æœ‰ä¿¡æ¯.</li>
</ul>
</li>
</ol>
<h2 id="è¾“å‡ºé‡å®šå‘"><a href="#è¾“å‡ºé‡å®šå‘" class="headerlink" title="è¾“å‡ºé‡å®šå‘"></a>è¾“å‡ºé‡å®šå‘</h2><blockquote>
<p>æ ‡å‡†è¾“å…¥ï¼š é”®ç›˜ fd &#x3D; 0</p>
<p>æ ‡å‡†è¾“å‡ºï¼š è§å…‰å± fd &#x3D; 1</p>
<p>æ ‡å‡†é”™è¯¯è¾“å‡ºï¼šè§å…‰å± fd &#x3D; 2</p>
</blockquote>
<p>command &gt; filename è¿›ç¨‹è¾“å‡ºè¦†ç›–æ–‡ä»¶ filename </p>
<p>command &gt;&gt; filename è¿›ç¨‹è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶filenameåé¢, ä¸è¦†ç›–filename</p>
<p>ä¾‹å¦‚:</p>
<p>æŠŠæ–‡ä»¶myfileçš„å†…å®¹è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæ–‡ä»¶â€”-è§å…‰å±ä¸Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> myfile</span></span><br></pre></td></tr></table></figure>

<p>æŠŠæ–‡ä»¶myfileçš„å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶newfileä¸­(æ ‡å‡†è¾“å‡ºå·²è¢«é‡æ–°å®šå‘åˆ°newfile). å…¶ç»“æœç›¸å½“äºæ‹·è´æ–‡ä»¶.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> myfile &gt; newfile</span></span><br></pre></td></tr></table></figure>

<p>æŠŠabcæ·»åŠ åˆ°xyzå·²æœ‰å†…å®¹åé¢, è€Œä¸æ˜¯è¦†ç›–xyz</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> abc &gt;&gt; xyz</span></span><br></pre></td></tr></table></figure>

<p>åº”ç”¨ä¸¾ä¾‹:<br>â‘  æŒ‰å­—æ¯é¡ºåºæ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å·²ç™»å½•çš„ç”¨æˆ·:</p>
<p> æŠŠå½“å‰ç™»å½•ç”¨æˆ·çš„åå•ä¿å­˜åœ¨temp1ä¸­</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">who</span> &gt; temp1</span></span><br></pre></td></tr></table></figure>

<p>æŠŠæ’åºåçš„åå•ä¿å­˜åœ¨temp2ä¸­</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sort</span> temp1 &gt; temp2</span> </span><br></pre></td></tr></table></figure>

<p>é€å±æ˜¾ç¤ºæ’å¥½åºçš„ç”¨æˆ·åå•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">more temp2</span> </span><br></pre></td></tr></table></figure>

<p>åˆ é™¤ä¸ç”¨çš„ä¸´æ—¶æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">rm</span> temp1 temp2</span> </span><br></pre></td></tr></table></figure>

<p>â‘¡ è®°å½•é•¿æ—¶é—´è¿è¡Œç¨‹åºçš„æ—¥å¿—:</p>
<p>æŠŠæ’åºåçš„åå•ç´¯åŠ (è€Œä¸æ˜¯è¦†ç›–)åˆ°æ–‡ä»¶temp2ä¸­ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sort</span> temp1 &gt;&gt; temp2</span> </span><br></pre></td></tr></table></figure>

<h2 id="è¾“å…¥é‡å®šå‘"><a href="#è¾“å…¥é‡å®šå‘" class="headerlink" title="è¾“å…¥é‡å®šå‘"></a>è¾“å…¥é‡å®šå‘</h2><p>command &lt; filename<br>è¿›ç¨‹çš„è¾“å…¥æ¥è‡ªæ–‡ä»¶filename, ä¾‹å¦‚:</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-17_11-33-54.png"></p>
<p>catè¿›ç¨‹çš„è¾“å…¥ä¸æ˜¯æ¥è‡ªå‘½ä»¤è¡Œå‚æ•°ï¼Œè€Œæ˜¯æ¥è‡ªé‡å®šå‘æ–‡ä»¶abcï¼Œcatè¿›ç¨‹çš„è¾“å‡ºé€åˆ°æ ‡å‡†è¾“å‡ºè§å…‰å±ä¸Šï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt; abc</span></span><br><span class="line">aaaaaaaaaaaaaaa</span><br><span class="line">bbbbbbbb</span><br><span class="line">cccccccccccccccccc</span><br><span class="line"><span class="meta prompt_">$</span></span><br></pre></td></tr></table></figure>

<p><em><strong>å¸¸è§è¾“å…¥è¾“å‡ºé‡å®šå‘æ–¹å¼</strong></em></p>
<table>
<thead>
<tr>
<th align="left">å‘½ä»¤</th>
<th>è¾“å…¥</th>
<th>è¾“å‡º</th>
<th>æ•ˆæœ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">cat</td>
<td>é”®ç›˜</td>
<td>å±å¹•</td>
<td>å°†é”®ç›˜è¾“å…¥æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</td>
</tr>
<tr>
<td align="left">cat  file1</td>
<td>file1</td>
<td>å±å¹•</td>
<td>file1çš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</td>
</tr>
<tr>
<td align="left">cat  file1 &gt; file2</td>
<td>file1</td>
<td>file2</td>
<td>file1çš„å†…å®¹å†™å…¥file2ä¸­</td>
</tr>
<tr>
<td align="left">cat           &gt; file2</td>
<td>é”®ç›˜</td>
<td>file2</td>
<td>é”®ç›˜è¾“å…¥çš„å†…å®¹å†™å…¥file2</td>
</tr>
<tr>
<td align="left">cat &lt; file1</td>
<td>file1</td>
<td>å±å¹•</td>
<td>file1çš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</td>
</tr>
<tr>
<td align="left">cat &lt; file1 &gt; file2</td>
<td>file1</td>
<td>file2</td>
<td>file1çš„å†…å®¹å†™å…¥file2ä¸­</td>
</tr>
</tbody></table>
<p>command 2&gt; filename ( 2å’Œ&gt;ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ )ï¼Œè¿›ç¨‹è¿è¡Œä¸­çš„é”™è¯¯ä¿¡æ¯é‡å®šå‘åˆ°æ–‡ä»¶filename, ä¾‹å¦‚ï¼š</p>
<p>å¦‚æœå‘½ä»¤è¿è¡Œæ­£å¸¸, åˆ™æŠŠç»“æœ(è¿æ¥file1å’Œfile2)å­˜å…¥file3ä¸­ï¼›å¦‚æœå‡ºç°é”™è¯¯, åˆ™æŠŠé”™è¯¯ä¿¡æ¯å­˜æ”¾åˆ°errfileä¸­ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> file1 file2 &gt; file3 2&gt; errfile</span></span><br></pre></td></tr></table></figure>

<h2 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h2><p>ç®¡é“ç”¨äºè¿æ¥ä¸¤ä¸ªå‘½ä»¤, å®ƒæŠŠå‰ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºé‡å®šå‘ç»™åä¸€ä¸ªå‘½ä»¤ä½œä¸ºæ ‡å‡†è¾“å…¥, å…¶æ ¼å¼ä¸º:<br>                                    command1 | command2<br>å¯¹command1æ¥è¯´æ ‡å‡†è¾“å‡ºè¢«é‡æ–°å®šå‘åˆ°ç®¡é“, å¯¹command2æ¥è¯´æ ‡å‡†è¾“å…¥ä¹Ÿè¢«é‡æ–°å®šå‘ä¸ºç®¡é“.</p>
<p>ä¾‹1ï¼šæŒ‰å­—æ¯é¡ºåºæ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å·²ç™»å½•çš„ç”¨æˆ·ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">who</span> | <span class="built_in">sort</span> | more</span></span><br></pre></td></tr></table></figure>

<p>ä¾‹2:</p>
<p>æŸ¥çœ‹ç³»ç»Ÿå½“å‰æœ‰å‡ ä¸ªç”¨æˆ·åœ¨ä¸Šæœºä½¿ç”¨ç³»ç»Ÿ.(wc - ç»Ÿè®¡æ–‡ä»¶çš„å­—èŠ‚æ•°ã€å­—æ•°ã€è¡Œæ•°)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">who</span> | <span class="built_in">wc</span> â€“l</span></span><br></pre></td></tr></table></figure>

<p>æŠŠæ–‡ä»¶myfileæŒ‰æ ‡å‡†æ‰“å°æ ¼å¼å¤„ç†å, é€åˆ°æ‰“å°æœºæ‰“å°å‡ºæ¥(åŸæ–‡ä»¶myfileå¹¶æœªä½œä»»ä½•ä¿®æ”¹)ã€‚lp - æ‰“å°æ–‡ä»¶æˆ–ä¿®æ”¹æ’é˜Ÿçš„æ‰“å°ä»»åŠ¡ã€‚pr - å°†æ–‡æœ¬æ–‡ä»¶è½¬æ¢æˆé€‚åˆæ‰“å°çš„æ ¼å¼ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">pr</span> myfile | lp</span></span><br></pre></td></tr></table></figure>


<p>åœ¨åŒ…å«æ‰€æœ‰ç”¨æˆ·åå•çš„æ–‡ä»¶user_listä¸­, æŸ¥æ‰¾åŒ…å«studentçš„è¡Œ, å¹¶æŠŠç»“æœæ’åºåå­˜æ”¾åœ¨æ–‡ä»¶stu_listä¸­. (ç®¡é“å’Œè¾“å‡ºé‡å®šå‘æ··åˆä½¿ç”¨)ã€‚grep - å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">grep student user_list | <span class="built_in">sort</span> &gt; stu_list</span></span><br></pre></td></tr></table></figure>

<h2 id="å‘½ä»¤å½¢å¼"><a href="#å‘½ä»¤å½¢å¼" class="headerlink" title="å‘½ä»¤å½¢å¼"></a>å‘½ä»¤å½¢å¼</h2><p><em><strong>å•æ¡å‘½ä»¤</strong></em></p>
<p>è¿™æ˜¯æœ€å¸¸ç”¨å‘½ä»¤å½¢å¼, æœ¬å‘½ä»¤æ‰§è¡Œå®Œæˆåå‡ºç°shellæç¤ºç¬¦, å†æ¥æ”¶ä¸‹ä¸€æ¡é”®ç›˜å‘½ä»¤.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> file1</span></span><br></pre></td></tr></table></figure>

<p><em><strong>å¤šæ¡å‘½ä»¤</strong></em></p>
<p>ç¬¬ä¸€æ¡å‘½ä»¤æ‰§è¡Œå®Œæˆå, (æ— åœé¡¿)å†æ‰§è¡Œç¬¬äºŒæ¡å‘½ä»¤, å¦‚æ­¤ä¸‹å». è¿è¡ŒåŠŸèƒ½å’Œæ•ˆæœä¸åœ¨é”®ç›˜ä¸Šé€æ¡è¾“å…¥å‘½ä»¤å¹¶è¿è¡Œæ˜¯å®Œå…¨ä¸€æ ·çš„, å…¶ä¸»è¦ç›®çš„æ˜¯æé«˜é”®ç›˜å‘½ä»¤è¾“å…¥æ•ˆç‡ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">pwd</span>; <span class="built_in">who</span>; <span class="built_in">date</span></span></span><br></pre></td></tr></table></figure>

<p><em><strong>å¤åˆå‘½ä»¤</strong></em></p>
<p>ç®¡é“å‰åçš„å‘½ä»¤ä»»æ„ç»„åˆã€åŒæ—¶è¿è¡Œ, å½¢æˆåŠŸèƒ½æ›´å¼ºå¤§çµæ´»çš„å¤åˆå‘½ä»¤.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ps â€“e | grep student2</span></span><br></pre></td></tr></table></figure>

<p>æ‹¬å·å†…çš„å‘½ä»¤ä»»æ„ç»„åˆã€é¡ºåºæ‰§è¡Œï¼Œä¸”ç”±ä¸€ä¸ªå­shellæ¥å•ç‹¬æ§åˆ¶è¿è¡Œ, ç›¸å½“äºä¸€ä¸ªå°çš„åŠŸèƒ½ç¨‹åº. æ–¹ä¾¿çµæ´», è¿è¡Œæ•ˆç‡é«˜ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">(<span class="built_in">ls</span> ; <span class="built_in">cat</span> file3 ; <span class="built_in">pwd</span>) &gt; run_log</span></span><br></pre></td></tr></table></figure>

<p><em><strong>åå°å‘½ä»¤</strong></em></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> â€“lR &gt; file_list &amp;</span></span><br><span class="line">	[1] 7981</span><br><span class="line"><span class="meta prompt_">$</span></span><br></pre></td></tr></table></figure>


<p>æ™®é€šå‘½ä»¤è¡Œçš„è¡Œå°¾åŠ ä¸Š&amp;ç¬¦å·ï¼Œå°±è¡¨ç¤ºè¯¥å‘½ä»¤åœ¨åå°æ‰§è¡Œã€‚</p>
<p>[1]: å½“å‰shellçš„åå°ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰åºå·</p>
<p>7981: å½“å‰è¿™ä¸ªåå°è¿›ç¨‹ï¼ˆlsè¿›ç¨‹ï¼‰çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ã€‚<br>Shell å¯åŠ¨è¯¥åå°è¿›ç¨‹åä¸å†ç­‰å¾…è¯¥è¿›ç¨‹ç»“æŸï¼Œç«‹å³å¼€å§‹æ¥å—æ–°çš„é”®ç›˜å‘½ä»¤â€”â€”å¤šè¿›ç¨‹å¹¶å‘, æ•°é‡ä¸é™, å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æºã€‚</p>
<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p>ç³»ç»Ÿçš„åŸºæœ¬ç¯å¢ƒå˜é‡æ”¾åœ¨&#x2F;etc&#x2F;profileä¸­, ç”¨æˆ·ç¯å¢ƒå˜é‡æ”¾åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„.profileæ–‡ä»¶ä¸­, ç”¨æˆ·shellå¯åŠ¨æ—¶, å…ˆæ‰§è¡Œ&#x2F;etc&#x2F;profile, å†æ‰§è¡Œç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„.profileã€‚ç¯å¢ƒå˜é‡å¯åœ¨shellè¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹ã€‚</p>
<p>å¸¸ç”¨çš„shellç¯å¢ƒå˜é‡åŠå®ä¾‹:</p>
<blockquote>
<p>HOME&#x3D;&#x2F;usr&#x2F;computer&#x2F;student6 		ç”¨æˆ·ä¸»ç›®å½•, æ³¨å†Œæ—¶çš„åˆå§‹ç›®å½•</p>
<p>PATH&#x3D;&#x2F;bin:&#x2F;usr&#x2F;bin:$HOME&#x2F;bin:.&#x2F; 		é”®ç›˜å‘½ä»¤çš„æœç´¢è·¯å¾„</p>
<p>SHELL&#x3D;&#x2F;bin&#x2F;sh 										ç”¨æˆ·çš„åˆå§‹shellçš„è·¯å¾„åç§°</p>
<p>TERM&#x3D;vt100 												å½“å‰æ‰€ç”¨çš„ç»ˆç«¯ç±»å‹</p>
<p>PS1&#x3D;$ 															shellçš„ä¸»æç¤ºç¬¦</p>
<p>IFS&#x3D; 												åŸŸåˆ†éš”ç¬¦, é€šå¸¸ä¸ºç©ºç™½ç¬¦, ç”¨æ¥åˆ†éš”å‘½ä»¤è¡Œå„ä¸ªåŸŸ</p>
</blockquote>
<h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><p>echoå‘½ä»¤çš„åŸºæœ¬åŠŸèƒ½å°±æ˜¯åœ¨æ ‡å‡†è¾“å‡ºä¸Šæ˜¾ç¤ºåé¢çš„å­—ç¬¦ä¸²ï¼Œæˆ–å˜é‡çš„å€¼ã€‚å½“å­—ç¬¦ä¸²ä¸­å¸¦ç©ºç™½ç¬¦æˆ–å…¶å®ƒæ§åˆ¶å­—ç¬¦æ—¶ï¼Œç”¨å¼•å·å°†å…¶æ‹¬èµ·æ¥ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> 12345</span></span><br><span class="line">12345</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;department computer&quot;</span></span></span><br><span class="line">department computer</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;My home directory is: <span class="variable">$HOME</span>&quot;</span></span></span><br><span class="line">My home directory is: /usr/teacher/david</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> â€“n <span class="string">&quot;Input your choice (y/n) [ ]\b\b&quot;</span></span></span><br><span class="line">Input your choice (y/n) [ _ ]</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨echoå‘½ä»¤æ—¶ï¼Œè¾“å‡ºä¼šè‡ªåŠ¨æ¢è¡Œï¼Œè€Œä½¿ç”¨echo -nå‘½ä»¤æ—¶ï¼Œè¾“å‡ºä¸ä¼šæ¢è¡Œã€‚</p>
<h2 id="ç³»ç»Ÿå˜é‡"><a href="#ç³»ç»Ÿå˜é‡" class="headerlink" title="ç³»ç»Ÿå˜é‡"></a>ç³»ç»Ÿå˜é‡</h2><p>å¸¸ç”¨ç³»ç»Ÿå˜é‡:</p>
<blockquote>
<p>$0 									å½“å‰shellç¨‹åºçš„åå­—</p>
<p>$1 ~ $9 							å‘½ä»¤è¡Œä¸Šçš„ç¬¬ä¸€åˆ°ç¬¬ä¹ä¸ªå‚æ•°</p>
<p>$# 									å‘½ä»¤è¡Œä¸Šçš„å‚æ•°ä¸ªæ•°</p>
<p>$* 									å‘½ä»¤è¡Œä¸Šçš„æ‰€æœ‰å‚æ•°</p>
<p>$@ 									åˆ†åˆ«ç”¨åŒå¼•å·å¼•ç”¨å‘½ä»¤è¡Œä¸Šçš„æ‰€æœ‰å‚æ•°</p>
<p>$$ 									å½“å‰è¿›ç¨‹çš„è¿›ç¨‹æ ‡è¯†å·(PID)</p>
<p>$? 									ä¸Šä¸€æ¡å‘½ä»¤çš„é€€å‡ºçŠ¶æ€</p>
<p>$! 										æœ€åä¸€ä¸ªåå°è¿›ç¨‹çš„è¿›ç¨‹æ ‡è¯†å·</p>
</blockquote>
<p>ç³»ç»Ÿå˜é‡åªèƒ½å¼•ç”¨ä¸èƒ½ä¿®æ”¹!</p>
<p>ç³»ç»Ÿå˜é‡åº”ç”¨ä¸¾ä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> aa bb cc <span class="built_in">dd</span> $$</span></span><br><span class="line">aa bb cc dd 2391</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> file1 file2 &gt; file3 2&gt; errlog</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $? 	(é0è¡¨ç¤ºå‘½ä»¤è¿è¡Œå¤±è´¥, é”™è¯¯ä¿¡æ¯åœ¨ errlog æ–‡ä»¶ä¸­)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span></span></span><br><span class="line">								(ç©ºè¡Œ, å³echoè¾“å‡ºä¸²å°¾éšå«çš„æ¢è¡Œç¬¦)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> This is a <span class="built_in">test</span>. 			(å•è¯é—´å¤šä¸ªç©ºæ ¼)</span></span><br><span class="line">This is a test.</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;This is a test.&quot;</span> 		(ç”¨å¼•å·åŒ…æ‹¬æ—¶ç»“æœå¦‚ä½•?)</span></span><br></pre></td></tr></table></figure>

<h2 id="å±€éƒ¨å˜é‡-ç”¨æˆ·å˜é‡"><a href="#å±€éƒ¨å˜é‡-ç”¨æˆ·å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡(ç”¨æˆ·å˜é‡)"></a>å±€éƒ¨å˜é‡(ç”¨æˆ·å˜é‡)</h2><p>å±€éƒ¨å˜é‡æ˜¯ç”±ç”¨æˆ·æ ¹æ®éœ€è¦ä»»æ„åˆ›å»ºçš„. å˜é‡åé€šå¸¸ç”±ä¸€ä¸ªå­—æ¯åè·Ÿé›¶ä¸ªåˆ°å¤šä¸ªå­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ç»„æˆã€‚å¼•ç”¨å˜é‡çš„å€¼æ—¶ï¼Œåœ¨å˜é‡åå‰é¢åŠ ä¸Š$ç¬¦å·. ä¾‹å¦‚:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">AA=123 				å®šä¹‰å˜é‡AA</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$AA</span> 				å¼•ç”¨å˜é‡AAçš„å€¼</span></span><br><span class="line">123 					(å˜é‡AAçš„å€¼)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">B=<span class="string">&quot;this is a string&quot;</span> 	å®šä¹‰å˜é‡Bï¼Œ (å­—ç¬¦ä¸²ä¸­æœ‰ç©ºæ ¼æ—¶ç”¨å¼•å·)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$B</span> 				å¼•ç”¨å˜é‡Bçš„å€¼</span></span><br><span class="line">this is a string 		(å˜é‡Bçš„å€¼)</span><br></pre></td></tr></table></figure>

<h2 id="å•å¼•å·ã€åŒå¼•å·ã€åæ’‡å·å’ŒèŠ±æ‹¬å·"><a href="#å•å¼•å·ã€åŒå¼•å·ã€åæ’‡å·å’ŒèŠ±æ‹¬å·" class="headerlink" title="å•å¼•å·ã€åŒå¼•å·ã€åæ’‡å·å’ŒèŠ±æ‹¬å·"></a>å•å¼•å·ã€åŒå¼•å·ã€åæ’‡å·å’ŒèŠ±æ‹¬å·</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">a=<span class="string">&quot;he is a student&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;She said: <span class="variable">$a</span>&quot;</span></span></span><br><span class="line">She said: he is a student 	echoæ‰§è¡Œæ—¶ï¼Œæ›¿æ¢äº†å˜é‡$açš„å€¼</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">b=<span class="string">&#x27;The value of a is $a&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$b</span></span></span><br><span class="line">The value of a is $a 		echoæ‰§è¡Œæ—¶ï¼Œæœªæ›¿æ¢äº†å˜é‡$açš„å€¼</span><br><span class="line"></span><br><span class="line">shellè§„å®šå•å¼•å·ç¦æ­¢å˜é‡æ›¿æ¢, å…ƒå­—ç¬¦$å’Œ*ç­‰ä¿æŒå…¶ç¬¦å·æœ¬èº«; è€ŒåŒå¼•å·å…è®¸å…ƒå­—ç¬¦å˜é‡æ›¿æ¢.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">c=<span class="string">&quot;The value of a is <span class="variable">$a</span>&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$c</span></span></span><br><span class="line">The value of a is he is a student</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">a=<span class="built_in">date</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$a</span></span></span><br><span class="line">date (å˜é‡açš„å€¼æ˜¯å­—ç¬¦ä¸²date)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">b=`<span class="built_in">date</span>` (åæ’‡å·ä¸­çš„å­—ç¬¦ä¸²ä½œä¸ºå‘½ä»¤å)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$b</span></span></span><br><span class="line">Sat Feb 1 16:28:19 Beijing 2003 </span><br><span class="line">(å˜é‡bçš„å€¼æ˜¯åæ’‡å·ä¸­å‘½ä»¤çš„æ‰§è¡Œç»“æœ)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">c=<span class="string">&quot;There is a teach&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$cer</span> reading room&quot;</span></span></span><br><span class="line">reading room (æœªå®šä¹‰å˜é‡cer, å…¶å€¼ç”¨ç©ºä¸²æ›¿ä»£)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;c&#125;</span>er reading room&quot;</span></span></span><br><span class="line">There is a teacher reading room </span><br><span class="line">(èŠ±æ‹¬å·å°†å˜é‡åå’Œåé¢çš„å­—ç¬¦ä¸²åŒºåˆ†å¼€)</span><br></pre></td></tr></table></figure>

<h2 id="shellç¼–ç¨‹"><a href="#shellç¼–ç¨‹" class="headerlink" title="shellç¼–ç¨‹"></a>shellç¼–ç¨‹</h2><p>shell ç¼–ç¨‹çš„åŸºæœ¬è¿‡ç¨‹ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰æ­¥:</p>
<ol>
<li>å»ºç«‹ shell æ–‡ä»¶<br> åŒ…å«ä»»æ„å¤šè¡Œæ“ä½œç³»ç»Ÿå‘½ä»¤æˆ–shellå‘½ä»¤çš„æ–‡æœ¬æ–‡ä»¶;</li>
<li>èµ‹äºˆshellæ–‡ä»¶æ‰§è¡Œæƒé™<br> ç”¨chmodå‘½ä»¤ä¿®æ”¹æƒé™;</li>
<li>æ‰§è¡Œshellæ–‡ä»¶<br> ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸Šè°ƒç”¨è¯¥shellç¨‹åº.</li>
</ol>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1. å»ºç«‹shellæ–‡ä»¶ (å¯ç”¨ä»»ä½•å»ºç«‹æ–‡æœ¬æ–‡ä»¶çš„æ–¹æ³•):</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> prog1</span></span><br><span class="line">who | grep $1</span><br><span class="line">2. èµ‹äºˆæ‰§è¡Œæƒé™: (åˆå§‹æ–‡æœ¬æ–‡ä»¶æ— æ‰§è¡Œæƒé™)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> 740 prog1</span></span><br><span class="line">3. æ‰§è¡Œè¯¥shellç¨‹åº</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">prog1 student5</span></span><br><span class="line">prog1: not found </span><br><span class="line">(shellåœ¨æ ‡å‡†æœç´¢ç›®å½•ä¸­æ‰¾ä¸åˆ°prog1å‘½ä»¤)</span><br><span class="line">4. æŒ‡å®šè·¯å¾„æˆ–ä¿®æ”¹ç¯å¢ƒå˜é‡PATHåæ‰§è¡Œshellç¨‹åº</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./prog1 student5</span></span><br><span class="line">student5 tty06 Feb 8 09:12</span><br></pre></td></tr></table></figure>

<h3 id="shell-ç¨‹åºå’Œè¯­å¥"><a href="#shell-ç¨‹åºå’Œè¯­å¥" class="headerlink" title="shell ç¨‹åºå’Œè¯­å¥"></a>shell ç¨‹åºå’Œè¯­å¥</h3><p>shell ç¨‹åºç”±é›¶è‡³å¤šæ¡shellè¯­å¥æ„æˆ. shellè¯­å¥åŒ…æ‹¬ä¸‰å¤§ç±»: åŠŸèƒ½æ€§è¯­å¥ã€ç»“æ„æ€§è¯­å¥å’Œè¯´æ˜æ€§è¯­å¥ã€‚<br>è¯´æ˜æ€§è¯­å¥ï¼ˆæ³¨é‡Šè¡Œï¼‰ï¼š</p>
<blockquote>
<p>ä»¥#å·å¼€å§‹åˆ°è¡Œå°¾çš„éƒ¨åˆ†ï¼Œä¸è¢«è§£é‡Šæ‰§è¡Œã€‚</p>
</blockquote>
<p>åŠŸèƒ½æ€§è¯­å¥: </p>
<blockquote>
<p>ä»»æ„çš„æ“ä½œç³»ç»Ÿå‘½ä»¤ã€shellå†…éƒ¨å‘½ä»¤ã€è‡ªç¼–ç¨‹åºã€å…¶å®ƒshellç¨‹åºåç­‰ã€‚</p>
</blockquote>
<p>ç»“æ„æ€§è¯­å¥ï¼š</p>
<blockquote>
<p>æ¡ä»¶æµ‹è¯•è¯­å¥ã€å¤šè·¯åˆ†æ”¯è¯­å¥ã€å¾ªç¯è¯­å¥ã€å¾ªç¯æ§åˆ¶è¯­å¥ç­‰ã€‚</p>
</blockquote>
<p><em><strong>readå‘½ä»¤</strong></em><br>readä»æ ‡å‡†è¾“å…¥è¯»å…¥ä¸€è¡Œ, å¹¶èµ‹å€¼ç»™åé¢çš„å˜é‡, å…¶è¯­æ³•ä¸º:</p>
<blockquote>
<p>. read var</p>
<p>æŠŠè¯»å…¥çš„æ•°æ®å…¨éƒ¨èµ‹ç»™var</p>
</blockquote>
<blockquote>
<p>. read var1 var2 var3</p>
<p>æŠŠè¯»å…¥è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°èµ‹ç»™var1, ç¬¬äºŒä¸ªå‚æ•°èµ‹ç»™ var2, â€¦â€¦ï¼ŒæŠŠå…¶ä½™æ‰€æœ‰çš„å‚æ•°èµ‹ç»™æœ€åä¸€ä¸ªå˜é‡.</p>
</blockquote>
<p>å¦‚æœæ‰§è¡Œreadè¯­å¥æ—¶æ ‡å‡†è¾“å…¥æ— æ•°æ®, åˆ™ç¨‹åºåœ¨æ­¤åœç•™ç­‰ä¾¯, ç›´åˆ°æ•°æ®çš„åˆ°æ¥æˆ–è¢«ç»ˆæ­¢è¿è¡Œ.</p>
<p>readåº”ç”¨å®ä¾‹ï¼ˆå‘½ä»¤è¡Œæ‰§è¡Œï¼‰<br>read è¯»å–æ ‡å‡†è¾“å…¥ï¼ˆé”®ç›˜ï¼‰, è¾“å…¥çš„å†…å®¹èµ‹ç»™åé¢çš„å˜é‡. </p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">read</span> name age</span><br><span class="line">yilan 23 								<span class="comment">#ä»é”®ç›˜è¾“å…¥çš„å†…å®¹</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;student <span class="variable">$name</span> is <span class="variable">$age</span> years old&quot;</span></span><br><span class="line">student yilan is 23 years old 			<span class="comment">#å±å¹•æ˜¾ç¤ºçš„å†…å®¹</span></span><br></pre></td></tr></table></figure>

<p> readåº”ç”¨å®ä¾‹ï¼ˆshellè„šæœ¬ç¨‹åºï¼‰</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">#example1 for read</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;Input your name: &quot;</span></span><br><span class="line"><span class="built_in">read</span> username</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Your name is <span class="variable">$username</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#example2 for read</span></span><br><span class="line"><span class="built_in">echo</span> â€“n <span class="string">&quot;Input date with format yyyy mm dd: &quot;</span></span><br><span class="line"><span class="built_in">read</span> year month day</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Today is <span class="variable">$year</span>/<span class="variable">$month</span>/<span class="variable">$day</span>, right?&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;Press any key to confirm and continue&quot;</span></span><br><span class="line"><span class="built_in">read</span> answer</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;I know the date, bye!&quot;</span></span><br></pre></td></tr></table></figure>

<p><em><strong>expr å‘½ä»¤</strong></em></p>
<p>ç®—æœ¯è¿ç®—å‘½ä»¤exprä¸»è¦ç”¨äºè¿›è¡Œç®€å•çš„æ•´æ•°è¿ç®—ï¼ŒåŒ…æ‹¬åŠ (+)ã€å‡ï¼ˆ-ï¼‰ã€<br>ä¹˜ï¼ˆ\*)ã€æ•´é™¤ï¼ˆ&#x2F;ï¼‰å’Œæ±‚æ¨¡ï¼ˆ%ï¼‰ç­‰æ“ä½œã€‚ä¾‹å¦‚:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">expr</span> 12 + 5 \* 3		<span class="comment">#åæ–œçº¿å»æ‰*å·çš„å…ƒå­—ç¬¦å«ä¹‰</span></span></span><br><span class="line">27</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">expr</span> 3 - 8 / 2</span></span><br><span class="line">-1</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">expr</span> 25 % 4</span></span><br><span class="line">1</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">num=9</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sum</span>=`<span class="built_in">expr</span> <span class="variable">$num</span> \* 6`	<span class="comment">#åæ’‡å·å¼•ç”¨å‘½ä»¤çš„è¿è¡Œç»“æœ</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$sum</span></span></span><br><span class="line">54</span><br></pre></td></tr></table></figure>

<p><em><strong>æ¡ä»¶è¯­å¥</strong></em></p>
<p>è¯­æ³•ç»“æ„:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> è¡¨è¾¾å¼</span><br><span class="line"><span class="keyword">then</span> å‘½ä»¤è¡¨</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> è¡¨è¾¾å¼</span><br><span class="line"><span class="keyword">then</span> å‘½ä»¤è¡¨1</span><br><span class="line"><span class="keyword">else</span> å‘½ä»¤è¡¨2</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p><em>ifè¯­å¥åº”ç”¨å®ä¾‹</em></p>
<p>shellç¨‹åºprog2, æµ‹è¯•å‘½ä»¤è¡Œå‚æ•°æ˜¯å¦ä¸ºä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚ ç”¨æ³•ä¸º:prog2  file<br>prog2è„šæœ¬å†…å®¹å¦‚ä¸‹: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">#The statement of ifâ€¦thenâ€¦fi (æ³¨é‡Šè¯­å¥)</span></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$1</span> ] (æµ‹è¯•å‘½ä»¤è¡Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦ä¸ºæ–‡ä»¶)</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;File <span class="variable">$1</span> exists&quot;</span> (å¼•ç”¨å˜é‡å€¼)</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$HOME</span>/<span class="variable">$1</span> ] (æµ‹è¯•å‚æ•°æ˜¯å¦ä¸ºç›®å½•)</span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;File <span class="variable">$1</span> is a directory&quot;</span> (å¼•ç”¨å˜é‡å€¼)</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>åº”ç”¨å®ä¾‹: shellç¨‹åºprog3, ç”¨æ³•ä¸º: prog3 file<br>prog3çš„å†…å®¹å¦‚ä¸‹:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">#The statement of ifâ€¦thenâ€¦elseâ€¦fi</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$1</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> is a directory&quot;</span></span><br><span class="line">	<span class="built_in">exit</span> (ç«‹å³é€€å‡ºå½“å‰çš„shellç¨‹åº)</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">	<span class="keyword">if</span> [ -f <span class="variable">$1</span> ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> is a common file&quot;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;unknown&quot;</span> </span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p><em><strong>æµ‹è¯•è¯­å¥</strong></em></p>
<p>testè¯­å¥å¯æµ‹è¯•ä¸‰ç§å¯¹è±¡:å­—ç¬¦ä¸²ï¼Œæ•´æ•°ï¼Œæ–‡ä»¶å±æ€§<br>æ¯ç§æµ‹è¯•å¯¹è±¡éƒ½æœ‰è‹¥å¹²æµ‹è¯•æ“ä½œç¬¦ï¼Œä¾‹å¦‚:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">test &quot;$answer&quot; = &quot;yes&quot;</span><br></pre></td></tr></table></figure>

<p>å˜é‡answerçš„å€¼æ˜¯å¦ä¸ºå­—ç¬¦ä¸²yes</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">test $num â€“eq 18</span><br></pre></td></tr></table></figure>

<p>å˜é‡numçš„å€¼æ˜¯å¦ä¸ºæ•´æ•°18</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">test -d tmp</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•tmpæ˜¯å¦ä¸ºä¸€ä¸ªç›®å½•å</p>
<p>testå‘½ä»¤çš„åº”ç”¨:<br>testå‘½ä»¤æµ‹è¯•çš„æ¡ä»¶æˆç«‹æ—¶, å‘½ä»¤è¿”å›å€¼ä¸ºçœŸ(0)ï¼Œå¦åˆ™è¿”å›å€¼ä¸ºå‡(é0).<br>ç”¨æ³•ä¸€. </p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">test</span> <span class="variable">$name</span> -eq <span class="variable">$1</span> </span><br><span class="line"><span class="built_in">echo</span> $?</span><br></pre></td></tr></table></figure>

<p>ç”¨æ³•äºŒ.</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -f <span class="variable">$filename</span></span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">â€¦â€¦</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>ç”¨æ–¹æ‹¬å·æ›¿ä»£testè¯­å¥ï¼Œé€šå¸¸ç®€å†™ä¸º:<code> if [ -f $filename ]</code></p>
<p><em><strong>å¾ªç¯è¯­å¥</strong></em></p>
<p>å½“å¾ªç¯æ¬¡æ•°å·²çŸ¥æˆ–ç¡®å®šæ—¶, ä½¿ç”¨forå¾ªç¯è¯­å¥æ¥å¤šæ¬¡æ‰§è¡Œä¸€<br>æ¡æˆ–ä¸€ç»„å‘½ä»¤. å¾ªç¯ä½“ç”±è¯­å¥æ‹¬å·doå’Œdoneæ¥é™å®šã€‚ æ ¼å¼ä¸º: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> å˜é‡å <span class="keyword">in</span> å•è¯è¡¨</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	å‘½ä»¤è¡¨</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>å˜é‡ä¾æ¬¡å–å•è¯è¡¨ä¸­çš„å„ä¸ªå•è¯, æ¯å–ä¸€æ¬¡å•è¯, å°±æ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ä¸­çš„å‘½ä»¤. å¾ªç¯æ¬¡æ•°ç”±å•è¯è¡¨ä¸­çš„å•è¯æ•°ç¡®å®š. å‘½ä»¤è¡¨ä¸­çš„å‘½ä»¤å¯ä»¥æ˜¯ä¸€æ¡, ä¹Ÿå¯ä»¥æ˜¯ç”±åˆ†å·æˆ–æ¢è¡Œç¬¦åˆ†å¼€çš„å¤šæ¡ã€‚å¦‚æœå•è¯è¡¨æ˜¯å‘½ä»¤è¡Œä¸Šçš„æ‰€æœ‰ä½ç½®å‚æ•°æ—¶, å¯ä»¥åœ¨forè¯­å¥ä¸­çœç•¥ â€œin å•è¯è¡¨â€ éƒ¨åˆ†ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> å‘½ä»¤æˆ–è¡¨è¾¾å¼</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	å‘½ä»¤è¡¨</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>whileè¯­å¥é¦–å…ˆæµ‹è¯•å…¶åçš„å‘½ä»¤æˆ–è¡¨è¾¾å¼çš„å€¼ï¼Œå¦‚æœä¸ºçœŸï¼Œå°±æ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ä¸­çš„å‘½ä»¤ï¼Œç„¶åå†æµ‹è¯•è¯¥å‘½ä»¤æˆ–è¡¨è¾¾å¼çš„å€¼ï¼Œæ‰§è¡Œå¾ªç¯ä½“ï¼Œç›´åˆ°è¯¥å‘½ä»¤æˆ–è¡¨è¾¾å¼ä¸ºå‡æ—¶é€€å‡ºå¾ªç¯ã€‚whileè¯­å¥çš„é€€å‡ºçŠ¶æ€ä¸ºâ€œå‘½ä»¤è¡¨â€ä¸­è¢«æ‰§è¡Œçš„æœ€åä¸€æ¡å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚</p>
<h2 id="shellç¤ºä¾‹"><a href="#shellç¤ºä¾‹" class="headerlink" title="shellç¤ºä¾‹"></a>shellç¤ºä¾‹</h2><p>ç¬¬ä¸€é¢˜å¿…é¡»æŒæ¡ï¼ŒäºŒä¸‰é¢˜çœ‹ä¸ªäººå§ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># Put  line  numbers  on  all  lines  of  a  file </span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span>  -ne  1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">       <span class="built_in">echo</span>  <span class="string">&quot;Usage: <span class="variable">$0</span>  filename &quot;</span>  &gt;&amp;2</span><br><span class="line">       <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">count=1                     <span class="comment"># Initialize count</span></span><br><span class="line"><span class="built_in">cat</span>  <span class="variable">$1</span>  |  <span class="keyword">while</span>  <span class="built_in">read</span>  line   </span><br><span class="line"><span class="comment"># Input is coming from file on command line</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span>  <span class="variable">$count</span>  <span class="variable">$line</span></span><br><span class="line">    count=`<span class="built_in">expr</span> <span class="variable">$count</span> + 1`</span><br><span class="line"><span class="keyword">done</span>  &gt;  tmp$$           <span class="comment"># Output is going to a temporary file</span></span><br><span class="line"><span class="built_in">mv</span>  tmp$$  <span class="variable">$1</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªshellè„šæœ¬ï¼Œå…¶åŠŸèƒ½æ˜¯ä¸ºä¸€ä¸ªæ–‡ä»¶çš„æ¯ä¸€è¡Œæ·»åŠ è¡Œå·ã€‚é¦–å…ˆï¼Œ<code>#!/bin/sh</code>æŒ‡å®šäº†è„šæœ¬çš„è§£é‡Šå™¨ä¸º&#x2F;bin&#x2F;shã€‚ç„¶åï¼Œè„šæœ¬ä½¿ç”¨äº†ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œ<code>if [ $# -ne 1 ]</code>ï¼Œåˆ¤æ–­è„šæœ¬çš„å‚æ•°ä¸ªæ•°æ˜¯å¦ä¸º1ã€‚<code>-ne</code>æ˜¯ä¸€ä¸ªæ¡ä»¶æµ‹è¯•è¿ç®—ç¬¦ï¼Œç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°<strong>æ˜¯å¦ä¸ç›¸ç­‰</strong>ã€‚<code>$#</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œè¡¨ç¤ºä¼ é€’ç»™è„šæœ¬çš„å‚æ•°ä¸ªæ•°ã€‚å¦‚æœå‚æ•°ä¸ªæ•°ä¸ç­‰äº1ï¼Œåˆ™æ‰§è¡Œæ¡ä»¶åˆ¤æ–­ä¸­çš„ä»£ç å—ã€‚åœ¨æ¡ä»¶åˆ¤æ–­ä»£ç å—ä¸­ï¼Œ<code>echo &quot;Usage: $0 filename&quot; &gt;&amp;2</code>ç”¨äºè¾“å‡ºé”™è¯¯ä¿¡æ¯åˆ°<strong>æ ‡å‡†é”™è¯¯è¾“å‡º</strong>ã€‚<code>$0</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œè¡¨ç¤ºè„šæœ¬çš„åç§°ã€‚<code>&gt;&amp;2</code>å°†è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚ç„¶åä½¿ç”¨<code>exit 1</code>é€€å‡ºè„šæœ¬ï¼Œè¿”å›çŠ¶æ€ç 1è¡¨ç¤ºå‘ç”Ÿäº†é”™è¯¯ã€‚å¦‚æœå‚æ•°ä¸ªæ•°ä¸º1ï¼Œåˆ™ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚<code>count=1</code>åˆå§‹åŒ–ä¸€ä¸ªå˜é‡countï¼Œç”¨äºä¿å­˜è¡Œå·ã€‚æ¥ä¸‹æ¥ä½¿ç”¨<code>cat $1 | while read line</code>è¯­å¥ï¼Œä»å‘½ä»¤è¡Œå‚æ•°ä¸­çš„æ–‡ä»¶ä¸­é€è¡Œè¯»å–å†…å®¹ï¼Œå¹¶å°†æ¯è¡Œå†…å®¹èµ‹å€¼ç»™å˜é‡<code>line</code>ã€‚<code>$1</code>ï¼šè¡¨ç¤ºè„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³æ–‡ä»¶åã€‚<code>cat $1</code>ï¼šä½¿ç”¨<code>cat</code>å‘½ä»¤å°†æ–‡ä»¶å†…å®¹è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚åœ¨å¾ªç¯ä¸­ï¼Œä½¿ç”¨<code>echo $count $line</code>è¾“å‡ºè¡Œå·å’Œå½“å‰è¡Œçš„å†…å®¹ã€‚<code>echo $count $line</code>ä¼šåœ¨è¡Œå·å’Œå†…å®¹ä¹‹é—´è¾“å‡ºä¸€ä¸ªç©ºæ ¼ã€‚ç„¶åï¼Œä½¿ç”¨<code>count=expr $count + 1</code>å°†è¡Œå·åŠ 1ï¼Œå¹¶å°†ç»“æœèµ‹å€¼ç»™å˜é‡<code>count</code>ã€‚å¾ªç¯ç»“æŸåï¼Œä½¿ç”¨<code>done &gt; tmp$$</code>å°†å¾ªç¯ä¸­çš„è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶<code>tmp$$</code>ä¸­ã€‚<code>$$</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œè¡¨ç¤ºå½“å‰è„šæœ¬çš„è¿›ç¨‹IDã€‚æœ€åï¼Œä½¿ç”¨<code>mv tmp$$ $1</code>å°†ä¸´æ—¶æ–‡ä»¶<code>tmp$$</code>é‡å‘½åä¸ºåŸå§‹æ–‡ä»¶å<code>$1</code>ï¼Œè¦†ç›–åŸå§‹æ–‡ä»¶ï¼Œå®ç°äº†ä¸ºæ–‡ä»¶çš„æ¯ä¸€è¡Œæ·»åŠ è¡Œå·çš„åŠŸèƒ½ã€‚</p>
<hr>
<p>ç¼–å†™ç¨‹åºåˆ—å‡ºå½“å‰ç™»å½•ç”¨æˆ·çš„è´¦å·ï¼Œå¹¶åœ¨æœ‰æ–°ç”¨æˆ·ç™»å½•æ—¶æ˜¾ç¤ºæ–°ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># List current logged-in users and display new login information</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the initial list of logged-in users</span></span><br><span class="line"><span class="built_in">users</span>=$(<span class="built_in">who</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Continuously check for new logins</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># Get the updated list of logged-in users</span></span><br><span class="line">    new_users=$(<span class="built_in">who</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Check for new logins</span></span><br><span class="line">    <span class="keyword">for</span> user <span class="keyword">in</span> <span class="variable">$new_users</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [[ ! <span class="variable">$users</span> =~ <span class="variable">$user</span> ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;New login: <span class="variable">$user</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Update the list of logged-in users</span></span><br><span class="line">    <span class="built_in">users</span>=<span class="variable">$new_users</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Sleep for 1 second before checking again</span></span><br><span class="line">    <span class="built_in">sleep</span> 3</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>who</code>å‘½ä»¤è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨<code>awk</code>å‘½ä»¤æå–æ¯è¡Œçš„ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆå³ç”¨æˆ·åï¼‰ï¼Œå°†ç»“æœèµ‹å€¼ç»™å˜é‡<code>users</code>ï¼Œè¿™æ˜¯åˆå§‹ç™»å½•ç”¨æˆ·åˆ—è¡¨ã€‚<code>if [[ ! $users =~ $user ]]; then</code>ï¼šåœ¨å¾ªç¯ä¸­ï¼Œæ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºæ–°ç”¨æˆ·ã€‚<code>$users</code>æ˜¯ä¹‹å‰ä¿å­˜çš„ç™»å½•ç”¨æˆ·åˆ—è¡¨ï¼Œ<code>$user</code>æ˜¯å½“å‰å¾ªç¯ä¸­çš„ç”¨æˆ·ã€‚</p>
<ul>
<li><code>[[ ... ]]</code>ï¼šè¿™æ˜¯bashä¸­çš„æ¡ä»¶è¡¨è¾¾å¼ï¼Œç”¨äºè¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚</li>
<li><code>!</code>ï¼šè¿™æ˜¯é€»è¾‘å–åè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºå¯¹åé¢æ¡ä»¶çš„ç»“æœè¿›è¡Œå–åã€‚</li>
<li><code>=~</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¿ç®—ç¬¦ï¼Œç”¨äºåˆ¤æ–­å·¦ä¾§çš„å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…å³ä¾§çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</li>
</ul>
<hr>
<p>ç¼–å†™ç¨‹åºåˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹æ–‡ä»¶å¤§å°å¤§äºæŒ‡å®šå¤§å°çš„æ–‡ä»¶ååŠå…¶å®Œæ•´ä¿¡æ¯ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># List files in a directory larger than a specified size</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check for correct number of arguments</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$#</span> -ne 2 ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Usage: <span class="variable">$0</span> directory size&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the arguments</span></span><br><span class="line"><span class="built_in">dir</span>=<span class="variable">$1</span></span><br><span class="line">size=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find and list the files larger than the specified size</span></span><br><span class="line">find <span class="variable">$dir</span> -<span class="built_in">type</span> f -size +<span class="variable">$&#123;size&#125;</span>k -<span class="built_in">exec</span> <span class="built_in">ls</span> -lh &#123;&#125; \;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>if [[ $# -ne 2 ]]; then</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œç”¨äºæ£€æŸ¥å‘½ä»¤è¡Œå‚æ•°çš„æ•°é‡æ˜¯å¦ä¸º2ã€‚</li>
<li><code>echo &quot;Usage: $0 directory size&quot;</code>ï¼šå¦‚æœå‘½ä»¤è¡Œå‚æ•°æ•°é‡ä¸ä¸º2ï¼Œåˆ™è¾“å‡ºä½¿ç”¨è¯´æ˜ã€‚</li>
</ul>
<p><code>find $dir -type f -size +$&#123;size&#125;k -exec ls -lh &#123;&#125; \;</code>ï¼šä½¿ç”¨<code>find</code>å‘½ä»¤æŸ¥æ‰¾ç›®å½•<code>$dir</code>ä¸‹çš„æ–‡ä»¶ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><p><code>-type f</code>ï¼šé™å®šæŸ¥æ‰¾çš„å¯¹è±¡ä¸ºæ–‡ä»¶ã€‚</p>
</li>
<li><p><code>-size +$&#123;size&#125;k</code>ï¼šé™å®šæ–‡ä»¶å¤§å°å¤§äºæŒ‡å®šçš„å¤§å°<code>$&#123;size&#125;</code>ï¼ˆå•ä½ä¸ºkï¼‰ã€‚</p>
</li>
<li><p><code>-exec ls -lh &#123;&#125; \;</code>ï¼šå¯¹äºæ¯ä¸ªç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ï¼Œæ‰§è¡Œ<code>ls -lh</code>å‘½ä»¤æ¥åˆ—å‡ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
<li><p><code>&#123;&#125;</code>ï¼šåœ¨<code>find</code>å‘½ä»¤ä¸­ï¼Œ<code>&#123;&#125;</code>è¡¨ç¤ºæ‰¾åˆ°çš„æ¯ä¸ªæ–‡ä»¶çš„å ä½ç¬¦ã€‚<code>find</code>å‘½ä»¤ä¼šå°†æ‰¾åˆ°çš„æ¯ä¸ªæ–‡ä»¶ä¾æ¬¡æ›¿æ¢ä¸º<code>&#123;&#125;</code>ï¼Œä»è€Œå…è®¸å¯¹è¿™äº›æ–‡ä»¶æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚</p>
</li>
<li><p><code>\;</code>ï¼šåœ¨<code>find</code>å‘½ä»¤ä¸­ï¼Œ<code>\;</code>è¡¨ç¤ºä¸€ä¸ªåˆ†éš”ç¬¦ï¼Œç”¨äºè¡¨ç¤º<code>-exec</code>é€‰é¡¹çš„ç»“æŸã€‚å®ƒå‘Šè¯‰<code>find</code>å‘½ä»¤åœ¨æ¯ä¸ªè¢«æ›¿æ¢çš„æ–‡ä»¶ååŠ ä¸Šåˆ†å·ï¼Œä»¥æ ‡è®°æ‰§è¡Œå‘½ä»¤çš„ç»“æŸã€‚</p>
</li>
</ul>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»ŸæœŸæœ«å¤ä¹ ä¹‹ç»å…¸å¤§é¢˜</title>
    <url>/2023/06/17/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/8/</url>
    <content><![CDATA[<hr>
<p>ç”¨å››ç§æ–¹æ³•è§£å†³å“²å­¦å®¶å°±é¤é—®é¢˜</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore chopstick[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">semaphore num = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">philosopher</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        wait(num);</span><br><span class="line">        wait(chopstick[i]);</span><br><span class="line">        wait(chopstick[(i + <span class="number">1</span>) % <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿›è¡Œè¿›é¤æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">        signal(chopstick[i]);</span><br><span class="line">        signal(chopstick[(i + <span class="number">1</span>) % <span class="number">5</span>]);</span><br><span class="line">        signal(num);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿›è¡Œæ€è€ƒæ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore chopstick[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">philosopher</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">1</span>)&#123;</span><br><span class="line">    wait(chopstick[i]);        <span class="comment">//ç­‰å·¦ä¾§çš„ç­·å­</span></span><br><span class="line">    wait(chopstick[(i+<span class="number">1</span>) % <span class="number">5</span>]);<span class="comment">//ç­‰å³ä¾§çš„ç­·å­</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">    wait(chopstick[(i+<span class="number">1</span>)%<span class="number">5</span>]); <span class="comment">//ç­‰å¾…å³ä¾§çš„ç­·å­</span></span><br><span class="line">    wait(chopstick[i]);        <span class="comment">//ç­‰å·¦ä¾§çš„ç­·å­     </span></span><br><span class="line">    &#125;</span><br><span class="line">         â€¦</span><br><span class="line">        eat</span><br><span class="line">         â€¦</span><br><span class="line">    signal(chopstick[i]);    <span class="comment">//æ”¾ä¸‹å·¦ä¾§</span></span><br><span class="line">    signal(chopstick[(i+<span class="number">1</span>) % <span class="number">5</span>]);<span class="comment">//æ”¾ä¸‹å³ä¾§</span></span><br><span class="line">         â€¦</span><br><span class="line">        think</span><br><span class="line">         â€¦</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore chopstick[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    think;</span><br><span class="line"></span><br><span class="line">    Sswait(chopstick[(i + <span class="number">1</span>) % <span class="number">5</span>], chopstick[i]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Eat</span></span><br><span class="line"></span><br><span class="line">    Ssignal(chopstick[(i + <span class="number">1</span>) % <span class="number">5</span>], chopstick[i]);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">while</span> (TRUE);</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡äº’æ–¥ä¿¡å·é‡ mutex å¯¹ eatä¹‹å‰å–å·¦å³ä¸¤ä¾§ç­·å­çš„æ“ä½œè¿›è¡Œä¿æŠ¤ï¼Œå¯ä»¥é˜²æ­¢æ­»é”çš„å‡ºç°</span></span><br><span class="line"></span><br><span class="line">semaphore chopstick[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">semaphore mutex = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">philosopher</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        wait(mutex);</span><br><span class="line">        wait(chopstick[i]);</span><br><span class="line">        wait(chopstick[(i + <span class="number">1</span>) % <span class="number">5</span>]);</span><br><span class="line">		signal(mutex)</span><br><span class="line">        <span class="comment">// è¿›è¡Œè¿›é¤æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">        signal(chopstick[i]);</span><br><span class="line">        signal(chopstick[(i + <span class="number">1</span>) % <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿›è¡Œæ€è€ƒæ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>å‡å®šç³»ç»Ÿæœ‰3ä¸ªå¹¶å‘è¿›ç¨‹get ã€copy å’Œputå…±äº«ç¼“å†²å™¨B1å’ŒB2ã€‚è¿›ç¨‹getè´Ÿè´£ä»è¾“å…¥è®¾å¤‡ä¸Šè¯»ä¿¡æ¯ï¼Œæ¯è¯»å‡ºä¸€æ¡è®°å½•åæ”¾åˆ°B1ä¸­ã€‚è¿›ç¨‹copyä»ç¼“å†²å™¨B1ä¸­å–å‡ºä¸€æ¡è®°å½•æ‹·è´åå­˜å…¥B2ã€‚è¿›ç¨‹putå–å‡ºB2ä¸­çš„è®°å½•æ‰“å°è¾“å‡ºã€‚B1å’ŒB2æ¯æ¬¡åªèƒ½å­˜æ”¾ä¸€æ¡è®°å½•ã€‚è¦æ±‚3ä¸ªè¿›ç¨‹åè°ƒå®Œæˆä»»åŠ¡ï¼Œä½¿æ‰“å°å‡ºæ¥çš„ä¸è¯»å…¥çš„è®°å½•ä¸ªæ•°ã€æ¬¡åºå®Œå…¨ä¸€æ ·ã€‚è¯·ç”¨è®°å½•å‹ä¿¡å·é‡å†™å‡ºå¹¶å‘ç¨‹åºã€‚</p>
<p>è®¾ç½®4ä¸ªä¿¡å·é‡ï¼Œå…¶ä¸­empty1å¯¹åº”ç©ºé—²çš„ç¼“å†²åŒº1ï¼Œå…¶åˆå€¼ä¸º1ï¼›full1å¯¹åº”ç¼“å†²åŒº1ä¸­çš„è®°å½•ï¼Œå…¶åˆå€¼ä¸º0ï¼› empty2å¯¹åº”ç©ºé—²çš„ç¼“å†²åŒº2ï¼Œå…¶åˆå€¼ä¸º1ï¼›full2å¯¹åº”ç¼“å†²åŒº2ä¸­çš„è®°å½•ï¼Œå…¶åˆå€¼ä¸º0ã€‚ç›¸åº”è¿›ç¨‹æè¿°ä¸ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">get( )&#123;				</span><br><span class="line">	<span class="keyword">while</span>(ture)&#123;</span><br><span class="line">		ä»è¾“å…¥è®¾å¤‡è¯»å…¥ä¸€æ¡è®°å½•;</span><br><span class="line">		P(empty1);</span><br><span class="line">		å°†è®°å½•å­˜å…¥ç¼“å†²åŒº<span class="number">1</span>ï¼›</span><br><span class="line">		V(full1);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">copy( )&#123;				</span><br><span class="line">	<span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">		P(full1);</span><br><span class="line">		ä»ç¼“å†²åŒº<span class="number">1</span>ä¸­å–å‡ºä¸€æ¡è®°å½•;</span><br><span class="line">		V(empty1);</span><br><span class="line">		P(empty2);</span><br><span class="line">		å°†å–å‡ºçš„è®°å½•å­˜å…¥ç¼“å†²åŒº<span class="number">2</span> ï¼›</span><br><span class="line">		V(full2);</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">put( )&#123;				</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		 P(full2);</span><br><span class="line">		ä»ç¼“å†²åŒº<span class="number">2</span>ä¸­å–å‡ºä¸€æ¡è®°å½•;</span><br><span class="line">		 V(empty2);</span><br><span class="line">		å°†å–å‡ºçš„è®°å½•æ‰“å°å‡ºæ¥ï¼›</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Main( )&#123;</span><br><span class="line">     parbegin(get,copy,put);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>è¿™æ˜¯ä¸€ä¸ªä»é”®ç›˜è¾“å…¥åˆ°æ‰“å°æœºè¾“å‡ºçš„æ•°æ®å¤„ç†æµå›¾,å…¶ä¸­é”®ç›˜è¾“å…¥è¿›ç¨‹é€šè¿‡ç¼“å†²åŒºbuf1 æŠŠè¾“å…¥æ•°æ®ä¼ é€ç»™è®¡ç®—è¿›ç¨‹,è®¡ç®—è¿›ç¨‹æŠŠå¤„ç†ç»“æœé€šè¿‡ç¼“å†²buf2 ä¼ é€ç»™æ‰“å°è¿›ç¨‹ã€‚buf1 å’Œbuf2 ä¸ºä¸´ç•Œèµ„æº,è¯•å†™å‡ºé”®ç›˜è¾“å…¥è¿›ç¨‹,è®¡ç®—è¿›ç¨‹åŠæ‰“å°è¿›ç¨‹é—´çš„åŒæ­¥ç®—æ³•ã€‚(10åˆ†)</p>
<p>è¾“å…¥è¿›ç¨‹â†’ buf1 â†’è®¡ç®—è¿›ç¨‹â†’ buf2 â†’æ‰“å°è¿›ç¨‹</p>
<p>è§£ç­”:ä»é”®ç›˜è¾“å…¥åˆ°æ‰“å°æœºè¾“å‡ºçš„æ•°æ®ä¼ é€è¿‡ç¨‹,å¯ä»¥çœ‹ä½œæ˜¯ç”±é”®ç›˜è¾“å…¥è¿›ç¨‹åˆ°è®¡ç®—è¿›ç¨‹,ä»¥åŠç”±è®¡ç®—è¿›ç¨‹åˆ°æ‰“å°è¾“å‡ºè¿›ç¨‹è¿™ä¸¤ä¸ªæ•°æ®ä¼ é€è¿›ç¨‹æ‰€ç»„æˆã€‚å…¶ä¸­,å¯¹é”®ç›˜è¾“å…¥è¿›ç¨‹è€Œè¨€,è®¡ç®—è¿›ç¨‹æ˜¯æ¶ˆè´¹è€…è¿›ç¨‹;è€Œå¯¹æ‰“å°è¾“å‡ºè¿›ç¨‹è€Œè¨€,è®¡ç®—è¿›ç¨‹åˆæ˜¯ç”Ÿäº§è€…è¿›ç¨‹ã€‚æ®æ­¤å¯å°†å®ƒä»¬ä¹‹é—´çš„åŒæ­¥é—®é¢˜æè¿°å¦‚ä¸‹:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">var:mutex1,mutex2,empty1,empty2,full1,full2:=<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">IP:begin</span><br><span class="line">repeat</span><br><span class="line"><span class="title function_">P</span><span class="params">(empty1)</span>;</span><br><span class="line">P(mutex1);</span><br><span class="line">input a charcter from keyboard;</span><br><span class="line">Add to buffer;</span><br><span class="line">V(mutex1);</span><br><span class="line">V(full1);</span><br><span class="line">until <span class="literal">false</span></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">CP:begin</span><br><span class="line">repeat</span><br><span class="line"><span class="title function_">P</span><span class="params">(full1)</span>;</span><br><span class="line">P(mutex1);</span><br><span class="line">Take a charactor form buffer1;</span><br><span class="line">Add to ch1;</span><br><span class="line">V(mutex1);</span><br><span class="line">V(empty1);</span><br><span class="line">P(empty2);</span><br><span class="line">P(mutex2);</span><br><span class="line">Take a charactor form ch1;</span><br><span class="line">Add to buffer2;</span><br><span class="line">V(mutex2);</span><br><span class="line">V(full2);</span><br><span class="line">until <span class="literal">false</span></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">OP:begin</span><br><span class="line">repeat</span><br><span class="line"><span class="title function_">p</span><span class="params">(full2)</span>;</span><br><span class="line">P(mutex2);</span><br><span class="line">Take a charactor from buffer2;</span><br><span class="line">Add to printer controler;</span><br><span class="line">start printer;</span><br><span class="line">V(mutex2);</span><br><span class="line">V(empty2);</span><br><span class="line">until <span class="literal">false</span></span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<hr>
<p>ä¸€å°è®¡ç®—æœºæœ‰10å°ç£å¸¦æœºè¢«nä¸ªè¿›ç¨‹ç«äº‰ï¼Œæ¯ä¸ªè¿›ç¨‹æœ€å¤šéœ€è¦3å°ç£å¸¦æœºï¼Œé‚£ä¹ˆnæœ€å¤šä¸º(4)æ—¶ï¼Œç³»ç»Ÿæ²¡æœ‰æ­»é”çš„å±é™©ï¼Ÿ</p>
<p>è¡¥å……ï¼šå…³äºæ­»é”çš„å…¬å¼ï¼šå½“ä¸€ä¸ªç³»ç»Ÿæœ‰Nä¸ªå¹¶å‘è¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦Mä¸ªåŒç±»èµ„æºï¼Œé‚£ä¹ˆæœ€å°‘éœ€è¦å¤šå°‘èµ„æºæ‰èƒ½é¿å…æ­»é”çš„å‡ºç°ï¼Ÿ  ï¼ˆM-1ï¼‰*N+1    æ³¨ï¼šæ¯ä¸ªè¿›ç¨‹åˆ†é…M-1ä¸ªèµ„æºï¼Œç„¶åå†åŠ ä¸Šä¸€ä¸ªèµ„æºï¼Œè¯¥èµ„æºæ— è®ºç»™å“ªä¸ªè¿›ç¨‹éƒ½å¯ä»¥ä¿è¯å½“å‰ç³»ç»Ÿä¸ä¼šå‡ºç°æ­»é”ã€‚</p>
<hr>
<p>åœ¨é“¶è¡Œå®¶ç®—æ³•ä¸­ï¼Œè‹¥å‡ºç°ä¸‹è¿°çš„èµ„æºåˆ†é…æƒ…å†µï¼š</p>
<table>
<thead>
<tr>
<th>Process</th>
<th>Max</th>
<th>Allocation</th>
<th>Available</th>
</tr>
</thead>
<tbody><tr>
<td>P0</td>
<td>0 0 4 4</td>
<td>0 0 3 2</td>
<td>1 6 2 2</td>
</tr>
<tr>
<td>P1</td>
<td>2 7 5 0</td>
<td>1 0 0 0</td>
<td></td>
</tr>
<tr>
<td>P2</td>
<td>3 6 10 10</td>
<td>1 3 5 4</td>
<td></td>
</tr>
<tr>
<td>P3</td>
<td>0 9 8 4</td>
<td>0 3 3 2</td>
<td></td>
</tr>
<tr>
<td>P4</td>
<td>0 6 6 10</td>
<td>0 0 1 4</td>
<td></td>
</tr>
</tbody></table>
<p>1ï¼‰è¯¥çŠ¶æ€æ˜¯å¦å®‰å…¨ï¼Ÿ</p>
<p>2ï¼‰è‹¥è¿›ç¨‹P2æå‡ºè¯·æ±‚Requestï¼ˆ1ï¼Œ2ï¼Œ2ï¼Œ2ï¼‰åï¼Œç³»ç»Ÿèƒ½å¦å°†èµ„æºåˆ†é…ç»™å®ƒï¼Ÿ</p>
<p>3ï¼‰å¦‚æœç³»ç»Ÿç«‹å³æ»¡è¶³P2çš„ä¸Šè¿°è¯·æ±‚ï¼Œç³»ç»Ÿæ˜¯å¦ç«‹å³è¿›å…¥æ­»é”çŠ¶æ€ï¼Ÿ</p>
<p>è§£ï¼š</p>
<p>1ï¼‰åˆ©ç”¨å®‰å…¨æ€§ç®—æ³•å¯¹ä¸Šé¢çš„çŠ¶æ€è¿›è¡Œåˆ†æï¼ˆå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼‰ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå®‰å…¨åºåˆ—{P0ï¼ŒP3ï¼ŒP4ï¼ŒP1ï¼ŒP2}æˆ–{P0ï¼ŒP3ï¼ŒP1ï¼ŒP4ï¼Œ P2}ï¼Œæ•…ç³»ç»Ÿæ˜¯å®‰å…¨çš„ã€‚</p>
<p>2ï¼‰P2å‘å‡ºè¯·æ±‚å‘é‡Requestï¼ˆ1ï¼Œ2ï¼Œ2ï¼Œ2ï¼‰åï¼Œç³»ç»ŸæŒ‰ç…§é“¶è¡Œå®¶ç®—æ³•è¿›è¡Œæ£€æŸ¥ï¼šRequest2ï¼ˆ1ï¼Œ2ï¼Œ2ï¼Œ2ï¼‰â‰¤Need2ï¼ˆ2ï¼Œ3ï¼Œ5ï¼Œ6ï¼‰ï¼›	Request2ï¼ˆ1ï¼Œ2ï¼Œ2ï¼Œ2ï¼‰â‰¤Availableï¼ˆ1ï¼Œ6ï¼Œ2ï¼Œ2ï¼‰ï¼›ç³»ç»Ÿå…ˆå‡å®šå¯ä¸ºP2åˆ†é…èµ„æºï¼Œå¹¶ä¿®æ”¹Availableï¼ŒAllocation2å’ŒNeed2å‘é‡ï¼šAvailabe&#x3D;ï¼ˆ0ï¼Œ4ï¼Œ0ï¼Œ0ï¼‰Allocation2&#x3D;ï¼ˆ2ï¼Œ5ï¼Œ7ï¼Œ6ï¼‰Need2&#x3D;(1,1,3,4) ï¼Œè¿›è¡Œå®‰å…¨æ€§æ£€æŸ¥ï¼šæ­¤æ—¶å¯¹æ‰€æœ‰è¿›ç¨‹ï¼Œæ¡ä»¶Neediâ‰¦ Availableï¼ˆ0ï¼Œ4ï¼Œ0ï¼Œ0ï¼‰éƒ½ä¸æˆç«‹ï¼Œå³Availableä¸èƒ½æ»¡è¶³ä»»ä½•è¿›ç¨‹çš„è¯·æ±‚ï¼Œæ•…ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ã€‚å› æ­¤ï¼Œå½“è¿›ç¨‹P2æå‡ºè¯·æ±‚Requestï¼ˆ1ï¼Œ2ï¼Œ2ï¼Œ2ï¼‰åï¼Œç³»ç»Ÿä¸èƒ½å°†èµ„æºåˆ†é…ç»™å®ƒã€‚</p>
<p>3ï¼‰ç³»ç»Ÿç«‹å³æ»¡è¶³è¿›ç¨‹P2çš„è¯·æ±‚ï¼ˆ1ï¼Œ2ï¼Œ2ï¼Œ2ï¼‰åï¼Œå¹¶æ²¡æœ‰é©¬ä¸Šè¿›å…¥æ­»é”çŠ¶æ€ã€‚å› ä¸ºï¼Œæ­¤æ—¶ä¸Šè¿°è¿›ç¨‹å¹¶æ²¡æœ‰ç”³è¯·æ–°çš„èµ„æºï¼Œå¹¶æœªå› å¾—ä¸åˆ°èµ„æºè€Œè¿›å…¥é˜»å¡çŠ¶æ€ã€‚åªæœ‰å½“ä¸Šè¿°è¿›ç¨‹æå‡ºæ–°çš„è¯·æ±‚ï¼Œå¹¶å¯¼è‡´æ‰€æœ‰æ²¡æ‰§è¡Œå®Œçš„å¤šä¸ªè¿›ç¨‹å› å¾—ä¸åˆ°èµ„æºè€Œé˜»å¡æ—¶ï¼Œç³»ç»Ÿæ‰è¿›å…¥æ­»é”çŠ¶æ€ã€‚	</p>
<hr>
<p>å·²çŸ¥æŸåˆ†é¡µç³»ç»Ÿï¼Œç”¨æˆ·ç©ºé—´æœ‰64ä¸ªé¡µé¢ï¼Œä¸»å­˜å®¹é‡ä¸º32KBï¼Œé¡µé¢å¤§å°ä¸º1KBï¼Œå¯¹ä¸€ä¸ª4é¡µå¤§çš„ä½œä¸šï¼Œå…¶0ã€1ã€2ã€3é¡µåˆ†åˆ«è¢«åˆ†é…åˆ°ä¸»å­˜çš„2ã€4ã€6ã€7å—ä¸­ã€‚</p>
<p>ï¼ˆ1ï¼‰å°†åè¿›åˆ¶çš„é€»è¾‘åœ°å€1023ã€2500ã€3500ã€4500è½¬æ¢æˆç‰©ç†åœ°å€ï¼Ÿ</p>
<p>ï¼ˆ2ï¼‰ä»¥åè¿›åˆ¶çš„é€»è¾‘åœ°å€1023ä¸ºä¾‹ç”»å‡ºåœ°å€å˜æ¢è¿‡ç¨‹å›¾ï¼Ÿ</p>
<p>é€»è¾‘åœ°å€ä½æ•°      64*1K&#x3D;2^16 	16ä½</p>
<p>ç‰©ç†åœ°å€ä½æ•°     32K&#x3D;2^15          15ä½</p>
<p>æ¯ä¸ªå—å¤§å°ï¼š1KB</p>
<p>â‘ é€»è¾‘åœ°å€1023ï¼š1023&#x2F;1Kï¼Œå¾—é¡µå·ä¸º0ï¼Œé¡µå†…åœ°å€ä¸º1023ï¼ŒæŸ¥é¡µè¡¨æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å—å·ä¸º2ï¼Œæ•…ç‰©ç†åœ°å€ä¸º2Ã—1K+1023&#x3D;3071</p>
<p>â‘¡é€»è¾‘åœ°å€2500ï¼š2500&#x2F;1Kï¼Œå¾—é¡µå·ä¸º2ï¼Œé¡µå†…åœ°å€ä¸º452ï¼ŒæŸ¥é¡µè¡¨æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å—å·ä¸º6ï¼Œæ•…ç‰©ç†åœ°å€ä¸º6Ã—1K+452&#x3D;6596</p>
<p>â‘¢é€»è¾‘åœ°å€3500ï¼š3500&#x2F;1Kï¼Œå¾—é¡µå·ä¸º3ï¼Œé¡µå†…åœ°å€ä¸º428ï¼ŒæŸ¥é¡µè¡¨æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å—å·ä¸º7ï¼Œæ•…ç‰©ç†åœ°å€ä¸º7Ã—1K+428&#x3D;7596</p>
<p>â‘£é€»è¾‘åœ°å€4500ï¼š4500&#x2F;1Kï¼Œå¾—é¡µå·ä¸º4ï¼Œé¡µå†…åœ°å€ä¸º404ï¼Œå› é¡µå·å¤§äºé¡µè¡¨é•¿åº¦ï¼Œæ•…äº§ç”Ÿè¶Šç•Œä¸­æ–­ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-17_21-39-26.png"></p>
<hr>
<p>å¯¹è®¿é—®ä¸²ï¼š1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ1ï¼Œ2ï¼Œ5ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼ŒæŒ‡å‡ºåœ¨é©»ç•™é›†å¤§å°åˆ†åˆ«ä¸º3ï¼Œ4æ—¶ï¼Œä½¿ç”¨FIFOå’ŒLRUæ›¿æ¢ç®—æ³•çš„ç¼ºé¡µæ¬¡æ•°ã€‚ç»“æœè¯´æ˜äº†ä»€ä¹ˆï¼Ÿ</p>
<p>é¦–å…ˆé‡‡ç”¨FIFOï¼Œå½“m&#x3D;3æ—¶ï¼Œç¼ºé¡µæ¬¡æ•°ï¼9ï¼Œå½“m&#x3D;4æ—¶ï¼Œç¼ºé¡µæ¬¡æ•°ï¼10ã€‚é‡‡ç”¨LRUç®—æ³•ï¼Œå½“m&#x3D;3æ—¶ï¼Œç¼ºé¡µæ¬¡æ•°ï¼10ï¼›å½“m&#x3D;4æ—¶ï¼Œç¼ºé¡µæ¬¡æ•°ï¼8ã€‚ç»“æœè¯´æ˜ï¼šFIFOæœ‰Beladyå¥‡å¼‚ç°è±¡ï¼Œå³ä¸æ»¡è¶³é©»ç•™é›†å¢å¤§ï¼Œç¼ºé¡µæ¬¡æ•°ä¸€å®šå‡å°çš„è§„å¾‹ï¼›å¦å¤–åœ¨m&#x3D;3æ—¶ï¼ŒLRUçš„ç¼ºé¡µæ¬¡æ•°æ¯”FIFOè¦å¤šï¼Œæ‰€ä»¥LRUç®—æ³•å¹¶ä¸æ€»ä¼˜äºFIFOï¼Œè¿˜è¦çœ‹å½“å‰è®¿é—®ä¸²çš„ç‰¹ç‚¹ã€‚</p>
<hr>
<p>ä¸€å°è®¡ç®—æœºæœ‰å››ä¸ªé¡µæ¡†ï¼Œè£…å…¥æ—¶é—´ã€ä¸Šæ¬¡å¼•ç”¨æ—¶é—´ã€å®ƒä»¬çš„Rï¼ˆè¯»ï¼‰ä¸Mï¼ˆä¿®æ”¹ï¼‰ä½å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼ˆæ—¶é—´å•ä½ï¼šå˜€å—’ï¼‰ï¼Œè¯·é—®NRUã€FIFOã€LRUç®—æ³•å°†æ›¿æ¢å“ªä¸€é¡µï¼Ÿ</p>
<table>
<thead>
<tr>
<th>é¡µ</th>
<th>è£…å…¥æ—¶é—´</th>
<th>ä¸Šæ¬¡å¼•ç”¨æ—¶é—´</th>
<th>R</th>
<th>M</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>126</td>
<td>279</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>230</td>
<td>260</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>120</td>
<td>272</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>160</td>
<td>280</td>
<td>1</td>
<td>1</td>
</tr>
</tbody></table>
<p>FIFOç®—æ³•åœ¨éœ€è¦æ·˜æ±°æŸä¸€é¡µæ—¶ï¼Œæ·˜æ±°æœ€å…ˆè¿›å…¥å†…å­˜çš„é¡µã€‚åœ¨é¢˜è¿°æ¡ä»¶ä¸‹ï¼Œç¬¬2é¡µæ˜¯æœ€å…ˆè¿›å…¥å†…å­˜çš„é¡µã€‚æ•…FIFOç®—æ³•å°†æ·˜æ±°ç¬¬2é¡µã€‚</p>
<p>LRUç®—æ³•åœ¨éœ€è¦æ·˜æ±°æŸä¸€é¡µæ—¶ï¼Œæ·˜æ±°æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ã€‚åœ¨é¢˜è¿°æ¡ä»¶ä¸‹ï¼Œç¬¬1é¡µæ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ã€‚æ•…LRUç®—æ³•å°†æ·˜æ±°ç¬¬1é¡µã€‚</p>
<p>NRUç®—æ³•åœ¨éœ€è¦æ·˜æ±°æŸä¸€é¡µæ—¶ï¼Œä»é‚£äº›æœ€è¿‘ä¸€ä¸ªæ—¶æœŸå†…æœªè¢«è®¿é—®çš„é¡µä¸­ä»»é€‰ä¸€é¡µæ·˜æ±°ã€‚åœ¨é¢˜è¿°æ¡ä»¶ä¸‹ï¼Œåªæœ‰ç¬¬0é¡µæ˜¯æœ€è¿‘ä¸€ä¸ªæ—¶æœŸå†…æœªè¢«è®¿é—®çš„é¡µã€‚æ•…NRUç®—æ³•å°†æ·˜æ±°ç¬¬0é¡µã€‚</p>
<hr>
<p>ä¸€ä¸ªç£ç›˜ç³»ç»Ÿï¼Œå¹³å‡å¯»é“æ—¶é—´ä¸º12msï¼Œè½¬é€Ÿä¸º10000è½¬&#x2F;åˆ†ï¼Œæ¯ä¸ªç£é“æœ‰18ä¸ªæ‰‡åŒºï¼Œæ¯ä¸ªæ‰‡åŒº512ä¸ªå­—èŠ‚ã€‚è¯·é—®è¦è¯»å–ä¸€ä¸ªæ‰‡åŒºæ‰€èŠ±çš„æ—¶é—´æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>TS &#x3D; 12ms</p>
<p>TR &#x3D; 1&#x2F;2r &#x3D; 60Ã·10000Ã—0.5 &#x3D; 3ms ï¼ˆå› ä¸ºä¸çŸ¥é“æ‰‡åŒºå…·ä½“åœ¨å“ªæŒ‰åŠåœˆç®—ï¼‰</p>
<p>TA&#x3D;b&#x2F;rN &#x3D; 512Ã·[(10000&#x2F;60) Ã—(18Ã—512)]&#x3D; 0.33ms </p>
<p>TT &#x3D; TS + TR + TA &#x3D;12 + 3 + 0.33 &#x3D; 15.33ms</p>
<p>ç­”ï¼šè¯»å–ä¸€ä¸ªæ‰‡åŒºæ‰€èŠ±çš„æ—¶é—´æ˜¯15.33msã€‚</p>
<hr>
<p>å‡å®šç›˜å—çš„å¤§å°ä¸º1KB,ç¡¬ç›˜çš„å¤§å°ä¸º500MB,é‡‡ç”¨æ˜¾ç¤ºé“¾æ¥åˆ†é…æ–¹å¼æ—¶,å…¶FATéœ€å ç”¨å¤šå°‘å­˜å‚¨ç©ºé—´ï¼ˆFATè¡¨é¡¹å 2.5ä¸ªå­—èŠ‚ï¼‰?å¦‚æœæ–‡ä»¶Aå ç”¨ç¡¬ç›˜çš„11, 12 , 16, 14å››ä¸ªç›˜å—,è¯•ç”»å‡ºæ–‡ä»¶Aä¸­å„ç›˜å—åœ¨FATè¡¨ä¸­çš„é“¾æ¥æƒ…å†µ.</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-18_09-00-27.png"></p>
<hr>
<p>å­˜æ”¾åœ¨æŸä¸ªç£ç›˜ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯¹äºé‡‡ç”¨æ··åˆç´¢å¼•åˆ†é…æ–¹å¼ï¼Œå…¶ FCB ä¸­å…±æœ‰ 13 é¡¹åœ°å€é¡¹ï¼Œç¬¬ 0ï½9 ä¸ªåœ°å€é¡¹ä¸ºç›´æ¥åœ°å€ï¼Œç¬¬ 10 ä¸ªåœ°å€é¡¹ä¸ºä¸€æ¬¡é—´æ¥åœ°å€ï¼Œç¬¬ 11 ä¸ªåœ°å€é¡¹ä¸ºäºŒæ¬¡ é—´æ¥åœ°å€ï¼Œç¬¬ 12 ä¸ªåœ°å€é¡¹ä¸ºä¸‰æ¬¡é—´æ¥åœ°å€ã€‚å¦‚æœæ¯ä¸ªç›˜å—çš„å¤§å°ä¸º 512 å­—èŠ‚ï¼Œç›˜å—å·éœ€è¦ 3 ä¸ªå­—èŠ‚æ¥æè¿°ï¼Œåˆ™æ¯ä¸ªç›˜å—æœ€å¤šå­˜æ”¾ 170 ä¸ªç›˜å—åœ°å€ã€‚<br>(1) è¯¥æ–‡ä»¶ç³»ç»Ÿå…è®¸çš„æœ€å¤§é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿ<br>(2) å°†æ–‡ä»¶çš„å­—èŠ‚åç§»é‡ 5000ã€15000ã€150000 è½¬æ¢ä¸ºç‰©ç†å—å·å’Œå—å†…åç§»é‡ã€‚<br>(3) å‡è®¾æŸæ–‡ä»¶çš„ç´¢å¼•ç»“ç‚¹å·²åœ¨å†…å­˜ä¸­ï¼Œä½†å…¶ä»–ä¿¡æ¯å‡åœ¨å¤–å­˜ï¼Œä¸ºäº†è®¿é—®è¯¥æ–‡ä»¶ä¸­æŸä¸ªä½ç½®çš„å†…å®¹ï¼Œæœ€å¤šéœ€è¦å‡ æ¬¡è®¿ é—®ç£ç›˜ï¼Ÿ</p>
<p>(1) è¯¥æ–‡ä»¶ç³»ç»Ÿä¸­ä¸€ä¸ªæ–‡ä»¶çš„æœ€å¤§é•¿åº¦å¯è¾¾:</p>
<p>10+170+170Ã—170+170Ã—170Ã—170&#x3D;4942080 å—ï¼Œå…± 4942080Ã—512 å­—èŠ‚ &#x3D; 2471040KB</p>
<p>(2) 5000&#x2F;512 å¾—åˆ°å•†ä¸º 9, ä½™æ•°ä¸º 392, å³å­—èŠ‚åç§»é‡ 5000 å¯¹åº”çš„é€»è¾‘å—å·ä¸º 9, å—å†…åç§»é‡ä¸º 392ã€‚ç”±äº 9&lt;10, æ•…å¯ç›´æ¥ä»è¯¥æ–‡ä»¶çš„ FCB çš„ç¬¬ 9 ä¸ªåœ°å€é¡¹å¤„å¾—åˆ°ç‰©ç†ç›˜å—å·ï¼Œå—å†…åç§»é‡ä¸º 392ã€‚</p>
<p>15000&#x2F;512 å¾—åˆ°å•†ä¸º 29, ä½™æ•°ä¸º 152, å³å­—èŠ‚åç§»é‡ 15000 å¯¹åº”çš„é€»è¾‘å—å·ä¸º 29, å—å†…åç§»é‡ä¸º 152ã€‚ç”±äº 10&lt;29&lt; 10+170, è€Œ 29-10&#x3D;19, æ•…å¯ä» FCB çš„ç¬¬ 10 ä¸ªåœ°å€é¡¹ï¼Œå³ä¸€æ¬¡é—´å€é¡¹ä¸­å¾—åˆ°ä¸€æ¬¡é—´å€å—çš„åœ°å€ï¼›å¹¶ä»ä¸€æ¬¡é—´å€å—çš„ç¬¬ 19 é¡¹ (å³è¯¥å—çš„ç¬¬ 57~59 è¿™ 3 ä¸ªå­—èŠ‚) ä¸­è·å¾—å¯¹åº”çš„ç‰©ç†ç›˜å—å·ï¼Œå—å†…åç§»é‡ä¸º 152ã€‚</p>
<p>150000&#x2F;512å¾—å•†ä¸º292ï¼Œä½™æ•°ä¸º496ã€‚å³é€»è¾‘å—å·ä¸º292ï¼Œå—å†…åç§»ä¸º496ã€‚ç”±äº10+170â‰¤292ï¼Œæ•…å¯ä»FCBçš„ç¬¬11ä¸ªåœ°å€é¡¹ï¼Œå³äºŒæ¬¡é—´å€é¡¹ä¸­è·å¾—<strong>ç¬¬1ä¸ª</strong>ä¸€æ¬¡é—´å€å—ï¼›å¹¶ä»è¯¥ä¸€æ¬¡é—´å€å—çš„112é¡¹ä¸­è·å¾—å¯¹åº”çš„ç‰©ç†ç›˜å—å·ï¼Œå—å†…åç§»ä¸º496ã€‚<em>ï¼ˆ150000&#x2F;512 å¾—åˆ°å•†ä¸º 292, ä½™æ•°ä¸º 496, å³å­—èŠ‚åç§»é‡ 150000 å¯¹åº”çš„é€»è¾‘å—å·ä¸º 292, å—å†…åç§»é‡ä¸º 496ã€‚ç”±äº 10+170&lt;292&lt; 10+170+170Ã—170, è€Œ 292-(10+170)&#x3D;112,112&#x2F;170 å¾—åˆ°å•†ä¸º 0, ä½™æ•°ä¸º 112, æ•…å¯ä» FCB çš„ç¬¬ 11 ä¸ªåœ°å€é¡¹ï¼Œå³äºŒæ¬¡é—´å€é¡¹ä¸­å¾—åˆ°äºŒæ¬¡é—´å€å—çš„åœ°å€ï¼Œå¹¶ä»äºŒæ¬¡é—´å€å—çš„ç¬¬ 0 é¡¹ä¸­è·å¾—ä¸€ä¸ªä¸€æ¬¡é—´å€å—çš„åœ°å€ï¼Œå†ä»è¿™ä¸€æ¬¡é—´å€å—çš„ç¬¬ 112 é¡¹ä¸­è·å¾—å¯¹åº”çš„ç‰©ç†ç›˜å—å·ï¼Œå—å†…åç§»é‡ä¸º 496ã€‚ï¼‰</em></p>
<p>(3) ç”±äºæ–‡ä»¶çš„ FCB å·±åœ¨å†…å­˜ï¼Œä¸ºäº†è®¿é—®æ–‡ä»¶ä¸­æŸä¸ªä½ç½®çš„å†…å®¹ï¼Œæœ€å°‘éœ€è¦ 1 æ¬¡è®¿é—®ç£ç›˜ (å³å¯é€šè¿‡ç›´æ¥åœ°å€ç›´æ¥è¯»æ–‡ä»¶ç›˜å—)ï¼Œæœ€å¤šéœ€è¦ 4 æ¬¡è®¿é—®ç£ç›˜ (ç¬¬ä¸€æ¬¡æ˜¯è¯»ä¸‰æ¬¡é—´å€å—ï¼Œç¬¬äºŒæ¬¡æ˜¯è¯»äºŒæ¬¡é—´å€å—ï¼Œç¬¬ä¸‰æ¬¡æ˜¯è¯»ä¸€æ¬¡é—´å€å—ï¼Œç¬¬å››æ¬¡æ˜¯è¯»æ–‡ä»¶ç›˜å—)ã€‚</p>
<hr>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-18_09-23-50.png"></p>
<p>1ï¼‰åˆ†é…è¿‡ç¨‹çº¿å½¢æ£€ç´¢å¾—ï¼ši1&#x3D;2ï¼Œj1&#x3D;2ï¼› i2&#x3D;3ï¼Œj2&#x3D;6ã€‚è®¡ç®—ç©ºé—²ç›˜å—å·ï¼š b1&#x3D;i1Ã—16+j1+1&#x3D;2Ã—16+2+1&#x3D;35 </p>
<p>b2&#x3D;i2Ã—16+j2+1&#x3D;3Ã—16+6+1&#x3D;55ä¿®æ”¹ä½ç¤ºå›¾ï¼š</p>
<p> ä»¤map[2ï¼Œ2]&#x3D;map[3ï¼Œ6]&#x3D;1ï¼Œå¹¶å°†å¯¹åº”å—35ï¼Œ55åˆ†é…å‡ºå»ã€‚</p>
<p>2ï¼‰é‡Šæ”¾è¿‡ç¨‹è®¡ç®—å‡ºç¬¬300å—æ‰€å¯¹åº”çš„äºŒè¿›åˆ¶è¡Œå·iå’Œj</p>
<p>i&#x3D;ï¼ˆ300-1ï¼‰&#x2F;16&#x3D;18</p>
<p>j&#x3D; ï¼ˆ300-1ï¼‰% 16&#x3D;11</p>
<p>ä¿®æ”¹ä½ç¤ºå›¾ï¼š ä»¤map[18ï¼Œ11]&#x3D;0ã€‚</p>
<p>ï¼ˆæ³¨æ„è¡Œå·å’Œåˆ—å·ä¸æ˜¯ä»1å¼€å§‹ç¼–å·ï¼‰</p>
<hr>
<p>è®¾æ­£åœ¨å¤„ç†å™¨ä¸Šæ‰§è¡Œçš„ä¸€ä¸ªè¿›ç¨‹çš„é¡µè¡¨å¦‚ä¸‹è¡¨æ‰€ç¤º,è¡¨ä¸­çš„è™šé¡µå·å’Œç‰©ç†å—å·æ˜¯åè¿›åˆ¶æ•°,èµ·å§‹é¡µå·(å—å·)å‡ä¸º0ã€‚æ‰€æœ‰çš„åœ°å€å‡æ˜¯å­˜å‚¨å™¨å­—èŠ‚åœ°å€ã€‚é¡µçš„å¤§å°ä¸º1024å­—èŠ‚ã€‚(10åˆ†)</p>
<p> â‘  è¯¦è¿°åœ¨è®¾æœ‰å¿«è¡¨çš„è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†ç³»ç»Ÿä¸­,ä¸€ä¸ªè™šåœ°å€è½¬æ¢æˆç‰©ç†å†…å­˜åœ°å€çš„è¿‡ç¨‹ã€‚</p>
<p> â‘¡ ä¸‹åˆ—è™šåœ°å€å¯¹åº”äºä»€ä¹ˆç‰©ç†åœ°å€:5499,2221ã€‚</p>
<table>
<thead>
<tr>
<th>è™šé¡µå·</th>
<th>çŠ¶æ€ä½</th>
<th>è®¿é—®ä½</th>
<th>ä¿®æ”¹ä½</th>
<th>ç‰©ç†å—å·</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>4</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>7</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>-</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>-</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
</tbody></table>
<p>â‘ </p>
<ol>
<li>é¦–å…ˆï¼Œè™šåœ°å€è¢«åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé¡µå·å’Œé¡µå†…åç§»é‡ã€‚</li>
<li>ç³»ç»Ÿä¼šæ£€æŸ¥å¿«è¡¨ï¼ˆTLBï¼‰ï¼Œçœ‹çœ‹è™šæ‹Ÿé¡µå·æ˜¯å¦åœ¨å¿«è¡¨ä¸­ã€‚å¦‚æœåœ¨ï¼Œå¿«è¡¨ä¼šè¿”å›ç›¸åº”çš„ç‰©ç†é¡µæ¡†å·ã€‚</li>
<li>å¦‚æœè™šæ‹Ÿé¡µå·ä¸åœ¨å¿«è¡¨ä¸­ï¼Œç³»ç»Ÿä¼šæŸ¥è¯¢é¡µè¡¨ï¼Œæ‰¾åˆ°ç›¸åº”çš„ç‰©ç†é¡µæ¡†å·ã€‚å¦‚æœè¯¥è™šæ‹Ÿé¡µæ²¡æœ‰åˆ†é…ç‰©ç†é¡µæ¡†ï¼Œåˆ™ä¼šå‘ç”Ÿç¼ºé¡µä¸­æ–­ï¼Œç”±æ“ä½œç³»ç»Ÿè´Ÿè´£åˆ†é…ç‰©ç†é¡µæ¡†å¹¶æ›´æ–°é¡µè¡¨ã€‚</li>
<li>ä¸€æ—¦æ‰¾åˆ°ç‰©ç†é¡µæ¡†å·ï¼Œç³»ç»Ÿä¼šå°†å…¶ä¸è™šåœ°å€çš„é¡µå†…åç§»é‡ç»„åˆèµ·æ¥ï¼Œå½¢æˆç‰©ç†å†…å­˜åœ°å€ã€‚</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-18_11-05-45.png"></p>
<p>â‘¡</p>
<table>
<thead>
<tr>
<th>è™šåœ°å€ï¼ˆè™šé¡µå·ï¼Œé¡µå†…åœ°å€ï¼‰</th>
<th></th>
<th>ç‰©ç†åœ°å€ ï¼ˆç‰©ç†å—å·ï¼Œå—å†…åœ°å€ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>5499&#x3D;1024*5+379</td>
<td>ï¼ˆ5ï¼Œ379ï¼‰</td>
<td>ï¼ˆ0,379ï¼‰</td>
</tr>
<tr>
<td>2221&#x3D;1024*2+173</td>
<td>ï¼ˆ2,173ï¼‰</td>
<td>ï¼ˆä¸åœ¨å†…å­˜ï¼‰</td>
</tr>
</tbody></table>
<hr>
<p>è¯·æ±‚åˆ†é¡µç®¡ç†ç³»ç»Ÿä¸­,å‡è®¾æŸè¿›ç¨‹çš„é¡µè¡¨å†…å®¹å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚ </p>
<table>
<thead>
<tr>
<th>è¿›ç¨‹</th>
<th>é¡µæ¡†(Page Frame)å·</th>
<th>æœ‰æ•ˆä½(å­˜åœ¨ä½)</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>101H</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>254H</td>
<td>1</td>
</tr>
</tbody></table>
<p>é¡µé¢å¤§å°ä¸º4KB,ä¸€æ¬¡å†…å­˜çš„è®¿é—®æ—¶é—´æ˜¯100ns,ä¸€æ¬¡å¿«è¡¨(TLB)çš„è®¿é—®æ—¶é—´æ˜¯10ns,å¤„ç†ä¸€æ¬¡ç¼ºé¡µçš„å¹³å‡æ—¶é—´ä¸º108ns(å·²å«æ›´æ–°TLBå’Œé¡µè¡¨çš„æ—¶é—´),è¿›ç¨‹çš„é©»ç•™é›†å¤§å°å›ºå®šä¸º2,é‡‡ç”¨æœ€è¿‘æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•(LRU)å’Œå±€éƒ¨æ·˜æ±°ç­–ç•¥ã€‚å‡è®¾</p>
<p>â‘ TLBåˆå§‹ä¸ºç©º;</p>
<p>â‘¡åœ°å€è½¬æ¢æ—¶å…ˆè®¿é—®TLB,è‹¥TLBæœªå‘½ä¸­,å†è®¿é—®é¡µè¡¨</p>
<p>(å¿½ç•¥è®¿é—®é¡µè¡¨ä¹‹åçš„TLBæ›´æ–°æ—¶é—´);</p>
<p>â‘¢æœ‰æ•ˆä½ä¸º0è¡¨ç¤ºé¡µé¢ä¸åœ¨å†…å­˜,äº§ç”Ÿç¼ºé¡µä¸­æ–­,ç¼ºé¡µä¸­æ–­å¤„ç†å,è¿”å›åˆ°äº§ç”Ÿç¼ºé¡µä¸­æ–­çš„æŒ‡ä»¤å¤„é‡æ–°æ‰§è¡Œã€‚è®¾æœ‰è™šåœ°å€è®¿é—®åºåˆ—2362Hã€1565Hã€25A5H,è¯·é—®:</p>
<p>(1) ä¾æ¬¡è®¿é—®ä¸Šè¿°ä¸‰ä¸ªè™šåœ°å€,å„éœ€å¤šå°‘æ—¶é—´?</p>
<p>(2) åŸºäºä¸Šè¿°è®¿é—®åºåˆ—,è™šåœ°å€1565Hçš„ ç‰©ç†åœ°å€æ˜¯å¤šå°‘?è¯·è¯´æ˜ç†ç”±ã€‚</p>
<p>1)ç”±äºé¡µé¢å¤§å°ä¸º4KB&#x3D;212KBï¼Œæ•…é€»è¾‘åœ°å€æœ«å°¾12ä½è¡¨ç¤ºé¡µå†…åç§»Wï¼Œå‰4ä½è¡¨ç¤ºé¡µå·Pã€‚ </p>
<p>å¯¹äºé€»è¾‘åœ°å€2362Hï¼Œå…¶è¡¨ç¤ºçš„é¡µå·ä¸º2ï¼Œè®¿é—®æ¬¡åºä¾æ¬¡ä¸ºï¼šè®¿é—®TLBæœªå‘½ä¸­(10ns)ï¼› è®¿é—®é¡µè¡¨å‘½ä¸­2å·é¡µé¢ï¼Œå¹¶å°†é¡µè¡¨é¡¹å‰¯æœ¬æ”¾å…¥TLBï¼ˆ100nsï¼‰,å¾—åˆ°ç‰©ç†åœ°å€ï¼Œè®¿é—®å†…å­˜ï¼ˆ100nsï¼‰ã€‚</p>
<p>æ•…é€»è¾‘åœ°å€2362Hçš„è®¿é—®æ—¶é—´ä¸ºï¼šEAT&#x3D;10+100+100&#x3D;210ns;<br>å¯¹äºé€»è¾‘åœ°å€1565Hï¼Œå…¶è¡¨ç¤ºçš„é¡µå·ä¸º1ï¼Œè®¿é—®æ¬¡åºä¾æ¬¡ä¸ºï¼Œè®¿é—®TLBæœªå‘½ä¸­(10ns)ï¼›è®¿é—®é¡µè¡¨æœªå‘½ä¸­(100ns)ï¼›å‘ç”Ÿç¼ºé¡µä¸­æ–­(108ns)ï¼›è®¿é—®TLBå‘½ä¸­1å·é¡µé¢(10ns)ï¼›å¾—åˆ°ç‰©ç†åœ°å€è®¿é—®å†…å­˜(100ns)ã€‚æ­¤æ—¶é©»ç•™é›†å·²æ»¡(0å·é¡µé¢å’Œ2å·é¡µé¢)</p>
<p>æ•…é€»è¾‘åœ°å€1565Hçš„è®¿é—®æ—¶é—´ä¸ºï¼š<br>EAT&#x3D;108+2Ã—(100+10)&#x3D;328nsã€‚<br>å¯¹äºé€»è¾‘åœ°å€25A5Hï¼Œå…¶è¡¨ç¤ºçš„é¡µå·ä¸º2ï¼Œè®¿é—®æ¬¡åºä¾æ¬¡ä¸ºï¼šè®¿é—®TLBå‘½ä¸­äºŒå·é¡µé¢(10ns)ï¼›å¾—åˆ°ç‰©ç†åœ°å€è®¿é—®å†…å­˜(100ns)ã€‚</p>
<p>æ•…é€»è¾‘åœ°å€25A5Hçš„è®¿é—®æ—¶é—´ä¸º:EAT&#x3D;a+t&#x3D;10+100&#x3D;110ns;<br>2ï¼‰ è®¿é—®é€»è¾‘åœ°å€1565Hæ—¶ç”±äºé©»ç•™é›†å·²æ»¡(0å·é¡µé¢å’Œ2å·é¡µé¢)ã€‚æ•…åº”ä»é¡µè¡¨ä¸­æ·˜æ±°ä¸€ä¸ªé¡µé¢ï¼Œæ ¹æ®LRUç®—æ³•ï¼Œ2å·é¡µé¢åˆšè¢«ä½¿ç”¨è¿‡ï¼Œæ•…æ·˜æ±°0å·é¡µé¢ï¼Œå°†1å·é¡µé¢è°ƒå…¥è·å¾—å†…å­˜å—å·101Hã€‚åˆ™åœ°å€ç”±å†…å­˜å—å·å’Œé¡µå†…åç§»é‡æ‹¼æ¥å¾—åˆ°ç‰©ç†åœ°å€ä¸ºï¼š101565Hã€‚</p>
<hr>
<p>è®¾ç³»ç»Ÿæœ‰ä¸‰ç§ç±»å‹çš„èµ„æº,æ•°é‡ä¸º(4,2,2),ç³»ç»Ÿä¸­æœ‰è¿›ç¨‹A,B,CæŒ‰å¦‚ä¸‹é¡ºåºè¯·æ±‚èµ„æº:</p>
<p>è¿›ç¨‹Aç”³è¯·(3,2,1)</p>
<p>è¿›ç¨‹Bç”³è¯·(1,0,1)</p>
<p>è¿›ç¨‹Aç”³è¯·(0,1,0)</p>
<p>è¿›ç¨‹Cç”³è¯·(2,0,0)</p>
<p>è¯·ä½ ç»™å‡ºä¸€å’Œé˜²æ­¢æ­»é”çš„èµ„æºå‰¥å¤ºåˆ†é…ç­–ç•¥,å®Œæˆä¸Šè¿°è¯·æ±‚åºåˆ—,å¹¶åˆ—å‡ºèµ„æºåˆ†é…è¿‡ç¨‹,æŒ‡æ˜å“ªäº›è¿›ç¨‹éœ€è¦ç­‰å¾…,å“ªäº›èµ„æºè¢«å‰¥å¤ºã€‚(10åˆ†)</p>
<p>è§£:(10åˆ†)</p>
<p>â‘  åˆ†é…ç­–ç•¥ä¸º:å½“è¿›ç¨‹Piç”³è¯·riç±»èµ„æºæ—¶,æ£€æŸ¥riä¸­æœ‰æ— å¯åˆ†é…çš„èµ„æº:æœ‰åˆ™åˆ†é…ç»™Pi;å¦åˆ™å°†Piå æœ‰çš„èµ„æºå…¨éƒ¨é‡Šæ”¾è€Œè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚(Piç­‰å¾…åŸå æœ‰çš„æ‰€æœ‰èµ„æºå’Œæ–°ç”³è¯·çš„èµ„æº)</p>
<p>â‘¡ èµ„æºåˆ†é…è¿‡ç¨‹: å‰©ä½™èµ„æº</p>
<p>è¿›ç¨‹A:(3,2,1) (1,0,1)</p>
<p>è¿›ç¨‹B:(1,0,1) (0,0,0)</p>
<p>è¿›ç¨‹A:(0,1,0)(ä¸æ»¡è¶³) (3,2,1)</p>
<p>Açš„æ‰€æœ‰èµ„æºè¢«å‰¥å¤º,Aå¤„äºç­‰å¾…</p>
<p>è¿›ç¨‹C:(2,0,0) (1,2,1)</p>
<p>C,Bå®Œæˆä¹‹å,Aå¯å®Œæˆã€‚</p>
<hr>
<p>è®¾å…¬å…±æ±½è½¦ä¸Š,å¸æœºå’Œå”®ç¥¨å‘˜çš„æ´»åŠ¨åˆ†åˆ«æ˜¯:</p>
<p>å¸æœºçš„æ´»åŠ¨:å¯åŠ¨è½¦è¾†;æ­£å¸¸è¡Œè½¦;åˆ°ç«™åœè½¦ã€‚</p>
<p>å”®ç¥¨å‘˜çš„æ´»åŠ¨:å…³è½¦é—¨;å”®ç¥¨;å¼€è½¦é—¨ã€‚</p>
<p>åœ¨æ±½è½¦ä¸æ–­çš„åˆ°ç«™ã€åœç«™ã€è¡Œé©¶è¿‡ç¨‹ä¸­,è¯•ç”¨ä¿¡å·é‡å’ŒP,Væ“ä½œå®ç°å¸æœºå’Œå”®ç¥¨å‘˜çš„åŒæ­¥ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Semaphore run=<span class="number">0</span>; <span class="comment">//æ˜¯å¦å…è®¸å¸æœºå¯åŠ¨æ±½è½¦</span></span><br><span class="line">Semaphore stop=<span class="number">0</span>; <span class="comment">//æ˜¯å¦å…è®¸å”®ç¥¨å‘˜å¼€é—¨</span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    cobegin</span><br><span class="line">        <span class="title function_">driver</span><span class="params">()</span>;</span><br><span class="line">    	busman();</span><br><span class="line">    coend</span><br><span class="line">&#125;</span><br><span class="line">driver()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(TRUE)</span><br><span class="line">    &#123;</span><br><span class="line">        p(run);</span><br><span class="line">        å¯åŠ¨å…¬äº¤è½¦ï¼Œå¼€è½¦ï¼Œåˆ°ç«™åœè½¦ï¼›</span><br><span class="line">        V(stop);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">busman()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(TRUE)</span><br><span class="line">    &#123;	</span><br><span class="line">        å…³è½¦é—¨</span><br><span class="line">        V(run);</span><br><span class="line">        å”®ç¥¨ï¼›</span><br><span class="line">        P(stop);</span><br><span class="line">        å¼€è½¦é—¨ï¼Œä¸Šä¸‹ä¹˜å®¢</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>æŸè™šæ‹Ÿå­˜å‚¨å™¨çš„ç”¨æˆ·ç¼–ç¨‹ç©ºé—´å…± 32 ä¸ªé¡µé¢ï¼Œæ¯é¡µä¸º 1KB ï¼Œå†…å­˜ä¸º 16KB ã€‚å‡å®šæŸæ—¶åˆ»ä¸€ç”¨æˆ·è¿›ç¨‹çš„é¡µè¡¨ä¸­å·²è°ƒå…¥å†…å­˜çš„é¡µé¢çš„é¡µå·å’Œç‰©ç†å—å·çš„å¯¹ç…§è¡¨å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/6100690_1492922396105_072774B6B658B3603E1AA7198722775C.png"></p>
<p>ï¼ˆ 1 ï¼‰æ­¤æ—¶ï¼ŒæŒ‡ä»¤ä¸­é€»è¾‘åœ°å€è‡³å°‘éœ€è¦å¤šå°‘ä½ï¼Ÿ</p>
<p>ï¼ˆ2ï¼‰é€»è¾‘åœ°å€0A 5Cï¼ˆåå…­è¿›åˆ¶ï¼‰æ‰€å¯¹åº”çš„ç‰©ç†åœ°å€æ˜¯ä»€ä¹ˆï¼ˆç”¨åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼Ÿç»™å‡ºè®¡ç®—è¿‡ç¨‹ã€‚</p>
<p>é¡µå¼å­˜å‚¨ç®¡ç†çš„é€»è¾‘åœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé¡µå·å’Œé¡µå†…åœ°å€ã€‚ç”±å·²çŸ¥æ¡ä»¶â€œç”¨æˆ·ç¼–ç¨‹ç©ºé—´å…±32ä¸ªé¡µé¢â€ï¼Œå¯çŸ¥é¡µå·éƒ¨åˆ†å 5ä½ï¼›ç”±â€œæ¯é¡µä¸º1KBâ€ï¼Œ1K&#x3D;210ï¼Œå¯çŸ¥å†…é¡µåœ°å€å 10ä½ï¼Œåˆ™æŒ‡ä»¤ä¸­é€»è¾‘åœ°å€è‡³å°‘éœ€è¦15ä½ã€‚<br>é€»è¾‘åœ°å€0A5Cï¼ˆHï¼‰æ‰€å¯¹åº”çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼æ˜¯ï¼š000â€‚1010â€‚0101â€‚1100â€‚ï¼Œæ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œ10â€‚0101â€‚1100â€‚ä¸ºé¡µå†…åœ°å€ï¼Œç¼–ç â€‚â€œ000â€‚10â€â€‚ä¸ºé¡µå·ï¼Œè¡¨ç¤ºè¯¥é€»è¾‘åœ°å€å¯¹åº”çš„é¡µå·ä¸º2ã€‚æŸ¥é¡µè¡¨ï¼Œå¾—åˆ°ç‰©ç†å—å·æ˜¯4ï¼ˆåè¿›åˆ¶ï¼‰ï¼Œå³ç‰©ç†å—åœ°å€ä¸ºï¼š01â€‚00â€‚ï¼Œæ‹¼æ¥é¡µå†…åœ°å€10â€‚0101â€‚1100ï¼Œå¾—01â€‚0010â€‚0101â€‚1100ï¼Œå³125Cï¼ˆHï¼‰ã€‚</p>
<hr>
<p>è¿›ç¨‹A1ã€A2ã€â€¦Anlé€šè¿‡mä¸ªç¼“å†²åŒºå‘è¿›ç¨‹B1ã€B2ã€â€¦Bn2ä¸æ–­åœ°å‘é€æ¶ˆæ¯ã€‚å‘é€å’Œæ¥æ”¶å·¥ä½œéµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š</p>
<p>(1)æ¯ä¸ªå‘é€è¿›ç¨‹ä¸€æ¬¡å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œå†™å…¥ä¸€ä¸ªç¼“å†²åŒºï¼Œç¼“å†²åŒºå¤§å°ä¸æ¶ˆæ¯é•¿åº¦ä¸€æ ·ã€‚</p>
<p>(2)å¯¹äºæ¯ä¸€ä¸ªæ¶ˆæ¯ï¼ŒB1ã€B2ã€â€¦Bn2éƒ½éœ€å„æ¥æ”¶ä¸€æ¬¡ï¼Œè¯»å…¥è‡ªå·±çš„æ•°æ®åŒºå†…ã€‚</p>
<p>(3)mä¸ªç¼“å†²åŒºéƒ½æ»¡æ—¶ï¼Œå‘é€è¿›ç¨‹ç­‰å¾…ï¼›æ²¡æœ‰å¯è¯»çš„æ¶ˆæ¯æ—¶ï¼Œæ¥æ”¶è¿›ç¨‹ç­‰å¾…ã€‚ è¯•ç”¨waitã€signalæ“ä½œæè¿°å®ƒä»¬çš„åŒæ­¥å…³ç³»ã€‚</p>
<p>æ¯ä¸ªç¼“å†²åŒºåªè¦å†™ä¸€æ¬¡ä½†è¦è¯»n2æ¬¡ï¼Œå› æ­¤ï¼Œå¯ä»¥çœ‹æˆn2ç»„ç¼“å†²åŒºï¼Œæ¯ä¸ªå‘é€è€…è¦åŒæ—¶å†™n2ä¸ªç¼“å†²åŒºï¼Œè€Œæ¯ä¸ªæ¥æ”¶è€…åªè¦è¯»å®ƒè‡ªå·±çš„ç¼“å†²åŒºã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mutex=<span class="number">1</span>; <span class="comment">//å¤šè¿›ç¨‹äº’æ–¥ä½¿ç”¨ç¼“å†²åŒº</span></span><br><span class="line">empty[<span class="number">0</span>,<span class="number">1</span>,â€¦â€¦n2]=&#123;m,m,â€¦â€¦m&#125;;</span><br><span class="line">full[<span class="number">0</span>,<span class="number">1</span>,â€¦..n2]=&#123;<span class="number">0</span>,<span class="number">0</span>,â€¦â€¦<span class="number">0</span>&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)<span class="comment">//å†™è¿›ç¨‹</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i&lt; n2; i++)&#123;</span><br><span class="line">	P(empty[i]);</span><br><span class="line">	&#125;</span><br><span class="line">P(mutex);</span><br><span class="line">æ¶ˆæ¯æ”¾å…¥ç¼“å†²åŒºï¼›</span><br><span class="line">V(mutex);</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i&lt; n2; i++)&#123;</span><br><span class="line">	V(full[i]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)<span class="comment">//è¯»è¿›ç¨‹</span></span><br><span class="line">&#123;</span><br><span class="line">P(full[i]);</span><br><span class="line">P(mutex);</span><br><span class="line">è¯»å–ç¼“å†²åŒºï¼›</span><br><span class="line">V(mutex);</span><br><span class="line">V(empty[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>ä¸€ä¸ªè¿›ç¨‹çš„å¤§å°ä¸º5ä¸ªé¡µé¢,ä¸ºå®ƒåˆ†é…äº†4ä¸ªç‰©ç†å—ã€‚å½“å‰æ¯ä¸ªå—çš„æƒ…å†µå¦‚ä¸‹è¡¨æ‰€ç¤º(éƒ½ä¸ºåè¿›åˆ¶æ•°,ä¸”ä»0å¼€å§‹è®¡æ•°)ã€‚å½“è™šé¡µ4å‘ç”Ÿç¼ºé¡µæ—¶,ä½¿ç”¨ä¸‹åˆ—çš„é¡µé¢ç½®æ¢ç®—æ³•,å“ªä¸€ä¸ªç‰©ç†å—å°†è¢«æ¢å‡º?å¹¶è§£é‡ŠåŸå› ã€‚</p>
<table>
<thead>
<tr>
<th>é¡µå·</th>
<th>å—å·</th>
<th>åŠ è½½æ—¶é—´</th>
<th>è®¿é—®æ—¶é—´</th>
<th>è®¿é—®ä½R</th>
<th>ä¿®æ”¹ä½M</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>0</td>
<td>60</td>
<td>161</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>130</td>
<td>160</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>2</td>
<td>26</td>
<td>162</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>20</td>
<td>163</td>
<td>1</td>
<td>1</td>
</tr>
</tbody></table>
<p>(1) FIFOç®—æ³•;</p>
<p>(2) LRUç®—æ³•;</p>
<p>(3) CLOCKç®—æ³•;</p>
<p>(4) å½“é¡µé¢çš„è®¿é—®ä¸²ä¸º:â€œ4,0,0,0,2,4,2,1,0,3,2â€çš„OPTç®—æ³•ã€‚</p>
<p>è§£:(1) æ¢å‡ºç¬¬3å·è™šé¡µ,å› ä¸ºå®ƒåŠ è½½çš„æ—¶é—´æœ€æ—©;</p>
<p>(2) æ¢å‡ºç¬¬1å·è™šé¡µ,å› ä¸ºå®ƒæœ€è¿‘æœ€ä¹…æ²¡è¢«è®¿é—®;</p>
<p>(3) æ¢å‡ºç¬¬1å·è™šé¡µ,å› ä¸ºå®ƒæœ€è¿‘æ—¢æ²¡è¢«è®¿é—®,åˆæ²¡è¢«ä¿®æ”¹;</p>
<p>(4) æ¢å‡ºç¬¬3å·è™šé¡µ,å› ä¸ºå®ƒç¦»è®¿é—®ç‚¹æœ€è¿œã€‚</p>
<hr>
<p>è®¾æŸç¨‹åºå¤§å°ä¸º460å­—,å¹¶ä¸”å®ƒæœ‰ä¸‹é¢çš„å­˜å‚¨è®¿é—®åºåˆ—:</p>
<p>10,11,104,170,73,309,185,245,246,434,458,364</p>
<p>è®¾é¡µé¢å¤§å°æ˜¯100å­—,è¯·ç»™å‡ºè¯¥è®¿é—®åºåˆ—çš„é¡µé¢èµ°å‘.åˆè®¾è¯¥ç¨‹åºåŸºæœ¬å¯ç”¨å†…å­˜æ˜¯200å­—,é‡‡ç”¨å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•(FIFO),æ±‚å‡ºå…¶ç¼ºé¡µç‡.å¦‚æœé‡‡ç”¨æœ€ä½³ç½®æ¢ç®—æ³•(OPT),å…¶ç¼ºé¡µç‡åˆæ˜¯å¤šå°‘?(æ³¨:ç¼ºé¡µç‡&#x3D;ç¼ºé¡µæ¬¡æ•°&#x2F;è®¿é—®é¡µé¢æ€»æ•°)</p>
<p>æ ¹æ®å·²çŸ¥æ¡ä»¶é¡µé¢å¤§å°æ˜¯100å­—,å°†é¡µé¢è®¿é—®åºåˆ—ç®€åŒ–ä¸º:</p>
<p>0,0,1,1,0,3,1,2,2,4,4,3 (2åˆ†)</p>
<p>åˆå› ä¸ºè¯¥ç¨‹åºåŸºæœ¬å¯ç”¨å†…å­˜æ˜¯200å­—,å¯çŸ¥å†…å­˜å—æ•°ä¸º2.</p>
<p>é‡‡ç”¨å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•(FIFO),æ€»å…±æœ‰6æ¬¡ç¼ºé¡µ,ç¼ºé¡µç‡ä¸º6&#x2F;12&#x3D;50%</p>
<p>é‡‡ç”¨æœ€ä½³ç½®æ¢ç®—æ³•(OPT),æ€»å…±æœ‰5æ¬¡ç¼ºé¡µ,ç¼ºé¡µç‡ä¸º5&#x2F;12&#x3D;41.7%</p>
<hr>
<p>æœ‰ä¸€ä¸ªå¤§å­¦åªæœ‰ä¸€ä¸ªæ¾¡å ‚ï¼Œé—¨å£ä¸Šæœ‰ä¸€å—ç‰Œå­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªç”·ç”Ÿè¿›å»æ´—æ¾¡ï¼Œä»–å°±ä¼šæŠŠç‰Œå­è½¬åˆ°â€œç”·â€å­—æ ·ï¼Œè¿™æ ·åªæœ‰ç”·ç”Ÿä¼šè¿›å»ï¼Œå¥³ç”Ÿå°±ä¸ä¼šè¿›å»äº†ï¼›å¦‚æœæ¾¡å ‚æ²¡äººï¼Œä¸€ä¸ªå¥³ç”Ÿå…ˆè¿›äº†æ¾¡å ‚ï¼Œå¥¹å°±ä¼šæŠŠç‰Œå­è½¬åˆ°â€œå¥³â€å­—æ ·ï¼Œé‚£ä¹ˆå¥³ç”Ÿå°±å¯ä»¥è¿›å»äº†ï¼›è¯·ç”¨PVæ“ä½œæè¿°è¿™ä¸ªäº‹ä»¶ï¼Œé¿å…ç”·å¥³ç”ŸåŒæ—¶å‡ºç°åœ¨æ¾¡å ‚ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Semphore  boymutex=<span class="number">1</span>, girlmutex=<span class="number">1</span>,mutex=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> boycount=<span class="number">0</span>;  </span><br><span class="line"><span class="type">int</span> girlcount=<span class="number">0</span>;</span><br><span class="line">Parbegin </span><br><span class="line"></span><br><span class="line"><span class="title function_">Boy</span><span class="params">()</span></span><br><span class="line">begin</span><br><span class="line">  repeat</span><br><span class="line">    <span class="title function_">wait</span><span class="params">(boymutex)</span>; </span><br><span class="line">    <span class="keyword">if</span> boycount ==<span class="number">0</span> then wait(mutex);</span><br><span class="line">	boycount = boycount +<span class="number">1</span>; </span><br><span class="line">    signal(boymutex); </span><br><span class="line">    æ´—æ¾¡ï¼›</span><br><span class="line">    wait(boymutex); </span><br><span class="line">    boycount = boycount <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">if</span> boycount ==<span class="number">0</span> then signal(mutex);</span><br><span class="line">signal(boymutex);</span><br><span class="line">until <span class="literal">false</span>;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">Girl()</span><br><span class="line">begin </span><br><span class="line">  repeat </span><br><span class="line">    <span class="title function_">wait</span><span class="params">(girlmutex)</span>; </span><br><span class="line">	<span class="keyword">if</span> girlcount ==<span class="number">0</span> then wait(mutex);</span><br><span class="line">	girlcount = girlcount +<span class="number">1</span>; </span><br><span class="line">    signal(girlmutex); </span><br><span class="line">    æ´—æ¾¡ï¼›</span><br><span class="line">    wait(girlmutex); </span><br><span class="line">    girlcount = girlcount <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">if</span> girlcount ==<span class="number">0</span> then signal(mutex);</span><br><span class="line">	signal(girlmutex);</span><br><span class="line">until <span class="literal">false</span>;</span><br><span class="line">end;</span><br><span class="line">Parend</span><br></pre></td></tr></table></figure>

<hr>
<p>è‹¥ç¨‹åºPAå’ŒPBå•ç‹¬æ‰§è¡Œæ—¶åˆ†åˆ«ç”¨TA&#x3D;1å°æ—¶,TB&#x3D;1.5å°æ—¶,å…¶ä¸­å¤„ç†å™¨å·¥ä½œæ—¶é—´ TA&#x3D;18åˆ†é’Ÿ T&#x3D;27åˆ†é’Ÿ,å¦‚æœé‡‡ç”¨å¤šé“ç¨‹åºè®¾è®¡æ–¹æ³•,è®©PAã€PBå¹¶è¡Œå·¥ä½œ,å‡å®šå¤„ç†å™¨åˆ©ç‡è¾¾åˆ°50%,å¦åŠ 15åˆ†é’Ÿç³»ç»Ÿå¼€é”€,è¯·é—®ç³»ç»Ÿæ•ˆç‡èƒ½æé«˜å¤šå°‘?</p>
<p>ç­”ï¼šå•é“ç³»ç»Ÿä¸‹ç¨‹åºä¸€ä¸ªæ‰§è¡Œå®Œå†æ‰§è¡Œå¦ä¸€ä¸ª,æ‰€ä»¥CPUæ‰§è¡ŒPAå’ŒPBåŠ èµ·æ¥çš„æ—¶é—´ä¸º 60+90&#x3D;150åˆ†é’Ÿ</p>
<p>å¤šé“ç³»ç»Ÿä¸‹PAå’ŒPBåŒæ—¶åœ¨å†…å­˜ä¸­,å½“ä¸€ä¸ªç¨‹åºå¼€å§‹I&#x2F;Oæ—¶,OSè°ƒç”¨å¦ä¸€ä¸ªæ‰§è¡Œ,æ‰€ä»¥å®ƒä»¬åªå ç”¨äº†CPUæ—¶é—´18+27&#x3D;45åˆ†é’Ÿ</p>
<p>åˆå› ä¸ºCPUåˆ©ç”¨ç‡ä¸º50%,é™¤äº†æ‰§è¡ŒPAå’ŒPB,è¿˜éœ€è¦ç»´æŒOSçš„è¿è¡Œ;å¦ä¸€æ–¹é¢åœ¨PAå’ŒPBé—´åˆ‡æ¢ä¹ŸèŠ±äº†15åˆ†é’Ÿ, å› æ­¤å®é™…çš„CPUè¿è¡Œæ—¶é—´ä¸º(18+27)&#x2F;50%+15&#x3D;90+15&#x3D;105åˆ†é’Ÿ</p>
<p>æ‰€ä»¥ç³»ç»Ÿæ•ˆç‡æé«˜:[(60+90)-(90+15)]&#x2F;(60+90)&#x3D;30%</p>
<hr>
<p>æŸå•å¤„ç†å™¨ç³»ç»Ÿä¸­é‡‡ç”¨å¤šé“ç¨‹åºè®¾è®¡ï¼Œç°æœ‰10ä¸ªè¿›ç¨‹å­˜åœ¨ï¼Œåˆ™å¤„äºâ€œè¿è¡Œâ€ï¼Œâ€œé˜»å¡â€ã€â€œå°±ç»ªâ€çŠ¶æ€çš„è¿›ç¨‹æ•°é‡æœ€å°å’Œæœ€å¤§å€¼åˆ†åˆ«å¯èƒ½æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>ç­”ï¼šåœ¨ä¸€ä¸ªå•å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œé‡‡ç”¨å¤šé“ç¨‹åºè®¾è®¡ï¼Œç°æœ‰10ä¸ªè¿›ç¨‹å­˜åœ¨ã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹å¤„äºâ€œè¿è¡Œâ€çŠ¶æ€ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªå¤„ç†å™¨ã€‚å¤„äºâ€œé˜»å¡â€çŠ¶æ€çš„è¿›ç¨‹æ•°é‡æœ€å°å€¼ä¸º0ï¼Œæœ€å¤§å€¼ä¸º10ï¼Œå› ä¸ºæ‰€æœ‰è¿›ç¨‹éƒ½å¯èƒ½åœ¨ç­‰å¾…æŸäº›äº‹ä»¶å‘ç”Ÿã€‚å¤„äºâ€œå°±ç»ªâ€çŠ¶æ€çš„è¿›ç¨‹æ•°é‡æœ€å°å€¼ä¸º0ï¼Œæœ€å¤§å€¼ä¸º9ï¼Œå› ä¸ºé™¤äº†æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å¤–ï¼Œå…¶ä»–æ‰€æœ‰è¿›ç¨‹éƒ½å¯èƒ½å¤„äºå°±ç»ªçŠ¶æ€ã€‚å› æ­¤ï¼Œåœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œå¤„äºâ€œè¿è¡Œâ€çŠ¶æ€çš„è¿›ç¨‹æ•°é‡æœ€å°å€¼å’Œæœ€å¤§å€¼éƒ½æ˜¯1ï¼›å¤„äºâ€œé˜»å¡â€çŠ¶æ€çš„è¿›ç¨‹æ•°é‡æœ€å°å€¼ä¸º0ï¼Œæœ€å¤§å€¼ä¸º10ï¼›å¤„äºâ€œå°±ç»ªâ€çŠ¶æ€çš„è¿›ç¨‹æ•°é‡æœ€å°å€¼ä¸º0ï¼Œæœ€å¤§å€¼ä¸º9ã€‚</p>
<hr>
<p>æ¡Œä¸Šæœ‰ä¸€ç©ºç›˜,åªå…è®¸å­˜æ”¾ä¸€ä¸ªæ°´æœã€‚çˆ¸çˆ¸å¯å‘ç›˜ä¸­æ”¾è‹¹æœ,ä¹Ÿå¯å‘ç›˜ä¸­æ”¾æ¡”å­ã€‚å„¿å­ä¸“ç­‰åƒç›˜ä¸­çš„æ¡”å­,å¥³å„¿ä¸“ç­‰åƒç›˜ä¸­çš„è‹¹æœã€‚è§„å®šå½“ç›˜ä¸­ç©ºæ—¶ä¸€æ¬¡åªèƒ½æ”¾ä¸€åªæ°´æœä¾›åƒè€…å–ç”¨,è¯·ç”¨ Pã€VåŸè¯­å®ç°çˆ¸çˆ¸ã€å„¿å­ã€å¥³å„¿ä¸‰ä¸ªå¹¶å‘è¿›ç¨‹çš„åŒæ­¥ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore empty = <span class="number">1</span>;</span><br><span class="line">semaphore apple = <span class="number">0</span>;</span><br><span class="line">semaphore orange = <span class="number">0</span>;</span><br><span class="line">semaphore mutex = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">father</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        P(empty);</span><br><span class="line">        P(mutex);</span><br><span class="line">        <span class="comment">// å‘ç›˜ä¸­æ”¾è‹¹æœæˆ–æ¡”å­</span></span><br><span class="line">        <span class="keyword">if</span> (æ”¾è‹¹æœ) &#123;</span><br><span class="line">            V(apple);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (æ”¾æ¡”å­) &#123;</span><br><span class="line">            V(orange);</span><br><span class="line">        &#125;</span><br><span class="line">        V(mutex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">son</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        P(orange);</span><br><span class="line">        P(mutex);</span><br><span class="line">        <span class="comment">// ä»ç›˜ä¸­å–æ¡”å­</span></span><br><span class="line">        V(mutex);</span><br><span class="line">        V(empty);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">daughter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        P(apple);</span><br><span class="line">        P(mutex);</span><br><span class="line">        <span class="comment">// ä»ç›˜ä¸­å–è‹¹æœ</span></span><br><span class="line">        V(mutex);</span><br><span class="line">        V(empty);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>æ¡Œä¸Šæœ‰ä¸€ç©ºç›˜ï¼Œæœ€å¤šå…è®¸å­˜æ”¾ä¸€åªæ°´æœã€‚çˆ¸çˆ¸åªå‘ç›˜ä¸­æ”¾ä¸€ä¸ªè‹¹æœï¼Œå¦ˆå¦ˆåªå‘ç›˜ä¸­æ”¾ä¸€ä¸ªæ¡”å­ï¼Œå„¿å­ä¸“ç­‰åƒç›˜ä¸­çš„æ¡”å­ï¼Œå¥³å„¿ä¸“ç­‰åƒè‹¹æœã€‚ç”¨waitã€signalæ“ä½œå®ç°çˆ¸çˆ¸ã€å¦ˆå¦ˆã€å„¿å­ã€å¥³å„¿å››ä¸ªå¹¶å‘è¿›ç¨‹çš„åŒæ­¥ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore empty=<span class="number">1</span>,nutex=<span class="number">1</span>,apple=<span class="number">0</span>,orange=<span class="number">0</span>;  <span class="comment">//ä¸ºå››ä¸ªä¿¡å·é‡èµ‹åˆå€¼</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">father</span><span class="params">()</span>&#123;</span><br><span class="line">Â  Â  Â <span class="keyword">do</span>&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â wait(empty);    <span class="comment">//ç­‰å¾…ç›˜å­ä¸ºç©º</span></span><br><span class="line">Â  Â  Â  Â  Â  Â wait(metux);    <span class="comment">//ç­‰å¾…è·å–å¯¹ç›˜å­çš„æ“ä½œ</span></span><br><span class="line">Â  Â  Â  Â  Â  Â  çˆ¸çˆ¸å‘ç›˜ä¸­æ”¾ä¸€ä¸ªè‹¹æœ;</span><br><span class="line">Â  Â  Â  Â  Â  Â signal(mutex);   <span class="comment">//é‡Šæ”¾å¯¹ç›˜å­çš„æ“ä½œ</span></span><br><span class="line">Â  Â  Â  Â  Â  Â signal(apple);   <span class="comment">//é€šçŸ¥å¥³å„¿å¯ä»¥æ¥ç›˜å­ä¸­å–è‹¹æœ</span></span><br><span class="line">Â  Â  &#125;<span class="keyword">while</span>(TRUE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">mather</span><span class="params">()</span>&#123;               <span class="comment">//ä¸çˆ¶äº²è¿›ç¨‹é›·åŒ</span></span><br><span class="line">Â  Â  Â <span class="keyword">do</span>&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â wait(empty);</span><br><span class="line">Â  Â  Â  Â  Â  Â wait(metux);</span><br><span class="line">Â  Â  Â  Â  Â  Â  å¦ˆå¦ˆå‘ç›˜ä¸­æ”¾ä¸€ä¸ªæ¡”å­;</span><br><span class="line">Â  Â  Â  Â  Â  Â signal(mutex);</span><br><span class="line">Â  Â  Â  Â  Â  Â signal(orange);</span><br><span class="line">Â  Â  &#125;<span class="keyword">while</span>(TRUE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">son</span><span class="params">()</span>&#123;                        </span><br><span class="line">Â  Â  Â <span class="keyword">do</span>&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â wait(orange);       <span class="comment">//åˆ¤æ–­ç›˜å­ä¸­æ˜¯å¦æœ‰æ¡”å­</span></span><br><span class="line">Â  Â  Â  Â  Â  Â wait(metux);        <span class="comment">//ç­‰å¾…è·å–å¯¹ç›˜å­çš„æ“ä½œ</span></span><br><span class="line">Â  Â  Â  Â  Â  Â  å„¿å­å–å‡ºç›˜ä¸­çš„æ¡”å­;</span><br><span class="line">Â  Â  Â  Â  Â  Â signal(mutex);      <span class="comment">//é‡Šæ”¾å¯¹ç›˜å­çš„æ“ä½œ</span></span><br><span class="line">Â  Â  Â  Â  Â  Â signal(empty);      <span class="comment">//ç›˜å­ç©ºäº†ï¼Œå¯ä»¥ç»§ç»­æ”¾æ°´æœäº†</span></span><br><span class="line">Â  Â  &#125;<span class="keyword">while</span>(TRUE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">daugther</span><span class="params">()</span>&#123;               <span class="comment">//ä¸å„¿å­è¿›ç¨‹é›·åŒ</span></span><br><span class="line">Â  Â  Â <span class="keyword">do</span>&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â wait(apple);</span><br><span class="line">Â  Â  Â  Â  Â  Â wait(metux);</span><br><span class="line">Â  Â  Â  Â  Â  Â  å¥³å„¿å–å‡ºç›˜ä¸­çš„è‹¹æœ;</span><br><span class="line">Â  Â  Â  Â  Â  Â signal(mutex);</span><br><span class="line">Â  Â  Â  Â  Â  Â signal(empty);</span><br><span class="line">Â  Â  &#125;<span class="keyword">while</span>(TRUE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span> &#123;               <span class="comment">//å››ä¸ªå¹¶å‘è¿›ç¨‹çš„åŒæ­¥æ‰§è¡Œ</span></span><br><span class="line">	cobegin</span><br><span class="line">	   <span class="title function_">father</span><span class="params">()</span>;mather();son();daugther();</span><br><span class="line">	coend</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>åœ¨æŸé¡µå¼è™šæ‹Ÿç³»ç»Ÿä¸­,å‡å®šè®¿é—®å†…å­˜çš„æ—¶é—´æ˜¯10ms,å¹³å‡ç¼ºé¡µä¸­æ–­å¤„ç†ä¸º25ms,å¹³å‡ç¼ºé¡µä¸­æ–­ç‡ä¸º5%,è¯•è®¡ç®—åœ¨è¯¥è™šå­˜ç³»ç»Ÿä¸­,å¹³å‡æœ‰æ•ˆè®¿é—®æ—¶é—´æ˜¯å¤šå°‘?</p>
<p>ç­”ï¼šè‹¥è¦è®¿é—®çš„é¡µé¢åœ¨å†…å­˜ä¸­,ä¸€æ¬¡è®¿é—®çš„æ—¶é—´æ˜¯:10ms+10ms&#x3D;20ms;å¦‚æœä¸åœ¨å†…å­˜,æ‰€èŠ±çš„æ—¶é—´æ˜¯:10ms(é—®å†…å­˜é¡µè¡¨)+25ms(ä¸­æ–­å¤„ç†)+10ms(è®¿é—®å†…å­˜é¡µè¡¨)+10ms(è®¿é—®å†…å­˜)&#x3D;55msã€‚æ‰€ä»¥å¹³å‡æœ‰æ•ˆè®¿é—®æ—¶é—´ä¸º: 20msÃ— (1-5%)+55msÃ—5%&#x3D;21.75ms</p>
<hr>
<p>è‹¥æ˜¯ä¸€ä¸ªç£ç›˜å®¹é‡æ˜¯64MBï¼Œç£ç›˜ç›˜å—å¤§å°ä¸º1KBï¼Œè‹¥æ˜¯é‡‡ç”¨æ˜¾å¼é“¾æ¥çš„æ–¹å¼ï¼Œéœ€è¦å¤šå¤§çš„FATè¡¨ï¼›è‹¥æ˜¯ç”¨ç´¢å¼•ç»“æ„ï¼Œéœ€è¦ç”¨å‡ çº§ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>ç­”ï¼š64MB&#x2F;1KB&#x3D;64K(å—)ï¼Œéœ€16ä½åœ°å€æ ‡è¯†ï¼Œéœ€å¯¹äºFATè¡¨çš„ä¸€è¡¨é¡¹ï¼Œåˆ™å 2å­—èŠ‚ï¼Œ2BÃ—64K&#x3D;128KBã€‚</p>
<p>ä¸€ä¸ªç›˜å—å¯ä»¥æ”¾1KB&#x2F;2B&#x3D;512é¡¹ï¼Œä¸€çº§ç´¢å¼•è‚¯å®šä¸å¤Ÿï¼Œ512*512&gt;64Kï¼Œæ‰€ä»¥éœ€è¦äºŒçº§ç´¢å¼•ã€‚</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬ä¸€æ¬¡å¯¹githubé¡¹ç›®æPRè¯·æ±‚â€”â€”ä»¥ä¿®æ”¹casdooré¡¹ç›®çš„swaggeræ–‡æ¡£ä¸ºä¾‹</title>
    <url>/2023/07/20/Go/29/</url>
    <content><![CDATA[<h1 id="PRç®€ä»‹"><a href="#PRç®€ä»‹" class="headerlink" title="PRç®€ä»‹"></a>PRç®€ä»‹</h1><p>PR(Pull Request) å³<code>æ‹‰å–è¯·æ±‚</code>,æ˜¯ GitHub ä¸Šè¿›è¡ŒååŒå¼€å‘çš„ä¸€ç§éå¸¸å¸¸ç”¨çš„æ–¹å¼ã€‚<br>å®ƒçš„åŸºæœ¬æµç¨‹æ˜¯ï¼š</p>
<ol>
<li>å¼€å‘è€…forkä¸€ä¸ªå¼€æºé¡¹ç›®çš„ä»£ç åº“,å°†å…¶å…‹éš†åˆ°æœ¬åœ°ã€‚</li>
<li>åœ¨æœ¬åœ°å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ã€æ·»åŠ æ–°åŠŸèƒ½ç­‰ã€‚</li>
<li>å°†æœ¬åœ°ä¿®æ”¹åçš„ä»£ç pushåˆ°å¼€å‘è€…è‡ªå·±çš„ä»£ç åº“ä¸­ã€‚</li>
<li>åœ¨å¼€æºé¡¹ç›®çš„ä»£ç åº“ä¸­,å‘èµ·ä¸€ä¸ªpull request,è¯·æ±‚é¡¹ç›®ç»´æŠ¤è€…å°†å¼€å‘è€…çš„ä»£ç mergeåˆ°é¡¹ç›®ä¸»ä»£ç åº“ä¸­ã€‚</li>
<li>é¡¹ç›®ç»´æŠ¤è€…reviewä»£ç ,å¦‚æœæ²¡æœ‰é—®é¢˜åˆ™approveå¹¶mergeè¯¥PRã€‚</li>
<li>å¼€å‘è€…çš„ä»£ç å°±æ­£å¼æˆä¸ºäº†è¯¥å¼€æºé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚</li>
</ol>
<h1 id="fork-ä¸clone"><a href="#fork-ä¸clone" class="headerlink" title="fork ä¸clone"></a>fork ä¸clone</h1><p>æ¥ä¸‹æ¥æŒ‰ç…§æ­¥éª¤ï¼Œé€æ­¥è¿›è¡Œã€‚<br>æŠŠ<a href="https://github.com/casdoor/casdoor">casdoor</a>çš„githubä»£ç forkåˆ°è‡ªå·±çš„ä»“åº“é‡Œï¼Œé€šè¿‡è¿™ç§æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥åœ¨forkåçš„ä»£ç åº“ä¸­è¿›è¡Œä¿®æ”¹ã€æ–°å¢åŠŸèƒ½ï¼Œç„¶åé€šè¿‡pull requestå°†ä»£ç è´¡çŒ®å›åŸé¡¹ç›®ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/ae37a196fa664a68a768e35498885deb.png"></p>
<p>é€šè¿‡forkï¼Œä½ çš„ä»“åº“é‡Œå°±ä¼šå¤šä¸€ä¸ªé¡¹ç›®ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/33f331c4ad2f4e4a9f4d5a7ec7828bd5.png"></p>
<p>æ€æ ·å¯¹forkåçš„ä»£ç åº“è¿›è¡Œä¿®æ”¹å‘¢ï¼Ÿå½“ç„¶å¾—å°†ä»£ç å…‹éš†åˆ°æœ¬åœ°å™»ï¼å³é”®ç‚¹å‡»ç©ºç™½å¤„â€”â€”ä½ æƒ³ä¿å­˜è¯¥é¡¹ç›®çš„è·¯å¾„ä¸‹ï¼Œç”¨gitæ‰“å¼€ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/05c8810b72d14ed0906c57a7582bb049.png"></p>
<p>ç„¶åå…‹éš†ä½ çš„ä»£ç åº“åˆ°æœ¬åœ°ï¼Œåœ¨gitä¸Šè¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/æ­¤å¤„åº”è¯¥æ˜¯ä½ çš„githubç”¨æˆ·å/casdoor.git</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/b21ec60fc87145b3ac14b537ff31804a.png"></p>
<p>æ­¤æ—¶ä½ ä¼šå‘ç°è¯¥è·¯å¾„ä¸‹å¤šäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåä¸ºcasdoorï¼Œå…‹éš†æˆåŠŸã€‚</p>
<h1 id="ä¿®æ”¹æœ¬åœ°swaggeræ–‡ä»¶ï¼ˆå«beeçš„ä½¿ç”¨ï¼‰"><a href="#ä¿®æ”¹æœ¬åœ°swaggeræ–‡ä»¶ï¼ˆå«beeçš„ä½¿ç”¨ï¼‰" class="headerlink" title="ä¿®æ”¹æœ¬åœ°swaggeræ–‡ä»¶ï¼ˆå«beeçš„ä½¿ç”¨ï¼‰"></a>ä¿®æ”¹æœ¬åœ°swaggeræ–‡ä»¶ï¼ˆå«beeçš„ä½¿ç”¨ï¼‰</h1><p>å¦‚ä½•ä¿®æ”¹casdoorçš„<code>swagger</code>æ–‡ä»¶å‘¢ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ä¿®æ”¹æ³¨é‡Šä»£ç ç„¶åç”¨casbiné­”æ”¹çš„beeå·¥å…·ç”Ÿæˆ<code>swagg.json</code>æ–‡ä»¶ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œbeegoæ¡†æ¶ä¸ºç”Ÿæˆäº¤æ¢æ–‡ä»¶æä¾›æ”¯æŒï¼Œä»¥ä¾¿é€šè¿‡ç§°ä¸ºâ€œbeeâ€çš„å‘½ä»¤è¡Œå·¥å…·æ¸…é™¤apiã€‚ Casdoorä¹Ÿä»¥beegoä¸ºåŸºç¡€ã€‚ ä½†æˆ‘ä»¬å‘ç°beeç”Ÿæˆçš„swaggeræ–‡ä»¶æœªèƒ½å°†apiåˆ†ç±»ä¸ºâ€œ@Tagâ€æ ‡ç­¾ï¼Œ æˆ‘ä»¬ä¿®æ”¹äº†åŸbeeä»¥æ‰§è¡ŒåŠŸèƒ½ã€‚é‚£ä¹ˆå¦‚ä½•å†™æ³¨é‡Šå‘¢ï¼Ÿ</p>
<p>å¤§å¤šæ•°è§„åˆ™ä¸åŸbee commentæ ¼å¼å®Œå…¨ç›¸åŒï¼Œ å”¯ä¸€çš„å·®å¼‚æ˜¯apiå¿…é¡»æŒ‰ç…§â€@Tagâ€æ ‡ç­¾åˆ†æˆä¸åŒçš„ç»„åˆ«ï¼Œ å› æ­¤ï¼Œå¼€å‘è€…æœ‰ä¹‰åŠ¡ç¡®ä¿æ­£ç¡®æ·»åŠ æ­¤æ ‡ç­¾ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// GetLdap</span></span><br><span class="line"><span class="comment">// @Title GetLdap</span></span><br><span class="line"><span class="comment">// @Tag Account API</span></span><br><span class="line"><span class="comment">// @Description get ldap</span></span><br><span class="line"><span class="comment">// @Param	id	query	string	true	&quot;id&quot;</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;object&#125; object.Ldap The Response object</span></span><br><span class="line"><span class="comment">// @router /get-ldap [get]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *ApiController)</span></span> GetLdap() &#123;</span><br><span class="line">	id := c.Input().Get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> util.IsStringsEmpty(id) &#123;</span><br><span class="line">		c.ResponseError(c.T(<span class="string">&quot;general:Missing parameter&quot;</span>))</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	_, name := util.GetOwnerAndNameFromId(id)</span><br><span class="line">	c.ResponseOk(object.GetMaskedLdap(object.GetLdap(name)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…·æœ‰ç›¸åŒâ€@Tagâ€æ ‡ç­¾çš„ api å°†ä¼šè¢«æ”¾å…¥åŒä¸€ä¸ªç»„ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠæ³¨é‡Šåˆ†ç±»ï¼š</p>
<p>@Title</p>
<p>æ¥å£çš„æ ‡é¢˜ï¼Œç”¨æ¥æ ‡ç¤ºå”¯ä¸€æ€§ï¼Œå”¯ä¸€ï¼Œå¯é€‰</p>
<p>æ ¼å¼ï¼šä¹‹åè·Ÿä¸€ä¸ªæè¿°å­—ç¬¦ä¸²</p>
<p>@Description</p>
<p>æ¥å£çš„ä½œç”¨ï¼Œç”¨æ¥æè¿°æ¥å£çš„ç”¨é€”ï¼Œå”¯ä¸€ï¼Œå¯é€‰</p>
<p>æ ¼å¼ï¼šä¹‹åè·Ÿä¸€ä¸ªæè¿°å­—ç¬¦ä¸²</p>
<p>@Param</p>
<p>è¯·æ±‚çš„å‚æ•°ï¼Œç”¨æ¥æè¿°æ¥å—çš„å‚æ•°ï¼Œå¤šä¸ªï¼Œå¯é€‰</p>
<p>æ ¼å¼ï¼šå˜é‡å ä¼ è¾“ç±»å‹ ç±»å‹ æ˜¯å¦å¿…é¡» æè¿°</p>
<p>å˜é‡åï¼šå­—ç¬¦ä¸²</p>
<p>ä¼ è¾“ç±»å‹ï¼špath or body or query or form or header</p>
<ul>
<li><p>query è¡¨ç¤ºå¸¦åœ¨urlä¸²é‡Œé¢?aa&#x3D;bb&amp;cc&#x3D;dd</p>
</li>
<li><p>form è¡¨ç¤ºä½¿ç”¨è¡¨å•é€’äº¤æ•°æ®</p>
</li>
<li><p>path è¡¨ç¤ºURLä¸²ä¸­å¾—å­—ç¬¦ï¼Œä¾‹å¦‚&#x2F;user&#x2F;{uid} é‚£ä¹ˆuidå°±æ˜¯ä¸€ä¸ªpathç±»å‹çš„å‚æ•°</p>
</li>
<li><p>body è¡¨ç¤ºä½¿ç”¨raw bodyè¿›è¡Œæ•°æ®çš„ä¼ è¾“</p>
</li>
<li><p>header è¡¨ç¤ºé€šè¿‡headerè¿›è¡Œæ•°æ®çš„ä¼ è¾“<br>ç±»å‹ï¼š</p>
</li>
<li><p>string</p>
</li>
<li><p>int</p>
</li>
<li><p>int64</p>
</li>
<li><p>å¯¹è±¡ï¼Œè¿™ä¸ªåœ°æ–¹å¤§å®¶å†™çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œéœ€è¦æ˜¯ç›¸å¯¹äºå½“å‰é¡¹ç›®çš„è·¯å¾„.å¯¹è±¡ï¼Œä¾‹å¦‚models.Objectè¡¨ç¤ºmodelsç›®å½•ä¸‹çš„Objectå¯¹è±¡ï¼Œè¿™æ ·beeåœ¨ç”Ÿæˆæ–‡æ¡£çš„æ—¶å€™ä¼šå»æ‰«ææ”¹å¯¹è±¡å¹¶æ˜¾ç¤ºç»™ç”¨æˆ·æ”¹å¯¹è±¡ã€‚<br>æ˜¯å¦å¿…é¡»ï¼štrue æˆ–è€…false</p>
</li>
</ul>
<p>æè¿°ï¼šå­—ç¬¦ä¸²</p>
<p>@Success</p>
<p>æˆåŠŸè¿”å›çš„codeå’Œå¯¹è±¡æˆ–è€…ä¿¡æ¯</p>
<p>æ ¼å¼ï¼šcode å¯¹è±¡ç±»å‹ ä¿¡æ¯æˆ–è€…å¯¹è±¡è·¯å¾„</p>
<p>codeï¼šè¡¨ç¤ºHTTPçš„æ ‡å‡†status codeï¼Œ200 201ç­‰</p>
<p>å¯¹è±¡ç±»å‹ï¼š{object}è¡¨ç¤ºå¯¹è±¡ï¼Œå…¶ä»–é»˜è®¤éƒ½è®¤ä¸ºæ˜¯å­—ç¬¦ç±»å‹ï¼Œä¼šæ˜¾ç¤ºç¬¬ä¸‰ä¸ªå‚æ•°ç»™ç”¨æˆ·ï¼Œå¦‚æœæ˜¯{object}ç±»å‹ï¼Œé‚£ä¹ˆå°±ä¼šå»æ‰«ææ”¹å¯¹è±¡ï¼Œå¹¶æ˜¾ç¤ºç»™ç”¨æˆ·</p>
<p>å¯¹è±¡è·¯å¾„å’Œä¸Šé¢Paramä¸­å¾—å¯¹è±¡ç±»å‹ä¸€æ ·ï¼Œä½¿ç”¨è·¯å¾„.å¯¹è±¡çš„æ–¹å¼æ¥æè¿°</p>
<p>@Failure</p>
<p>é”™è¯¯è¿”å›çš„ä¿¡æ¯ï¼Œ</p>
<p>æ ¼å¼ï¼š code ä¿¡æ¯</p>
<p>code:åŒä¸ŠSuccess</p>
<p>é”™è¯¯ä¿¡æ¯ï¼šå­—ç¬¦ä¸²æè¿°ä¿¡æ¯</p>
<p>@router</p>
<p>ä¸Šé¢å·²ç»æè¿°è¿‡æ”¯æŒä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è·¯ç”±ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºæ”¯æŒçš„HTTPæ–¹æ³•ã€‚</p>
<p>æ³¨é‡Šå†™å®Œåï¼Œå°±è¦ç”¨casbinæä¾›çš„beeå·¥å…·ç”Ÿæˆ<code>swagger</code>æ–‡æ¡£ã€‚ä»¥ä¸‹æ˜¯<a href="https://casdoor.org/zh/docs/developer-guide/swagger">casdoorå®˜æ–¹æ–‡æ¡£</a>æä¾›çš„è§£å†³åŠæ³•ï¼š</p>
<ol>
<li><p>ä»¥æ­£ç¡®çš„æ ¼å¼å†™å…¥ api</p>
</li>
<li><p>è·å–èµ„æºåº“ <a href="https://github.com/casbin/bee">https://github.com/casbin/bee</a></p>
</li>
<li><p>build the modified bee, for example, in the root directory of casbin&#x2F;bee, run</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go build -o mybee .</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>copy mybee to the base directory of casdoor</p>
</li>
<li><p>in that directory, run</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mybee generate docs</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>ä¹‹åä½ ä¼šå‘ç°ç”Ÿæˆæ–°çš„swaggeræ–‡ä»¶ã€‚</li>
</ol>
<p>ä»¥ä¸‹æ˜¯å¯¹ä»¥ä¸Šæ­¥éª¤çš„ç†è§£ä¸ä½¿ç”¨ï¼š</p>
<p>æ³¨é‡Šå†™å®Œåå…ˆå»<a href="https://github.com/casbin/bee">https://github.com/casbin/bee</a>è·å–beeå·¥å…·ï¼Œå…·ä½“è¿‡ç¨‹æ˜¯å°†è¯¥ä»“åº“çš„ä»£ç å…‹éš†åˆ°æœ¬åœ°ï¼ˆä½ ä¹Ÿå¯ä»¥å…ˆforkï¼Œå†å…‹éš†ï¼Œå› ä¸ºä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªä»“åº“çš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨forkï¼‰<br>åœ¨ä½ æƒ³ä¿å­˜è¯¥beeå·¥å…·ä»£ç çš„è·¯å¾„å¤„ç”¨git bashæ‰“å¼€ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/casbin/bee.git</span><br></pre></td></tr></table></figure>
<p>ç„¶åè¿›å…¥è¯¥é¡¹ç›®ç›®å½•ï¼Œä¹Ÿå°±æ˜¯beeç›®å½•ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go build -o bee.exe</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œå¯ä»¥åœ¨è¯¥é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆbee.exeæ–‡ä»¶ï¼Œæ¥ä¸‹æ¥ä¸ºäº†ä½¿ç”¨å®ƒï¼Œå°†å®ƒå¤åˆ¶ä¸€ä»½å­˜æ”¾åœ¨ <code>$GOPATH/bin</code> é‡Œé¢ï¼Œå½“ç„¶ä½ éœ€è¦æŠŠ<code>$GOPATH/bin</code> æ·»åŠ åˆ°ä½ çš„ç¯å¢ƒå˜é‡ä¸­ï¼Œæˆ‘æ˜¯å°†<code>$GOPATH/bin</code> æ·»åŠ åˆ°ç”¨æˆ·å˜é‡çš„ pathä¸­ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/e4b7edba08a04999aa3486868bb2018f.png"></p>
<p>è‡³äºä¸ºä»€ä¹ˆå°†<code>bee.exe</code>æ”¾åœ¨<code>$GOPATH/bin</code> é‡Œé¢ï¼Œè¿™ä¼¼ä¹æ˜¯ä¸€ç§è§„èŒƒã€‚é…å¥½ç¯å¢ƒå˜é‡åï¼Œæ‰“å¼€casdoorçš„é¡¹ç›®ç›®å½•ï¼Œåœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bee generate docs</span><br></pre></td></tr></table></figure>
<p>ä½ ä¼šå‘ç°ï¼Œé¡¹ç›®ä¸­swaggerç›®å½•é‡Œçš„<code>swagger.json</code>æ–‡ä»¶å’Œ<code>swagger.yml</code>æ–‡ä»¶å‡å·²æ›´æ–°ï¼Œæ£€æŸ¥åç¡®è®¤casdoorçš„<code>swagger</code>æ–‡ä»¶ä¿®æ”¹æˆåŠŸã€‚</p>
<h1 id="æ›´æ–°githubä»“åº“"><a href="#æ›´æ–°githubä»“åº“" class="headerlink" title="æ›´æ–°githubä»“åº“"></a>æ›´æ–°githubä»“åº“</h1><p>ç”±äºæœ¬åœ°çš„casdooré¡¹ç›®æœ‰æ–‡ä»¶ä¿®æ”¹ï¼Œæ¯”å¦‚ä¸Šè¿°çš„<code>swagger.json</code>æ–‡ä»¶å’Œ<code>swagger.yml</code>æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥å°±è¦å°†ä»–ä»¬æäº¤åˆ°ä½ çš„githubä»“åº“ä¸­ã€‚é¦–å…ˆè¾“å…¥<code>git status</code>æŸ¥çœ‹æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“çš„æ–‡ä»¶å·®å¼‚ï¼Œå†è¾“å…¥<code>git add -a</code>å°†å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº(staging area)ï¼Œæˆ‘è¾“å…¥çš„æ˜¯<code> git add swagger</code>ï¼Œè¡¨ç¤ºåªæ·»åŠ <code>swagger</code>è¿™ä¸ªç›®å½•ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/29f3b13dea1b4e6eb1ecf660a080225e.png"></p>
<p>ç„¶åè¾“å…¥<code>git commit -m &quot;å¯¹è¿™æ¬¡æäº¤çš„æè¿°&quot;</code>ï¼Œæœ€åä½¿ç”¨<code>git push origin matser</code>å°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originè¿œç¨‹ä»“åº“çš„masteråˆ†æ”¯ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/e9d6d8c9ad484323ab793581d2e67fb6.png"></p>
<p>ä½†æ˜¯ç»å¸¸ä¼šå‡ºç°è¿™ä¸ªæŠ¥é”™ï¼š<code>fatal: unable to access &#39;https://github.com/uestc-wxy/casdoor.git/&#39;: Failed to connect to github.com port 443 after 21065 ms: Couldn&#39;t connect to server</code>ï¼Œæˆ–è€…å…¶ä»–ç±»ä¼¼äºè¿æ¥çš„é”™è¯¯ï¼Œè¿™å°±éœ€è¦ä½ åœ¨gitè¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global --<span class="built_in">unset</span> http.proxy </span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªbugæˆ‘å·²ç»ä¹ ä»¥ä¸ºå¸¸äº†ï¼Œæ¥ä¸‹æ¥é‡æ–°pushä½ çš„masteråˆ†æ”¯å°±è¡Œäº†ã€‚ï¼ˆä¸‡ä¸€è¿˜æ˜¯ä¸è¡Œï¼Œè¯•è¯•æ¢æ¢ç½‘ç»œå•¥çš„ï¼Œæˆ‘å½“æ—¶æ¢æˆçƒ­ç‚¹çªç„¶å°±pushæˆåŠŸäº†ï¼Œéš¾ç»·ï¼‰</p>
<h1 id="æPR"><a href="#æPR" class="headerlink" title="æPR"></a>æPR</h1><p>è¿™æ—¶ä½ çš„githubä»“åº“å·²ç»æ›´æ–°å®Œæˆäº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æPRï¼Œæ‰“å¼€ä½ è¦æPRçš„å®˜æ–¹ä»“åº“ï¼ˆæ³¨æ„ä¸æ˜¯ä½ è‡ªå·±forkåçš„ä»“åº“å“ˆï¼‰ï¼Œç‚¹å‡»<code>pull requests</code>ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/14f4a03640d949dbac95f5ff3e797bc8.png"></p>
<p>å†ç‚¹å‡»<code>New pull request</code>ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/1b0bb874fcd441fa9ee7d537700b9f2f.png"></p>
<p>ç„¶ågithubä¼šè‡ªåŠ¨æ¯”è¾ƒä½ çš„ä»“åº“å’Œè¿™ä¸ªå®˜æ–¹ä»“åº“ä»£ç çš„å·®å¼‚ï¼Œç¬¦åˆè¦æ±‚åï¼Œå¯ä»¥ç‚¹å‡»<code>Create pull request</code>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/029e866a7f574f1d8de6b2996ab03af1.png"></p>
<p>å…¶å®æˆ‘æ˜¯é€šè¿‡å¦‚ä¸‹æ–¹å¼æäº¤PRçš„</p>
<p>forkçš„ä»“åº“ä»£ç è¢«ä¿®æ”¹è¿‡ågithubä¼šå‡ºç°ç±»ä¼¼çš„è¯­å¥ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/ce9fab66599841b6bb986669569740ba.png"></p>
<p>ç‚¹å‡»å°±èƒ½ç›´æ¥è¿›å…¥æPRçš„ç•Œé¢ï¼Œç¬¦åˆè¦æ±‚åï¼Œå°±å¯ä»¥ç‚¹å‡»<code>Create pull request</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/5d7622cbd1514c3a84c71977ed8588d2.png"></p>
<p>ä½ æçš„PRéœ€è¦æ ‡é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥åšè¯„è®ºã€‚æ ‡é¢˜ä¸€å®šè¦ç¬¦åˆè§„èŒƒï¼Œå¦åˆ™PRå°†ä¸äºˆé€šè¿‡ã€‚å³æ ‡é¢˜è¦ä»¥å±æ€§å¼€å¤´ï¼Œåé¢è·Ÿä¸Šç®€è¦æè¿°ã€‚</p>
<blockquote>
<p>feat: æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰<br>fix: ä¿®è¡¥bug<br>docs: æ–‡æ¡£ï¼ˆdocumentationï¼‰<br>style: æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰<br>refactor: é‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰<br>chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨<br>revert: æ’¤é”€ï¼Œç‰ˆæœ¬å›é€€<br>perf: æ€§èƒ½ä¼˜åŒ–<br>testï¼šæµ‹è¯•<br>improvement: æ”¹è¿›<br>build: æ‰“åŒ…<br>ci: æŒç»­é›†æˆ</p>
</blockquote>
<p>æ¯”å¦‚fix: provide detailed description of ldap in swagger</p>
<p>å¦å¤–è¿˜éœ€è¦ç­¾è®¢CLAåè®®ï¼Œæäº¤PRä¹‹åä½ ä¼šæ”¶åˆ°ç›¸å…³é‚®ä»¶ï¼ŒåŒæ„è¯¥åè®®å³å¯ã€‚</p>
<p>è‡³æ­¤ï¼Œç¬¬ä¸€æ¬¡æPRä¹‹æ—…çº ç»“æŸäº†ï¼Œæ„Ÿæ…¨é¢‡å¤šï¼Œç£•ç£•ç»Šç»Šï¼Œåˆ°å¤„æŸ¥é˜…èµ„æ–™ï¼Œæœ€ç»ˆä¹Ÿç®—åœ†æ»¡å®Œæˆäº†ã€‚</p>
]]></content>
      <tags>
        <tag>å¤§äºŒè‡ªå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»ŸæœŸæœ«å¤ä¹ ä¹‹æ–‡ä»¶ç³»ç»Ÿ</title>
    <url>/2023/06/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3/</url>
    <content><![CDATA[<h1 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h1><p>â€‹	æ–‡ä»¶ç³»ç»Ÿæ˜¯æ“ä½œç³»ç»Ÿç”¨äºæ˜ç¡®<a href="https://baike.baidu.com/item/%E5%AD%98%E5%82%A8%E8%AE%BE%E5%A4%87/3340812?fromModule=lemma_inlink">å­˜å‚¨è®¾å¤‡</a>ï¼ˆå¸¸è§çš„æ˜¯ç£ç›˜ï¼‰æˆ–åˆ†åŒºä¸Šçš„æ–‡ä»¶çš„æ–¹æ³•å’Œ<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1450?fromModule=lemma_inlink">æ•°æ®ç»“æ„</a>ï¼›å³åœ¨å­˜å‚¨è®¾å¤‡ä¸Šç»„ç»‡æ–‡ä»¶çš„æ–¹æ³•ã€‚æ“ä½œç³»ç»Ÿä¸­è´Ÿè´£ç®¡ç†å’Œ<a href="https://baike.baidu.com/item/%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6/23734835?fromModule=lemma_inlink">å­˜å‚¨æ–‡ä»¶</a>ä¿¡æ¯çš„è½¯ä»¶æœºæ„ç§°ä¸º<a href="https://baike.baidu.com/item/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/8164847?fromModule=lemma_inlink">æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ</a>ï¼Œç®€ç§°æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h2 id="æ–‡ä»¶ç³»ç»Ÿæ¦‚è¿°"><a href="#æ–‡ä»¶ç³»ç»Ÿæ¦‚è¿°" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿæ¦‚è¿°"></a>æ–‡ä»¶ç³»ç»Ÿæ¦‚è¿°</h2><p>æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½ï¼š</p>
<blockquote>
<p>æœ‰æ•ˆåœ°ç®¡ç†æ–‡ä»¶çš„å­˜å‚¨ç©ºé—´ï¼›<br>ç®¡ç†æ–‡ä»¶ç›®å½•ï¼›<br>å®Œæˆæ–‡ä»¶çš„è¯»&#x2F;å†™æ“ä½œï¼›<br>å®ç°æ–‡ä»¶å…±äº«ä¸ä¿æŠ¤ï¼›<br>ä¸ºç”¨æˆ·æä¾›äº¤äº’å¼å‘½ä»¤æ¥å£å’Œç¨‹åºè°ƒç”¨æ¥å£ã€‚</p>
</blockquote>
<p>â€‹	æ–‡ä»¶ç³»ç»Ÿå®šä¹‰ï¼š<strong>æ“ä½œç³»ç»Ÿä¸­çš„å„ç±»æ–‡ä»¶ã€ç®¡ç†æ–‡ä»¶çš„è½¯ä»¶ï¼Œä»¥åŠç®¡ç†æ–‡ä»¶æ‰€æ¶‰åŠåˆ°çš„æ•°æ®ç»“æ„ç­‰ä¿¡æ¯çš„é›†åˆ</strong>ã€‚</p>
<p>â€‹	ç°ä»£OSå‡ ä¹éƒ½æ˜¯é€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ¥ç»„ç»‡å’Œç®¡ç†åœ¨è®¡ç®—æœºä¸­æ‰€å­˜å‚¨çš„å¤§é‡ç¨‹åºå’Œæ•°æ®çš„ã€‚æ–‡ä»¶ç³»ç»Ÿçš„ç®¡ç†åŠŸèƒ½æ˜¯é€šè¿‡æŠŠå®ƒæ‰€ç®¡ç†çš„ç¨‹åºå’Œæ•°æ®ç»„ç»‡æˆä¸€ç³»åˆ—æ–‡ä»¶çš„æ–¹æ³•æ¥å®ç°çš„ã€‚è€Œæ–‡ä»¶åˆ™æ˜¯æŒ‡å…·æœ‰æ–‡ä»¶åçš„è‹¥å¹²ç›¸å…³å…ƒç´ çš„é›†åˆ<strong>ã€‚</strong>å…ƒç´ é€šå¸¸æ˜¯è®°å½•ï¼Œè€Œè®°å½•æ˜¯ä¸€ç»„æœ‰æ„ä¹‰çš„æ•°æ®é¡¹çš„é›†åˆã€‚å¯ä»¥æŠŠæ•°æ®ç»„æˆåˆ†ä¸º<strong>æ•°æ®é¡¹ã€è®°å½•ã€æ–‡ä»¶</strong>ã€‚</p>
<p>ã€€â‘  <strong>æ•°æ®é¡¹</strong>ï¼Œæ•°æ®é¡¹æ˜¯æœ€ä½çº§æ•°æ®ç»„ç»‡å½¢å¼ã€‚åˆ†ä¸ºåŸºæœ¬æ•°æ®é¡¹ï¼ˆç”¨äºæè¿°ä¸€ä¸ªå¯¹è±¡æŸç§å±æ€§çš„å­—ç¬¦é›†ï¼Œæ˜¯æ•°æ®ç»„ç»‡ä¸­å¯ä»¥å‘½åçš„æœ€å°é€»è¾‘æ•°æ®å•ä½ï¼Œå³åŸå­æ•°æ®ï¼Œåˆç§°ä¸ºæ•°æ®å…ƒç´ æˆ–å­—æ®µï¼‰å’Œç»„åˆæ•°æ®é¡¹ï¼ˆç”±è‹¥å¹²ä¸ªåŸºæœ¬æ•°æ®é¡¹ç»„æˆï¼Œç®€ç§°ç»„é¡¹ï¼‰</p>
<p>ã€€â‘¡ <strong>è®°å½•</strong>ï¼Œæ˜¯ä¸€ç»„ç›¸å…³æ•°æ®é¡¹çš„é›†åˆï¼Œç”¨äºæè¿°ä¸€ä¸ªå¯¹è±¡åœ¨æŸæ–¹é¢çš„å±æ€§ï¼Œä¸ºäº†èƒ½å¤Ÿå”¯ä¸€æ ‡è¯†ä¸€ä¸ªè®°å½•ï¼Œéœ€è¦åœ¨ä¸€ä¸ªè®°å½•çš„å„ä¸ªæ•°æ®é¡¹ä¸­ç¡®å®šä¸€ä¸ªæˆ–å‡ ä¸ªæ•°æ®é¡¹ï¼ŒæŠŠä»–ä»¬çš„é›†åˆç§°ä¸º<em><strong>å…³é”®å­—</strong></em>ï¼Œå…³é”®å­—æ˜¯èƒ½å¤Ÿå”¯ä¸€æ ‡è¯†ä¸€ä¸ªè®°å½•çš„æ•°æ®é¡¹ã€‚</p>
<p>ã€€â‘¢ <strong>æ–‡ä»¶</strong>ï¼Œæ–‡ä»¶æ˜¯å…·æœ‰æ–‡ä»¶åçš„ä¸€ç»„ç›¸å…³å…ƒç´ çš„é›†åˆï¼Œåˆ†ä¸ºæœ‰ç»“æ„æ–‡ä»¶å’Œæ— ç»“æ„æ–‡ä»¶ã€‚æœ‰ç»“æ„æ–‡ä»¶ç”±è‹¥å¹²ä¸ªç›¸å…³è®°å½•ç»„æˆï¼Œæ— ç»“æ„æ–‡ä»¶åˆ™è¢«çœ‹æˆä¸€ä¸ªå­—ç¬¦æµã€‚æ–‡ä»¶æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„æœ€å¤§æ•°æ®å•ä½ï¼Œå®ƒæè¿°äº†ä¸€ä¸ªå¯¹è±¡é›†ã€‚</p>
<p><em><strong>ä¸€ä¸ªæ–‡ä»¶å¯å¯¹åº”è‹¥å¹²ä¸ªè®°å½•ï¼Œä¸€ä¸ªè®°å½•å¯å¯¹åº”è‹¥å¹²ä¸ªæ•°æ®é¡¹ã€‚</strong></em></p>
<p>æ–‡ä»¶åº”è¯¥å…·æœ‰è‡ªå·±çš„å±æ€§ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç±»å‹ï¼Œæ–‡ä»¶é•¿åº¦ï¼Œæ–‡ä»¶çš„ç‰©ç†ä½ç½®ï¼Œæ–‡ä»¶çš„å»ºç«‹æ—¶é—´ã€‚æ–‡ä»¶é•¿åº¦ï¼ˆæ–‡ä»¶çš„å½“å‰é•¿åº¦ï¼Œä¹Ÿå¯èƒ½æ˜¯æœ€å¤§å…è®¸é•¿åº¦ï¼‰ï¼Œæ–‡ä»¶çš„ç‰©ç†ä½ç½®ï¼ˆæŒ‡ç¤ºæ–‡ä»¶åœ¨å“ªä¸€ä¸ªè®¾å¤‡ä¸ŠåŠåœ¨è¯¥è®¾å¤‡çš„å“ªä¸ªä½ç½®çš„æŒ‡é’ˆï¼‰ï¼Œæ–‡ä»¶çš„å»ºç«‹æ—¶é—´ï¼ˆæ–‡ä»¶æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ï¼‰ã€‚</p>
<p><strong>æ–‡ä»¶ç±»å‹</strong></p>
<ul>
<li><p><em>æŒ‰ç”¨é€”åˆ†ç±»</em><br>(1)ç³»ç»Ÿæ–‡ä»¶<br> è¿™æ˜¯æŒ‡ç”±ç³»ç»Ÿè½¯ä»¶æ„æˆçš„æ–‡ä»¶ã€‚å¤§å¤šæ•°çš„ç³»ç»Ÿæ–‡ä»¶åªå…è®¸ç”¨æˆ·è°ƒç”¨ï¼Œä½†ä¸å…è®¸ç”¨æˆ·å»è¯»ï¼Œæ›´ä¸å…è®¸ä¿®æ”¹ï¼›æœ‰çš„ç³»ç»Ÿæ–‡ä»¶ä¸ç›´æ¥å¯¹ç”¨æˆ·å¼€æ”¾ã€‚<br>(2) ç”¨æˆ·æ–‡ä»¶<br> ç”±ç”¨æˆ·çš„æºä»£ç ã€ç›®æ ‡æ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶æˆ–æ•°æ®ç­‰æ‰€æ„æˆçš„æ–‡ä»¶ã€‚<br>(3) åº“æ–‡ä»¶<br> è¿™æ˜¯ç”±æ ‡å‡†å­ä¾‹ç¨‹åŠå¸¸ç”¨çš„ä¾‹ç¨‹ç­‰æ‰€æ„æˆçš„æ–‡ä»¶ã€‚è¿™ç±»æ–‡ä»¶å…è®¸ç”¨æˆ·è°ƒç”¨ï¼Œä½†ä¸å…è®¸ä¿®æ”¹ã€‚ã€€</p>
</li>
<li><p><em>æŒ‰æ–‡ä»¶ä¸­æ•°æ®çš„å½¢å¼åˆ†ç±»</em><br>(1)æºæ–‡ä»¶<br>æŒ‡ç”±æºç¨‹åºå’Œæ•°æ®æ„æˆçš„æ–‡ä»¶ã€‚<br>(2) ç›®æ ‡æ–‡ä»¶<br>æŒ‡æŠŠæºç¨‹åºç»è¿‡ç›¸åº”è¯­è¨€çš„ç¼–è¯‘ç¨‹åºç¼–è¯‘è¿‡ï¼Œä½†å°šæœªç»è¿‡é“¾æ¥ç¨‹åºé“¾æ¥çš„ç›®æ ‡ä»£ç æ‰€æ„æˆçš„æ–‡ä»¶ã€‚å®ƒå±äºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚<br>(3) å¯æ‰§è¡Œæ–‡ä»¶<br>æŒ‡æŠŠç¼–è¯‘åæ‰€äº§ç”Ÿçš„ç›®æ ‡ä»£ç å†ç»è¿‡é“¾æ¥ç¨‹åºé“¾æ¥åæ‰€å½¢æˆçš„æ–‡ä»¶ã€‚</p>
</li>
<li><p><em>æŒ‰å­˜å–æ§åˆ¶å±æ€§åˆ†ç±»</em><br>æ ¹æ®ç³»ç»Ÿç®¡ç†å‘˜æˆ–ç”¨æˆ·æ‰€è§„å®šçš„å­˜å–æ§åˆ¶å±æ€§ï¼Œå¯å°†æ–‡ä»¶åˆ†ä¸ºä¸‰ç±»ï¼š<br>(1)åªæ‰§è¡Œæ–‡ä»¶<br>è¯¥ç±»æ–‡ä»¶åªå…è®¸è¢«æ ¸å‡†çš„ç”¨æˆ·è°ƒç”¨æ‰§è¡Œï¼Œæ—¢ä¸å…è®¸è¯»ï¼Œæ›´ä¸å…è®¸å†™ã€‚<br>(2) åªè¯»æ–‡ä»¶<br>è¯¥ç±»æ–‡ä»¶åªå…è®¸æ–‡ä»¶ä¸»åŠè¢«æ ¸å‡†çš„ç”¨æˆ·å»è¯»ï¼Œä½†ä¸å…è®¸å†™ã€‚<br>(3) è¯»å†™æ–‡ä»¶<br>è¿™æ˜¯æŒ‡å…è®¸æ–‡ä»¶ä¸»å’Œè¢«æ ¸å‡†çš„ç”¨æˆ·å»è¯»æˆ–å†™çš„æ–‡ä»¶ã€‚</p>
</li>
<li><p><em>æŒ‰ç»„ç»‡å½¢å¼å’Œå¤„ç†æ–¹å¼åˆ†ç±»</em></p>
<p>åˆ†ä¸ºæ™®é€šæ–‡ä»¶ï¼Œç›®å½•æ–‡ä»¶ï¼Œç‰¹æ®Šæ–‡ä»¶ã€‚</p>
</li>
</ul>
<p><em><strong>æ–‡ä»¶ç³»ç»Ÿæ¨¡å‹</strong></em></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_10-13-38.png"></p>
<p>â€‹	æ–‡ä»¶ç³»ç»Ÿç®¡ç†çš„å¯¹è±¡æœ‰ï¼š<strong>æ–‡ä»¶</strong>ï¼ˆä½œä¸ºæ–‡ä»¶ç®¡ç†çš„ç›´æ¥å¯¹è±¡ï¼‰ï¼Œ<strong>ç›®å½•</strong>ï¼ˆä¸ºäº†æ–¹ä¾¿ç”¨æˆ·å¯¹æ–‡ä»¶çš„å­˜å–å’Œæ£€ç´¢ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­é…ç½®ç›®å½•ï¼Œæ¯ä¸ªç›®å½•é¡¹ä¸­ï¼Œå¿…é¡»å«æœ‰æ–‡ä»¶ååŠè¯¥æ–‡ä»¶æ‰€åœ¨çš„ç‰©ç†åœ°å€ï¼Œå¯¹ç›®å½•çš„ç»„ç»‡å’Œç®¡ç†æ˜¯æ–¹ä¾¿ç”¨æˆ·å’Œæé«˜å¯¹æ–‡ä»¶å­˜å–é€Ÿåº¦çš„å…³é”®ï¼‰ï¼Œ<strong>ç£ç›˜ï¼ˆç£å¸¦ï¼‰å­˜å‚¨ç©ºé—´</strong>ï¼ˆæ–‡ä»¶å’Œç›®å½•å¿…å®šå ç”¨å­˜å‚¨ç©ºé—´ï¼Œå¯¹è¿™éƒ¨åˆ†ç©ºé—´çš„æœ‰æ•ˆç®¡ç†ï¼Œä¸ä»…èƒ½æé«˜å¤–å­˜çš„åˆ©ç”¨ç‡ï¼Œè€Œä¸”èƒ½æé«˜å¯¹æ–‡ä»¶çš„å­˜å–é€Ÿåº¦ï¼‰ã€‚</p>
<p>â€‹	ä¸ºæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿï¼Œæ–‡ä»¶ç³»ç»Ÿé€šå¸¸å‘ç”¨æˆ·æä¾›ä¸¤ç§ç±»å‹çš„æ¥å£ï¼š<br>(1) <strong>å‘½ä»¤æ¥å£</strong>ã€‚è¿™æ˜¯æŒ‡ä½œä¸ºç”¨æˆ·ä¸æ–‡ä»¶ç³»ç»Ÿäº¤äº’çš„æ¥å£ã€‚ ç”¨æˆ·å¯é€šè¿‡é”®ç›˜ç»ˆç«¯é”®å…¥å‘½ä»¤ï¼Œå–å¾—æ–‡ä»¶ç³»ç»Ÿçš„æœåŠ¡ã€‚<br>(2) <strong>ç¨‹åºæ¥å£</strong>ã€‚è¿™æ˜¯æŒ‡ä½œä¸ºç”¨æˆ·ç¨‹åºä¸æ–‡ä»¶ç³»ç»Ÿçš„æ¥å£ã€‚ ç”¨æˆ·ç¨‹åºå¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥å–å¾—æ–‡ä»¶ç³»ç»Ÿçš„æœåŠ¡ã€‚</p>
<p><em><strong>æ–‡ä»¶æ“ä½œ</strong></em></p>
<p>â€‹	ç”¨æˆ·é€šè¿‡æ–‡ä»¶ç³»ç»Ÿæä¾›çš„<strong>ç³»ç»Ÿè°ƒç”¨</strong>å®æ–½å¯¹æ–‡ä»¶çš„æ“ä½œã€‚æœ€åŸºæœ¬çš„æ–‡ä»¶æ“ä½œæœ‰ï¼šåˆ›å»ºæ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶ã€‚è¯»æ–‡ä»¶ã€å†™æ–‡ä»¶ã€æˆªæ–­æ–‡ä»¶å’Œè®¾ç½®æ–‡ä»¶çš„è¯»ï¼å†™ä½ç½®ã€‚</p>
<p>ã€€å½“å‰OSæ‰€æä¾›çš„å¤§å¤šæ•°å¯¹æ–‡ä»¶çš„æ“ä½œï¼Œå…¶è¿‡ç¨‹å¤§è‡´éƒ½æ˜¯è¿™æ ·ä¸¤æ­¥ï¼šé¦–å…ˆï¼Œæ£€ç´¢æ–‡ä»¶ç›®å½•æ¥æ‰¾åˆ°æŒ‡å®šæ–‡ä»¶çš„å±æ€§åŠå…¶åœ¨å¤–å­˜ä¸Šçš„ä½ç½®ï¼›ç„¶åï¼Œå¯¹æ–‡ä»¶å®æ–½ç›¸åº”çš„æ“ä½œï¼Œå¦‚è¯»&#x2F;å†™æ–‡ä»¶ç­‰ï¼Œå½“ç”¨æˆ·è¦æ±‚å¯¹ä¸€ä¸ªæ–‡ä»¶å®æ–½å¤šæ¬¡è¯»&#x2F;å†™æˆ–å…¶ä»–æ“ä½œæ—¶ï¼Œæ¯æ¬¡éƒ½è¦ä»æ£€ç´¢ç›®å½•å¼€å§‹ï¼Œä¸ºäº†é¿å…å¤šæ¬¡é‡å¤åœ°æ£€ç´¢ç›®å½•ï¼Œåœ¨å¤§å¤šæ•°OSä¸­éƒ½å¼•å…¥äº†æ‰“å¼€è¿™ä¸€æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚å¯¹æŸæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ“ä½œæ—¶ï¼Œå…ˆåˆ©ç”¨openç³»ç»Ÿè°ƒç”¨å°†è¯¥æ–‡ä»¶æ‰“å¼€ã€‚</p>
<p>ã€€<strong>æ‰“å¼€æ˜¯æŒ‡ç³»ç»Ÿå°†æŒ‡åæ–‡ä»¶çš„å±æ€§ï¼ˆåŒ…æ‹¬è¯¥æ–‡ä»¶åœ¨å¤–å­˜ä¸Šçš„ç‰©ç†ä½ç½®ï¼‰ä»å¤–å­˜æ‹·è´åˆ°å†…å­˜æ‰“å¼€æ–‡ä»¶è¡¨çš„ä¸€ä¸ªè¡¨ç›®ä¸­ï¼Œå¹¶å°†è¯¥è¡¨ç›®çš„ç¼–å·ï¼ˆç´¢å¼•ï¼‰è¿”å›ç»™ç”¨æˆ·</strong>ï¼Œä»¥åï¼Œå½“ç”¨æˆ·å†è¦æ±‚å¯¹è¯¥æ–‡ä»¶è¿›è¡Œæ“ä½œæ—¶ï¼Œä¾¿å¯åˆ©ç”¨ç³»ç»Ÿæ‰€è¿”å›çš„ç´¢å¼•å·å‘ç³»ç»Ÿæå‡ºæ“ä½œè¯·æ±‚ï¼Œç³»ç»Ÿä¾¿å¯ç›´æ¥åˆ©ç”¨è¯¥ç´¢å¼•åˆ°æ‰“å¼€æ–‡ä»¶è¡¨ä¸­å»æŸ¥æ‰¾ï¼Œä»è€Œé¿å…äº†å¯¹è¯¥æ–‡ä»¶çš„å†æ¬¡æ£€ç´¢ï¼Œå¦‚æœç”¨æˆ·ä¸å†éœ€è¦å¯¹è¯¥æ–‡ä»¶å®æ–½æ“ä½œï¼Œå¯åˆ©ç”¨å…³é—­ç³»ç»Ÿè°ƒç”¨æ¥å…³é—­æ­¤æ–‡ä»¶ï¼ŒOSå°†ä¼šæŠŠè¯¥æ–‡ä»¶ä»æ‰“å¼€æ–‡ä»¶è¡¨ä¸­çš„è¡¨ç›®ä¸Šåˆ é™¤æ‰ã€‚</p>
<p>æ–‡ä»¶æ“ä½œå®ä¾‹ï¼ˆLinuxï¼‰</p>
<blockquote>
<p>openï¼šæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶æŒ‡å®šè®¿é—®è¯¥æ–‡ä»¶çš„æ–¹å¼ï¼Œè°ƒç”¨æˆåŠŸåè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚<br>creatï¼šæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒï¼Œè°ƒç”¨æˆåŠŸåè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚<br>closeï¼šå…³é—­æ–‡ä»¶ï¼Œè¿›ç¨‹å¯¹æ–‡ä»¶æ‰€åŠ çš„é”å…¨éƒ½è¢«é‡Šæ”¾ã€‚<br>readï¼šä»æ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œè°ƒç”¨æˆåŠŸåè¿”å›è¯»å‡ºçš„å­—èŠ‚æ•°ã€‚<br>writeï¼šå‘æ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ï¼Œè°ƒç”¨æˆåŠŸåè¿”å›å†™å…¥çš„å­—èŠ‚æ•°ã€‚</p>
</blockquote>
<h2 id="æ–‡ä»¶çš„ç‰©ç†ç»“æ„"><a href="#æ–‡ä»¶çš„ç‰©ç†ç»“æ„" class="headerlink" title="æ–‡ä»¶çš„ç‰©ç†ç»“æ„"></a>æ–‡ä»¶çš„ç‰©ç†ç»“æ„</h2><p>ã€€å¯¹ä»»ä½•çš„æ–‡ä»¶ï¼Œéƒ½å­˜åœ¨ä»¥ä¸‹ä¸¤ç§å½¢å¼çš„ç»“æ„</p>
<p>ã€€â‘  <strong>æ–‡ä»¶çš„é€»è¾‘ç»“æ„</strong>ï¼Œè¿™æ˜¯ä»ç”¨æˆ·è§‚ç‚¹å‡ºå‘æ‰€è§‚å¯Ÿåˆ°çš„æ–‡ä»¶ç»„ç»‡å½¢å¼ï¼Œæ˜¯ç”¨æˆ·å¯ä»¥ç›´æ¥å¤„ç†çš„æ•°æ®åŠå…¶ç»“æ„ï¼Œç‹¬ç«‹äºæ–‡ä»¶çš„ç‰©ç†ç‰¹æ€§ï¼Œåˆç§°ä¸ºæ–‡ä»¶ç»„ç»‡ã€‚æ–‡ä»¶é€»è¾‘ç»“æ„çš„ç±»å‹ï¼šé¡ºåºæ–‡ä»¶ã€ç´¢å¼•æ–‡ä»¶ã€ç´¢å¼•é¡ºåºæ–‡ä»¶ã€‚</p>
<p>ã€€â‘¡ <strong>æ–‡ä»¶çš„ç‰©ç†ç»“æ„</strong>ï¼Œåˆç§°ä¸ºæ–‡ä»¶çš„å­˜å‚¨ç»“æ„ï¼Œæ˜¯æŒ‡æ–‡ä»¶åœ¨å¤–å­˜ä¸Šçš„å­˜å‚¨ç»„ç»‡å½¢å¼ï¼Œä¸ä»…ä¸å­˜å‚¨ä»‹è´¨çš„å­˜å‚¨æ€§èƒ½æœ‰å…³ï¼Œè¿˜ä¸å¤–å­˜åˆ†é…æ–¹å¼æœ‰å…³ã€‚ï¼ˆåˆ†ä¸ºé¡ºåºã€é“¾æ¥åŠç´¢å¼•ç»“æ„ï¼‰</p>
<p>â€‹	æ–‡ä»¶çš„ç‰©ç†ç»“æ„å³æ–‡ä»¶çš„å¤–å­˜åˆ†é…æ–¹å¼ï¼Œæ˜¯ä»ç³»ç»Ÿçš„è§’åº¦æ¥çœ‹æ–‡ä»¶ï¼Œä»æ–‡ä»¶åœ¨ç‰©ç†ä»‹è´¨ä¸Šçš„å­˜æ”¾æ–¹å¼æ¥ç ”ç©¶æ–‡ä»¶ã€‚è¦è€ƒè™‘çš„ä¸»è¦é—®é¢˜ï¼š å¦‚ä½•æœ‰æ•ˆåœ°åˆ©ç”¨å¤–å­˜ç©ºé—´ã€å¦‚ä½•æé«˜å¯¹æ–‡ä»¶çš„è®¿é—®é€Ÿåº¦ã€‚<br>ç›®å‰å¸¸ç”¨çš„å¤–å­˜åˆ†é…æ–¹æ³•ï¼š<br>ï¼ˆ1ï¼‰è¿ç»­åˆ†é…ï¼ˆé¡ºåºåˆ†é…ï¼‰ï¼&gt; é¡ºåºæ–‡ä»¶ç»“æ„<br>ï¼ˆ2ï¼‰é“¾æ¥åˆ†é…ï¼&gt; é“¾æ¥æ–‡ä»¶ç»“æ„<br>ï¼ˆ3ï¼‰ç´¢å¼•åˆ†é…ï¼&gt; ç´¢å¼•æ–‡ä»¶ç»“æ„ã€€</p>
<h3 id="è¿ç»­åˆ†é…"><a href="#è¿ç»­åˆ†é…" class="headerlink" title="è¿ç»­åˆ†é…"></a>è¿ç»­åˆ†é…</h3><p>ã€€è¿ç»­åˆ†é…è¦æ±‚ä¸ºæ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€ç»„ç›¸é‚»æ¥çš„ç›˜å—ï¼Œä¸€ç»„ç›˜å—åœ°å€å®šä¹‰äº†ç£ç›˜ä¸Šçš„ä¸€æ®µçº¿æ€§åœ°å€ã€‚é‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼æ—¶ï¼Œ<strong>æŠŠé€»è¾‘æ–‡ä»¶ä¸­çš„æ•°æ®é¡ºåºåœ°å­˜å‚¨åˆ°é‚»æ¥çš„å„ç‰©ç†ç›˜å—ä¸­ï¼Œè¿™æ ·æ‰€å½¢æˆçš„ç‰©ç†æ–‡ä»¶å¯ä»¥è¿›è¡Œé¡ºåºå­˜å–</strong>ã€‚æ–‡ä»¶ç›®å½•ä¸­ä¸ºæ¯ä¸ªæ–‡ä»¶å»ºç«‹ä¸€ä¸ªè¡¨é¡¹ï¼Œå…¶ä¸­è®°è½½æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªæ•°æ®å—åœ°å€åŠæ–‡ä»¶é•¿åº¦ã€‚å¯¹äºé¡ºåºæ–‡ä»¶ï¼Œè¿ç»­è¯»&#x2F;å†™å¤šä¸ªæ•°æ®å—å†…å®¹æ—¶ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚è¿™ç§åˆ†é…æ–¹å¼ä¿è¯äº†é€»è¾‘æ–‡ä»¶ä¸­çš„è®°å½•é¡ºåºä¸å­˜å‚¨å™¨ä¸­æ–‡ä»¶å ç”¨ç›˜å—çš„é¡ºåºçš„ä¸€è‡´æ€§ã€‚ä¸‹å›¾ä¸ºè¿ç»­åˆ†é…æ–¹å¼ï¼ˆå‡è®¾è®°å½•ä¸ç›˜å—ä¸€æ ·å¤§ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_10-36-44.png">ã€€ã€€</p>
<p>è¿ç»­åˆ†é…çš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>
<p>ã€€â‘  é¡ºåºè®¿é—®å®¹æ˜“ï¼Œå¯ä»¥éšæœºå­˜å–, èƒ½å¾ˆå¿«æ£€ç´¢æ–‡ä»¶ä¸­çš„ä¸€ä¸ªæ•°æ®å—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªæ•°æ®å—çš„åºå·ä¸ºxï¼Œéœ€è¦æ£€ç´¢æ–‡ä»¶çš„ç¬¬yå—ï¼Œåˆ™è¯¥æ•°æ®å—åœ¨å¤–å­˜ä¸­çš„ä½ç½®ä¸ºx+y-1ã€‚</p>
<p>ã€€â‘¡ é¡ºåºè®¿é—®é€Ÿåº¦å¿«ï¼Œç£å¤´ç§»åŠ¨è·ç¦»çŸ­ï¼Œæ•ˆç‡æœ€é«˜ã€‚</p>
<p>è¿ç»­åˆ†é…çš„ç¼ºç‚¹å¦‚ä¸‹ï¼š</p>
<p>ã€€â‘  è¦æ±‚åˆè¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œè¦ä¸ºæ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€æ®µè¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œè¿™æ ·ï¼Œå¯èƒ½äº§ç”Ÿè®¸å¤šç£ç›˜ç¢ç‰‡ï¼Œä¸¥é‡åœ°é™ä½äº†å¤–å­˜ç©ºé—´åˆ©ç”¨ç‡ã€‚è§£å†³æ–¹æ³•ï¼šç³»ç»Ÿå®šæœŸæˆ–ä¸å®šæœŸé‡‡ç”¨ç´§å‡‘æŠ€æœ¯ï¼Œå°†å°åˆ†åŒºåˆå¹¶ä¸ºå¤§çš„ã€è¿ç»­åˆ†åŒºï¼Œå°†æ–‡ä»¶å ç”¨ç©ºé—´åˆå¹¶åœ¨ä¸€èµ·ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_10-37-04.png"></p>
<p>ã€€â‘¡ å¿…é¡»äº‹å…ˆçŸ¥é“æ–‡ä»¶çš„é•¿åº¦ï¼Œäº‹å…ˆçŸ¥é“æ–‡ä»¶çš„é•¿åº¦ï¼Œç„¶åæ ¹æ®å…¶å¤§å°ï¼Œåœ¨å­˜å‚¨ç©ºé—´ä¸­æ‰¾å‡ºä¸€å—å…¶å¤§å°è¶³å¤Ÿçš„å­˜å‚¨åŒºï¼Œå°†æ–‡ä»¶è£…å…¥ï¼Œå¯¹äºåŠ¨æ€å¢é•¿çš„æ–‡ä»¶éå¸¸ä½æ•ˆã€‚<strong>ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜ï¼›ä¸åˆ©äºæ–‡ä»¶å°ºå¯¸çš„åŠ¨æ€å¢é•¿ã€‚</strong></p>
<h3 id="é“¾æ¥åˆ†é…"><a href="#é“¾æ¥åˆ†é…" class="headerlink" title="é“¾æ¥åˆ†é…"></a>é“¾æ¥åˆ†é…</h3><p>ã€€å¦‚æœå°†ä¸€ä¸ªé€»è¾‘æ–‡ä»¶å­˜å‚¨åˆ°å¤–å­˜ä¸Šï¼Œå¹¶ä¸è¦æ±‚ä¸ºæ•´ä¸ªæ–‡ä»¶åˆ†é…ä¸€å—è¿ç»­çš„ç©ºé—´ï¼Œè€Œæ˜¯å¯ä»¥å°†æ–‡ä»¶è£…åˆ°å¤šä¸ªç¦»æ•£çš„ç›˜å—ä¸­ï¼Œé‡‡ç”¨é“¾æ¥åˆ†é…æ–¹å¼ï¼Œå¯é€šè¿‡åœ¨æ¯ä¸ªç›˜å—ä¸Šçš„é“¾æ¥æŒ‡é’ˆï¼Œ<strong>å°†åŒå±äºä¸€ä¸ªæ–‡ä»¶çš„å¤šä¸ªç¦»æ•£ç›˜å—é“¾æ¥æˆä¸€ä¸ªé“¾è¡¨</strong>ï¼ŒæŠŠè¿™æ ·å½¢æˆçš„ç‰©ç†æ–‡ä»¶ç§°ä¸ºé“¾æ¥æ–‡ä»¶ã€‚é“¾æ¥åˆ†é…é‡‡å–ç¦»æ•£åˆ†é…æ–¹å¼ï¼Œæ¶ˆé™¤äº†å¤–éƒ¨ç¢ç‰‡ï¼Œæ•…è€Œæ˜¾è‘—åœ°æé«˜äº†å¤–å­˜ç©ºé—´çš„åˆ©ç”¨ç‡ï¼Œå¹¶ä¸”å¯¹æ–‡ä»¶çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ååˆ†æ–¹ä¾¿ã€‚é“¾æ¥æ–¹å¼å¯åˆ†ä¸º<em><strong>éšå¼é“¾æ¥å’Œæ˜¾ç¤ºé“¾æ¥</strong></em>ä¸¤ç§å½¢å¼ã€‚</p>
<p>ã€€â‘  <strong>éšå¼é“¾æ¥</strong>ï¼Œ åœ¨æ–‡ä»¶ç›®å½•çš„æ¯ä¸ªç›®å½•é¡¹ä¸­ï¼Œéƒ½é¡»å«æœ‰<strong>æŒ‡å‘é“¾æ¥æ–‡ä»¶ç¬¬ä¸€ä¸ªç›˜å—å’Œæœ€åä¸€ä¸ªç›˜å—çš„æŒ‡é’ˆ</strong>ã€‚<strong>æ¯ä¸ªç›˜å—ä¸­éƒ½å«æœ‰ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªç›˜å—çš„æŒ‡é’ˆ</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_10-37-35.png"></p>
<p>ã€€ç¬¬9ä¸ªç›˜å—æŒ‡å‘ç¬¬16ä¸ªç›˜å—ï¼Œç¬¬16ä¸ªç›˜å—æŒ‡å‘ç¬¬1ä¸ªç›˜å—ï¼Œç¬¬1ä¸ªç›˜å—æŒ‡å‘ç¬¬10ä¸ªç›˜å—ï¼Œç¬¬10ä¸ªç›˜å—æŒ‡å‘ç¬¬25ä¸ªç›˜å—ï¼ˆç»“æŸå—ï¼‰ã€‚ã€€ã€€</p>
<p>ã€€éšå¼é“¾æ¥åˆ†é…çš„ä¸»è¦é—®é¢˜åœ¨äºï¼šå…¶åªé€‚åˆäºé¡ºåºè®¿é—®ï¼Œå¯¹éšæœºè®¿é—®çš„æ•ˆç‡æå…¶ä½æ•ˆã€‚å¦‚æœè¦è®¿é—®æ–‡ä»¶æ‰€åœ¨çš„ç¬¬ i ä¸ªç›˜å—ï¼Œåˆ™å¿…é¡»å…ˆè¯»å‡ºæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç›˜å—â€¦â€¦ï¼Œå°±è¿™æ ·é¡ºåºåœ°æŸ¥æ‰¾ç›´è‡³ç¬¬ i å—ã€‚æ­¤å¤–ï¼Œå…¶å¯é æ€§è¾ƒå·®ï¼Œä»»ä½•ä¸€ä¸ªæŒ‡é’ˆå‡ºç°é—®é¢˜ï¼Œéƒ½ä¼šå¯¼è‡´æ•´ä¸ªé“¾çš„æ–­å¼€ã€‚å¯ä»¥å°†å‡ ä¸ªç›˜å—ç»„æˆä¸€ä¸ªç°‡ï¼Œç„¶åä»¥ç°‡ä¸ºå•ä½è¿›è¡Œåˆ†é…ï¼Œä¼šå‡å°‘æŸ¥æ‰¾æŒ‡å®šå—çš„æ—¶é—´ï¼Œä½†æ˜¯ä¼šå¢åŠ å†…éƒ¨ç¢ç‰‡ã€‚</p>
<p>ã€€â‘¡ <strong>æ˜¾ç¤ºé“¾æ¥</strong>ï¼ŒæŠŠç”¨äºé“¾æ¥æ–‡ä»¶å„ç‰©ç†å—çš„æŒ‡é’ˆï¼Œæ˜¾å¼çš„æ”¾åœ¨å†…å­˜çš„ä¸€å¼ é“¾æ¥è¡¨ä¸­ï¼Œåœ¨æ•´ä¸ªç£ç›˜ä»…è®¾ç½®ä¸€å¼ <strong>æ–‡ä»¶åˆ†é…è¡¨</strong>ï¼ˆFATï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_11-01-31.png"></p>
<p>ã€€è¡¨çš„åºå·ä»0å¼€å§‹ï¼Œç›´è‡³N-1ï¼ŒNä¸ºç›˜å—æ€»æ•°ï¼Œåœ¨æ¯ä¸ªè¡¨é¡¹ä¸­å­˜æ”¾é“¾æ¥æŒ‡é’ˆï¼Œå³ä¸‹ä¸€ä¸ªç›˜å—å·ï¼Œåœ¨è¯¥è¡¨ä¸­ï¼Œå‡¡æ˜¯å±äºæŸä¸€æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç›˜å—å·ï¼Œæˆ–è€…è¯´æ˜¯æ¯ä¸€æ¡é“¾çš„é“¾é¦–æŒ‡é’ˆæ‰€å¯¹åº”çš„ç›˜å—å·ï¼Œå‡ä½œä¸ºæ–‡ä»¶åœ°å€è¢«å¡«å…¥ç›¸åº”çš„æ–‡ä»¶çš„FCB(File Control Block)çš„<strong>ç‰©ç†åœ°å€</strong>å­—æ®µä¸­ï¼Œç”±äºæŸ¥æ‰¾è®°å½•çš„è¿‡ç¨‹æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œçš„ï¼Œå› è€Œæ<strong>é«˜äº†æ£€ç´¢é€Ÿåº¦ï¼Œå‡å°‘äº†è®¿é—®ç£ç›˜çš„æ¬¡æ•°</strong>ï¼Œç”±äºåˆ†é…ç»™æ–‡ä»¶çš„æ‰€æœ‰ç›˜å—å·éƒ½åœ¨è¯¥è¡¨ä¸­ï¼Œæ•…æŠŠè¯¥è¡¨ç§°ä¸ºæ–‡ä»¶åˆ†é…è¡¨FATï¼ˆFile Allocation Tableï¼‰ã€‚</p>
<ul>
<li>é“¾æ¥åˆ†é…ä¼˜ç‚¹<br>1ã€æ— å¤–éƒ¨ç¢ç‰‡ï¼Œæ²¡æœ‰ç£ç›˜ç©ºé—´æµªè´¹<br>2ã€æ— éœ€äº‹å…ˆçŸ¥é“æ–‡ä»¶å¤§å°ã€‚æ–‡ä»¶åŠ¨æ€å¢é•¿æ—¶ï¼Œå¯åŠ¨æ€åˆ†é…ç©ºé—²ç›˜å—ã€‚å¯¹æ–‡ä»¶çš„å¢ã€åˆ ã€æ”¹ååˆ†æ–¹ä¾¿ã€‚</li>
<li>ç¼ºç‚¹<br>  1ã€<em><strong>ä¸èƒ½æ”¯æŒé«˜æ•ˆéšæœº&#x2F;ç›´æ¥è®¿é—®ï¼Œä»…é€‚åˆäºé¡ºåºå­˜å–</strong></em><br>  2ã€éœ€ä¸ºæŒ‡é’ˆåˆ†é…ç©ºé—´ã€‚ï¼ˆéšå¼é“¾æ¥ï¼‰<br>  3ã€å¯é æ€§è¾ƒä½ï¼ˆæŒ‡é’ˆä¸¢å¤±&#x2F;æŸåï¼‰<br>  4ã€<em><strong>æ–‡ä»¶åˆ†é…è¡¨FATï¼ˆæ˜¾å¼é“¾æ¥ï¼‰ï¼ŒFATéœ€å ç”¨è¾ƒå¤§çš„å†…å­˜ç©ºé—´</strong></em>ã€‚</li>
</ul>
<h3 id="ç´¢å¼•åˆ†é…"><a href="#ç´¢å¼•åˆ†é…" class="headerlink" title="ç´¢å¼•åˆ†é…"></a>ç´¢å¼•åˆ†é…</h3><p>â€‹	äº‹å®ä¸Šï¼Œåœ¨æ‰“å¼€æŸä¸ªæ–‡ä»¶æ—¶ï¼Œåªéœ€è¦æŠŠè¯¥æ–‡ä»¶å ç”¨çš„ç›˜å—å·çš„ç¼–å·è°ƒå…¥å†…å­˜å³å¯ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦æŠŠæ•´ä¸ªFATè°ƒå…¥å†…å­˜ï¼Œä¸ºæ­¤ï¼Œåº”è¯¥<strong>å°†æ¯ä¸ªæ–‡ä»¶æ‰€å¯¹åº”çš„ç›˜å—å·é›†ä¸­åœ°æ”¾åœ¨ä¸€èµ·</strong>ï¼Œç´¢å¼•åˆ†é…æ–¹å¼å°±æ˜¯åŸºäºè¿™ç§æƒ³æ³•æ‰€å½¢æˆçš„ä¸€ç§åˆ†é…æ–¹å¼ã€‚<em>å…¶ä¸ºæ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€ä¸ªç´¢å¼•å—ï¼ˆè¡¨ï¼‰ï¼Œå†æŠŠåˆ†é…ç»™è¯¥æ–‡ä»¶çš„æ‰€æœ‰ç›˜å—å·éƒ½è®°å½•åœ¨è¯¥ç´¢å¼•å—ä¸­ï¼Œå› è€Œè¯¥ç´¢å¼•å—å°±æ˜¯ä¸€ä¸ªå«æœ‰è®¸å¤šç£ç›˜å—å·çš„æ•°ç»„</em>ã€‚åœ¨å»ºç«‹ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œåªéœ€è¦åœ¨ä¸ºä¹‹å»ºç«‹çš„ç›®å½•é¡¹ä¸­å¡«ä¸ŠæŒ‡å‘è¯¥ç´¢å¼•å—çš„æŒ‡é’ˆï¼ˆå•çº§ç´¢å¼•ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_11-02-23.png"></p>
<p>ã€€ç´¢å¼•æ–¹å¼æ”¯æŒç›´æ¥è®¿é—®ï¼Œå¯åœ¨ç´¢å¼•å—ä¸­ç›´æ¥æ‰¾åˆ°ç¬¬iä¸ªç›˜å—ï¼Œç´¢å¼•æ–¹å¼ä¹Ÿä¸ä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ï¼Œå½“æ–‡ä»¶è¾ƒå¤§æ—¶ï¼Œç´¢å¼•åˆ†é…æ–¹å¼è¦ä¼˜äºé“¾æ¥åˆ†é…æ–¹å¼ã€‚å…¶ä¸»è¦é—®é¢˜åœ¨äºï¼šå¤§æ–‡ä»¶ç´¢å¼•é¡¹è¾ƒå¤šï¼Œå¯èƒ½ä½¿ä¸€ä¸ªæ•°æ®å—å®¹çº³ä¸äº†ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰åˆ†åŒºçš„ç´¢å¼•ã€‚å¯èƒ½éœ€è¦èŠ±è´¹è¾ƒå¤šçš„å¤–å­˜ç©ºé—´ï¼Œæ¯å½“å»ºç«‹ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œä¾¿é¡»ä¸ºä¹‹åˆ†é…ä¸€ä¸ªç´¢å¼•å—ï¼Œå°†åˆ†é…ç»™è¯¥æ–‡ä»¶çš„æ‰€æœ‰ç›˜å—å·è®°å½•å…¶ä¸­ã€‚å¯¹äºå°æ–‡ä»¶è€Œè¨€ï¼Œç´¢å¼•å—çš„åˆ©ç”¨ç‡éå¸¸ä½ã€‚</p>
<p>ã€€å½“æ–‡ä»¶å¤ªå¤§ï¼Œå…¶ä¸€çº§ç´¢å¼•å—å¤ªå¤šæ—¶ï¼Œè¿™ç§æ–¹æ³•æ˜¯ä½æ•ˆçš„ã€‚æ­¤æ—¶ï¼Œåº”ä¸ºè¿™äº›ç´¢å¼•å—å†å»ºç«‹ä¸€çº§ç´¢å¼•ï¼Œå½¢æˆ<strong>ä¸¤çº§ç´¢å¼•åˆ†é…</strong>æ–¹å¼ã€‚å³ç³»ç»Ÿå†åˆ†é…ä¸€ä¸ªç´¢å¼•å—ï¼Œä½œä¸ºç¬¬ä¸€çº§ç´¢å¼•çš„ç´¢å¼•å—ï¼Œå°†ç¬¬ä¸€å—ã€ç¬¬äºŒå—â€¦â€¦ç­‰ç´¢å¼•å—çš„ç›˜å—å·å¡«å…¥åˆ°æ­¤ç´¢å¼•è¡¨ä¸­ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_11-02-32.png"></p>
<p>ã€€åœ¨äºŒçº§ç´¢å¼•åˆ†é…æ–¹å¼ä¸‹ï¼Œè‹¥æ¯ä¸ªç›˜å—çš„å¤§å°ä¸º1KBï¼Œæ¯ä¸ªç›˜å—å·å 4ä¸ªå­—èŠ‚ï¼Œåˆ™åœ¨ä¸€ä¸ªç´¢å¼•å—å¯ä»¥å­˜æ”¾256ä¸ªç›˜å—å·ï¼Œè¿™æ ·ï¼Œåœ¨ä¸¤çº§ç´¢å¼•æ—¶ï¼Œæœ€å¤šå¯ä»¥åŒ…æ‹¬å­˜æ”¾æ–‡ä»¶çš„ç›˜å—å·æ€»æ•°ä¸º64K(256 * 256)ä¸ªç›˜å—å·ï¼Œæ‰€å…è®¸æ–‡ä»¶æœ€å¤§é•¿åº¦ä¸º64MBï¼Œè‹¥ç›˜å—å¤§å°ä¸º4KBï¼Œåˆ™ä¸€çº§ç´¢å¼•çš„æœ€å¤§æ–‡ä»¶å¤§å°ä¸º4MBï¼ŒäºŒçº§ç´¢å¼•çš„æœ€å¤§æ–‡ä»¶å¤§å°ä¸º4GBã€‚</p>
<p>ã€€â‘£ <strong>æ··åˆç´¢å¼•åˆ†é…æ–¹å¼</strong>ï¼Œå°†å¤šç§ç´¢å¼•åˆ†é…æ–¹å¼ç›¸ç»“åˆè€Œå½¢æˆçš„ä¸€ç§åˆ†é…æ–¹å¼ï¼Œå¦‚<strong>ç›´æ¥åœ°å€</strong>ï¼ˆåœ¨ç´¢å¼•ç»“ç‚¹ä¸­è®¾ç½®10ä¸ªç›´æ¥åœ°å€é¡¹ï¼Œæ¯é¡¹ä¸­æ‰€å­˜æ”¾çš„æ˜¯è¯¥æ–‡ä»¶æ•°æ®æ‰€åœ¨ç›˜å—çš„ç›˜å—å·ï¼Œå‡å¦‚æ¯ä¸ªç›˜å—å¤§å°ä¸º4KBï¼Œå½“æ–‡ä»¶ä¸å¤§äº40KBæ—¶ï¼Œå¯ä»¥ç›´æ¥ä»ç´¢å¼•ç»“ç‚¹ä¸­è¯»å‡ºè¯¥æ–‡ä»¶çš„å…¨éƒ¨ç›˜å·ï¼‰ï¼Œ<strong>ä¸€æ¬¡é—´æ¥åœ°å€</strong>ï¼ˆåˆ©ç”¨ç´¢å¼•ç»“ç‚¹ä¸­çš„åœ°å€é¡¹æ¥æä¾›ä¸€æ¬¡é—´æ¥åœ°å€ï¼Œå…¶å®è´¨å°±æ˜¯ä¸€çº§ç´¢å¼•åˆ†é…æ–¹å¼ï¼Œå¯å­˜æ”¾1Kä¸ªç›˜å—å·ï¼Œå…è®¸æœ€å¤§æ–‡ä»¶ä¸º4MBï¼‰ï¼Œ<strong>å¤šæ¬¡é—´æ¥åœ°å€</strong>ï¼ˆå½“æ–‡ä»¶å¤§äº4MB + 40KBæ—¶ï¼Œç³»ç»Ÿé‡‡ç”¨äºŒæ¬¡é—´å€åˆ†é…æ–¹å¼ï¼Œå…¶å®è´¨æ˜¯ä¸¤çº§ç´¢å¼•åˆ†é…æ–¹å¼ï¼Œé‡‡ç”¨äºŒæ¬¡é—´å€çš„æœ€å¤§æ–‡ä»¶å¤§å°ä¸º4GBï¼ŒåŒç†ï¼Œå¯é‡‡ç”¨ä¸‰æ¬¡é—´æ¥åœ°å€ï¼Œå…è®¸æ–‡ä»¶æœ€å¤§å¤§å°ä¸º4TBï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_11-31-01.png"></p>
<h2 id="æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†"><a href="#æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†" class="headerlink" title="æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†"></a>æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†</h2><p>æ–‡ä»¶ç®¡ç†è¦è§£å†³çš„é‡è¦é—®é¢˜ä¹‹ä¸€æ˜¯å¦‚ä½•ä¸º<strong>æ–°åˆ›å»ºçš„æ–‡ä»¶</strong>åˆ†é…å­˜å‚¨ç©ºé—´ã€‚<br>å­˜å‚¨ç©ºé—´çš„<em><strong>åŸºæœ¬åˆ†é…å•ä½æ˜¯ç£ç›˜å—</strong></em>ã€‚<br>å…¶åˆ†é…æ–¹æ³•ä¸å†…å­˜çš„åˆ†é…æœ‰è®¸å¤šç›¸ä¼¼ä¹‹å¤„ï¼Œå³åŒæ ·å¯é‡‡å–<em>è¿ç»­åˆ†é…æ–¹å¼æˆ–ç¦»æ•£åˆ†é…æ–¹å¼</em>ã€‚<br>ç³»ç»Ÿåº”ä¸ºåˆ†é…å­˜å‚¨ç©ºé—´è€Œè®¾ç½®ç›¸åº”çš„æ•°æ®ç»“æ„ï¼›å…¶æ¬¡ï¼Œç³»ç»Ÿåº”æä¾›å¯¹å­˜å‚¨ç©ºé—´è¿›è¡Œåˆ†é…å’Œå›æ”¶çš„æ‰‹æ®µã€‚</p>
<p>æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†æ–¹æ³•ï¼š</p>
<ul>
<li>ç©ºé—²åˆ†åŒºè¡¨</li>
<li>ç©ºé—²é“¾è¡¨æ³•</li>
<li>ä½ç¤ºå›¾</li>
<li>æˆç»„é“¾æ¥æ³•</li>
</ul>
<h3 id="ç©ºé—²åˆ†åŒºè¡¨"><a href="#ç©ºé—²åˆ†åŒºè¡¨" class="headerlink" title="ç©ºé—²åˆ†åŒºè¡¨"></a>ç©ºé—²åˆ†åŒºè¡¨</h3><p>ã€€ç©ºé—²è¡¨æ³•å±äº<strong>è¿ç»­åˆ†é…æ–¹å¼</strong>ï¼Œå®ƒä¸å†…å­˜çš„åŠ¨æ€åˆ†é…æ–¹å¼é›·åŒï¼Œå®ƒä¸ºæ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œå³<strong>ç³»ç»Ÿä¹Ÿä¸ºå¤–å­˜ä¸Šæ‰€æœ‰ç©ºé—²åŒºå»ºç«‹ä¸€å¼ ç©ºé—²è¡¨ï¼Œæ¯ä¸ªç©ºé—²åŒºå¯¹åº”äºä¸€ä¸ªç©ºé—²è¡¨é¡¹</strong>ï¼Œå…¶ä¸­åŒ…æ‹¬è¡¨é¡¹åºå·ã€è¯¥ç©ºé—²åŒºçš„ç¬¬ä¸€ä¸ªç›˜å—å·ã€è¯¥åŒºçš„ç©ºé—²ç›˜å—å·ç­‰ä¿¡æ¯ï¼Œå†å°†æ‰€æœ‰ç©ºé—²åŒºæŒ‰å…¶èµ·å§‹ç›˜å—å·é€’å¢æ’åˆ—ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_11-39-03.png"></p>
<p>ã€€é€‚åˆäº<em><strong>å¯å˜å¤§å°åˆ†åŒºçš„è¿ç»­åˆ†é…</strong></em>æ–¹å¼ã€‚ä¸ºæ–‡ä»¶åˆ†é…å­˜å‚¨ç©ºé—´æ—¶ï¼Œé¦–å…ˆé¡ºåºæŸ¥æ‰¾ç©ºé—²åˆ†<br>åŒºè¡¨ä¸­çš„å„ä¸ªè¡¨é¡¹ï¼Œç›´è‡³æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§å°é€‚åˆçš„ç©ºé—²åˆ†åŒºã€‚å¯ä»¥é‡‡ç”¨é¦–æ¬¡é€‚åº”åˆ†é…ç®—æ³•ã€æœ€ä½³é€‚åº”åˆ†é…ç®—æ³•ç­‰ã€‚ç„¶åï¼Œå°†è¯¥åˆ†åŒºåˆ†é…ç»™æ–‡ä»¶ï¼ŒåŒæ—¶ä¿®æ”¹ç©ºé—²åˆ†åŒºè¡¨ï¼Œåˆ é™¤ç›¸åº”è¡¨é¡¹ã€‚å½“åˆ é™¤æ–‡ä»¶é‡Šæ”¾å‡ºç©ºé—´æ—¶ï¼Œç³»ç»Ÿå›æ”¶å…¶å­˜å‚¨ç©ºé—´ï¼Œåˆå¹¶ç›¸é‚»ç©ºé—²åˆ†åŒº.ç³»ç»Ÿåœ¨å¯¹ç”¨æˆ·æ‰€é‡Šæ”¾çš„å­˜å‚¨ç©ºé—´è¿›è¡Œå›æ”¶æ—¶ï¼Œä¹Ÿé‡‡å–ç±»ä¼¼äºå†…å­˜å›æ”¶çš„æ–¹æ³•ï¼Œå³è€ƒè™‘å›æ”¶åŒºæ˜¯å¦ä¸ç©ºé—²è¡¨ä¸­æ’å…¥ç‚¹çš„å‰åŒºå’ŒååŒºç›¸é‚»æ¥ï¼Œå¯¹ç›¸é‚»æ¥è€…åº”è¯¥äºˆä»¥åˆå¹¶ã€‚<em><strong>å¯¹äº¤æ¢åˆ†åŒºä¸€èˆ¬éƒ½é‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ã€‚å½“æ–‡ä»¶è¾ƒå°æ—¶ï¼Œé‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ï¼Œå½“æ–‡ä»¶è¾ƒå¤§æ—¶ï¼Œå¯é‡‡ç”¨ç¦»æ•£åˆ†é…æ–¹å¼ã€‚</strong></em></p>
<h3 id="ç©ºé—²é“¾è¡¨æ³•"><a href="#ç©ºé—²é“¾è¡¨æ³•" class="headerlink" title="ç©ºé—²é“¾è¡¨æ³•"></a>ç©ºé—²é“¾è¡¨æ³•</h3><p>ã€€ç©ºé—²é“¾è¡¨æ³•æ˜¯å°†æ‰€æœ‰ç©ºé—²ç›˜åŒºæ‹‰æˆä¸€æ¡ç©ºé—²é“¾ã€‚æ ¹æ®æ„æˆé“¾æ‰€ç”¨åŸºæœ¬å…ƒç´ çš„ä¸åŒï¼ŒæŠŠé“¾è¡¨åˆ†æˆä¸¤ç§å½¢å¼ï¼Œç©ºé—²ç›˜å—é“¾å’Œç©ºé—²ç›˜åŒºé“¾ã€‚</p>
<p>ã€€â‘  ç©ºé—²ç›˜å—é“¾ï¼Œè¿™æ˜¯å°†ç£ç›˜ä¸Šçš„æ‰€æœ‰ç©ºé—²ç©ºé—´ï¼Œ<em><strong>ä»¥ç›˜å—ä¸ºå•ä½æ‹‰æˆä¸€æ¡é“¾</strong></em>ï¼Œå½“ç”¨æˆ·å› åˆ›å»ºæ–‡ä»¶è€Œè¯·æ±‚åˆ†é…å­˜å‚¨ç©ºé—´æ—¶ï¼Œç³»ç»Ÿä»é“¾é¦–å¼€å§‹ï¼Œä¾æ¬¡æ‘˜ä¸‹é€‚å½“æ•°ç›®çš„ç©ºé—²ç›˜å—åˆ†é…ç»™ç”¨æˆ·ï¼Œå½“åˆ é™¤æ–‡ä»¶è€Œé‡Šæ”¾ç©ºé—´æ—¶ï¼Œç³»ç»Ÿå°†å›æ”¶çš„ç›˜å—ä¾æ¬¡æ’å…¥ç©ºé—²ç›˜å—é“¾çš„æœ«å°¾ï¼Œå…¶ä¼˜ç‚¹æ˜¯ç”¨äºåˆ†é…å’Œå›æ”¶ä¸€ä¸ªç›˜å—çš„è¿‡ç¨‹ç®€å•ï¼Œä½†åœ¨ä¸ºæ–‡ä»¶åˆ†é…ç›˜å—æ—¶ï¼Œå¯èƒ½è¦é‡å¤æ“ä½œå¤šæ¬¡ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_11-40-19.png"></p>
<p>ã€€â‘¡ ç©ºé—²ç›˜åŒºé“¾ï¼Œè¿™æ˜¯å°†ç£ç›˜ä¸Šçš„æ‰€æœ‰ç©ºé—²ç›˜åŒºï¼ˆæ¯ä¸ªç›˜åŒºå¯åŒ…å«è‹¥å¹²ä¸ªç›˜å—ï¼‰æ‹‰æˆä¸€æ¡é“¾ï¼Œåœ¨æ¯ä¸ªç›˜åŒºä¸Šé™¤äº†å«æœ‰åªæ˜¯ä¸‹ä¸€ä¸ªç©ºé—²ç›˜åŒºçš„æŒ‡é’ˆå¤–ï¼Œè¿˜åº”æœ‰èƒ½æŒ‡æ˜æœ¬ç›˜åŒºå¤§å°ï¼ˆç›˜å—æ•°ï¼‰çš„ä¿¡æ¯ã€‚ç›˜åŒºåˆ†é…ä¸å†…å­˜çš„åŠ¨æ€åˆ†é…ç±»ä¼¼ï¼Œå¯é‡‡ç”¨é¦–æ¬¡é€‚åº”ç®—æ³•ï¼Œåœ¨å›æ”¶ç›˜åŒºæ—¶ï¼ŒåŒæ ·ä¹Ÿè¦å°†å›æ”¶åŒºå’Œç›¸é‚»æ¥çš„ç©ºé—²ç›˜åŒºç›¸åˆå¹¶ï¼Œåœ¨é‡‡ç”¨é¦–æ¬¡é€‚åº”ç®—æ³•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨æ˜¾å¼é“¾æ¥æ³•æé«˜æ£€ç´¢é€Ÿåº¦ï¼Œåœ¨å†…å­˜ä¸­ä¸ºç©ºé—²ç›˜åŒºå»ºç«‹ä¸€å¼ é“¾è¡¨ã€‚æ¯ä¸ªåˆ†åŒºç»“ç‚¹å†…å®¹ï¼šèµ·å§‹ç›˜å—å·ã€ç›˜å—æ•°ã€æŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—²ç›˜åŒºçš„æŒ‡é’ˆã€‚</p>
<p>â€‹	å¯èƒ½çš„é—®é¢˜ï¼š</p>
<p>â€‹	ä¸€æ®µæ—¶é—´ä»¥åï¼Œå¯èƒ½ä¼šä½¿ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­åŒ…å«å¤ªå¤šå°åˆ†åŒºï¼Œä½¿æ–‡ä»¶åˆ†é…åˆ°çš„å­˜å‚¨ç©ºé—´è¿‡åˆ†ç¦»æ•£ã€‚åˆ é™¤ä¸€ä¸ªç”±è®¸å¤šç¦»æ•£å°åˆ†åŒºç»„æˆçš„æ–‡ä»¶æ—¶ï¼Œå°†å›æ”¶çš„å°åˆ†åŒºé“¾æ¥åˆ°ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚è‹¥ä¸€ä¸ªæ–‡ä»¶ç”³è¯·è¿ç»­å­˜å‚¨ç©ºé—´ï¼Œåˆ™éœ€è¦èŠ±è´¹è¾ƒé•¿çš„æ—¶é—´æŸ¥æ‰¾ç›¸é‚»çš„ç©ºé—²åˆ†åŒºã€‚å› æ­¤ï¼Œè¿™ç§ç©ºé—²ç©ºé—´ç»„ç»‡æ–¹æ³•<em><strong>é€‚åˆäºéè¿ç»­å­˜å‚¨</strong></em>æ–‡ä»¶ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_11-53-58.png"></p>
<h3 id="ä½ç¤ºå›¾"><a href="#ä½ç¤ºå›¾" class="headerlink" title="ä½ç¤ºå›¾"></a>ä½ç¤ºå›¾</h3><p>ã€€åˆ©ç”¨äºŒè¿›åˆ¶çš„ä¸€ä½è¡¨ç¤ºç£ç›˜ä¸­çš„ä¸€ä¸ªç›˜å—çš„ä½¿ç”¨æƒ…å†µï¼Œå½“å…¶å€¼ä¸º0æ—¶ï¼Œè¡¨ç¤ºå¯¹åº”çš„ç›˜å—ç©ºé—²ï¼Œä¸º1æ—¶ï¼Œè¡¨ç¤ºå·²ç»åˆ†é…ï¼Œç£ç›˜ä¸Šçš„æ‰€æœ‰ç›˜å—éƒ½æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸ä¹‹å¯¹åº”ï¼Œè¿™æ ·ï¼Œç”±æ‰€æœ‰ç›˜å—æ‰€å¯¹åº”çš„ä½æ„æˆä¸€ä¸ªé›†åˆï¼Œç§°ä¸º<strong>ä½ç¤ºå›¾</strong>ï¼Œé€šå¸¸å¯ç”¨mÃ—nä¸ªä½æ•°æ¥æ„æˆä½ç¤ºå›¾ï¼Œå¹¶ä½¿m * nç­‰äºç£ç›˜çš„æ€»å—æ•°ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_11-39-38.png"></p>
<p>ã€€å¯¹äºç›˜å—çš„åˆ†é…åˆ†ä¸ºå¦‚ä¸‹ä¸‰æ­¥</p>
<p>ã€€â‘  <strong>é¡ºåºæ‰«æä½ç¤ºå›¾</strong>ï¼Œä»ä¸­æ‰¾å‡ºä¸€ä¸ªæˆ–ä¸€ç»„å€¼ä¸º0çš„äºŒè¿›åˆ¶ä½ã€‚</p>
<p>ã€€â‘¡ å°†æ‰€æ‰¾åˆ°çš„ä¸€ä¸ªæˆ–ä¸€ç»„äºŒè¿›åˆ¶ä½è½¬æ¢æˆä¸ä¹‹ç›¸åº”çš„ç›˜å—å·ã€‚</p>
<p>â€‹	å‡å®šæ‰¾åˆ°çš„å…¶å€¼ä¸ºâ€œ0â€çš„äºŒè¿›åˆ¶ä½ä½äºä½ç¤ºå›¾çš„ç¬¬i è¡Œã€ç¬¬jåˆ—ï¼Œåˆ™å…¶ç›¸åº”çš„ç›˜å—å·æŒ‰å¼è®¡ç®—ï¼šb &#x3D; n( i - 1) + j</p>
<p>ã€€â‘¢ ä¿®æ”¹ä½ç¤ºå›¾ï¼Œä»¤map[i,j]&#x3D;1ã€‚</p>
<p>ã€€å¯¹äºç›˜å—çš„å›æ”¶åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥</p>
<p>ã€€â‘  å°†å›æ”¶ç›˜å—çš„ç›˜å—å·è½¬æ¢æˆä½ç¤ºå›¾ä¸­çš„è¡Œå·å’Œåˆ—å·ã€‚è½¬æ¢å…¬å¼ä¸ºï¼š</p>
<p>â€‹	i &#x3D; (b - 1)DIV n + 1<br>â€‹	j &#x3D; (b - 1)MOD n + 1</p>
<p>ã€€â‘¡ ä¿®æ”¹ä½ç¤ºå›¾ï¼Œä»¤map[i,j] &#x3D;0ã€‚</p>
<p>ã€€æ­¤æ–¹æ³•çš„ä¼˜ç‚¹åœ¨äºä»ä½ç¤ºå›¾ä¸­å¾ˆå®¹æ˜“æ‰¾åˆ°ä¸€ä¸ªæˆ–ä¸€ç»„è¿ç»­çš„ç©ºé—²åˆ†åŒºï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°8ä¸ªç›¸é‚»æ¥çš„ç©ºé—²ç›˜å—ï¼Œè¿™åªéœ€åœ¨ä½ç¤ºå›¾ä¸­æ‰¾å‡º8ä¸ªå…¶å€¼è¿ç»­ä¸ºâ€œ0â€çš„ä½å³å¯ã€‚<br>ä¸€ä¸ªä½ç¤ºå›¾éœ€è¦å ç”¨çš„å­˜å‚¨ç©ºé—´å¤§å°ä¸ºï¼šç£ç›˜å®¹é‡ï¼ˆå­—èŠ‚æ•°ï¼‰&#x2F; ï¼ˆ8 * æ•°æ®å—å¤§å°ï¼‰<br>ç”±äºä½ç¤ºå›¾å¾ˆå°ï¼Œå ç”¨ç©ºé—´å°‘ï¼Œå› è€Œå¯å°†å…¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿›è€Œä½¿åœ¨æ¯æ¬¡è¿›è¡Œç›˜åŒºåˆ†é…æ—¶ï¼Œæ— éœ€é¦–å…ˆæŠŠç›˜åŒºåˆ†é…è¡¨è¯»å…¥å†…å­˜ï¼ŒèŠ‚çœç£ç›˜å¯åŠ¨æ—¶é—´ã€‚</p>
<p>â€‹	ä½†æ˜¯ï¼Œå¯¹äºä¸€ä¸ª16GBçš„ç£ç›˜ï¼Œè‹¥æ•°æ®å—å¤§å°ä¸º512å­—èŠ‚ï¼Œåˆ™ä½ç¤ºå›¾å¤§å°ä¸º4MBï¼Œå¤§çº¦éœ€è¦å ç”¨8000ä¸ªç£ç›˜å—çš„å­˜å‚¨ç©ºé—´ã€‚å¾ˆéš¾ä¸€æ¬¡æ€§å°†è¯¥ä½ç¤ºå›¾å…¨éƒ¨è£…å…¥å†…å­˜ã€‚å³ä½¿å†…å­˜<br>è¶³å¤Ÿå¤§ï¼Œå¯ä»¥å­˜æ”¾å…¨éƒ¨æˆ–ç»å¤§éƒ¨åˆ†ä½ç¤ºå›¾æ•°æ®ï¼Œæœç´¢ä¸€ä¸ªå¾ˆå¤§çš„ä½ç¤ºå›¾å°†ä¼šé™ä½æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½ã€‚å°¤å…¶å½“ç£ç›˜ç©ºé—´å¿«ç”¨å®Œï¼Œå‰©ä¸‹çš„ç©ºé—²ç£ç›˜å—å¾ˆå°‘æ—¶ï¼Œæ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½å°†ä¸¥é‡é™ä½ã€‚</p>
<h3 id="æˆç»„é“¾æ¥æ³•"><a href="#æˆç»„é“¾æ¥æ³•" class="headerlink" title="æˆç»„é“¾æ¥æ³•"></a>æˆç»„é“¾æ¥æ³•</h3><p>ã€€ç©ºé—²è¡¨æ³•å’Œç©ºé—²é“¾è¡¨æ³•éƒ½ä¸é€‚ç”¨äºå¤§å‹ç³»ç»Ÿï¼Œå› ä¸ºè¿™ä¼šä½¿ç©ºé—²è¡¨æˆ–ç©ºé—²é“¾è¡¨å¾ˆé•¿ï¼Œåœ¨UNIXé‡‡ç”¨çš„æˆç»„é“¾æ¥æ³•ï¼Œç»“åˆä¸Šè¿°ä¸¤ç§æ–¹æ³•ã€‚</p>
<p>ã€€â‘  ç©ºçº¿ç›˜å—çš„ç»„ç»‡ï¼Œç©ºé—²ç›˜å—æ ˆç”¨æ¥å­˜æ”¾å½“å‰å¯ç”¨çš„ä¸€ç»„ç©ºé—²ç›˜å—çš„ç›˜å—å·ï¼ˆæœ€å¤šå«100ä¸ªå·ï¼‰ï¼Œä»¥åŠæ ˆä¸­å°šæœ‰çš„ç©ºé—²ç›˜å—å·æ•°Nï¼Œé¡ºä¾¿æŒ‡å‡ºï¼ŒNå…¼åšæ ˆé¡¶æŒ‡é’ˆä½¿ç”¨ï¼Œæ ˆæ˜¯ä¸´ç•Œèµ„æºï¼Œç³»ç»Ÿè®¾ç½®ä¸€æŠŠé”ä¾›è¿›ç¨‹äº’æ–¥è®¿é—®ã€‚å…¶ä¸­ï¼ŒS.free(0)æ˜¯æ ˆåº•ï¼Œæ ˆæ»¡æ—¶æ ˆé¡¶ä¸ºS.free(99)ã€‚</p>
<p>ã€€â‘¡ æ–‡ä»¶åŒºä¸­çš„æ‰€æœ‰ç©ºé—²ç›˜å—è¢«åˆ†æˆè‹¥å¹²ä¸ªç»„ï¼Œå¦‚æ¯100ä¸ªç›˜å—ä½œä¸ºä¸€ç»„ã€‚</p>
<p>ã€€â‘¢ å°†æ¯ä¸€ç»„å«æœ‰çš„ç›˜å—æ€»æ•°Nå’Œè¯¥ç»„æ‰€æœ‰çš„ç›˜å—å·è®°å…¥å…¶å‰ä¸€ç»„çš„ç¬¬ä¸€ä¸ªç›˜å—S.free(0)~S.free(99)ä¸­ï¼Œè¿™æ ·ï¼Œç”±å„ç»„çš„ç¬¬ä¸€ä¸ªç›˜å—å¯é“¾æ¥æˆä¸€æ¡é“¾ã€‚</p>
<p>ã€€â‘£ å°†ç¬¬ä¸€ç»„çš„ç›˜å—æ€»æ•°å’Œæ‰€æœ‰çš„ç›˜å—å·è®°å…¥ç©ºé—²ç›˜å—å·æ ˆä¸­ï¼Œä½œä¸ºå½“å‰å¯ä¾›åˆ†é…çš„ç©ºé—²ç›˜å—å·ã€‚</p>
<p>ã€€â‘¤ æœ€æœ«ä¸€ç»„åªæœ‰99ä¸ªç›˜å—ï¼Œå…¶ç›˜å—å·åˆ†åˆ«è®°å…¥å…¶å‰ä¸€ç»„çš„S.free(1)~S.free(99)ä¸­ï¼Œè€Œåœ¨S.free(0)ä¸­åˆ™å­˜æ”¾0ï¼Œä½œä¸ºç©ºé—²ç›˜å—é“¾çš„ç»“æŸã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_13-12-13.png"></p>
<p>ã€€å½“ç³»ç»Ÿè¦ä¸ºç”¨æˆ·åˆ†é…æ–‡ä»¶æ‰€éœ€çš„ç›˜å—æ—¶ï¼Œé¡»è°ƒç”¨ç›˜å—åˆ†é…è¿‡ç¨‹æ¥å®Œæˆã€‚è¯¥è¿‡ç¨‹é¦–å…ˆæ£€æŸ¥ç©ºé—²ç›˜å—å·æ ˆæ˜¯å¦ä¸Šé”ï¼Œå¦‚æœªä¸Šé”ï¼Œä¾¿ä»æ ˆé¡¶å–å‡ºä¸€ç©ºé—²ç›˜å—å·ï¼Œå°†ä¸ä¹‹å¯¹åº”çš„ç›˜å—åˆ†é…ç»™ç”¨æˆ·ï¼Œç„¶åå°†æ ˆé¡¶æŒ‡é’ˆä¸‹ç§»ä¸€æ ¼ã€‚è‹¥è¯¥ç›˜å—å·å·²æ˜¯æ ˆåº•ï¼Œå³S.free(0)ï¼Œè¿™æ˜¯å½“å‰æ ˆä¸­æœ€åä¸€ä¸ªå¯åˆ†é…çš„ç›˜å—å·ã€‚ç”±äºåœ¨è¯¥ç›˜å—å·æ‰€å¯¹åº”çš„ç›˜å—ä¸­è®°æœ‰ä¸‹ä¸€ç»„å¯ç”¨çš„ç›˜å—å·ï¼Œå› æ­¤ï¼Œé¡»è°ƒç”¨ç£ç›˜è¯»è¿‡ç¨‹ï¼Œå°†æ ˆåº•ç›˜å—å·æ‰€å¯¹åº”ç›˜å—çš„å†…å®¹è¯»å…¥æ ˆä¸­ï¼Œä½œä¸ºæ–°çš„ç›˜å—å·æ ˆçš„å†…å®¹ï¼Œå¹¶æŠŠ<strong>åŸæ ˆåº•å¯¹åº”çš„ç›˜å—åˆ†é…å‡ºå»</strong>(å…¶ä¸­çš„æœ‰ç”¨æ•°æ®å·²è¯»å…¥æ ˆä¸­)ã€‚ç„¶åï¼Œå†åˆ†é…ä¸€ç›¸åº”çš„ç¼“å†²åŒº(ä½œä¸ºè¯¥ç›˜å—çš„ç¼“å†²åŒº)ã€‚æœ€åï¼ŒæŠŠæ ˆä¸­çš„ç©ºé—²ç›˜å—æ•°å‡1å¹¶è¿”å›ã€‚</p>
<p>ã€€åœ¨ç³»ç»Ÿå›æ”¶ç©ºé—²ç›˜å—æ—¶ï¼Œé¡»è°ƒç”¨ç›˜å—å›æ”¶è¿‡ç¨‹è¿›è¡Œå›æ”¶ã€‚å®ƒæ˜¯å°†å›æ”¶ç›˜å—çš„ç›˜å—å·è®°å…¥ç©ºé—²ç›˜å—å·æ ˆçš„é¡¶éƒ¨ï¼Œå¹¶æ‰§è¡Œç©ºé—²ç›˜å—æ•°åŠ 1æ“ä½œã€‚å½“æ ˆä¸­ç©ºé—²ç›˜å—å·æ•°ç›®å·²è¾¾100æ—¶ï¼Œè¡¨ç¤ºæ ˆå·²æ»¡ï¼Œ<strong>ä¾¿å°†ç°æœ‰æ ˆä¸­çš„100ä¸ªç›˜å—å·ï¼Œè®°å…¥æ–°å›æ”¶çš„ç›˜å—ä¸­ï¼Œå†å°†å…¶ç›˜å—å·ä½œä¸ºæ–°æ ˆåº•</strong>ã€‚</p>
<p>ä¾‹ï¼šåœ¨  UNIX  ç³»ç»Ÿä¸­æœ‰ç©ºé—²ç›˜å—æ ˆå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/6100690_1492936796345_072774B6B658B3603E1AA7198722775C.png"></p>
<p>â€‹    (1)    ç°æœ‰ä¸€ä¸ªè¿›ç¨‹è¦é‡Šæ”¾4 ä¸ªç‰©ç†å—ï¼Œå…¶å—å·ä¸º150ï¼ƒã€156ï¼ƒã€172 ï¼ƒã€177ï¼ƒï¼Œç”»å‡ºç©ºé—²ç›˜å—æ ˆæ¯æ¬¡çš„å˜åŒ–æƒ…å†µã€‚  </p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/6100690_1492936877377_072774B6B658B3603E1AA7198722775C.png"></p>
<p>â€‹    (2)   åœ¨ï¼ˆ 1 ï¼‰çš„åŸºç¡€ä¸Šå‡å®šä¸€ä¸ªè¿›ç¨‹è¦æ±‚åˆ†é…5 ä¸ªç©ºé—²å—ï¼Œç”»å‡ºåˆ†é…å®Œæˆåçš„ç©ºé—²ç›˜å—æ ˆã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/6100690_1492936928232_072774B6B658B3603E1AA7198722775C.png"></p>
<h2 id="æ–‡ä»¶ç›®å½•"><a href="#æ–‡ä»¶ç›®å½•" class="headerlink" title="æ–‡ä»¶ç›®å½•"></a>æ–‡ä»¶ç›®å½•</h2><p>ã€€ä¸ºäº†èƒ½å¤Ÿå¯¹æ–‡ä»¶å®æ–½æœ‰æ•ˆçš„ç®¡ç†ï¼Œå¿…é¡»å¯¹å®ƒä»¬åŠ ä»¥å¦¥å–„ç»„ç»‡ï¼Œè¿™ä¸»è¦æ˜¯é€šè¿‡æ–‡ä»¶ç›®å½•å®ç°çš„ï¼Œæ–‡ä»¶ç›®å½•ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºæ ‡è¯†ç³»ç»Ÿä¸­çš„æ–‡ä»¶åŠå…¶ç‰©ç†åœ°å€ï¼Œä¾›æ£€ç´¢æ—¶ä½¿ç”¨ï¼Œå¯¹ç›®å½•çš„ç®¡ç†è¦æ±‚å¦‚ä¸‹ï¼š</p>
<p>ã€€â‘  **å®ç°â€æŒ‰åå­˜å–â€**ï¼Œå³ç”¨æˆ·åªé¡»å‘ç³»ç»Ÿæä¾›æ‰€éœ€è®¿é—®çš„æ–‡ä»¶çš„åå­—ï¼Œä¾¿èƒ½å¤Ÿå¿«é€Ÿå‡†ç¡®åœ°æ‰¾åˆ°æŒ‡å®šæ–‡ä»¶åœ¨å¤–å­˜ä¸Šçš„å­˜å‚¨ä½ç½®ï¼Œè¿™æ˜¯ç›®å½•ç®¡ç†ä¸­æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚</p>
<p>ã€€â‘¡ <strong>æé«˜å¯¹ç›®å½•æ£€ç´¢é€Ÿåº¦</strong>ï¼Œé€šè¿‡åˆç†åœ°ç»„ç»‡ç›®å½•ç»“æ„çš„æ–¹æ³•ï¼Œå¯åŠ å¿«å¯¹ç›®å½•çš„æ£€ç´¢é€Ÿåº¦ï¼Œä»è€Œæé«˜å¯¹æ–‡ä»¶çš„å­˜å–é€Ÿåº¦ã€‚</p>
<p>ã€€â‘¢ <strong>æ–‡ä»¶å…±äº«</strong>ï¼Œåœ¨å¤šç”¨æˆ·ç³»ç»Ÿä¸­ï¼Œåº”è¯¥å…è®¸ç”¨æˆ·å…±äº«ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p>ã€€â‘£ <strong>å…è®¸æ–‡ä»¶é‡å</strong>ï¼Œç³»ç»Ÿåº”å…è®¸ä¸åŒç”¨æˆ·å¯¹ä¸åŒæ–‡ä»¶é‡‡ç”¨ç›¸åŒçš„åå­—ï¼Œä»¥ä¾¿ç”¨æˆ·æŒ‰ç…§è‡ªå·±çš„ä¹ æƒ¯ç»™æ–‡ä»¶å‘½åå’Œä½¿ç”¨æ–‡ä»¶ã€‚</p>
<p><strong>æ–‡ä»¶æ§åˆ¶å—</strong></p>
<p>ã€€ä¸ºäº†èƒ½å¯¹æ–‡ä»¶è¿›è¡Œæ­£ç¡®çš„å­˜å–ï¼Œå¿…é¡»ä¸ºæ–‡ä»¶è®¾ç½®<strong>ç”¨äºæè¿°å’Œæ§åˆ¶æ–‡ä»¶çš„æ•°æ®ç»“æ„</strong>ï¼Œç§°ä¹‹ä¸ºæ–‡ä»¶æ§åˆ¶å—(FCB)ï¼ŒFCBæ˜¯æ–‡ä»¶å­˜åœ¨çš„æ ‡å¿—ã€‚æ–‡ä»¶ç®¡ç†ç¨‹åºå¯å€ŸåŠ©äºæ–‡ä»¶æ§åˆ¶å—ä¸­çš„ä¿¡æ¯ï¼Œå¯¹æ–‡ä»¶æ–½åŠ å„ç§æ“ä½œï¼Œæ–‡ä»¶ä¸æ–‡ä»¶æ§åˆ¶å—ä¸€ä¸€å¯¹åº”ï¼Œè€Œäººä»¬æŠŠ<strong>æ–‡ä»¶æ§åˆ¶å—çš„æœ‰åºé›†åˆç§°ä¸ºæ–‡ä»¶ç›®å½•</strong>ï¼Œä¸€ä¸ªæ–‡ä»¶æ§åˆ¶å—å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ç›®å½•é¡¹ã€‚ä¸ºäº†å®ç°å¯¹æ–‡ä»¶ç›®å½•çš„ç®¡ç†ï¼Œé€šå¸¸å°†<strong>æ–‡ä»¶ç›®å½•ä»¥æ–‡ä»¶çš„å½¢å¼ä¿å­˜åœ¨å¤–å­˜</strong>ï¼Œè¿™ä¸ªæ–‡ä»¶å°±å«ç›®å½•æ–‡ä»¶ã€‚</p>
<p>FCBçš„å†…å®¹ï¼š</p>
<blockquote>
<p>åŸºæœ¬ä¿¡æ¯ï¼šæ–‡ä»¶åã€æ–‡ä»¶ç±»å‹ç­‰ï¼›<br>åœ°å€ä¿¡æ¯ï¼šå·ï¼ˆå­˜å‚¨æ–‡ä»¶çš„è®¾å¤‡ï¼‰ã€èµ·å§‹åœ°å€ï¼ˆèµ·å§‹ç‰©ç†åœ°å€ï¼‰ã€æ–‡ä»¶é•¿åº¦ï¼ˆä»¥å­—èŠ‚ã€å­—æˆ–å—ä¸ºå•ä½ï¼‰ç­‰ã€‚<br>è®¿é—®æ§åˆ¶ä¿¡æ¯ï¼šæ–‡ä»¶æ‰€æœ‰è€…ã€è®¿é—®ä¿¡æ¯ï¼ˆç”¨æˆ·åå’Œå£ä»¤ç­‰ï¼‰ã€åˆæ³•æ“ä½œç­‰ï¼›<br>ä½¿ç”¨ä¿¡æ¯ï¼šåˆ›å»ºæ—¶é—´ã€åˆ›å»ºè€…èº«ä»½ã€å½“å‰çŠ¶æ€ã€æœ€è¿‘ä¿®æ”¹æ—¶é—´ã€æœ€è¿‘è®¿é—®æ—¶é—´ç­‰ã€‚</p>
</blockquote>
<p>ã€€<strong>æ–‡ä»¶ç›®å½•é€šå¸¸æ˜¯å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„</strong>ï¼Œå½“æ–‡ä»¶å¾ˆå¤šæ—¶ï¼Œæ–‡ä»¶ç›®å½•å¯èƒ½è¦å ç”¨å¤§é‡çš„ç›˜å—ï¼Œåœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ï¼Œå…ˆå°†å­˜æ”¾ç›®å½•æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç›˜å—ä¸­çš„ç›®å½•è°ƒå…¥å†…å­˜ï¼Œç„¶åæŠŠç”¨æˆ·æ‰€ç»™å®šçš„æ–‡ä»¶åå’Œç›®å½•é¡¹ä¸­çš„æ–‡ä»¶åé€ä¸€å¯¹æ¯”ã€‚è‹¥æœªæ‰¾åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œåˆ™å†å°†ä¸‹ä¸€ä¸ªç›˜å—ä¸­çš„ç›®å½•é¡¹è°ƒå…¥å†…å­˜ã€‚åœ¨æ£€ç´¢ç›®å½•æ–‡ä»¶æ—¶ï¼Œåªç”¨åˆ°äº†æ–‡ä»¶åï¼Œä»…å½“æ‰¾åˆ°ä¸€ä¸ªç›®å½•é¡¹ï¼ˆå³å…¶ä¸­çš„æ–‡ä»¶åä¸æŒ‡å®šè¦æŸ¥æ‰¾çš„æ–‡ä»¶åç›¸åŒ¹é…ï¼‰æ—¶ï¼Œæ‰éœ€è¦ä»è¯¥ç›®å½•é¡¹ä¸­è¯»å‡ºè¯¥æ–‡ä»¶çš„ç‰©ç†åœ°å€ï¼Œè€Œå…¶ä»–ä¸€äº›å¯¹è¯¥æ–‡ä»¶è¿›è¡Œæè¿°çš„ä¿¡æ¯ï¼Œåœ¨æ£€ç´¢ç›®å½•æ—¶ä¸€æ¦‚ä¸ç”¨ï¼Œæ˜¾ç„¶ï¼Œè¿™äº›ä¿¡æ¯åœ¨æ£€ç´¢ç›®å½•æ—¶ä¸éœ€è¦è°ƒå…¥å†…å­˜ã€‚ä¸ºæ­¤ï¼Œåœ¨æœ‰çš„ç³»ç»Ÿä¸­ï¼Œå¦‚UNIXç³»ç»Ÿï¼Œä¾¿é‡‡ç”¨äº†æŠŠæ–‡ä»¶åå’Œæ–‡ä»¶æè¿°ä¿¡æ¯åˆ†å¼€çš„æ–¹æ³•ï¼Œäº¦å³ï¼Œä½¿æ–‡ä»¶æè¿°ä¿¡æ¯å•ç‹¬å½¢æˆä¸€ä¸ªç§°ä¸º<strong>ç´¢å¼•ç»“ç‚¹</strong>çš„æ•°æ®ç»“æ„ï¼Œç®€ç§°ä¸ºiç»“ç‚¹ï¼Œåœ¨æ–‡ä»¶ç›®å½•ä¸­çš„æ¯ä¸ªç›®å½•é¡¹ç”±æ–‡ä»¶åå’ŒæŒ‡å‘è¯¥æ–‡ä»¶æ‰€å¯¹åº”çš„iç»“ç‚¹çš„æŒ‡é’ˆæ‰€æ„æˆã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_14-28-08.png"></p>
<p>ã€€<strong>æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰å”¯ä¸€çš„ç£ç›˜ç´¢å¼•ç»“ç‚¹ï¼ˆç£ç›˜ç´¢å¼•ç»“ç‚¹ä¿¡æ¯ä¸æ–‡ä»¶åç­‰ä¿¡æ¯ä¸€èµ·æ„æˆäº†FCBï¼‰</strong>	</p>
<h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>ã€€ç›®å½•ç»“æ„çš„ç»„ç»‡ï¼Œå…³ç³»åˆ°æ–‡ä»¶ç³»ç»Ÿçš„å­˜å–é€Ÿåº¦ï¼Œä¹Ÿå…³ç³»åˆ°æ–‡ä»¶çš„å…±äº«æ€§å’Œå®‰å…¨æ€§ï¼Œç›®å‰å¸¸ç”¨çš„ç›®å½•ç»“æ„å½¢å¼æœ‰å•çº§ç›®å½•ã€ä¸¤çº§ç›®å½•ã€å¤šçº§ç›®å½•ã€‚</p>
<p>ã€€â‘  <strong>å•çº§ç›®å½•ç»“æ„</strong>ï¼Œæ‰€æœ‰ç”¨æˆ·çš„å…¨éƒ¨æ–‡ä»¶ç›®å½•ä¿å­˜åœ¨ä¸€å¼ ç›®å½•è¡¨ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ç›®å½•é¡¹å ç”¨ä¸€ä¸ªè¡¨é¡¹ã€‚</p>
<p>å•çº§ç›®å½•çš„ä¼˜ç‚¹æ˜¯ç®€å•ä¸”èƒ½å®ç°ç›®å½•ç®¡ç†çš„åŸºæœ¬åŠŸèƒ½â€”â€”<strong>æŒ‰åå­˜å–</strong><br>å­˜åœ¨ä¸‹è¿°ä¸€äº›ç¼ºç‚¹ï¼š</p>
<blockquote>
<p>(1) æŸ¥æ‰¾é€Ÿåº¦æ…¢<br>(2) ä¸å…è®¸é‡å<br>(3) ä¸ä¾¿äºå®ç°æ–‡ä»¶å…±äº«</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_14-37-20.png"></p>
<p>â‘¡ <strong>ä¸¤çº§ç›®å½•ç»“æ„</strong>ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·å»ºç«‹ä¸€ä¸ªå•ç‹¬çš„<strong>ç”¨æˆ·æ–‡ä»¶ç›®å½•UFD</strong>ï¼ˆUser File Directoryï¼‰ï¼Œè¿™äº›æ–‡ä»¶ç›®å½•å…·æœ‰ç›¸ä¼¼çš„ç»“æ„ï¼Œç”±ç”¨æˆ·æ‰€æœ‰æ–‡ä»¶çš„æ–‡ä»¶æ§åˆ¶å—ç»„æˆã€‚æ­¤å¤–ï¼Œç³»ç»Ÿä¸­è¿˜æœ‰ä¸€ä¸ª<strong>ä¸»æ–‡ä»¶ç›®å½•MFD</strong>ï¼ˆMaster File Directory)ï¼Œåœ¨ä¸»æ–‡ä»¶ç›®å½•ä¸­ï¼Œæ¯ä¸ªç”¨æˆ·ç›®å½•æ–‡ä»¶éƒ½å æœ‰ä¸€ä¸ªç›®å½•é¡¹ï¼Œå…¶ç›®å½•é¡¹åŒ…æ‹¬<strong>ç”¨æˆ·åå’ŒæŒ‡å‘ç”¨æˆ·ç›®å½•æ–‡ä»¶çš„æŒ‡é’ˆ</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_14-38-57.png"></p>
<p>ã€€å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š<strong>æé«˜äº†æ£€ç´¢ç›®å½•çš„é€Ÿåº¦</strong>ï¼ˆå¦‚æœåœ¨ä¸»ç›®å½•ä¸­æœ‰nä¸ªå­ç›®å½•ï¼Œæ¯ä¸ªç”¨æˆ·ç›®å½•æœ€å¤šä¸ºmä¸ªç›®å½•é¡¹ï¼Œåˆ™ä¸ºæŸ¥æ‰¾ä¸€æŒ‡å®šçš„ç›®å½•é¡¹ï¼Œæœ€å¤šåªéœ€è¦æ£€ç´¢n+mä¸ªç›®å½•é¡¹ï¼‰ã€‚<strong>åœ¨ä¸åŒçš„ç”¨æˆ·ç›®å½•ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶å</strong>ï¼ˆåªè¦åœ¨ç”¨æˆ·è‡ªå·±çš„UFDä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶åéƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸åŒç”¨æˆ·å¯ä»¥æœ‰æ–‡ä»¶åç›¸åŒçš„æ–‡ä»¶ï¼‰ã€‚<strong>ä¸åŒç”¨æˆ·è¿˜å¯ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶åæ¥è®¿é—®ç³»ç»Ÿä¸­åŒä¸€ä¸ªå…±äº«æ–‡ä»¶</strong>ã€‚ä½†åœ¨å¤šä¸ªç”¨æˆ·éœ€è¦åˆä½œå®Œæˆä¸€ä¸ªå¤§ä»»åŠ¡æ—¶ï¼Œä¸ä¾¿äºç”¨æˆ·ä¹‹é—´å…±äº«æ–‡ä»¶ã€‚</p>
<p>ã€€â‘¢ å¤šçº§ç›®å½•ç»“æ„ï¼Œå¯¹äºå¤§å‹æ–‡ä»¶ç³»ç»Ÿï¼Œé€šå¸¸é‡‡ç”¨ä¸‰çº§æˆ–ä¸‰çº§ä»¥ä¸Šçš„ç›®å½•ç»“æ„ï¼Œä»¥æé«˜å¯¹ç›®å½•çš„æ£€ç´¢é€Ÿåº¦å’Œæ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½ã€‚å¤šçº§ç›®å½•ç»“æ„åˆç§°ä¸ºæ ‘å½¢ç›®å½•ç»“æ„ï¼Œ<strong>ä¸»ç›®å½•è¢«ç§°ä¸ºæ ¹ç›®å½•</strong>ï¼ŒæŠŠ<strong>æ•°æ®æ–‡ä»¶ç§°ä¸ºæ ‘å¶</strong>ï¼Œ<strong>å…¶ä»–çš„ç›®å½•å‡ä½œä¸ºæ ‘çš„ç»“ç‚¹</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_14-39-30.png"></p>
<p>ã€€æ–¹æ¡†ä»£è¡¨ç›®å½•æ–‡ä»¶ï¼Œåœ†åœˆä»£è¡¨æ•°æ®æ–‡ä»¶ï¼Œä¸»ç›®å½•ä¸­æœ‰æ˜¯å“ªä¸ªç”¨æˆ·æ€»ç›®å½•Aã€Bã€Cï¼Œåœ¨Bç”¨æˆ·çš„æ€»ç›®å½•Bä¸­ï¼ŒåˆåŒ…æ‹¬ä¸‰ä¸ªåˆ†ç›®å½•Fã€Eã€Dï¼Œå…¶ä¸­æ¯ä¸ªåˆ†ç›®å½•ä¸­åˆåŒ…å«å¤šä¸ªæ–‡ä»¶ï¼Œä¸ºæé«˜ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œ<strong>åº”è¯¥å…è®¸åœ¨ä¸€ä¸ªç›®å½•æ–‡ä»¶ä¸­çš„ç›®å½•é¡¹æ—¢æ˜¯ä½œä¸ºç›®å½•æ–‡ä»¶çš„FCBï¼Œåˆæ˜¯æ•°æ®æ–‡ä»¶çš„FCB</strong>ï¼Œè¿™ä¸€ä¿¡æ¯å¯ç”¨ç›®å½•é¡¹ä¸­çš„ä¸€ä½æ¥æŒ‡ç¤ºã€‚å¦‚ç”¨æˆ·Aæ€»ç›®å½•ä¸­ï¼Œç›®å½•é¡¹Aæ˜¯ç›®å½•æ–‡ä»¶FCBï¼Œè€Œç›®å½•é¡¹Bå’ŒDåˆ™æ˜¯æ•°æ®æ–‡ä»¶çš„FCBã€‚</p>
<p>ã€€åœ¨æ ‘å½¢ç›®å½•ç»“æ„ä¸­ï¼Œä»æ ¹ç›®å½•åˆ°ä»»ä½•æ•°æ®æ–‡ä»¶ï¼Œéƒ½åªæœ‰ä¸€æ¡å”¯ä¸€çš„é€šè·¯ï¼Œåœ¨è¯¥è·¯å¾„ä¸Šä»æ ‘çš„æ ¹å¼€å§‹ï¼ŒæŠŠå…¨éƒ¨ç›®å½•æ–‡ä»¶åå’Œæ•°æ®æ–‡ä»¶åä¾æ¬¡ç”¨â€&#x2F;â€œè¿æ¥èµ·æ¥ï¼Œå³æ„æˆè¯¥æ•°æ®æ–‡ä»¶çš„è·¯å¾„åã€‚<strong>ç³»ç»Ÿä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰å”¯ä¸€çš„è·¯å¾„å</strong>ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·Bè®¿é—®æ–‡ä»¶Jï¼Œåˆ™ä½¿ç”¨è·¯å¾„å&#x2F;B&#x2F;F&#x2F;Jæ¥è®¿é—®ã€‚è·¯å¾„åï¼šä»æ ‘çš„æ ¹ï¼ˆå³ä¸»ç›®å½•ï¼‰å¼€å§‹ï¼ŒæŠŠå…¨éƒ¨ç›®å½•æ–‡ä»¶åä¸æ•°æ®æ–‡ä»¶åï¼Œä¾æ¬¡åœ°ç”¨â€œ&#x2F;â€è¿æ¥èµ·æ¥ï¼Œå³æ„æˆè¯¥æ•°æ®æ–‡ä»¶çš„è·¯å¾„åï¼ˆpath nameï¼‰ã€‚<strong>ç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æœ‰æƒŸä¸€çš„è·¯å¾„å</strong>ã€‚å½“å‰ç›®å½•ï¼šä¸ºæ¯ä¸ªè¿›ç¨‹è®¾ç½®ä¸€ä¸ªâ€œå½“å‰ç›®å½•â€ï¼Œåˆç§°ä¸ºâ€œå·¥ä½œç›®å½•â€ï¼Œè¿›ç¨‹å¯¹å„æ–‡ä»¶çš„è®¿é—®éƒ½ç›¸å¯¹äºâ€œå½“å‰ç›®å½•â€è€Œè¿›è¡Œã€‚<strong>æŠŠä»å½“å‰ç›®å½•å¼€å§‹çš„æ•°æ®æ–‡ä»¶ä¸ºæ­¢æ‰€æ„æˆçš„è·¯å¾„åç§°ä¸ºç›¸å¯¹è·¯å¾„å</strong>ï¼Œè€Œ<strong>æŠŠä»æ ‘æ ¹å¼€å§‹çš„è·¯å¾„åç§°ä¸ºç»å¯¹è·¯å¾„å</strong>ã€‚</p>
<p><em><strong>å¢åŠ å’Œåˆ é™¤ç›®å½•</strong></em></p>
<p>â€‹	åœ¨æ ‘å½¢ç›®å½•ç»“æ„ä¸­ï¼Œç”¨æˆ·å¯ä¸ºè‡ªå·±å»ºç«‹UFDï¼Œå¹¶å¯å†åˆ›å»ºå­ç›®å½•ï¼Œåœ¨ç”¨æˆ·è¦åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œåªéœ€è¦æŸ¥çœ‹è‡ªå·±çš„UFDåŠå…¶å­ç›®å½•ä¸­æœ‰æ— ä¸æ–°å»ºæ–‡ä»¶ç›¸åŒçš„æ–‡ä»¶åï¼Œè‹¥æ— ï¼Œä¾¿å¯åœ¨UFDæˆ–å…¶æŸä¸ªå­ç›®å½•ä¸­å¢åŠ ä¸€ä¸ªæ–°ç›®å½•é¡¹ã€‚åœ¨æ ‘å½¢ç›®å½•ä¸­ï¼Œå¦‚ä½•åˆ é™¤ä¸€ä¸ªç›®å½•ï¼Œåº”è¯¥è§†æƒ…å†µè€Œå®šï¼Œè‹¥è¦åˆ é™¤çš„ç›®å½•ä¸ºç©ºï¼Œåˆ™ç®€å•åœ°å°†å…¶åˆ é™¤ï¼Œä½¿å®ƒåœ¨å…¶ä¸Šä¸€çº§ç›®å½•ä¸­æ‰€å¯¹åº”çš„ç›®å½•é¡¹ä¸ºç©ºã€‚è‹¥ä¸ä¸ºç©ºï¼Œå¯é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š<strong>ä¸åˆ é™¤éç©ºç›®å½•</strong>ï¼ˆå½“ç›®å½•ä¸ä¸ºç©ºæ—¶ï¼Œä¸ºäº†åˆ é™¤ä¸€ä¸ªéç©ºç›®å½•ï¼Œå¿…é¡»å…ˆåˆ é™¤ç›®å½•ä¸­æ‰€æœ‰çš„æ–‡ä»¶ï¼Œä½¿ä¹‹ç§°ä¸ºç©ºç›®å½•ï¼Œç„¶åå†åˆ é™¤ï¼Œå¦‚æœç›®å½•ä¸­åŒ…å«æœ‰å­ç›®å½•ï¼Œåˆ™åº”è¯¥é€’å½’è°ƒç”¨æ–¹å¼åˆ é™¤ï¼‰ï¼Œ<strong>å¯åˆ é™¤éç©ºç›®å½•</strong>ï¼ˆå°†ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•åŒæ—¶åˆ é™¤ï¼‰ã€‚</p>
<h3 id="ç›®å½•æŸ¥è¯¢æŠ€æœ¯"><a href="#ç›®å½•æŸ¥è¯¢æŠ€æœ¯" class="headerlink" title="ç›®å½•æŸ¥è¯¢æŠ€æœ¯"></a>ç›®å½•æŸ¥è¯¢æŠ€æœ¯</h3><p>ã€€å½“ç”¨æˆ·è¦è®¿é—®ä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆåˆ©ç”¨ç”¨æˆ·æä¾›çš„æ–‡ä»¶åå¯¹ç›®å½•è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰¾å‡ºè¯¥æ–‡ä»¶çš„æ–‡ä»¶æ§åˆ¶å—æˆ–å¯¹åº”ç´¢å¼•ç»“ç‚¹ï¼Œç„¶åï¼Œæ ¹æ®FCBæˆ–ç´¢å¼•ç»“ç‚¹ä¸­æ‰€è®°å½•çš„æ–‡ä»¶ç‰©ç†åœ°å€ï¼ˆç›˜å—å·ï¼‰ï¼Œæ¢ç®—å‡ºæ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„ç‰©ç†ä½ç½®ï¼Œæœ€åï¼Œå†é€šè¿‡ç£ç›˜é©±åŠ¨ç¨‹åºï¼Œå°†æ‰€éœ€æ–‡ä»¶è¯»å…¥å†…å­˜ã€‚ç›®å‰å¸¸ç”¨çš„æ–¹å¼æœ‰<strong>çº¿æ€§æ£€ç´¢æ³•</strong>å’Œ<strong>Hashæ–¹æ³•ã€‚</strong></p>
<p>ã€€â‘  <strong>çº¿æ€§æ£€ç´¢æ³•</strong>ï¼Œå…¶åˆç§°ä¸ºé¡ºåºæ£€ç´¢æ³•ï¼Œ<em>åœ¨å•çº§ç›®å½•ä¸­</em>ï¼Œåˆ©ç”¨ç”¨æˆ·æä¾›çš„æ–‡ä»¶åï¼Œç”¨é¡ºåºæŸ¥æ‰¾æ³•ç›´æ¥ä»æ–‡ä»¶ç›®å½•ä¸­æ‰¾åˆ°æŒ‡åæ–‡ä»¶çš„ç›®å½•é¡¹ã€‚<em>åœ¨æ ‘å½¢ç›®å½•ä¸­</em>ï¼Œç”¨æˆ·æä¾›çš„æ–‡ä»¶åæ˜¯ç”±å¤šä¸ªæ–‡ä»¶åˆ†é‡åç»„æˆçš„è·¯å¾„åï¼Œæ­¤æ—¶é¡»å¯¹å¤šçº§ç›®å½•è¿›è¡ŒæŸ¥æ‰¾ï¼Œå‡å®šç”¨æˆ·ç»™å®šçš„æ–‡ä»¶è·¯å¾„åä¸º&#x2F;usr&#x2F;ast&#x2F;mboxï¼Œåˆ™æŸ¥æ‰¾è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_14-59-42.png"></p>
<p>ã€€é¦–å…ˆï¼Œç³»ç»Ÿåº”å…ˆè¯»å…¥ç¬¬ä¸€ä¸ªæ–‡ä»¶åˆ†é‡åusrï¼Œç”¨å®ƒä¸æ ¹ç›®å½•æ–‡ä»¶ï¼ˆæˆ–å½“å‰ç›®å½•æ–‡ä»¶ï¼‰ä¸­å„ç›®å½•é¡¹ä¸­çš„æ–‡ä»¶åé¡ºåºåœ°è¿›è¡Œæ¯”è¾ƒï¼Œä»ä¸­æ‰¾åˆ°åŒ¹é…è€…ï¼Œå¹¶å¾—åˆ°åŒ¹é…é¡¹çš„ç´¢å¼•ç»“ç‚¹å·æ˜¯6ï¼Œå†ä»6å·ç´¢å¼•ç»“ç‚¹ä¸­å¾—åˆ°usrç›®å½•æ–‡ä»¶æ”¾åœ¨132å·ç›˜å—ä¸­ï¼Œå°†è¯¥ç›˜å—å†…å®¹è¯»å…¥å†…å­˜ã€‚æ¥ç€ï¼Œç³»ç»Ÿå†å°†è·¯å¾„åä¸­çš„ç¬¬äºŒä¸ªåˆ†é‡åastè¯»å…¥ï¼Œç”¨å®ƒä¸æ”¾åœ¨132å·ç›˜å—ä¸­çš„ç¬¬äºŒçº§ç›®å½•æ–‡ä»¶ä¸­å„ç›®å½•é¡¹çš„æ–‡ä»¶åé¡ºåºè¿›è¡Œæ¯”è¾ƒï¼Œåˆæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œä»ä¸­å¾—åˆ°astçš„ç›®å½•æ–‡ä»¶æ”¾åœ¨26å·ç´¢å¼•ç»“ç‚¹ä¸­ï¼Œå†ä»26å·ç´¢å¼•ç»“ç‚¹ä¸­å¾—çŸ¥&#x2F;usr&#x2F;astæ˜¯å­˜æ”¾åœ¨496å·ç›˜å—ä¸­ï¼Œå†è¯»å…¥496å·ç›˜å—ã€‚ç„¶åï¼Œå°†æ–‡ä»¶çš„ç¬¬ä¸‰ä¸ªåˆ†é‡åmboxè¯»å…¥ï¼Œç”¨å®ƒä¸ç¬¬ä¸‰çº§ç›®å½•æ–‡ä»¶&#x2F;usr&#x2F;astä¸­å„ç›®å½•é¡¹çš„æ–‡ä»¶åè¿›è¡Œæ¯”è¾ƒï¼Œæœ€åå¾—åˆ°&#x2F;usr&#x2F;ast&#x2F;mboxçš„ç´¢å¼•ç»“ç‚¹å·ä¸º60ï¼Œå³åœ¨60å·ç´¢å¼•ç»“ç‚¹ä¸­å­˜æ”¾äº†æŒ‡å®šæ–‡ä»¶çš„ç‰©ç†åœ°å€ï¼Œç›®å½•æŸ¥è¯¢æ“ä½œåˆ°æ­¤ç»“æŸï¼Œå¦‚æœåœ¨é¡ºåºæŸ¥æ‰¾è¿‡ç¨‹ä¸­å‘ç°æœ‰ä¸€ä¸ªæ–‡ä»¶åˆ†é‡åæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åœæ­¢æŸ¥æ‰¾ï¼Œå¹¶è¿”å›æ–‡ä»¶æœªæ‰¾åˆ°ä¿¡æ¯ã€‚</p>
<p>ã€€â‘¡ <strong>Hashæ–¹æ³•</strong>ï¼Œç³»ç»Ÿåˆ©ç”¨ç”¨æˆ·æä¾›çš„æ–‡ä»¶åå¹¶å°†å®ƒè½¬æ¢ä¸ºæ–‡ä»¶ç›®å½•çš„ç´¢å¼•å€¼ï¼Œå†åˆ©ç”¨è¯¥ç´¢å¼•å€¼åˆ°ç›®å½•ä¸­å»æŸ¥æ‰¾ï¼Œè¿™å°†æé«˜æ£€ç´¢é€Ÿåº¦ã€‚</p>
<p>â‘ åœ¨åˆ©ç”¨Hashå€¼æŸ¥æ‰¾ç›®å½•æ—¶ï¼Œå¦‚æœç›®å½•è¡¨ä¸­ç›¸åº”çš„ç›®å½•é¡¹æ˜¯ç©ºçš„ï¼Œåˆ™è¡¨ç¤ºç³»ç»Ÿä¸­å¹¶æ— æŒ‡å®šæ–‡ä»¶ã€‚<br>â‘¡å¦‚æœç›®å½•é¡¹ä¸­çš„æ–‡ä»¶åä¸æŒ‡å®šæ–‡ä»¶åç›¸åŒ¹é…ï¼Œåˆ™è¡¨ç¤ºè¯¥ç›®å½•é¡¹æ­£æ˜¯æ‰€è¦å¯»æ‰¾çš„æ–‡ä»¶æ‰€å¯¹åº”çš„ç›®å½•é¡¹ï¼Œæ•…è€Œå¯ä»ä¸­æ‰¾åˆ°è¯¥æ–‡ä»¶æ‰€åœ¨çš„ç‰©ç†åœ°å€ã€‚<br>â‘¢å¦‚æœåœ¨ç›®å½•è¡¨çš„ç›¸åº”ç›®å½•é¡¹ä¸­çš„æ–‡ä»¶åä¸æŒ‡å®šæ–‡ä»¶åå¹¶ä¸åŒ¹é…ï¼Œåˆ™è¡¨ç¤ºå‘ç”Ÿäº†â€œHashå†²çªâ€<br>è§£å†³Hashå†²çªçš„æ–¹æ³• ï¼šå°†å…¶Hashå€¼å†åŠ ä¸Šä¸€ä¸ª<strong>å¸¸æ•°</strong>ï¼ˆè¯¥å¸¸æ•°åº”ä¸ç›®å½•çš„é•¿åº¦å€¼äº’è´¨ï¼‰ï¼Œå½¢æˆæ–°çš„ç´¢å¼•å€¼ï¼Œå†è¿”å›åˆ°ç¬¬ä¸€æ­¥é‡oæ–°å¼€å§‹æŸ¥æ‰¾ã€‚</p>
<h2 id="æ–‡ä»¶å…±äº«å’Œè®¿é—®æ§åˆ¶"><a href="#æ–‡ä»¶å…±äº«å’Œè®¿é—®æ§åˆ¶" class="headerlink" title="æ–‡ä»¶å…±äº«å’Œè®¿é—®æ§åˆ¶"></a>æ–‡ä»¶å…±äº«å’Œè®¿é—®æ§åˆ¶</h2><p>æ–‡ä»¶å…±äº«çš„æœ‰æ•ˆæ§åˆ¶æ¶‰åŠä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>åŒæ—¶å­˜å–ï¼ˆSimultaneous Accessï¼‰</li>
<li>å­˜å–æƒé™ï¼ˆAccess Rightsï¼‰</li>
</ul>
<p>â€‹	å…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶è¯»æ–‡ä»¶å†…å®¹ï¼Œä½†<strong>ä¸å…è®¸åŒæ—¶ä¿®æ”¹</strong>ï¼Œæˆ–<strong>åŒæ—¶è¯»ä¸”ä¿®æ”¹æ–‡ä»¶å†…å®¹</strong>ã€‚å…±äº«ç”¨æˆ·ä¹‹ä¸€ä¿®æ”¹æ–‡ä»¶å†…å®¹æ—¶ï¼Œå¯ä»¥å°†æ•´ä¸ªæ–‡ä»¶ä½œä¸º<em>ä¸´ç•Œèµ„æº</em>ï¼Œé”å®šæ•´ä¸ªæ–‡ä»¶ï¼Œä¸å…è®¸å…¶ä»–å…±äº«ç”¨æˆ·åŒæ—¶è¯»æˆ–å†™æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥ä»…ä»…é”å®šæŒ‡å®šçš„ä¸€æ¡è®°å½•ï¼Œå…è®¸å…¶ä»–å…±äº«ç”¨æˆ·è¯»&#x2F;å†™è¯¥æ–‡ä»¶çš„å…¶å®ƒè®°å½•ã€‚åè€…çš„å¹¶å‘æ€§èƒ½æ›´å¥½ã€‚</p>
<p>æ§åˆ¶æˆæƒç”¨æˆ·ä»¥åˆæ³•çš„æ–¹å¼è®¿é—®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼š</p>
<blockquote>
<p>æ‰§è¡Œï¼ˆExecutionï¼‰ â€” ç”¨æˆ·å¯ä»¥è£…è½½å¹¶æ‰§è¡Œç¨‹åºï¼Œä½†ä¸å…è®¸æ‹·è´ç¨‹åºå†…å®¹ã€‚</p>
<p>è¯»ï¼ˆReadingï¼‰â€” å…è®¸ç”¨æˆ·è¯»æ–‡ä»¶å†…å®¹ï¼ŒåŒ…æ‹¬æ‹·è´å’Œæ‰§è¡Œæ–‡ä»¶ã€‚æŸäº›ç³»ç»Ÿä¸¥æ ¼åœ°å°†æµè§ˆæ–‡ä»¶å†…å®¹å’Œæ‹·è´æƒé™åˆ†å¼€ï¼Œå¯ä»¥æ§åˆ¶æ–‡ä»¶åªèƒ½è¢«æµè§ˆï¼ˆæ˜¾ç¤ºï¼‰ï¼Œä¸èƒ½è¢«æ‹·è´ã€‚</p>
<p>è¿½åŠ ï¼ˆAppendingï¼‰â€” å…è®¸ç”¨æˆ·å‘æ–‡ä»¶æ·»åŠ æ•°æ®ï¼Œé€šå¸¸åªèƒ½å°†æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶å°¾ã€‚ä½†æ˜¯ï¼Œä¸èƒ½ä¿®æ”¹æˆ–åˆ é™¤æ–‡ä»¶å†…å®¹ã€‚ä¾‹å¦‚ï¼Œè¶…å¸‚æ”¶é“¶å‘˜åªèƒ½å°†æ–°ç»“å¸çš„æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶ä¸­ï¼Œä¸å…è®¸å…¶ä¿®æ”¹æˆ–åˆ é™¤å·²æœ‰çš„æ•°æ®ã€‚</p>
<p>æ›´æ–°ï¼ˆUpdatingï¼‰â€” å…è®¸ç”¨æˆ·ä¿®æ”¹ã€åˆ é™¤ã€å¢åŠ æ–‡ä»¶å†…å®¹ã€‚åŒ…æ‹¬åˆ›å»ºæ–‡ä»¶ã€é‡å†™æ–‡ä»¶çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹ã€ç§»åŠ¨æ–‡ä»¶çš„å…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®ç­‰æ“ä½œã€‚</p>
<p>æ›´æ”¹æƒé™ (Changing protection) â€”ä¸€èˆ¬åªæœ‰æ–‡ä»¶ä¸»æ‰èƒ½æ›´æ”¹å…±äº«è¯¥æ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·å¯¹è¯¥æ–‡ä»¶çš„å­˜å–æƒé™ã€‚æœ‰çš„ç³»ç»Ÿå…è®¸æ–‡ä»¶ä¸»å°†æ›´æ”¹æ–‡ä»¶å­˜å–æƒé™èµ‹äºˆå…¶ä»–æŸä¸ªç”¨æˆ·ï¼Œä½†å¿…é¡»é™åˆ¶æˆæƒç”¨æˆ·æ›´æ”¹çš„æƒé™èŒƒå›´ã€‚</p>
<p>åˆ é™¤ (Deletion) å…è®¸ç”¨æˆ·åˆ é™¤æ–‡ä»¶</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_15-00-00.png"></p>
<p>â€‹	åœ¨æ ‘å‹ç»“æ„çš„ç›®å½•ä¸­ï¼Œå½“æœ‰ä¸¤ä¸ª(æˆ–å¤šä¸ª)ç”¨æˆ·è¦å…±äº«ä¸€ä¸ªå­ç›®å½•æˆ–æ–‡ä»¶æ—¶ï¼Œå¿…é¡»<em><strong>å°†å…±äº«æ–‡ä»¶æˆ–å­ç›®å½•é“¾æ¥åˆ°ä¸¤ä¸ª(æˆ–å¤šä¸ª)ç”¨æˆ·çš„ç›®å½•ä¸­</strong></em>ï¼Œæ‰èƒ½æ–¹ä¾¿åœ°æ‰¾åˆ°è¯¥æ–‡ä»¶ã€‚æ­¤æ—¶è¯¥æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„å·²ä¸å†æ˜¯æ ‘å‹ç»“æ„ï¼Œè€Œæ˜¯ä¸ª<em><strong>æœ‰å‘éå¾ªç¯å›¾</strong></em>ã€‚</p>
<p>â€‹	å®ç°æ–‡ä»¶å…±äº«çš„<strong>å®è´¨</strong>å°±æ˜¯å¯ä»¥<strong>ä»ä¸åŒåœ°æ–¹æ‰“å¼€åŒä¸€ä¸ªæ–‡ä»¶</strong>ã€‚æ‰“å¼€æ–‡ä»¶çš„é¦–è¦æ­¥éª¤å°±æ˜¯æ‰¾åˆ°æ–‡ä»¶çš„ç›®å½•é¡¹ï¼Œè¯»å–æ–‡ä»¶åœ¨å¤–å­˜çš„èµ·å§‹åœ°å€ã€‚<br>å®ç°æ–‡ä»¶å…±äº«çš„æ–¹å¼ï¼š</p>
<ul>
<li>åˆ©ç”¨é“¾æ¥ç›®å½•é¡¹å®ç°æ³•</li>
<li>åˆ©ç”¨ç´¢å¼•èŠ‚ç‚¹å®ç°æ³•</li>
<li>åˆ©ç”¨ç¬¦å·é“¾å®ç°æ³•</li>
</ul>
<p><strong>åˆ©ç”¨é“¾æ¥ç›®å½•é¡¹å®ç°æ³•</strong></p>
<p>æ–‡ä»¶ç›®å½•é¡¹ä¸­è®¾ç½®ä¸€ä¸ªé“¾æ¥æŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘å…±äº«æ–‡ä»¶çš„ç›®å½•é¡¹ã€‚è®¿é—®æ–‡ä»¶æ—¶ï¼Œæ ¹æ®é“¾æ¥æŒ‡é’ˆå†…å®¹æ‰¾åˆ°å…±äº«æ–‡ä»¶çš„ç›®å½•é¡¹ï¼Œè¯»å–è¯¥ç›®å½•é¡¹ä¸­æ–‡ä»¶èµ·å§‹ä½ç½®ç­‰ä¿¡æ¯ï¼Œæ“ä½œè¯¥æ–‡ä»¶ã€‚æ¯å½“æœ‰ç”¨æˆ·ï¼ˆè¿›ç¨‹ï¼‰å…±äº«æ–‡ä»¶æ—¶ï¼Œå…±äº«æ–‡ä»¶ç›®å½•é¡¹ä¸­çš„â€œå…±äº«è®¡æ•°â€åŠ 1ï¼›å½“ç”¨æˆ·ä¸å†å…±äº«è¯¥æ–‡ä»¶ï¼Œæ’¤æ¶ˆé“¾æ¥æŒ‡é’ˆæ—¶ï¼Œâ€œå…±äº«è®¡æ•°â€å‡1ã€‚åªæœ‰å½“å…±äº«æ–‡ä»¶ç”¨æˆ·æ•°ä¸º1æ—¶ï¼Œæ‰èƒ½åˆ é™¤å…±äº«æ–‡ä»¶ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_15-00-27.png"></p>
<p><strong>åˆ©ç”¨ç´¢å¼•èŠ‚ç‚¹å®ç°æ³•</strong>ï¼ˆç¡¬é“¾æ¥ï¼‰</p>
<p>â€‹	æ–‡ä»¶çš„ç‰©ç†åœ°å€åŠå…¶å®ƒçš„æ–‡ä»¶å±æ€§ç­‰ä¿¡æ¯ï¼Œä¸å†æ˜¯æ”¾åœ¨ç›®å½•é¡¹ä¸­ï¼Œè€Œæ˜¯æ”¾åœ¨ç´¢å¼•ç»“ç‚¹ä¸­ã€‚åœ¨æ–‡ä»¶ç›®å½•ä¸­åªè®¾ç½®æ–‡ä»¶ååŠæŒ‡å‘ç›¸åº”ç´¢å¼•ç»“ç‚¹çš„æŒ‡é’ˆã€‚ç”±ä»»ä½•ç”¨æˆ·å¯¹æ–‡ä»¶è¿›è¡ŒAppend æ“ä½œæˆ–ä¿®æ”¹ï¼Œæ‰€å¼•èµ·çš„ç›¸åº”ç»“ç‚¹å†…å®¹çš„æ”¹å˜(ä¾‹å¦‚ï¼Œå¢åŠ äº†æ–°çš„ç›˜å—å·å’Œæ–‡ä»¶é•¿åº¦ç­‰)ï¼Œéƒ½æ˜¯å…¶ä»–ç”¨æˆ·å¯è§çš„ï¼Œä»è€Œä¹Ÿå°±èƒ½æä¾›ç»™å…¶ä»–ç”¨æˆ·æ¥å…±äº«ã€‚</p>
<p>â€‹	å¯ä»¥é€šè¿‡<em><strong>å…±äº«æ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹æ¥å…±äº«æ–‡ä»¶</strong></em>ï¼Œå³å½“ç”¨æˆ·éœ€è¦å…±äº«æ–‡ä»¶æ—¶ï¼Œåœ¨è‡ªå·±çš„æ–‡ä»¶ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªç›®å½•é¡¹ï¼Œä¸ºå…±äº«æ–‡ä»¶å‘½å(ä¹Ÿå¯ç”¨åŸå)ï¼Œå¹¶å°†<em><strong>ç´¢å¼•èŠ‚ç‚¹æŒ‡é’ˆæŒ‡å‘å…±äº«æ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹</strong></em>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_15-00-37.png"></p>
<p>â€‹	åœ¨ç´¢å¼•ç»“ç‚¹ä¸­è¿˜åº”æœ‰ä¸€ä¸ªé“¾æ¥è®¡æ•°countï¼Œç”¨äºè¡¨ç¤ºé“¾æ¥åˆ°æœ¬ç´¢å¼•ç»“ç‚¹(äº¦å³æ–‡ä»¶)ä¸Šçš„ç”¨æˆ·ç›®å½•é¡¹çš„æ•°ç›®ã€‚å½“ç”¨æˆ·Cåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œä»–ä¾¿æ˜¯è¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œæ­¤æ—¶å°†count ç½®1ã€‚å½“æœ‰ç”¨æˆ·Bè¦å…±äº«æ­¤æ–‡ä»¶æ—¶ï¼Œåœ¨ç”¨æˆ·B çš„ç›®å½•<br>ä¸­å¢åŠ ä¸€ç›®å½•é¡¹ï¼Œå¹¶è®¾ç½®ä¸€æŒ‡é’ˆæŒ‡å‘è¯¥æ–‡ä»¶çš„ç´¢å¼•ç»“ç‚¹ï¼Œæ­¤æ—¶ï¼Œæ–‡ä»¶ä¸»ä»ç„¶æ˜¯Cï¼Œcount&#x3D;2ã€‚<br>â€‹	å¦‚æœç”¨æˆ·C ä¸å†éœ€è¦æ­¤æ–‡ä»¶ï¼Œæ˜¯å¦èƒ½å°†æ­¤æ–‡ä»¶åˆ é™¤å‘¢ï¼Ÿå› ä¸ºè‹¥åˆ é™¤äº†è¯¥æ–‡ä»¶ï¼Œä¹Ÿå¿…ç„¶åˆ é™¤äº†è¯¥æ–‡ä»¶çš„ç´¢å¼•ç»“ç‚¹ï¼Œè¿™æ ·ä¾¿ä¼šä¾¿ç”¨æˆ·Bçš„æŒ‡é’ˆæ‚¬ç©ºï¼Œè€Œç”¨æˆ·Båˆ™å¯èƒ½æ­£åœ¨æ­¤æ–‡ä»¶ä¸Šæ‰§è¡Œå†™æ“ä½œï¼Œæ­¤æ—¶ç”¨æˆ·Bä¼šæ— æ³•è®¿é—®åˆ°æ–‡ä»¶ã€‚å› æ­¤ç”¨æˆ·Cä¸èƒ½åˆ é™¤æ­¤æ–‡ä»¶ï¼Œåªæ˜¯å°†è¯¥æ–‡ä»¶çš„countå‡1ï¼Œç„¶ååˆ é™¤è‡ªå·±ç›®å½•ä¸­çš„ç›¸åº”ç›®å½•é¡¹ã€‚ç”¨æˆ·Bä»å¯ä»¥ä½¿ç”¨è¯¥æ–‡ä»¶ã€‚å½“count &#x3D;0æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰ç”¨æˆ·ä½¿ç”¨è¯¥æ–‡ä»¶ï¼Œç³»ç»Ÿå°†è´Ÿè´£åˆ é™¤è¯¥æ–‡ä»¶ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-15_15-00-52.png"></p>
<p><strong>åˆ©ç”¨ç¬¦å·é“¾å®ç°æ³•</strong>ï¼ˆè½¯é“¾æ¥ï¼‰</p>
<p>â€‹	ä¸ºä½¿Bèƒ½å…±äº«Cçš„ä¸€ä¸ªæ–‡ä»¶Fï¼Œå¯ä»¥ç”±ç³»ç»Ÿ<em><strong>åˆ›å»ºä¸€ä¸ªLINKç±»å‹çš„æ–°æ–‡ä»¶</strong></em>ï¼Œä¹Ÿå–åä¸ºFå¹¶å°†Få†™å…¥Bçš„ç›®å½•ä¸­ï¼Œä»¥å®ç°Bçš„ç›®å½•ä¸æ–‡ä»¶Fçš„é“¾æ¥ï¼›åœ¨æ–°æ–‡ä»¶<em><strong>åª<br>åŒ…å«è¢«åˆ›æ–‡ä»¶Fçš„è·¯å¾„å</strong></em>ã€‚è¿™æ ·çš„é“¾æ¥æ–¹æ³•è¢«ç§°ä¸º<strong>ç¬¦å·é“¾æ¥</strong>ã€‚æ–°æ–‡ä»¶ä¸­çš„è·¯å¾„åï¼Œåˆ™åªè¢«çœ‹ä½œæ˜¯ç¬¦å·é“¾ã€‚å½“Bè¦è®¿é—®è¢«é“¾æ¥çš„æ–‡ä»¶Fä¸”æ­£è¦è¯»LINKç±»æ–°æ–‡ä»¶æ—¶ï¼Œ<em><strong>å°†è¢«OSæˆªè·ï¼Œ OSæ ¹æ®æ–°æ–‡ä»¶ä¸­çš„è·¯å¾„åå»è¯»è¯¥æ–‡ä»¶</strong></em>ï¼Œäºæ˜¯å°±å®ç°äº†ç”¨æˆ·Bå¯¹æ–‡ä»¶Fçš„å…±äº«ã€‚<br>â€‹	åœ¨åˆ©ç”¨ç¬¦å·é“¾æ–¹å¼å®ç°æ–‡ä»¶å…±äº«æ—¶ï¼Œåªæ˜¯æ–‡ä»¶ä¸»æ‰æ‹¥æœ‰æŒ‡å‘å…¶ç´¢å¼•ç»“ç‚¹çš„æŒ‡é’ˆ,è€Œå…±äº«è¯¥æ–‡ä»¶çš„å…¶å®ƒç”¨æˆ·ï¼Œåˆ™åªæœ‰è¯¥æ–‡ä»¶çš„è·¯å¾„åï¼Œå¹¶ä¸æ‹¥æœ‰æŒ‡å‘å…¶ç´¢å¼•ç»“ç‚¹çš„æŒ‡é’ˆã€‚</p>
<p>ç¬¦å·é“¾æ–¹å¼ä¼˜ç‚¹ï¼šèƒ½è¿æ¥ä»»ä½•æœºå™¨ä¸Šçš„æ–‡ä»¶ã€‚æ¯å¢åŠ ä¸€ä¸ªè¿æ¥ï¼Œå°±å¢åŠ ä¸€ä¸ªæ–‡ä»¶åï¼Œå„ç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„åå­—å»å…±äº«æ–‡ä»¶ã€‚<br>ç¼ºç‚¹ï¼šå¤‡ä»½å¯èƒ½ä¼šäº§ç”Ÿå¤šä¸ªæ‹·è´ã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„ç¬¦å·é“¾æ¥ï¼Œè€Œå¤‡ä»½ç¨‹åºå¯èƒ½æ— æ³•è¯†åˆ«è¿™äº›ç¬¦å·é“¾æ¥å®é™…ä¸ŠæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ã€‚å› æ­¤ï¼Œå®ƒå¯èƒ½ä¼šä¸ºæ¯ä¸ªç¬¦å·é“¾æ¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å¤‡ä»½ï¼Œä»è€Œå¯¼è‡´å¤šä¸ªæ‹·è´ã€‚</p>
<p><strong>åˆ©ç”¨URLå®ç°æ–‡ä»¶å…±äº«</strong><br>    ç»Ÿä¸€èµ„æºå®šä½å™¨URL (Uniform Resource Locator)æ˜¯Internetä¸Šç”¨æ¥é“¾æ¥è¶…æ–‡æœ¬æ–‡ä»¶çš„ä¸€ç§æ–¹æ³•ã€‚å®ƒå¯ä»¥é“¾æ¥åŒä¸€å°è®¡ç®—æœºä¸­çš„æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿå¯é“¾æ¥Internetä¸­ä»»ä½•ä¸»æœºä¸Šçš„è¿œç¨‹æ–‡ä»¶ã€‚ä¸€ä¸ªå®Œæ•´çš„URLåŒ…æ‹¬è®¿é—®æ–‡ä»¶çš„æ–¹æ³•ï¼ˆåè®®ï¼‰ã€æ–‡ä»¶æ‰€åœ¨çš„ä¸»æœºåŸŸåã€ç›®å½•è·¯å¾„åå’Œæ–‡ä»¶åå‡ éƒ¨ä»½ã€‚ä¾‹å¦‚ï¼Œ<br><a href="http://www.uestc.edu.cn/templates/index2k3/index.html">http://www.uestc.edu.cn/templates/index2k3/index.html</a></p>
<p><strong>æ–‡ä»¶ä¿æŠ¤</strong></p>
<p>â€‹	ä¸åŒå¯¹è±¡å…è®¸å®æ–½çš„æ“ä½œå„ä¸ç›¸åŒã€‚ä¾‹å¦‚ï¼Œæ–‡ä»¶å¯æ–½åŠ è¯»ã€å†™ã€æ‰§è¡Œç­‰æ“ä½œï¼Œä¿¡å·é‡åªèƒ½æ–½åŠ wait()å’Œsignal()æ“ä½œã€‚å› æ­¤ï¼Œ<em><strong>ç³»ç»Ÿä¸ºæ‰€æœ‰å¯¹è±¡è®¾ç½®ä¸€ä¸ªå…è®¸è¿›ç¨‹å®æ–½æ“ä½œçš„æ“ä½œé›†</strong></em>ï¼Œä»»ä½•å¯¹å¯¹è±¡çš„æ“ä½œå¿…é¡»ç¬¦åˆæ“ä½œé›†ä¸­çš„è§„å®šï¼Œé˜²æ­¢æœªæˆæƒè¿›ç¨‹è®¿é—®å¯¹è±¡ã€‚</p>
<p>ä¾‹ä¸€ï¼šå­˜æ”¾åœ¨æŸä¸ªç£ç›˜ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯¹äºé‡‡ç”¨æ··åˆç´¢å¼•åˆ†é…æ–¹å¼ï¼Œå…¶FCBä¸­å…±æœ‰13é¡¹åœ°å€é¡¹ï¼Œç¬¬0ï½9ä¸ªåœ°å€é¡¹ä¸ºç›´æ¥åœ°å€ï¼Œç¬¬10ä¸ªåœ°å€é¡¹ä¸ºä¸€æ¬¡é—´æ¥åœ°å€ï¼Œç¬¬11ä¸ªåœ°å€é¡¹ä¸ºäºŒæ¬¡ é—´æ¥åœ°å€ï¼Œç¬¬12ä¸ªåœ°å€é¡¹ä¸ºä¸‰æ¬¡é—´æ¥åœ°å€ã€‚å¦‚æœæ¯ä¸ªç›˜å—çš„å¤§å°ä¸º512å­—èŠ‚ï¼Œç›˜å—å·éœ€è¦3ä¸ªå­—èŠ‚æ¥æè¿°ï¼Œåˆ™æ¯ä¸ªç›˜å—æœ€å¤šå­˜æ”¾170ä¸ªç›˜å—åœ°å€ã€‚<br> (1) è¯¥æ–‡ä»¶ç³»ç»Ÿå…è®¸çš„æœ€å¤§é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿ<br> (2) å°†æ–‡ä»¶çš„å­—èŠ‚åç§»é‡5000ã€15000ã€150000è½¬æ¢ä¸ºç‰©ç†å—å·å’Œå—å†…åç§»é‡ã€‚<br> (3) å‡è®¾æŸæ–‡ä»¶çš„ç´¢å¼•ç»“ç‚¹å·²åœ¨å†…å­˜ä¸­ï¼Œä½†å…¶ä»–ä¿¡æ¯å‡åœ¨å¤–å­˜ï¼Œä¸ºäº†è®¿é—®è¯¥æ–‡ä»¶ä¸­æŸä¸ªä½ç½®çš„å†…å®¹ï¼Œæœ€å¤šéœ€è¦å‡ æ¬¡è®¿ é—®ç£ç›˜ï¼Ÿ</p>
<p>(1) è¯¥æ–‡ä»¶ç³»ç»Ÿä¸­ä¸€ä¸ªæ–‡ä»¶çš„æœ€å¤§é•¿åº¦å¯è¾¾:</p>
<p>10+170+170Ã—170+170Ã—170Ã—170&#x3D;4942080å—,å…±4942080Ã—512å­—èŠ‚&#x3D;2471040KB</p>
<p>(2)5000&#x2F;512å¾—åˆ°å•†ä¸º9,ä½™æ•°ä¸º392,å³å­—èŠ‚åç§»é‡5000å¯¹åº”çš„é€»è¾‘å—å·ä¸º9,å—å†…åç§»é‡ä¸º392ã€‚ç”±äº9&lt;10,æ•…å¯ç›´æ¥ä»è¯¥æ–‡ä»¶çš„FCBçš„ç¬¬9ä¸ªåœ°å€é¡¹å¤„å¾—åˆ°ç‰©ç†ç›˜å—å·,å—å†…åç§»é‡ä¸º392ã€‚</p>
<p>15000&#x2F;512å¾—åˆ°å•†ä¸º29,ä½™æ•°ä¸º152,å³å­—èŠ‚åç§»é‡15000å¯¹åº”çš„é€»è¾‘å—å·ä¸º29,å—å†…åç§»é‡ä¸º152ã€‚ç”±äº10&lt; 29&lt; 10+170,è€Œ29-10&#x3D;19,æ•…å¯ä»FCBçš„ç¬¬10ä¸ªåœ°å€é¡¹,å³ä¸€æ¬¡é—´å€é¡¹ä¸­å¾—åˆ°ä¸€æ¬¡é—´å€å—çš„åœ°å€;å¹¶ä»ä¸€æ¬¡é—´å€å—çš„ç¬¬19é¡¹(å³è¯¥å—çš„ç¬¬57~59è¿™3ä¸ªå­—èŠ‚)ä¸­è·å¾—å¯¹åº”çš„ç‰©ç†ç›˜å—å·,å—å†…åç§»é‡ä¸º152ã€‚</p>
<p>150000&#x2F;512å¾—åˆ°å•†ä¸º292,ä½™æ•°ä¸º496,å³å­—èŠ‚åç§»é‡150000å¯¹åº”çš„é€»è¾‘å—å·ä¸º292,å—å†…åç§»é‡ä¸º496ã€‚ç”±äº10+170&lt; 292&lt; 10+170+170Ã—170,è€Œ292-(10+170)&#x3D;112,112&#x2F;170å¾—åˆ°å•†ä¸º0,ä½™æ•°ä¸º112,æ•…å¯ä»FCBçš„ç¬¬11ä¸ªåœ°å€é¡¹,å³äºŒæ¬¡é—´å€é¡¹ä¸­å¾—åˆ°äºŒæ¬¡é—´å€å—çš„åœ°å€,å¹¶ä»äºŒæ¬¡é—´å€å—çš„ç¬¬0é¡¹ä¸­è·å¾—ä¸€ä¸ªä¸€æ¬¡é—´å€å—çš„åœ°å€,å†ä»è¿™ä¸€æ¬¡é—´å€å—çš„ç¬¬112é¡¹ä¸­è·å¾—å¯¹åº”çš„ç‰©ç†ç›˜å—å·,å—å†…åç§»é‡ä¸º496ã€‚</p>
<p>(3) ç”±äºæ–‡ä»¶çš„FCBå·±åœ¨å†…å­˜ï¼Œä¸ºäº†è®¿é—®æ–‡ä»¶ä¸­æŸä¸ªä½ç½®çš„å†…å®¹ï¼Œæœ€å°‘éœ€è¦1æ¬¡è®¿é—®ç£ç›˜(å³å¯é€šè¿‡ç›´æ¥åœ°å€ç›´æ¥è¯»æ–‡ä»¶ç›˜å—)ï¼Œæœ€å¤šéœ€è¦4æ¬¡è®¿é—®ç£ç›˜(ç¬¬ä¸€æ¬¡æ˜¯è¯»ä¸‰æ¬¡é—´å€å—,ç¬¬äºŒæ¬¡æ˜¯è¯»äºŒæ¬¡é—´å€å—,ç¬¬ä¸‰æ¬¡æ˜¯è¯»ä¸€æ¬¡é—´å€å—,ç¬¬å››æ¬¡æ˜¯è¯»æ–‡ä»¶ç›˜å—)ã€‚</p>
<p>ä¾‹äºŒï¼šæœ‰ä¸€ä¸ªç£ç›˜ç»„å…±ç”¨10ä¸ªç›˜é¢ï¼Œæ¯ä¸ªç›˜é¢ä¸Šæœ‰100ä¸ªç£é“ï¼Œæ¯ä¸ªç£é“æœ‰16ä¸ªæ‰‡åŒºï¼Œå‡å®šä»¥æ‰‡åŒºä¸ºå•ä½ï¼Œè‹¥ä½¿ ç”¨ä½ç¤ºå›¾ç®¡ç†ç£ç›˜ç©ºé—´ï¼Œé—®ä½ç¤ºå›¾éœ€è¦å å¤šå°‘ç©ºé—´ï¼Ÿ è‹¥ç©ºé—²è¡¨çš„æ¯ä¸ªç©ºé—²è¡¨é¡¹å ç”¨5ä¸ªå­—èŠ‚ï¼Œé—®ä»€ä¹ˆæ—¶å€™ç©ºé—²è¡¨å¤§äºä½ç¤ºå›¾ï¼Ÿ</p>
<p>â€‹	ç£ç›˜ç»„çš„æ€»æ‰‡åŒºæ•°ä¸º10 * 100 * 16 &#x3D; 16000ã€‚å› æ­¤ï¼Œä½ç¤ºå›¾éœ€è¦å ç”¨16000ä½ &#x3D; 2000å­—èŠ‚çš„ç©ºé—´ã€‚</p>
<p>â€‹	è‹¥ç©ºé—²è¡¨çš„æ¯ä¸ªç©ºé—²è¡¨é¡¹å ç”¨5ä¸ªå­—èŠ‚ï¼Œåˆ™å½“ç©ºé—²è¡¨é¡¹æ•°å¤§äº2000&#x2F;5&#x3D;400æ—¶ï¼Œç©ºé—²è¡¨çš„å¤§å°å°†å¤§äºä½ç¤ºå›¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç£ç›˜ç»„ä¸­æœ‰è¶…è¿‡400ä¸ªè¿ç»­çš„ç©ºé—²æ‰‡åŒºæ—¶ï¼Œä½¿ç”¨ç©ºé—²è¡¨ç®¡ç†ç£ç›˜ç©ºé—´æ‰€éœ€çš„å­˜å‚¨ç©ºé—´å°†å¤§äºä½¿ç”¨ä½ç¤ºå›¾æ‰€éœ€çš„å­˜å‚¨ç©ºé—´ã€‚</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘æœŸæœ«å¤ä¹ ä¹‹è®¡ç®—æœºç½‘ç»œä¸å› ç‰¹ç½‘</title>
    <url>/2023/06/20/%E8%AE%A1%E7%BD%91/1/</url>
    <content><![CDATA[<ol>
<li><p><strong>è®¡ç®—æœºç½‘ç»œ</strong>ï¼šä¸¤å°ä»¥ä¸Šå…·æœ‰ç‹¬ç«‹æ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºé€šè¿‡æŸäº›ä»‹è´¨è¿æ¥æˆçš„ç›¸äº’å…±äº«è½¯ç¡¬ä»¶èµ„æºçš„é›†åˆä½“ã€‚</p>
</li>
<li><p>è®¡ç®—æœºç½‘ç»œå‘ç”¨æˆ·æä¾›çš„æœ€é‡è¦çš„ä¸¤å¤§åŠŸèƒ½:<strong>è¿é€šæ€§ã€å…±äº«</strong>ã€‚</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯Internetï¼Ÿ</p>
</li>
</ol>
<p>â€‹	<strong>å…·ä½“æ„æˆæè¿°</strong>ï¼šæ•°ä»¥äº¿è®¡çš„è®¡ç®—äº’è¿è®¾å¤‡ã€é€šä¿¡é“¾è·¯(link)ã€åˆ†ç»„(packet)äº¤æ¢ã€‚ï¼ˆç¡¬ä»¶ä¸Šæè¿°ï¼‰</p>
<p>â€‹	<strong>æœåŠ¡ä¸Šæè¿°</strong>ï¼šæä¾›ç½‘ç»œåº”ç”¨åŸºç¡€æ¶æ„ã€ä¸ºåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºæä¾›é€šä¿¡æœåŠ¡æ¥å£ï¼ˆæ— è¿æ¥æœåŠ¡å’Œé¢å‘è¿æ¥æœåŠ¡ï¼‰ã€‚</p>
<ol start="4">
<li><p>ISPæ˜¯æŒ‡äº’è”ç½‘æœåŠ¡æä¾›å•†ã€‚</p>
</li>
<li><p>åè®®å®šä¹‰äº†ä¸¤ä¸ªæˆ–å¤šä¸ªé€šä¿¡å®ä½“é—´æ‰€äº¤æ¢æŠ¥æ–‡çš„<strong>æ ¼å¼å’Œé¡ºåº</strong>ï¼Œä»¥åŠåœ¨æŠ¥æ–‡å‘é€å’Œ&#x2F;æˆ–æ¥æ”¶æˆ–è€…å…¶ä»–äº‹ä»¶æ–¹é¢æ‰€é‡‡å–çš„<strong>è¡ŒåŠ¨ï¼ˆå“åº”ï¼‰</strong></p>
</li>
</ol>
<p>â€‹	åè®®çš„åŸºæœ¬è¦ç´ :</p>
<ul>
<li><p>è¯­æ³•ï¼šæŠ¥æ–‡æ ¼å¼</p>
</li>
<li><p>è¯­ä¹‰ï¼šå„å­—æ®µçš„å«ä¹‰</p>
</li>
<li><p>åŒæ­¥(æ—¶åº)ï¼šæŠ¥æ–‡ä¼ è¾“çš„å…ˆåé¡ºåº</p>
</li>
</ul>
<ol start="6">
<li>Internetæ ‡å‡†çš„å‡ ä¸ªé˜¶æ®µï¼š</li>
</ol>
<blockquote>
<p>å› ç‰¹ç½‘è‰æ¡ˆï¼ˆInternet Draftï¼‰ï¼ä¸æ˜¯RFCæ–‡æ¡£</p>
<p>å»ºè®®æ ‡å‡†ï¼ˆProposed Standardï¼‰ ï¼å¼€å§‹æˆä¸ºRFCæ–‡æ¡£</p>
<p>è‰æ¡ˆæ ‡å‡†ï¼ˆDraft Standardï¼‰</p>
<p>å› ç‰¹ç½‘æ ‡å‡†ï¼ˆInternet Standardï¼‰</p>
</blockquote>
<ol start="7">
<li><p>å› ç‰¹ç½‘ç»„æˆéƒ¨åˆ†ï¼šè¾¹ç¼˜éƒ¨åˆ†ã€æ ¸å¿ƒéƒ¨åˆ†</p>
</li>
<li><p>ç½‘ç»œè¾¹ç¼˜ï¼š</p>
</li>
</ol>
<ul>
<li><p>ç«¯ç³»ç»Ÿ (&#x2F;ä¸»æœº):è¿è¡Œç½‘ç»œåº”ç”¨ç¨‹åºã€å¤„åœ¨ç½‘ç»œçš„è¾¹ç¼˜</p>
</li>
<li><p>é€šä¿¡æ¨¡å‹ï¼šå®¢æˆ·&#x2F;æœåŠ¡å™¨C&#x2F;Sæ¨¡å‹ï¼ˆå®¢æˆ·è¯·æ±‚ï¼Œå¹¶æ¥æ”¶æœåŠ¡å™¨æä¾›çš„æœåŠ¡ï¼‰ã€ç«¯å¯¹ç«¯æ¨¡å‹peer-peer modelï¼ˆP2Pï¼‰ï¼ˆæ‰€æœ‰çš„é€šä¿¡æ–¹æ—¢å¯ä»¥åšå®¢æˆ·æœºåˆå¯ä»¥åšæœåŠ¡å™¨ï¼‰</p>
</li>
</ul>
<ol start="9">
<li>æ¥å…¥ç½‘ï¼ˆç½‘ç»œè¾¹ç¼˜ä¸ç½‘ç»œæ ¸å¿ƒçš„è¿æ¥éƒ¨åˆ†ç§°ä¸ºæ¥å…¥ç½‘ï¼‰ï¼š</li>
</ol>
<p>ï¼ˆ1ï¼‰è¾¹ç¼˜è·¯ç”±å™¨ï¼šç«¯ç³»ç»Ÿåˆ°ä»»ä½•å…¶ä»–è¿œç¨‹ç«¯ç³»ç»Ÿçš„è·¯å¾„ä¸Šçš„ç¬¬ä¸€å°è·¯ç”±å™¨ã€‚</p>
<p>ï¼ˆ2ï¼‰æ¥å…¥ç½‘ï¼šå°†ç«¯ç³»ç»Ÿè¿æ¥åˆ°å…¶<strong>è¾¹ç¼˜è·¯ç”±å™¨</strong>çš„ç‰©ç†é“¾è·¯ï¼Œæ˜¯ç”¨æˆ·è¿æ¥åˆ°ç½‘ç»œçš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>ï¼ˆ3ï¼‰é‡è¦æŒ‡æ ‡ï¼šå¸¦å®½ã€ç‹¬å &#x2F;å…±äº«</p>
<ol start="10">
<li>å¦‚ä½•å°†ç»ˆç«¯ç³»ç»Ÿè¿æ¥åˆ°ç½‘ç»œè¾¹ç¼˜çš„è·¯ç”±å™¨ï¼š</li>
</ol>
<p>ï¼ˆ1ï¼‰å®¶åº­æ¥å…¥ç½‘ç»œ</p>
<p>ï¼ˆ2ï¼‰ä¼ä¸šï¼ˆå’Œå®¶åº­ï¼‰æ¥å…¥ç½‘ç»œ</p>
<p>ï¼ˆ3ï¼‰å¹¿åŸŸæ— çº¿æ¥å…¥ç½‘ç»œ</p>
<ol start="11">
<li>å®¶åº­æ¥å…¥ç½‘ç»œï¼š</li>
</ol>
<p>ï¼ˆ1ï¼‰ç‚¹å¯¹ç‚¹æ¥å…¥</p>
<p>ï¼ˆ2ï¼‰çº¿ç¼†è°ƒåˆ¶è§£è°ƒå™¨</p>
<p>ï¼ˆ3ï¼‰å…‰çº¤åˆ°æˆ·</p>
<ol start="12">
<li>ä¼ä¸šï¼ˆå’Œå®¶åº­ï¼‰æ¥å…¥ç½‘ç»œ  ï¼š</li>
</ol>
<p>ï¼ˆ1ï¼‰LANï¼ˆ Ethernet æŠ€æœ¯ï¼‰</p>
<p>ï¼ˆ2ï¼‰WIFIï¼ˆæ— çº¿å±€åŸŸç½‘æŠ€æœ¯ï¼Œ802.11ï¼‰</p>
<ol start="13">
<li><p>å¹¿åŸŸæ— çº¿æ¥å…¥ç½‘ï¼š3Gã€4Gã€5G</p>
</li>
<li><p>ç‰©ç†åª’ä½“ï¼š</p>
</li>
</ol>
<p>ï¼ˆ1ï¼‰é€šè¿‡ä¼ æ’­ç”µç£æ³¢æˆ–å…‰è„‰å†²æ¥å‘é€<strong>æ¯”ç‰¹æµ</strong>ï¼Œåœ¨ç‰©ç†åª’ä½“ä¸­æ•°æ®ä¼ è¾“æ˜¯ä¸²è¡Œçš„ã€‚</p>
<p>ï¼ˆ2ï¼‰ç‰©ç†åª’ä½“åˆ†ç±»ï¼šå¯¼å¼•å‹åª’ä½“å’Œéå¯¼å¼•å‹åª’ä½“</p>
<p>ï¼ˆ3ï¼‰ç‰©ç†åª’ä½“çš„æ€§èƒ½å¯¹ç½‘ç»œçš„é€šä¿¡ã€é€Ÿåº¦ã€è·ç¦»ã€ä»·æ ¼ä»¥åŠç½‘ç»œä¸­çš„ç»“ç‚¹æ•°å’Œå¯é æ€§éƒ½æœ‰å¾ˆå¤§å½±å“</p>
<p>ï¼ˆ4ï¼‰å¯¼å¼•å‹åª’ä½“ï¼ˆä¿¡å·åœ¨å›ºæ€ä»‹è´¨ä¸­æœ‰å‘ä¼ æ’­ï¼‰ï¼š</p>
<ul>
<li><p>åŒç»çº¿ï¼šåˆ†ä¸ºå±è”½åŒç»çº¿ STPï¼ˆç”µç¼†çš„å¤–å±‚ç”±é“æ³ŠåŒ…è£¹ï¼‰ï¼Œéå±è”½åŒç»çº¿ UTP</p>
</li>
<li><p>åŒè½´ç”µç¼†ï¼šå…±äº«ä»‹è´¨</p>
</li>
<li><p>å…‰çº¤ï¼šé«˜é€Ÿä¼ è¾“ã€ä¼ è¾“è·ç¦»è¿œã€é˜²æ­¢ç”µç£å¹²æ‰°ï¼Œéš¾ä»¥è¢«åˆ†å…‰çªƒå¬</p>
</li>
</ul>
<p>ï¼ˆ5ï¼‰éå¯¼å¼•å‹åª’ä½“ï¼ˆä¿¡å·åœ¨å¤§æ°”ç©ºé—´æˆ–å¤–å¤ªç©ºç©ºé—´è‡ªç”±ä¼ æ’­ï¼‰ï¼šå¤šè·¯å¾„è¡°è½ã€ç›²åŒºè¡°è½ã€å¹²æ‰°ã€‚ç±»å‹æœ‰åœ°é¢å¾®æ³¢ï¼Œå±€åŸŸæ— çº¿ç”µ (WiFi),å¹¿åŸŸæ— çº¿ç”µï¼ˆ3Gã€4Gã€5Gï¼‰ã€å«æ˜Ÿé€šä¿¡ã€‚</p>
<ol start="15">
<li>ç«¯ç³»ç»Ÿä¸Šå› ç‰¹ç½‘æä¾›çš„æœåŠ¡</li>
</ol>
<p>ï¼ˆ1ï¼‰é¢å‘è¿æ¥çš„æœåŠ¡TCPï¼šå¯é ã€é¡ºåºã€å­—èŠ‚æµä¼ è¾“ï¼›æµé‡æ§åˆ¶ï¼›æ‹¥å¡æ§åˆ¶</p>
<p>ï¼ˆ2ï¼‰æ— è¿æ¥æœåŠ¡UDPï¼šä¸å¯é æ•°æ®ä¼ è¾“ã€æ— æµé‡æ§åˆ¶ã€æ— æ‹¥å¡æ§åˆ¶</p>
<ol start="16">
<li>ç½‘ç»œæ ¸å¿ƒ</li>
</ol>
<p>ï¼ˆ1ï¼‰ç›¸äº’è¿æ¥çš„è·¯ç”±å™¨æ„æˆçš„ç½‘ç»œ</p>
<p>ï¼ˆ2ï¼‰å¦‚ä½•åœ¨è¿™ä¸ªç½‘ç»œä¸­ä¼ é€æ•°æ®ï¼Ÿï¼ˆç”µè·¯äº¤æ¢ã€åˆ†ç»„äº¤æ¢ï¼‰</p>
<ol start="17">
<li>ç”µè·¯äº¤æ¢</li>
</ol>
<p>ï¼ˆ1ï¼‰é¢„å…ˆå»ºç«‹è¿æ¥ï¼Œé¢„ç•™èµ„æºï¼Œå‘é€æ–¹ä»¥æ’å®šé€Ÿåº¦å‘é€æ•°æ®</p>
<p>ï¼ˆ2ï¼‰ç”µè·¯å’Œé€šä¿¡é“¾è·¯çš„åŒºåˆ«</p>
<p>ï¼ˆ3ï¼‰é“¾è·¯å¸¦å®½å’Œä¸€æ¡ç”µè·¯çš„ä¼ è¾“é€Ÿç‡çš„å…³ç³»</p>
<p>ï¼ˆ4ï¼‰é¢‘åˆ†å¤šè·¯å¤ç”¨å’Œæ—¶åˆ†å¤šè·¯å¤ç”¨ï¼ˆä¼šè®¡ç®—ï¼‰</p>
<p>ï¼ˆ5ï¼‰ç”µè·¯äº¤æ¢çš„ä¼˜ç¼ºç‚¹ï¼šç”µè·¯çº§çš„æ€§èƒ½ï¼Œæ—¶å»¶å°ï¼›æ•ˆç‡ä½ï¼›åˆ›å»ºè¿æ¥è¿‡ç¨‹å¤æ‚</p>
<p>è®¾æ–‡ä»¶é•¿640kbï¼Œé“¾è·¯é‡‡ç”¨æ—¶éš™æ•°ä¸º24çš„TDMï¼Œä¼ è¾“é€Ÿç‡1.536Mb&#x2F;sï¼Œä¸»æœºä¹‹é—´åˆ›å»ºä¸€æ¡ç«¯åˆ°ç«¯ç”µè·¯éœ€500msã€‚</p>
<blockquote>
<p>æ¯æ¡ç”µè·¯çš„ä¼ è¾“é€Ÿç‡ï¼š(1.536Mb&#x2F;s) &#x2F;24&#x3D;64kb&#x2F;s</p>
<p>ä¼ è¾“æ–‡ä»¶æ—¶é—´ï¼š640kb&#x2F;(64kb&#x2F;s)&#x3D;10s</p>
<p>Aåˆ°Bçš„æ€»å‘é€æ—¶é—´ï¼š10s+0.5s&#x3D;10.5s</p>
</blockquote>
<ol start="18">
<li>åˆ†ç»„äº¤æ¢</li>
</ol>
<p>ï¼ˆ1ï¼‰æŠ¥æ–‡ï¼šåº”ç”¨ç¨‹åºè¦ä¼ è¾“çš„ä¿¡æ¯ï¼ŒåŒ…å«æ§åˆ¶æˆ–æ•°æ®</p>
<p>ï¼ˆ2ï¼‰åˆ†ç»„ï¼šæŠ¥æ–‡æ‹†åˆ†æˆè‹¥å¹²çš„æ•°æ®å—ï¼Œæ¯ä¸ªæ•°æ®å—åŠ ä¸Šå¤´éƒ¨ä¿¡æ¯ï¼Œæ„æˆåˆ†ç»„</p>
<p>ï¼ˆ3ï¼‰ç‰¹ç‚¹ï¼šæ‰€æœ‰åˆ†ç»„å…±äº«ç½‘ç»œèµ„æºã€æ¯ä¸ªåˆ†ç»„ä½¿ç”¨å…¨éƒ¨é“¾è·¯å¸¦å®½ã€èµ„æºæŒ‰éœ€ä½¿ç”¨ï¼›</p>
<p>ä¼˜ç‚¹ï¼šé€‚åˆå¤§é‡çš„çªå‘æ•°æ®ä¼ è¾“ï¼Œèµ„æºå…±äº«ã€ç®€å•, ä¸éœ€è¦å»ºç«‹è¿æ¥ </p>
<p>ç¼ºç‚¹ï¼šè¿‡æ¸¡ç«äº‰å¯¼è‡´åˆ†ç»„å»¶è¿Ÿä¸ä¸¢å¤±ï¼Œéœ€è¦å¯é æ•°æ®ä¼ è¾“ã€æ‹¥å¡æ§åˆ¶åè®®</p>
<ol start="19">
<li>ç½‘ç»œçš„åˆ†ç±»ï¼š</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-20_21-48-31.png"></p>
<ul>
<li><p>è™šç”µè·¯ç½‘ç»œä¸€å®šæ˜¯é¢å‘è¿æ¥çš„ã€‚ </p>
</li>
<li><p>æ•°æ®æŠ¥ç½‘ç»œæ—¢å¯ä»¥æä¾›é¢å‘è¿æ¥çš„æœåŠ¡ä¹Ÿå¯ä»¥æä¾›æ— è¿æ¥çš„æœåŠ¡ã€‚å¦‚ï¼š Internetä¸ºç½‘ç»œåº”ç”¨æ—¢æä¾›é¢å‘è¿æ¥çš„ä¼ è¾“æœåŠ¡ (TCP)ï¼Œä¹Ÿæä¾›æ— è¿æ¥çš„ä¼ è¾“æœåŠ¡(UDP)ã€‚</p>
</li>
</ul>
<ol start="20">
<li><p>Internetä¸»å¹²&#x2F;ISPçš„ç»“æ„ç»„æˆï¼šç¬¬ä¸€å±‚ISPï¼ˆå›½å®¶&#x2F;å›½é™…çº§ï¼‰ã€ç¬¬äºŒå±‚ISPï¼ˆåŒºåŸŸçº§&#x2F;çœçº§ï¼‰ã€ç¬¬ä¸‰å±‚ISPï¼ˆåŸå¸‚çº§ï¼‰ã€æœ¬åœ°ISPã€å› ç‰¹ç½‘äº¤æ¢ç‚¹IXPã€‚</p>
<p>ä¸€ä¸ªåˆ†ç»„å¯èƒ½è¦ç©¿è¶Šå¾ˆå¤šç½‘ç»œã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-20_21-55-57.png"></p>
</li>
<li><p>åˆ†ç»„ä¸¢å¤±å’Œå»¶è¿Ÿæ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿåˆ†ç»„åˆ°è¾¾è¾“å‡ºé“¾è·¯çš„é€Ÿç‡è¶…è¿‡è¾“å‡ºé“¾è·¯çš„å®¹é‡ã€åˆ†ç»„åœ¨ç¼“å†²åŒºé˜Ÿåˆ—æ’é˜Ÿ, æŒ‰åºç­‰å¾…</p>
</li>
</ol>
<p>ï¼ˆ1ï¼‰è·¯ç”±å™¨è¾“å…¥é“¾è·¯å’Œè¾“å‡ºé“¾è·¯çš„ç¼“å†²åŒºå®¹é‡æœ‰é™</p>
<p>ï¼ˆ2ï¼‰å½“åˆ†ç»„åˆ°è¾¾è·¯ç”±å™¨è¾“å…¥é“¾è·¯å‘ç°ç¼“å†²åŒºå·²æ»¡ï¼Œåˆ™è·¯ç”±å™¨åªå¥½ä¸¢å¼ƒåˆ†ç»„</p>
<p>ï¼ˆ3ï¼‰å½“åˆ†ç»„åœ¨è·¯ç”±å™¨å†…éƒ¨è¦è½¬å‘åˆ°è¾“å‡ºé“¾è·¯æ—¶ï¼Œå‘ç°è¾“å‡ºç¼“å†²åŒºé˜Ÿåˆ—å·²æ»¡ï¼Œè·¯ç”±å™¨åªå¥½ä¸¢å¼ƒåˆ†ç»„</p>
<p>ä¸¢åŒ…ç‡&#x3D;ä¸¢åŒ…æ•°&#x2F;å·²å‘åˆ†ç»„æ€»æ•°</p>
<ol start="22">
<li>åˆ†ç»„å»¶è¿Ÿçš„4ç§ç±»å‹</li>
</ol>
<p>ï¼ˆ1ï¼‰èŠ‚ç‚¹å¤„ç†æ—¶å»¶ï¼šå·®é”™æ£€æµ‹ã€é€‰æ‹©è¾“å‡ºé“¾è·¯ï¼Œå¾®ç§’çº§</p>
<p>ï¼ˆ2ï¼‰æ’é˜Ÿæ—¶å»¶ï¼šç­‰å¾…è¢«å‘é€åˆ°è¾“å‡ºé“¾è·¯ä¸Šçš„æ—¶é—´ï¼Œå–å†³äºè·¯ç”±å™¨çš„æ‹¥å¡ç¨‹åº¦</p>
<p>ï¼ˆ3ï¼‰ä¼ è¾“æ—¶å»¶ï¼šR&#x3D;é“¾è·¯å¸¦å®½ (bps)ï¼ŒL&#x3D;åˆ†ç»„é•¿åº¦ (bits)ï¼Œå‘é€åˆ†ç»„æ¯”ç‰¹æµçš„æ—¶é—´ &#x3D; L&#x2F;R</p>
<p>ï¼ˆ4ï¼‰ä¼ æ’­æ—¶å»¶ï¼šd &#x3D; ç‰©ç†é“¾è·¯çš„é•¿åº¦ï¼Œs &#x3D; ä»‹è´¨çš„ä¿¡å·ä¼ æ’­é€Ÿåº¦ï¼Œä¼ æ’­å»¶è¿Ÿ &#x3D; d&#x2F;s</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-20_22-07-11.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-20_22-15-37.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-20_22-15-37.png"></p>
<p>æ’é˜Ÿæ—¶å»¶ï¼šæµé‡å¼ºåº¦(traffic intensity) &#x3D; La&#x2F;Rï¼Œå…¶ä¸­aä¸ºå¹³å‡åˆ†ç»„åˆ°è¾¾é€Ÿç‡ï¼Œ Lä¸ºåˆ†ç»„é•¿åº¦ï¼Œ Rä¸ºé“¾è·¯å¸¦å®½ </p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_09-14-14.png"></p>
<ul>
<li>La&#x2F;R ~ 0: åˆ†ç»„ç¨€ç–åˆ°è¾¾,æ— é˜Ÿåˆ—,å¹³å‡æ’é˜Ÿå»¶è¿Ÿæå°æ¥è¿‘äº0</li>
<li>La&#x2F;R -&gt; 1: åˆ†ç»„çŒå‘åˆ°è¾¾,å½¢æˆé˜Ÿåˆ—,é˜Ÿåˆ—é•¿åº¦è¿…é€Ÿå¢åŠ ,æ’é˜Ÿå»¶è¿Ÿå¤§å¹…å¢å¤§</li>
<li>La&#x2F;R &gt; 1: è¾“å‡ºé˜Ÿåˆ—å¹³å‡ä½åˆ°è¾¾é€Ÿç‡è¶…è¿‡é€èµ°è¿™äº›ä½çš„æé™é€Ÿç‡ï¼Œè¾“å‡ºé˜Ÿåˆ—æŒç»­å¢é•¿ï¼Œæ’é˜Ÿå»¶è¿Ÿè¶‹äºæ— ç©·å¤§</li>
</ul>
<ol start="23">
<li><p>ååé‡ï¼š<strong>æ¥æ”¶ç«¯</strong>æ¥æ”¶åˆ°æ•°æ®çš„æ¯”ç‰¹é€Ÿç‡ (bps )ï¼Œç¬æ—¶ååé‡: æŸä¸€ç¬é—´çš„ååé‡ï¼Œå¹³å‡ååé‡: ä¸€æ®µæ—¶é—´å†…çš„ååé‡å‡å€¼ã€‚</p>
<p>ç“¶é¢ˆé“¾è·¯ï¼šåœ¨ç«¯åˆ°ç«¯è·¯å¾„ä¸­åˆ¶çº¦ååé‡çš„é“¾è·¯</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_09-54-56.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_09-22-05.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_09-28-45.png"></p>
</li>
<li><p>å¸¦å®½ï¼šæ•°æ®ä¼ è¾“ç‡ã€‚å¸¦å®½çš„å•ä½ä¸€èˆ¬æœ‰ä¸¤ç§å½¢å¼ï¼šç¬¬ä¸€ç§æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½æ¥è®¡ç®—ï¼Œæœ‰Bpsã€KBpsã€MBpsã€GBpsã€TBps ç­‰ï¼Œè¡¨ç¤ºå•ä½æ—¶é—´ï¼ˆç§’)å†…ä¼ è¾“çš„å­—èŠ‚æ•°é‡Â·ç¬¬äºŒç§æ˜¯ä»¥æ¯”ç‰¹ä¸ºå•ä½æ¥è®¡ç®—ï¼Œæœ‰bpsã€Kbpsã€Mbpsã€Gbpsã€Tbpsç­‰ï¼Œè¡¨ç¤ºå•ä½æ—¶é—´(ç§’ï¼‰å†…ä¼ è¾“çš„æ¯”ç‰¹æ•°é‡ä¸¤ç§å¸¦å®½çš„æ¢ç®—å› ä¸ºä¸€ä¸ªå­—èŠ‚æ˜¯8æ¯”ç‰¹ï¼Œå› æ­¤1B&#x2F;s&#x3D;8 bps (b&#x2F;s) .1 KB&#x2F;s&#x3D;8 Kbps (Kb&#x2F;s) ã€1 MB&#x2F;s&#x3D;8 Mbps (Mb&#x2F;s)ç­‰ï¼Œå¦‚æ­¤ç±»æ¨Bpsã€bpsä¹Ÿå¯åˆ†åˆ«å†™ä¸ºB&#x2F;sï¼Œ b&#x2F;s</p>
</li>
<li><p>åè®®åˆ†å±‚</p>
<p>ï¼ˆ1ï¼‰è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†ä¸ºå¾ˆå¤šå±‚ï¼Œæ¯å±‚å®Œæˆä¸€ä¸ªç‰¹å®šåŠŸèƒ½ï¼Œå±‚å’Œå±‚ä¹‹é—´ç›¸äº’åä½œï¼Œåº•å±‚ä¸ºä¸Šä¸€å±‚æä¾›æœåŠ¡ï¼Œä¸Šå±‚ä½¿ç”¨åº•å±‚æä¾›çš„æœåŠ¡ï¼ˆæœåŠ¡æ¨¡å‹ï¼‰ï¼Œå®ç°æœ¬å±‚çš„åŠŸèƒ½ï¼Œå†ä¸ºä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚</p>
<p>ï¼ˆ2ï¼‰ç½‘ç»œè®¾è®¡è€…ä»¥åˆ†å±‚çš„æ–¹å¼ç»„ç»‡åè®®ï¼Œä»¥åŠå®ç°è¿™äº›åè®®çš„ç½‘ç»œè½¯ç¡¬ä»¶ã€‚</p>
<p>ï¼ˆ3ï¼‰ä¸€ä¸ªåè®®å±‚èƒ½å¤Ÿç”¨è½¯ä»¶ã€ç¡¬ä»¶æˆ–è€…ä¸¤è€…ç»“åˆå®ç°</p>
<p>ï¼ˆ4ï¼‰å„å±‚çš„æ‰€æœ‰åè®®ç§°ä¸ºåè®®æ ˆï¼Œå¦‚å› ç‰¹ç½‘TCP&#x2F;IPåè®®æ ˆ</p>
</li>
<li><p>åè®®å’ŒæœåŠ¡çš„çš„åŒºåˆ†</p>
<p>ï¼ˆ1ï¼‰åè®®çš„å®ç°ä¿è¯äº†èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚æœ¬å±‚çš„æœåŠ¡ç”¨æˆ·åªèƒ½çœ‹è§æœåŠ¡ï¼Œè€Œæ— æ³•çœ‹è§ä¸‹é¢çš„åè®®ã€‚ä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„æœåŠ¡ç”¨æˆ·æ˜¯é€æ˜çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰åè®®æ˜¯â€œæ°´å¹³çš„â€ï¼Œå³åè®®æ˜¯æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€šä¿¡çš„è§„åˆ™ã€‚ä½†æœåŠ¡æ˜¯â€œå‚ç›´çš„â€ï¼Œå³æœåŠ¡æ˜¯ç”±ä¸‹å±‚é€šè¿‡å±‚é—´æ¥å£å‘ä¸Šå±‚æä¾›çš„ã€‚</p>
</li>
<li><p>ISOæ¨¡å‹ï¼ˆ7å±‚ï¼‰</p>
<table>
<thead>
<tr>
<th><strong>å±‚å·</strong></th>
<th><strong>å±‚çš„åç§°</strong></th>
<th><strong>å±‚çš„è‹±æ–‡åç§°</strong></th>
<th><strong>å±‚çš„è‹±æ–‡ç¼©å†™</strong></th>
</tr>
</thead>
<tbody><tr>
<td>7</td>
<td>åº”ç”¨å±‚</td>
<td>Application</td>
<td>A</td>
</tr>
<tr>
<td>6</td>
<td>è¡¨ç¤ºå±‚</td>
<td>Presentation</td>
<td>P</td>
</tr>
<tr>
<td>5</td>
<td>ä¼šè¯å±‚</td>
<td>Session</td>
<td>S</td>
</tr>
<tr>
<td>4</td>
<td>ä¼ è¾“å±‚</td>
<td>Transport</td>
<td>T</td>
</tr>
<tr>
<td>3</td>
<td>ç½‘ç»œå±‚</td>
<td>Network</td>
<td>N</td>
</tr>
<tr>
<td>2</td>
<td>æ•°æ®é“¾è·¯å±‚</td>
<td>Data Link</td>
<td>DL</td>
</tr>
<tr>
<td>1</td>
<td>ç‰©ç†å±‚</td>
<td>Physical</td>
<td>PL</td>
</tr>
</tbody></table>
<p>TCP&#x2F;IPå‚è€ƒæ¨¡å‹</p>
<table>
<thead>
<tr>
<th align="center">åº”ç”¨å±‚</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ä¼ è¾“å±‚</td>
</tr>
<tr>
<td align="center">ç½‘ç»œå±‚</td>
</tr>
<tr>
<td align="center">ç½‘ç»œæ¥å£å±‚</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">åº”ç”¨å±‚</th>
</tr>
</thead>
<tbody><tr>
<td align="center">è¿è¾“å±‚</td>
</tr>
<tr>
<td align="center">ç½‘ç»œå±‚</td>
</tr>
<tr>
<td align="center">æ•°æ®é“¾è·¯å±‚</td>
</tr>
<tr>
<td align="center">ç‰©ç†å±‚</td>
</tr>
</tbody></table>
</li>
<li><p>ç½‘é™…åè®®æ ˆ</p>
<p>åº”ç”¨å±‚application: æ”¯æŒç½‘ç»œåº”ç”¨ï¼Œ<strong>æŠ¥æ–‡</strong>ä¼ é€FTP, SMTP, STTP â€¦</p>
<p>ä¼ è¾“å±‚transport: ä¸»æœºè¿›ç¨‹é—´<strong>æŠ¥æ–‡æ®µ</strong>ä¼ é€ï¼ŒTCP, UDP</p>
<p>ç½‘ç»œå±‚network:     ä¸»æœº(æºç›®æ ‡èŠ‚ç‚¹)é—´åˆ†ç»„ï¼ˆ<strong>æ•°æ®æŠ¥</strong>ï¼‰ä¼ é€ä¸»è¦æ˜¯IPåè®®, è·¯ç”±åè®® </p>
<p>é“¾è·¯å±‚link:     ç›¸é‚»ç½‘ç»œèŠ‚ç‚¹é—´çš„æ•°æ®<strong>å¸§</strong>ä¼ é€ï¼ŒPPP, Ethernet â€¦</p>
<p>ç‰©ç†å±‚physical:     ç‰©ç†ä»‹è´¨ä¸Šçš„<strong>æ¯”ç‰¹</strong>ä¼ é€</p>
</li>
<li><p>ç½‘ç»œ<strong>å®ä½“</strong>å®ŒæˆåŠŸèƒ½åŠ¨ä½œ, <strong>å¯¹ç­‰å®ä½“</strong>äº¤æ¢æ¶ˆæ¯</p>
<p><strong>å®ä½“</strong>: å®šä¹‰è‡ªèº«åŠŸèƒ½çš„ç¡¬&#x2F;è½¯ä»¶çš„é›†åˆ</p>
<p><strong>å¯¹ç­‰å®ä½“</strong>: ä¸¤å°è®¡ç®—æœºä¸ŠåŒä¸€å±‚æ‰€å±çš„ç¨‹åºã€è¿›ç¨‹æˆ–å®ä½“ç§°ä¸ºè¯¥å±‚çš„å¯¹ç­‰ç¨‹åºã€å¯¹ç­‰è¿›ç¨‹æˆ–å¯¹ç­‰å®ä½“ã€‚</p>
</li>
<li><p>åè®®æ•°æ®å•å…ƒPDU</p>
<p>å‘æ–¹æ·»åŠ é¦–éƒ¨ä¿¡æ¯åˆ›å»ºæ–°çš„æ•°æ®å•å…ƒï¼ˆå°è£…ï¼‰ï¼Œæ”¶æ–¹å»æ‰é¦–éƒ¨ï¼ˆè§£å°ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_10-17-18.png"></p>
<p>æ¯å±‚ä¼ é€’çš„æ•°æ®åˆ†ä¸ºé¦–éƒ¨å­—æ®µå’Œæœ‰æ•ˆè½½è·å­—æ®µä¸¤éƒ¨åˆ†ã€‚æœ‰æ•ˆè½½è·æ˜¯ç›¸é‚»ä¸Šå±‚ä¼ ä¸‹æ¥çš„æ•°æ®ã€‚</p>
</li>
<li><p>å¸¸è§çš„ç½‘ç»œæ”»å‡»ï¼šè¢«åŠ¨æ”»å‡»å’Œä¸»åŠ¨æ”»å‡»(ç¯¡æ”¹ã€ä¼ªé€ æ¶ˆæ¯)</p>
<p>ï¼ˆ1ï¼‰æ¤å…¥æ¶æ„è½¯ä»¶ï¼ˆç—…æ¯’ã€è •è™«ã€åƒµå°¸ç½‘ç»œï¼‰:è‡ªæˆ‘å¤åˆ¶</p>
<p>ï¼ˆ2ï¼‰DoSæ”»å‡»ï¼ˆå¼±ç‚¹æ”»å‡»ã€å‘ç›®æ ‡ä¸»æœºä¸Šæ˜“å—æ”»å‡»çš„åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿå‘é€ç²¾ç»†çš„æŠ¥æ–‡ã€‘ã€å¸¦å®½æ´ªæ³›ã€å‘ç›®æ ‡ä¸»æœºå‘é€å¤§é‡åˆ†ç»„ã€‘ã€è¿æ¥æ´ªæ³›ã€åˆ©ç”¨ç›®æ ‡ä¸»æœºåˆ›å»ºåŠå¼€æˆ–å…¨å¼€çš„TCPè¿æ¥ã€‘ï¼‰</p>
<p>ï¼ˆ3ï¼‰å—…æ¢åˆ†ç»„ï¼ˆæ— çº¿ç½‘ç»œå’Œä»¥å¤ªç½‘LANï¼‰ï¼šæ•°æ®åŠ å¯†</p>
<p>ï¼ˆ4ï¼‰ä¼ªè£…ï¼ˆIPå“„éª—ï¼‰ï¼šé‡‡ç”¨ç«¯ç‚¹é‰´åˆ«æœºåˆ¶</p>
<p>ï¼ˆ5ï¼‰ä¸­é—´äººæ”»å‡»ï¼ˆæ”»å‡»è€…ä¸é€šè®¯çš„ä¸¤ç«¯åˆ†åˆ«åˆ›å»ºç‹¬ç«‹çš„è”ç³»ï¼Œå¹¶äº¤æ¢å…¶æ‰€æ”¶åˆ°çš„æ•°æ®ï¼›è™šæ‹Ÿä¸“ç”¨ç½‘(VPN)ã€SSLè¯ä¹¦ï¼‰</p>
</li>
</ol>
<hr>
<p>å¦‚æœé“¾è·¯æ¯ç§’ä¼ è¾“1000ä¸ªå¸§ï¼Œæ¯ä¸ªæ—¶éš™ç”±64ä¸ªæ¯”ç‰¹ç»„æˆï¼Œåˆ™æ¯æ¡ç”µè·¯çš„ä¼ è¾“é€Ÿç‡æ˜¯64kbpsã€‚ï¼ˆ    æ­£ç¡®  ï¼‰ï¼ˆè¿™é—¨è¯¾ä¸­ï¼Œæ‰€æœ‰çš„kã€Mã€Géƒ½æ˜¯æŒ‡10Â³ã€10â¶ã€10â¹ï¼‰</p>
<p>åœ¨OSIå‚è€ƒæ¨¡å‹ä¸­ï¼ŒåŒç³»ç»Ÿçš„ç›¸é‚»å±‚å®ä½“é—´é€šè¿‡(   A    )è¿›è¡Œäº¤äº’<br>Aã€æ¥å£     Bã€è¿›ç¨‹     Cã€ç¨‹åº     Dã€åè®®</p>
<p>ä»¥ä¸‹æœ‰å…³åè®®å’ŒæœåŠ¡è¯´æ³•é”™è¯¯çš„æ˜¯ï¼ˆD ï¼‰<br>A.åè®®æ˜¯å¯¹ç­‰å®ä½“ä¹‹é—´è¿›è¡Œé€»è¾‘é€šä¿¡è€Œå®šä¹‰çš„è§„åˆ™æˆ–è§„çº¦çš„é›†åˆã€‚<br>B.æœåŠ¡æ˜¯æŒ‡ä¸€ä¸ªç³»ç»Ÿä¸­çš„ä¸‹å±‚å‘ä¸Šå±‚æä¾›çš„åŠŸèƒ½ã€‚<br>C.ä¸€ä¸ªåè®®åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼Œå³å¯¹ä¸Šå±‚æä¾›æœåŠ¡å’Œå¯¹åè®®æœ¬èº«çš„å®ç°ã€‚<br>D.æœåŠ¡çš„å…³é”®è¦ç´ æ˜¯è¯­æ³•ã€è¯­ä¹‰å’ŒåŒæ­¥ã€‚</p>
<p>ç®€è¿°å› ç‰¹ç½‘äº”å±‚åè®®çš„ç½‘ç»œä½“ç³»ç»“æ„çš„è¦ç‚¹å’Œå„å±‚çš„ä¸»è¦åŠŸèƒ½ã€‚ </p>
<p>ç­”ï¼šç»¼åˆ OSI å’Œ TCP&#x2F;IP çš„ä¼˜ç‚¹ï¼Œé‡‡ç”¨ä¸€ç§åŸç†ä½“ç³»ç»“æ„ã€‚å„å±‚çš„ä¸»è¦åŠŸèƒ½ï¼š<br>â‘ ç‰©ç†å±‚ ç‰©ç†å±‚çš„ä»»åŠ¡å°±æ˜¯ é€æ˜åœ°ä¼ é€æ¯”ç‰¹æµã€‚ï¼ˆæ³¨æ„ï¼šä¼ é€’ä¿¡æ¯çš„ç‰©ç†åª’ä½“ï¼Œå¦‚åŒç»çº¿ã€åŒè½´ç”µç¼†ã€å…‰ç¼†ç­‰ï¼Œæ˜¯åœ¨ç‰©ç†å±‚çš„ä¸‹é¢ï¼Œ å½“åšç¬¬ 0 å±‚ã€‚ï¼‰ ç‰©ç†å±‚è¿˜è¦ç¡®å®šè¿æ¥ç”µç¼†æ’å¤´çš„å®šä¹‰åŠè¿æ¥æ³•ã€‚<br>â‘¡æ•°æ®é“¾è·¯å±‚ æ•°æ®é“¾è·¯å±‚çš„ä»»åŠ¡æ˜¯åœ¨ä¸¤ä¸ª ç›¸é‚»ç»“ç‚¹é—´çš„çº¿è·¯ä¸Šæ— å·®é”™åœ°ä¼ é€ä»¥å¸§ï¼ˆframeï¼‰ä¸ºå•ä½çš„æ•°æ®ã€‚æ¯ä¸€å¸§åŒ…æ‹¬æ•°æ®å’Œå¿…è¦çš„æ§åˆ¶ä¿¡æ¯ã€‚<br>â‘¢ç½‘ç»œå±‚ ç½‘ç»œå±‚çš„ä»»åŠ¡å°±æ˜¯è¦é€‰æ‹©åˆé€‚çš„è·¯ç”±ï¼Œä½¿å‘é€ç«™çš„è¿è¾“å±‚æ‰€ä¼ ä¸‹æ¥çš„åˆ†ç»„èƒ½å¤Ÿæ­£ç¡®æ— è¯¯åœ°æŒ‰ç…§åœ°å€æ‰¾åˆ°ç›®çš„ç«™ï¼Œå¹¶äº¤ä»˜ç»™ç›®çš„ç«™çš„è¿è¾“å±‚ã€‚<br>â‘£è¿è¾“å±‚ è¿è¾“å±‚çš„ä»»åŠ¡æ˜¯å‘ä¸Šä¸€å±‚çš„è¿›è¡Œé€š ä¿¡çš„ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´æä¾›ä¸€ä¸ªå¯é çš„ç«¯åˆ°ç«¯æœåŠ¡ï¼Œä½¿å®ƒä»¬çœ‹ä¸è§è¿è¾“å±‚ä»¥ä¸‹çš„æ•°æ®é€šä¿¡çš„ç»†èŠ‚ã€‚<br>â‘¤åº”ç”¨å±‚ åº”ç”¨å±‚ç›´æ¥ä¸ºç”¨æˆ·çš„åº”ç”¨è¿›ç¨‹æä¾›æœåŠ¡ã€‚ </p>
<p>ç®€è¿°åè®®æ ˆã€å®ä½“ã€å¯¹ç­‰å±‚ã€åè®®æ•°æ®å•å…ƒã€æœåŠ¡è®¿é—®ç‚¹ã€å®¢æˆ·ã€æœåŠ¡å™¨ã€å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ã€‚ </p>
<p>ç­”ï¼š<strong>å®ä½“</strong>(entity) è¡¨ç¤ºä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹ã€‚</p>
<p><strong>å¯¹ç­‰å±‚</strong>:åœ¨ç½‘ç»œä½“ç³»ç»“æ„ä¸­,é€šä¿¡åŒæ–¹å®ç°åŒæ ·åŠŸèƒ½çš„å±‚. </p>
<p><strong>åè®®</strong>æ˜¯æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€šä¿¡çš„è§„åˆ™çš„é›†åˆã€‚</p>
<p><strong>å®¢æˆ·</strong>(client)å’Œ<strong>æœåŠ¡å™¨</strong>(server)éƒ½æ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ã€‚å®¢æˆ·æ˜¯æœåŠ¡çš„è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡çš„æä¾›æ–¹ã€‚å®¢æˆ·æœåŠ¡å™¨æ–¹å¼æ‰€æè¿°çš„æ˜¯è¿›ç¨‹ä¹‹é—´æœåŠ¡å’Œè¢«æœåŠ¡çš„å…³ç³»ã€‚ </p>
<p><strong>åè®®æ ˆ</strong>:æŒ‡è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„é‡‡ç”¨åˆ†å±‚æ¨¡å‹å,æ¯å±‚çš„ä¸»è¦åŠŸèƒ½ç”±å¯¹ç­‰å±‚åè®®çš„è¿è¡Œæ¥å®ç°,å› è€Œæ¯å±‚å¯ç”¨ä¸€äº›ä¸»è¦åè®®æ¥è¡¨å¾,å‡ ä¸ªå±‚æ¬¡ç”»åœ¨ä¸€èµ·å¾ˆåƒä¸€ä¸ªæ ˆçš„ç»“æ„.</p>
<p><strong>åè®®æ•°æ®å•å…ƒ</strong>:å¯¹ç­‰å±‚å®ä½“è¿›è¡Œä¿¡æ¯äº¤æ¢çš„æ•°æ®å•ä½.</p>
<p><strong>æœåŠ¡è®¿é—®ç‚¹</strong>:åœ¨åŒä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“è¿›è¡Œäº¤äº’.</p>
<p>å› ç‰¹ç½‘çš„ä¸¤å¤§ç»„æˆéƒ¨åˆ†ï¼ˆè¾¹ç¼˜éƒ¨åˆ†ä¸æ ¸å¿ƒéƒ¨åˆ†ï¼‰çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬çš„å·¥ä½œæ–¹å¼å„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ </p>
<p>ç­”ï¼šè¾¹ç¼˜éƒ¨åˆ†ï¼šç”±å„ä¸»æœºæ„æˆï¼Œç”¨æˆ·ç›´æ¥è¿›è¡Œä¿¡æ¯å¤„ç†å’Œä¿¡æ¯å…±äº«;ä½é€Ÿè¿å…¥æ ¸å¿ƒç½‘ã€‚æ ¸å¿ƒéƒ¨åˆ†ï¼šç”±å„è·¯ç”±å™¨è¿ç½‘ï¼Œè´Ÿè´£ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›é«˜é€Ÿè¿œç¨‹åˆ†ç»„äº¤æ¢ã€‚</p>
<p>ç®€è¿°åˆ†ç»„äº¤æ¢çš„ç‰¹ç‚¹ã€‚ç­”ï¼šï¼ˆ1ï¼‰æŠ¥æ–‡åˆ†ç»„ï¼ŒåŠ é¦–éƒ¨ï¼ˆ2ï¼‰ç»è·¯ç”±å™¨å‚¨å­˜è½¬å‘ï¼ˆ3ï¼‰åœ¨ç›®çš„åœ°ç»„è£…</p>
<p>ç”µè·¯äº¤æ¢çš„ç‰¹ç‚¹ï¼šå»ºç«‹ç”µè·¯è¿æ¥ã€é€šè¯ã€æ‹†é™¤è¿æ¥</p>
<p>ä½¿ç”¨åŠ å¯†æœºåˆ¶å¯ä»¥é˜²èŒƒåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼ˆDDoSï¼‰æ”»å‡»ã€‚ ï¼ˆ   Ã—    ï¼‰åŠ å¯†æœºåˆ¶å¯ä»¥å¸®åŠ©ä¿æŠ¤æ•°æ®çš„å®‰å…¨æ€§ï¼Œä½†å®ƒå¹¶ä¸èƒ½ç›´æ¥é˜²èŒƒåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼ˆDDoSï¼‰æ”»å‡»ã€‚DDoS æ”»å‡»æ˜¯é€šè¿‡å¤§è§„æ¨¡äº’è”ç½‘æµé‡æ·¹æ²¡ç›®æ ‡æœåŠ¡å™¨æˆ–å…¶å‘¨è¾¹åŸºç¡€è®¾æ–½ï¼Œä»¥ç ´åç›®æ ‡æœåŠ¡å™¨ã€æœåŠ¡æˆ–ç½‘ç»œæ­£å¸¸æµé‡çš„æ¶æ„è¡Œä¸ºã€‚</p>
<p>ä¸æ’é˜Ÿå»¶è¿Ÿæ— å…³çš„å±æ€§æ˜¯ï¼ˆ  A    ï¼‰A. é“¾è·¯é•¿åº¦ 	B. é“¾è·¯å¸¦å®½ 	C. åˆ†ç»„å¤§å° 	D. åˆ†ç»„åˆ°è¾¾æ•°é‡</p>
<p>åœ¨ä¸‹å›¾æ‰€ç¤ºçš„é‡‡ç”¨â€œå­˜å‚¨-è½¬å‘â€æ–¹å¼çš„åˆ†ç»„äº¤æ¢ç½‘ç»œä¸­ï¼Œ æ‰€æœ‰é“¾è·¯çš„æ•°æ®ä¼ è¾“é€Ÿç‡ä¸º100 Mbpsï¼Œåˆ†ç»„å¤§å°ä¸º1 000 B ï¼Œå…¶ä¸­åˆ†ç»„å¤´å¤§å°ä¸º20 Bã€‚è‹¥ä¸»æœºH1å‘ä¸»æœºH2å‘é€ä¸€ä¸ªå¤§å°ä¸º980 000 Bçš„æ–‡ä»¶ï¼Œåˆ™åœ¨ä¸è€ƒè™‘åˆ†ç»„æ‹†è£…æ—¶é—´å’Œä¼ æ’­å»¶è¿Ÿçš„æƒ…å†µä¸‹ï¼Œä»H1å‘é€å¼€å§‹åˆ°H2æ¥æ”¶å®Œä¸ºæ­¢ï¼Œéœ€è¦çš„æ—¶é—´è‡³å°‘æ˜¯å¤šå°‘ï¼Ÿ </p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_11-26-46.png"></p>
<p>è§£æ:åˆ†ç»„å¤§å°ä¸º1000B,å…¶ä¸­åˆ†ç»„å¤´å¤§å°ä¸º20B,åˆ™åˆ†ç»„æºå¸¦çš„æ•°æ®å¤§å°ä¸º980B,æ–‡ä»¶é•¿åº¦ä¸º980000B,éœ€æ‹†åˆ†ä¸º1000ä¸ªåˆ†ç»„,åŠ ä¸Šå¤´éƒ¨å,æ¯ä¸ªåˆ†ç»„å¤§å°ä¸º1000B,æ€»å…±éœ€è¦ä¼ é€çš„æ•°æ®é‡å¤§å°ä¸º1MBã€‚ç”±äºæ‰€æœ‰é“¾è·¯çš„æ•°æ®ä¼ è¾“é€Ÿåº¦ç›¸åŒ,å› æ­¤æ–‡ä»¶ä¼ è¾“ç»è¿‡æœ€çŸ­è·¯å¾„æ—¶æ‰€éœ€æ—¶é—´æœ€å°‘,æœ€çŸ­è·¯å¾„ç»è¿‡2ä¸ªåˆ†ç»„äº¤æ¢æœºã€‚å½“t&#x3D;1MÃ—8&#x2F;100Mbps&#x3D;80msæ—¶,H1å‘é€å®Œæœ€åä¸€ä¸ªæ¯”ç‰¹ã€‚å½“H1å‘é€å®Œæœ€åä¸€ä¸ªåˆ†ç»„æ—¶,è¯¥åˆ†ç»„éœ€è¦ç»è¿‡2ä¸ªåˆ†ç»„äº¤æ¢æœºçš„è½¬å‘,åœ¨2æ¬¡è½¬å‘å®Œæˆå,æ‰€æœ‰åˆ†ç»„å‡åˆ°è¾¾H2ã€‚æ¯æ¬¡è½¬å‘çš„æ—¶é—´ä¸ºt0&#x3D;t&#x3D;lKÃ—8&#x2F;100Mbps&#x3D;0.08msã€‚æ‰€ä»¥,åœ¨ä¸è€ƒè™‘åˆ†ç»„æ‹†è£…æ—¶é—´å’Œä¼ æ’­å»¶è¿Ÿçš„æƒ…å†µä¸‹,å½“t&#x3D;80ms+2t0&#x3D;80.16msæ—¶,H2æ¥æ”¶å®Œæ–‡ä»¶,å³æ‰€éœ€çš„æ—¶é—´è‡³å°‘ä¸º80.16msã€‚</p>
<p>ä¸»æœºAå‘ä¸»æœºBå‘é€ä¸€ä¸ªå¤§å°ä¸º6MBçš„æ–‡ä»¶ï¼Œä»ä¸»æœºAåˆ°ä¸»æœºBçš„è·¯å¾„ä¸Šæœ‰3æ®µé“¾è·¯ï¼Œ å…¶ä¸­é€Ÿç‡åˆ†åˆ«æ˜¯1Mbps, 800kbps, 2Mbpsï¼Œè¯¥æ–‡ä»¶ä»ä¸»æœºAä¼ è¾“åˆ°ä¸»æœºBå¤§æ¦‚éœ€è¦å¤šä¹…?</p>
<p>ä¼ è¾“æ—¶å»¶å–å†³äºé“¾è·¯ä¸­é€Ÿç‡æœ€æ…¢çš„é‚£ä¸€æ®µï¼Œå³800kbpsã€‚å› æ­¤ï¼Œä¼ è¾“æ—¶å»¶ä¸º(6MB * 8bits&#x2F;byte) &#x2F; (800kbps) &#x3D; 60ç§’ã€‚</p>
<p>å‡å®šåœ¨å‘é€ä¸»æœºå’Œæ¥æ”¶ä¸»æœºé—´åªæœ‰ä¸€å°åˆ†ç»„äº¤æ¢æœºã€‚å‘é€ä¸»æœºå’Œäº¤æ¢æœºé—´ä»¥åŠäº¤æ¢æœºå’Œæ¥æ”¶ä¸»æœºé—´ çš„ä¼ è¾“é€Ÿç‡åˆ†åˆ«æ˜¯R1å’ŒR2ã€‚å‡è®¾è¯¥äº¤æ¢æœºä½¿ç”¨å­˜å‚¨è½¬å‘åˆ†ç»„äº¤æ¢æ–¹å¼ï¼Œå‘é€ä¸€ä¸ªé•¿åº¦ä¸ºLçš„åˆ†ç»„ çš„ç«¯åˆ°ç«¯æ€»æ—¶å»¶æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¿½ç•¥æ’é˜Ÿæ—¶å»¶ã€ä¼ æ’­æ—¶å»¶å’Œå¤„ç†æ—¶å»¶ã€‚ï¼‰</p>
<p>ç­”ï¼šL&#x2F;R1+L&#x2F;R2</p>
<p>â€”ä¸ªé•¿åº¦ä¸º1000å­—èŠ‚çš„åˆ†ç»„ç»è·ç¦»ä¸º2500kmçš„é“¾è·¯ä¼ æ’­ï¼Œä¼ æ’­é€Ÿç‡ä¸º2.5xl0^8m&#x2F;så¹¶ä¸”ä¼ è¾“é€Ÿç‡ ä¸º2Mbps,å®ƒéœ€è¦ç”¨å¤šé•¿æ—¶é—´ï¼Ÿæ›´ä¸ºä¸€èˆ¬åœ°ï¼Œä¸€ä¸ªé•¿åº¦ä¸ºLçš„åˆ†ç»„ç»è·ç¦»ä¸ºdçš„é“¾è·¯ä¼ æ’­ï¼Œä¼ æ’­é€Ÿç‡ä¸ºså¹¶ä¸”ä¼ è¾“é€Ÿç‡ä¸ºRbps,å®ƒéœ€è¦ç”¨å¤šé•¿æ—¶é—´ï¼Ÿ</p>
<p>ç­”ï¼š14msï¼ŒL&#x2F;R+d&#x2F;s</p>
<p>å‡å®šä¸»æœºAè¦å‘ä¸»æœºBå‘é€ä¸€ä¸ªå¤§æ–‡ä»¶ã€‚ä»ä¸»æœºAåˆ°ä¸»æœºBçš„è·¯å¾„ä¸Šæœ‰3æ®µé“¾è·¯ï¼Œå…¶é€Ÿç‡åˆ†åˆ«ä¸º R1 &#x3D; 500kbps, R2 &#x3D; 2Mbps, R3 &#x3D; 1 Mbps.</p>
<p>a.å‡å®šè¯¥ç½‘ç»œä¸­æ²¡æœ‰å…¶ä»–æµé‡ï¼Œè¯¥æ–‡ä»¶ä¼ é€çš„ååé‡æ˜¯å¤šå°‘ï¼Ÿ500kbps</p>
<p>b.å‡å®šè¯¥æ–‡ä»¶ä¸º4MBã€‚ç”¨ååé‡é™¤ä»¥æ–‡ä»¶é•¿åº¦ï¼Œå°†è¯¥æ–‡ä»¶ä¼ è¾“åˆ°ä¸»æœºBå¤§è‡´éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ(4 X 8 X 10^6)&#x2F;(500x10^3)</p>
<p>åœ¨è¿™ä¸ªä¹ é¢˜ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘ä»ä¸»æœºAå‘ä¸»æœºBé€šè¿‡åˆ†ç»„äº¤æ¢ç½‘å‘é€è¯­éŸ³ï¼ˆVoIPï¼‰ã€‚ä¸»æœºAå°†æ¨¡æ‹Ÿè¯­éŸ³ è½¬æ¢ä¸ºä¼ è¾“ä¸­çš„64kbpsæ•°å­—æ¯”ç‰¹æµã€‚ç„¶åä¸»æœºAå°†è¿™äº›æ¯”ç‰¹åˆ†ä¸º56å­—èŠ‚çš„åˆ†ç»„ã€‚Aå’ŒBä¹‹é—´æœ‰ä¸€æ¡ é“¾è·¯ï¼šå®ƒçš„ä¼ è¾“é€Ÿç‡æ˜¯2Mbps,ä¼ æ’­æ—¶å»¶æ˜¯10msã€‚ä¸€æ—¦Aæ”¶é›†äº†ä¸€ä¸ªåˆ†ç»„ï¼Œå°±å°†å®ƒå‘ä¸»æœºBå‘é€ã€‚ ä¸€æ—¦ä¸»æœºBæ¥æ”¶åˆ°ä¸€ä¸ªå®Œæ•´çš„åˆ†ç»„ï¼Œå®ƒå°†è¯¥åˆ†ç»„çš„æ¯”ç‰¹è½¬æ¢æˆæ¨¡æ‹Ÿä¿¡å·ã€‚ä»æ¯”ç‰¹äº§ç”Ÿï¼ˆä»ä½äºä¸»æœº Açš„åˆå§‹æ¨¡æ‹Ÿä¿¡å·èµ·ï¼‰çš„æ—¶åˆ»èµ·ï¼Œåˆ°è¯¥æ¯”ç‰¹è¢«è§£ç ï¼ˆåœ¨ä¸»æœºBä¸Šä½œä¸ºæ¨¡æ‹Ÿä¿¡å·çš„ä¸€éƒ¨åˆ†ï¼‰ï¼ŒèŠ±äº†å¤šå°‘ æ—¶é—´ï¼Ÿ</p>
<p>(56 X 8)&#x2F;(64 X 10^3)+(56X8)&#x2F;(2x10^6)+0.01</p>
<p>å‡å®šç”¨æˆ·å…±äº«ä¸€æ¡3Mbpsçš„é“¾è·¯ã€‚åˆè®¾æ¯ä¸ªç”¨æˆ·ä¼ è¾“æ—¶è¦æ±‚150kbpsï¼Œä½†æ˜¯æ¯ä¸ªç”¨æˆ·ä»…æœ‰10%çš„æ—¶é—´ä¼ è¾“ã€‚</p>
<p>a.å½“ä½¿ç”¨ç”µè·¯äº¤æ¢æ—¶ï¼Œèƒ½å¤Ÿæ”¯æŒå¤šå°‘ç”¨æˆ·ï¼Ÿ</p>
<p>3Ã—10^6&#x2F;(150Ã—10^3)&#x3D;20</p>
<p>b.å¯¹äºæœ¬ä¹ é¢˜çš„åç»­å°é¢˜ï¼Œå‡å®šä½¿ç”¨åˆ†ç»„äº¤æ¢ã€‚æ±‚å‡ºæŸç»™å®šç”¨æˆ·æ­£åœ¨ä¼ è¾“çš„æ¦‚ç‡ã€‚<strong>0.1</strong></p>
<p>c.å‡å®šæœ‰120ä¸ªç”¨æˆ·ã€‚æ±‚å‡ºåœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œå®é™…æœ‰nä¸ªç”¨æˆ·åœ¨åŒæ—¶ä¼ è¾“çš„æ¦‚ç‡ã€‚ï¼ˆæç¤ºï¼šä½¿ç”¨äºŒé¡¹å¼åˆ†å¸ƒã€‚ï¼‰ </p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/fzjh1.png"></p>
<p>d.æ±‚å‡ºæœ‰21ä¸ªæˆ–æ›´å¤šç”¨æˆ·åŒæ—¶ä¼ è¾“çš„æ¦‚ç‡ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/fzjh2.png"></p>
<p>å‡å®šæœ‰Nä¸ªåˆ†ç»„åŒæ—¶åˆ°è¾¾ä¸€æ¡å½“å‰æ²¡æœ‰åˆ†ç»„ä¼ è¾“æˆ–æ’é˜Ÿçš„é“¾è·¯ã€‚æ¯ä¸ªåˆ†ç»„é•¿ä¸ºLï¼Œé“¾è·¯ä¼ è¾“é€Ÿç‡ä¸ºRã€‚å¯¹Nä¸ªåˆ†ç»„è€Œè¨€.å…¶å¹³å‡æ’é˜Ÿæ—¶å»¶æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>è§£ï¼šç¬¬1ä¸ªåˆ†ç»„æ’é˜Ÿæ—¶é—´ä¸º0ï¼Œç¬¬2ä¸ªåˆ†ç»„åœ¨L&#x2F;Ræ—¶é—´åå¼€å§‹ä¼ è¾“ï¼Œç¬¬nä¸ªåˆ†ç»„åœ¨ï¼ˆn-1ï¼‰L&#x2F;Rå¼€å§‹ä¼ è¾“ï¼Œåˆ™<strong>å¹³å‡å»¶æ—¶</strong>ä¸ºï¼š[L&#x2F;R+2L&#x2F;R+â€¦+(n-1ï¼‰L&#x2F;R]&#x2F;n&#x3D;(n-1)L&#x2F;(2R)</p>
<p>ç°åœ¨å‡å®šæ¯éš”LN&#x2F;Rç§’æœ‰Nä¸ªåˆ†ç»„åŒæ—¶åˆ°è¾¾é“¾è·¯ã€‚ä¸€ä¸ªåˆ†ç»„çš„å¹³å‡æ’é˜Ÿæ—¶å»¶æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>ä¼ è¾“Nä¸ªåˆ†ç»„éœ€è¦æ—¶é—´&#x3D;NL&#x2F;Rï¼Œæ­¤æ—¶åˆæœ‰Nä¸ªåˆ†ç»„åˆ°è¾¾ï¼Œæ„å‘³ç€æ¯ä¸€æ‰¹åˆ†ç»„éƒ½ä¸éœ€è¦æ’é˜Ÿå°±å¯ä»¥æ¥ç€ä¼ è¾“ï¼Œå› æ­¤1ä¸ªåˆ†ç»„å¹³å‡æ—¶å»¶ä¸ºï¼ˆN-1ï¼‰L&#x2F;ï¼ˆ2R)</p>
<p>è€ƒè™‘æŸè·¯ç”±å™¨ç¼“å­˜ä¸­çš„æ’é˜Ÿæ—¶å»¶ã€‚ä»¤Iè¡¨ç¤ºæµé‡å¼ºåº¦ï¼›å³I&#x3D; La&#x2F;Rã€‚å‡å®šæ’é˜Ÿæ—¶å»¶çš„å½¢å¼ä¸ºIL&#x2F;R(1-I)ï¼Œå…¶ä¸­I&lt;1ã€‚ a. å†™å²€æ€»æ—¶å»¶å³æ’é˜Ÿæ—¶å»¶åŠ ä¸Šä¼ è¾“æ—¶å»¶çš„å…¬å¼ã€‚</p>
<p>æ€»æ—¶å»¶ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/pdcs1.png"></p>
<p>b. ä»¥L&#x2F;Rä¸ºå‡½æ•°ç”»å‡ºæ€»æ—¶å»¶çš„å›¾</p>
<p>è®¾x&#x3D; L&#x2F;Rï¼Œåˆ™æ€»æ—¶å»¶&#x3D;x&#x2F;(1-ax)</p>
<p>å‡å®šä¸¤å°ä¸»æœºAå’ŒBç›¸éš”20000kmï¼Œç”±ä¸€æ¡ç›´æ¥çš„R&#x3D;2Mbpsçš„é“¾è·¯ç›¸è¿ã€‚å‡å®šè·¨è¶Šè¯¥é“¾è·¯çš„ä¼ æ’­é€Ÿç‡æ˜¯ 2.5Ã—10^8 m&#x2F;sã€‚<br>a) è®¡ç®—å¸¦å®½â€”â€”æ—¶å»¶ç§¯</p>
<p>b) è€ƒè™‘ä»ä¸»æœºAåˆ°ä¸»æœºBå‘é€ä¸€ä¸ª800000æ¯”ç‰¹çš„æ–‡ä»¶ã€‚å‡å®šè¯¥æ–‡ä»¶ä½œä¸ºä¸€ä¸ªå¤§çš„æŠ¥æ–‡è¿ç»­å‘é€ã€‚åœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´ï¼Œåœ¨é“¾è·¯ä¸Šå…·æœ‰çš„æ¯”ç‰¹æ•°é‡æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>c) ç»™å‡ºå¸¦å®½â€”â€”æ—¶å»¶ç§¯çš„ä¸€ç§è§£é‡Š</p>
<p>d) åœ¨è¯¥é“¾è·¯ä¸Šä¸€ä¸ªæ¯”ç‰¹çš„å®½åº¦ï¼ˆä»¥ç±³è®¡ï¼‰æ˜¯å¤šå°‘ï¼Ÿå®ƒæ¯”ä¸€ä¸ªè¶³çƒåœºæ›´é•¿å—ï¼Ÿ</p>
<p>e) æ ¹æ®ä¼ æ’­é€Ÿç‡sã€å¸¦å®½R å’Œé“¾è·¯mçš„é•¿åº¦ï¼Œæ¨å¯¼å‡ºä¸€ä¸ªæ¯”ç‰¹å®½åº¦çš„ä¸€èˆ¬è¡¨è¾¾å¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_18-30-40.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_18-38-00.png"></p>
<p>m&#x2F;(R*m&#x2F;s)&#x3D;s&#x2F;R</p>
<p>è€ƒè™‘ä»ä¸»æœºAåˆ°ä¸»æœºBå‘é€ä¸€ä¸ªFæ¯”ç‰¹çš„å¤§æ–‡ä»¶ã€‚Aå’ŒBä¹‹é—´æœ‰ä¸¤æ®µé“¾è·¯ï¼ˆå’Œä¸¤å°äº¤æ¢æœºï¼‰ï¼Œå¹¶ä¸”è¯¥é“¾è·¯ä¸æ‹¥å¡ï¼ˆå³æ²¡æœ‰æ’é˜Ÿæ—¶å»¶ï¼‰ã€‚ä¸»æœºAå°†è¯¥æ–‡ä»¶åˆ†ä¸ºæ¯ä¸ªä¸ºSæ¯”ç‰¹çš„æŠ¥æ–‡æ®µï¼Œå¹¶ä¸ºæ¯ä¸ªæŠ¥æ–‡æ®µå¢åŠ ä¸€ä¸ª80æ¯”ç‰¹çš„é¦–éƒ¨ï¼Œå½¢æˆL&#x3D;80+Sæ¯”ç‰¹çš„åˆ†ç»„ã€‚æ¯æ¡é“¾è·¯çš„ä¼ è¾“é€Ÿç‡ä¸ºR bpsã€‚æ±‚å‡ºä»Aåˆ°Bç§»åŠ¨è¯¥æ–‡ä»¶æ—¶å»¶æœ€å°çš„å€¼Sã€‚å¿½ç•¥ä¼ æ’­æ—¶å»¶ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_18-55-47.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_18-55-29.png"></p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘æœŸæœ«å¤ä¹ ä¹‹åº”ç”¨å±‚</title>
    <url>/2023/06/21/%E8%AE%A1%E7%BD%91/2/</url>
    <content><![CDATA[<p>1ã€ç½‘ç»œåº”ç”¨ç¨‹åºéƒ¨ç½²</p>
<p>ï¼ˆ1ï¼‰éƒ¨ç½²åœ¨ç«¯ç³»ç»Ÿä¸Šï¼ˆ2ï¼‰æ²¡æœ‰åº”ç”¨ç¨‹åºè½¯ä»¶è¿è¡Œåœ¨ç½‘ç»œæ ¸å¿ƒè®¾å¤‡ä¸Š</p>
<p>2ã€ç½‘ç»œåº”ç”¨ç¨‹åºä½“ç³»ç»“æ„</p>
<p>ï¼ˆ1ï¼‰C&#x2F;Sä½“ç³»ç»“æ„	Serverï¼šå…·æœ‰å›ºå®šçš„ã€ä¼—æ‰€å‘¨çŸ¥çš„IPåœ°å€ï¼›æ€»æ˜¯æ‰“å¼€çš„ä¸»æœºï¼›ä¸»æœºç¾¤é›†ï¼›	Clientï¼šå¯ä»¥é—´æ–­çš„åŒæœåŠ¡å™¨è¿æ¥ï¼›æ‹¥æœ‰åŠ¨æ€IPåœ°å€ï¼›å®¢æˆ·æœºç›¸äº’ä¹‹é—´ä¸ç›´æ¥é€šä¿¡</p>
<p>ï¼ˆ2ï¼‰P2Pä½“ç³»ç»“æ„	æ²¡æœ‰æ€»æ˜¯æ‰“å¼€çš„æœåŠ¡å™¨ï¼›ä»»æ„ä¸€å¯¹ä¸»æœºç›´æ¥ç›¸äº’é€šä¿¡ï¼›å¯¹ç­‰æ–¹é—´æ­‡è¿æ¥å¹¶ä¸”å¯ä»¥æ”¹å˜IPåœ°å€ï¼›è‡ªæ‰©å±•æ€§ï¼›éš¾ä»¥ç®¡ç†</p>
<p>ï¼ˆ3ï¼‰C&#x2F;Så’ŒP2Pæ··åˆçš„ä½“ç³»ç»“æ„	ä¸­å¿ƒæœåŠ¡å™¨è®°å½•å¯¹ç­‰æ–¹å†…å®¹ï¼ˆç”¨æˆ·æ³¨å†Œã€æ–‡ä»¶å­˜å‚¨ä¿¡æ¯ç­‰ï¼‰ï¼Œä¾›ç”¨æˆ·æœç´¢ï¼›</p>
<p>3ã€è¿›ç¨‹é€šä¿¡</p>
<p>ï¼ˆ1ï¼‰åŒä¸€ä¸»æœºä¸Šè¿è¡Œçš„è¿›ç¨‹ä¹‹é—´è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶è¿›è¡Œé€šä¿¡ï¼Œç”±æ“ä½œç³»ç»Ÿæä¾›ã€‚</p>
<p>ï¼ˆ2ï¼‰ä¸åŒä¸»æœºä¸Šè¿è¡Œçš„è¿›ç¨‹é—´äº¤æ¢æŠ¥æ–‡è¿›è¡Œé€šä¿¡ã€‚è¿›ç¨‹é—´é€šä¿¡åˆ©ç”¨socketå‘é€&#x2F;æ¥æ”¶æ¶ˆæ¯å®ç°ã€‚</p>
<p>å…·æœ‰P2Pä½“ç³»ç»“æ„çš„åº”ç”¨ç¨‹åºæ—¢æœ‰å®¢æˆ·è¿›ç¨‹ï¼ˆå‘èµ·é€šä¿¡çš„è¿›ç¨‹ï¼‰å’ŒæœåŠ¡å™¨è¿›ç¨‹ï¼ˆå‘èµ·é€šä¿¡çš„è¿›ç¨‹ï¼‰ã€‚</p>
<p>4ã€å¦‚ä½•å¯»å€è¿›ç¨‹ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰ä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹é—´é€šä¿¡ï¼Œé‚£ä¹ˆæ¯ä¸ªè¿›ç¨‹å¿…é¡»æ‹¥æœ‰æ ‡è¯†ç¬¦ï¼ˆ IPåœ°å€ã€ç«¯å£å·ï¼‰ï¼ˆ2ï¼‰å¸¸ç”¨ç½‘ç»œç¨‹åºçš„ç«¯å£å·ï¼šWebæœåŠ¡ï¼š80ï¼›é‚®ä»¶æœåŠ¡ï¼š25</p>
<p>5ã€å¸¸è§åº”ç”¨çš„ä¼ è¾“æœåŠ¡éœ€æ±‚</p>
<table>
<thead>
<tr>
<th><strong>åº”ç”¨</strong></th>
<th><strong>æ•°æ®ä¸¢å¤±</strong></th>
<th><strong>å¸¦å®½</strong></th>
<th><strong>æ—¶é—´æ•æ„Ÿ</strong></th>
</tr>
</thead>
<tbody><tr>
<td>æ–‡ä»¶ä¼ è¾“</td>
<td>ä¸èƒ½ä¸¢å¤±</td>
<td>å¼¹æ€§</td>
<td>ä¸</td>
</tr>
<tr>
<td>ç”µå­é‚®ä»¶</td>
<td>ä¸èƒ½ä¸¢å¤±</td>
<td>å¼¹æ€§</td>
<td>ä¸</td>
</tr>
<tr>
<td>Web</td>
<td>ä¸èƒ½ä¸¢å¤±</td>
<td>å¼¹æ€§</td>
<td>ä¸</td>
</tr>
<tr>
<td>å®æ—¶éŸ³é¢‘&#x2F;è§†é¢‘</td>
<td>å®¹å¿ä¸¢å¤±</td>
<td>éŸ³é¢‘: å‡ kbps-1Mbps</td>
<td>æ˜¯,100 msec</td>
</tr>
<tr>
<td>å­˜å‚¨éŸ³é¢‘&#x2F;è§†é¢‘</td>
<td>å®¹å¿ä¸¢å¤±</td>
<td>è§†é¢‘:10kbps-5Mbps</td>
<td>æ˜¯, å‡ ç§’</td>
</tr>
<tr>
<td>äº¤äº’å¼æ¸¸æˆ</td>
<td>å®¹å¿ä¸¢å¤±</td>
<td>è§†é¢‘:10kbps-5Mbps</td>
<td>æ˜¯, 100 msec</td>
</tr>
<tr>
<td>å³æ—¶è®¯æ¯</td>
<td>ä¸èƒ½ä¸¢å¤±</td>
<td>å‡  kbps ä»¥ä¸Š ï¼Œå¼¹æ€§</td>
<td>æ˜¯å’Œä¸æ˜¯</td>
</tr>
</tbody></table>
<p>6ã€å› ç‰¹ç½‘è¿è¾“å±‚æä¾›çš„æœåŠ¡</p>
<p>ï¼ˆ1ï¼‰TCPæœåŠ¡ï¼šé¢å‘è¿æ¥ã€å¯é æ•°æ®ä¼ è¾“ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶ï¼›æ— æ—¶å»¶å’Œå¸¦å®½ä¿è¯</p>
<p>ï¼ˆ2ï¼‰UDPæœåŠ¡ï¼šä¸æä¾›å»ºç«‹è¿æ¥ï¼Œå¯é æ€§ï¼Œæµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶ï¼Œæ—¶å»¶å’Œå¸¦å®½ä¿è¯ã€‚</p>
<p>é¢å‘è¿æ¥ï¼šå¿…é¡»åœ¨å»ºç«‹è¿æ¥å‰ç¡®è®¤åŒæ–¹é“¾è·¯å¯è¾¾ï¼Œå¹¶å·²å‡†å¤‡å¥½æ‰å¼€å§‹é€šä¿¡ï¼Œæä¾›å¯é æˆ–è€…ä¸å¯é çš„æœåŠ¡ã€‚</p>
<p>æ— è¿æ¥ï¼šå‘é€ç«¯åœ¨å¼€å§‹é€šä¿¡å‰ä¸å»è¯¢é—®æ¥æ”¶ç«¯æ˜¯å¦å¯è¾¾å’Œæ˜¯å¦å·²å‡†å¤‡å¥½æ¥æ”¶æ•°æ®ï¼Œæä¾›ä¸å¯é çš„æœåŠ¡ã€‚</p>
<p>7ã€å› ç‰¹ç½‘åº”ç”¨ï¼šåº”ç”¨å±‚åè®®ï¼Œä¼ è¾“åè®®</p>
<table>
<thead>
<tr>
<th><strong>åº”ç”¨</strong></th>
<th><strong>åº”ç”¨å±‚åè®®</strong></th>
<th><strong>ä¸‹é¢çš„ä¼ è¾“åè®®</strong></th>
</tr>
</thead>
<tbody><tr>
<td>ç”µå­é‚®ä»¶</td>
<td>SMTP [RFC 2821]</td>
<td>TCP</td>
</tr>
<tr>
<td>è¿œç¨‹ç»ˆç«¯è®¿é—®</td>
<td>Telnet [RFC 854]</td>
<td>TCP</td>
</tr>
<tr>
<td>Web</td>
<td>HTTP [RFC 2616]</td>
<td>TCP</td>
</tr>
<tr>
<td>æ–‡ä»¶ä¼ è¾“</td>
<td>FTP [RFC 959]</td>
<td>TCP</td>
</tr>
<tr>
<td>æµåª’ä½“</td>
<td>é€šå¸¸ä¸“ç”¨(e.g. RealNetworks)</td>
<td>TCP or UDP</td>
</tr>
<tr>
<td>å› ç‰¹ç½‘ç”µè¯</td>
<td>é€šå¸¸ä¸“ç”¨(e.g., Skype)</td>
<td>å…¸å‹ç”¨ UDP</td>
</tr>
</tbody></table>
<p>8ã€ç½‘é¡µï¼ˆWebé¡µï¼Œæˆ–ç§°æ–‡æ¡£ï¼‰ç”±è®¸å¤šå¯¹è±¡ç»„æˆï¼Œæ¯ä¸ªå¯¹è±¡è¢«ä¸€ä¸ªURL(Uniform Resource Locatorç»Ÿä¸€èµ„æºå®šä½ç¬¦)å¯»å€ï¼ˆ<strong>åè®®åã€ä¸»æœºåã€è·¯å¾„å</strong>ï¼‰ã€‚å¤šæ•°ç½‘é¡µç”±å•ä¸ªåŸºæœ¬<strong>HTML</strong>æ–‡ä»¶å’Œè‹¥å¹²ä¸ªæ‰€å¼•ç”¨çš„å¯¹è±¡æ„æˆã€‚</p>
<p>æ¯”å¦‚ï¼š<a href="http://www.someschool.edu/someDept/pic.gif">http://www.someschool.edu/someDept/pic.gif</a></p>
<p>9ã€HTTP: è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆWebçš„åº”ç”¨å±‚åè®®ï¼‰</p>
<p>ï¼ˆ1ï¼‰client&#x2F;serveræ¨¡å¼ï¼šå®¢æˆ·ç«¯æµè§ˆå™¨è¯·æ±‚+ WebæœåŠ¡å™¨å“åº”</p>
<p>ï¼ˆ2ï¼‰å·¥ä½œè¿‡ç¨‹ï¼š</p>
<ul>
<li>å®¢æˆ·åˆå§‹åŒ–ä¸€ä¸ªä¸HTTPæœåŠ¡å™¨80ç«¯å£çš„TCPè¿æ¥ (åˆ›å»ºå¥—æ¥å­—)</li>
<li>HTTPæœåŠ¡å™¨æ¥å—æ¥è‡ªå®¢æˆ·çš„TCPè¿æ¥è¯·æ±‚, å»ºç«‹è¿æ¥</li>
<li>Browser (HTTP client)å’ŒWebæœåŠ¡å™¨ (HTTP server) äº¤æ¢HTTPæ¶ˆæ¯(åº”ç”¨å±‚åè®®æ¶ˆæ¯)åŒ…æ‹¬HTTPè¯·æ±‚å’Œå“åº”æ¶ˆæ¯</li>
<li>æœ€åç»“æŸ(æˆ–å«å…³é—­)TCPè¿æ¥</li>
</ul>
<p>ï¼ˆ3ï¼‰HTTPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„åè®®ï¼šHTTPæœåŠ¡å™¨ä¸ç»´æŠ¤å®¢æˆ·å…ˆå‰çš„çŠ¶æ€ä¿¡æ¯</p>
<p>10ã€HTTPæŒä¹…è¿æ¥å’ŒéæŒä¹…è¿æ¥</p>
<p><strong>éæŒä¹…HTTPè¿æ¥</strong>ï¼šæ¯ä¸ªTCPè¿æ¥ä¸Šåªä¼ é€ä¸€ä¸ªå¯¹è±¡ï¼Œä¸‹è½½å¤šä¸ªå¯¹è±¡éœ€è¦å»ºç«‹å¤šä¸ªTCPè¿æ¥ï¼ŒHTTP&#x2F;1.0ä½¿ç”¨éæŒä¹…HTTPè¿æ¥</p>
<p><strong>æŒä¹…HTTPè¿æ¥</strong>ï¼šä¸€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªå¯¹è±¡ï¼ŒHTTP&#x2F;1.1é»˜è®¤ä½¿ç”¨æŒä¹…HTTPè¿æ¥</p>
<p>ä¾‹ï¼šå‡è®¾è¯¥é¡µé¢å«æœ‰ä¸€ä¸ªHTMLåŸºæœ¬æ–‡ä»¶å’Œ10ä¸ªJPEGå›¾å½¢ï¼Œ å¹¶ä¸”è¿™11ä¸ªå¯¹è±¡ä½äºåŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚</p>
<p>è¿›ä¸€æ­¥å‡è®¾è¯¥HTMLæ–‡ä»¶çš„URLä¸ºï¼š<a href="http://www.someschool.edu/someDepartment/home.index">http://www.someSchool.edu/someDepartment/home.index</a></p>
<p>(1) HTTPå®¢æˆ·è¿›ç¨‹åœ¨ç«¯å£å·80å‘èµ·ä¸€ä¸ªåˆ°æœåŠ¡å™¨ <a href="http://www.someschool.edu/">www.someSchool.edu</a> çš„TCPè¿æ¥ï¼Œè¯¥ç«¯å£å·æ˜¯HTTPçš„é»˜è®¤ç«¯å£ã€‚åœ¨å®¢æˆ·å’ŒæœåŠ¡å™¨ä¸Šåˆ†åˆ«æœ‰ä¸€ä¸ªå¥—æ¥å­—ä¸è¯¥è¿æ¥ç›¸å…³è”ã€‚</p>
<p>(2) HTTPå®¢æˆ·ç»å®ƒçš„å¥—æ¥å­—å‘è¯¥æœåŠ¡å™¨å‘é€ä¸€ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ã€‚è¯·æ±‚æŠ¥æ–‡ä¸­åŒ…å«äº†è·¯å¾„å&#x2F;someDepartment&#x2F;home.indexã€‚</p>
<p>(3) HTTPæœåŠ¡å™¨è¿›ç¨‹ç»å®ƒçš„å¥—æ¥å­—æ¥æ”¶è¯¥è¯·æ±‚æŠ¥æ–‡ï¼Œä»å…¶å­˜å‚¨å™¨(RAMæˆ–ç£ç›˜)ä¸­æ£€ç´¢å‡ºå¯¹è±¡ <a href="http://www.someschool.edu/someDepartment/home.index">www.someSchool.edu/someDepartment/home.index</a> ï¼Œåœ¨ä¸€ä¸ªHTTPå“åº”æŠ¥æ–‡ä¸­å°è£…å¯¹è±¡ï¼Œå¹¶é€šè¿‡å…¶å¥—æ¥å­—å‘å®¢æˆ·å‘é€å“åº”æŠ¥æ–‡ã€‚</p>
<p>(4)HTTPæœåŠ¡å™¨è¿›ç¨‹é€šçŸ¥TCPæ–­å¼€è¯¥TCPè¿æ¥ã€‚</p>
<p>(5)HTTPå®¢æˆ·æ¥æ”¶å“åº”æŠ¥æ–‡ï¼ŒTCPè¿æ¥å…³é—­ã€‚è¯¥æŠ¥æ–‡æŒ‡å‡ºå°è£…çš„å¯¹è±¡ä»¶ï¼Œå®¢æˆ·ä»å“åº”æŠ¥æ–‡ä¸­æå–å‡ºè¯¥æ–‡ä»¶ï¼Œæ£€æŸ¥è¯¥HTMLæ–‡ä»¶ï¼Œå¾—åˆ°å¯¹10ä¸ªJPEGå›¾å½¢çš„å¼•ç”¨ã€‚</p>
<p>(6) å¯¹æ¯ä¸ªå¼•ç”¨çš„JPEGå›¾å½¢å¯¹è±¡é‡å¤å‰4ä¸ªæ­¥éª¤ã€‚</p>
<p><strong>ä¸å¸¦æµæ°´çº¿çš„æŒä¹…HTTPè¿æ¥</strong>ï¼šå®¢æˆ·å…ˆå‰å“åº”æ¶ˆæ¯æ”¶åˆ°,æ‰å‘å‡ºæ–°çš„è¯·æ±‚æ¶ˆæ¯ï¼Œæ¯ä¸ªå¼•ç”¨å¯¹è±¡ç»å†1ä¸ªRTT</p>
<p>**å¸¦æµæ°´çº¿çš„æŒä¹…HTTPè¿æ¥ **ï¼šHTTP&#x2F;1.1é»˜è®¤ä½¿ç”¨å®¢æˆ·é‡åˆ°1ä¸ªå¼•ç”¨å¯¹è±¡å°±å‘é€è¯·æ±‚æ¶ˆæ¯ï¼Œæ‰€æœ‰å¼•ç”¨å¯¹è±¡åªç»å†1ä¸ªRTT</p>
<p>11ã€HTTPæŠ¥æ–‡æ ¼å¼:è¯·æ±‚æŠ¥æ–‡request, å“åº”æŠ¥æ–‡responseï¼ˆå¸¸è§å‘½ä»¤å’ŒçŠ¶æ€ç ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_13-50-36.png"></p>
<p>å‡è®¾æœ‰HTTPè¯·æ±‚æŠ¥æ–‡ï¼š</p>
<p>GET &#x2F;somedir&#x2F;page.html HTTP&#x2F;1.1</p>
<p>å…¶ä¸­ï¼Œ&#x2F;somedir&#x2F;page.htmlè¢«ç§°ä¸ºï¼ˆï¼‰URI æˆ–Uniform Resource Identifiers æˆ–ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</p>
<p>HTTP&#x2F;1.0</p>
<ul>
<li>GET</li>
<li>POST</li>
<li>HEAD<ul>
<li>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œç”¨HTTPæŠ¥æ–‡è¿›è¡Œå“åº”ï¼Œä½†ä¸è¿”å›è¯·æ±‚å¯¹è±¡</li>
</ul>
</li>
</ul>
<p>HTTP&#x2F;1.1</p>
<ul>
<li><p>GET, POST, HEAD</p>
</li>
<li><p>PUT</p>
<ul>
<li>æ–‡ä»¶åœ¨å®ä½“ä¸»ä½“ä¸­è¢«ä¸Šè½½åˆ°URLå­—æ®µæŒ‡å®šçš„è·¯å¾„</li>
</ul>
</li>
<li><p>DELETE</p>
<ul>
<li>åˆ é™¤URLå­—æ®µæŒ‡å®šçš„æ–‡ä»¶</li>
</ul>
</li>
</ul>
<p><em><strong>ä¸Šè½½è¡¨å•ï¼ˆå„å­—æ®µï¼‰è¾“å…¥å€¼</strong></em></p>
<p>Postæ–¹æ³•:ç½‘é¡µæ—¶å¸¸åŒ…å«è¡¨å•è¾“å…¥ï¼Œè¾“å…¥å€¼åœ¨è¯·æ±‚æŠ¥æ–‡çš„å®ä½“ä¸»ä½“ä¸­è¢«ä¸Šè½½åˆ°æœåŠ¡å™¨</p>
<p>URLæ–¹æ³•:ä½¿ç”¨GETæ–¹æ³•ï¼Œè¡¨å•(å„å­—æ®µ)è¾“å…¥å€¼è¢«ä¸Šè½½,ä»¥URLè¯·æ±‚è¡Œçš„å­—æ®µ: <a href="http://www.somesite.com/animalsearch?monkeys&banana">www.somesite.com/animalsearch?monkeys&amp;banana</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_13-57-34.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_13-58-04.png"></p>
<p>12ã€ Cookiesä½œç”¨ï¼Œå¦‚ä½•å®ç°</p>
<p>ï¼ˆ1ï¼‰Cookies: è·Ÿè¸ªç”¨æˆ·ï¼Œæé«˜ç”¨æˆ·å’ŒæœåŠ¡å™¨çš„äº¤äº’æ€§</p>
<p>ï¼ˆ2ï¼‰cookieå¤´éƒ¨è¡Œåœ¨HTTPè¯·æ±‚æ¶ˆæ¯ï¼ˆæˆ–å“åº”æ¶ˆæ¯ï¼‰ä¸­</p>
<p>ï¼ˆ3ï¼‰cookieæ–‡ä»¶ ä¿å­˜åœ¨<strong>ç”¨æˆ·ä¸»æœº</strong>ä¸­å¹¶è¢«<strong>ç”¨æˆ·æµè§ˆå™¨</strong>ç®¡ç†</p>
<p>ï¼ˆ4ï¼‰cookieä¹Ÿä¿å­˜åœ¨Webç«™ç‚¹çš„<strong>åç«¯æ•°æ®åº“</strong></p>
<p>ï¼ˆ5ï¼‰åº”ç”¨åœºæ™¯ï¼šèº«ä»½è®¤è¯&#x2F;è™šæ‹Ÿè´­ç‰©è½¦&#x2F;æ¨èå¹¿å‘Š&#x2F;ç”¨æˆ·ä¼šè¯çŠ¶æ€</p>
<p>ï¼ˆ6ï¼‰ä¼˜ç‚¹ï¼šcookieså…è®¸ç½‘ç«™æ›´åŠ äº†è§£ä½ ï¼Œä½ å¯ä»¥æä¾›åå­—å’Œe-mailç»™ç½‘ç«™ ï¼Œå¹¿å‘Šå…¬å¸é€šè¿‡ç½‘ç«™è·å¾—ä¿¡æ¯ï¼ŒCookiesä¸é€‚åˆæ¸¸åŠ¨ç”¨æˆ·</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_14-06-53.png"></p>
<p>13ã€Web ç¼“å­˜ (ä»£ç†æœåŠ¡å™¨)ï¼Œå¦‚ä½•å®ç°ï¼Œæ¡ä»¶GETæ–¹æ³•</p>
<p>ç›®æ ‡:åœ¨ä¸è®¿é—®æœåŠ¡å™¨çš„å‰æä¸‹æ»¡è¶³å®¢æˆ·ç«¯çš„HTTPè¯·æ±‚ã€‚</p>
<p><strong>Webç¼“å­˜&#x2F;ä»£ç†æœåŠ¡å™¨</strong></p>
<ul>
<li><p>ç”¨æˆ·è®¾å®šæµè§ˆå™¨é€šè¿‡ç¼“å­˜è¿›è¡ŒWebè®¿é—®</p>
</li>
<li><p>æµè§ˆå™¨å‘ç¼“å­˜&#x2F;ä»£ç†æœåŠ¡å™¨å‘é€æ‰€æœ‰çš„HTTPè¯·æ±‚</p>
<ul>
<li>å¦‚æœæ‰€è¯·æ±‚å¯¹è±¡åœ¨ç¼“å­˜ä¸­ï¼Œç¼“å­˜å™¨è¿”å›å¯¹è±¡</li>
<li>å¦åˆ™ç¼“å­˜å™¨å‘èµ·å§‹æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œæ¥æ”¶å¯¹è±¡åè½¬å‘ç»™å®¢æˆ·æœº</li>
</ul>
</li>
<li><p>ç¼“å­˜æ—¢å……å½“å®¢æˆ·ç«¯ï¼Œä¹Ÿå……å½“æœåŠ¡å™¨</p>
</li>
<li><p>ä¸€èˆ¬ç”±ISP(InternetæœåŠ¡æä¾›å•†)æ¶è®¾</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_14-13-20.png"></p>
<p>ä¸ºä»€ä¹ˆéœ€è¦Webç¼“å­˜å™¨?</p>
<blockquote>
<p>å‡å°‘å¯¹å®¢æˆ·æœºè¯·æ±‚çš„å“åº”æ—¶é—´</p>
<p>å‡å°‘å†…éƒ¨ç½‘ç»œä¸æ¥å…¥é“¾è·¯ä¸Šçš„é€šä¿¡é‡</p>
<p>èƒ½ä»æ•´ä½“ä¸Šå¤§å¤§é™ä½å› ç‰¹ç½‘ä¸Šçš„Webæµé‡</p>
</blockquote>
<p>æ¡ä»¶GETæ–¹æ³•</p>
<p>ç›®çš„: è¯å®ç¼“å­˜å™¨ä¸­çš„å¯¹è±¡æ˜¯å¦ä¸ºæœ€æ–°</p>
<p>ç¼“å­˜å™¨ï¼šåœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŒ…å«å¯¹è±¡æœ€åä¿®æ”¹æ—¶é—´ If-modified-since: &lt;date&gt;</p>
<p>æœåŠ¡å™¨: å¦‚æœå¯¹è±¡æ˜¯æœ€æ–°çš„åˆ™å“åº”æŠ¥æ–‡ä¸­ä¸åŒ…å«å¯¹è±¡: HTTP&#x2F;1.0 304 Not Modified</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_14-16-54.png"></p>
<p>14ã€ç”¨æˆ·ä»£ç†user agentsã€é‚®ä»¶æœåŠ¡å™¨mail serversã€ç®€å•é‚®ä»¶ä¼ é€åè®®å’Œé‚®ä»¶æ¥æ”¶åè®®çš„ä½œç”¨</p>
<p>ç”¨æˆ·ä»£ç†ï¼š</p>
<ul>
<li><p>å…è®¸ç”¨æˆ·é˜…è¯»,å›å¤,è½¬å‘,ä¿å­˜,ç¼–è¾‘é‚®ä»¶æ¶ˆæ¯ </p>
</li>
<li><p>å‘é€, æ¥æ”¶é‚®ä»¶æ¶ˆæ¯åˆ°&#x2F;ä»æœåŠ¡å™¨</p>
</li>
</ul>
<p>é‚®ä»¶æœåŠ¡å™¨ </p>
<ul>
<li>é‚®ç®±mailboxå­˜æ”¾ç”¨æˆ·æ¥æ”¶çš„é‚®ä»¶æ¶ˆæ¯</li>
<li>å¤–å‡ºæŠ¥æ–‡é˜Ÿåˆ—outgoing message queue</li>
</ul>
<p>SMTPåè®®</p>
<ul>
<li><p>è¿è¡Œé‚®ä»¶<strong>æœåŠ¡å™¨ä¹‹é—´</strong>ä¼ é€’æ¶ˆæ¯æ‰€ä½¿ç”¨çš„åè®®</p>
</li>
<li><p>å®¢æˆ·ç«¯ï¼šå‘é€æ¶ˆæ¯çš„æœåŠ¡å™¨</p>
</li>
<li><p>æœåŠ¡å™¨ï¼šæ¥æ”¶æ¶ˆæ¯çš„æœåŠ¡å™¨</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_14-17-44.png"></p>
<p>15ã€ç”µå­é‚®ä»¶åè®®ï¼ˆSMTP&#x2F;POP3ã€IMAPã€HTTPï¼‰å„è‡ªç«¯å£å·</p>
<p><strong>SMTP</strong></p>
<ul>
<li>å®¢æˆ·ä½¿ç”¨TCPæ¥å¯é ä¼ è¾“é‚®ä»¶æ¶ˆæ¯åˆ°æœåŠ¡å™¨ç«¯å£å·<strong>25</strong></li>
<li>ä¼ è¾“çš„3ä¸ªé˜¶æ®µï¼šæ¡æ‰‹ (é—®å€™)ã€é‚®ä»¶æ¶ˆæ¯çš„ä¼ è¾“ã€ç»“æŸ</li>
<li>å‘é€æœåŠ¡å™¨åˆ°æ¥æ”¶æœåŠ¡å™¨é‡‡ç”¨ç›´æ¥ä¼ é€</li>
<li>ä½¿ç”¨æŒä¹…è¿æ¥</li>
<li>å‘½ä»¤&#x2F;åº”ç­”çš„äº¤äº’ï¼ŒæœåŠ¡å™¨ä½¿ç”¨<strong>CRLF.CRLF</strong> æ¥åˆ¤æ–­é‚®ä»¶æ¶ˆæ¯çš„ç»“æŸ<ul>
<li>å‘½ä»¤: ASCIIæ–‡æœ¬æ ¼å¼</li>
<li>åº”ç­”: çŠ¶æ€ç åŠå…¶çŸ­è¯­</li>
</ul>
</li>
<li>é‚®ä»¶æ¶ˆæ¯å¿…é¡»æ˜¯7-bit ASCII</li>
<li>ä¸HTTPåè®®æ¯”è¾ƒ<ul>
<li>HTTPæ˜¯æ‹‰åè®®ï¼ˆæŠŠä¿¡æ¯æ‹‰ä¸‹æ¥ï¼‰ï¼ŒSMTPæ˜¯æ¨åè®®ï¼ˆæŠŠä¿¡æ¯é€å‡ºå»ï¼‰</li>
<li>HTTPçš„æ¯ä¸ªå¯¹è±¡å°è£…åœ¨å®ƒå„è‡ªçš„HTTPå“åº”æ¶ˆæ¯ä¸­å‘é€ï¼›SMTPä¸€ä¸ªé‚®ä»¶å†…å„ä¸ªå¯¹è±¡ç½®äºåŒä¸€ä¸ªé‚®ä»¶æ¶ˆæ¯çš„å¤šç›®éƒ¨åˆ†å‘é€</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_14-38-09.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_14-38-48.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_14-42-16.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_14-42-38.png"></p>
<p><strong>POP3</strong></p>
<ul>
<li><p>Post Office Protocol é‚®å±€åè®®[RFC 1939]<strong>110</strong>ç«¯å£å·</p>
</li>
<li><p>èº«ä»½è®¤è¯ (ä»£ç† &lt;â€“&gt;æœåŠ¡å™¨) </p>
<ul>
<li><p>å®¢æˆ·å‘½ä»¤: </p>
<ul>
<li>user username</li>
<li>pass password</li>
</ul>
</li>
<li><p>æœåŠ¡å™¨å“åº”</p>
<ul>
<li>+OK</li>
<li>-ERR</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¸‹è½½é‚®ä»¶æ¶ˆæ¯</p>
<ul>
<li>list: åˆ—å‡ºé‚®ä»¶ç¼–å·</li>
<li>retr: æŒ‰ç¼–å·å–é‚®ä»¶</li>
<li>dele: åˆ é™¤</li>
<li>quit</li>
</ul>
</li>
<li><p>POP3çš„ä¼šè¯æ˜¯<strong>æ— çŠ¶æ€çš„</strong></p>
</li>
</ul>
<p><strong>IMAP</strong></p>
<ul>
<li>æ‰€æœ‰é‚®ä»¶æ¶ˆæ¯ä¿å­˜åœ¨ä¸€ä¸ªä½ç½®: æœåŠ¡å™¨</li>
<li>å…è®¸ç”¨æˆ·åˆ©ç”¨æ–‡ä»¶å¤¹ç»„ç»‡ç®¡ç†é‚®ä»¶æ¶ˆæ¯</li>
<li>IMAPæ”¯æŒè·¨ä¼šè¯(Session)çš„ç”¨æˆ·çŠ¶æ€:<ul>
<li>æ–‡ä»¶å¤¹çš„åå­—</li>
<li>é‚®ä»¶æ¶ˆæ¯IDså’Œæ–‡ä»¶å¤¹çš„æ˜ å°„</li>
</ul>
</li>
</ul>
<p>16ã€DNSçš„åŠŸèƒ½ã€ç‰¹ç‚¹</p>
<p>DNSæœåŠ¡å™¨æä¾›çš„åŠŸèƒ½ï¼š</p>
<ul>
<li><p>ä¸»æœºååˆ°IPåœ°å€çš„è½¬æ¢</p>
</li>
<li><p>ä¸»æœºåˆ«åï¼šä¸€ä¸ªä¸»æœºå¯ä»¥æœ‰ä¸€ä¸ªè§„èŒƒä¸»æœºåå’Œå¤šä¸ªä¸»æœºåˆ«å</p>
</li>
<li><p>é‚®ä»¶æœåŠ¡å™¨åˆ«å</p>
</li>
<li><p>è´Ÿè½½åˆ†é…</p>
<ul>
<li>DNSå®ç°å†—ä½™æœåŠ¡å™¨ï¼šä¸€ä¸ªIPåœ°å€é›†åˆå¯ä»¥å¯¹åº”äºåŒä¸€ä¸ªè§„èŒƒä¸»æœºåã€‚</li>
</ul>
</li>
</ul>
<p>DNSï¼ˆDomain Name System:åŸŸåç³»ç»Ÿï¼‰ç‰¹ç‚¹</p>
<ul>
<li>åˆ†å¸ƒå¼æ•°æ®åº“ï¼šä¸€ä¸ªç”±åˆ†å±‚DNSæœåŠ¡å™¨å®ç°çš„åˆ†å¸ƒå¼æ•°æ®åº“</li>
<li>åº”ç”¨å±‚åè®®ï¼šDNSæœåŠ¡å™¨å®ç°åŸŸåè½¬æ¢ (åŸŸå&#x2F;åœ°å€è½¬æ¢)</li>
</ul>
<p>ä¸ºä»€ä¹ˆä¸é›†ä¸­å¼DNS?</p>
<blockquote>
<p>å•ç‚¹æ•…éšœ</p>
<p>å·¨å¤§è®¿é—®é‡</p>
<p>è¿œè·ç¦»é›†ä¸­å¼æ•°æ®åº“</p>
<p>ç»´æŠ¤</p>
<p>ä¸å¯æ‰©å±•!</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_15-10-46.png"></p>
<p>å®¢æˆ·æœºæ€æ ·å†³å®šä¸»æœºå<a href="http://www.amazon.com/">www.amazon.com</a> çš„IPåœ°å€ï¼Ÿ</p>
<blockquote>
<p>å®¢æˆ·æœºæŸ¥è¯¢æ ¹æœåŠ¡å™¨å¾—åˆ°com DNSæœåŠ¡å™¨</p>
<p>å®¢æˆ·æœºæŸ¥è¯¢com DNSæœåŠ¡å™¨å¾—åˆ°amazon.comDNSæœåŠ¡å™¨</p>
<p>å®¢æˆ·æœºæŸ¥è¯¢amazon.comDNSæœåŠ¡å™¨å¾—åˆ°<a href="http://www.amazon.com/">www.amazon.com</a> çš„IPåœ°å€</p>
</blockquote>
<p><strong>é¡¶çº§åŸŸæœåŠ¡å™¨</strong>ï¼ˆtop-level domain serversï¼‰ï¼šè´Ÿè´£é¡¶çº§åŸŸå com, org, net, edu, etcï¼ˆç”¨é€”åŸŸåæˆ–è€…ç±»åˆ«åŸŸåï¼‰, å’Œæ‰€æœ‰å›½å®¶çš„é¡¶çº§åŸŸå uk, fr, ca, jp.</p>
<p><strong>æƒå¨DNSæœåŠ¡å™¨</strong>(authoritative DNS servers): åœ¨å› ç‰¹ç½‘ä¸Šå…·æœ‰å…¬å…±å¯è®¿é—®ä¸»æœºï¼ˆå¦‚WebæœåŠ¡å™¨å’Œé‚®ä»¶æœåŠ¡å™¨ï¼‰çš„æ¯ä¸ªç»„ç»‡æœºæ„å¿…é¡»æä¾›å…¬å…±å¯è®¿é—®çš„DNSè®°å½•ï¼Œè¿™äº›è®°å½•å°†è¿™äº›ä¸»æœºçš„åå­—æ˜ å°„ä¸ºIPåœ°å€ã€‚ç»„ç»‡æœºæ„çš„æƒå¨DNSæœåŠ¡å™¨è´Ÿè´£ä¿å­˜è¿™äº›DNSè®°å½•ã€‚å¤šæ•°å¤§å­¦å’Œå…¬å¸ç»´æŠ¤å®ƒä»¬çš„åŸºæœ¬æƒå¨DNSæœåŠ¡å™¨</p>
<p>æœ¬åœ°DNSæœåŠ¡å™¨(Local DNS name server)</p>
<ul>
<li>ä¸¥æ ¼æ¥è¯´ä¸å±äºè¯¥æœåŠ¡å™¨çš„å±‚æ¬¡ç»“æ„</li>
<li>æ¯ä¸ªISPï¼ˆå¦‚å±…æ°‘åŒºISPã€å…¬å¸ã€å¤§å­¦ï¼‰éƒ½æœ‰ä¸€ä¸ªæœ¬åœ°DNSï¼Œä¹Ÿå«é»˜è®¤æœåŠ¡å™¨</li>
<li>å½“ä¸»æœºå‘å‡ºDNSè¯·æ±‚æ—¶ï¼Œè¯¥è¯·æ±‚è¢«å‘å¾€æœ¬åœ°DNSæœåŠ¡å™¨ã€‚èµ·ç€ä»£ç†çš„ä½œç”¨ï¼Œè½¬å‘è¯·æ±‚åˆ°å±‚æ¬¡ç»“æ„ä¸­</li>
</ul>
<p>17ã€DNSçš„æŸ¥è¯¢æ–¹æ³•</p>
<p> é—®é¢˜ï¼šCis.poly.eduçš„ä¸»æœºæƒ³è·å¾—gaia.cs.umass.eduçš„IPåœ°å€</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_15-24-12.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_15-24-20.png">å‡è®¾ç”¨ä¸€ä¸ªå…¨æ–°çš„æµè§ˆå™¨ï¼ˆç¬¬ä¸€æ¬¡å¯åŠ¨çš„é‚£ç§ï¼‰ï¼Œè®¿é—®ç™¾åº¦ï¼ˆ<a href="http://www.baidu.com/">http://www.baidu.com/</a> )ï¼Œåœ¨æ•²å…¥ç½‘å€å¹¶æŒ‰ä¸‹å›è½¦ä¹‹åï¼š</p>
<p>1ã€<strong>è·å¾—IPåœ°å€</strong></p>
<p>ï¼ˆ1ï¼‰é¦–å…ˆæœç´¢æµè§ˆå™¨çš„ DNS ç¼“å­˜ï¼Œç¼“å­˜ä¸­ç»´æŠ¤ä¸€å¼ åŸŸåä¸ IP åœ°å€çš„å¯¹åº”è¡¨ï¼ˆ2ï¼‰è‹¥æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™ç»§ç»­æœç´¢æ“ä½œç³»ç»Ÿçš„ DNS ç¼“å­˜ï¼ˆLinux,&#x2F;etc&#x2F;hosts; Windows, C:\WINDOWS\system32\drivers\etc\hostsï¼‰</p>
<p>ï¼ˆ3ï¼‰è‹¥ä»ç„¶æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æ“ä½œç³»ç»Ÿå°†åŸŸåå‘é€è‡³æœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨é‡‡ç”¨é€’å½’æŸ¥è¯¢è‡ªå·±çš„ DNS ç¼“å­˜ï¼ŒæŸ¥æ‰¾æˆåŠŸåˆ™è¿”å›ç»“æœ</p>
<p>ï¼ˆ4ï¼‰è‹¥æœ¬åœ°åŸŸåæœåŠ¡å™¨çš„ DNS ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘ä¸Šçº§åŸŸåæœåŠ¡å™¨è¿›è¡Œè¿­ä»£æŸ¥è¯¢       </p>
<p>æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œæ ¹åŸŸåæœåŠ¡å™¨è¿”å›é¡¶çº§åŸŸåæœåŠ¡å™¨åœ°å€ç»™æœ¬åœ°æœåŠ¡å™¨       </p>
<p>æœ¬åœ°åŸŸåæœåŠ¡å™¨æ‹¿åˆ°é¡¶çº§åŸŸåæœåŠ¡å™¨åœ°å€åï¼Œå‘å…¶å‘èµ·è¯·æ±‚ï¼Œè·å–æƒå¨åŸŸåæœåŠ¡å™¨åœ°å€       </p>
<p>æœ¬åœ°åŸŸåæœåŠ¡å™¨æ ¹æ®æƒå¨åŸŸåæœåŠ¡å™¨åœ°å€ï¼Œå‘å…¶å‘èµ·è¯·æ±‚ï¼Œå¾—åˆ°è¯¥åŸŸåå¯¹åº”çš„ IP åœ°å€      </p>
<p>æœ¬åœ°åŸŸåæœåŠ¡å™¨å°†å¾—åˆ°çš„ IP åœ°å€è¿”å›ç»™æ“ä½œç³»ç»Ÿï¼ŒåŒæ—¶è‡ªå·±å°† IP åœ°å€ç¼“å­˜èµ·æ¥</p>
<p>ï¼ˆ5ï¼‰æ“ä½œç³»ç»Ÿå°† IP åœ°å€è¿”å›ç»™æµè§ˆå™¨ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå°† IP åœ°å€ç¼“å­˜ã€‚æµè§ˆå™¨å¾—åˆ°åŸŸåå¯¹åº”çš„ IP åœ°å€ï¼Œå¹¶å°† IP åœ°å€ç¼“å­˜ï¼ˆ<strong>ç¼“å­˜æ—¶é—´</strong>ï¼‰ã€‚</p>
<p>2ã€å’Œèµ·å§‹æœåŠ¡å™¨ï¼ˆæˆ–è€…Webç¼“å­˜&#x2F;ä»£ç†æœåŠ¡å™¨ï¼‰ï¼Œå»ºç«‹TCPè¿æ¥   å¾—åˆ°ç™¾åº¦çš„IPï¼Œä¸‹ä¸€æ­¥æ˜¯ä½¿ç”¨TCPåè®®ï¼Œå»ºç«‹TCPè¿æ¥ã€‚</p>
<p>3ã€å‘èµ·å§‹æœåŠ¡å™¨ï¼ˆæˆ–è€…Webç¼“å­˜&#x2F;ä»£ç†æœåŠ¡å™¨ï¼‰å‘é€è¯·æ±‚æŠ¥æ–‡ï¼Œç”¨HTTPåè®®è¯·æ±‚ç½‘é¡µå†…å®¹</p>
<p>4ã€æµè§ˆå™¨æ”¶åˆ°å“åº”æŠ¥æ–‡ï¼Œå¹¶è§£æã€‚</p>
<p>18ã€DNSè®°å½•ï¼Œåˆ›å»ºä¸€ä¸ªâ€œç½‘ç»œä¹Œæ‰˜é‚¦â€å…¬å¸ï¼Œå¦‚ä½•æ­å»ºæƒå¨æœåŠ¡å™¨</p>
<p><strong>DNS</strong>: å­˜å‚¨èµ„æºè®°å½•(<strong>RR</strong>ï¼ŒResource Records)çš„åˆ†å¸ƒå¼æ•°æ®åº“</p>
<p><strong>RR æ ¼å¼: (name, value, type,ttl)</strong></p>
<p>Type&#x3D;Aï¼ˆAddressï¼‰</p>
<ul>
<li>name &#x3D; ä¸»æœºå</li>
<li>value &#x3D; IPåœ°å€</li>
</ul>
<p>Type&#x3D;CNAMEï¼ˆcanonicalï¼‰</p>
<ul>
<li><p>name &#x3D; ä¸»æœºåˆ«å </p>
<p> <a href="http://www.ibm.com/">www.ibm.com</a> çš„çœŸåä¸º	servereast.backup2.ibm.com</p>
</li>
<li><p>value &#x3D; çœŸå®çš„è§„èŒƒä¸»æœºå</p>
</li>
</ul>
<p>Type&#x3D;NSï¼ˆ name server ï¼‰</p>
<ul>
<li>name &#x3D; åŸŸåï¼ˆå¦‚foo.comï¼‰ </li>
<li>value &#x3D; è¯¥åŸŸæƒå¨åå­—æœåŠ¡å™¨çš„ä¸»æœºå</li>
</ul>
<p>Type&#x3D;MXï¼ˆmail exchangeï¼‰</p>
<ul>
<li>name &#x3D;é‚®ä»¶æœåŠ¡å™¨çš„ä¸»æœºåˆ«å</li>
<li>value &#x3D;é‚®ä»¶æœåŠ¡å™¨çš„çœŸå®è§„èŒƒä¸»æœºå</li>
</ul>
<p>ä¾‹å­ï¼šåˆšåˆšåˆ›å»ºä¸€ä¸ªâ€œç½‘ç»œä¹Œæ‰˜é‚¦â€å…¬å¸</p>
<p>åœ¨åŸŸåç®¡ç†æœºæ„(å¦‚Network Solutions)æ³¨å†ŒåŸŸånetworkutopia.com</p>
<ul>
<li>éœ€è¦æä¾›ä½ è‡ªå·±çš„åŸºæœ¬æƒå¨DNSæœåŠ¡å™¨çš„åå­—å’ŒIPåœ°å€</li>
<li>è¯¥æ³¨å†Œç™»è®°æœºæ„å°†ä¸‹åˆ—ä¸¤æ¡èµ„æºè®°å½•æ’å…¥æ³¨å†Œæœºæ„çš„DNSç³»ç»Ÿä¸­ï¼š <ul>
<li>(networkutopia.com, dns1.networkutopia.com,NS)</li>
<li>(dns1.networkutopia.com, 212.212.212.1, A)</li>
</ul>
</li>
</ul>
<p>åœ¨æƒå¨åŸŸåè§£ææœåŠ¡å™¨ä¸­ä¸º<a href="http://www.networkuptopia.com/">www.networkuptopia.com</a> ï¼ˆçœŸå®æœºå™¨åweb1. networkuptopia.com, IPåœ°å€212.212.212.2ï¼‰åŠ å…¥Type Aè®°å½•ï¼Œä¸ºmail.networkutopia.com(çœŸå®æœºå™¨åmx1.mxmail. networkuptopia.com,IPåœ°å€212.212.212.3)åŠ å…¥Type MXè®°å½•</p>
<ul>
<li>ï¼ˆ <a href="http://www.networkuptopia.com/">www.networkuptopia.com</a> , web1. networkuptopia.com,CNAMEï¼‰ </li>
<li>ï¼ˆweb1. networkuptopia.com,212.212.212.2, A)</li>
<li>ï¼ˆ mail.networkutopia.com, mx1.mxmail. networkuptopia.com, MXï¼‰</li>
<li>ï¼ˆmx1.mxmail. networkuptopia.com,212.212.212.3,Aï¼‰</li>
</ul>
<p>ç½‘ç«™ä¸»æœºåæ˜¯<a href="http://www.foo.com/">www.foo.com</a> ï¼Œ çœŸå®çš„è§„èŒƒä¸»æœºåæ˜¯servereast.backup1.foo.comï¼ŒIPåœ°å€ï¼š112.147.11.30ã€‚é‚®ä»¶ä¸»æœºåmail.foo.com,çœŸå®çš„è§„èŒƒä¸»æœºåservereast.backup2.foo.comï¼ŒIPåœ°å€ï¼š112.147.11.40ã€‚åœ¨æƒå¨æœåŠ¡å™¨ä¸­éœ€è¦çš„RRï¼Ÿ</p>
<ul>
<li>(<a href="http://www.foo.com/">www.foo.com</a> , servereast.backup1.foo.com, CNAMEï¼‰</li>
<li>(servereast.backup1.foo.com ,12.147.11.30, A ï¼‰</li>
<li>(mail.foo.com, servereast.backup2.foo.com, MX ï¼‰</li>
<li>(servereast.backup2.foo.com, 112.147.11.40, A)</li>
</ul>
<p>19ã€DNSåè®®ã€æ¶ˆæ¯</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_15-26-34.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_15-26-42.png"></p>
<p>20ã€DNSå®‰å…¨</p>
<ul>
<li><p>DDoSæ”»å‡»ï¼šå¯¹æ ¹åŸŸåæœåŠ¡å™¨æˆ–é¡¶çº§åŸŸåæœåŠ¡å™¨å‘èµ·æ‹’ç»æœåŠ¡æ”»å‡»</p>
</li>
<li><p>é‡å®šå‘æ”»å‡»ï¼šä¸­é—´äººæ”»å‡»ã€DNSä¸­æ¯’æ”»å‡»ï¼ˆå‘é€æ¬ºéª—çš„åŸŸåè§£æç»“æœç»™DNSæœåŠ¡å™¨ï¼‰</p>
</li>
<li><p>åˆ©ç”¨DNSå®ç°DDoSæ”»å‡»ï¼š DNSåå¼¹å¼æ‹’ç»æœåŠ¡æ”»å‡»(DNS reflector attacksï¼Œåˆç§°DNS amplification attacks)ã€‚ä¼ªé€ å®¢æˆ·åœ°å€å‘å¤§é‡çš„dnsæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œå¯¼è‡´å®¢æˆ·æ— æ³•è®¿é—®dnsæœåŠ¡å™¨è¿›è¡ŒåŸŸåè§£æã€‚</p>
</li>
<li><p>ä¸ªäººç”¨æˆ·ï¼šæœ¬æœºHostæ–‡ä»¶è¢«ç¯¡æ”¹&#x2F;DNSåŠ«æŒ&#x2F;DNSæ±¡æŸ“</p>
</li>
</ul>
<p>21ã€CDNçš„ä½œç”¨å’Œå®ç°è¿‡ç¨‹</p>
<p>æŒ‘æˆ˜: å¦‚ä½•ä»æµ·é‡çš„è§†é¢‘ä¸­ï¼ŒæŒ‘é€‰å‡ºæŸäº›å†…å®¹ï¼Œé‡‡ç”¨æµçš„æ–¹å¼å‘é€ç»™æˆåƒä¸Šä¸‡çš„ç”¨æˆ·ï¼Ÿ</p>
<p>é€‰é¡¹1: ä½¿ç”¨å•ç‚¹ï¼Œåºå¤§çš„æœåŠ¡å™¨</p>
<ul>
<li><p>å•ç‚¹æ•…éšœ</p>
</li>
<li><p>å•ç‚¹ç½‘ç»œæ‹¥å¡</p>
</li>
<li><p>è¿œè·ç¦»ç”¨æˆ·çš„è®¿é—®è·¯å¾„å¾ˆé•¿</p>
</li>
<li><p>è¾“å‡ºé“¾è·¯ä¸Šå‘é€åŒä¸€è§†é¢‘çš„å¤šä»½é‡å¤æ‹·è´â€¦.</p>
</li>
</ul>
<p>å¾ˆæ˜¾ç„¶: è¿™ç§æ–¹æ¡ˆ<strong>ä¸å…·æœ‰å¯æ‰©å±•æ€§</strong></p>
<p>é€‰é¡¹2: å°†å¤šä»½æ‹·è´å­˜å‚¨åœ¨åœ°ç†ä¸Šåˆ†æ•£çš„ä¸åŒç«™ç‚¹æ¥æä¾›æœåŠ¡ï¼ˆCDNï¼‰</p>
<ul>
<li>æ·±å…¥: å°†CDNæœåŠ¡å™¨éƒ¨ç½²åœ¨ä¼—å¤šçš„æ¥å…¥ç½‘ç»œä¸­ <ul>
<li>é è¿‘ç”¨æˆ·</li>
<li>Akamaié¦–åˆ›, ä½¿ç”¨äº†1700å¤šä¸ªä½ç½®</li>
</ul>
</li>
<li>é‚€è¯·åšå®¢: åœ¨å°‘é‡(ä¾‹å¦‚10ä¸ª)é è¿‘æ¥å…¥ç½‘çš„å…³é”®ä½ç½®(ä¾‹å¦‚IXP)ï¼Œå»ºé€ å¤§é›†ç¾¤ï¼Œé‚€è¯·åˆ°ISPåšå®¢<ul>
<li>Limelightç­‰ä½¿ç”¨</li>
</ul>
</li>
</ul>
<p>CDN: å°†å†…å®¹çš„æ‹·è´å­˜å‚¨åœ¨CDNèŠ‚ç‚¹ä¸­<br>ç”¨æˆ·å‘CDNè¯·æ±‚å†…å®¹</p>
<ul>
<li>è¢«å®šå‘åˆ°é™„è¿‘çš„æ‹·è´ï¼Œå–å¾—å†…å®¹</li>
<li>å¦‚æœç½‘ç»œè·¯å¾„æ‹¥å¡ï¼Œåˆ™å¯èƒ½é€‰æ‹©å…¶ä»–çš„æ‹·è´</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_15-28-26.png"></p>
<hr>
<p>å¦‚æœå®¢æˆ·æœºè¯·æ±‚ä¸€ä¸ªhtmlé¡µé¢ï¼Œåœ¨è¯¥é¡µé¢åŒ…æ‹¬äº†7ä¸ªgifå›¾ç‰‡çš„å¼•ç”¨ï¼Œä¸”æ‰€æœ‰å¯¹è±¡éƒ½åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šã€‚ï¼ˆ1ï¼‰å½“é‡‡ç”¨éæŒç»­è¿æ¥æ—¶ï¼Œå®¢æˆ·æœºéœ€è¦ä¸webæœåŠ¡å™¨å»ºç«‹ï¼ˆ    8    ï¼‰ä¸ªTCPè¿æ¥ã€‚ï¼ˆ2ï¼‰ä½¿ç”¨éæµæ°´çº¿çš„æŒä¹…HTTPè¿æ¥ä½¿ç”¨çš„TCPè¿æ¥æ•°ä¸ºï¼ˆ   1     ï¼‰ï¼Œæ€»å…±éœ€è¦ï¼ˆ 9   ï¼‰ä¸ªRTTæ‰èƒ½å®Œæˆæ•´ä¸ªç½‘é¡µçš„è·å–ã€‚ï¼ˆ3ï¼‰åœ¨æŒä¹…çš„å¸¦æµæ°´çº¿HTTPè¿æ¥ä¸­ï¼Œå®¢æˆ·ç«¯æœ€å°‘éœ€è¦ä½¿ç”¨ï¼ˆ   3   ï¼‰ä¸ªRTTæ‰èƒ½å®Œæˆæ•´ä¸ªç½‘é¡µçš„è·å–ã€‚</p>
<p>åœ¨æµè§ˆå™¨å’Œåˆå§‹æœåŠ¡å™¨ä¹‹é—´ä½¿ç”¨<em>éæŒç»­è¿æ¥</em>çš„è¯ï¼Œä¸€ä¸ªTCPæŠ¥æ–‡æ®µæ˜¯å¯èƒ½æºå¸¦ä¸¤ä¸ªä¸åŒçš„HTTPæœåŠ¡è¯·æ±‚æŠ¥æ–‡çš„ã€‚ï¼ˆÃ—ï¼‰</p>
<p>ä¸¤ä¸ªä¸åŒçš„Webé¡µé¢ï¼ˆä¾‹å¦‚ï¼Œ<a href="http://www.uestc.edu.cn/index.html">www.uestc.edu.cn/index.html</a> å’Œmail.uestc.edu.cn&#x2F;index.htmlï¼‰å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæŒä¹…è¿æ¥å‘é€ã€‚ï¼ˆ Ã—  ï¼‰ä¸å±äºåŒä¸€ä¸ªåŸŸåï¼Œä½äºåŒä¸€ä¸ªWebæœåŠ¡å™¨ä¸Šçš„å¤šä¸ªé¡µé¢å¯ä»¥é€šè¿‡åŒä¸€æ¡æŒç»­TCPè¿æ¥å‘é€ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>åœ¨HTTPå“åº”æŠ¥æ–‡ä¸­çš„Dateï¼šé¦–éƒ¨æŒ‡å‡ºäº†è¯¥å“åº”ä¸­å¯¹è±¡æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ã€‚ï¼ˆxï¼‰å“åº”æŠ¥æ–‡ä¸­é¦–éƒ¨è¡Œçš„Dateåªè®°å½•æœåŠ¡å™¨äº§ç”Ÿå¹¶ä¸”å‘é€è¯¥å“åº”æŠ¥æ–‡çš„æ—¥æœŸå’Œæ—¶é—´ã€‚Lastâ€”â€”modifiedæ‰æ˜¯è®°å½•äº†å¯¹è±¡åˆ›å»ºæˆ–è€…æ˜¯æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ã€‚</p>
<p>HTTPå“åº”æŠ¥æ–‡ç»ä¸ä¼šå…·æœ‰ç©ºçš„æŠ¥æ–‡ä½“ã€‚ï¼ˆxï¼‰ headæ–¹æ³•çš„å“åº”æŠ¥æ–‡æ˜¯ç©ºæŠ¥æ–‡ä½“</p>
<p>ä»¥ä¸‹æ‰€ç¤ºHTTPæŠ¥æ–‡å¤´éƒ¨çš„è¯·æ±‚è¡Œæˆ–è€…çŠ¶æ€è¡Œä¸­ï¼Œæ ¼å¼æ­£ç¡®çš„æ˜¯(   C     )</p>
<p>Aã€200 HTTP&#x2F;1.1 OK		     	</p>
<p>Bã€PUT HTTP&#x2F;1.0 404 NOT FOUND</p>
<p>Cã€GET &#x2F;star&#x2F;abc.htm HTTP&#x2F;1.1             </p>
<p>Dã€200 GET HTTP&#x2F;1.1 OK</p>
<p>å‡è®¾ç”¨æˆ·Aä½¿ç”¨IEæµè§ˆå™¨ç”¨åŸºäºWebçš„ç”µå­é‚®ä»¶è´¦æˆ·å‘Bå‘é€é‚®ä»¶ï¼ŒBä½¿ç”¨Foxmailä½œä¸ºç”¨æˆ·ä»£ç†æ¥æ¥æ”¶é‚®ä»¶ï¼Œä½¿ç”¨çš„åè®®å¯èƒ½æ˜¯ä»¥ä¸‹å“ªç§æƒ…å½¢? (   C    )ã€‚	</p>
<p>Aã€IMAP ã€SMTPã€POP3      </p>
<p>Bã€HTTPã€MIMEã€POP3  	</p>
<p>Cã€HTTPã€SMTPã€POP3        </p>
<p>Dã€SMTPã€SMTPã€IMAP</p>
<p>å‡è®¾ç”¨æˆ·Aç”¨æµè§ˆå™¨ç™»å½•ç”µå­é‚®ç®±ç»™ç”¨æˆ·Bå‘é€é‚®ä»¶ï¼ŒåŒæ—¶ï¼Œç”¨æˆ·Bä¹Ÿç”¨æµè§ˆå™¨ç™»å½•ç”µå­é‚®ç®±æ¥æ”¶é‚®ä»¶ï¼Œé‚®ä»¶ä»ç”¨æˆ·Açš„ä¸»æœºåˆ°ç”¨æˆ·Bçš„ä¸»æœºï¼Œä½¿ç”¨äº†å“ªäº›åº”ç”¨å±‚åè®®ï¼Ÿå¦‚æœç”¨æˆ·Aå’ŒBä½¿ç”¨äº†Foxmailç­‰é‚®ä»¶å®¢æˆ·ç«¯å‘¢ï¼Ÿ</p>
<p>ç”¨æˆ·Aä½¿ç”¨æµè§ˆå™¨ç™»å½•é‚®ç®±ï¼Œä½¿ç”¨äº†httpåè®®è®¿é—®å‘é€æ–¹é‚®ç®±æœåŠ¡å™¨ï¼Œä»å‘é€æ–¹é‚®ç®±æœåŠ¡å™¨åˆ°æ¥æ”¶æ–¹é‚®ç®±æœåŠ¡å™¨åªèƒ½ä½¿ç”¨SMTPï¼ˆSimple Mail Transfer Protocolï¼‰åè®®ï¼Œç”¨æˆ·Bä½¿ç”¨æµè§ˆå™¨ç™»å½•é‚®ç®±è¿˜æ˜¯ç”¨çš„httpåè®®ã€‚<strong>å¦‚æœAä½¿ç”¨äº†é‚®ä»¶å®¢æˆ·ç«¯ç™»å½•é‚®ç®±å‘é€é‚®ä»¶ï¼Œé‚£ä¹ˆä½¿ç”¨çš„æ˜¯SMTPåè®®</strong>ï¼Œç”¨æˆ·Bä½¿ç”¨é‚®ä»¶å®¢æˆ·ç«¯ç™»å½•é‚®ç®±å–é‚®ä»¶åˆ™ä½¿ç”¨çš„æ˜¯POP3åè®®ã€‚<br>SMTPåè®®æ˜¯é¢å‘ASCIIç¼–ç çš„ï¼Œé‚£ä¹ˆå®ƒä½¿ç”¨ï¼ˆ  D    ï¼‰æ”¯æŒéASCIIçš„æ•°æ®ä¼ è¾“ã€‚	</p>
<p>Aã€MAIL    Bã€POP3    Cã€IMAP     Dã€MIME</p>
<p>SMTPåè®®å’ŒPOP3åè®®åˆ†åˆ«æ˜¯åŸºäºè¿è¾“å±‚çš„ï¼ˆD     ï¼‰ã€‚	</p>
<p>Aã€UDPåè®®å’ŒUDPåè®®   </p>
<p>Bã€UDPåè®®å’ŒTCPåè®®	</p>
<p>Cã€TCPåè®®å’ŒUDPåè®®   </p>
<p>Dã€TCPåè®®å’ŒTCPåè®®</p>
<p>ç”µå­é‚®ä»¶ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ä»£ç†æŠŠé‚®ä»¶å‘å¾€å‘é€å‘é‚®ä»¶æœåŠ¡å™¨ã€å‘é€æ–¹é‚®ä»¶æœåŠ¡å™¨æŠŠé‚®ä»¶å‘å¾€æ¥æ”¶æ–¹é‚®ä»¶æœåŠ¡å™¨ä»¥åŠç”¨æˆ·ä½¿ç”¨ç”¨æˆ·ä»£ç†ä»æ¥æ”¶æ–¹é‚®ä»¶æœåŠ¡å™¨ä¸Šè¯»å–é‚®ä»¶æ—¶ï¼Œä½¿ç”¨çš„åè®®å¯èƒ½æ˜¯ä»¥ä¸‹çš„å“ªç§æƒ…å½¢? (D   )	</p>
<p>Aã€IMAP ã€SMTPã€POP3 </p>
<p>Bã€MIMEã€SMTPã€POP3	</p>
<p>Cã€SMTPã€IMAPã€POP3   </p>
<p>Dã€SMTPã€SMTPã€IMAP</p>
<p><strong>SMTPï¼š</strong> åªèƒ½å‘é€7æ¯”ç‰¹ ASCII ç æ ¼å¼ï¼Œè€Œäº’è”ç½‘é‚®ä»¶æ‰©å…… MIME å¯ä»¥å‘é€äºŒè¿›åˆ¶æ–‡ä»¶ã€‚MIME å¹¶æ²¡æœ‰æ”¹åŠ¨æˆ–è€…å–ä»£ SMTPï¼Œè€Œæ˜¯å¢åŠ é‚®ä»¶ä¸»ä½“çš„ç»“æ„ï¼Œå®šä¹‰äº†é ASCII ç çš„ç¼–ç è§„åˆ™ã€‚ <strong>POP3</strong>çš„ç‰¹ç‚¹æ˜¯åªè¦ç”¨æˆ·ä»æœåŠ¡å™¨ä¸Šè¯»å–äº†é‚®ä»¶ï¼Œå°±æŠŠè¯¥é‚®ä»¶åˆ é™¤ã€‚ <strong>IMAP åè®®</strong>ä¸­å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šçš„é‚®ä»¶ä¿æŒåŒæ­¥ï¼Œå¦‚æœä¸æ‰‹åŠ¨åˆ é™¤é‚®ä»¶ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¸Šçš„é‚®ä»¶ä¹Ÿä¸ä¼šè¢«åˆ é™¤ã€‚IMAP è¿™ç§åšæ³•å¯ä»¥è®©ç”¨æˆ·éšæ—¶éšåœ°ä»ä»»ä½•ä¸€å°æœºå™¨å»è®¿é—®æœåŠ¡å™¨ä¸Šçš„é‚®ä»¶ã€‚</p>
<p>SMTPï¼šå‘ä»¶äººç”¨æˆ·ä»£ç† â€”-å‘é€é‚®ä»¶â€”&gt; å‘é€æ–¹é‚®ä»¶æœåŠ¡å™¨ ã€å‘é€æ–¹é‚®ä»¶æœåŠ¡å™¨ â€”-å‘é€é‚®ä»¶â€”&gt; æ¥æ”¶æ–¹é‚®ä»¶æœåŠ¡å™¨ </p>
<p> POP3&#x2F;IMAPï¼šæ¥å—æ–¹é‚®ä»¶æœåŠ¡å™¨â€”-è¯»å–é‚®ä»¶â€”&gt;   æ”¶ä»¶äººç”¨æˆ·ä»£ç†</p>
<p>åœ¨ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€æŸä¸ªç½‘é¡µæ—¶ï¼Œç”¨æˆ·è¾“å…¥ç½‘å€åï¼Œæµè§ˆå™¨é¦–å…ˆè¦è¿›è¡Œ( B      )ã€‚</p>
<p>Aã€å’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥    </p>
<p>Bã€åŸŸååˆ°IPåœ°å€çš„è§£æ</p>
<p>Cã€å‘é€UDPåˆ†ç»„åˆ°æœåŠ¡å™¨    </p>
<p>Dã€å‘å‡ºGETçš„HTTPå‘½ä»¤æ¥è·å¾—ç½‘é¡µå†…å®¹</p>
<p>Internetä¸­åŸŸåè§£æä¾èµ–äºç”±åŸŸåæœåŠ¡å™¨ç»„æˆçš„é€»è¾‘æ ‘ã€‚è¯·é—®åœ¨åŸŸåè§£æè¿‡ç¨‹ä¸­ï¼Œä¸»æœºä¸Šè¯·æ±‚åŸŸåè§£æçš„è½¯ä»¶ä¸éœ€è¦çŸ¥é“ä»¥ä¸‹å“ªäº›ä¿¡æ¯ï¼Ÿ (  C   )ã€‚</p>
<p>â‘ æœ¬åœ°åŸŸåæœåŠ¡å™¨çš„ç«¯å£å·  â‘¡æœ¬åœ°åŸŸåæœåŠ¡å™¨çˆ¶ç»“ç‚¹çš„IP  â‘¢åŸŸåæœåŠ¡å™¨æ ‘æ ¹ç»“ç‚¹çš„IP</p>
<p>Aã€â‘ â‘¡    Bã€â‘ â‘¡â‘¢    Cã€â‘¡â‘¢     Dã€â‘ â‘¡â‘¢</p>
<p>ä¸»æœºä¸Šè¯·æ±‚åŸŸåè§£æçš„è½¯ä»¶åªéœ€è¦çŸ¥é“æœ¬åœ°åŸŸåæœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£å·ï¼Œç„¶åå‘æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘é€DNSæŸ¥è¯¢è¯·æ±‚ã€‚æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¼šæ ¹æ®è‡ªå·±çš„ç¼“å­˜å’Œé…ç½®ï¼Œè¿”å›æŸ¥è¯¢ç»“æœæˆ–è€…å°†æŸ¥è¯¢è¯·æ±‚è½¬å‘ç»™å…¶ä»–åŸŸåæœåŠ¡å™¨ï¼ˆåŒ…æ‹¬æ ¹åŸŸåæœåŠ¡å™¨ã€é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼‰ã€‚</p>
<p>å…³äºDNSæè¿°é”™è¯¯çš„æ˜¯(  D   )ã€‚</p>
<p>Aã€å°†ä¸»æœºåè½¬æ¢ä¸ºIPåœ°å€</p>
<p>Bã€æ‰€æœ‰çš„DNSè¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ä½¿ç”¨çš„æ˜¯53ç«¯å£å‘é€</p>
<p>Cã€åœ¨å› ç‰¹ç½‘ä¸ŠDNSåŠŸèƒ½çš„å®ç°é‡‡ç”¨çš„æ˜¯åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“</p>
<p>Dã€DNSçš„è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡é‡‡ç”¨çš„æ˜¯TCPåè®®è¿›è¡Œä¼ è¾“çš„</p>
<p>DNSä½¿ç”¨UDPåè®®è¿›è¡Œä¼ è¾“ï¼Œæ‰€æœ‰çš„DNSè¯·æ±‚å’Œå›ç­”æŠ¥æ–‡éƒ½ä½¿ç”¨53ç«¯å£å‘é€ã€‚</p>
<p>æŸ¥è¯¢é“¾ä¸­çš„DNSæœåŠ¡å™¨å¦‚æœä¸æ˜¯æŸä¸»æœºåçš„æƒå¨æœåŠ¡å™¨ï¼Œå¯¹äºè¯¥ä¸»æœºåï¼Œå®ƒå¿…å°†åŒ…å«å¯¹åº”çš„ä¸¤ç§ç±»å‹è®°å½•ï¼Œåˆ†åˆ«ä¸ºï¼ˆ  C     ï¼‰ã€‚</p>
<p>Aã€CNAMEå’ŒA    Bã€MXå’ŒNS      Cã€NSå’ŒA     Dã€NSå’ŒMX</p>
<p>å½“æŸ¥è¯¢é“¾ä¸­çš„DNSæœåŠ¡å™¨ä¸æ˜¯æŸä¸»æœºåçš„æƒå¨æœåŠ¡å™¨æ—¶ï¼Œå®ƒå¯èƒ½åŒ…å«NSè®°å½•å’ŒAè®°å½•ã€‚NSè®°å½•ï¼ˆName Server Recordï¼‰æ˜¯ä¸€ç§DNSè®°å½•ç±»å‹ï¼Œç”¨äºæŒ‡å®šæŸä¸ªåŸŸåçš„æƒå¨æœåŠ¡å™¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥è¯¢é“¾ä¸­çš„DNSæœåŠ¡å™¨ä¸æ˜¯<a href="http://www.example.com/">www.example.com</a> çš„æƒå¨æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½åŒ…å«ä¸€æ¡NSè®°å½•ï¼ŒæŒ‡å®š<a href="http://www.example.com/">www.example.com</a> çš„æƒå¨æœåŠ¡å™¨ä¸ºdns1.example.comã€‚Aè®°å½•ï¼ˆAddress Recordï¼‰æ˜¯ä¸€ç§DNSè®°å½•ç±»å‹ï¼Œç”¨äºå°†åŸŸåæ˜ å°„åˆ°IPv4åœ°å€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥è¯¢é“¾ä¸­çš„DNSæœåŠ¡å™¨ä¸æ˜¯<a href="http://www.example.com/">www.example.com</a> çš„æƒå¨æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½åŒ…å«ä¸€æ¡Aè®°å½•ï¼Œå°†<a href="http://www.example.com/">www.example.com</a> æ˜ å°„åˆ°å¯¹åº”çš„IPåœ°å€ã€‚</p>
<p>HTTP åè®®ä¸­ï¼Œæ¥æ”¶æ–¹å¦‚ä½•åŒºåˆ†é¦–éƒ¨è¡Œå’Œæ•°æ®éƒ¨åˆ†ï¼ˆC  ï¼‰</p>
<p>A.æŠ¥æ–‡ä¸­é¦–éƒ¨è¡Œé•¿åº¦å­—æ®µ 		</p>
<p>B. æŠ¥æ–‡ä¸­ä½¿ç”¨ DATA æŒ‡ä»¤æŒ‡ç¤ºé¦–éƒ¨è¡Œç»“æŸ </p>
<p>C. æŠ¥æ–‡ä¸­é¦–éƒ¨è¡Œç»“æŸæ—¶æ·»åŠ ç©ºè¡Œ 	</p>
<p>D. æŠ¥æ–‡ä¸­é¦–éƒ¨è¡Œç»“æŸæ—¶å¢åŠ â€œ.â€ä½œä¸ºåˆ†éš”è¡Œ</p>
<p>DNS å®ç°çš„åŠŸèƒ½ä¸åŒ…æ‹¬ï¼ˆD ï¼‰ </p>
<p>A.ä¸»æœºåå’Œ IP åœ°å€æ˜ å°„ 	B. åˆ«åå¤„ç† 	C. è´Ÿè½½åˆ†é… 	D. è·¯ç”±é€‰æ‹©</p>
<p>DNSå¹¶ä¸è´Ÿè´£è·¯ç”±é€‰æ‹©ï¼Œè¿™ä¸€åŠŸèƒ½ç”±è·¯ç”±å™¨ç­‰ç½‘ç»œè®¾å¤‡å®ç°ã€‚</p>
<p>å‡å®šä½ åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»ä¸€æ¡è¶…é“¾æ¥è·å¾—Webé¡µé¢ã€‚ç›¸å…³è”çš„URLçš„IPåœ°å€æ²¡æœ‰ç¼“å­˜åœ¨æœ¬åœ°ä¸»æœºä¸Š,å› æ­¤å¿…é¡»ä½¿ç”¨DNS lookupä»¥è·å¾—è¯¥IPåœ°å€ã€‚å¦‚æœä¸»æœºä»DNSå¾—åˆ°IPåœ°å€ä¹‹å‰å·²ç»è®¿é—®äº†nä¸ªDNSæœåŠ¡å™¨ï¼›ç›¸ç»§äº§ç”Ÿçš„RTTä¾æ¬¡ä¸ºRTT1ã€â€¦ã€RTTnã€‚è¿›ä¸€æ­¥å‡å®šä¸é“¾è·¯ç›¸å…³çš„Webé¡µé¢åªåŒ…å«ä¸€ä¸ªå¯¹è±¡ï¼Œå³ç”±å°‘é‡çš„HTMLæ–‡æœ¬ç»„æˆã€‚ä»¤RTT0è¡¨ç¤ºæœ¬åœ°ä¸»æœºå’ŒåŒ…å«å¯¹è±¡çš„æœåŠ¡å™¨ä¹‹é—´çš„RTTå€¼ã€‚å‡å®šè¯¥å¯¹è±¡ä¼ è¾“æ—¶é—´ä¸ºé›¶ï¼Œåˆ™ä»è¯¥å®¢æˆ·ç‚¹å‡»è¯¥è¶…é“¾æ¥åˆ°å®ƒæ¥æ”¶åˆ°è¯¥å¯¹è±¡éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</p>
<p><em><strong>RTT1+â€¦+RTTn+ 2RTT0</strong></em>ï¼ˆè§£æipåœ°å€çš„æ—¶é—´+å»ºç«‹tcpè¿æ¥å’Œè¯·æ±‚å¾—åˆ°webé¡µé¢çš„æ—¶é—´ï¼‰</p>
<p>å‚ç…§ä¸Šé¢˜,å‡å®šåœ¨åŒä¸€æœåŠ¡å™¨ä¸ŠæŸHTMLæ–‡ä»¶å¼•ç”¨äº† 8ä¸ªéå¸¸å°çš„å¯¹è±¡ã€‚å¿½ç•¥å‘é€æ—¶é—´ï¼Œåœ¨ä¸‹åˆ—æƒ…å†µä¸‹éœ€è¦å¤šé•¿æ—¶é—´ï¼š</p>
<p>(1)æ²¡æœ‰å¹¶è¡ŒTCPè¿æ¥çš„éæŒç»­HTTPã€‚</p>
<p><em><strong>RTT1+â€¦+RTTn+ 18RTT0</strong></em></p>
<p>(2)é…ç½®æœ‰5ä¸ªå¹¶è¡Œè¿æ¥çš„éæŒç»­HTTPã€‚</p>
<p><em><strong>RTT1+â€¦+RTTn+ 6RTT0</strong></em></p>
<p>(3)æŒç»­HTTP.</p>
<p><em><strong>æµæ°´    ï¼šRTT1+â€¦+RTTn+ 3RTT0</strong></em></p>
<p><em><strong>éæµæ°´ï¼š RTT1+â€¦+RTTn+ 10RTT0</strong></em></p>
<p>è€ƒè™‘ä¸‹å›¾,å…¶ä¸­æœ‰ä¸€ä¸ªæœºæ„çš„ç½‘ç»œå’Œå› ç‰¹ç½‘ç›¸è¿ã€‚å‡å®šå¯¹è±¡çš„å¹³å‡é•¿åº¦ä¸º850 000bitsï¼Œä»è¿™ä¸ªæœºæ„ç½‘çš„æµè§ˆå™¨åˆ°åˆå§‹æœåŠ¡å™¨çš„å¹³å‡è¯·æ±‚ç‡æ˜¯æ¯ç§’16ä¸ªè¯·æ±‚ã€‚è¿˜å‡å®šä»æ¥å…¥é“¾è·¯çš„å› ç‰¹ç½‘ä¸€ä¾§çš„è·¯ç”±å™¨è½¬å‘ä¸€ä¸ªHTTPè¯·æ±‚å¼€å§‹ï¼Œåˆ°æ¥æ”¶åˆ°å…¶å“åº”çš„å¹³å‡æ—¶é—´æ˜¯3ç§’ã€‚å°†æ€»çš„å¹³å‡å“åº”æ—¶é—´å»ºæ¨¡ä¸ºå¹³å‡æ¥å…¥æ—¶å»¶ï¼ˆå³ä»å› ç‰¹ç½‘è·¯ç”±å™¨åˆ°æœºæ„è·¯ç”±å™¨çš„æ—¶å»¶ï¼‰å’Œå¹³å‡å› ç‰¹ç½‘æ—¶å»¶ä¹‹å’Œã€‚å¯¹äºå¹³å‡æ¥å…¥æ—¶å»¶ï¼Œä½¿ç”¨â–³&#x2F;ï¼ˆ1-â–³Bï¼‰ï¼Œå¼ä¸­â–³æ˜¯è·¨è¶Šæ¥å…¥é“¾è·¯å‘é€ä¸€ä¸ªå¯¹è±¡çš„å¹³å‡æ—¶é—´ï¼ŒBæ˜¯å¯¹è±¡å¯¹è¯¥æ¥å…¥é“¾è·¯çš„å¹³å‡åˆ°è¾¾ç‡ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_21-43-05.png"></p>
<p>(1)æ±‚å‡ºæ€»çš„å¹³å‡å“åº”æ—¶é—´ã€‚</p>
<p>(2)ç°åœ¨å‡å®šåœ¨è¿™ä¸ªæœºæ„LANä¸­å®‰è£…äº†ä¸€ä¸ªç¼“å­˜å™¨ã€‚å‡å®šæœªå‘½ä¸­ç‡ä¸º0.4,æ±‚å‡ºæ€»çš„å“åº”æ—¶é—´ã€‚</p>
<p>(1)ç”±é¢˜æ„ï¼šæ€»å¹³å‡å“åº”æ—¶é—´&#x3D;å¹³å‡æ¥å…¥æ—¶å»¶+å¹³å‡å› ç‰¹ç½‘æ—¶å»¶ã€‚<br>å…¶ä¸­ï¼Œå¹³å‡å› ç‰¹ç½‘æ—¶å»¶&#x3D;3ç§’<br>å¹³å‡æ¥å…¥æ—¶å»¶&#x3D;â–³&#x2F;(1-â–³B)<br>â–³&#x3D;850000bit&#x2F;15Mbps&#x3D;850000bit &#x2F; 15000000bit&#x2F;s&#x3D;0.0567s<br>B&#x3D;16è¯·æ±‚&#x2F;s</p>
<p>â–³B&#x3D;16*0.0567â‰ˆ0.907</p>
<p>å¹³å‡æ¥å…¥æ—¶å»¶&#x3D;0.0567&#x2F;(1-0.907)â‰ˆ0.6s<br>æ€»å¹³å‡å“åº”æ—¶å»¶&#x3D;0.6+3&#x3D;3.6s</p>
<p>(2)æœªå‘½ä¸­ç‡0.4ï¼Œæ‰€ä»¥æœ‰60%å¯ä»¥é€šè¿‡ç¼“å­˜å™¨ç«‹å³å“åº”ã€‚<br>å¹³å‡æ¥å…¥æ—¶å»¶&#x3D;â–³&#x2F;(1-â–³B)&#x3D;0.0567&#x2F;(1-0.4*0.907)â‰ˆ0.089s<br>æ‰€ä»¥æ€»å“åº”æ—¶é—´&#x3D;0.6 * 0 +(0.089+3) * 0.4 â‰ˆ 1.24s<br>è€ƒè™‘ä¸€æ¡10ç±³çŸ­é“¾è·¯ï¼ŒæŸå‘é€æ–¹ç»è¿‡å®ƒèƒ½å¤Ÿä»¥150bpsé€Ÿç‡åŒå‘ä¼ è¾“ã€‚å‡å®šåŒ…å«æ•°æ®åˆ†ç»„æ˜¯ 100Kbitsï¼Œä»…åŒ…å«æ§åˆ¶ï¼ˆå¦‚ACKæˆ–æ¡æ‰‹ï¼‰çš„åˆ†ç»„æ˜¯200bitsã€‚å‡å®šNä¸ªå¹¶è¡Œè¿æ¥æ¯ä¸ªéƒ½è· å¾—1&#x2F;Nçš„é“¾è·¯å¸¦å®½ã€‚ç°åœ¨è€ƒè™‘HTTPåè®®ï¼Œå¹¶ä¸”å‡å®šæ¯ä¸ªä¸‹è½½å¯¹è±¡æ˜¯100Kbitsï¼Œè¿™äº›åˆå§‹ä¸‹è½½å¯¹è±¡åŒ…å«10ä¸ªæ¥è‡ªç›¸åŒå‘é€æ–¹çš„å¼•ç”¨å¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç»éæŒç»­HTTPçš„å¹¶è¡Œå®ä¾‹çš„å¹¶è¡Œä¸‹è½½æœ‰æ„ä¹‰å—ï¼Ÿç°åœ¨è€ƒè™‘æŒç»­HTTPã€‚ä½ æœŸå¾…è¿™æ¯”éæŒç»­çš„æƒ…å†µæœ‰å¾ˆå¤§å¢ç›Šå—ï¼Ÿè¯„ä»·å¹¶è§£é‡Šä½ çš„ç­”æ¡ˆã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/ed56f1012b1bd986bc93169fd8c9e25b.png"></p>
<p>æ¯ä¸ªä¸‹è½½çš„å¯¹è±¡å¯ä»¥å®Œå…¨æ”¾å…¥ä¸€ä¸ªæ•°æ®åŒ…ä¸­ã€‚ä»¤Tpè¡¨ç¤ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„å•å‘ä¼ æ’­å»¶è¿Ÿã€‚ä¼ è¾“ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¹‹åå†å¹¶è¡Œä¼ è¾“ï¼Œç”±äºéæŒç»­HTTPéœ€è¦é‡æ–°å»ºç«‹TCPè¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ï¼Œå¹¶è¡Œä¸‹è½½å°†å…è®¸10ä¸ªè¿æ¥å…±äº«150ä½&#x2F;ç§’çš„å¸¦å®½ï¼Œæ¯ä¸ªè¿æ¥åªæœ‰15ä¸ªä½&#x2F;ç§’ï¼Œå› æ­¤ï¼Œæ¥æ”¶æ‰€æœ‰å¯¹è±¡æ‰€éœ€çš„æ€»æ—¶é—´ä¸ºï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_22-05-45.png"></p>
<p>ç°åœ¨è€ƒè™‘ä¸€ä¸ªæŒä¹…çš„HTTPè¿æ¥ï¼Œæ‰€éœ€çš„æ€»æ—¶é—´ä¸ºï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_22-05-51.png"></p>
<p>å¢ç›Šä¼¼ä¹ä¸æ˜¯å¾ˆå¤§ã€‚</p>
<p>è€ƒè™‘åœ¨ä¸Šä¸€ä¸ªä¹ é¢˜ä¸­å¼•å‡ºçš„æƒ…å†µã€‚ç°åœ¨å‡å®šè¯¥é“¾è·¯ç”±Bobå’Œ4ä¸ªå…¶ä»–ç”¨æˆ·æ‰€å…±äº«ã€‚Bobä½¿ç”¨éæŒç»­HTTPçš„å¹¶è¡Œå®ä¾‹ï¼Œè€Œå…¶ä»–4ä¸ªç”¨æˆ·ä½¿ç”¨æ— å¹¶è¡Œä¸‹è½½çš„éæŒç»­HTTPã€‚</p>
<p>a. Bobçš„å¹¶è¡Œè¿æ¥èƒ½å¤Ÿå¸®åŠ©ä»–æ›´å¿«åœ°å¾—åˆ°Webé¡µé¢å—ï¼Ÿ</p>
<p>b. å¦‚æœæ‰€æœ‰5ä¸ªç”¨æˆ·æ‰“å¼€5ä¸ªéæŒç»­HTTPå¹¶è¡Œå®ä¾‹ï¼Œé‚£ä¹ˆBobçš„å¹¶è¡Œè¿æ¥ä»å°†æ˜¯æœ‰å¥½å¤„çš„å—ï¼Ÿä¸ºä»€ä¹ˆ?</p>
<p>a)æ˜¯çš„ï¼Œå› ä¸ºBobæœ‰æ›´å¤šçš„è¿æ¥ï¼Œä»–å¯ä»¥è·å¾—æ›´å¤§çš„å¸¦å®½ä»½é¢ã€‚</p>
<p>b)æ˜¯çš„ï¼ŒBob ä»ç„¶éœ€è¦æ‰§è¡Œå¹¶è¡Œä¸‹è½½ï¼›å¦åˆ™ä»–å°†æ¯”å…¶ä»–å››ä¸ªç”¨æˆ·è·å¾—æ›´å°‘çš„å¸¦å®½ã€‚</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘æœŸæœ«å¤ä¹ ä¹‹é“¾è·¯å±‚</title>
    <url>/2023/06/23/%E8%AE%A1%E7%BD%91/5/</url>
    <content><![CDATA[<p><em>é“¾è·¯å±‚çš„æœ¯è¯­</em></p>
<ul>
<li>ä¸»æœºå’Œè·¯ç”±å™¨: <strong>èŠ‚ç‚¹</strong>(nodes)</li>
<li>æ²¿ç€é€šä¿¡è·¯å¾„è¿æ¥ç›¸é‚»èŠ‚ç‚¹çš„é€šä¿¡ä¿¡é“ï¼š<strong>é“¾è·¯</strong>(links)<ul>
<li>æœ‰çº¿é“¾è·¯(wired links)</li>
<li>æ— çº¿é“¾è·¯(wireless links)</li>
</ul>
</li>
<li>ç¬¬äºŒå±‚çš„åˆ†ç»„:<strong>æ•°æ®å¸§</strong>(frame), å®ƒæ˜¯å°è£…äº†çš„æ•°æ®æŠ¥</li>
</ul>
<p><strong>æ•°æ®é“¾è·¯å±‚</strong>çš„èŒè´£æ˜¯<strong>å°†æ•°æ®æŠ¥ä»ä¸€ä¸ªèŠ‚ç‚¹ä¼ é€åˆ°ä¸è¯¥èŠ‚ç‚¹ç›´æ¥æœ‰ç‰©ç†é“¾è·¯ç›¸è¿çš„å¦ä¸€ä¸ªèŠ‚ç‚¹</strong>ã€‚</p>
<p>æ•°æ®æŠ¥å¯ä»¥åœ¨ä¸åŒçš„é“¾è·¯ä¸Šï¼Œé€šè¿‡ä¸åŒçš„é“¾è·¯å±‚åè®®å‘é€ï¼š</p>
<p>e.g., Ethernet on first link, frame relay on intermediate links, 802.11 on last link</p>
<p>æ¯ä¸ªé“¾è·¯å±‚åè®®æä¾›ä¸åŒçš„æœåŠ¡ï¼š</p>
<p>e.g., å¯ä»¥æä¾›&#x2F;ä¹Ÿå¯ä»¥ä¸æä¾›å¯é æ•°æ®ä¼ è¾“æœåŠ¡</p>
<p>1ã€é“¾è·¯å±‚æä¾›å“ªäº›æœåŠ¡</p>
<ul>
<li>å°è£…æˆå¸§ï¼Œé“¾è·¯æ¥å…¥ï¼š<ul>
<li>å°è£…æ•°æ®æŠ¥ä¸ºæ•°æ®å¸§ï¼Œå¢åŠ å¤´éƒ¨ï¼Œå°¾éƒ¨ä¿¡æ¯</li>
<li>å¦‚æœæ˜¯å…±äº«é“¾è·¯ï¼Œæ¥å…¥é“¾è·¯</li>
<li>åœ¨æ•°æ®å¸§å¤´éƒ¨ä¸­ï¼Œç”¨MACåœ°å€æ¥æ ‡è¯†æºç›®çš„MACåœ°å€ï¼ˆä¸åŒäºIPåœ°å€ï¼‰</li>
</ul>
</li>
<li>åœ¨ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´å¯é ä¼ è¾“æ•°æ®å¸§</li>
<li>æµé‡æ§åˆ¶</li>
<li>å·®é”™æ£€æŸ¥</li>
<li>é”™è¯¯çº æ­£</li>
<li>åŠåŒå·¥å’Œå…¨åŒå·¥ï¼šåœ¨åŠåŒå·¥æ¨¡å¼ï¼Œé“¾è·¯çš„ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å‘é€æ•°æ®ï¼Œä½†æ˜¯ä¸èƒ½åŒæ—¶å‘é€ã€‚</li>
</ul>
<p>é“¾è·¯å±‚åœ¨ä¸»æœºå’Œç½‘ç»œè®¾å¤‡(è·¯ç”±å™¨)ä¸Šå®ç°</p>
<ul>
<li>åœ¨ä¸»æœºä¸Šï¼Œé“¾è·¯å±‚çš„ä¸»ä½“éƒ¨åˆ†æ˜¯åœ¨<strong>ç½‘ç»œé€‚é…å™¨</strong>ä¸Šå®ç°çš„(ç§°ä¸ºç½‘å¡)</li>
</ul>
<p>2ã€ä¸‰ç§ä¸»è¦å·®é”™æ£€æµ‹æŠ€æœ¯ç‰¹ç‚¹ï¼Œè¦ä¼šè®¡ç®—</p>
<ul>
<li><strong>å¥‡å¶æ ¡éªŒ</strong>ï¼šæœ€åŸºæœ¬çš„æ–¹æ³•ã€‚<ul>
<li>1ç»´å¥‡å¶æ ¡éªŒï¼šå¯ä»¥æŸ¥å‡ºä»»æ„å¥‡æ•°ä¸ªé”™è¯¯ï¼Œä½†ä¸èƒ½å‘ç°å¶æ•°ä¸ªé”™è¯¯</li>
<li>2ç»´å¥‡å¶æ ¡éªŒï¼šå¯ä»¥æ£€æµ‹å¹¶çº æ­£å•ä¸ªæ¯”ç‰¹å·®é”™ï¼ˆæ•°æ®æˆ–æ ¡éªŒä½ä¸­ï¼‰ ï¼›èƒ½å¤Ÿæ£€æµ‹(ä½†ä¸èƒ½çº æ­£)åˆ†ç»„ä¸­ä»»æ„ä¸¤ä¸ªæ¯”ç‰¹çš„å·®é”™</li>
</ul>
</li>
<li><strong>Internetæ ¡éªŒå’Œ</strong>ï¼šå¸¸ç”¨äº<em><strong>è¿è¾“å±‚</strong></em>ã€‚<ul>
<li>åˆ†ç»„<strong>å¼€é”€å°</strong>ï¼šæ£€æŸ¥å’Œä½æ•°æ¯”è¾ƒå°‘ï¼›</li>
<li>å·®é”™<strong>æ£€æµ‹èƒ½åŠ›å¼±</strong>å·®é”™æ£€æµ‹ç”¨è½¯ä»¶å®ç°</li>
</ul>
</li>
<li><strong>å¾ªç¯å†—ä½™æ£€æµ‹</strong>ï¼šå¸¸ç”¨äº<em><strong>é“¾è·¯å±‚</strong></em>ã€‚<ul>
<li>èƒ½æ£€æµ‹å°äº r+1 ä½çš„çªå‘å·®é”™ã€ä»»ä½•å¥‡æ•°ä¸ªå·®é”™</li>
</ul>
</li>
</ul>
<p><strong>ä¸€æ¯”ç‰¹å¥‡å¶æ ¡éªŒ</strong></p>
<p>å‘é€æ–¹ï¼š</p>
<ul>
<li>åœ¨è¦å‘é€çš„ä¿¡æ¯Dï¼ˆdä½ï¼‰åé¢é™„åŠ ä¸€ä¸ªå¥‡å¶æ ¡éªŒä½</li>
<li>ä½¿â€œ1â€çš„ä¸ªæ•°æ˜¯å¥‡æ•°ï¼ˆå¥‡æ ¡éªŒï¼‰æˆ–å¶æ•°ï¼ˆå¶æ ¡éªŒï¼‰</li>
<li>ä¸€èµ·ä¼ è¾“å‘é€ï¼ˆd+1ä½ï¼‰ã€‚</li>
</ul>
<p>æ¥æ”¶æ–¹ï¼š</p>
<ul>
<li>æ£€æµ‹æ”¶åˆ°çš„ä¿¡æ¯ï¼ˆd+1ä½ï¼‰ä¸­â€œ1â€çš„ä¸ªæ•°ã€‚</li>
<li>å¶æ ¡éªŒï¼šå‘ç°å¥‡æ•°ä¸ªâ€œ1â€ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªæ¯”ç‰¹å‘ç”Ÿå·®é”™ï¼ˆå¥‡æ•°ä¸ªæ¯”ç‰¹å·®é”™ï¼‰ã€‚</li>
<li>å¥‡æ ¡éªŒï¼šå‘ç°å¶æ•°ä¸ªâ€œ1â€ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªæ¯”ç‰¹å‘ç”Ÿå·®é”™ã€‚</li>
</ul>
<p>å¯ä»¥æŸ¥å‡ºä»»æ„å¥‡æ•°ä¸ªé”™è¯¯ï¼Œä½†ä¸èƒ½å‘ç°å¶æ•°ä¸ªé”™è¯¯ï¼ˆå¦‚æœæ•°æ®ä¸­å‘ç”Ÿäº†å¶æ•°ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆè¿™äº›é”™è¯¯å°†æŠµæ¶ˆå½¼æ­¤ï¼‰ã€‚è‹¥æ¯”ç‰¹å·®é”™æ¦‚ç‡å¾ˆå°ï¼Œå·®é”™ç‹¬ç«‹å‘ç”Ÿï¼Œä¸€æ¯”ç‰¹å¥‡å¶æ ¡éªŒå¯æ»¡è¶³è¦æ±‚ã€‚è‹¥å·®é”™é›†ä¸­ä¸€èµ·â€œçªå‘â€ï¼ˆçªå‘å·®é”™ï¼‰ï¼Œä¸€å¸§ä¸­æœªæ£€æµ‹åˆ°çš„å·®é”™çš„æ¦‚ç‡è¾¾åˆ°50%ã€‚</p>
<p><strong>äºŒç»´å¥‡å¶æ ¡éªŒ</strong></p>
<p>åŸºæœ¬æ€æƒ³ï¼š</p>
<ul>
<li>å°†è¦ä¼ ä¿¡æ¯Dï¼ˆdæ¯”ç‰¹ï¼‰åˆ’åˆ†ä¸º**iè¡Œj åˆ—(i ä¸ªç»„ï¼Œæ¯ç»„jä½)**ï¼›</li>
<li>å¯¹æ¯è¡Œå’Œæ¯åˆ—åˆ†åˆ«è®¡ç®—å¥‡å¶å€¼ï¼›</li>
<li>ç»“æœçš„<strong>i+j+1</strong>ä¸ªå¥‡å¶æ¯”ç‰¹æ„æˆäº†å¸§çš„å·®é”™æ£€æµ‹æ¯”ç‰¹ã€‚</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_22-39-50.png"></p>
<p>è¦å‘é€çš„æ•°æ®æ¯”ç‰¹10101 11110 01110ï¼Œåˆ’åˆ†3ç»„ï¼Œæ¯ç»„5ä¸ªæ¯”ç‰¹ã€‚è¿›è¡Œ<strong>è¡Œã€åˆ—å¶</strong>æ ¡éªŒ</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯ä»¥<strong>æ£€æµ‹å¹¶çº æ­£å•ä¸ªæ¯”ç‰¹å·®é”™</strong>ï¼ˆæ•°æ®æˆ–æ ¡éªŒä½ä¸­ï¼‰ã€‚</li>
<li>èƒ½å¤Ÿ<strong>æ£€æµ‹(ä½†ä¸èƒ½çº æ­£)åˆ†ç»„ä¸­ä»»æ„ä¸¤ä¸ªæ¯”ç‰¹çš„å·®é”™</strong>ã€‚</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_22-40-10.png"></p>
<p><strong>Internetæ ¡éªŒå’Œæ–¹æ³•</strong></p>
<p>å‘é€æ–¹ï¼š</p>
<ul>
<li>å°†æ•°æ®çš„æ¯ä¸¤ä¸ªå­—èŠ‚å½“ä½œä¸€ä¸ª16ä½çš„æ•´æ•°ï¼Œå¯åˆ†æˆè‹¥å¹²æ•´æ•°ï¼›</li>
<li>å°†æ‰€æœ‰16 ä½çš„æ•´æ•°æ±‚å’Œï¼›</li>
<li>å¯¹å¾—åˆ°çš„å’Œé€ä½å–åï¼Œä½œä¸ºæ£€æŸ¥å’Œï¼Œæ”¾åœ¨æŠ¥æ–‡æ®µé¦–éƒ¨ï¼Œä¸€èµ·å‘é€ã€‚</li>
</ul>
<p>æ¥æ”¶æ–¹ï¼šå¯¹æ¥æ”¶åˆ°çš„ä¿¡æ¯ (åŒ…æ‹¬æ£€æŸ¥å’Œ)æŒ‰ä¸å‘é€æ–¹ç›¸åŒçš„æ–¹æ³•æ±‚å’Œã€‚</p>
<ul>
<li>å…¨â€œ1â€ï¼šæ”¶åˆ°çš„æ•°æ®æ— å·®é”™ï¼›</li>
<li>å…¶ä¸­æœ‰â€œ0â€ï¼šæ”¶åˆ°çš„æ•°æ®å‡ºç°å·®é”™ã€‚</li>
</ul>
<p><strong>å¾ªç¯å†—ä½™æ£€æµ‹</strong></p>
<p>å¾ªç¯å†—ä½™æ£€æµ‹CRC (cyclic redundancy check)ç¼–ç ï¼šå³<strong>å¤šé¡¹å¼ç¼–ç </strong>ï¼ŒæŠŠè¦å‘é€çš„æ¯”ç‰¹ä¸²çœ‹ä½œä¸ºç³»æ•°æ˜¯0æˆ–1çš„ä¸€ä¸ªå¤šé¡¹å¼ï¼Œå¯¹æ¯”ç‰¹ä¸²çš„æ“ä½œçœ‹ä½œä¸ºå¤šé¡¹å¼è¿ç®—ã€‚</p>
<p>10111â†’ xâ´+xÂ²+x+1</p>
<p>åŸºæœ¬æ€æƒ³ï¼šè®¾å‘é€èŠ‚ç‚¹è¦æŠŠæ•°æ®Dï¼ˆ<strong>d æ¯”ç‰¹</strong>ï¼‰å‘é€ç»™æ¥æ”¶èŠ‚ç‚¹ã€‚å‘é€æ–¹å’Œæ¥æ”¶æ–¹å…ˆå…±åŒé€‰å®šä¸€ä¸ª<strong>ç”Ÿæˆå¤šé¡¹å¼ Gï¼ˆr+1æ¯”ç‰¹ï¼‰ï¼Œæœ€é«˜æœ‰æ•ˆä½ (æœ€å·¦è¾¹)æ˜¯1</strong>ã€‚</p>
<p><em><strong>å‘é€æ–¹</strong></em>ï¼š</p>
<ul>
<li>è®¡ç®—å‡ºä¸€ä¸ªrä½é™„åŠ æ¯”ç‰¹Rï¼Œæ·»åŠ åˆ°Dçš„åé¢äº§ç”ŸDRï¼ˆd+r æ¯”ç‰¹ï¼‰</li>
<li>DRèƒ½è¢«ç”Ÿæˆå¤šé¡¹å¼Gæ¨¡2è¿ç®—æ•´é™¤ï¼Œä¸€èµ·å‘é€ã€‚</li>
</ul>
<p><em><strong>æ¥æ”¶æ–¹</strong></em>ï¼š</p>
<ul>
<li>ç”¨ç”Ÿæˆå¤šé¡¹å¼Gå»é™¤æ¥æ”¶åˆ°çš„DRï¼ˆd+ræ¯”ç‰¹ï¼‰<ul>
<li>ä½™æ•°é0ï¼šä¼ è¾“å‘ç”Ÿå·®é”™ï¼›</li>
<li>ä½™æ•°ä¸º0ï¼šä¼ è¾“æ­£ç¡®ï¼Œå»æ‰å°¾éƒ¨rä½ï¼Œå¾—æ‰€éœ€æ•°æ®Dã€‚</li>
</ul>
</li>
</ul>
<p><em><strong>æ¨¡2è¿ç®—</strong></em></p>
<p><strong>åŠ æ³•ä¸è¿›ä½ï¼Œå‡æ³•ä¸å€Ÿä½</strong>ï¼Œå³æ“ä½œæ•°æŒ‰ä½å¼‚æˆ– (XOR)</p>
<p>1011  XOR  0101&#x3D;1110ï¼›   1011-0101&#x3D;1110     </p>
<p>1001  XOR  1101&#x3D;0100    ï¼›   1001-1101&#x3D;0100</p>
<p><strong>ä¹˜æ³•å’Œé™¤æ³•ä¸äºŒè¿›åˆ¶è¿ç®—ç±»ä¼¼</strong>ï¼Œå…¶ä¸­åŠ æ³•æˆ–å‡æ³•æ²¡æœ‰è¿›ä½æˆ–å€Ÿä½ã€‚</p>
<p><strong>ä¹˜ä»¥2^rï¼Œå³æ¯”ç‰¹æ¨¡å¼å·¦ç§»r ä¸ªä½ç½®</strong>ã€‚</p>
<p>DÃ—2^r  XOR  R &#x3D; D <strong>00â€¦00</strong>  XOR  R &#x3D; DR  (d+r æ¯”ç‰¹)</p>
<p><em><strong>è®¡ç®—Rï¼ˆCRCæ¯”ç‰¹ï¼‰</strong></em></p>
<ul>
<li><p>DRèƒ½è¢«Gæ¨¡2è¿ç®—æ•´é™¤ï¼šå³                             </p>
<p>DÃ—2^r  XOR  R &#x3D; nG</p>
</li>
<li><p>ç­‰å¼ä¸¤è¾¹éƒ½ç”¨Rå¼‚æˆ–ï¼Œå¾—åˆ°                             </p>
<p>DÃ—2^r &#x3D; nG  XOR  R     </p>
</li>
<li><p>å³ç”¨Gæ¥é™¤DÃ—2^rï¼Œä½™æ•°å€¼åˆšå¥½ä¸ºRã€‚</p>
</li>
<li><p><strong>Rçš„è®¡ç®—ï¼šå°†æ•°æ®Dåé¢æ·»åŠ rä¸ª0ï¼Œé™¤ä»¥ç»™å®šçš„ç”Ÿæˆå¤šé¡¹å¼Gï¼Œæ‰€å¾—ä½™æ•°å³ä¸ºR</strong>ï¼ˆrä½ï¼‰ã€‚</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_09-11-07.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_09-12-39.png"></p>
<p>3ã€å¤šè·¯è®¿é—®é“¾è·¯åè®®ï¼ˆä¹Ÿç§°å¤šå€è®¿é—®åè®®ï¼‰</p>
<p>ç›®çš„ï¼šåè°ƒå¤šä¸ªèŠ‚ç‚¹åœ¨å…±äº«å¹¿æ’­ä¿¡é“ä¸Šçš„ä¼ è¾“ã€‚</p>
<p>å†²çªï¼ˆcollideï¼‰ï¼šä¸¤ä¸ªä»¥ä¸Šçš„èŠ‚ç‚¹åŒæ—¶ä¼ è¾“å¸§ï¼Œä½¿æ¥æ”¶æ–¹æ”¶ä¸åˆ°æ­£ç¡®çš„å¸§ï¼ˆæ‰€æœ‰å†²çªçš„å¸§éƒ½å—æŸä¸¢å¤±ï¼‰ã€‚</p>
<ul>
<li><strong>ä¿¡é“åˆ’åˆ†åè®®</strong>: TDMAã€FDMAã€CDMAï¼ˆæ—¶åˆ†ï¼Œé¢‘åˆ†ï¼Œç åˆ†ï¼‰<ul>
<li>æŠŠä¿¡é“åˆ’åˆ†ä¸ºå°â€œç‰‡â€ (æ—¶éš™)ï¼›ç»™èŠ‚ç‚¹åˆ†é…ä¸“ç”¨çš„å°â€œç‰‡â€</li>
</ul>
</li>
<li><strong>éšæœºè®¿é—®åè®®</strong>: ALOHA(çº¯ALOHAï¼Œæ—¶éš™ALOHA)ã€CSMAã€CSMA&#x2F;CDï¼ˆä»¥å¤ªç½‘ï¼‰ã€CSMA&#x2F;CAï¼ˆæ— çº¿å±€åŸŸç½‘ï¼‰<ul>
<li>ä¸åˆ’åˆ†ä¿¡é“ï¼Œå…è®¸å†²çªï¼›èƒ½ä»å†²çªä¸­â€œæ¢å¤â€</li>
</ul>
</li>
<li><strong>è½®æµåè®®</strong>ï¼šè½®è¯¢ï¼ˆæ¥è‡ªä¸­å¿ƒç«™ï¼‰ã€ä»¤ç‰Œé€šè¿‡è½®æµè®¿é—®ä¿¡é“é¿å…å†²çªï¼Œè¦å‘é€çš„èŠ‚ç‚¹è¶Šå¤šè½®æµæ—¶é—´è¶Šé•¿</li>
</ul>
<p>4ã€ä»¥å¤ªç½‘CSMA&#x2F;CDçš„è¿è¡Œæœºåˆ¶</p>
<p>(1) é€‚é…å™¨ä»ç½‘ç»œå±‚å¾—åˆ°åˆ†ç»„, åˆ›å»ºå¸§</p>
<p>(2)å¦‚æœé€‚é…å™¨ä¾¦å¬åˆ°ä¿¡é“ç©ºé—²,å¼€å§‹ä¼ é€å¸§ã€‚å¦‚æœä¿¡é“å¿™, å®ƒä¼šç­‰åˆ°ä¿¡é“ç©ºé—²æ‰ä¼ é€å¸§</p>
<p>(3)å¦‚æœé€‚é…å™¨ä¼ é€æ•´ä¸ªå¸§æ—¶ï¼Œéƒ½æ²¡æœ‰æ£€æµ‹åˆ°å…¶å®ƒä¼ è¾“, åˆ™å®Œæˆè¯¥å¸§çš„ä¼ é€</p>
<p>(4)å¦‚æœé€‚é…å™¨åœ¨å‘é€ä¸­æ£€æµ‹åˆ°å…¶å®ƒä¼ é€,å°±æ”¾å¼ƒä¼ é€ï¼Œå¹¶å‘é€ä¸€ä¸ªæ‹¥å¡ä¿¡å·</p>
<p>(5)æ”¾å¼ƒä¼ é€åï¼Œé€‚é…å™¨è¿›å…¥æŒ‡æ•°å›é€€é˜¶æ®µï¼Œå³è¯¥å¸§ç»è¿‡næ¬¡å†²çªåï¼Œé€‚é…å™¨åœ¨{0,1,2,â€¦,2m-1}ä¸­éšæœºé€‰å–ä¸€ä¸ªKå€¼ ï¼Œå…¶ä¸­m&#x3D;min(n,10),ç„¶åç­‰å¾…K*512æ¯”ç‰¹æ—¶é—´å,å›åˆ°ç¬¬2æ­¥</p>
<p>5ã€é“¾è·¯å±‚å¯»å€</p>
<p>æ¯ä¸ªèŠ‚ç‚¹æœ‰ç½‘ç»œå±‚åœ°å€å’Œé“¾è·¯å±‚åœ°å€ã€‚</p>
<p><strong>ç½‘ç»œå±‚åœ°å€</strong>ï¼šèŠ‚ç‚¹åœ¨ç½‘ç»œä¸­åˆ†é…çš„ä¸€ä¸ªå”¯ä¸€åœ°å€ï¼ˆIPåœ°å€ï¼‰ã€‚ç”¨äºæŠŠåˆ†ç»„é€åˆ°ç›®çš„IPç½‘ç»œã€‚é•¿åº¦ä¸º32æ¯”ç‰¹ï¼ˆIPv4ï¼‰ã€‚</p>
<p><strong>é“¾è·¯å±‚åœ°å€</strong>ï¼šåˆå«åšMACåœ°å€æˆ–ç‰©ç†åœ°å€ã€å±€åŸŸç½‘åœ°å€ã€‚</p>
<ul>
<li>ç”¨äºæŠŠæ•°æ®å¸§ä»ä¸€ä¸ªèŠ‚ç‚¹ä¼ é€åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹(åŒä¸€ç½‘ç»œä¸­)ã€‚</li>
</ul>
<p>MACåœ°å€ï¼ˆLANåœ°å€ã€ç‰©ç†åœ°å€ï¼‰ï¼š</p>
<ul>
<li>èŠ‚ç‚¹â€œç½‘å¡â€æœ¬èº«æ‰€å¸¦çš„åœ°å€ï¼ˆå”¯ä¸€ï¼‰ã€‚MACåœ°å€é•¿åº¦é€šå¸¸ä¸º6å­—èŠ‚(48æ¯”ç‰¹)ï¼Œå…±2â´â¸ä¸ªã€‚ä¾‹å¦‚ï¼š<font color=red>1A-2F-BB-76-09-AD</font></li>
<li>6å­—èŠ‚åœ°å€ç”¨<strong>16è¿›åˆ¶è¡¨ç¤º</strong>ï¼Œæ¯ä¸ªå­—èŠ‚è¡¨ç¤ºä¸ºä¸€å¯¹16è¿›åˆ¶æ•°</li>
<li>ç½‘å¡çš„MACåœ°å€æ˜¯<strong>æ°¸ä¹…çš„</strong>ï¼ˆç”Ÿäº§æ—¶å›ºåŒ–åœ¨å…¶ROMé‡Œï¼‰</li>
</ul>
<p><strong>å±€åŸŸç½‘ä¸­æ¯ä¸ªç½‘å¡éƒ½æœ‰å”¯ä¸€çš„å±€åŸŸç½‘åœ°å€</strong></p>
<p><em><strong>MACåœ°å€åˆ†é…</strong></em></p>
<p>ç”±ä¸“é—¨æœºæ„IEEEç®¡ç†ç‰©ç†åœ°å€ç©ºé—´</p>
<ul>
<li>è´Ÿè´£åˆ†é…å…­ä¸ªå­—èŠ‚ä¸­çš„<strong>å‰ä¸‰ä¸ªå­—èŠ‚</strong>ï¼ˆé«˜24ä½ï¼Œ<strong>åœ°å€å—</strong>ï¼‰ï¼Œåä¸‰ä¸ªå­—èŠ‚å‚å®¶è‡ªè¡Œåˆ†é…ã€‚</li>
</ul>
<p><em>MAC åœ°å€æ˜¯å¹³é¢ç»“æ„</em></p>
<ul>
<li><strong>å¸¦æœ‰åŒä¸€ç½‘å¡çš„èŠ‚ç‚¹ï¼Œåœ¨ä»»ä½•ç½‘ç»œä¸­éƒ½æœ‰åŒæ ·çš„MACåœ°å€</strong>ã€‚</li>
</ul>
<p><em>IPåœ°å€å…·æœ‰å±‚æ¬¡ç»“æ„</em></p>
<ul>
<li>å½“èŠ‚ç‚¹ç§»åŠ¨åˆ°ä¸åŒç½‘ç»œæ—¶ï¼ŒèŠ‚ç‚¹çš„IPåœ°å€å‘ç”Ÿæ”¹å˜ã€‚</li>
</ul>
<p><em><strong>èŠ‚ç‚¹çš„3ç§ä¸åŒåœ°å€è¡¨ç¤º</strong></em></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_09-50-28.png"></p>
<p><em>åœ°å€ä¹‹é—´çš„è½¬æ¢</em></p>
<p>é€šä¿¡æ—¶ï¼Œéœ€è¦è¿›è¡Œåœ°å€è½¬æ¢ï¼š       </p>
<p><strong>ä¸»æœºåâ†’ IPåœ°å€â†’ MACåœ°å€</strong></p>
<p>DNSåŸŸåç³»ç»Ÿï¼šå°†<strong>ä¸»æœºåè§£æåˆ°IPåœ°å€</strong>ã€‚</p>
<ul>
<li>DNSä¸ºåœ¨å› ç‰¹ç½‘ä¸­ä»»ä½•åœ°æ–¹çš„ä¸»æœºè§£æä¸»æœºåã€‚</li>
</ul>
<p>ARPåœ°å€è§£æåè®®ï¼šå°†<strong>IPåœ°å€è§£æåˆ°MACåœ°å€</strong>ã€‚</p>
<ul>
<li>ARPåªä¸ºåœ¨<strong>åŒä¸€ä¸ªLAN</strong>ä¸Šçš„èŠ‚ç‚¹è§£æIPåœ°å€ã€‚</li>
</ul>
<p>6ã€ ARPåœ°å€è§£æåè®®ï¼ˆåŒä¸€ä¸ªå­ç½‘æˆ–ä¸åŒå­ç½‘ï¼‰</p>
<p>ï¼ˆ1ï¼‰<strong>ARPè¡¨</strong>: å±€åŸŸç½‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹(ä¸»æœºã€è·¯ç”±å™¨)éƒ½æœ‰è¿™ä¸ªè¡¨ï¼Œä¸ºæŸäº›å±€åŸŸç½‘èŠ‚ç‚¹è¿›è¡ŒIP&#x2F;MACåœ°å€æ˜ å°„ï¼š     </p>
<p><strong>&lt; IP address; MAC address; TTL&gt;</strong></p>
<p>TTL (å­˜æ´»æ—¶é—´): åœ°å€æ˜ å°„å°†è¢«åˆ é™¤çš„æ—¶é—´ï¼ˆé€šå¸¸ä¸º20åˆ†é’Ÿï¼‰</p>
<p>ï¼ˆ2ï¼‰ä¸¤ä¸ªä¸»æœºä½äºåŒä¸€ä¸ªå±€åŸŸç½‘</p>
<ul>
<li>ä¸»æœºAå¸Œæœ›å‘é€æ•°æ®æŠ¥ç»™ä¸»æœºB<ul>
<li>Bçš„MACåœ°å€ä¸åœ¨Açš„ARPæ˜ å°„è¡¨ä¸­</li>
</ul>
</li>
<li>ä¸»æœºA å¹¿æ’­ ARPæŸ¥è¯¢åˆ†ç»„, å…¶ä¸­åŒ…å«<strong>Bçš„IPåœ°å€</strong> <ul>
<li>ç›®çš„MACåœ°å€ &#x3D; FF-FF-FF-FF-FF-FF</li>
<li>å±€åŸŸç½‘ä¸­æ‰€æœ‰èŠ‚ç‚¹æ”¶åˆ°ARPæŸ¥è¯¢åˆ†ç»„</li>
</ul>
</li>
<li>ä¸»æœºBæ”¶åˆ°ARPæŸ¥è¯¢åˆ†ç»„ï¼Œè¿”å›Bçš„MACåœ°å€ç»™ä¸»æœºA<ul>
<li>åˆ©ç”¨å•æ’­å¸§å‘Aå‘é€åº”ç­”</li>
</ul>
</li>
<li>ä¸»æœºAåœ¨å®ƒçš„ARPè¡¨ä¸­ç¼“å­˜<strong>IP-to-MAC</strong> åœ°å€å¯¹ï¼Œç›´åˆ°ä¿¡æ¯ <ul>
<li>è½¯çŠ¶æ€ï¼šä¿¡æ¯è¶…æ—¶ä¼šè¢«åˆ é™¤ï¼Œé™¤éæœ‰æ–°çš„æ›´æ–°æ¶ˆæ¯</li>
</ul>
</li>
</ul>
<p>ï¼ˆ3ï¼‰å‘é€æ•°æ®æŠ¥åˆ°å­ç½‘ä»¥å¤–</p>
<ul>
<li><p>ä¸»æœºAæ„å»ºIPæ•°æ®æŠ¥ï¼Œæºåœ°å€æ˜¯Açš„IPåœ°å€ï¼Œç›®çš„åœ°å€æ˜¯Bçš„IPåœ°å€ã€‚</p>
</li>
<li><p>ä¸»æœºAæ„å»ºé“¾è·¯å±‚æ•°æ®å¸§ï¼Œå…¶ä¸­æºMACåœ°å€æ˜¯Açš„MACåœ°å€ï¼Œç›®çš„MACåœ°å€æ˜¯ç¬¬ä¸€è·³è·¯ç”±å™¨<strong>æ¥å£çš„MACåœ°å€</strong>ï¼Œå°è£…Aåˆ°Bçš„IPæ•°æ®æŠ¥ã€‚</p>
</li>
<li><p>æ•°æ®å¸§ä»ä¸»æœºAå‘é€åˆ°è·¯ç”±å™¨R</p>
</li>
<li><p>è·¯ç”±å™¨Ræ”¶åˆ°æ•°æ®å¸§ï¼ŒæŠ½å–å‡ºæ•°æ®æŠ¥é€’äº¤åˆ°IPå±‚</p>
</li>
<li><p>è·¯ç”±å™¨Rè½¬å‘æ•°æ®æŠ¥ï¼Œæºåœ°å€ä¸ºAçš„IPåœ°å€ï¼Œç›®çš„åœ°å€ä¸ºBçš„IPåœ°å€</p>
</li>
<li><p>è·¯ç”±å™¨Rå°†è¯¥æ•°æ®æŠ¥å°è£…æˆé“¾è·¯å±‚å¸§ï¼Œç›®çš„MACåœ°å€ä¸ºä¸»æœºBçš„MACåœ°å€</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_09-51-01.png">7ã€ä»¥å¤ªç½‘å¸§æ ¼å¼ã€ä¸å¯é çš„æ— è¿æ¥æœåŠ¡</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä»¥å¤ªç½‘æ˜¯æœ€ä¸ºè‘—åçš„æœ‰çº¿å±€åŸŸç½‘æŠ€æœ¯ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_09-53-00.png"></p>
<p>å‘é€æ–¹ï¼šå‘é€é€‚é…å™¨å°†<strong>IPæ•°æ®æŠ¥å°è£…</strong>æˆä»¥å¤ªç½‘å¸§ï¼Œå¹¶ä¼ é€’åˆ°<strong>ç‰©ç†å±‚</strong>ã€‚</p>
<p>æ¥æ”¶æ–¹ï¼šæ¥æ”¶é€‚é…å™¨ä»ç‰©ç†å±‚æ”¶åˆ°è¯¥å¸§ï¼Œ<strong>å–å‡ºIPæ•°æ®æŠ¥</strong>ï¼Œå¹¶ä¼ é€’ç»™<strong>ç½‘ç»œå±‚</strong>ã€‚</p>
<p><em><strong>å‰åŒæ­¥ç ï¼ˆ8å­—èŠ‚ï¼‰</strong></em></p>
<ul>
<li>å‰7å­—èŠ‚æ˜¯â€œ10101010â€ï¼Œæœ€åä¸€ä¸ªå­—èŠ‚æ˜¯â€œ10101011â€ã€‚</li>
<li>ä½¿æ¥æ”¶æ–¹å’Œå‘é€æ–¹çš„<strong>æ—¶é’ŸåŒæ­¥</strong>ï¼Œæ¥æ”¶æ–¹ä¸€æ—¦æ”¶åˆ°è¿ç»­çš„8å­—èŠ‚å‰åŒæ­¥ç ï¼Œå¯ç¡®å®šæœ‰å¸§ä¼ è¿‡æ¥ã€‚</li>
<li><strong>å‰åŒæ­¥ç æ˜¯â€œæ— æ•ˆä¿¡å·â€ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°ååˆ é™¤ï¼Œä¸å‘ä¸Šå±‚ä¼ </strong>ã€‚</li>
<li>CRCçš„æ ¡éªŒèŒƒå›´ä¸åŒ…æ‹¬å‰åŒæ­¥ç ã€‚</li>
</ul>
<p><em><strong>æºã€ç›®çš„MACåœ°å€(å„6å­—èŠ‚)</strong></em></p>
<p>ä¾‹ï¼ŒåŒä¸€ä»¥å¤ªç½‘LANä¸­ä¸¤å°ä¸»æœºé€šä¿¡ã€‚ä¸»æœºAå‘ä¸»æœºBå‘é€ä¸€ä¸ªIPæ•°æ®æŠ¥ã€‚</p>
<p>ä¸»æœºAé€‚é…å™¨çš„MACåœ°å€ï¼šXX-XX-XX-XX-XX-XX</p>
<p>ä¸»æœºBé€‚é…å™¨çš„MACåœ°å€ï¼šYY-YY-YY-YY-YY-YY</p>
<p>é€‚é…å™¨B<strong>åªæ¥æ”¶ç›®çš„åœ°å€ä¸å…¶MACåœ°å€åŒ¹é…æˆ–å¹¿æ’­åœ°å€çš„å¸§</strong>ï¼Œå¹¶å°†æ•°æ®å­—æ®µçš„å†…å®¹ä¼ é€’ç»™ç½‘ç»œå±‚ã€‚å¦åˆ™ï¼Œä¸¢å¼ƒè¯¥å¸§ã€‚</p>
<p><em><strong>ç±»å‹å­—æ®µï¼š</strong></em></p>
<ul>
<li>ä»¥å¤ªç½‘å¯ä»¥<strong>â€œå¤šè·¯å¤ç”¨â€ï¼ˆæ”¯æŒï¼‰å¤šç§ç½‘ç»œå±‚</strong>åè®®ï¼ˆå¦‚IPåè®®ã€Novell IPXï¼‰ ã€‚é€šè¿‡â€œç±»å‹â€å­—æ®µåŒºåˆ†ã€‚</li>
<li>å‘é€æ–¹å¡«å…¥<strong>ç½‘ç»œå±‚åè®®</strong>â€œç±»å‹â€ ç¼–å·ï¼›æ¥æ”¶é€‚é…å™¨æ ¹æ®â€œç±»å‹â€å­—æ®µï¼Œå°†æ•°æ®å­—æ®µä¼ é€’ç»™ç›¸åº”çš„ç½‘ç»œå±‚åè®®ã€‚</li>
</ul>
<p><strong>æ•°æ®å­—æ®µï¼ˆ46ï½1500 å­—èŠ‚ï¼‰ï¼šæºå¸¦ç½‘ç»œå±‚ä¼ æ¥çš„IPæ•°æ®æŠ¥</strong></p>
<ul>
<li>ä»¥å¤ªç½‘çš„æœ€å¤§ä¼ è¾“å•å…ƒMTUæ˜¯1500å­—èŠ‚ï¼šè‹¥IPæ•°æ®æŠ¥è¶…è¿‡1500å­—èŠ‚ï¼Œå¿…é¡»å°†è¯¥æ•°æ®æŠ¥åˆ†æ®µã€‚</li>
<li>æœ€å°é•¿åº¦æ˜¯46å­—èŠ‚ï¼šå¦‚æœIPæ•°æ®æŠ¥å°äº46å­—èŠ‚ï¼Œ<strong>å¿…é¡»å¡«å……ä¸º46å­—èŠ‚</strong>ã€‚æ¥æ”¶æ–¹ç½‘ç»œå±‚å»é™¤å¡«å……å†…å®¹ã€‚</li>
</ul>
<p><em><strong>å¾ªç¯å†—ä½™æ£€æµ‹CRC(4å­—èŠ‚)</strong></em></p>
<p>æ£€æµ‹æ•°æ®å¸§ä¸­æ˜¯å¦å‡ºç°<strong>æ¯”ç‰¹å·®é”™ï¼ˆç¿»è½¬ï¼‰</strong>ã€‚</p>
<ul>
<li>å‘é€ä¸»æœºè®¡ç®—CRCï¼šèŒƒå›´åŒ…æ‹¬ç›®çš„åœ°å€ã€æºåœ°å€ã€ç±»å‹ã€æ•°æ®å­—æ®µçš„æ¯”ç‰¹ï¼Œç»“æœæ”¾å…¥å¸§CRCå­—æ®µã€‚</li>
<li>æ¥æ”¶ä¸»æœºè¿›è¡ŒCRCæ ¡éªŒï¼šæ¥æ”¶ä¸»æœºå¯¹æ”¶åˆ°çš„å¸§è¿›è¡ŒåŒæ ·è®¡ç®—ï¼Œå¹¶æ ¡éªŒç»“æœæ˜¯å¦å’ŒCRCå­—æ®µçš„å†…å®¹ç›¸ç­‰ã€‚è‹¥<strong>è®¡ç®—ç»“æœä¸ç­‰äºCRCå­—æ®µçš„å€¼</strong>(CRCæ ¡éªŒå¤±è´¥)ï¼Œè¯¥å¸§æœ‰å·®é”™ã€‚</li>
</ul>
<p><em><strong>ä»¥å¤ªç½‘: ä¸å¯é çš„æ— è¿æ¥æœåŠ¡</strong></em></p>
<p>ä»¥å¤ªç½‘å‘ç½‘ç»œå±‚æä¾›çš„æœåŠ¡ã€‚</p>
<ul>
<li>æ— è¿æ¥æœåŠ¡ï¼šé€šä¿¡æ—¶ï¼Œ<strong>å‘é€æ–¹é€‚é…å™¨ä¸éœ€è¦å…ˆå’Œæ¥æ”¶æ–¹é€‚é…å™¨â€œæ¡æ‰‹â€</strong>ã€‚</li>
<li>ä¸å¯é çš„æœåŠ¡ï¼šæ¥æ”¶åˆ°çš„<strong>å¸§å¯èƒ½åŒ…å«æ¯”ç‰¹å·®é”™</strong>ã€‚<ul>
<li>æ”¶åˆ°æ­£ç¡®å¸§ï¼Œ<strong>ä¸å‘ç¡®è®¤å¸§</strong>ï¼›</li>
<li>æ”¶åˆ°å‡ºé”™å¸§ï¼Œä¸¢å¼ƒè¯¥å¸§ï¼Œ<strong>ä¸å‘å¦å®šå¸§</strong>ã€‚</li>
<li>å‘é€é€‚é…å™¨ä¸ä¼šé‡å‘å‡ºé”™å¸§ã€‚</li>
<li>ä¸¢å¼ƒæ•°æ®çš„æ¢å¤æ˜¯é€šè¿‡ç»ˆç«¯<strong>ä¼ è¾“å±‚</strong>çš„å¯é æ•°æ®ä¼ è¾“æœºåˆ¶æ¥å®ç°çš„</li>
</ul>
</li>
<li>ä»¥å¤ªç½‘çš„MACåè®®ï¼š<strong>ä½¿ç”¨æ— æ—¶éš™çš„CSMA&#x2F;CDåè®®ï¼ˆäºŒè¿›åˆ¶æŒ‡æ•°å›é€€ï¼‰</strong></li>
</ul>
<p>8ã€é“¾è·¯å±‚äº¤æ¢æœºå¦‚ä½•æ„å»ºè½¬å‘è¡¨</p>
<p>é“¾è·¯å±‚è®¾å¤‡</p>
<ul>
<li><p>å­˜å‚¨è½¬å‘æ•°æ®å¸§</p>
</li>
<li><p>æ£€æŸ¥è¾¾åˆ°çš„æ•°æ®å¸§çš„MACåœ°å€ï¼Œæœ‰é€‰æ‹©çš„è½¬å‘æ•°æ®å¸§åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºé“¾è·¯è½¬å‘å¸§</p>
</li>
<li><p>å½“æ•°æ®å¸§è¢«è½¬å‘åˆ°ä¸€ä¸ªå…±äº«ç½‘æ®µæ—¶ï¼Œä½¿ç”¨CSMA&#x2F;CDæ¥è®¿é—®å…±äº«é“¾è·¯</p>
</li>
</ul>
<p>é€æ˜</p>
<ul>
<li>ä¸»æœºä¸å…³å¿ƒæ˜¯å¦å­˜åœ¨äº¤æ¢æœº</li>
</ul>
<p>å³æ’å³ç”¨å’Œè‡ªå­¦ä¹        </p>
<ul>
<li>äº¤æ¢æœºä¸éœ€è¦æ‰‹å·¥é…ç½®</li>
</ul>
<p>äº¤æ¢æœºï¼šæ”¯æŒå¤šèŠ‚ç‚¹åŒæ—¶ä¼ è¾“</p>
<ul>
<li><p>æ¯ä¸ªä¸»æœºç”±å•ç‹¬çš„é“¾è·¯ç›´æ¥è¿åˆ°äº¤æ¢æœºç«¯å£</p>
</li>
<li><p>äº¤æ¢æœºå¯ä»¥ç¼“å­˜æ•°æ®å¸§</p>
</li>
<li><p>ä»¥å¤ªç½‘åè®®åœ¨æ¯ä¸ªè¾“å…¥é“¾è·¯ä½¿ç”¨ï¼Œæ— ç¢°æ’ï¼Œä¸”å¯ä»¥å…¨åŒå·¥</p>
<ul>
<li>æ¯æ¡é“¾è·¯è‡ªèº«æ˜¯ä¸€ä¸ªç¢°æ’åŸŸ</li>
</ul>
</li>
<li><p>äº¤æ¢æœºï¼š A-to-Aâ€™å’ŒB-to-Bâ€™å¯ä»¥åŒæ—¶ä¼ è¾“ï¼Œè€Œä¸ä¼šå‘ç”Ÿç¢°æ’</p>
</li>
</ul>
<p>è½¬å‘è¡¨</p>
<ul>
<li>æ¯ä¸ªäº¤æ¢æœºæœ‰ä¸€ä¸ªäº¤æ¢æœºè½¬å‘è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªæ¡ç›®ï¼š(ä¸»æœºçš„MACåœ°å€ï¼Œåˆ°è¾¾ä¸»æœºçš„ç«¯å£ï¼Œæ—¶æˆ³)</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_10-21-33.png"></p>
<p>è‡ªå­¦ä¹ </p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_10-22-39.png"></p>
<p><em><strong>äº¤æ¢æœºï¼šæ•°æ®å¸§çš„è¿‡æ»¤&#x2F;è½¬å‘</strong></em></p>
<p>å½“äº¤æ¢æœºæ”¶åˆ°æ•°æ®å¸§:</p>
<ol>
<li>è®°å½•åˆ°è¾¾é“¾è·¯å’Œå‘é€ä¸»æœºçš„MACåœ°å€</li>
<li>ä½¿ç”¨æ•°æ®å¸§çš„ç›®çš„MACåœ°å€ï¼Œåœ¨è½¬å‘è¡¨ä¸­æ£€ç´¢</li>
<li>å¦‚æœåœ¨è½¬å‘è¡¨æ¡ç›®ä¸­æ‰¾åˆ°å¯¹åº”çš„MACåœ°å€</li>
<li>æ‰§è¡Œ{	å¦‚æœ ç›®çš„MACåœ°å€å¯¹åº”çš„ç«¯å£ä¸æ•°æ®å¸§çš„è¾¾åˆ°ç«¯å£ç›¸åŒ	åˆ™ ä¸¢å¼ƒè¯¥æ•°æ®å¸§	å¦åˆ™ è½¬å‘è¯¥æ•°æ®å¸§åˆ°æ¡ç›®æŒ‡å®šçš„ç«¯å£}</li>
<li>å¦åˆ™ï¼Œå‘é™¤åˆ°è¾¾ç«¯å£ä¹‹å¤–çš„æ‰€æœ‰ç«¯å£è½¬å‘(flood)</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_10-31-05.png"></p>
<p>é—®é¢˜ï¼šCå‘é€æ•°æ®å¸§ç»™Iâ€”â€”S1æ˜¯æ€ä¹ˆçŸ¥é“è¦æŠŠæ•°æ®å¸§å…ˆè½¬å‘åˆ°S4å’ŒS3çš„ï¼Ÿ</p>
<p>å›ç­”ï¼š<strong>æ³›æ´ªå’Œè‡ªå­¦ä¹ </strong></p>
<p>9ã€ä¸‰å±‚äº¤æ¢å«ä¹‰</p>
<ul>
<li><p>ä¼ ç»Ÿçš„äº¤æ¢æŠ€æœ¯æ˜¯åœ¨OSIç½‘ç»œå‚è€ƒæ¨¡å‹ä¸­çš„ç¬¬äºŒå±‚ï¼ˆå³æ•°æ®é“¾è·¯å±‚ï¼‰è¿›è¡Œæ“ä½œçš„ï¼Œé€šå¸¸ç§°åšâ€œäºŒå±‚äº¤æ¢æœºâ€ã€‚</p>
</li>
<li><p>ä¸‰å±‚äº¤æ¢æŠ€æœ¯èƒ½å¤Ÿåœ¨ç½‘ç»œæ¨¡å‹ä¸­çš„ç¬¬ä¸‰å±‚å®ç°æ•°æ®åŒ…çš„é«˜é€Ÿè½¬å‘ã€‚</p>
</li>
<li><p>ç®€å•åœ°è¯´ï¼Œ<strong>ä¸‰å±‚äº¤æ¢æŠ€æœ¯å°±æ˜¯äºŒå±‚äº¤æ¢æŠ€æœ¯+ä¸‰å±‚è½¬å‘æŠ€æœ¯</strong>ï¼Œä¸‰å±‚äº¤æ¢æœºå°±æ˜¯â€œ<strong>äºŒå±‚äº¤æ¢æœº+åŸºäºç¡¬ä»¶çš„è·¯ç”±å™¨</strong>â€</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_scjhj.png"></p>
<p>ä¸€æ¬¡è·¯ç”±ï¼Œå¤šæ¬¡äº¤æ¢ã€‚</p>
<p>å‘é€ç«™ç‚¹Aåœ¨å¼€å§‹å‘é€æ—¶ï¼ŒæŠŠè‡ªå·±çš„IPåœ°å€ä¸Bç«™çš„IPåœ°å€æ¯”è¾ƒï¼Œåˆ¤æ–­Bç«™æ˜¯å¦ä¸è‡ªå·±åœ¨åŒä¸€å­ç½‘å†…ã€‚</p>
<p>(1)è‹¥ç›®çš„ç«™Bä¸å‘é€ç«™Aåœ¨åŒä¸€å­ç½‘å†…ï¼Œåˆ™è¿›è¡ŒäºŒå±‚çš„è½¬å‘ã€‚</p>
<p>(2)è‹¥ä¸¤ä¸ªç«™ç‚¹ä¸åœ¨åŒä¸€å­ç½‘å†…ï¼Œåˆ™å‘é€ç«™Aè¦å‘â€œ<strong>ç¼ºçœç½‘å…³</strong>â€å‘å‡ºARPè¯·æ±‚ï¼Œè¯·æ±‚è·å¾—Bçš„MACåœ°å€ã€‚</p>
<p>(3)å¦‚æœä¸‰å±‚äº¤æ¢æœºçŸ¥é“Bçš„MACåœ°å€ï¼Œåˆ™å‘Aå›å¤Bçš„MACåœ°å€ã€‚å¦åˆ™ä¸‰å±‚äº¤æ¢æœºæ ¹æ®è·¯ç”±ä¿¡æ¯å‘Bç«™å¹¿æ’­ä¸€ä¸ªARPè¯·æ±‚ï¼ŒBç«™å¾—åˆ°æ­¤ARPè¯·æ±‚åå‘ä¸‰å±‚äº¤æ¢æœºå›å¤å…¶MACåœ°å€ï¼Œä¸‰å±‚äº¤æ¢æœºå°†Bç«™çš„MACåœ°å€ï¼Œä¸‰å±‚äº¤æ¢æœºå°†Bç«™çš„MACåœ°å€ä¿å­˜åˆ°äºŒå±‚äº¤æ¢å¼•æ“çš„MACåœ°å€è¡¨ä¸­ï¼Œå¹¶å›å¤ç»™å‘é€ç«™Aã€‚</p>
<p>(4)Aç›´æ¥ç”¨Bçš„MACåœ°å€å°è£…æ•°æ®å¸§ï¼Œä¸‰å±‚äº¤æ¢æœºæ¥æ”¶åˆ°æ•°æ®åç›´æ¥è¿›è¡Œ<strong>äºŒå±‚äº¤æ¢</strong>ã€‚</p>
<p>10ã€VLANå«ä¹‰</p>
<p>åˆ©ç”¨æ”¯æŒVLANçš„äº¤æ¢æœºï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå®é™…çš„ç‰©ç†å±€åŸŸç½‘å†…ï¼Œå®šä¹‰å¤šä¸ªè™šæ‹Ÿçš„å±€åŸŸç½‘ã€‚</p>
<p><strong>åŸºäºç«¯å£çš„VLAN</strong>:</p>
<ul>
<li>åˆ©ç”¨äº¤æ¢æœºå†…ç½®çš„ç®¡ç†è½¯ä»¶ï¼Œå°†ç«¯å£åˆ†ç»„ï¼Œä½¿å¾—ä¸€ä¸ªå•ç‹¬çš„äº¤æ¢æœºï¼Œåƒå¤šä¸ªäº¤æ¢æœºé‚£æ ·å·¥ä½œ</li>
</ul>
<p><strong>è·¨è¶Šå¤šä¸ªäº¤æ¢æœºçš„ VLAN</strong></p>
<ul>
<li>å¹²çº¿ç«¯å£ï¼ˆ trunk port ï¼‰æ‰¿è½½å®šä¹‰åœ¨å¤šä¸ªç‰©ç†äº¤æ¢æœºä¹‹ä¸Šçš„VLANé—´çš„æµé‡</li>
<li>æŸä¸€ä¸ªVLANå†…çš„æµé‡å¸§ï¼Œå¦‚æœè¦è·¨åŸŸç‰©ç†çš„äº¤æ¢æœºï¼Œéœ€ä½¿ç”¨802.1qæ ¼å¼ï¼ˆå¸¦æœ‰VLAN ID ä¿¡æ¯ï¼‰802.1qåè®®çš„ä½œç”¨ï¼šå¯¹å¹²çº¿ç«¯å£ä¹‹é—´ä¼ è¾“çš„å¸§ï¼Œæ·»åŠ &#x2F;ç§»é™¤é¢å¤–çš„å¤´éƒ¨å­—æ®µ</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_09-53-51.png"></p>
<hr>
<p>å±€åŸŸç½‘çš„åè®®ç»“æ„ä¸€èˆ¬ä¸åŒ…æ‹¬ï¼ˆBï¼‰ã€‚</p>
<p>â€A.ç‰©ç†å±‚	B.ç½‘ç»œå±‚	C.ä»‹è´¨è®¿é—®æ§åˆ¶å±‚	D.æ•°æ®é“¾è·¯å±‚</p>
<p>IEEE 802å±€åŸŸç½‘å‚è€ƒæ¨¡å‹å¯¹åº”OSIå‚è€ƒæ¨¡å‹çš„æ•°æ®é“¾è·¯å±‚ä¸ç‰©ç†å±‚ï¼Œå®ƒå°†æ•°æ®é“¾è·¯å±‚åˆ†ä¸ºé€»è¾‘é“¾è·¯æ§åˆ¶å­å±‚å’Œä»‹è´¨è®¿é—®æ§åˆ¶å­å±‚ã€‚æ‰€ä»¥å±€åŸŸç½‘çš„åè®®ç»“æ„ä¸€èˆ¬ä¸åŒ…æ‹¬ç½‘ç»œå±‚ã€‚</p>
<p>ä¸‹åˆ—å…³äºäºŒç»´å¥‡å¶æ ¡éªŒçš„è¯´æ³•ï¼Œæ­£ç¡®çš„æ˜¯ï¼ˆDï¼‰ã€‚</p>
<p>A.å¯ä»¥æ£€æµ‹å•æ¯”ç‰¹å·®é”™ä½†æ— æ³•çº æ­£</p>
<p>B.æ— æ³•æ£€æµ‹åŒæ¯”ç‰¹å·®é”™</p>
<p>C.å¯ä»¥æ£€æµ‹å’Œçº æ­£åŒæ¯”ç‰¹å·®é”™</p>
<p>D.å¯ä»¥æ£€æµ‹å’Œçº æ­£å•æ¯”ç‰¹å·®é”™</p>
<p>äºŒç»´å¥‡å¶æ ¡éªŒå¯ä»¥æ£€æµ‹å¹¶çº æ­£å•ä¸ªæ¯”ç‰¹å·®é”™ï¼Œå¯ä»¥æ£€æµ‹ä½†ä¸èƒ½çº æ­£åˆ†ç»„ä¸­ä»»æ„ä¸¤ä¸ªæ¯”ç‰¹çš„å·®é”™ã€‚</p>
<p>å°±äº¤æ¢æŠ€æœ¯è€Œè¨€ï¼Œå±€åŸŸç½‘ä¸­çš„ä»¥å¤ªç½‘é‡‡ç”¨çš„æ˜¯ï¼ˆAï¼‰ã€‚</p>
<p>â€ŒA.åˆ†ç»„äº¤æ¢æŠ€æœ¯</p>
<p>B.ç”µè·¯äº¤æ¢æŠ€æœ¯</p>
<p>C.æŠ¥æ–‡äº¤æ¢æŠ€æœ¯</p>
<p>D.åˆ†ç»„äº¤æ¢ä¸ç”µè·¯äº¤æ¢ç»“åˆæŠ€æœ¯</p>
<p>åœ¨è·¯ç”±å™¨äº’è”çš„å¤šä¸ªå±€åŸŸç½‘ä¸­ï¼Œé€šå¸¸è¦æ±‚æ¯ä¸ªå±€åŸŸç½‘çš„ï¼ˆDï¼‰</p>
<p>A.æ•°æ®é“¾è·¯å±‚åè®®å’Œç‰©ç†å±‚åè®®éƒ½å¿…é¡»ç›¸åŒ</p>
<p>B.æ•°æ®é“¾è·¯å±‚åè®®å¿…é¡»ç›¸åŒï¼Œè€Œç‰©ç†å±‚åè®®å¯ä»¥ä¸åŒ</p>
<p>C.æ•°æ®é“¾è·¯å±‚åè®®å¯ä»¥ä¸åŒï¼Œè€Œç‰©ç†å±‚åè®®å¿…é¡»ç›¸åŒ</p>
<p>D.æ•°æ®é“¾è·¯å±‚åè®®å’Œç‰©ç†å±‚åè®®éƒ½å¯ä»¥ä¸åŒ</p>
<p>è·¯ç”±å™¨æ˜¯åœ¨ç½‘ç»œå±‚ä¸Šå®ç°å¤šä¸ªç½‘ç»œäº’è”çš„è®¾å¤‡ã€‚ç”±è·¯ç”±å™¨äº’è”çš„å±€åŸŸç½‘ä¸­ï¼Œæ¯ä¸ªå±€åŸŸç½‘<strong>åªè¦æ±‚ç½‘ç»œå±‚åŠä»¥ä¸Šé«˜å±‚åè®®ç›¸åŒï¼Œæ•°æ®é“¾è·¯å±‚ä¸ç‰©ç†å±‚åè®®å¯ä»¥æ˜¯ä¸åŒçš„</strong>ã€‚</p>
<p>è®¾CRCç”Ÿæˆå¤šé¡¹å¼ä¸ºG(x) &#x3D; x^4 + x + 1ï¼Œæ•°æ®å¸§1010 1100çš„CRCæ ¡éªŒç ä¸ºï¼ˆDï¼‰ã€‚</p>
<p>A.110	B.011	C.1001	D.0011</p>
<p>åœ¨ä»¥å¤ªç½‘802.3åè®®ä¸­è§„å®šçš„é“¾è·¯å±‚å¤šè·¯è®¿é—®åè®®æ˜¯ï¼ˆBï¼‰ã€‚</p>
<p>â€A.æ—¶éš™ALOHA</p>
<p>B.CSMA&#x2F;CD</p>
<p>C.è½®è¯¢</p>
<p>D.çº¯ALOHA</p>
<p>CSMA&#x2F;CDï¼ˆCarrier Sense Multiple Access with Collision Detectionï¼‰æ˜¯ä¸€ç§é“¾è·¯å±‚å¤šè·¯è®¿é—®åè®®ï¼Œå®ƒè¢«ç”¨äºä»¥å¤ªç½‘802.3åè®®ä¸­ã€‚CSMA&#x2F;CDåè®®çš„å·¥ä½œåŸç†æ˜¯ï¼Œåœ¨å‘é€æ•°æ®ä¹‹å‰ï¼Œè®¾å¤‡ä¼šå…ˆç›‘å¬ä¿¡é“ï¼Œæ£€æµ‹æ˜¯å¦æœ‰å…¶ä»–è®¾å¤‡æ­£åœ¨å‘é€æ•°æ®ã€‚å¦‚æœä¿¡é“ç©ºé—²ï¼Œè®¾å¤‡å°±å¯ä»¥å¼€å§‹å‘é€æ•°æ®ã€‚å¦‚æœä¿¡é“å¿™ç¢Œï¼Œè®¾å¤‡ä¼šç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å°è¯•å‘é€æ•°æ®ã€‚</p>
<p>åœ¨ä»¥å¤ªç½‘é“¾è·¯å±‚ä¸­ä½¿ç”¨çš„å·®é”™æ£€æŸ¥æŠ€æœ¯æ˜¯ï¼ˆDï¼‰ã€‚</p>
<p>â€A.æ ¡éªŒå’Œ</p>
<p>B.äºŒç»´å¥‡å¶æ ¡éªŒ</p>
<p>C.1æ¯”ç‰¹å¥‡å¶æ ¡éªŒ</p>
<p>D.CRCå¾ªç¯å†—ä½™ç </p>
<p>å¦‚æœä¸€å°PCæœºAè¦å‘é€æ•°æ®æŠ¥ç»™å¦ä¸€å°PCæœºBï¼Œå¦‚æœä»–åªçŸ¥é“Bä¸»æœºçš„IPåœ°å€ï¼Œè€Œä¸çŸ¥é“Bä¸»æœºçš„MACåœ°å€ï¼Œå°±éœ€è¦é€šè¿‡ARPåè®®æŸ¥è¯¢Bä¸»æœºçš„MACåœ°å€ï¼Œè¿™æ—¶PCæœºAæ„é€ ä¸€ä¸ªARPæŸ¥è¯¢åˆ†ç»„ï¼Œè¯¥åˆ†ç»„çš„ç›®çš„IPåœ°å€æ˜¯Bä¸»æœºçš„IPåœ°å€ï¼Œç›®çš„MACåœ°å€æ˜¯ï¼ˆFF-FF-FF-FF-FF-FFï¼‰ã€‚</p>
<p>è§£æï¼šPCæœºAéœ€è¦å‘PCæœºBå‘é€æ•°æ®ï¼Œä½†å®ƒåªçŸ¥é“PCæœºBçš„IPåœ°å€ã€‚å› æ­¤ï¼ŒPCæœºAä¼šæ„é€ ä¸€ä¸ªARPæŸ¥è¯¢åˆ†ç»„ï¼Œè¯¥åˆ†ç»„åŒ…å«PCæœºAçš„IPåœ°å€å’ŒMACåœ°å€ä»¥åŠPCæœºBçš„IPåœ°å€ã€‚ç„¶åï¼ŒPCæœºAä¼šå°†è¯¥åˆ†ç»„å‘é€åˆ°å±€åŸŸç½‘ä¸­çš„æ‰€æœ‰è®¾å¤‡ï¼ˆä½¿ç”¨å¹¿æ’­åœ°å€FF-FF-FF-FF-FF-FFä½œä¸ºç›®çš„MACåœ°å€ï¼‰ã€‚å½“PCæœºBæ”¶åˆ°è¯¥ARPæŸ¥è¯¢åˆ†ç»„æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥åˆ†ç»„ä¸­çš„ç›®çš„IPåœ°å€æ˜¯å¦ä¸è‡ªå·±çš„IPåœ°å€åŒ¹é…ã€‚å¦‚æœåŒ¹é…ï¼ŒPCæœºBå°±ä¼šæ„é€ ä¸€ä¸ªARPå“åº”åˆ†ç»„ï¼Œè¯¥åˆ†ç»„åŒ…å«PCæœºBçš„IPåœ°å€å’ŒMACåœ°å€ä»¥åŠPCæœºAçš„IPåœ°å€ã€‚ç„¶åï¼ŒPCæœºBä¼šå°†è¯¥åˆ†ç»„å‘é€å›PCæœºAã€‚å½“PCæœºAæ”¶åˆ°è¯¥ARPå“åº”åˆ†ç»„æ—¶ï¼Œå®ƒå°±èƒ½å¤Ÿè·å¾—PCæœºBçš„MACåœ°å€ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ARPç¼“å­˜ä¸­ä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚è¿™æ ·ï¼ŒPCæœºAå°±èƒ½å¤Ÿä½¿ç”¨PCæœºBçš„MACåœ°å€æ¥å‘å…¶å‘é€æ•°æ®äº†ã€‚</p>
<p>é“¾è·¯å±‚çš„ä¿¡é“ç±»å‹ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šï¼ˆç‚¹å¯¹ç‚¹ï¼‰é“¾è·¯å’Œï¼ˆå¹¿æ’­ï¼‰é“¾è·¯ï¼Œå…¶ä¸­802.11wifiä½¿ç”¨çš„ä¿¡é“ç±»å‹æ˜¯ï¼ˆå¹¿æ’­ï¼‰é“¾è·¯ã€‚</p>
<p>ç‚¹å¯¹ç‚¹é“¾è·¯æ˜¯æŒ‡ä¸¤ä¸ªè®¾å¤‡ä¹‹é—´çš„ç›´æ¥è¿æ¥ï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥ç›´æ¥ä¼ è¾“æ•°æ®ã€‚è¿™ç§ç±»å‹çš„é“¾è·¯é€šå¸¸ç”¨äºç”µè¯ç½‘ç»œã€ä¸“çº¿ç½‘ç»œå’Œç‚¹å¯¹ç‚¹åè®®ï¼ˆPPPï¼‰ç­‰åœºæ™¯ã€‚å¹¿æ’­é“¾è·¯æ˜¯æŒ‡å¤šä¸ªè®¾å¤‡å…±äº«åŒä¸€ä¸ªä¿¡é“ï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥é€šè¿‡å¹¿æ’­çš„æ–¹å¼ä¼ è¾“æ•°æ®ã€‚è¿™ç§ç±»å‹çš„é“¾è·¯é€šå¸¸ç”¨äºå±€åŸŸç½‘ï¼ˆLANï¼‰å’Œæ— çº¿å±€åŸŸç½‘ï¼ˆWLANï¼‰ç­‰åœºæ™¯ã€‚802.11 Wi-Fiæ˜¯ä¸€ç§æ— çº¿å±€åŸŸç½‘æŠ€æœ¯ï¼Œå®ƒä½¿ç”¨çš„ä¿¡é“ç±»å‹æ˜¯å¹¿æ’­é“¾è·¯ã€‚åœ¨802.11 Wi-Fiç½‘ç»œä¸­ï¼Œå¤šä¸ªè®¾å¤‡å¯ä»¥å…±äº«åŒä¸€ä¸ªæ— çº¿ä¿¡é“ï¼Œå¹¶é€šè¿‡å¹¿æ’­çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</p>
<p>è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®&#x2F;å†²çªæ£€æµ‹çš„åŸç†å¯ä»¥æ¦‚æ‹¬ä¸ºå…ˆå¬åå‘ï¼Œï¼ˆè¾¹å¬è¾¹å‘ï¼‰ï¼Œå†²çªåœå‘ï¼Œéšæœºé‡å‘ã€‚</p>
<p>åœ¨å‘é€æ•°æ®ä¹‹å‰ï¼Œè®¾å¤‡ä¼šå…ˆç›‘å¬ä¿¡é“ï¼Œæ£€æµ‹æ˜¯å¦æœ‰å…¶ä»–è®¾å¤‡æ­£åœ¨å‘é€æ•°æ®ã€‚å¦‚æœä¿¡é“ç©ºé—²ï¼Œè®¾å¤‡å°±å¯ä»¥å¼€å§‹å‘é€æ•°æ®ã€‚å¦‚æœä¿¡é“å¿™ç¢Œï¼Œè®¾å¤‡ä¼šç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å°è¯•å‘é€æ•°æ®ã€‚åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œè®¾å¤‡ä¼šæŒç»­ç›‘å¬ä¿¡é“ï¼Œæ£€æµ‹æ˜¯å¦å‘ç”Ÿäº†å†²çªï¼ˆå³ä¸¤ä¸ªæˆ–å¤šä¸ªè®¾å¤‡åŒæ—¶å‘é€æ•°æ®ï¼‰ã€‚å¦‚æœå‘ç”Ÿäº†å†²çªï¼Œè®¾å¤‡ä¼šæ£€æµ‹åˆ°å†²çªå¹¶åœæ­¢å‘é€æ•°æ®ã€‚ç„¶åï¼Œè®¾å¤‡ä¼šç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å°è¯•å‘é€æ•°æ®ã€‚CSMA&#x2F;CDåè®®èƒ½å¤Ÿæœ‰æ•ˆåœ°å‡å°‘å†²çªçš„å‘ç”Ÿï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨å†²çªå‘ç”Ÿæ—¶å¿«é€Ÿæ¢å¤ï¼Œä»è€Œæé«˜äº†ç½‘ç»œçš„æ€§èƒ½ã€‚</p>
<p>åœ¨ä¸€ä¸ªIPç½‘ç»œä¸­è´Ÿè´£ä¸»æœºIPåœ°å€ä¸ä¸»æœºåç§°ä¹‹é—´çš„è½¬æ¢åè®®ç§°ä¸ºDNSåè®®ï¼Œè´Ÿè´£IPåœ°å€ä¸MACåœ°å€ä¹‹é—´çš„è½¬æ¢åè®®ç§°ä¸ºï¼ˆARPï¼‰ã€‚</p>
<p>å‡è®¾ç»“ç‚¹Aã€Bã€Céƒ½è¿æ¥åˆ°åŒä¸€ä¸ªå¹¿æ’­å±€åŸŸç½‘ä¸Šã€‚å¦‚æœAå‘Bå‘é€IPæ•°æ®æŠ¥ï¼Œæ¯ä¸ªå°è£…å¸§éƒ½æœ‰Bçš„MACåœ°å€ï¼ŒCçš„é€‚é…å™¨ï¼ˆä¼šï¼‰ï¼ˆä¼š&#x2F;ä¸ä¼šï¼‰å¤„ç†è¿™äº›å¸§å—ï¼Ÿå¦‚æœä¼šï¼ŒCçš„é€‚é…å™¨å°†ä¼šæŠŠæ•°æ®å¸§ä¸­çš„IPæ•°æ®æŠ¥ä¼ é€’ç»™Cçš„ç½‘ç»œå±‚å—ï¼Ÿï¼ˆä¸ä¼šï¼‰ï¼ˆä¼š&#x2F;ä¸ä¼šï¼‰ï¼Œå¦‚æœAç”¨MAC å¹¿æ’­åœ°å€æ¥å‘é€è¿™äº›å¸§ï¼Œä½ çš„å›ç­”å°†æœ‰æ€æ ·çš„å˜åŒ–å‘¢ï¼Ÿ</p>
<p>å½“Aå‘Bå‘é€IPæ•°æ®æŠ¥æ—¶ï¼Œæ¯ä¸ªå°è£…å¸§éƒ½æœ‰Bçš„MACåœ°å€ã€‚ç”±äºAã€Bå’ŒCéƒ½è¿æ¥åˆ°åŒä¸€ä¸ªå¹¿æ’­å±€åŸŸç½‘ä¸Šï¼Œå› æ­¤å½“Aå‘é€æ•°æ®å¸§æ—¶ï¼Œæ‰€æœ‰è¿æ¥åˆ°è¯¥å¹¿æ’­å±€åŸŸç½‘ä¸Šçš„è®¾å¤‡éƒ½ä¼šæ¥æ”¶åˆ°è¿™äº›å¸§ï¼ˆè¿™æ˜¯å› ä¸ºå¹¿æ’­å±€åŸŸç½‘ä½¿ç”¨äº†å¹¿æ’­ä¼ è¾“æ–¹å¼ã€‚åœ¨å¹¿æ’­ä¼ è¾“æ–¹å¼ä¸­ï¼Œå½“ä¸€ä¸ªè®¾å¤‡å‘é€æ•°æ®å¸§æ—¶ï¼Œè¯¥å¸§ä¼šè¢«å‘é€åˆ°å±€åŸŸç½‘ä¸­çš„æ‰€æœ‰è®¾å¤‡ï¼‰ã€‚<strong>Cçš„é€‚é…å™¨ä¼šå¤„ç†è¿™äº›å¸§ï¼Œå› ä¸ºå®ƒéœ€è¦æ£€æŸ¥æ¯ä¸ªå¸§çš„ç›®çš„MACåœ°å€ï¼Œä»¥ç¡®å®šè¯¥å¸§æ˜¯å¦æ˜¯å‘é€ç»™Cçš„</strong>ã€‚å¦‚æœç›®çš„MACåœ°å€ä¸Cçš„MACåœ°å€åŒ¹é…ï¼ŒCçš„é€‚é…å™¨å°±ä¼šæŠŠæ•°æ®å¸§ä¸­çš„IPæ•°æ®æŠ¥ä¼ é€’ç»™Cçš„ç½‘ç»œå±‚ã€‚å¦åˆ™ï¼ŒCçš„é€‚é…å™¨ä¼šä¸¢å¼ƒè¯¥å¸§ã€‚å¦‚æœAç”¨MACå¹¿æ’­åœ°å€æ¥å‘é€è¿™äº›å¸§ï¼ŒCçš„é€‚é…å™¨åŒæ—¶å¤„ç†å¸§å¹¶å°†æ•°æ®æŠ¥ä¼ é€’åˆ°ç½‘ç»œå±‚ã€‚</p>
<p>å‡è®¾ç½‘ç»œçš„æ‹“æ‰‘ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœPC1éœ€è¦ç»™PC3å‘é€ä¸€ä¸ªæ•°æ®æŠ¥æ–‡ï¼Œå‡è®¾PC1çš„ARPé«˜é€Ÿç¼“å­˜ä¸­æœ‰è·¯ç”±å™¨ç«¯å£1çš„MACåœ°å€ï¼ŒPC1å‘å‡ºçš„æ•°æ®å¸§çš„æºIPåœ°å€æ˜¯ï¼ˆ192.168.1.1ï¼‰ã€ç›®çš„IPåœ°å€æ˜¯ï¼ˆ192.168.2.1ï¼‰ã€æºMACåœ°å€æ˜¯ï¼ˆ11-11-11-11-11-11ï¼‰ã€ç›®çš„MACåœ°å€æ˜¯ï¼ˆ44-44-44-44-44-44ï¼‰ã€‚PC3æ”¶åˆ°çš„æ•°æ®å¸§çš„æºIPåœ°å€æ˜¯ï¼ˆ192.168.1.1ï¼‰ã€ç›®çš„IPåœ°å€æ˜¯ï¼ˆ192.168.2.1ï¼‰ã€æºMACåœ°å€æ˜¯ï¼ˆ55-55-55-55-55-55ï¼‰ã€ç›®çš„MACåœ°å€æ˜¯ï¼ˆAA-BB-CC-DD-EE-FFï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/65BD8F40248575FD537466D257525368.png"></p>
<p>æ³¨æ„æºIPå’Œç›®çš„IP</p>
<p>å‡å®šç½‘ç»œæ‹“æ‰‘ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ºäº†ä½¿ç½‘ç»œä¸­æ‰€æœ‰çš„PCæœºèƒ½ç›¸äº’é€šä¿¡ï¼Œéœ€è¦æ‰‹åŠ¨ç»™è·¯ç”±å™¨R1å’ŒR2æ·»åŠ è·¯ç”±è¡¨ï¼Œè·¯ç”±å™¨R1éœ€è¦æ·»åŠ çš„è·¯ç”±æ˜¯ï¼ˆ192.168.4.0&#x2F;24via192.168.3.2ï¼‰å’Œï¼ˆ192.168.5.0&#x2F;24via192.168.3.2ï¼‰ï¼ŒR2éœ€è¦æ·»åŠ çš„è·¯ç”±æ˜¯ï¼ˆ192.168.1.0&#x2F;24via192.168.3.1ï¼‰å’Œï¼ˆ192.168.2.0&#x2F;24via192.168.3.1ï¼‰ã€‚ï¼ˆä¾‹å¦‚192.168.4.1&#x2F;24via192.168.3.3ã€192.168.5.1&#x2F;24via192.168.3.3ã€192.168.4.1&#x2F;24via192.168.3.3ã€192.168.5.1&#x2F;24via192.168.3.3ï¼‰</p>
<p>ç›¸å½“äºæ±‚å››ä¸ªä¸»æœºæ‰€åœ¨è®¡ç½‘çš„ç½‘ç»œåœ°å€</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/2542E72D0E1CA6EEFC4520DD2F4046B4.jpg"></p>
<p>â€åœ¨æŸç½‘ç»œä¸­æ ‡è¯†ä¸ºAåˆ°Eçš„5ä¸ªç»“ç‚¹ä»¥æ˜Ÿå½¢ä¸ä¸€å°äº¤æ¢æœºè¿æ¥ï¼Œè€ƒè™‘åœ¨è¯¥ç½‘ç»œç¯å¢ƒä¸­æŸä¸ªæ­£åœ¨å­¦ä¹ çš„äº¤æ¢æœºçš„è¿è¡Œæƒ…å†µã€‚å‡å®šï¼šè¯¥äº¤æ¢æœºè¡¨åˆå§‹ä¸ºç©ºã€‚Bå‘Eå‘é€ä¸€ä¸ªå¸§ï¼Œæ­¤æ—¶äº¤æ¢æœºå°†è¯¥æ•°æ®å¸§è½¬å‘åˆ°ï¼ˆa,c,d,eï¼‰ç«¯å£ï¼Œå½“Eæ”¶åˆ°æ•°æ®å¸§ä»¥åï¼Œè¿”å›ä¸€ä¸ªæ•°æ®å¸§ç»™Bï¼Œåˆ™å½“æ•°æ®å¸§åˆ°è¾¾äº¤æ¢æœºåï¼Œè¯¥æ•°æ®å¸§å°†è¢«è½¬å‘åˆ°ï¼ˆbï¼‰ç«¯å£ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_12-58-05.png"></p>
<p>Bå‘Eå‘é€ä¸€ä¸ªå¸§ï¼›<strong>äº¤æ¢æœºè®°å½•Bçš„MACåœ°å€ä¸åˆ°è¾¾çš„ç«¯å£ï¼›ç”±äºäº¤æ¢æœºè¡¨ä¸ºç©ºï¼Œæ•…å‘Aã€Cã€Dã€Eã€F éƒ½å‘é€æ­¤å¸§</strong>ã€‚Eå‘Bå›ç­”ä¸€ä¸ªå¸§ï¼›<strong>äº¤æ¢æœºè®°å½•Bçš„MACåœ°å€ä¸åˆ°è¾¾çš„ç«¯å£ï¼›ç”±äºäº¤æ¢æœºè¡¨æœ‰Bçš„MACåœ°å€ï¼Œæ•…åªå‘Bè½¬å‘</strong></p>
<p>â€Œæœ‰å¦‚å›¾æ‰€ç¤ºçš„æ‹“æ‰‘ç»“æ„ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_12-58-21.png"></p>
<p>â‘ ä¸»æœºEå‘ä¸»æœºBå‘é€ä¸€ä¸ªIPæ•°æ®æŠ¥ï¼Œå‡è®¾æ‰€æœ‰ä¸»æœºçš„ARPç¼“å­˜è¡¨å’Œäº¤æ¢æœºè½¬å‘è¡¨éƒ½æ˜¯æœ€æ–°çš„ï¼Œåˆ™Eå‘å‡ºçš„æ•°æ®å¸§çš„ç›®çš„MACåœ°å€å’Œç›®çš„IPåœ°å€åˆ†åˆ«æ˜¯ï¼ˆ88-88-88-88-88-8ï¼‰å’Œï¼ˆ192.168.1.003ï¼‰ï¼ŒæºMACåœ°å€å’ŒæºIPåœ°å€åˆ†åˆ«æ˜¯ï¼ˆ77-77-77-77-77-77ï¼‰å’Œï¼ˆ192.168.3.001ï¼‰ï¼›Router2æ”¶åˆ°æ•°æ®å¸§ä»¥åï¼Œå°†ç»§ç»­è½¬å‘è¯¥æ•°æ®å¸§ï¼Œè½¬å‘çš„æ•°æ®å¸§çš„ç›®çš„MACåœ°å€å’Œç›®çš„IPåœ°å€åˆ†åˆ«æ˜¯ï¼ˆ33-33-33-33-33-33ï¼‰å’Œï¼ˆ192.168.1.003ï¼‰ï¼ŒæºMACåœ°å€å’ŒæºIPåœ°å€åˆ†åˆ«æ˜¯ï¼ˆ55-55-55-55-55-55ï¼‰å’Œï¼ˆ192.168.3.001ï¼‰ï¼›Router1æ”¶åˆ°è¯¥æ•°æ®å¸§ä»¥åå°†ç»§ç»­è½¬å‘è¯¥æ•°æ®å¸§ç»™ä¸»æœºBï¼ŒRouter1è½¬å‘çš„æ•°æ®å¸§çš„ç›®çš„MACåœ°å€å’Œç›®çš„IPåœ°å€åˆ†åˆ«æ˜¯ï¼ˆ11-11-11-11-11-11ï¼‰å’Œï¼ˆ192.168.1.003ï¼‰ï¼ŒæºMACåœ°å€å’ŒæºIPåœ°å€åˆ†åˆ«æ˜¯ï¼ˆ22-22-22-22-22-22ï¼‰å’Œï¼ˆ192.168.3.001ï¼‰ã€‚</p>
<p>â‘¡å‡è®¾ä¸»æœºEå‘é€IPæ•°æ®æŠ¥ç»™ä¸»æœºFï¼Œä¸»æœºEå°†è¯·æ±‚è·¯ç”±å™¨Router2å¸®åŠ©è½¬å‘è¯¥æ•°æ®æŠ¥å—ï¼Ÿï¼ˆä¸ä¼šï¼‰ï¼ˆä¼š&#x2F;ä¸ä¼šï¼‰ï¼Œè¿™æ˜¯å› ä¸ºï¼ˆä¸»æœºEå’Œä¸»æœºFåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œä¸»æœºEå¯ä»¥ç›´æ¥å°†æ•°æ®å¸§å‘é€åˆ°å±€åŸŸç½‘ä¸­ï¼Œç„¶åç”±å±€åŸŸç½‘ä¸­çš„äº¤æ¢æœºæˆ–é›†çº¿å™¨å°†æ•°æ®å¸§è½¬å‘ç»™ä¸»æœºFï¼‰ã€‚Eå‘å‡ºçš„æ•°æ®å¸§çš„ç›®çš„MACåœ°å€æ˜¯ï¼ˆ99-99-99-99-99-99ï¼‰ã€‚</p>
<p>â‘¢å‡è®¾ä¸»æœºEå‘ä¸»æœºDå‘é€IPæ•°æ®æŠ¥ï¼Œä¸»æœºEçš„ARPç¼“å­˜è¡¨ä¸­æ²¡æœ‰ä¸»æœºDçš„MACåœ°å€ï¼ŒEå°†æ‰§è¡ŒARPæŸ¥è¯¢æ¥å‘ç°Dçš„MACåœ°å€å—ï¼Ÿï¼ˆä¸ä¼šï¼‰ï¼ˆä¼š&#x2F;ä¸ä¼šï¼‰ï¼Œè¿™æ˜¯å› ä¸ºï¼ˆä¸»æœºEå’Œä¸»æœºDä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œå®ƒä»¬ä¹‹é—´çš„é€šä¿¡éœ€è¦ç»è¿‡è·¯ç”±å™¨ã€‚ä¸»æœºEä¼šå°†æ•°æ®æŠ¥å‘é€ç»™å®ƒçš„é»˜è®¤ç½‘å…³ï¼Œå³è¿æ¥åˆ°å®ƒæ‰€åœ¨å±€åŸŸç½‘çš„è·¯ç”±å™¨ï¼Œç„¶åç”±è·¯ç”±å™¨æ ¹æ®è·¯ç”±è¡¨å°†æ•°æ®æŠ¥è½¬å‘åˆ°ç›®æ ‡ç½‘ç»œï¼‰ã€‚Router2æ”¶åˆ°çš„æ•°æ®å¸§çš„ç›®çš„MACåœ°å€æ˜¯ï¼ˆ88-88-88-88-88-88ï¼‰ã€‚</p>
<p>ä¸»æœºCå‘é€IPæ•°æ®æŠ¥ç»™ä¸»æœºDï¼ŒCçš„ARPç¼“å­˜ä¸åŒ…å«Dçš„MACåœ°å€ï¼ŒDçš„ARPç¼“å­˜ä¸åŒ…å«Cçš„MACåœ°å€ï¼Œè¿›ä¸€æ­¥å‡è®¾ä¸Cã€Dç›¸è¿çš„äº¤æ¢æœºçš„è½¬å‘è¡¨åªåŒ…å«Då’Œè·¯ç”±å™¨R2çš„è¡¨é¡¹ï¼Œå› æ­¤Cå°†å¹¿æ’­ä¸€ä¸ªARPè¯·æ±‚æŠ¥æ–‡ã€‚ä¸­é—´çš„äº¤æ¢æœºæ”¶åˆ°Cçš„ARPè¯·æ±‚æŠ¥æ–‡ï¼Œå°†æ‰§è¡Œçš„æ“ä½œæ˜¯ï¼ˆå¹¿æ’­æ“ä½œï¼Œå³å°†è¯¥æ•°æ®å¸§è½¬å‘ç»™é™¤äº†åˆ°è¾¾ç«¯å£ä¹‹å¤–çš„<strong>æ‰€æœ‰ç«¯å£</strong>ï¼‰ï¼Œè¿™ä¸ªè¯·æ±‚æŠ¥æ–‡ä¼šåˆ°è¾¾è·¯ç”±å™¨Router2å—ï¼Ÿï¼ˆä¼šï¼‰ï¼ˆä¼š&#x2F;ä¸ä¼šï¼‰ï¼ŒRouter2ä¼šç»§ç»­è½¬å‘è¯¥æŠ¥æ–‡åˆ°å³è¾¹çš„äº¤æ¢æœºå—ï¼Ÿï¼ˆä¸ä¼šï¼‰ï¼ˆä¼š&#x2F;ä¸ä¼šï¼‰ï¼Œè¿™æ˜¯å› ä¸ºï¼ˆARPåè®®åªåœ¨å•ä¸ªå±€åŸŸç½‘å†…æœ‰æ•ˆï¼‰ï¼Œä¸»æœºDæ”¶åˆ°ARPè¯·æ±‚æŠ¥æ–‡åï¼Œä¼šè¿”å›ä¸€ä¸ªARPå“åº”æŠ¥æ–‡ç»™ä¸»æœºCï¼Œå®ƒéœ€è¦å‘é€ä¸€ä¸ªARPè¯·æ±‚æŠ¥æ–‡æ¥è·å¾—Cçš„MACåœ°å€å—ï¼Ÿï¼ˆä¸éœ€è¦ï¼‰ï¼ˆéœ€è¦&#x2F;ä¸éœ€è¦ï¼‰ï¼Œè¿™æ˜¯å› ä¸ºï¼ˆDå·²ç»æ ¹æ®æ¥è‡ªCçš„ARPè¯·æ±‚æŠ¥æ–‡çš„æ•°æ®å¸§çš„æºMACåœ°å€çŸ¥é“äº†Cçš„MACåœ°å€ï¼‰ï¼Œä¸­é—´äº¤æ¢æœºæ”¶åˆ°ARPå“åº”æŠ¥æ–‡çš„æ•°æ®å¸§åï¼Œå°†ç›´æ¥è½¬å‘è¯¥æ•°æ®å¸§ç»™ä¸»æœºCï¼Œè¿™æ˜¯å› ä¸ºï¼ˆäº¤æ¢æœºå·²ç»åœ¨æ”¶åˆ°Cçš„ARPè¯·æ±‚æŠ¥æ–‡çš„æ•°æ®å¸§æ—¶ï¼Œé€šè¿‡è‡ªå­¦ä¹ â€å­¦ä¹ â€åˆ°ä¸»æœºCçš„MACåœ°å€å¯¹åº”çš„åˆ°è¾¾ç«¯å£ï¼‰ã€‚</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘æœŸæœ«å¤ä¹ ä¹‹ç½‘ç»œå±‚</title>
    <url>/2023/06/23/%E8%AE%A1%E7%BD%91/4/</url>
    <content><![CDATA[<p>1ã€ç½‘ç»œå±‚æä¾›çš„åŠŸèƒ½</p>
<p>ï¼ˆ1ï¼‰æŠ¥æ–‡æ®µå°è£…å’Œè§£å°ï¼ˆæ•°æ®æŠ¥ï¼‰</p>
<ul>
<li>å‘é€æ–¹ä¸»æœºã€æ¥æ”¶æ–¹ä¸»æœºã€è·¯ç”±å™¨</li>
</ul>
<p>ï¼ˆ2ï¼‰è½¬å‘ï¼ˆæ•°æ®å¹³é¢ï¼‰ 	</p>
<ul>
<li>è·¯ç”±å™¨æ ¹æ®è·¯ç”±è¡¨ï¼Œå°†åˆ†ç»„ä»è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£è½¬ç§»åˆ°æ­£ç¡®çš„è·¯ç”±å™¨è¾“å‡ºç«¯å£</li>
</ul>
<p>ï¼ˆ3ï¼‰è·¯ç”±(æ§åˆ¶å¹³é¢)	</p>
<ul>
<li>ç¡®å®šåˆ†ç»„ä»å‘é€æ–¹ä¼ è¾“åˆ°æ¥æ”¶æ–¹(ç›®çš„ä¸»æœº)æ‰€ç»è¿‡çš„è·¯å¾„(æˆ–è·¯ç”±)</li>
</ul>
<p>ï¼ˆ4)è¿æ¥å»ºç«‹ï¼ˆATMï¼‰</p>
<p>2ã€ä»€ä¹ˆæ ·çš„æœåŠ¡æ¨¡å‹å¯ä»¥ç”¨äºå°†æ•°æ®æŠ¥ä»å‘é€æ–¹ä¼ è¾“åˆ°æ¥æ”¶æ–¹</p>
<p>ï¼ˆ1ï¼‰ç½‘ç»œå±‚å¯èƒ½æä¾›çš„æœåŠ¡	</p>
<ul>
<li>ç¡®ä¿äº¤ä»˜ã€å…·æœ‰æ—¶å»¶ä¸Šç•Œçš„ç¡®ä¿äº¤ä»˜ã€æœ‰åºåˆ†ç»„äº¤ä»˜ã€ç¡®ä¿æœ€å°å¸¦å®½ã€ç¡®ä¿æœ€å¤§æ—¶å»¶æŠ–åŠ¨</li>
</ul>
<p>ï¼ˆ2ï¼‰å› ç‰¹ç½‘çš„ç½‘ç»œå±‚æä¾›çš„æœåŠ¡	</p>
<ul>
<li>å•ä¸€æœåŠ¡ï¼Œå³å°½åŠ›è€Œä¸ºæœåŠ¡ï¼›åˆ†ç»„é—´çš„å®šæ—¶ä¸èƒ½è¢«ä¿è¯ï¼›</li>
<li>åˆ†ç»„çš„æ¥æ”¶é¡ºåºä¸å‘é€é¡ºåºä¸ä¸€å®šç›¸åŒï¼›ä¼ é€çš„åˆ†ç»„ä¸èƒ½ä¿è¯æœ€ç»ˆäº¤ä»˜</li>
</ul>
<p>3ã€è™šç”µè·¯å’Œæ•°æ®æŠ¥ç½‘ç»œ</p>
<p>ä»»ä½•ç½‘ç»œä¸­çš„ç½‘ç»œå±‚åªæä¾›ä¸¤ç§æœåŠ¡ä¹‹ä¸€ï¼Œä¸ä¼šåŒæ—¶æä¾›ã€‚</p>
<p>ï¼ˆ1ï¼‰è™šç”µè·¯ç½‘ç»œ	</p>
<ul>
<li>æä¾›ç½‘ç»œå±‚çš„<strong>è¿æ¥</strong>æœåŠ¡ï¼›é¢å‘è¿æ¥æœåŠ¡åœ¨ç«¯ç³»ç»ŸåŠç½‘ç»œæ ¸å¿ƒçš„è·¯ç”±å™¨ä¸­å®ç°ï¼›</li>
</ul>
<p>ï¼ˆ2ï¼‰æ•°æ®æŠ¥ç½‘ç»œ</p>
<ul>
<li>æä¾›ç½‘ç»œå±‚çš„<strong>æ— è¿æ¥</strong>æœåŠ¡ï¼›</li>
<li>è·¯ç”±å™¨ä¸éœ€è¦ç»´æŠ¤ç«¯åˆ°ç«¯è¿æ¥çš„çŠ¶æ€ï¼Œä½¿ç”¨ç›®çš„ä¸»æœºçš„åœ°å€è¿›è¡Œåˆ†ç»„è½¬å‘ï¼›</li>
<li>å¯¹äºç»™å®šçš„ç›®çš„åœ°å€ï¼Œä½¿ç”¨<strong>æœ€é•¿åœ°å€å‰ç¼€åŒ¹é…</strong>æ¥å®Œæˆè¾“å‡ºç«¯å£çš„æŸ¥æ‰¾ï¼›</li>
<li>ä¸€ä¸ªç«¯ç³»ç»Ÿå‘é€ç»™å¦ä¸€ä¸ªç«¯ç³»ç»Ÿçš„ä¸€æ‰¹åˆ†ç»„å¯èƒ½åœ¨ç½‘ç»œä¸­é€‰æ‹©ä¸åŒçš„è·¯å¾„ï¼Œåˆ°è¾¾çš„é¡ºåºå¯èƒ½ä¸ä¸€è‡´ï¼›</li>
<li>ç‰¹ç‚¹ï¼š<ul>
<li>ç½‘ç»œå±‚æœåŠ¡æ¨¡å‹ç®€å•ï¼›</li>
<li>ç«¯ç³»ç»ŸåŠŸèƒ½å¤æ‚ï¼šæŒ‰åºä¼ é€ã€å¯é æ•°æ®ä¼ è¾“ã€æ‹¥å¡æ§åˆ¶ä¸DNSåå­—è§£æ</li>
<li>å› ç‰¹ç½‘æœåŠ¡æ¨¡å‹æä¾›çš„æœåŠ¡ä¿è¯æœ€å°‘ï¼Œå¯¹ç½‘ç»œå±‚çš„éœ€æ±‚æœ€å°ï¼Œä½¿å¾—é“¾è·¯å±‚æŠ€æœ¯å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</li>
</ul>
</li>
</ul>
<p>ä¼ è¾“å±‚ï¼šé¢å‘è¿æ¥æœåŠ¡åœ¨ç½‘ç»œè¾¹ç¼˜çš„<strong>ç«¯ç³»ç»Ÿ</strong>ä¸­å®ç°ã€‚</p>
<p>ç½‘ç»œå±‚ï¼šé¢å‘è¿æ¥æœåŠ¡åœ¨<strong>ç«¯ç³»ç»ŸåŠç½‘ç»œæ ¸å¿ƒçš„è·¯ç”±å™¨</strong>ä¸­å®ç°ã€‚</p>
<p>4ã€è·¯ç”±å™¨çš„ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½</p>
<ul>
<li>è¿è¡Œè·¯ç”±ç®—æ³•&#x2F;åè®®(OSPF, RIP, BGP)</li>
<li>å°†åˆ†ç»„ä»è·¯ç”±å™¨çš„è¾“å…¥é“¾è·¯ä¼ é€åˆ°æ­£ç¡®çš„è¾“å‡ºé“¾è·¯ã€‚</li>
</ul>
<p>5ã€è·¯ç”±å™¨çš„æ•´ä½“ç»“æ„</p>
<p><strong>è¾“å…¥ç«¯å£</strong>ï¼š</p>
<p>çº¿è·¯ç«¯æ¥æ¨¡å—ï¼šå°†ä¸€æ¡ç‰©ç†é“¾è·¯ç«¯æ¥åˆ°è·¯ç”±å™¨çš„ç‰©ç†å±‚ï¼›</p>
<p>æ•°æ®é“¾è·¯å¤„ç†æ¨¡å—ï¼šå®ç°è·¯ç”±å™¨çš„æ•°æ®é“¾è·¯å±‚åŠŸèƒ½ï¼›</p>
<p>æŸ¥æ‰¾ä¸è½¬å‘æ¨¡å—ï¼šå®ç°æŸ¥æ‰¾ä¸è½¬å‘åŠŸèƒ½ï¼Œä»¥ä¾¿åˆ†ç»„é€šè¿‡è·¯ç”±å™¨äº¤æ¢ç»“æ„è½¬å‘åˆ°é€‚å½“çš„è¾“å‡ºç«¯å£ï¼›å¦‚æœæ•°æ®æŠ¥åˆ°è¾¾è¾“å…¥ç«¯å£çš„é€Ÿåº¦å¿«äºè¾“å…¥ç«¯å£å°†æ•°æ®æŠ¥è½¬å‘åˆ°äº¤æ¢ç»“æ„çš„é€Ÿåº¦ï¼Œå°±ä¼šå‘ç”Ÿ<strong>æ’é˜Ÿ</strong>ã€‚</p>
<p><strong>é€‰è·¯å¤„ç†å™¨</strong>ï¼šè®¡ç®—è½¬å‘è¡¨ï¼Œç»™<strong>æ¯ä¸ªè¾“å…¥ç«¯å£å­˜æ”¾ä¸€ä»½è½¬å‘è¡¨æ‹·è´</strong></p>
<p><strong>åˆ†å¸ƒå¼äº¤æ¢</strong>ï¼š</p>
<p>ï¼ˆ1ï¼‰å†…å­˜äº¤æ¢ï¼šé€‰è·¯å¤„ç†å™¨å®Œæˆè¾“å…¥ç«¯å£ä¸è¾“å‡ºç«¯å£ä¹‹é—´çš„äº¤æ¢ï¼›äº¤æ¢é€Ÿåº¦å—æ€»çº¿å¸¦å®½çš„é€Ÿåº¦é™åˆ¶ (æ¯ä¸ªåˆ†ç»„ç©¿è¿‡ä¸¤æ¬¡æ€»çº¿)</p>
<p>ï¼ˆ2ï¼‰æ€»çº¿äº¤æ¢ï¼šè¾“å…¥ç«¯å£é€šè¿‡ä¸€æ¡<strong>å…±äº«æ€»çº¿</strong>å°†åˆ†ç»„ç›´æ¥ä¼ é€åˆ°è¾“å‡ºç«¯å£ï¼Œä¸éœ€è¦é€‰è·¯å¤„ç†å™¨çš„å¹²é¢„;äº¤æ¢å¸¦å®½å—æ€»çº¿é€Ÿç‡é™åˆ¶</p>
<p>ï¼ˆ3ï¼‰äº¤æ¢çŸ©é˜µäº¤æ¢ï¼šåˆ°è¾¾è¾“å…¥ç«¯å£çš„åˆ†ç»„æ²¿<strong>æ°´å¹³æ€»çº¿ç©¿è¡Œ</strong>ï¼Œç›´è‡³ä¸æ‰€å¸Œæœ›çš„<strong>è¾“å‡ºç«¯å£çš„å‚ç›´æ€»çº¿äº¤å‰ç‚¹</strong>ï¼Œè‹¥è¯¥æ¡å‚ç›´æ€»çº¿<strong>ç©ºé—²</strong>ï¼Œåˆ™åˆ†ç»„è¢«ä¼ é€åˆ°è¾“å‡ºç«¯å£ï¼Œå¦åˆ™<strong>é˜»å¡æ’é˜Ÿ</strong>ã€‚</p>
<p><strong>è¾“å‡ºç«¯å£</strong>ï¼š	</p>
<ul>
<li>å–å‡ºå­˜æ”¾åœ¨è¾“å‡ºç«¯å£å†…å­˜ä¸­çš„åˆ†ç»„ï¼Œå¹¶å°†å…¶ä¼ è¾“åˆ°è¾“å‡ºé“¾è·¯ä¸Šï¼›	</li>
<li>å½“äº¤æ¢ç»“æ„å°†åˆ†ç»„äº¤ä»˜ç»™<strong>è¾“å‡ºç«¯å£çš„é€Ÿç‡è¶…è¿‡è¾“å‡ºé“¾è·¯é€Ÿç‡</strong>ï¼Œå°±éœ€è¦æ’é˜Ÿä¸ç¼“å­˜ç®¡ç†åŠŸèƒ½ã€‚å½“è¾“å‡ºç«¯å£çš„ç¼“å†²åŒºæº¢å‡ºæ—¶ï¼Œå°±ä¼šå‡ºç°å»¶æ—¶å’Œä¸¢åŒ…ã€‚</li>
</ul>
<p>6ã€IP æ•°æ®æŠ¥æ ¼å¼ï¼ˆIPv4ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_09-47-01.png"></p>
<p>IPæ•°æ®æŠ¥åˆ†ç‰‡å’Œé‡ç»„</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_09-49-53.png"></p>
<p>7ã€IPåœ°å€</p>
<ul>
<li><p>åˆ†é…ç»™ä¸»æœºæˆ–è·¯ç”±å™¨æ¥å£çš„æ ‡è¯†ç¬¦</p>
<ul>
<li>ä¸»æœº&#x2F;è·¯ç”±å™¨ä¸ç‰©ç†é“¾è·¯ä¹‹é—´çš„è¾¹ç•Œ&#x2F;è¿æ¥</li>
<li>è·¯ç”±å™¨æœ‰å¤šä¸ªæ¥å£ï¼Œä¸»æœºå¯ä»¥æœ‰å¤šä¸ªæ¥å£</li>
</ul>
</li>
<li><p>IPåœ°å€æœ‰ä¸¤ç§ï¼šIPV4å’ŒIPV6</p>
<ul>
<li><p>IPV4ï¼š32ä¸ªäºŒè¿›åˆ¶ä½é•¿ï¼ˆ4å­—èŠ‚ï¼‰ï¼Œå¸¸ç”¨<strong>ç‚¹åˆ†åè¿›åˆ¶</strong>è¡¨ç¤ºï¼›å°†4ä¸ªå­—èŠ‚ä¸­çš„<strong>æ¯ä¸€ä¸ªå­—èŠ‚åˆ†åˆ«ç”¨åè¿›åˆ¶æ•°</strong>æ¥è¡¨ç¤ºï¼Œ4ä¸ªåè¿›åˆ¶æ•°ä¹‹é—´ç”¨ â€œ.â€ åˆ†éš”ã€‚</p>
<p>ä¾‹å¦‚ï¼š223.1.1.1 &#x3D; 11011111 00000001 00000001 00000001</p>
<p>æ ¹æ®ä¸åŒçš„å–å€¼èŒƒå›´ï¼Œæ—©æœŸå°†<strong>IPåœ°å€åˆ†ä¸ºäº”ç±»</strong>ã€‚IPåœ°å€ä¸­å‰5ä½ç”¨äºæ ‡è¯†IPåœ°å€çš„ç±»åˆ«ï¼ŒAç±»åœ°å€çš„ç¬¬ä¸€ä½ä¸ºâ€œ0â€ï¼ˆä¸»æœºå·24ä½ï¼‰ï¼ŒBç±»åœ°å€çš„å‰ä¸¤ä½ä¸ºâ€œ10â€ï¼ˆä¸»æœºå·16ä½ï¼‰ï¼ŒCç±»åœ°å€çš„å‰ä¸‰ä½ä¸ºâ€œ110â€ï¼ˆä¸»æœºå·8ä½ï¼‰ï¼ŒDç±»åœ°å€çš„å‰å››ä½ä¸ºâ€œ1110â€ï¼ŒEç±»åœ°å€çš„å‰äº”ä½ä¸ºâ€œ11110â€ã€‚å…¶ä¸­ï¼ŒAç±»ã€Bç±»ä¸Cç±»åœ°å€ä¸ºåŸºæœ¬çš„IPåœ°å€ã€‚</p>
</li>
<li><p>IPV6ï¼š128ä¸ªäºŒè¿›åˆ¶ä½é•¿ï¼ˆ16å­—èŠ‚ï¼‰å¸¸ç”¨<strong>å†’å·åˆ†éš”</strong>è¡¨ç¤º</p>
</li>
</ul>
</li>
</ul>
<p>8ã€IPåœ°å€ç»“æ„</p>
<ul>
<li><p>IPåœ°å€</p>
<table>
<thead>
<tr>
<th>ç½‘ç»œå·</th>
<th>ä¸»æœºå·</th>
</tr>
</thead>
</table>
<p>ç½‘ç»œå·ï¼šæŒ‡æ˜ä¸»æœºæ‰€åœ¨ç½‘ç»œçš„ç¼–å·ã€‚</p>
<p>ä¸»æœºå·ï¼šä¸»æœºåœ¨ç½‘ç»œä¸­çš„ç¼–å·ã€‚</p>
</li>
<li><p>IPå­ç½‘ï¼ˆsubnetï¼‰</p>
<ul>
<li>åˆ’åˆ†å­ç½‘çš„æ–¹æ³•æ˜¯<strong>ä»ä¸»æœºå·å€Ÿç”¨è‹¥å¹²ä¸ªæ¯”ç‰¹ä½œä¸ºå­ç½‘å·ï¼Œå‰©ä¸‹çš„ä¸»æœºä½ä¸ºä¸»æœºå·</strong>ã€‚</li>
<li>IPåœ°å€å…·æœ‰ç›¸åŒç½‘ç»œå·çš„è®¾å¤‡æ¥å£ </li>
<li><strong>ä¸è·¨è¶Šè·¯ç”±å™¨</strong>ï¼ˆç¬¬ä¸‰åŠä»¥ä¸Šå±‚ç½‘ç»œè®¾å¤‡ï¼‰å¯ä»¥<strong>å½¼æ­¤ç‰©ç†è”é€š</strong>çš„æ¥å£</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_10-03-59.png"></p>
<p>9ã€ç‰¹æ®ŠIPåœ°å€æ®µ</p>
<p>ï¼ˆ1ï¼‰<strong>æœ¬åœ°å›ç¯åœ°å€</strong>ï¼š 127.0.0.1-127.255.255.254ï¼Œç”¨æ¥è¯†åˆ«ä¸»æœºæœ¬èº«çš„åœ°å€ã€‚ä¹Ÿå«åšâ€œlocalhostâ€ï¼Œä¸€èˆ¬ç”¨æ¥æµ‹è¯•ã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>ç§æœ‰åœ°å€</strong>ï¼ˆPrivate addressï¼‰ï¼š10.x.x.x,  172.16.x.x-172.31.x.x,  192.168.x.x ï¼Œå±€åŸŸç½‘æ‰€ä½¿ç”¨çš„åœ°å€æ®µã€‚</p>
<p>ï¼ˆ3ï¼‰<strong>0.0.0.0</strong>ï¼šç”¨æ¥æ ‡è¯†ä¸æ¸…æ¥šçš„ç½‘ç»œå’Œä¸»æœº</p>
<p>ï¼ˆ4ï¼‰<strong>255.255.255.255</strong>ï¼šå¹¿æ’­åœ°å€</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/tsip.png"></p>
<p>åˆ†ç±»çš„ipåœ°å€</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_11-06-44.png"></p>
<p>10ã€äº’è”ç½‘ä¸­çš„IPåœ°å€</p>
<ul>
<li><p><strong>åŒä¸€å±€åŸŸç½‘ä¸Š</strong>çš„ä¸»æœºæˆ–è·¯ç”±å™¨çš„IPåœ°å€ä¸­çš„<strong>ç½‘ç»œå·å¿…é¡»ç›¸åŒ</strong> </p>
</li>
<li><p>äº¤æ¢æœºäº’è¿çš„ç½‘ç»œä»ç„¶æ˜¯ä¸€ä¸ªå±€åŸŸç½‘ï¼Œåªèƒ½æœ‰ä¸€ä¸ªç½‘ç»œå·ã€‚ </p>
</li>
<li><p>è·¯ç”±å™¨æ€»æ˜¯å…·æœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸ŠIPåœ°å€ã€‚ </p>
</li>
<li><p>å½“ä¸¤ä¸ªè·¯ç”±å™¨ç›´æ¥ç›¸è¿æ—¶ï¼Œåœ¨è¿çº¿ä¸¤ç«¯çš„æ¥å£å¤„ï¼Œå¯ä»¥æŒ‡æ˜IPåœ°å€ä¹Ÿå¯ä»¥ä¸æŒ‡æ˜IPåœ°å€ã€‚</p>
</li>
</ul>
<p>11ã€å­ç½‘åˆ’åˆ†</p>
<p>åˆ†ç±»çš„IPåœ°å€çš„å¼±ç‚¹:</p>
<ul>
<li>lPåœ°å€ç©ºé—´çš„åˆ©ç”¨ç‡æœ‰æ—¶å¾ˆä½ã€‚</li>
<li>ä¸¤çº§lPåœ°å€ä¸å¤Ÿçµæ´»ã€‚</li>
</ul>
<p>ç½‘ç»œå·ç›¸åŒçš„IPåœ°å€å±äºåŒä¸€ä¸ªç½‘ç»œã€‚è€Œç½‘ç»œè¿˜å¯ä»¥åˆ’åˆ†ä¸ºè‹¥å¹²å­ç½‘ï¼ˆsubnetï¼‰ã€‚åˆ’åˆ†å­ç½‘çš„æ–¹æ³•æ˜¯<strong>ä»ä¸»æœºå·å€Ÿç”¨è‹¥å¹²ä¸ªæ¯”ç‰¹ä½œä¸ºå­ç½‘å·ï¼Œå‰©ä¸‹çš„ä¸»æœºä½ä¸ºä¸»æœºå·</strong>ã€‚åœ¨åŒä¸€å­ç½‘ä¸­ï¼Œæ•°æ®å¸§ä¸è·¨è¶Šè·¯ç”±å™¨ï¼Œç‰©ç†ä¸Šèƒ½å¤Ÿç›¸äº’åˆ°è¾¾ã€‚</p>
<p>ä¸ºä»€ä¹ˆå­ç½‘å·èƒ½å…¨0æˆ–è€…å…¨1ï¼šå› ä¸ºCIDRç¼–å€<br>ä¸ºä»€ä¹ˆä¸»æœºå·ä¸èƒ½å…¨0æˆ–è€…å…¨1ï¼šå› ä¸ºå…¨0ä»£è¡¨æœ¬ç½‘ç»œï¼Œå…¨1ä»£è¡¨å¹¿æ’­åˆ†ç»„</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_11-36-15.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_11-35-30.png"></p>
<p>12ã€<strong>å­ç½‘æ©ç </strong>ç”¨æ¥ç¡®å®šç½‘ç»œåœ°å€ï¼ˆç½‘ç»œå·+å­ç½‘å·ï¼‰å’Œä¸»æœºåœ°å€çš„é•¿åº¦ã€‚å­ç½‘æ©ç é•¿ä¸º32ä½æ¯”ç‰¹ï¼Œå…¶ä¸­çš„1å¯¹åº”äºIPåœ°å€ä¸­çš„ç½‘ç»œå·å’Œå­ç½‘å·ï¼Œè€Œå­ç½‘æ©ç ä¸­çš„0å¯¹åº”äºä¸»æœºå·ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_10-19-35.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_11-43-27.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_11-49-37.png"></p>
<p>è™½ç„¶ä¸¤ä¸ªå­ç½‘æ©ç å¾—åˆ°çš„ç½‘ç»œåœ°å€ç»“æœä¸€æ ·ï¼Œä½†æ˜¯åè€…çš„ä¸»æœºä½æ›´å¤šï¼Œèƒ½å®¹çº³æ›´å¤šä¸»æœºã€‚</p>
<p>ä¾‹ï¼šæŸä¸»æœºçš„IPä¸º180.80.77.55,å­ç½‘æ©ç ä¸º255.255.252.0,è‹¥è¯¥ä¸»æœºå‘å…¶æ‰€åœ¨å­ç½‘å‘é€å¹¿æ’­åˆ†ç»„,åˆ™ç›®çš„åœ°å€ä¸ºï¼ˆï¼‰</p>
<p>å­ç½‘æ©ç 255.255.252.0ï¼ˆ11111111.11111111.11111100.00000000ï¼‰ï¼Œç½‘ç»œå·å’Œå­ç½‘å·ä¸ºè¿ç»­çš„1ï¼Œé‚£ä¹ˆä¸»æœºä½ä¸ºè¿ç»­çš„0ï¼Œä¹Ÿå°±æ˜¯10ä½ï¼Œç„¶åé¢˜ç›®è¦å‘é€å¹¿æ’­åˆ†ç»„ï¼Œæ‰€ä»¥æ±‚çš„æ˜¯å¹¿æ’­åœ°å€ï¼Œå¹¿æ’­åœ°å€çš„ä¸»æœºä½ä¹Ÿæ˜¯å…¨ä¸º1ï¼Œæ‰€ä»¥ä¸»æœº180.80.77.55æ‰€åœ¨çš„å¹¿æ’­åœ°å€å°±æ˜¯ 180.80.010011ï¼ˆ11.11111111ï¼‰ï¼Œæ‹¬å·é‡Œé¢çš„æ˜¯ä¸»æœºå·ï¼Œä¸»æœºå·å…¨ä¸º1å°±æ˜¯å¹¿æ’­åœ°å€ï¼Œå³180.80.79.255</p>
<p>æœ‰ä¸€ä¸ªCç±»ç½‘æ®µ193.160.80.0ï¼Œè¦å°†ä»–åˆ’åˆ†6ä¸ªå­ç½‘ï¼Œå¦‚ä½•æŒ‡å®šä»–çš„å­ç½‘æ©ç ï¼Ÿæ¯ä¸ªå­ç½‘çš„å­ç½‘å·(åœ°å€)æ˜¯å¤šå°‘ï¼Ÿä¸»æœºå·(åœ°å€)æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>è¦åˆ’åˆ†å…­ä¸ªå­ç½‘ã€‚åˆ™éœ€è¦å€Ÿä¸»æœºä½3ä½ã€‚æ‰€ä»¥å‘¢å­ç½‘æ©ç æ˜¯255.255.255.224.æ‰€ä»¥æ¯ä¸ªå­ç½‘çš„ä¸»æœºæ•°æ˜¯2^5&#x3D;32.æœ‰æ•ˆçš„ä¸»æœºæ•°æ˜¯32-2.å…¨0æ˜¯ç½‘ç»œå·ï¼Œå…¨1æ˜¯å¹¿æ’­åœ°å€ã€‚<br>å­ç½‘1ï¼š192.168.80.33åˆ°192.168.80.62 ç½‘ç»œå·æ˜¯192.168.80.32<br>å­ç½‘2ï¼š192.168.80.65åˆ°192.168.80.94ç½‘ç»œå·æ˜¯192.168.80.64<br>å­ç½‘3ï¼š192.168.80.97åˆ°192.168.80.1276ç½‘ç»œå·æ˜¯192.168.80.96<br>å­ç½‘4ï¼š192.168.80.129åˆ°192.168.80.158ç½‘ç»œå·æ˜¯192.168.80.128<br>å­ç½‘5ï¼š192.168.80.161åˆ°192.168.80.190 ç½‘ç»œå·æ˜¯192.168.80.160<br>å­ç½‘6ï¼š192.168.80.193åˆ°192.168.80.222 ç½‘ç»œå·æ˜¯192.168.80.192</p>
<p>æ³¨æ„ï¼š<strong>å¯¹æŸä¸ªå­ç½‘æ¥è¯´ï¼Œä¸»æœºå·å…¨0çš„åœ°å€ä¸èƒ½ç”¨ï¼Œå®ƒè¢«ç”¨åšè¡¨ç¤ºè¯¥å­ç½‘çš„å­ç½‘å·ï¼›ä¸»æœºå·å…¨1çš„ä¹Ÿä¸èƒ½ç”¨ï¼Œå®ƒç”¨äºæœ¬å­ç½‘çš„å¹¿æ’­ã€‚å› æ­¤æ¯ä¸ªå­ç½‘æ‰€èƒ½å®¹çº³çš„ä¸»æœºæ•°æ˜¯2^N-2ï¼ŒNæ˜¯ä¸»æœºå·ä½æ•°</strong>ã€‚</p>
<p>13ã€å­ç½‘åœ°å€ã€ä¸»æœºåœ°å€èŒƒå›´ã€å¹¿æ’­åœ°å€</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_10-19-56.png"></p>
<p>14ã€æ— åˆ†ç±»åŸŸé—´è·¯ç”±CIDR</p>
<ul>
<li>CIDRæ¶ˆé™¤äº†ä¼ ç»Ÿçš„Aç±»ã€Bç±»å’ŒCç±»åœ°å€çš„æ¦‚å¿µã€‚  </li>
<li>èåˆå­ç½‘åœ°å€ä¸å­ç½‘æ©ç ï¼Œæ–¹ä¾¿å­ç½‘åˆ’åˆ†ã€‚</li>
<li>ä½¿ç”¨æ–œçº¿è®°æ³•ï¼Œåˆç§°ä¸ºCIDRè®°æ³•æ¥åŒºåˆ†<strong>ç½‘ç»œå‰ç¼€å’Œä¸»æœºå·</strong>ï¼Œå³åœ¨IPåœ°å€åé¢åŠ ä¸Šä¸€ä¸ªæ–œçº¿â€œ&#x2F;â€ï¼Œæ–œçº¿åé¢ç”¨ä¸€ä¸ªæ•°å­—æŒ‡å®šç½‘ç»œå‰ç¼€çš„é•¿åº¦ã€‚  </li>
<li>CIDRå°†ç½‘ç»œå‰ç¼€éƒ½ç›¸åŒçš„è¿ç»­çš„IPåœ°å€ç»„æˆâ€œCIDRåœ°å€å—â€ã€‚</li>
</ul>
<p>åœ°å€æ ¼å¼ï¼ša.b.c.d&#x2F;xï¼Œå…¶ä¸­xä¸ºå‰ç¼€é•¿åº¦</p>
<table>
<thead>
<tr>
<th>ç½‘ç»œå‰ç¼€</th>
<th>ä¸»æœºå·</th>
</tr>
</thead>
</table>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_12-46-12.png"></p>
<p>15ã€è·¯ç”±èšåˆï¼ˆroute aggregationï¼‰</p>
<p>ä¸€ä¸ªCIDRåœ°å€å—å¯ä»¥è¡¨ç¤ºåˆ†ç±»IPçš„å¤šä¸ªåˆ†ç±»åœ°å€ï¼Œè¿™ç§åœ°å€çš„èšåˆç§°ä¸ºè·¯ç”±èšåˆï¼Œåˆç§°ä¸º<strong>æ„é€ è¶…ç½‘</strong>ã€‚</p>
<p>æ–¹æ³•ï¼šå°†ç½‘ç»œå‰ç¼€ç¼©çŸ­ï¼ˆæ‰€æœ‰ç½‘ç»œåœ°å€å–äº¤é›†ï¼‰ã€‚</p>
<p>åˆ’åˆ†å­ç½‘æ˜¯å°‘â†’å¤š</p>
<p>æ„æˆè¶…ç½‘æ˜¯å¤šâ†’å°‘</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_13-00-43.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_13-33-10.png"></p>
<p>å¦‚æœR1ï¼ŒR2ï¼ŒR3ï¼Œéƒ½ä¸åŒ¹é…ï¼Œåˆ™é€‰R4ï¼Œè½¬å‘åˆ°é»˜è®¤è·¯ç”±ï¼Œå†è½¬å‘åˆ°å¦å¤–ä¸€ä¸ªè·¯ç”±å™¨</p>
<p>ã€ä¾‹ã€‘æŸå•ä½ä» ISP å¤„è´­ä¹°äº†ä¸€ä¸ª IP åœ°å€å— 113.54.70.0&#x2F;24ã€‚å¦‚æœè¯¥å•ä½æœ‰ 3 ä¸ªéƒ¨é—¨ï¼Œç¬¬ 1 ä¸ª éƒ¨é—¨ 100 å°è®¡ç®—æœºï¼Œç¬¬ 2 ä¸ªå’Œç¬¬ 3 ä¸ªéƒ¨é—¨å„æœ‰ 60 å°è®¡ç®—æœºï¼Œè¯·ä½ ä¸º 3 ä¸ªéƒ¨é—¨åˆ’åˆ†å­ç½‘ï¼Œå¹¶ç»™å‡º å„éƒ¨é—¨çš„ç½‘ç»œå·ã€å­ç½‘æ©ç å’Œä¸»æœºå¯åˆ†é…çš„ IP åœ°å€èŒƒå›´ã€‚</p>
<p>éƒ¨é—¨2å’Œéƒ¨é—¨3å¯å¯¹è°ƒ</p>
<table>
<thead>
<tr>
<th>éƒ¨é—¨</th>
<th>ç½‘ç»œåœ°å€</th>
<th>å­ç½‘æ©ç </th>
<th>æœ€å°å¯åˆ†é…IPåœ°å€</th>
<th>æœ€å¤§å¯åˆ†é…IPåœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>113.54.70.0</td>
<td>255.255.255.128</td>
<td>113.54.70.1</td>
<td>113.54.70.126</td>
</tr>
<tr>
<td>2</td>
<td>113.54.70.128</td>
<td>255.255.255.192</td>
<td>113.54.70.129</td>
<td>113.54.70.190</td>
</tr>
<tr>
<td>3</td>
<td>113.54.70.192</td>
<td>255.255.255.192</td>
<td>113.54.70.193</td>
<td>113.54.70.254</td>
</tr>
</tbody></table>
<p>å…¶ä»–å‚è€ƒç­”æ¡ˆï¼š</p>
<table>
<thead>
<tr>
<th>éƒ¨é—¨</th>
<th>ç½‘ç»œåœ°å€</th>
<th>å­ç½‘æ©ç </th>
<th>æœ€å°å¯åˆ†é…IPåœ°å€</th>
<th>æœ€å¤§å¯åˆ†é…IPåœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>113.54.70.128</td>
<td>255.255.255.128</td>
<td>113.54.70.129</td>
<td>113.54.70.254</td>
</tr>
<tr>
<td>2</td>
<td>113.54.70.0</td>
<td>255.255.255.192</td>
<td>113.54.70.1</td>
<td>113.54.70.62</td>
</tr>
<tr>
<td>3</td>
<td>113.54.70.64</td>
<td>255.255.255.192</td>
<td>113.54.70.65</td>
<td>113.54.70.126</td>
</tr>
</tbody></table>
<p>16.åŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼ˆDHCPï¼‰ä¸è€ƒ</p>
<p>ï¼ˆ1ï¼‰è·å¾—IPåœ°å€ï¼Œè¿˜å¯ä»¥è·å¾—</p>
<ul>
<li>å®¢æˆ·çš„ç¬¬ä¸€è·³è·¯ç”±å™¨çš„åœ°å€ï¼ˆç½‘å…³ï¼‰</li>
<li>DNSæœåŠ¡å™¨çš„IPåœ°å€æˆ–åŸŸå</li>
<li>å­ç½‘æ©ç </li>
</ul>
<p>ï¼ˆ2ï¼‰<strong>DHCPæ˜¯åº”ç”¨å±‚åè®®</strong></p>
<ul>
<li>è¯·æ±‚æŠ¥æ–‡å°è£…åˆ°UDPæ•°æ®æŠ¥ä¸­</li>
<li>IPå¹¿æ’­</li>
<li>é“¾è·¯å±‚å¹¿æ’­ (e.g. ä»¥å¤ªç½‘å¹¿æ’­)</li>
</ul>
<p>ï¼ˆ3ï¼‰æŠ¥æ–‡ç§ç±»</p>
<ul>
<li>ä¸»æœºå¹¿æ’­ â€œDHCP DISCOVERâ€ ï¼ˆå‘ç°æŠ¥æ–‡ï¼‰</li>
<li>DHCP æœåŠ¡å™¨ç”¨ â€œDHCP OFFERâ€ ï¼ˆæä¾›æŠ¥æ–‡ï¼‰è¿›è¡Œå“åº”</li>
<li>ä¸»æœºè¯·æ±‚IPåœ°å€: â€œDHCP REQUESTâ€ ï¼ˆè¯·æ±‚æŠ¥æ–‡ï¼‰</li>
<li>DHCP æœåŠ¡å™¨åˆ†é…IPåœ°å€ â€œDHCP ACK&#x2F;NACKâ€ ï¼ˆç¡®è®¤æŠ¥æ–‡ï¼‰</li>
<li>DHCP ç»ˆæ­¢ç§Ÿç”¨æœŸâ€DHCP RELEASEâ€ï¼ˆç»ˆæ­¢æŠ¥æ–‡ï¼‰</li>
</ul>
<p>ï¼ˆ4ï¼‰ DHCP åè®®çš„å·¥ä½œè¿‡ç¨‹</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_14-16-49.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_14-17-28.png"></p>
<p>17ã€å¦‚ä½•å®ç°ç§æœ‰ç½‘ç»œè®¿é—®äº’è”ç½‘ï¼Ÿï¼ˆNATï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_11-25-03.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_14-17-40.png"></p>
<p>18ã€ICMP (Internet Control Message Protocolï¼Œå› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®®)</p>
<p>ç”¨äºä¸»æœºè·¯ç”±å™¨ä¹‹é—´å½¼æ­¤äº¤æµç½‘ç»œå±‚ä¿¡æ¯</p>
<p>å·®é”™æŠ¥å‘Šï¼ˆ5ç§ï¼‰</p>
<ul>
<li>ç›®çš„ï¼ˆä¸»æœºã€ç½‘ç»œã€åè®®ã€ç«¯å£ï¼‰ä¸å¯è¾¾</li>
<li>æºæŠ‘åˆ¶(Source Quench) :è·¯ç”±å™¨ç¼“å­˜å·²æ»¡</li>
<li>è¶…æ—¶&#x2F;è¶…æœŸ</li>
<li>å‚æ•°é—®é¢˜</li>
<li>é‡å®šå‘:è·¯ç”±å™¨æ”¶åˆ°æ•°æ®æŠ¥ï¼Œä¸åº”è¯¥ç”±è‡ªå·±è½¬å‘ï¼Œåˆ™å‘æºä¸»æœºå‘é€é‡å®šå‘æŠ¥æ–‡ï¼Œé‡æ–°å®šå‘åˆ°å…¶ä»–ç½‘å…³</li>
</ul>
<p>ç½‘ç»œæ¢è¯¢(2ç§ï¼‰</p>
<ul>
<li>å›å£°(Echo)è¯·æ±‚ä¸åº”ç­”æŠ¥æ–‡(Reply)ï¼šping </li>
<li>æ—¶é—´æˆ³è¯·æ±‚ä¸åº”ç­”æŠ¥æ–‡ï¼štracerouter</li>
</ul>
<p>19ã€IPV6</p>
<ul>
<li>åˆå§‹åŠ¨æœºï¼š32-bit IPv4åœ°å€ç©ºé—´å³å°†ç”¨å°½ </li>
<li>å…¶ä»–åŠ¨æœºï¼šå¿«é€Ÿå¤„ç†&#x2F;è½¬å‘æ•°æ®æŠ¥ï¼›æ”¯æŒQoSï¼ˆæœåŠ¡è´¨é‡ï¼‰</li>
<li>IPv6 æ•°æ®æŠ¥æ ¼å¼ ï¼šå›ºå®šé•¿åº¦çš„ 40 å­—èŠ‚åŸºæœ¬é¦–éƒ¨ ï¼›ä¸å…è®¸åˆ†ç‰‡</li>
</ul>
<p>20ã€è·¯ç”±åŸºæœ¬æ¦‚å¿µ</p>
<p><strong>é»˜è®¤è·¯ç”±å™¨</strong>ï¼šä¸ä¸»æœºç›´æ¥ç›¸è¿çš„è·¯ç”±å™¨ï¼Œåˆå«<strong>ç¬¬ä¸€è·³è·¯ç”±å™¨</strong>ã€‚æ¯å½“ä¸»æœºå‘é€ä¸€ä¸ªåˆ†ç»„æ—¶ï¼Œéƒ½å…ˆä¼ é€ç»™å®ƒçš„é»˜è®¤è·¯ç”±å™¨ã€‚		</p>
<ul>
<li>æºè·¯ç”±å™¨ï¼šæºä¸»æœºçš„é»˜è®¤è·¯ç”±å™¨ã€‚		</li>
<li>ç›®çš„è·¯ç”±å™¨ï¼šç›®çš„ä¸»æœºçš„é»˜è®¤è·¯ç”±å™¨ã€‚		</li>
<li>ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºçš„é€‰è·¯å½’ç»“ä¸º<strong>ä»æºè·¯ç”±å™¨åˆ°ç›®çš„è·¯ç”±å™¨çš„é€‰è·¯</strong>ã€‚</li>
</ul>
<p>	</p>
<p><strong>è·¯ç”±ç®—æ³•</strong>ï¼šæ˜¯ç¡®å®šä¸€ä¸ªåˆ†ç»„ä»æºè·¯ç”±å™¨åˆ°ç›®çš„è·¯ç”±å™¨æ‰€ç»è·¯å¾„çš„ç®—æ³•</p>
<p>è·¯ç”±ç®—æ³•çš„å…³é”®ï¼šåœ¨ç»™å®šçš„ä¸€ç»„è·¯ç”±å™¨ä»¥åŠè¿æ¥è·¯ç”±å™¨çš„é“¾è·¯ä¸­ï¼Œæ‰¾åˆ°ä¸€æ¡ä»æºè·¯ç”±å™¨åˆ°ç›®çš„è·¯ç”±å™¨çš„â€œå¥½â€è·¯å¾„ï¼ˆå…·æœ‰â€œæœ€ä½è´¹ç”¨â€çš„è·¯å¾„ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_14-47-15.png"></p>
<p>21ã€é“¾è·¯çŠ¶æ€é€‰è·¯ç®—æ³•LSå’Œè·ç¦»å‘é‡è·¯ç”±ç®—æ³•DVï¼ˆå¿…è€ƒï¼‰</p>
<p><strong>é“¾è·¯çŠ¶æ€é€‰è·¯ç®—æ³•</strong></p>
<p>æœ¯è¯­å®šä¹‰</p>
<ul>
<li><p>c(x,y)ï¼šè¡¨ç¤ºä»èŠ‚ç‚¹xåˆ°yçš„é“¾è·¯è´¹ç”¨;                  </p>
<p>&#x3D; âˆ å¦‚æœä¸æ˜¯ç›´æ¥é‚»å±…</p>
</li>
<li><p>D(v)ï¼šè¡¨ç¤ºä»æºèŠ‚ç‚¹åˆ°ç›®çš„èŠ‚ç‚¹vçš„å½“å‰è·¯å¾„çš„è´¹ç”¨ï¼›</p>
</li>
<li><p>p(v)ï¼šè¡¨ç¤ºä»æºèŠ‚ç‚¹åˆ°ç›®çš„èŠ‚ç‚¹vçš„è·¯å¾„ä¸Šçš„å‰é©±èŠ‚ç‚¹ï¼›</p>
</li>
<li><p>Nâ€™ï¼šè¡¨ç¤ºå·²ç»æ‰¾åˆ°æœ€ä½è´¹ç”¨è·¯å¾„çš„èŠ‚ç‚¹é›†åˆã€‚</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1  åˆå§‹åŒ–: </span><br><span class="line">2    N&#x27; = &#123;u&#125; </span><br><span class="line">3    å¯¹æ‰€æœ‰èŠ‚ç‚¹v </span><br><span class="line">4      if v ä¸´è¿‘ u </span><br><span class="line">5          then D(v) = c(u,v) </span><br><span class="line">6      else D(v) = âˆ </span><br><span class="line">7</span><br><span class="line">8   Loop </span><br><span class="line">9     æ‰¾å‡ºwä¸åœ¨Nâ€™ä¸­ä½¿å¾—D(w)æœ€å° </span><br><span class="line">10    å°†wåŠ å…¥N&#x27; </span><br><span class="line">11    å¯¹äºæ‰€æœ‰vä¸´è¿‘wå¹¶ä¸åœ¨Nâ€™ä¸­ï¼Œæ›´æ–°D(v): </span><br><span class="line">12       D(v) = min( D(v), D(w) + c(w,v) ) </span><br><span class="line">13    /* åˆ°vçš„æ–°è´¹ç”¨æˆ–æ˜¯åˆ°vçš„è€è´¹ç”¨æˆ–åˆ°wåŠ ä¸Šä»wåˆ°vçš„å·²çŸ¥æœ€çŸ­è·¯è´¹ç”¨*/ </span><br><span class="line">15  until æ‰€æœ‰èŠ‚ç‚¹åœ¨ Nâ€™ä¸­ </span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_15-00-59.png"></p>
<table>
<thead>
<tr>
<th>Step</th>
<th>Nâ€™</th>
<th>D(v),p(v)</th>
<th>D(w),p(w)</th>
<th>D(x),p(x)</th>
<th>D(y),p(y)</th>
<th>D(z),p(z)</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>u</td>
<td>2ï¼Œu</td>
<td>5ï¼Œu</td>
<td>1ï¼Œu</td>
<td>âˆ</td>
<td>âˆ</td>
</tr>
<tr>
<td>1</td>
<td>ux</td>
<td>2ï¼Œu</td>
<td>4ï¼Œx</td>
<td></td>
<td>2ï¼Œx</td>
<td>âˆ</td>
</tr>
<tr>
<td>2</td>
<td>uxy</td>
<td>2ï¼Œu</td>
<td>3ï¼Œy</td>
<td></td>
<td></td>
<td>4ï¼Œy</td>
</tr>
<tr>
<td>3</td>
<td>uxyv</td>
<td></td>
<td>3ï¼Œy</td>
<td></td>
<td></td>
<td>4ï¼Œy</td>
</tr>
<tr>
<td>4</td>
<td>uxyvw</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4ï¼Œy</td>
</tr>
<tr>
<td>5</td>
<td>uxyvwz</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ï¼ˆæœ‰ä¸¤ä¸ªæœ€å°å°±éšä¾¿é€‰ä¸€ä¸ªï¼Œæ­¤ç­”æ¡ˆé€‰çš„yï¼‰</p>
<p>æ ¹æ®<strong>ç›®çš„èŠ‚ç‚¹æ‰¾å‡ºé¡ºåºå’Œå…¶è´¹ç”¨ä»¥åŠå‰é©±èŠ‚ç‚¹</strong>ï¼Œå¯ä»¥ç”»å‡ºæºèŠ‚ç‚¹uåˆ°æ‰€æœ‰ç›®çš„èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„æ ‘ã€‚æ ¹æ®å¾—åˆ°çš„æ‰€æœ‰ç›®çš„èŠ‚ç‚¹çš„å®Œæ•´è·¯å¾„ï¼Œæˆ–<strong>æœ€ä½è´¹ç”¨è·¯å¾„æ ‘</strong>ï¼Œå¯ä»¥ç”ŸæˆæºèŠ‚ç‚¹çš„<strong>è½¬å‘è¡¨</strong>ã€‚</p>
<p><strong>è½¬å‘è¡¨</strong>ï¼šå­˜æ”¾ä»æºèŠ‚ç‚¹åˆ°æ¯ä¸ªç›®çš„èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„ä¸Šçš„ä¸‹ä¸€è·³èŠ‚ç‚¹ã€‚å³æŒ‡å‡ºå¯¹äºå‘å¾€æŸä¸ªç›®çš„èŠ‚ç‚¹çš„åˆ†ç»„ï¼Œä»è¯¥èŠ‚ç‚¹å‘å‡ºåçš„<strong>ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</strong>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_15-23-31.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_15-27-37.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_15-28-01.png"></p>
<p><strong>è·ç¦»å‘é‡è·¯ç”±ç®—æ³•</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-03-26.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-02-08.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-03-08.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_17-00-47.png"></p>
<hr>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-40-46.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-38-56.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-40-34.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-39-26.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-40-07.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-42-57.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_16-43-04.png"></p>
<p>22ã€è‡ªæ²»ç³»ç»Ÿé—´(Inter-AS)è·¯ç”±</p>
<p>(1)è½¬å‘è¡¨æ ¹æ®ASå†…å’ŒASé—´é€‰è·¯ç®—æ³•è€Œé…ç½®</p>
<ul>
<li>ASåŸŸå†…çš„é€‰è·¯é¡¹ç”¨äºç›®çš„ç«¯åœ¨åŸŸå†…çš„é€‰è·¯ã€‚</li>
<li>ASåŸŸå†…å’ŒASåŸŸé—´çš„é€‰è·¯é¡¹ç”¨äºç›®çš„ç«¯åœ¨åŸŸå¤–çš„é€‰è·¯</li>
</ul>
<p>(2)åœ¨å¤šä¸ªè‡ªæ²»ç³»ç»Ÿä¸­é€‰æ‹©	</p>
<ul>
<li>çƒ­åœŸè±†é€‰è·¯: æŠŠåˆ†ç»„é€åˆ°ä¸¤ä¸ªè·¯ç”±å™¨ä¸­æœ€è¿‘çš„ä¸€ä¸ª</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_17-39-22.png"></p>
<p>23ã€ OSPF: å¼€æ”¾å¼æœ€çŸ­è·¯å¾„ä¼˜å…ˆ</p>
<ul>
<li>ç”¨é“¾è·¯çŠ¶æ€ç®—æ³• <ul>
<li>åˆ†å‘LS åˆ†ç»„ï¼ˆ OSPFé€šå‘Šï¼‰</li>
<li>æ¯ä¸ªè·¯ç”±å™¨æ„é€ å®Œæ•´çš„ç½‘ç»œï¼ˆASï¼‰æ‹“æ‰‘å›¾</li>
<li>è·¯ç”±å™¨æœ¬åœ°è¿è¡Œ Dijkstraç®—æ³•</li>
</ul>
</li>
<li>æ¯ä¸ªè·¯ç”±å™¨éƒ½å¹¿æ’­OSPFé€šå‘Šï¼ŒOSPFé€šå‘Šé‡Œä¸ºæ¯ä¸ªé‚»å±…è·¯ç”±å™¨è®¾ä¸€ä¸ªè¡¨é¡¹ï¼ˆè®°å½•æ¯ä¸ªé‚»å±…çš„é“¾è·¯ç‰¹å¾å’Œè´¹ç”¨ï¼‰ã€‚</li>
<li>é€šå‘Šä¼šæ•£å¸ƒåˆ°æ•´ä¸ªè‡ªæ²»ç³»ç»Ÿ (é€šè¿‡æ´ªæ³›æ³•) <ul>
<li>OSPFæŠ¥æ–‡ç›´æ¥å°è£…åˆ°IPæ•°æ®æŠ¥ä¸­ (ä¸æ˜¯ TCP æˆ– UDPï¼‰</li>
</ul>
</li>
<li>ä¼˜ç‚¹ï¼š<ul>
<li>å®‰å…¨: æ‰€æœ‰OSPF æ¶ˆæ¯éœ€è¦è®¤è¯ (é˜²æ­¢æ¶æ„å…¥ä¾µ) </li>
<li>å…è®¸å¤šä¸ªç›¸åŒå¼€é”€çš„è·¯å¾„ (åœ¨ RIPä¸­åªæœ‰ä¸€æ¡è·¯å¾„)</li>
<li>å¯¹äºæ¯ä¸ªé“¾è·¯, æœ‰å¤šä¸ªæ¶ˆè´¹å°ºåº¦ç”¨äºä¸åŒçš„æœåŠ¡ç±»å‹TOS (ä¾‹å¦‚åœ¨å°½åŠ›è½¬å‘æ—¶å«æ˜Ÿé“¾è·¯ä»£ä»·è®¾ç½®ä¸º â€œä½â€ ï¼Œè€Œå¯¹å®æ—¶åº”ç”¨è®¾ç½®ä¸ºé«˜)</li>
<li>å•æ’­å’Œå¤šæ’­ç»¼åˆæ”¯æŒ: å¤šæ’­ OSPF (MOSPF) ä½¿ç”¨å’Œ OSPFåŒæ ·çš„é“¾è·¯æ•°æ®åº“</li>
<li>OSPFæ”¯æŒå¯¹å¤§è§„æ¨¡ASåˆ†å±‚</li>
</ul>
</li>
</ul>
<p>24ã€ Internet åŸŸé—´é€‰è·¯: BGP</p>
<ul>
<li>BGP (Border Gateway Protocol)ï¼šäº‹å®ä¸Šçš„æ ‡å‡†åŸŸé—´è·¯ç”±åè®®ï¼Œå°†Internet â€œç²˜åˆâ€ä¸ºä¸€ä¸ªæ•´ä½“çš„å…³é”®</li>
<li>BGP ä¸ºæ¯ä¸ª AS æä¾›äº†ä¸€ç§æ‰‹æ®µ:</li>
<li>eBGPï¼šä»ç›¸é‚»ASè·å–å­ç½‘å¯è¾¾ä¿¡æ¯</li>
<li>iBGPï¼šå‘è¯¥ASå†…éƒ¨çš„æ‰€æœ‰è·¯ç”±å™¨ä¼ æ’­è¿™äº›å­ç½‘çš„å¯è¾¾ä¿¡æ¯</li>
<li>åŸºäºè¯¥å¯è¾¾ä¿¡æ¯å’ŒASç­–ç•¥ï¼Œå†³å®šåˆ°è¾¾å­ç½‘çš„â€œå¥½â€è·¯ç”±</li>
<li>å…è®¸ä¸€ä¸ªå­ç½‘å‘Internetçš„å…¶ä»–éƒ¨åˆ†é€šå‘Šå®ƒçš„å­˜åœ¨ â€œI am hereâ€</li>
<li>è·¯å¾„å±æ€§<ul>
<li>AS-PATH: åŒ…å«äº†å‰ç¼€çš„é€šå‘Šå·²ç»é€šå‘Šè¿‡çš„é‚£äº›AS,å¦‚ AS 67 AS 17 </li>
<li>NEXT-HOP: æŒ‡å‡ºåˆ°è¾¾ä¸‹ä¸€ä¸ªASçš„å…·ä½“ASé—´è¾¹ç•Œè·¯ç”±å™¨ï¼ˆå¯èƒ½å­˜åœ¨å¤šæ¡ä»å½“å‰ASåˆ°è¾¾ä¸‹ä¸€ä¸ªASçš„é“¾è·¯ï¼‰</li>
</ul>
</li>
<li>BGP è·¯ç”±é€‰æ‹©<ul>
<li>å½“ç½‘å…³è·¯ç”±å™¨æ¥æ”¶åˆ°è·¯ç”±é€šå‘Šæ—¶ï¼Œä½¿ç”¨è¾“å…¥ç­–ç•¥æ¥å†³å®šæ¥æ”¶&#x2F;èˆå¼ƒè¯¥é€šå‘Šã€‚e.g., ä»ä¸å°†æµé‡è·¯ç”±åˆ°AS x </li>
<li>è·¯ç”±å™¨å¯èƒ½çŸ¥é“åˆ°ç›¸åŒå‰ç¼€çš„å¤šæ¡è·¯ç”±ï¼Œè·¯ç”±å™¨åŸºäºä»¥ä¸‹å‡†åˆ™é€‰æ‹©ï¼ˆæ’é™¤è§„åˆ™ï¼Œåº”ç”¨æ’é™¤è§„åˆ™ç›´åˆ°æœ‰ä¸€æ¡ç•™ä¸‹ï¼‰<ul>
<li>æœ¬åœ°åå¥½å€¼å±æ€§: å…·æœ‰æœ€é«˜åå¥½å€¼çš„è·¯ç”±è¢«é€‰æ‹©</li>
<li>æœ€çŸ­AS-PATHçš„è·¯ç”±</li>
<li>æœ€é è¿‘ NEXT-HOPè·¯ç”±å™¨çš„è·¯ç”± : çƒ­åœŸè±†è·¯ç”±</li>
<li>å…¶ä»–æ ‡å‡†</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_17-44-53.png"></p>
<p>25ã€SDNçš„æµè¡¨(flow table)ã€æ§åˆ¶å¹³é¢&#x2F;æ•°æ®å¹³é¢ã€openflow</p>
<p>SDNçš„æ ¸å¿ƒæ€æƒ³æ˜¯å»ºç«‹ä¸€ä¸ªé€šç”¨è½¬å‘ä½“ç³»  </p>
<ul>
<li>æ¯ä¸ªäº¤æ¢è®¾å¤‡åŒ…å«ä¸€ä¸ªæµè¡¨(flow table). æµè¡¨ç”±ä¸€ä¸ªé€»è¾‘ä¸Šä¸­å¿ƒåŒ–çš„æ§åˆ¶å™¨ï¼ˆè¿œç¨‹æ§åˆ¶å™¨ï¼‰æ¥è®¡ç®—å’Œåˆ†å‘</li>
<li>é¦–éƒ¨å­—æ®µå€¼ï¼šå…¥åˆ†ç»„ä¸ä¹‹åŒ¹é…ï¼ŒåŒ¹é…ä¸ä¸Šåˆ†ç»„è¢«ä¸¢å¼ƒæˆ–å‘å¾€è¿œç¨‹æ§åˆ¶å™¨ã€‚é¦–éƒ¨å­—æ®µåŒ…æ‹¬é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚é¦–éƒ¨å­—æ®µã€‚</li>
<li>è®¡æ•°å™¨ï¼šåˆ†ç»„ä¸æµè¡¨é¡¹åŒ¹é…æ—¶æ›´æ–°ã€‚åŒ…å«å·²ç»åŒ¹é…åˆ†ç»„æ•°é‡ï¼Œä»¥åŠä¸Šæ¬¡æ›´æ–°ä»¥æ¥çš„æ—¶é—´</li>
<li>åŠ¨ä½œï¼šåˆ†ç»„åŒ¹é…è¡¨é¡¹æ—¶çš„åŠ¨ä½œï¼ˆè½¬å‘ã€ä¸¢å¼ƒã€å¤åˆ¶ã€åˆ†å‘åˆ°å¤šä¸ªç«¯å£ï¼‰</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_17-45-11.png"></p>
<p>SDNä½“ç³»ç»“æ„åŠç‰¹å¾</p>
<p><em>ç‰¹å¾</em></p>
<ul>
<li>åŸºäºæµçš„è½¬å‘ï¼šåŸºäº<strong>é¦–éƒ¨å­—æ®µå€¼</strong>è¿›è¡Œè½¬å‘</li>
<li>æ•°æ®å¹³é¢ä¸æ§åˆ¶å¹³é¢åˆ†ç¦»ï¼šæ•°æ®å¹³é¢ç½‘ç»œäº¤æ¢æœºç»„æˆï¼Œæ§åˆ¶å¹³é¢ç”±æœåŠ¡å™¨å’Œç®¡ç†æµè¡¨è½¯ä»¶æ„æˆã€‚</li>
<li>ç½‘ç»œæ§åˆ¶åŠŸèƒ½ï¼šä½äºæ•°æ®å¹³é¢äº¤æ¢æœºå¤–éƒ¨ï¼ŒåŒ…æ‹¬SDNæ§åˆ¶å™¨å’Œè‹¥å¹²ç½‘ç»œæ§åˆ¶ç¨‹åºã€‚</li>
<li>å¯ç¼–ç¨‹çš„ç½‘ç»œï¼šè°ƒç”¨APIå®šä¹‰å’Œæ§åˆ¶ç½‘ç»œè®¾å¤‡çš„æ•°æ®å¹³é¢ã€‚</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_17-45-36.png"></p>
<p>SDNæ§åˆ¶å™¨çš„ç»„ä»¶</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_17-45-49.png"></p>
<hr>
<p>åœ¨è‹±ç‰¹ç½‘ä¸­ï¼ŒIPæ•°æ®æŠ¥çš„ä¼ è¾“éœ€è¦ç»ç”±æºä¸»æœºå’Œä¸­é€”è·¯ç”±å™¨åˆ°è¾¾ç›®çš„ä¸»æœºï¼Œä¸‹é¢è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼ˆ  D  ï¼‰ã€‚</p>
<p>Aã€æºä¸»æœºå’Œä¸­é€”è·¯ç”±å™¨éƒ½çŸ¥é“IPæ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœºéœ€è¦ç»è¿‡çš„å®Œæ•´è·¯å¾„ã€‚</p>
<p>Bã€æºä¸»æœºçŸ¥é“IPæ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœºéœ€è¦ç»è¿‡çš„å®Œæ•´è·¯å¾„ï¼Œè€Œä¸­é€”è·¯ç”±å™¨ä¸çŸ¥é“ã€‚</p>
<p>Cã€æºä¸»æœºä¸çŸ¥é“IPæ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœºéœ€è¦ç»è¿‡çš„å®Œæ•´è·¯å¾„ï¼Œè€Œä¸­é€”è·¯ç”±å™¨çŸ¥é“ã€‚</p>
<p>Dã€æºä¸»æœºå’Œä¸­é€”è·¯ç”±å™¨éƒ½ä¸çŸ¥é“IPæ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœºéœ€è¦ç»è¿‡çš„å®Œæ•´è·¯å¾„ã€‚</p>
<p>å¯¹äº IP ç½‘ç»œï¼Œæ˜¯é‡‡ç”¨æ•°æ®æŠ¥æ–¹å¼ï¼Œå› æ­¤å¯¹äºæºä¸»æœºå’Œä¸­é€”è·¯ç”±å™¨éƒ½ä¸ä¼šçŸ¥é“æ•°æ®æŠ¥ç»è¿‡çš„å®Œæ•´è·¯å¾„ï¼Œ<strong>è·¯ç”±å™¨ä»…çŸ¥é“åˆ°è¾¾ç›®çš„åœ°å€çš„ä¸‹ä¸€è·³åœ°å€</strong>ï¼Œä¸»æœºä»…çŸ¥é“åˆ°è¾¾æœ¬åœ°ç½‘ç»œçš„è·¯å¾„ï¼Œåˆ°è¾¾å…¶ä»–ç½‘ç»œçš„æ•°æ®æŠ¥å‡è½¬å‘åˆ°ç½‘å…³çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯è·¯ç”±å™¨ï¼Œå› æ­¤æºä¸»æœºå’Œä¸­é€”è·¯ç”±å™¨éƒ½ä¸çŸ¥é“ IP æ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœºéœ€è¦ç»è¿‡çš„å®Œæ•´è·¯å¾„ã€‚</p>
<p>é‡‡ç”¨ï¼ˆ     C    ï¼‰çš„äº¤æ¢ç»“æ„å¯ä»¥å¹¶è¡Œå‘é€å¤šä¸ªåˆ†ç»„ã€‚</p>
<p>Aã€ç»å†…å­˜äº¤æ¢        Bã€ç»æ€»çº¿äº¤æ¢     Cã€ç»äº’è”ç½‘ç»œäº¤æ¢    Dã€ä»¥ä¸Šéƒ½å¯ä»¥ </p>
<p><strong>ç»å†…å­˜äº¤æ¢</strong>. åˆ†ç»„ä»è¾“å…¥ç«¯å£å¤„è¢«å¤åˆ¶åˆ°å¤„ç†å™¨å†…å­˜ä¸­. å¤„ç†å™¨ä»å…¶é¦–éƒ¨ä¸­æå–ç›®çš„åœ°å€, åœ¨è½¬å‘è¡¨ä¸­æ‰¾å‡ºé€‚å½“çš„è¾“å‡ºç«¯å£, å¹¶æŠŠè¯¥åˆ†ç»„å¤åˆ¶åˆ°è¯¥è¾“å‡ºç«¯å£çš„ç¼“å­˜ä¸­.</p>
<p><strong>ç»æ€»çº¿äº¤æ¢</strong>. åˆ†ç»„ä»è¾“å…¥ç«¯å£ç»è¿‡æ€»çº¿å‘é€åˆ°æ‰€æœ‰è¾“å‡ºç«¯å£, åªæœ‰ä¸è¯¥åˆ†ç»„åŒ¹é…çš„è¾“å‡ºç«¯å£ä¼šæŠŠåˆ†ç»„ç•™ä¸‹æ¥.</p>
<p><strong>ç»äº’è”ç½‘ç»œäº¤æ¢</strong>. äº¤æ¢æœºç”±2Næ¡æ€»çº¿ç»„æˆäº’è”ç½‘ç»œ, è¿æ¥Nä¸ªè¾“å…¥å£å’ŒNä¸ªè¾“å‡ºå£. é€šè¿‡æ§åˆ¶ç½‘ç»œä¸­çš„äº¤ç‚¹ä½¿åˆ†ç»„åˆ°è¾¾å¯¹åº”çš„è¾“å‡ºç«¯å£. è¿™ç§çºµæ¨ªå¼ç½‘ç»œèƒ½å¤Ÿå¹¶è¡Œå‘é€å¤šä¸ªåˆ†ç»„.</p>
<p>åœ¨ä¸€ä¸ªé«˜æ€§èƒ½çš„è·¯ç”±å™¨ä¸­ï¼Œè½¬å‘è¡¨çš„å½±å­å‰¯æœ¬ä¿å­˜åœ¨ï¼ˆ    A   ï¼‰ä¸­ï¼Œä»¥é¿å…é›†ä¸­å¼å¤„ç†çš„ç“¶é¢ˆã€‚</p>
<p>Aã€è¾“å…¥ç«¯å£     Bã€è¾“å‡ºç«¯å£     Cã€äº¤æ¢ç»“æ„     Dã€ä»¥ä¸Šéƒ½æœ‰</p>
<p>å‡è®¾ä¸€ä¸ªè·¯ç”±å™¨æœ‰Nä¸ªæœ‰åŒæ ·çº¿è·¯é€Ÿåº¦çš„è¾“å…¥ç«¯å£å’ŒNä¸ªæœ‰åŒæ ·çº¿è·¯é€Ÿåº¦çš„è¾“å‡ºç«¯å£ï¼Œå¹¶ä¸”ï¼Œè¾“å‡ºç«¯å£çš„çº¿è·¯é€Ÿåº¦è‡³å°‘æ˜¯è¾“å…¥ç«¯å£çš„çº¿è·¯é€Ÿåº¦çš„Nå€ã€‚åŒæ—¶å‡å®šäº¤æ¢ç»“æ„çš„é€Ÿç‡è‡³å°‘æ˜¯è¾“å…¥çš„çº¿è·¯é€Ÿåº¦çš„Nå€ï¼Œåˆ™ï¼ˆ  A     ï¼‰ã€‚</p>
<p>Aã€åœ¨è·¯ç”±å™¨ä¸­ä¸ä¼šæœ‰æ’é˜Ÿæ—¶å»¶        </p>
<p> Bã€æ’é˜Ÿä¼šå‘ç”Ÿåœ¨äº¤æ¢ç»“æ„</p>
<p>Cã€æ’é˜Ÿä¼šå‘ç”Ÿåœ¨è¾“å…¥ç«¯å£                </p>
<p>Dã€æ’é˜Ÿä¼šå‘ç”Ÿåœ¨è¾“å‡ºç«¯å£</p>
<p>æç¤ºï¼šè€ƒè™‘æœ€åæƒ…å†µï¼šNä¸ªè¾“å…¥ç«¯å£çš„åˆ†ç»„é€šè¿‡äº¤æ¢ç»“æ„è¢«ä¼ åˆ°åŒä¸€ä¸ªè¾“å‡ºç«¯å£ä¸Šï¼Œè¾“å‡ºç«¯å£åŒæ ·ä¸ä¼šå‘ç”Ÿæ’é˜Ÿã€‚</p>
<p>è·¯ç”±å™¨ä¸­å‘ç°TTLå€¼ä¸º0çš„åˆ†ç»„ï¼Œå°†è¿›è¡Œçš„å¤„ç†æ˜¯ï¼ˆ D   ï¼‰ã€‚</p>
<p>Aã€è¿”å›å‘é€æ–¹   Bã€ç»§ç»­è½¬å‘   Cã€æœ¬åœ°æäº¤  Dã€ä¸¢å¼ƒ </p>
<p><strong>TTL:(Time To Live)ç”Ÿå­˜æ—¶é—´;æŒ‡å®šæ•°æ®åŒ…è¢«è·¯ç”±å™¨ä¸¢å¼ƒä¹‹å‰å…è®¸é€šè¿‡çš„ç½‘æ®µæ•°é‡</strong>ã€‚TTLæ˜¯ç”±å‘é€ä¸»æœºè®¾ç½®çš„,ä»¥é˜²æ­¢æ•°æ®åŒ…ä¸æ–­åœ¨IPäº’è”ç½‘ç»œä¸Šæ°¸ä¸ç»ˆæ­¢åœ°å¾ªç¯ã€‚è½¬å‘IPæ•°æ®åŒ…æ—¶,è¦æ±‚è·¯ç”±å™¨è‡³å°‘å°†TTLå‡å°1ã€‚å½“è·¯ç”±å™¨å‘ç°TTLå€¼ä¸º0çš„åˆ†ç»„æ—¶åˆ™ä¸¢å¼ƒè¯¥åˆ†ç»„ã€‚</p>
<p>å‡å®šä¸»æœºAå‘ä¸»æœºBå‘é€ä¸€ä¸ªå°è£…åœ¨IPæ•°æ®æŠ¥ä¸­çš„TCPæŠ¥æ–‡æ®µï¼Œå½“ä¸»æœºBæ¥æ”¶åˆ°è¯¥æ•°æ®æŠ¥åï¼Œå®ƒçš„ç½‘ç»œå±‚å°†é€šè¿‡ï¼ˆ   D  ï¼‰å­—æ®µçš„ä¿¡æ¯ï¼ŒçŸ¥é“å®ƒåº”è¯¥å°†å°è£…åœ¨è¯¥IPæ•°æ®æŠ¥ä¸­çš„æŠ¥æ–‡æ®µé€’äº¤ç»™è¿ç®—å±‚çš„TCPåè®®ï¼Œè€Œä¸æ˜¯UDPåè®®çš„ã€‚</p>
<p>Aã€ç«¯å£å·    Bã€æœåŠ¡ç±»å‹    Cã€åŒºåˆ†æœåŠ¡     Dã€ä¸Šå±‚åè®®</p>
<p>IPåè®®çš„é¦–éƒ¨ä¸­æœ‰ä¸Šå±‚åè®®å­—æ®µã€‚</p>
<p>IPæ•°æ®æŠ¥ä¸­çš„æ£€éªŒå’Œå­—æ®µæ£€éªŒçš„èŒƒå›´æ˜¯ï¼ˆ B    ï¼‰</p>
<p>Aã€æ•´ä¸ªIPæ•°æ®æŠ¥        </p>
<p>Bã€ä»…æ£€æŸ¥æ•°æ®æŠ¥é¦–éƒ¨   </p>
<p>Cã€ä»…æ£€æŸ¥æ•°æ®éƒ¨åˆ†     </p>
<p>Dã€æ ¹æ®ç½‘ç»œæƒ…å†µçš„ä¸åŒè€Œä¸åŒ</p>
<p>IPæ•°æ®æŠ¥ä¸­çš„æ£€éªŒå’Œå­—æ®µåªæ£€æŸ¥IPæ•°æ®æŠ¥çš„é¦–éƒ¨ï¼Œä¸åŒ…æ‹¬æ•°æ®éƒ¨åˆ†ã€‚åœ¨å‘é€æ–¹ï¼Œå…ˆæŠŠIPæ•°æ®æŠ¥é¦–éƒ¨åˆ’åˆ†ä¸ºè®¸å¤š16ä½å­—çš„åºåˆ—ï¼Œå¹¶æŠŠæ£€éªŒå’Œå­—æ®µç½®ä¸º0ï¼Œç”¨åç ç®—æœ¯è¿ç®—æŠŠæ‰€æœ‰16ä½å­—ç›¸åŠ ï¼Œå°†å¾—åˆ°çš„å’Œçš„åç å†™å…¥æ£€éªŒå’Œå­—æ®µã€‚</p>
<p>ä¸€ä¸ªUDPæ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†é•¿åº¦ä¸º8192å­—èŠ‚ï¼Œé‚£ä¹ˆé€šè¿‡MTUä¸º1500å­—èŠ‚çš„é“¾è·¯æ¥ä¼ è¾“è¯¥UDPæ•°æ®æŠ¥æ—¶ï¼Œæœ€åä¸€ä¸ªåˆ†ç‰‡çš„æ•°æ®é•¿åº¦æ˜¯ï¼ˆ C    ï¼‰ã€‚</p>
<p>Aã€1500   Bã€1480   Cã€800  Dã€600</p>
<p>UDPå¤´éƒ¨é•¿ä¸º8å­—èŠ‚ï¼Œå› æ­¤è¯¥UDPæ•°æ®æŠ¥æ€»é•¿åº¦ä¸º8200å­—èŠ‚ï¼Œä»¥å¤ªç½‘å¸§çš„æœ€å¤§æ•°æ®åŸŸä¸º1500ï¼Œå†å‡å»20çš„IPå¤´éƒ¨ï¼Œå¾—åˆ°æ¯ä¸ªIPåˆ†ç‰‡çš„æœ€å¤§æ•°æ®åŸŸé•¿åº¦åº”è¯¥æ˜¯1480ï¼Œåˆ™æœ€åä¸€ä¸ªæ•°æ®åˆ†ç‰‡çš„é•¿åº¦åº”è¯¥æ˜¯(8200-5Ã—1480&#x3D;)800å­—èŠ‚ã€‚</p>
<p>å‡å®šä¸€ä¸ªåº”ç”¨ç¨‹åºæ¯ç§’ä¸­äº§ç”Ÿ160å­—èŠ‚çš„æ•°æ®å—ï¼Œæ¯ä¸ªæ•°æ®å—å°è£…å…¥ä¸€ä¸ªTCPæŠ¥æ–‡æ®µï¼Œç„¶åå†å°è£…å…¥IPæ•°æ®æŠ¥ä¸­ã€‚æ¯ä¸ªæ•°æ®æŠ¥ä¸­åº”ç”¨å±‚æ•°æ®çš„æ¯”ä¾‹æ˜¯ï¼ˆ   D   ï¼‰ï¼Ÿ   </p>
<p>A.20%     B.40%   C. 60%    D.80%</p>
<p>ä¸€ä¸ªTCPçš„å¤´éƒ¨é•¿åº¦æ˜¯20å­—èŠ‚,ä¸€ä¸ªIPå¤´éƒ¨çš„é•¿åº¦æ˜¯20å­—èŠ‚,å†åŠ ä¸Š160å­—èŠ‚çš„æ•°æ®,ä¸€ä¸ªIPæ•°æ®æŠ¥çš„æ€»é•¿åº¦ä¸º200å­—èŠ‚,å…¶ä¸­åº”ç”¨å±‚æ•°æ®å 80%ã€‚</p>
<p>ä¸‹åˆ—åœ°å€ä¸­ï¼Œå±äºå•æ’­åœ°å€çš„æ˜¯ï¼ˆ B    ï¼‰</p>
<p>Aã€10.3.2.255&#x2F;24          </p>
<p>B.172.31.129.255&#x2F;18</p>
<p>Cã€192.168.24.59&#x2F;30     </p>
<p>Dã€224.100.57.211 </p>
<p>è§£æï¼šé€‰é¡¹Aâ€œ10.3.2.232&#x2F;24â€æ‰€è¡¨ç¤ºçš„å­ç½‘æ©ç æ˜¯(11111111 11111111 11111111 00000000)ï¼Œå…¶è¡¨ç¤ºä¸»æœºéƒ¨åˆ†çš„äºŒè¿›åˆ¶æ•°å½¢å¼æ˜¯11111111ï¼Œç”±æ­¤å¯çŸ¥10.3.2.255&#x2F;24æ˜¯å­ç½‘10.3.2.0çš„ä¸€ä¸ªå¹¿æ’­åœ°å€ã€‚ é€‰é¡¹Bâ€œ172.31.129.255&#x2F;18â€ï¼Œå…¶ä¸­172.31.129.255çš„äºŒè¿›åˆ¶æ•°å½¢å¼æ˜¯(10100100 00011111 1000000 111111111)ï¼Œç”±äºå­ç½‘æ©ç æ˜¯(11111111 11111111 11000000 00000000)ï¼Œå…¶è¡¨ç¤ºä¸»æœºéƒ¨åˆ†çš„äºŒè¿›åˆ¶æ•°å½¢å¼æ˜¯000001 11111111ï¼Œç”±æ­¤å¯çŸ¥172.31.129.255&#x2F;18æ˜¯ä¸€ä¸ªå•æ’­IPåœ°å€ã€‚ é€‰é¡¹Câ€œ192.168.24.59&#x2F;30â€ï¼Œå…¶ä¸­192.168.24.59çš„äºŒè¿›åˆ¶æ•°å½¢å¼æ˜¯(11000000 10101000 00011000 00111011)ï¼Œç”±äºå­ç½‘æ©ç æ˜¯(11111111 11111111 11111111 11111100)ï¼Œå…¶è¡¨ç¤ºä¸»æœºéƒ¨åˆ†çš„äºŒè¿›åˆ¶æ•°å½¢å¼æ˜¯11ï¼Œç”±æ­¤å¯çŸ¥192.168.24.59&#x2F;30å±äº192.168.24.56å­ç½‘çš„å¹¿æ’­åœ°å€ã€‚ é€‰é¡¹Dâ€œ224.100.57.211â€æ˜¯ä¸€ä¸ªç»„æ’­åœ°å€(Dç±»IPåœ°å€ï¼Œå‰å››ä½1110)ã€‚</p>
<p>ISPåˆ†é…ç»™æŸå…¬å¸çš„åœ°å€å—ä¸º199.34.76.64&#x2F;28ï¼Œåˆ™è¯¥å…¬å¸å¯ç”¨äºåˆ†é…çš„åœ°å€æ•°æ˜¯ï¼ˆ B ï¼‰Aã€8    Bã€14  Cã€16   Dã€30</p>
<p>è®¾æœ‰4å°ä¸»æœºâ‘ ã€â‘¡ã€â‘¢å’Œâ‘£ï¼Œéƒ½å¤„åœ¨ä¸€ä¸ªç‰©ç†ç½‘ç»œä¸­ï¼Œå®ƒä»¬çš„IPåœ°å€åˆ†åˆ«ä¸ºï¼š192.155.28.112ã€192.155.28.120ã€192.155.28.135å’Œ192.155.28.202ï¼Œå­ç½‘æ©ç éƒ½æ˜¯255.255.255.224,è¿™4å°ä¸»æœºä¸­å¯ä»¥ç›´æ¥é€šä¿¡çš„ä¸»æœºæœ‰ï¼ˆ  ï¼‰ã€‚  </p>
<p> Aã€â‘ â‘¡â‘¢â‘£    Bã€â‘ â‘¢â‘£  Cã€â‘¡â‘¢â‘£   Dã€â‘ â‘¡ </p>
<p>å­ç½‘æ©ç 255.255.255.224çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º11111111.11111111.11111111.11100000ï¼Œè¿™æ„å‘³ç€ç½‘ç»œå‰ç¼€é•¿åº¦ä¸º27ä½ã€‚å› æ­¤ï¼Œå¯ä»¥è®¡ç®—å‡ºæ¯å°ä¸»æœºæ‰€åœ¨çš„å­ç½‘ï¼š</p>
<ul>
<li>192.155.28.112çš„å­ç½‘åœ°å€ä¸º192.155.28.96</li>
<li>192.155.28.120çš„å­ç½‘åœ°å€ä¸º192.155.28.96</li>
<li>192.155.28.135çš„å­ç½‘åœ°å€ä¸º192.155.28.128</li>
<li>192.155.28.202çš„å­ç½‘åœ°å€ä¸º192.155.28.192</li>
</ul>
<p>æ ¹æ®ä»¥ä¸Šè®¡ç®—ç»“æœï¼Œå¯ä»¥å¾—å‡ºä¸»æœºâ‘ å’Œä¸»æœºâ‘¡åœ¨åŒä¸€ä¸ªå­ç½‘ä¸­ï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡ã€‚è€Œä¸»æœºâ‘¢å’Œä¸»æœºâ‘£åˆ†åˆ«ä½äºä¸åŒçš„å­ç½‘ä¸­ï¼Œå®ƒä»¬ä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ã€‚å› æ­¤ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯Dã€â‘ â‘¡ã€‚</p>
<p>æŸæ¥å£IPåœ°å€ä¸º172.16.7.131&#x2F;26ï¼Œè¯¥IPåœ°å€æ‰€åœ¨ç½‘ç»œçš„å¹¿æ’­åœ°å€æ˜¯ï¼ˆ  C  ï¼‰</p>
<p>Aã€172.16.7.255    Bã€172.16.7.129  Cã€172.16.7.191   Dã€172.16.7.252</p>
<p>å¯¹åˆ†ç‰‡åçš„æ•°æ®æŠ¥è¿›è¡Œé‡ç»„çš„æ˜¯ï¼ˆA ï¼‰ã€‚</p>
<p>A.ç›®çš„ç«¯ç³»ç»Ÿ  B.ä¸­é—´ä¸»æœº C.æ ¸å¿ƒè·¯ç”±å™¨  D.ä¸‹ä¸€è·³è·¯ç”±å™¨</p>
<p>æ•°æ®æŠ¥è¢«åˆ†ç‰‡åï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½å°†è¢«å°½åŠ›è€Œä¸ºåœ°ç‹¬ç«‹ä¼ è¾“åˆ°ç›®çš„åœ°ï¼ŒæœŸé—´å¯èƒ½ä¼šç»è¿‡ä¸åŒçš„è·¯å¾„ï¼Œå› æ­¤ï¼Œåˆ†ç‰‡çš„é‡ç»„å·¥ä½œåªèƒ½åœ¨ç›®çš„ç«¯ç³»ç»Ÿè¿›è¡Œã€‚</p>
<p>è·¯ç”±è¡¨é”™è¯¯å’Œè½¯ä»¶æ•…éšœéƒ½å¯èƒ½ä½¿å¾—ç½‘ç»œä¸­å½¢æˆæ•°æ®ä¼ è¾“ç¯è·¯ï¼Œè§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•æ˜¯ï¼ˆCï¼‰A.æŠ¥æ–‡åˆ†ç‰‡   B.å¢åŠ æ ¡éªŒå’Œ  C.è®¾å®šå¯¿å‘½   D.å¢åŠ é€‰é¡¹å­—æ®µ</p>
<p>è§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•æ˜¯è®¾å®šå¯¿å‘½ï¼ˆTTLï¼‰å­—æ®µã€‚TTLæ˜¯IPæ•°æ®åŒ…ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œå®ƒæŒ‡å®šäº†æ•°æ®åŒ…å¯ä»¥ç»è¿‡çš„æœ€å¤§è·¯ç”±å™¨æ•°ã€‚å½“æ•°æ®åŒ…åˆ°è¾¾ä¸€ä¸ªè·¯ç”±å™¨æ—¶ï¼Œè¯¥è·¯ç”±å™¨ä¼šå°†TTLå‡1ã€‚å¦‚æœTTLå‡ä¸º0ï¼Œåˆ™è¯¥æ•°æ®åŒ…è¢«ä¸¢å¼ƒã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ•°æ®åŒ…ä¸ä¼šåœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯ã€‚</p>
<p>è·¯ç”±å™¨ä¸­è®¡ç®—è·¯ç”±ä¿¡æ¯çš„æ˜¯ï¼ˆD ï¼‰</p>
<p>A.è¾“å…¥é˜Ÿåˆ—       B.è¾“å‡ºé˜Ÿåˆ—     C.äº¤æ¢ç»“æ„    D.è·¯ç”±é€‰æ‹©å¤„ç†æœº</p>
<p>è·¯ç”±é€‰æ‹©å¤„ç†æœºçš„ä»»åŠ¡æ˜¯æ ¹æ®æ‰€é€‰å®šçš„è·¯ç”±é€‰æ‹©åè®®æ„é€ å‡ºè·¯ç”±è¡¨ï¼ŒåŒæ—¶ç»å¸¸æˆ–å®šæœŸåœ°å’Œç›¸é‚»è·¯ç”±å™¨äº¤æ¢è·¯ç”±ä¿¡æ¯è€Œä¸æ–­åœ°æ›´æ–°å’Œç»´æŠ¤è·¯ç”±è¡¨ã€‚</p>
<p>åœ¨è™šç”µè·¯ç½‘ç»œä¸­ï¼Œåˆ†ç»„äº¤æ¢æ¶‰åŠè™šç”µè·¯çš„å»ºç«‹ï¼Œæ¯ä¸ªåˆ†ç»„äº¤æ¢çŸ¥é“ç»è¿‡å®ƒçš„VCå·ã€‚ï¼ˆâˆšï¼‰</p>
<blockquote>
<p><strong>ä¸€æ¡è™šç”µè·¯(VC)çš„ç»„æˆå¦‚ä¸‹:</strong></p>
<p><strong>â‘ æºå’Œç›®çš„ä¸»æœºä¹‹é—´çš„è·¯å¾„(å³ä¸€ç³»åˆ—é“¾è·¯å’Œè·¯ç”±å™¨);</strong></p>
<p><strong>â‘¡VC å·ï¼Œæ²¿ç€è¯¥è·¯å¾„çš„æ¯æ®µé“¾è·¯ä¸€ä¸ªå·ç ;</strong></p>
<p><strong>â‘¢æ²¿ç€è¯¥è·¯å¾„çš„æ¯å°è·¯ç”±å™¨ä¸­çš„è½¬å‘è¡¨è¡¨é¡¹ã€‚</strong></p>
<p>å±äºä¸€æ¡è™šç”µè·¯çš„åˆ†ç»„å°†åœ¨å®ƒçš„é¦–éƒ¨æºå¸¦ä¸€ä¸ª VC å·ã€‚å› ä¸ºä¸€æ¡è™šç”µè·¯åœ¨æ¯æ¡é“¾è·¯ä¸Šå¯èƒ½å…·æœ‰ä¸åŒçš„VCå·ï¼Œæ‰€ä»¥æ¯å°ä¸­é—´è·¯ç”±å™¨å¿…é¡»ç”¨ä¸€ä¸ªæ–°çš„VCå·æ›¿ä»£æ¯ä¸ªä¼ è¾“åˆ†ç»„çš„VCå·ã€‚ è¿™ä¸ªæ–°çš„ VC å·ä»è½¬å‘è¡¨ä¸­è·å¾—ã€‚</p>
</blockquote>
<p>åœ¨æ•°æ®æŠ¥ç½‘ç»œä¸­ï¼Œæ¯ä¸ªåˆ†ç»„æºå¸¦æœ‰ç›®çš„åœ°ä¸»æœºçš„åœ°å€ã€‚ï¼ˆâˆšï¼‰</p>
<p>åœ¨åŒä¸€ä¸ªIPç½‘ç»œä¸­ï¼Œæ¯å°ä¸»æœºçš„IPåœ°å€çš„ç½‘ç»œéƒ¨åˆ†éƒ½æ˜¯ç›¸åŒçš„ã€‚ï¼ˆâˆšï¼‰</p>
<p>å…³äºIPæä¾›çš„æœåŠ¡ï¼Œä¸‹åˆ—è¯´æ³•ä¸­æ­£ç¡®çš„æ˜¯ï¼ˆCï¼‰</p>
<p>A.IPæä¾›å¯é çš„æ•°æ®æŠ¥ä¼ é€æœåŠ¡ï¼Œå› æ­¤æ•°æ®æŠ¥ä¼ é€å¯ä»¥å—åˆ°ä¿éšœ</p>
<p>B.IPæä¾›ä¸å¯é çš„æ•°æ®æŠ¥ä¼ é€æœåŠ¡ï¼Œå› æ­¤å®ƒå¯ä»¥éšæ„ä¸¢å¼ƒæ•°æ®æŠ¥</p>
<p>C.IPæä¾›ä¸å¯é çš„æ•°æ®æŠ¥ä¼ é€æœåŠ¡ï¼Œå› æ­¤æ•°æ®æŠ¥ä¼ é€ä¸èƒ½å—åˆ°ä¿éšœ</p>
<p>D.IPæä¾›å¯é çš„æ•°æ®ä¼ é€æœåŠ¡ï¼Œå› æ­¤å®ƒä¸èƒ½éšæ„ä¸¢å¼ƒæŠ¥æ–‡</p>
<p>â€åœ¨ä»¥ä¸‹å‡ ä¸ªIPåœ°å€ä¸­ï¼Œï¼ˆCï¼‰æ˜¯ä¸€ä¸ªå†…éƒ¨IPåœ°å€â€</p>
<p>A.202.13.0.1</p>
<p>B.202.113.0.1</p>
<p>C.192.168.0.1</p>
<p>D.1.1.0.1</p>
<p>æŠŠç½‘ç»œ192.134.11.0åˆ’åˆ†ä¸ºå¤šä¸ªå­ç½‘ï¼ˆå­ç½‘æ©ç æ˜¯255.255.255.128ï¼‰ï¼Œåˆ™å…¨éƒ¨çš„å­ç½‘ä¸­å¯ç”¨çš„ä¸»æœºåœ°å€æ€»æ•°æ˜¯ï¼ˆBï¼‰</p>
<p>A.128	B.252	C.12	D.254</p>
<p>cç±»åœ°å€ï¼Œç”³è¯·äº†ä¸€ä½æ¥åˆ’åˆ†å­ç½‘ï¼Œæ¯ä¸ªå­ç½‘2^7-2&#x3D;126ä¸ªä¸»æœºåœ°å€</p>
<p>ä¸ºäº†è§£å†³IPåœ°å€è€—å°½çš„é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹çš„ä¸€äº›æªæ–½ï¼Œå…¶ä¸­æ²»æœ¬çš„æ˜¯ï¼ˆDï¼‰</p>
<p>A.é‡‡ç”¨æ— ç±»åˆ«ç¼–å€CIDR</p>
<p>B.é‡‡ç”¨ç½‘ç»œåœ°å€è½¬æ¢NAT</p>
<p>C.åˆ’åˆ†å­ç½‘</p>
<p>D.é‡‡ç”¨IPv6</p>
<p>ä¸‹åˆ—å±äºåŸŸé—´è·¯ç”±åè®®çš„æ˜¯ï¼ˆï¼‰</p>
<p>â€A.RIP	B.BGP	C.IP	D.OSPF</p>
<p>RIPå’ŒOSPFæ˜¯åŸŸå†…è·¯ç”±é€‰æ‹©åè®®ï¼Œè€ŒBGPæ˜¯åŸŸé—´è·¯ç”±é€‰æ‹©åè®®ï¼Œå…¶ç€çœ¼ç‚¹ä¸åœ¨äºå‘ç°å’Œè®¡ç®—è·¯ç”±ï¼Œè€Œåœ¨äºæ§åˆ¶è·¯ç”±çš„ä¼ æ’­å’Œé€‰æ‹©æœ€ä½³è·¯ç”±ã€‚</p>
<p>IPv6ä¸å…·æœ‰çš„ç‰¹æ€§æ˜¯ï¼ˆDï¼‰</p>
<p>â€A.å…·æœ‰ä¼˜å…ˆçº§æ ‡è¯†</p>
<p>B.å›ºå®šçš„é¦–éƒ¨é•¿åº¦</p>
<p>C.æ›´å¤§çš„IPåœ°å€ç©ºé—´</p>
<p>D.å¯ä»¥è¿›è¡Œåˆ†ç‰‡</p>
<p>è€ƒè™‘å¦‚å›¾1ç¤ºçš„ç½‘ç»œã€‚</p>
<p>â€Œa.å‡å®šç½‘ç»œæ˜¯ä¸€ä¸ªæ•°æ®æŠ¥ç½‘ç»œã€‚æ˜¾ç¤ºè·¯ç”±å™¨Aä¸­çš„è½¬å‘è¡¨ï¼Œå…¶ä¸­æ‰€æœ‰æŒ‡å‘ä¸»æœºH3çš„æµé‡é€šè¿‡æ¥å£3è½¬å‘ã€‚</p>
<p>â€Œb.å‡å®šç½‘ç»œæ˜¯ä¸€ä¸ªæ•°æ®æŠ¥ç½‘ç»œã€‚ä½ èƒ½å†™å‡ºè·¯ç”±å™¨Aä¸­çš„è½¬å‘è¡¨å—?å…¶ä¸­æ‰€æœ‰ä»H1æŒ‡å‘ä¸»æœºH3çš„æµé‡é€šè¿‡æ¥å£3è½¬å‘ï¼Œè€Œæ‰€æœ‰ä»H2æŒ‡å‘ä¸»æœºH3çš„æµé‡é€šè¿‡æ¥å£4è½¬å‘ã€‚(æç¤ºï¼šè¿™æ˜¯ä¸€ä¸ªæŠ€å·§é—®é¢˜ã€‚)</p>
<p>â€Œc.ç°åœ¨å‡å®šç½‘ç»œæ˜¯è™šç”µè·¯ç½‘ç»œï¼Œåœ¨H1å’ŒH3ä¹‹é—´æœ‰ä¸€ä¸ªè¿›è¡Œä¸­çš„å‘¼å«ï¼ŒH2å’ŒH3ä¹‹é—´æœ‰å¦ä¸€ä¸ªè¿›è¡Œä¸­çš„å‘¼å«ã€‚å†™å‡ºè·¯ç”±å™¨Aä¸­çš„è½¬å‘è¡¨ï¼Œå…¶ä¸­æ‰€æœ‰ä»H1æŒ‡å‘ä¸»æœºH3çš„æµé‡é€šè¿‡æ¥å£3è½¬å‘ï¼Œè€Œæ‰€æœ‰H2æŒ‡å‘ä¸»æœºH3çš„æµé‡é€šè¿‡æ¥å£4è½¬å‘ã€‚</p>
<p>â€Œd.å‡è®¾åœºæ™¯ä¸(c)ä¸­ç›¸åŒï¼Œå†™å‡ºåœ¨ç»“ç‚¹Bã€Cå’ŒDä¸­çš„è½¬å‘è¡¨ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_19-51-24.png"></p>
<p>aï¼‰é€šè¿‡æ¥å£3è½¬å‘å‘é€åˆ°ä¸»æœºH3çš„æ•°æ®ï¼Œè·¯ç”±å™¨Açš„è½¬å‘è¡¨ä¸º: </p>
<table>
<thead>
<tr>
<th>ç›®çš„åœ°å€</th>
<th>è¾“å‡ºæ¥å£</th>
</tr>
</thead>
<tbody><tr>
<td>H3</td>
<td>3</td>
</tr>
</tbody></table>
<p> b) åœ¨æ•°æ®æŠ¥ç½‘ç»œä¸­ï¼Œè·¯ç”±å™¨çš„è½¬å‘è¡¨æ˜¯æ ¹æ®ç›®çš„åœ°å€æ¥è½¬å‘åˆ†ç»„çš„ï¼Œè€Œä¸æ˜¯æ ¹æ®æºåœ°å€ã€‚å› æ­¤ï¼Œæ— æ³•ä»…æ ¹æ®æºåœ°å€æ¥ç¡®å®šåˆ†ç»„çš„è½¬å‘æ¥å£ã€‚æ‰€ä»¥ï¼Œæ— æ³•å†™å‡ºè·¯ç”±å™¨Aä¸­çš„è½¬å‘è¡¨ï¼Œä½¿å¾—æ‰€æœ‰ä»H1æŒ‡å‘ä¸»æœºH3çš„æµé‡é€šè¿‡æ¥å£3è½¬å‘ï¼Œè€Œæ‰€æœ‰ä»H2æŒ‡å‘ä¸»æœºH3çš„æµé‡é€šè¿‡æ¥å£4è½¬å‘ã€‚</p>
<p>c) ä¸€ç§å¯èƒ½çš„é…ç½®ä¸º: </p>
<table>
<thead>
<tr>
<th>æ¥å…¥ç«¯å£</th>
<th>è¿›å…¥çš„VCå·</th>
<th>è¾“å‡ºç«¯å£</th>
<th>è¾“å‡ºVCå·</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>12</td>
<td>3</td>
<td>22</td>
</tr>
<tr>
<td>2</td>
<td>63</td>
<td>4</td>
<td>18</td>
</tr>
</tbody></table>
<p>d)ä¸€ç§å¯èƒ½çš„é…ç½®ä¸º:</p>
<p>è·¯ç”±å™¨B:</p>
<table>
<thead>
<tr>
<th>æ¥å…¥ç«¯å£</th>
<th>è¿›å…¥çš„VCå·</th>
<th>è¾“å‡ºç«¯å£</th>
<th>è¾“å‡ºVCå·</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>22</td>
<td>2</td>
<td>24</td>
</tr>
</tbody></table>
<p>è·¯ç”±å™¨C:</p>
<table>
<thead>
<tr>
<th>æ¥å…¥ç«¯å£</th>
<th>è¿›å…¥çš„VCå·</th>
<th>è¾“å‡ºç«¯å£</th>
<th>è¾“å‡ºVCå·</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>18</td>
<td>2</td>
<td>50</td>
</tr>
</tbody></table>
<p>è·¯ç”±å™¨D:</p>
<table>
<thead>
<tr>
<th>æ¥å…¥ç«¯å£</th>
<th>è¿›å…¥çš„VCå·</th>
<th>è¾“å‡ºç«¯å£</th>
<th>è¾“å‡ºVCå·</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>24</td>
<td>3</td>
<td>70</td>
</tr>
<tr>
<td>2</td>
<td>50</td>
<td>3</td>
<td>76</td>
</tr>
</tbody></table>
<p>è€ƒè™‘ä½¿ç”¨8æ¯”ç‰¹ä¸»æœºåœ°å€çš„æŸæ•°æ®æŠ¥ç½‘ç»œã€‚å‡å®šä¸€å°è·¯ç”±å™¨ä½¿ç”¨æœ€é•¿å‰ç¼€åŒ¹é…å¹¶å…·æœ‰å¦‚ä¸‹è¡¨æ‰€ç¤ºçš„è½¬å‘è¡¨ï¼Œå¯¹è¿™4ä¸ªæ¥å£ä¸­çš„æ¯ä¸ªï¼Œç»™å‡ºå“åº”çš„ç›®çš„ä¸»æœºåœ°å€çš„èŒƒå›´å’Œåœ¨è¯¥èŒƒå›´ä¸­çš„åœ°å€æ•°é‡ã€‚</p>
<table>
<thead>
<tr>
<th>Prefix Match</th>
<th>Interface</th>
</tr>
</thead>
<tbody><tr>
<td>00</td>
<td>0</td>
</tr>
<tr>
<td>010</td>
<td>1</td>
</tr>
<tr>
<td>011</td>
<td>2</td>
</tr>
<tr>
<td>10</td>
<td>2</td>
</tr>
<tr>
<td>11</td>
<td>3</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>ç›®çš„ä¸»æœºåœ°å€èŒƒå›´</th>
<th>é“¾è·¯æ¥å£</th>
</tr>
</thead>
<tbody><tr>
<td>00000000-00111111</td>
<td>0</td>
</tr>
<tr>
<td>01000000-01011111</td>
<td>1</td>
</tr>
<tr>
<td>01100000-01111111</td>
<td>2</td>
</tr>
<tr>
<td>10000000-10111111</td>
<td>2</td>
</tr>
<tr>
<td>11000000-11111111</td>
<td>3</td>
</tr>
</tbody></table>
<p>å¯¹äºæ¥å£0çš„åœ°å€æ•°é‡ä¸º: 2^6&#x3D;64ã€‚</p>
<p>å¯¹äºæ¥å£1çš„åœ°å€æ•°é‡ä¸º: 2^5&#x3D;32ã€‚</p>
<p>å¯¹äºæ¥å£2çš„åœ°å€æ•°é‡ä¸º: 2^6+2^5&#x3D;64+32&#x3D;96</p>
<p>å¯¹äºæ¥å£3çš„åœ°å€æ•°é‡ä¸º: 2^5&#x3D;32ã€‚</p>
<p>åŸºäºDijkstraç®—æ³•è®¡ç®—è·¯ç”±å™¨Açš„ç®—æ³•è¡¨ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-23_20-11-51.png"></p>
<table>
<thead>
<tr>
<th>Step</th>
<th>Nâ€™</th>
<th>D(B),p(B)</th>
<th>D(C),p(C)</th>
<th>D(D),p(D)</th>
<th>D(E),p(E)</th>
<th>D(F),p(F)</th>
<th>D(G),p(G)</th>
<th>D(H),p(H)</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>A</td>
<td>4,A</td>
<td>âˆ</td>
<td>âˆ</td>
<td>1,A</td>
<td>3,A</td>
<td>âˆ</td>
<td>âˆ</td>
</tr>
<tr>
<td>1</td>
<td>AE</td>
<td>4,A</td>
<td>âˆ</td>
<td>âˆ</td>
<td></td>
<td>3,A</td>
<td>âˆ</td>
<td>âˆ</td>
</tr>
<tr>
<td>2</td>
<td>AEF</td>
<td>4,A</td>
<td>âˆ</td>
<td>8,F</td>
<td></td>
<td></td>
<td>6,F</td>
<td>âˆ</td>
</tr>
<tr>
<td>3</td>
<td>AEFB</td>
<td></td>
<td>7,B</td>
<td>8,F</td>
<td></td>
<td></td>
<td>5,B</td>
<td>âˆ</td>
</tr>
<tr>
<td>4</td>
<td>AEFBG</td>
<td></td>
<td>6,G</td>
<td>8,F</td>
<td></td>
<td></td>
<td></td>
<td>7,G</td>
</tr>
<tr>
<td>5</td>
<td>AEFBGC</td>
<td></td>
<td></td>
<td>8,F</td>
<td></td>
<td></td>
<td></td>
<td>7,G</td>
</tr>
<tr>
<td>6</td>
<td>AEFBGCH</td>
<td></td>
<td></td>
<td>8,F</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>AEFBGCHD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>NATè¿èƒŒäº†è®¡ç®—æœºç½‘ç»œåˆ†å±‚æ¨¡å‹çš„æ€æƒ³, ä¼ªé¦–éƒ¨è¯´æ˜TCPã€IPåè®®æ²¡æœ‰ä¸¥æ ¼åˆ†å±‚ã€‚ ï¼ˆ  âˆš     ï¼‰</p>
</blockquote>
<p>NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰æ˜¯ä¸€ç§åœ¨IPå±‚å¯¹IPåœ°å€è¿›è¡Œè½¬æ¢çš„æŠ€æœ¯ï¼Œå®ƒå…è®¸ç§æœ‰ç½‘ç»œä¸­çš„ä¸»æœºä½¿ç”¨ç§æœ‰IPåœ°å€ä¸å…¬ç½‘ä¸Šçš„ä¸»æœºé€šä¿¡ã€‚ç„¶è€Œï¼ŒNATéœ€è¦åœ¨IPå±‚å¯¹IPåœ°å€è¿›è¡Œè½¬æ¢ï¼ŒåŒæ—¶è¿˜éœ€è¦åœ¨ä¼ è¾“å±‚å¯¹ä¼ è¾“å±‚åè®®ï¼ˆå¦‚TCPå’ŒUDPï¼‰çš„ç«¯å£å·è¿›è¡Œè½¬æ¢ã€‚è¿™æ„å‘³ç€NATéœ€è¦åŒæ—¶å¤„ç†IPå±‚å’Œä¼ è¾“å±‚çš„ä¿¡æ¯ï¼Œä»è€Œè¿èƒŒäº†è®¡ç®—æœºç½‘ç»œåˆ†å±‚æ¨¡å‹çš„æ€æƒ³ã€‚</p>
<p>ä¼ªé¦–éƒ¨æ˜¯TCPå’ŒUDPæ ¡éªŒå’Œè®¡ç®—ä¸­ä½¿ç”¨çš„ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚å®ƒåŒ…å«äº†ä¸€äº›æ¥è‡ªIPå±‚çš„ä¿¡æ¯ï¼Œå¦‚æºIPåœ°å€å’Œç›®çš„IPåœ°å€ã€‚è¿™æ„å‘³ç€TCPå’ŒUDPåè®®éœ€è¦è®¿é—®IPå±‚çš„ä¿¡æ¯æ¥è®¡ç®—æ ¡éªŒå’Œï¼Œè¯´æ˜TCPå’ŒIPåè®®ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼åˆ†å±‚ã€‚</p>
<blockquote>
<p>ICMP åè®®ä¸å…·å¤‡çš„åŠŸèƒ½æ˜¯ï¼ˆD ï¼‰</p>
<p>A.å‘æºä¸»æœºå‘é€ç½‘ç»œä¸å¯è¾¾æŠ¥æ–‡   </p>
<p>B.å‘è·¯ç”±å™¨å‘é€å›é€è¯·æ±‚æŠ¥æ–‡</p>
<p>C.è¿›è¡Œæ—¶é—´æˆ³è¯·æ±‚   </p>
<p>D.è·å–ä¸»æœº IP åœ°å€</p>
</blockquote>
<p>ICMP åè®®ä¸­åŒ…æ‹¬å·®é”™æŠ¥æ–‡å’Œè¯¢é—®æŠ¥æ–‡ç­‰å¤šç§æŠ¥æ–‡ï¼ŒABC ä¸‰é¡¹ï¼Œæè¿°çš„æ˜¯ ICMP æŠ¥æ–‡ã€‚D é¡¹ï¼Œä¸­è·å–ä¸»æœº IP åœ°å€æ˜¯é‡‡ç”¨DHCP åè®®ã€‚</p>
<blockquote>
<p>ICMPå’ŒDHCP åœ¨ TCPï¼IP åè®®æ—ä¸­å±äºï¼ˆ ï¼‰åè®®ã€‚</p>
<p>A.ç½‘ç»œå±‚ã€åº”ç”¨å±‚   B.ç½‘ç»œå±‚ã€ç½‘ç»œå±‚  Cã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚   Dã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚</p>
</blockquote>
<p>ICMPæ˜¯ä¸€ç§ç½‘ç»œå±‚åè®®ï¼Œå®ƒç”¨äºåœ¨IPä¸»æœºå’Œè·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ï¼Œä»¥å¸®åŠ©è¯Šæ–­ç½‘ç»œä¸­çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå½“è·¯ç”±å™¨æ— æ³•å°†åˆ†ç»„è½¬å‘åˆ°ç›®çš„åœ°æ—¶ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ICMPå‘æºä¸»æœºå‘é€â€œç›®çš„åœ°ä¸å¯è¾¾â€æ¶ˆæ¯ã€‚</p>
<p>DHCPæ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå®ƒç”¨äºåŠ¨æ€åˆ†é…IPåœ°å€å’Œå…¶ä»–ç½‘ç»œé…ç½®ä¿¡æ¯ã€‚å½“è®¡ç®—æœºè¿æ¥åˆ°ç½‘ç»œæ—¶ï¼Œå®ƒå¯ä»¥ä½¿ç”¨DHCPä»DHCPæœåŠ¡å™¨è·å–ä¸€ä¸ªIPåœ°å€å’Œå…¶ä»–ç›¸å…³ä¿¡æ¯ï¼Œå¦‚å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³å’ŒDNSæœåŠ¡å™¨åœ°å€ã€‚</p>
<blockquote>
<p>ICMPåè®®æ˜¯ï¼ˆCï¼‰ï¼š</p>
<p>Aã€è¿è¡ŒäºTCPä¹‹ä¸Š  Bã€è¿è¡ŒäºUDPä¹‹ä¸Š  Cã€ç›´æ¥è¿è¡ŒäºIPä¹‹ä¸Š  Dã€ä»¥ä¸Šéƒ½ä¸æ­£ç¡®</p>
</blockquote>
<blockquote>
<p>å‡å®šä¸€ä¸ªIPV6çš„è·¯ç”±å™¨å¸Œæœ›å‘é€ä¸€ä¸ªæ•°æ®æŠ¥åˆ°å¦ä¸€ä¸ªIPV6è·¯ç”±å™¨ï¼Œä½†ä»–ä»¬ä¹‹é—´çš„è¿æ¥æ˜¯ç”±ä¸€äº›IPV4çš„è·¯ç”±å™¨æ„æˆã€‚å¦‚æœè¿™ä¸¤å°è·¯ç”±å™¨ä¹‹é—´ä½¿ç”¨éš§é“æŠ€æœ¯ï¼Œåˆ™ï¼ˆBï¼‰</p>
<p>Aã€å‘é€IPV6çš„è·¯ç”±å™¨ä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªIPV6åˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½ä¸ä¼šå¤§äºIPV4çš„æœ€å¤§æ•°æ®æŠ¥å¤§å°</p>
<p>Bã€å‘é€IPV6çš„è·¯ç”±å™¨åˆ›å»ºä¸€ä¸ªIPV6çš„æ•°æ®æŠ¥ï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªIPV4æ•°æ®æŠ¥çš„æ•°æ®å­—æ®µä¸­</p>
<p>Cã€å‘é€IPV6çš„è·¯ç”±å™¨åˆ›å»ºä¸€ä¸ªIPV4çš„æ•°æ®æŠ¥ï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªIPV6æ•°æ®æŠ¥çš„æ•°æ®å­—æ®µä¸­</p>
<p>Dã€ä»¥ä¸Šç­”æ¡ˆéƒ½ä¸æ­£ç¡®</p>
</blockquote>
<p>å½“ä¸¤ä¸ªIPv6è·¯ç”±å™¨ä¹‹é—´çš„è¿æ¥ç”±ä¸€äº›IPv4è·¯ç”±å™¨æ„æˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨éš§é“æŠ€æœ¯æ¥ä¼ è¾“IPv6æ•°æ®æŠ¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‘é€IPv6çš„è·¯ç”±å™¨ä¼šåˆ›å»ºä¸€ä¸ªIPv6æ•°æ®æŠ¥ï¼Œå¹¶å°†å…¶å°è£…åœ¨ä¸€ä¸ªIPv4æ•°æ®æŠ¥çš„æ•°æ®å­—æ®µä¸­ã€‚è¿™æ ·ï¼ŒIPv4è·¯ç”±å™¨å°±å¯ä»¥å°†å°è£…åçš„æ•°æ®æŠ¥ä½œä¸ºæ™®é€šçš„IPv4æ•°æ®æŠ¥è¿›è¡Œè½¬å‘ã€‚å½“å°è£…åçš„æ•°æ®æŠ¥åˆ°è¾¾ç›®çš„IPv6è·¯ç”±å™¨æ—¶ï¼Œç›®çš„è·¯ç”±å™¨ä¼šå°†IPv6æ•°æ®æŠ¥ä»IPv4æ•°æ®æŠ¥ä¸­è§£å°è£…ï¼Œå¹¶è¿›è¡Œå¤„ç†ã€‚</p>
<blockquote>
<p>å‡å®šä½ åŠå…¬å®¤çš„è®¡ç®—æœºå·²ç»é…ç½®äº†IPåœ°å€ï¼Œä½†ç°åœ¨ä½ è¦å°†ä½ çš„ç”µè„‘ç§»åŠ¨åˆ°èµ°å»Šå°½å¤´çš„å¦ä¸€ä¸ªåŠå…¬å®¤ã€‚å¦‚æœç§»åŠ¨åï¼Œä½ çš„è®¡ç®—æœºä»è¿æ¥åˆ°åŒæ ·çš„IPç½‘ç»œï¼Œé‚£ä¹ˆä½ å°†ä¸éœ€è¦é‡æ–°é…ç½®IPåœ°å€ã€‚(âˆš)</p>
</blockquote>
<blockquote>
<p>å†…éƒ¨ç½‘å…³åè®®åŒ…æ‹¬ï¼šï¼ˆ Dï¼‰ã€‚</p>
<p>Aï¼OSPF å’Œ IGP    Bï¼OSPF å’Œ EGP  Cï¼RIP å’Œ BGP  Dï¼OSPF å’Œ RIP</p>
</blockquote>
<p>å†…éƒ¨ç½‘å…³åè®®ï¼ˆInterior Gateway Protocolï¼ŒIGPï¼‰æ˜¯ä¸€ç±»ç”¨äºåœ¨è‡ªæ²»ç³»ç»Ÿå†…éƒ¨è·¯ç”±ä¿¡æ¯äº¤æ¢çš„åè®®ã€‚å¸¸è§çš„å†…éƒ¨ç½‘å…³åè®®åŒ…æ‹¬OSPFï¼ˆå¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆï¼‰å’ŒRIPï¼ˆè·¯ç”±ä¿¡æ¯åè®®ï¼‰ã€‚ä¸ä¹‹ç›¸å¯¹åº”çš„æ˜¯å¤–éƒ¨ç½‘å…³åè®®ï¼ˆExterior Gateway Protocolï¼ŒEGPï¼‰ï¼Œå®ƒç”¨äºåœ¨è‡ªæ²»ç³»ç»Ÿä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œå¸¸è§çš„å¤–éƒ¨ç½‘å…³åè®®åŒ…æ‹¬BGPï¼ˆè¾¹ç•Œç½‘å…³åè®®ï¼‰ã€‚</p>
<blockquote>
<p> RIP åè®®å’Œ OSPF åè®®åˆ†åˆ«ä½¿ç”¨ï¼ˆA ï¼‰åè®®è¿›è¡Œä¼ è¾“ã€‚</p>
<p>Aï¼UDP å’Œ IP    Bï¼TCP å’Œ UDP   Cï¼TCP å’Œ IP   Dï¼éƒ½æ˜¯ç”¨ IP</p>
</blockquote>
<p>RIPåè®®ä½¿ç”¨UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰è¿›è¡Œä¼ è¾“ï¼Œå®ƒå°†è·¯ç”±ä¿¡æ¯å°è£…åœ¨UDPæ•°æ®æŠ¥ä¸­ï¼Œå¹¶é€šè¿‡IPï¼ˆç½‘é™…åè®®ï¼‰è¿›è¡Œä¼ è¾“ã€‚OSPFåè®®åˆ™ç›´æ¥ä½¿ç”¨IPåè®®è¿›è¡Œä¼ è¾“ï¼Œå®ƒå°†è·¯ç”±ä¿¡æ¯å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­è¿›è¡Œä¼ è¾“ã€‚</p>
<blockquote>
<p>å…³äºBGPï¼Œè¯´æ³•ä¸æ­£ç¡®çš„æ˜¯ï¼ˆBï¼‰ </p>
<p>Aï¼BGPæ˜¯ä¸€ç§è·¯å¾„çŸ¢é‡åè®®ã€‚ </p>
<p>Bï¼BGPé€šè¿‡UDPå‘å¸ƒè·¯ç”±ä¿¡æ¯ </p>
<p>Cï¼BGPæ”¯æŒè·¯ç”±æ±‡èšåŠŸèƒ½        </p>
<p>Dï¼BGPèƒ½å¤Ÿæ£€æµ‹è·¯ç”±å¯»ç¯ </p>
</blockquote>
<p>BGPå¹¶ä¸é€šè¿‡UDPå‘å¸ƒè·¯ç”±ä¿¡æ¯ï¼Œè€Œæ˜¯ä½¿ç”¨TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰è¿›è¡Œä¼ è¾“ã€‚BGPå°†è·¯ç”±ä¿¡æ¯å°è£…åœ¨TCPæ®µä¸­è¿›è¡Œä¼ è¾“ã€‚</p>
<blockquote>
<p> å½“BGP è·¯ç”±å™¨ä»eBGP é‚»å±…æ”¶åˆ°ä¸€æ¡æ–°è·¯ç”±æ—¶ï¼Œä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼ˆC ï¼‰ </p>
<p>A. ç«‹å³å‘é€ç»™BGP é‚»å±… </p>
<p>B. æŸ¥çœ‹è·¯ç”±è¡¨ä¸­æœ‰æ— è¯¥è·¯ç”±çš„è®°å½•ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å‘BGP é‚»å±…å‘é€è¯¥è·¯ç”± </p>
<p>C. ä¸ä¿å­˜çš„å·²å‘é€çš„è·¯ç”±ä¿¡æ¯æ¯”è¾ƒï¼Œå¦‚æœæœªå‘é€è¿‡ï¼Œåˆ™å‘BGP é‚»å±…å‘é€ </p>
<p>D. ä¸ä¿å­˜çš„å·²å‘é€çš„è·¯ç”±ä¿¡æ¯æ¯”è¾ƒï¼Œå¦‚æœå·²å‘é€è¿‡ï¼Œåˆ™ä¸å‘é€</p>
</blockquote>
<p>å½“BGPè·¯ç”±å™¨ä»eBGPé‚»å±…æ”¶åˆ°ä¸€æ¡æ–°è·¯ç”±æ—¶ï¼Œå®ƒä¼šå°†è¯¥è·¯ç”±ä¸ä¿å­˜çš„å·²å‘é€çš„è·¯ç”±ä¿¡æ¯è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœè¯¥è·¯ç”±æœªå‘é€è¿‡ï¼Œåˆ™BGPè·¯ç”±å™¨ä¼šå‘å…¶BGPé‚»å±…å‘é€è¯¥è·¯ç”±ã€‚è¿™æ ·ï¼ŒBGPè·¯ç”±å™¨å°±èƒ½å¤Ÿé¿å…é‡å¤å‘é€ç›¸åŒçš„è·¯ç”±ä¿¡æ¯ã€‚</p>
<blockquote>
<p>BGPåè®®æ˜¯ä¸€ç§åŸºäºé“¾è·¯çŠ¶æ€çš„è·¯ç”±åè®®ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿé¿å…è·¯ç”±ç¯è·¯ã€‚( Ã—)</p>
</blockquote>
<p>BGPå¹¶ä¸æ˜¯ä¸€ç§åŸºäºé“¾è·¯çŠ¶æ€çš„è·¯ç”±åè®®ï¼Œè€Œæ˜¯ä¸€ç§è·¯å¾„çŸ¢é‡åè®®ã€‚åœ¨è·¯å¾„çŸ¢é‡åè®®ä¸­ï¼Œæ¯ä¸ªè·¯ç”±å™¨ç»´æŠ¤ä¸€ä¸ªåŒ…å«æ•´ä¸ªç½‘ç»œæ‹“æ‰‘ä¿¡æ¯çš„è·¯ç”±è¡¨ï¼Œå¹¶æ ¹æ®è¯¥ä¿¡æ¯è®¡ç®—åˆ°è¾¾ç›®çš„åœ°çš„æœ€ä½³è·¯å¾„ã€‚å°½ç®¡BGPèƒ½å¤Ÿé¿å…è·¯ç”±ç¯è·¯ï¼Œä½†è¿™å¹¶ä¸æ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ç§åŸºäºé“¾è·¯çŠ¶æ€çš„è·¯ç”±åè®®ã€‚</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘æœŸæœ«å¤ä¹ ä¹‹å¥—æ¥å­—ç¼–ç¨‹</title>
    <url>/2023/06/24/%E8%AE%A1%E7%BD%91/6/</url>
    <content><![CDATA[<p>1ã€å­—èŠ‚åºï¼ˆå¤§ç«¯æ¨¡å¼ã€å°ç«¯æ¨¡å¼ï¼‰</p>
<p>å­—èŠ‚(Byte)</p>
<ul>
<li>ä¼ è¾“å’Œå­˜å‚¨ä¿¡æ¯çš„æœ€å°å•ä½ã€‚</li>
<li>å„ç§æ•°æ®ç±»å‹ï¼Œéƒ½æ˜¯ç”±å­—èŠ‚æ„æˆã€‚</li>
</ul>
<p>ä¸»æœºå­—èŠ‚åº(Big-Endian | Little-Endian)</p>
<ul>
<li>ä¸åŒç±»å‹çš„æœºå™¨å¤„ç†æ•°æ®æ—¶ï¼Œä¼šæŒ‰ç‰¹å®šçš„å­—èŠ‚æ’åˆ—é¡ºåºè¯»å–å­˜å‚¨å™¨ã€‚</li>
</ul>
<p>ä»¥unsigned shortç±»å‹çš„æ•°æ®0x0002ä¸ºä¾‹</p>
<p>å¤§ç«¯æ¨¡å¼ï¼š</p>
<ul>
<li>å­—èŠ‚0x00æ”¾åœ¨ä½ä½åœ°å€æ ‡è¯†çš„å­—èŠ‚</li>
<li>å­—èŠ‚0x02æ”¾åœ¨é«˜ä½åœ°å€æ ‡è¯†çš„å­—èŠ‚</li>
</ul>
<blockquote>
<p>0000000000000010</p>
<p>ä½ 	â†’ 	é«˜</p>
</blockquote>
<p>å°ç«¯æ¨¡å¼:</p>
<ul>
<li>å­—èŠ‚0x00æ”¾åœ¨é«˜ä½åœ°å€æ ‡è¯†çš„å­—èŠ‚</li>
<li>å­—èŠ‚0x02æ”¾åœ¨ä½ä½åœ°å€æ ‡è¯†çš„å­—èŠ‚</li>
</ul>
<blockquote>
<p>0000001000000000</p>
<p>ä½	â†’	é«˜</p>
</blockquote>
<p>2ã€ä¸»æœºå­—èŠ‚åºã€ç½‘ç»œå­—èŠ‚åºï¼Œè½¬æ¢å‡½æ•°</p>
<p>ç½‘ç»œå­—èŠ‚é¡ºåºæ˜¯TCP&#x2F;IPä¸­è§„å®šå¥½çš„ä¸€ç§æ•°æ®è¡¨ç¤ºæ ¼å¼ï¼Œå®ƒä¸å…·ä½“çš„CPUç±»å‹ã€æ“ä½œç³»ç»Ÿç­‰æ— å…³ï¼Œä»è€Œå¯ä»¥ä¿è¯æ•°æ®åœ¨ä¸åŒä¸»æœºä¹‹é—´ä¼ è¾“æ—¶èƒ½å¤Ÿè¢«æ­£ç¡®è§£é‡Šã€‚</p>
<p><strong>ç½‘ç»œå­—èŠ‚é¡ºåºé‡‡ç”¨Big-Endianæ’åºæ–¹å¼ï¼Œæ€»æ˜¯ä»ä½ä½åœ°å€å¼€å§‹ä¼ è¾“</strong>ã€‚å‘é€æ•°æ®åŒ…æ—¶ï¼Œç¨‹åºå°†ä¸»æœºå­—èŠ‚åºè½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºï¼›æ¥å—æ”¶æ•°æ®åŒ…æ—¶ï¼Œåˆ™å°†ç½‘ç»œå­—èŠ‚åºè½¬æ¢ä¸ºä¸»æœºå­—èŠ‚åºã€‚<br>htonsã€ntohsã€htonlã€ntohl</p>
<p>ä¸»æœºå­—èŠ‚åºå˜ä¸ºç½‘ç»œå­—èŠ‚åº</p>
<ul>
<li>uint16_t  htons(uint16_t hostshort)</li>
<li>uint32_t  htonl(uint32_t hostlong)</li>
</ul>
<p>ç½‘ç»œå­—èŠ‚åºå˜ä¸ºä¸»æœºå­—èŠ‚åº</p>
<ul>
<li>uint16_t  ntohs(uint16_t netshort)</li>
<li>uint32_t  ntohl(uint16_t netlong)</li>
</ul>
<p>3ã€æ•°æ®ç»“æ„å¯¹é½ï¼Œå¯¹é½ç³»æ•°</p>
<p>æ•°æ®ï¼ˆå­—é•¿ï¼‰æ¨¡å‹æ˜¯ç¼–è¯‘å™¨ç”¨æ¥ç¡®å®šåŸºæœ¬æ•°æ®ç±»å‹é•¿åº¦çš„ï¼Œæœ‰ LP64ã€ILP64ã€LLP64ã€ILP32ã€LP32ã€‚</p>
<p>integers (I), long integers (L), and pointers (P)</p>
<ul>
<li>Linux&#x2F;Unix: LP64</li>
<li>Windows: LLP64</li>
</ul>
<p>å¯¹é½ç³»æ•°</p>
<ul>
<li>æ¯ä¸ªç‰¹å®šå¹³å°çš„ç¼–è¯‘å™¨éƒ½æœ‰è‡ªå·±çš„é»˜è®¤â€œå¯¹é½ç³»æ•°â€ ã€‚</li>
<li>é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤#pragma pack(n)ï¼Œn&#x3D;1,2,4,8,16æ¥æ”¹å˜è¿™ä¸€ç³»æ•°ï¼Œå…¶ä¸­çš„nå°±æ˜¯æŒ‡å®šçš„â€œå¯¹é½ç³»æ•°â€ã€‚</li>
</ul>
<p>ç»“æ„ä½“å¯¹é½è§„åˆ™ï¼š</p>
<p>â‘ ç»“æ„ä½“å˜é‡çš„é¦–åœ°å€èƒ½å¤Ÿè¢«å…¶<strong>æœ€å®½</strong>åŸºæœ¬ç±»å‹æˆå‘˜çš„å¤§å°æ‰€<strong>æ•´é™¤</strong>ï¼›</p>
<p>â‘¡ç»“æ„ä½“æ¯ä¸ªæˆå‘˜ç›¸å¯¹ç»“æ„ä½“é¦–åœ°å€çš„åç§»é‡(offset)éƒ½æ˜¯æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œå¦‚æœ‰éœ€è¦ç¼–è¯‘å™¨ä¼šåœ¨æˆå‘˜ä¹‹é—´åŠ ä¸Šå¡«å……å­—èŠ‚ï¼›</p>
<p>â‘¢ç»“æ„ä½“çš„æ€»å¤§å°ä¸ºç»“æ„ä½“æœ€å®½åŸºæœ¬ç±»å‹æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œå¦‚æœ‰éœ€è¦ç¼–è¯‘å™¨ä¼šåœ¨æœ€æœ«ä¸€ä¸ªæˆå‘˜ä¹‹ååŠ ä¸Šå¡«å……å­—èŠ‚ã€‚</p>
<p>4ã€å¥—æ¥å­—</p>
<p><strong>ä¸»åŠ¨å¥—æ¥å­—ã€è¢«åŠ¨å¥—æ¥å­—</strong></p>
<ul>
<li>è¢«åŠ¨ï¼šç­‰å¾…ä¼ å…¥è¿æ¥çš„å¥—æ¥å­—ï¼Œå¦‚æœåŠ¡å™¨å¥—æ¥å­—</li>
<li>ä¸»åŠ¨ï¼šå‘èµ·è¿æ¥çš„å¥—æ¥å­—ï¼Œå¦‚å®¢æˆ·ç«¯å¥—æ¥å­—</li>
</ul>
<p><strong>ç«¯åˆ°ç«¯åœ°å€</strong></p>
<p>åˆ›å»ºæ—¶ä¸æŒ‡å®šï¼Œä½¿ç”¨æ—¶æŒ‡æ˜ï¼ˆTCP&#x2F;IPéœ€è¦æŒ‡æ˜åè®®ç«¯å£å·å’ŒIPåœ°å€ï¼‰</p>
<ul>
<li><p>TCP&#x2F;IPåè®®æ—ï¼šPF_INET</p>
</li>
<li><p>TCP&#x2F;IPåœ°å€æ—ï¼šAF_INET</p>
</li>
<li><p>PFæ˜¯protocol familyï¼ŒAFæ˜¯address familyï¼ŒTCP&#x2F;IPå¥—æ¥å­—è®¾è®¡è€…è®¤ä¸ºå¯èƒ½æŸä¸ªåè®®æ—æœ‰å¤šç§å½¢å¼çš„åœ°å€ï¼Œæ‰€ä»¥åœ¨APIä¸ŠæŠŠå®ƒä»¬åˆ†å¼€äº†ï¼Œåˆ›å»ºsocketç”¨PFï¼Œbind&#x2F;connectç”¨AFã€‚ä½†å¦‚ä»Šä¸€ä¸ªPFåªæœ‰ä¸€ä¸ªAFï¼Œä»æ¥æ²¡æœ‰è¿‡ä¾‹å¤–ï¼Œæ‰€ä»¥å¯æ··ç”¨</p>
</li>
</ul>
<p><strong>å¥—æ¥å­—ç±»å‹</strong></p>
<ul>
<li>SOCKET_DGRAMï¼š åŒå‘ä¸å¯é æ•°æ®æŠ¥ï¼Œå¯¹åº”UDP</li>
<li>SOCKET_STREAMï¼šåŒå‘å¯é æ•°æ®æµï¼Œå¯¹åº”TCP</li>
<li>SOCKET_RAWï¼šä½äºä¼ è¾“å±‚çš„ä½çº§åè®®æˆ–ç‰©ç†ç½‘ç»œæä¾›çš„å¥—æ¥å­—ç±»å‹ï¼Œå¯ä»¥è®¿é—®å†…éƒ¨ç½‘ç»œæ¥å£ã€‚</li>
</ul>
<p>5ã€åœ°å€è½¬æ¢å‡½æ•°</p>
<ul>
<li><p>Socket é€šç”¨åœ°å€ç»“æ„sockaddr</p>
<ul>
<li>Socketæ˜¯ä¼ è¾“å±‚&#x2F;ç½‘ç»œå±‚ç¼–ç¨‹æ¥å£ï¼Œç”±äºä¼ è¾“å±‚&#x2F;ç½‘ç»œå±‚çš„å„ç§å®ç°ä¸åŒï¼Œå¯èƒ½ä¼šæœ‰ä¸åŒçš„ç¼–å€æ–¹æ¡ˆã€‚é€šç”¨åœ°å€ä¸ºäº†é€‚åº”è¿™ç§éœ€æ±‚è€Œå®šä¹‰ã€‚</li>
<li>é€šç”¨åœ°å€æœ‰å¾ˆå¤§å±€é™æ€§ï¼Œå®é™…å¹¶ä¸å…·æœ‰é€šç”¨æ€§ï¼Œä¾‹å¦‚é’ˆå¯¹AF_INET6&#x2F;AF_LOCALç±»å‹çš„Socketåœ°å€ï¼Œsockaddrç»“æ„å®é™…ä¸Šåªèƒ½æ ‡è¯†å‡ºè¿™ä¸ªåœ°å€çš„ç±»å‹ã€‚</li>
</ul>
</li>
<li><p>äººä»¬ä¹ æƒ¯ä½¿ç”¨ 202.112.14.151 è¡¨ç¤ºåœ°å€ï¼ˆç‚¹åˆ†åè¿›åˆ¶ï¼‰ï¼Œä½†æ˜¯è¿™ä¸ªæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è€Œä¸æ˜¯æ•°å€¼ï¼Œå› æ­¤åœ¨socketç¼–ç¨‹æ—¶ï¼Œéœ€è¦è¿›è¡Œè½¬æ¢ã€‚æ­¤å¤–è¿˜è¦è€ƒè™‘å­—èŠ‚åºçš„é—®é¢˜ï¼Œä¸ºæ­¤å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¸€äº›å‡½æ•°ï¼š</p>
<ol>
<li><p>int inet_aton(const char *cp, struct in_addr *inp)    </p>
<p>è¿”å›ï¼š1-ä¸²æœ‰æ•ˆï¼Œ0-ä¸²æœ‰é”™</p>
<p>inet_atonå‡½æ•°å°†cpæ‰€æŒ‡çš„å­—ç¬¦ä¸²è½¬æ¢æˆ32ä½çš„ç½‘ç»œå­—èŠ‚åºäºŒè¿›åˆ¶ï¼Œå¹¶é€šè¿‡æŒ‡é’ˆinpæ¥å­˜å‚¨ã€‚è¿™ä¸ªå‡½æ•°éœ€è¦å¯¹å­—ç¬¦ä¸²æ‰€æŒ‡çš„åœ°å€è¿›è¡Œæœ‰æ•ˆæ€§éªŒè¯ã€‚ä½†å¦‚æœcpä¸ºç©ºï¼Œå‡½æ•°ä»ç„¶æˆåŠŸï¼Œä½†ä¸å­˜å‚¨ä»»ä½•ç»“æœã€‚</p>
</li>
<li><p>in_addr_t inet_addr(const char *cp)    </p>
<p>è¿”å›ï¼šè‹¥æˆåŠŸï¼Œè¿”å›32ä½äºŒè¿›åˆ¶çš„ç½‘ç»œå­—èŠ‚åºåœ°å€ï¼Œè‹¥æœ‰é”™ï¼Œåˆ™è¿”å›INADDR_NONE  </p>
<p>inet_addrè¿›è¡Œç›¸åŒçš„è½¬æ¢ï¼Œä½†ä¸è¿›è¡Œæœ‰æ•ˆæ€§éªŒè¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰232ç§å¯èƒ½çš„äºŒè¿›åˆ¶å€¼å¯¹inet_addrå‡½æ•°éƒ½æ˜¯æœ‰æ•ˆçš„â€”â€”<strong>è¿‡æ—¶å‡½æ•°ï¼Œä¸åº”å†ä½¿ç”¨</strong></p>
</li>
<li><p>char *inet_ntoa(struct in_addr in)     </p>
<p>è¿”å›ï¼šæŒ‡å‘ç‚¹åˆ†åè¿›åˆ¶æ•°ä¸²çš„æŒ‡é’ˆ</p>
<ul>
<li>å‡½æ•°inet_ntoaå°†32ä½çš„ç½‘ç»œå­—èŠ‚åºäºŒè¿›åˆ¶IPv4åœ°å€è½¬æ¢æˆç›¸åº”çš„ç‚¹åˆ†åè¿›åˆ¶æ•°ä¸²ã€‚ä½†ç”±äºè¿”å›å€¼æ‰€æŒ‡å‘çš„ä¸²ç•™åœ¨é™æ€å†…å­˜ä¸­ï¼Œè¿™æ„å‘³ç€å‡½æ•°æ˜¯ä¸å¯é‡å…¥çš„ã€‚</li>
<li>éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯ä»¥ç»“æ„ä¸ºå‚æ•°ï¼Œè€Œä¸æ˜¯æŒ‡é’ˆã€‚</li>
</ul>
<p>ä¸Šè¿°ä¸‰ä¸ªåœ°å€è½¬æ¢å‡½æ•°éƒ½åªèƒ½å¤„ç†IPv4åè®®ï¼Œè€Œä¸èƒ½å¤„ç†IPv6åœ°å€ã€‚åœ¨åŒæ—¶è¦å¤„ç†IPv4å’Œv6çš„ç¨‹åºä¸­ï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°ã€‚</p>
</li>
<li><p>int inet_pton(int family, const char *src, void *dst)    </p>
<p>è¿”å›ï¼š1-æˆåŠŸï¼Œ0ï¼è¾“å…¥æ— æ•ˆï¼Œ-1:å‡ºé”™    </p>
<p>å°†srcæŒ‡å‘çš„å­—ç¬¦ä¸²è½¬æ¢æˆäºŒè¿›åˆ¶åœ°å€æ•°å€¼æ”¾åˆ°dstä¸­ã€‚</p>
</li>
<li><p>const char *inet_ntop(int family, const void *src, char *dst, size_t cnt)    </p>
<p>è¿”å›ï¼šæŒ‡å‘ç»“æœçš„æŒ‡é’ˆï¼ï¼æˆåŠŸï¼ŒNULLï¼å‡ºé”™    </p>
<p>å’Œptonåšç›¸åçš„æ“ä½œã€‚</p>
<ul>
<li>familyå‚æ•°å¯ä»¥æ˜¯AF_INET,ä¹Ÿå¯ä»¥æ˜¯AF_INET6ã€‚</li>
<li>å¦‚æœé•¿åº¦å‚æ•°cntå¤ªå°ï¼Œæ— æ³•å®¹çº³è¡¨è¾¾å¼æ ¼å¼ç»“æœï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºä¸²ã€‚å¦å¤–ï¼Œç›®æ ‡æŒ‡é’ˆdstè°ƒç”¨å‰å¿…é¡»å…ˆç”±è°ƒç”¨è€…åˆ†é…ç©ºé—´ã€‚</li>
</ul>
</li>
</ol>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_15-27-36.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_15-27-25.png"></p>
<p><em><strong>6ã€ç®€å•TCPå¾ªç¯æœåŠ¡å™¨Socketç¼–ç¨‹åŸºæœ¬æ­¥éª¤ï¼ˆæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ï¼‰</strong></em></p>
<p>æœåŠ¡å™¨ç«¯</p>
<ol>
<li>åˆ›å»ºå¥—æ¥å­—</li>
<li>ç»‘å®šå¥—æ¥å­—</li>
<li>è®¾ç½®å¥—æ¥å­—ä¸ºç›‘å¬æ¨¡å¼ï¼Œè¿›å…¥è¢«åŠ¨æ¥å—è¿æ¥çŠ¶æ€</li>
<li>æ¥å—è¯·æ±‚ï¼Œå»ºç«‹è¿æ¥</li>
<li>è¯»å†™æ•°æ®</li>
<li>ç»ˆæ­¢è¿æ¥</li>
</ol>
<p>å®¢æˆ·ç«¯</p>
<ol>
<li>åˆ›å»ºå¥—æ¥å­—</li>
<li>ä¸è¿œç¨‹æœåŠ¡å™¨å»ºç«‹è¿æ¥</li>
<li>è¯»å†™æ•°æ®</li>
<li>ç»ˆæ­¢è¿æ¥</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_15-29-25.png"></p>
<p><em><strong>7ã€ç®€å•UDPå¾ªç¯æœåŠ¡å™¨Socketç¼–ç¨‹åŸºæœ¬æ­¥éª¤ï¼ˆæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ï¼‰</strong></em></p>
<p>æœåŠ¡å™¨ç«¯</p>
<ol>
<li>å»ºç«‹UDPå¥—æ¥å­—ï¼›</li>
<li>ç»‘å®šå¥—æ¥å­—åˆ°ç‰¹å®šåœ°å€ï¼›</li>
<li>ç­‰å¾…å¹¶æ¥æ”¶å®¢æˆ·ç«¯ä¿¡æ¯ï¼›</li>
<li>å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼›</li>
<li>å‘é€ä¿¡æ¯å›å®¢æˆ·ç«¯ï¼›</li>
<li>å…³é—­å¥—æ¥å­—ï¼›</li>
</ol>
<p>å®¢æˆ·ç«¯</p>
<ol>
<li>å»ºç«‹UDPå¥—æ¥å­—ï¼›</li>
<li>å‘é€ä¿¡æ¯ç»™æœåŠ¡å™¨ï¼›</li>
<li>æ¥æ”¶æ¥è‡ªæœåŠ¡å™¨çš„ä¿¡æ¯ï¼›</li>
<li>å…³é—­å¥—æ¥å­—</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-24_15-29-57.png"></p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘æœŸæœ«å¤ä¹ ä¹‹ä¼ è¾“å±‚</title>
    <url>/2023/06/21/%E8%AE%A1%E7%BD%91/3/</url>
    <content><![CDATA[<p>1ã€ä¼ è¾“å±‚ï¼šä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„<strong>é€»è¾‘é€šä¿¡</strong>ï¼Œç½‘ç»œå±‚: ä¸¤ä¸ª<strong>ä¸»æœº</strong>ä¹‹é—´çš„é€»è¾‘é€šä¿¡</p>
<ul>
<li>ä¼ è¾“å±‚åè®®è¿è¡Œåœ¨ç«¯ç³»ç»Ÿ <ul>
<li><strong>å‘é€æ–¹</strong>: å°†åº”ç”¨ç¨‹åºæŠ¥æ–‡åˆ†æˆæŠ¥æ–‡æ®µä¼ é€’ç»™ç½‘ç»œå±‚, </li>
<li><strong>æ¥å—æ–¹</strong>: å°†æŠ¥æ–‡æ®µé‡æ–°ç»„è£…æˆæŠ¥æ–‡ä¼ é€’åˆ°åº”ç”¨å±‚</li>
</ul>
</li>
<li>ä¼ è¾“å±‚å¯ä»¥ä¸ºåº”ç”¨æä¾›å¤šç§åè®®(å› ç‰¹ç½‘: TCP å’Œ UDP)<ul>
<li>å¯é æŒ‰åºé€’äº¤ (TCP)ï¼šæ‹¥å¡æ§åˆ¶&#x2F;æµé‡æ§åˆ¶&#x2F;è¿æ¥å»ºç«‹</li>
<li>ä¸å¯é çš„æ— åºä¼ é€’: UDPâ€œå°½åŠ›ä¼ é€’â€ IPçš„ç›´æ¥æ‰©å±•</li>
<li>ä¸¤ç§æœåŠ¡å‡ä¸ä¿è¯: å»¶è¿Ÿ&#x2F;å¸¦å®½</li>
</ul>
</li>
</ul>
<p>2ã€å¤šè·¯å¤ç”¨&#x2F;å¤šè·¯åˆ†è§£å·¥ä½œåŸç†</p>
<p>åœ¨å‘é€ä¸»æœºå¤šè·¯å¤ç”¨:ä»å¤šä¸ªå¥—æ¥å­—æ”¶é›†æ•°æ®, ç”¨é¦–éƒ¨å°è£…æ•°æ®ï¼Œç„¶åå°†æŠ¥æ–‡æ®µä¼ é€’åˆ°ç½‘ç»œå±‚(å¤šè·¯å¤ç”¨ï¼‰</p>
<p>åœ¨æ¥æ”¶ä¸»æœºå¤šè·¯åˆ†è§£:å°†æ¥æ”¶åˆ°çš„æ•°æ®æ®µä¼ é€’åˆ°æ­£ç¡®çš„å¥—æ¥å­—ï¼ˆå¤šè·¯åˆ†è§£ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_08-40-33.png"></p>
<p>å¤šè·¯å¤ç”¨&#x2F;åˆ†è§£å¦‚ä½•å·¥ä½œ?ï¼ˆæŠ¥æ–‡æ®µå¤´éƒ¨å­—æ®µå®ç°ï¼‰</p>
<ul>
<li><p>ä¸»æœºæ”¶åˆ°IPæ•°æ®æŠ¥</p>
<ul>
<li>æ¯ä¸ªæ•°æ®æŠ¥æœ‰<strong>æºIPåœ°å€</strong>ï¼Œ<strong>ç›®çš„IPåœ°å€</strong></li>
<li>æ¯ä¸ªæ•°æ®æŠ¥æ¬è¿ä¸€ä¸ªæŠ¥æ–‡æ®µ</li>
<li>æ¯ä¸ªæŠ¥æ–‡æ®µæœ‰æºå’Œç›®çš„ç«¯å£å· ï¼ˆå›å¿†: å¯¹äºç‰¹å®šåº”ç”¨ç¨‹åºå…·æœ‰å‘¨çŸ¥ç«¯å£å·)</li>
</ul>
</li>
<li><p>ä¸»æœºç”¨<strong>IPåœ°å€å’Œç«¯å£å·</strong>æŒ‡æ˜æŠ¥æ–‡æ®µå±äºå“ªä¸ªåˆé€‚çš„å¥—æ¥å­—</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_08-40-51.png"></p>
<p>3ã€æ— è¿æ¥å¤šè·¯åˆ†è§£ï¼ˆ UDP å¥—æ¥å­—ï¼šç›®çš„IPåœ°å€, ç›®çš„ç«¯å£å·ï¼‰</p>
<ul>
<li>å½“ä¸»æœºæ”¶åˆ°UDPæŠ¥æ–‡æ®µï¼šæ£€æŸ¥æŠ¥æ–‡æ®µä¸­çš„ç›®çš„ç«¯å£å·ã€ç”¨<strong>ç«¯å£å·</strong>æŒ‡ç¤ºUDPæŠ¥æ–‡æ®µå±äºå“ªä¸ªå¥—æ¥å­—</li>
<li>æ¥è‡ªä¸åŒçš„æºIPåœ°å€ä¸”&#x2F;æˆ–æºç«¯å£å·çš„IPæŠ¥æ–‡æŠ¥ï¼Œå¯¼å‘åŒä¸€ä¸ªçš„å¥—æ¥å­—</li>
<li><strong>SP æä¾›â€œè¿”å›åœ°å€â€</strong></li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_08-53-15.png"></p>
<p>4ã€é¢å‘è¿æ¥çš„å¤šè·¯åˆ†è§£ï¼ˆTCPå¥—æ¥å­—ï¼šæºIPåœ°å€ã€æºç«¯å£å·ã€ç›®çš„IPåœ°å€ã€ç›®çš„ç«¯å£å·ï¼‰</p>
<ul>
<li>æœåŠ¡å™¨ä¸»æœºæ”¯æŒå¾ˆå¤šåŒæ—¶çš„TCP å¥—æ¥å­—:æ¯ä¸ªå¥—æ¥å­—ç”¨4éƒ¨åˆ†æ¥è¡¨ç¤º </li>
<li>WebæœåŠ¡å™¨å¯¹æ¯ä¸ªè¿æ¥çš„å®¢æˆ·éƒ½æœ‰ä¸åŒçš„å¥—æ¥å­—ï¼šéæŒä¹… HTTP å°†å¯¹æ¯ä¸ªè¯·æ±‚æœ‰ä¸€ä¸ªä¸åŒçš„å¥—æ¥å­—</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_08-53-37.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_08-53-53.png"></p>
<p>5ã€ UDPç”¨æˆ·æ•°æ®æŠ¥åè®®</p>
<p>UDP æ˜¯<strong>é¢å‘æŠ¥æ–‡</strong>çš„</p>
<p><strong>åŸºäºInternet IPåè®®</strong></p>
<ul>
<li>å¤ç”¨&#x2F;åˆ†ç”¨</li>
<li>ç®€å•çš„é”™è¯¯æ ¡éªŒ</li>
</ul>
<p><strong>â€œå°½æœ€å¤§åŠªåŠ›â€æœåŠ¡ï¼ŒæŠ¥æ–‡æ®µå¯èƒ½</strong>: </p>
<ul>
<li>ä¸¢å¤±</li>
<li>ä¼šä¼ é€’å¤±åºçš„æŠ¥æ–‡åˆ°åº”ç”¨ç¨‹åºæ— è¿æ¥</li>
<li>åœ¨UDPæ¥æ”¶è€…å‘é€è€…ä¹‹é—´<strong>æ²¡æœ‰æ¡æ‰‹</strong></li>
<li>æ¯ä¸ªUDP æŠ¥æ–‡æ®µçš„å¤„ç†ç‹¬ç«‹äºå…¶ä»–æŠ¥æ–‡æ®µ</li>
</ul>
<p>ä¸ºä»€ä¹ˆæœ‰ UDP?</p>
<ul>
<li>ä¸éœ€è¦å»ºç«‹è¿æ¥ (å‡å°‘å»¶è¿Ÿ)</li>
<li>ç®€å•: åœ¨å‘é€è€…æ¥å—è€…ä¹‹é—´ä¸éœ€è¦è¿æ¥çŠ¶æ€</li>
<li>å¾ˆå°çš„æŠ¥æ–‡æ®µé¦–éƒ¨</li>
<li>æ²¡æœ‰æ‹¥å¡æ§åˆ¶: UDP èƒ½å¤Ÿç”¨å°½å¯èƒ½å¿«çš„é€Ÿåº¦ä¼ é€’</li>
</ul>
<p>**å¸¸ç”¨äºæµå¼å¤šåª’ä½“åº”ç”¨ï¼šä¸¢åŒ…å®¹å¿&#x2F;é€Ÿç‡æ•æ„Ÿ **<br>å…¶ä»–UDPåº”ç”¨ï¼šDNS&#x2F;SNMP&#x2F;RTP</p>
<p><strong>ç»UDPçš„å¯é ä¼ è¾“</strong> : åœ¨åº”ç”¨å±‚å¢åŠ å¯é æ€§&#x2F;åº”ç”¨ç¨‹åºç‰¹å®šçš„å·®é”™æ¢å¤ï¼</p>
<p>6ã€UDPæŠ¥æ–‡æ ¼å¼ï¼ˆ8å­—èŠ‚ï¼‰æ¯ä¸ªå­—æ®µå«ä¹‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_09-11-16.png"></p>
<p>7ã€UDPæ˜¯é¢å‘æŠ¥æ–‡çš„ä¼ è¾“æ–¹å¼</p>
<p>é¢å‘æŠ¥æ–‡çš„ä¼ è¾“æ–¹å¼æ˜¯åº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»é€‰æ‹©åˆé€‚å¤§å°çš„æŠ¥æ–‡ã€‚è‹¥æŠ¥æ–‡å¤ªé•¿ï¼Œåˆ™IPå±‚éœ€è¦åˆ†ç‰‡ï¼Œé™ä½æ•ˆç‡ã€‚è‹¥å¤ªçŸ­ï¼Œä¼šæ˜¯IPå¤ªå°ã€‚UDPå¯¹åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ï¼Œä¹Ÿä¸æ‹†åˆ†ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œã€‚å³<strong>åº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡</strong>ã€‚</p>
<p>æ€è€ƒå¤§çš„è§†é¢‘æ–‡ä»¶å¦‚ä½•åˆ©ç”¨UDPä¼ è¾“ï¼š</p>
<ul>
<li><p>å°†å¤§æ•°æ®åˆ†æˆå¤šä¸ªå°åŒ…ï¼Œæ¯ä¸ªå°åŒ…çš„å¤§å°ä¸èƒ½è¶…è¿‡UDPåè®®æ•°æ®åŒ…çš„æœ€å¤§é•¿åº¦ï¼ˆä¸€èˆ¬ä¸º64KBï¼‰ã€‚</p>
</li>
<li><p>åœ¨æ¯ä¸ªå°åŒ…ä¸­å¢åŠ ä¸€ä¸ªåºåˆ—å·ï¼Œç”¨äºç¡®ä¿æ•°æ®åŒ…çš„é¡ºåºå’Œå®Œæ•´æ€§ã€‚</p>
</li>
<li><p>åœ¨æ¯ä¸ªå°åŒ…ä¸­å¢åŠ ä¸€ä¸ªæ ¡éªŒå’Œï¼Œç”¨äºæ£€æµ‹æ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚</p>
</li>
<li><p>æ¥æ”¶æ–¹å°†æ”¶åˆ°çš„å°åŒ…æŒ‰ç…§åºåˆ—å·å’Œæ ¡éªŒå’Œçš„æ–¹å¼è¿›è¡Œé‡ç»„å’ŒéªŒè¯ï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚</p>
</li>
<li><p>å¯¹äºä¸¢å¤±çš„æ•°æ®åŒ…ï¼Œå‘é€æ–¹éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œé‡ä¼ ï¼Œä»¥ä¿è¯æ•°æ®çš„å¯é æ€§ã€‚</p>
</li>
</ul>
<p>9ã€UDPé¦–éƒ¨çš„<strong>æ ¡éªŒå’Œ</strong>è®¡ç®—</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_09-08-11.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_09-08-35.png"></p>
<p>ï¼ˆ1ï¼‰å°†UDPä¼ªå¤´éƒ¨ã€UDPå¤´éƒ¨å’Œæ•°æ®éƒ¨åˆ†å…¨éƒ¨ç”¨16è¿›åˆ¶æ•°è¡¨ç¤ºã€‚</p>
<p>ï¼ˆ2ï¼‰å°†ç¬¬ä¸€ä¸ª16è¿›åˆ¶æ•°ä¸ç¬¬äºŒä¸ª16è¿›åˆ¶æ•°ç›¸åŠ ã€‚æ±‚å’Œæ—¶äº§ç”Ÿçš„è¿›ä½å¿…é¡»å›å·åŠ åˆ°ç»“æœä¸Šã€‚</p>
<p>ï¼ˆ3ï¼‰å°†ä¸Šä¸€æ­¥å¾—åˆ°çš„16ä½æ•°ä¸ç¬¬ä¸‰ä¸ª16è¿›åˆ¶çš„æ•°ç›¸åŠ ï¼Œé‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°ç´¯åŠ å®Œæ‰€æœ‰çš„16è¿›åˆ¶æ•°ï¼Œå¹¶ä¸”å¾—åˆ°çš„ç»“æœä¸º16è¿›åˆ¶æ•°ã€‚</p>
<p>ï¼ˆ4ï¼‰å°†ç´¯åŠ æœ€åå¾—åˆ°çš„16è¿›åˆ¶æ•°å–åï¼Œå¾—åˆ°æ ¡éªŒå’Œã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_09-10-17.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_09-26-04.png"></p>
<p>å‘é€æ–¹å¯¹æ ¡éªŒå’Œè¿›è¡Œäº†åç æ“ä½œï¼Œå¹¶æ”¾å…¥äº†æ ¡éªŒå’Œå­—æ®µ å‘é€ç»™äº†æ¥å—æ–¹ ç­‰æ¥æ”¶æ–¹å¯¹å…¶ä»–å­—æ®µè¿›è¡Œäº†äºŒè¿›åˆ¶çš„åŠ æ³•ï¼Œå…¶ä¸­å°±æœ‰æ ¡éªŒå’Œå­—æ®µï¼Œå°±ä¼šå˜æˆåŸç å’Œåç çš„åŠ æ³•ï¼Œå°±éƒ½å˜æˆ1äº†ï¼Œå¦‚æœä¸æ˜¯éƒ½æ˜¯1çš„è¯ é‚£å°±è¯´æ˜å…¶ä¸­çš„å­—æ®µå’Œå‘é€æ–¹çš„å­—æ®µä¸ä¸€æ ·ï¼Œè‚¯å®šå°±æ˜¯é”™è¯¯çš„ï¼Œå°±æŠŠåŒ…ä¸¢äº†ã€‚</p>
<p>10ã€å¯é æ•°æ®ä¼ è¾“åŸç†rdt1.0-rdt3.0çš„å·¥ä½œåœºæ™¯ï¼ˆno lossã€lost packetã€lost ackã€timeoutï¼‰</p>
<p>Rdt1.0: å®Œå…¨å¯é ä¿¡é“ä¸Šçš„å¯é æ•°æ®ä¼ è¾“</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_10-18-04.png"></p>
<p>Rdt2.0: å…·æœ‰bité”™è¯¯çš„ä¿¡é“</p>
<ul>
<li>ä¸‹å±‚ä¿¡é“å¯èƒ½è®©ä¼ è¾“åˆ†ç»„ä¸­çš„bitå—æŸï¼šåˆ©ç”¨æ ¡éªŒå’Œæ£€æµ‹bitä½é”™è¯¯</li>
<li>é—®é¢˜: å¦‚ä½•ä»é”™è¯¯ä¸­æ¢å¤<ul>
<li>ç¡®è®¤(ACKs): æ¥æ”¶æ–¹æ˜ç¡®å‘Šè¯‰å‘é€æ–¹åˆ†ç»„æ¥æ”¶æ­£ç¡®</li>
<li>å¦è®¤ (NAKs):æ¥æ”¶æ–¹æ˜ç¡®å‘Šè¯‰å‘é€æ–¹åˆ†ç»„æ¥æ”¶å‡ºé”™</li>
<li>å‘é€æ–¹æ”¶åˆ°NAKåé‡å‘è¿™ä¸ªåˆ†ç»„</li>
</ul>
</li>
<li>åœ¨ rdt2.0ä¸­çš„æ–°æœºåˆ¶ (åœ¨ rdt1.0ä¸­æ²¡æœ‰çš„)ï¼š<ul>
<li>å·®é”™æ£€æµ‹</li>
<li>æ¥æ”¶æ–¹åé¦ˆ: æ§åˆ¶ä¿¡æ¯ (ACK,NAK)   rcvr-&gt;sender</li>
<li>é‡ä¼ </li>
</ul>
</li>
</ul>
<p>åœç­‰åè®®:å‘é€æ–¹å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼Œç„¶åç­‰å¾…æ¥å—æ–¹çš„å“åº”</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_10-18-42.png"></p>
<p><strong>rdt2.0: ç¼ºé™·</strong></p>
<p>å¦‚æœACK&#x2F;NAKå‘ç”Ÿé”™è¯¯&#x2F;è¢«ç ´å(corrupted)ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<ul>
<li>ä¸ºACK&#x2F;NAKå¢åŠ æ ¡éªŒå’Œï¼Œæ£€é”™å¹¶çº é”™</li>
<li>å‘é€æ–¹æ”¶åˆ°è¢«ç ´åACK&#x2F;NAKæ—¶ä¸çŸ¥é“æ¥æ”¶æ–¹å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæ·»åŠ é¢å¤–çš„æ§åˆ¶æ¶ˆæ¯</li>
<li>å¦‚æœACK&#x2F;NAKåæ‰ï¼Œå‘é€æ–¹é‡ä¼ </li>
<li>ä¸èƒ½ç®€å•çš„é‡ä¼ ï¼šäº§ç”Ÿé‡å¤åˆ†ç»„</li>
</ul>
<p>å¦‚ä½•è§£å†³é‡å¤åˆ†ç»„é—®é¢˜ï¼Ÿ</p>
<ul>
<li>åºåˆ—å·(Sequence number): å‘é€æ–¹ç»™æ¯ä¸ªåˆ†ç»„å¢åŠ åºåˆ—å·</li>
<li>æ¥æ”¶æ–¹ä¸¢å¼ƒé‡å¤åˆ†ç»„</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/rdt2.1.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_10-27-30.png"></p>
<p><strong>rdt2.2: æ— NAKçš„æ¶ˆæ¯åè®®</strong></p>
<p>æˆ‘ä»¬çœŸçš„éœ€è¦ä¸¤ç§ç¡®è®¤æ¶ˆæ¯(ACK + NAK)å—ï¼Ÿ</p>
<ul>
<li>åŒ rdt2.1ä¸€æ ·çš„åŠŸèƒ½, ä½†åªç”¨ ACKs </li>
<li>å¦‚ä½•å®ç°ï¼Ÿ<ul>
<li>æ¥æ”¶æ–¹é€šè¿‡ACKå‘ŠçŸ¥æœ€åä¸€ä¸ªè¢«æ­£ç¡®æ¥æ”¶çš„åˆ†ç»„</li>
<li>åœ¨ACKæ¶ˆæ¯ä¸­æ˜¾å¼åœ°åŠ å…¥è¢«ç¡®è®¤åˆ†ç»„çš„åºåˆ—å·</li>
</ul>
</li>
<li>å‘é€æ–¹æ”¶åˆ°é‡å¤ACKä¹‹åï¼Œé‡‡å–ä¸æ”¶åˆ°NAKæ¶ˆæ¯ç›¸åŒçš„åŠ¨ä½œ<ul>
<li>é‡ä¼ å½“å‰åˆ†ç»„</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_10-27-48.png"></p>
<p><strong>rdt3.0: å…·æœ‰å‡ºé”™å’Œä¸¢å¤±çš„ä¿¡é“</strong></p>
<p>æ–°å‡è®¾: ä¸‹å±‚ä¿¡é“è¿˜è¦ä¸¢å¤±æŠ¥æ–‡ (æ•°æ®æˆ–è€… ACKs)</p>
<p>æ ¡éªŒå’Œ, åºå·, ç¡®è®¤, é‡å‘å°†ä¼šæœ‰å¸®åŠ©ï¼Œä½†æ˜¯ä¸å¤Ÿ</p>
<p>æ–¹æ³•: å‘é€è€…ç­‰å¾…â€œåˆç†çš„â€ç¡®è®¤æ—¶é—´</p>
<ul>
<li>å¦‚æœåœ¨è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ç¡®è®¤å°±<strong>é‡å‘</strong></li>
<li>å¦‚æœæŠ¥æ–‡ï¼ˆæˆ–è€…ç¡®è®¤ï¼‰åªæ˜¯å»¶è¿Ÿ (æ²¡æœ‰ä¸¢å¤±):<ul>
<li>é‡å‘å°†å¯¼è‡´é‡å¤ï¼Œä½†æ˜¯ä½¿ç”¨åºå·å·²ç»å¤„ç†äº†è¿™ä¸ªé—®é¢˜</li>
<li>æ¥å—æ–¹å¿…é¡»æŒ‡å®šè¢«ç¡®è®¤çš„æŠ¥æ–‡åºå·</li>
</ul>
</li>
<li>è¦æ±‚<strong>å€’è®¡æ—¶å®šæ—¶å™¨</strong>ï¼šåªæœ‰åœ¨å®šæ—¶å™¨è¶…æ—¶æ—¶æ‰è§¦å‘é‡å‘</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_10-28-16.png"></p>
<p><strong>rdt3.0çš„æ€§èƒ½åˆ†æ</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-15-06.png"></p>
<p>æµæ°´çº¿: å‘é€æ–¹å…è®¸å‘é€å¤šä¸ª â€œåœ¨è·¯ä¸Šçš„â€, è¿˜æ²¡æœ‰ç¡®è®¤çš„æŠ¥æ–‡</p>
<ul>
<li>åºå·æ•°ç›®çš„èŒƒå›´å¿…é¡»å¢åŠ </li>
<li>åœ¨å‘é€æ–¹&#x2F;æ¥æ”¶æ–¹å¿…é¡»æœ‰ç¼“å†²åŒº</li>
</ul>
<p>æµæ°´çº¿æŠ€æœ¯çš„ä¸¤ä¸ªé€šç”¨å½¢å¼: <em><strong>go-Back-N</strong></em>,*** é€‰æ‹©é‡ä¼ ***</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_10-28-44.png"></p>
<p>11ã€GBNåè®®</p>
<p><strong>Go-Back-N(GBN)åè®®: å‘é€æ–¹</strong></p>
<ul>
<li>åˆ†ç»„å¤´éƒ¨åŒ…å«k-bitåºåˆ—å·</li>
<li>çª—å£å°ºå¯¸ä¸ºNï¼Œæœ€å¤šå…è®¸Nä¸ªåˆ†ç»„æœªç¡®è®¤</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-16-47.png"></p>
<ul>
<li>ACK(n): ç¡®è®¤åˆ°åºåˆ—å·n(åŒ…å«n)çš„åˆ†ç»„å‡å·²è¢«æ­£ç¡®æ¥æ”¶<ul>
<li>å¯èƒ½æ”¶åˆ°é‡å¤ACK</li>
</ul>
</li>
<li>å¯¹ç¬¬ä¸€ä¸ªå‘é€æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡å®šæ—¶(timer)</li>
<li>timeout(n):è‹¥è¶…æ—¶ï¼Œé‡ä¼ çª—å£ä¸­çš„åˆ†ç»„nåŠæ‰€æœ‰æ›´é«˜åºå·çš„åˆ†ç»„</li>
</ul>
<p><strong>Go-Back-N(GBN)åè®®: æ¥æ”¶æ–¹</strong></p>
<p>åªæœ‰ACK: å¯¹æ¥æ”¶çš„åˆ†ç»„æ€»æ˜¯å‘é€å…·æœ‰æœ€é«˜æŒ‰åºåºå·çš„ACK</p>
<ul>
<li>å¯èƒ½äº§ç”Ÿå†—ä½™çš„ACKs</li>
<li>ä»…ä»…éœ€è¦è®°ä½æœŸæœ›çš„åºå·å€¼ï¼ˆexpectedseqnumï¼‰</li>
</ul>
<p>å¯¹å¤±åºçš„åˆ†ç»„: </p>
<ul>
<li>ä¸¢å¼ƒ (ä¸ç¼“å­˜) -&gt; <strong>æ²¡æœ‰æ¥æ”¶ç¼“å†²åŒº</strong>!</li>
<li>é‡æ–°ç¡®è®¤å…·æœ‰æŒ‰åºçš„åˆ†ç»„</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_12-35-57.png"></p>
<p>12ã€SRåè®®</p>
<ul>
<li>æ¥æ”¶æ–¹åˆ†åˆ«ç¡®è®¤å·²ç»æ”¶åˆ°çš„åˆ†ç»„:å¿…è¦æ—¶ï¼Œç¼“å†²æŠ¥æ–‡, æœ€åæŒ‰åºæäº¤ç»™ä¸Šå±‚</li>
<li>å‘é€è€…åªé‡å‘æ²¡æœ‰æ”¶åˆ°ç¡®è®¤çš„åˆ†ç»„:å¯¹æ¯ä¸ªæ²¡æœ‰ç¡®è®¤çš„æŠ¥æ–‡å‘é€è€…éƒ½è¦å¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨(æ¯ä¸ªæœªè¢«ç¡®è®¤çš„æŠ¥æ–‡éƒ½æœ‰ä¸€ä¸ªå®šæ—¶å™¨)</li>
<li>å‘é€çª—å£:N ä¸ªè¿ç»­åºå·&#x2F;é™åˆ¶è¢«å‘é€çš„æœªç¡®è®¤çš„åˆ†ç»„æ•°é‡</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-17-24.png"></p>
<p><strong>å‘é€æ–¹</strong></p>
<ul>
<li>ä»ä¸Šå±‚æ”¶åˆ°æ•°æ® ï¼šå¦‚æœä¸‹ä¸€ä¸ªå¯ç”¨çš„åºå·åœ¨å‘é€æ–¹çª—å£å†…ï¼Œåˆ™å°†æ•°æ®æ‰“åŒ…å¹¶å‘é€,å¯åŠ¨å®šæ—¶å™¨</li>
<li>è¶…æ—¶(n)ï¼šé‡å‘åˆ†ç»„n, é‡å¯å®šæ—¶å™¨</li>
<li>æ”¶åˆ°ACK(n)åœ¨[sendbase,sendbase+N-1]å†…:<ul>
<li>æ ‡è®°åˆ†ç»„nè¢«æ¥æ”¶</li>
<li>å¦‚æœnæ˜¯æœ€å°çš„æœªç¡®è®¤åˆ†ç»„ï¼Œåˆ™å¢åŠ çª—å£åŸºåºå·åˆ°ä¸‹ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„åºå·</li>
</ul>
</li>
</ul>
<p><strong>æ¥æ”¶æ–¹</strong></p>
<ul>
<li><p>åˆ†ç»„nçš„åºå·åœ¨[rcvbase, rcvbase+N-1]å†…</p>
<ul>
<li><p>å‘é€ACK(n)</p>
</li>
<li><p>å¤±åºåˆ†ç»„: ç¼“å†²</p>
</li>
<li><p>æœ‰åºåˆ†ç»„: äº¤ä»˜ä¸Šå±‚ (åŒ…æ‹¬å·²ç»ç¼“å†²çš„æœ‰åºåˆ†ç»„), æé«˜çª—å£åˆ°ä¸‹ä¸€ä¸ªæ²¡æœ‰æ¥æ”¶çš„åˆ†ç»„</p>
</li>
</ul>
</li>
<li><p>åˆ†ç»„nåœ¨[rcvbase-N,rcvbase-1]å†…</p>
<ul>
<li>å‘é€ACK(n)</li>
</ul>
</li>
<li><p>å…¶ä»–ï¼šå¿½ç•¥</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-18-28.png"></p>
<p>é€‰æ‹©æ€§é‡ä¼ : ä¸¤éš¾é€‰æ‹©</p>
<p>ä¾‹å­: </p>
<p>åºå·: 0, 1, 2, 3</p>
<p>window size&#x3D;3</p>
<p>åœ¨ä¸¤ç§æƒ…å†µä¸‹æ¥æ”¶æ–¹æ²¡æœ‰æ„Ÿè§‰åˆ°å·®åˆ«!</p>
<p>Q: çª—å£å¤§å°å’Œåºå·å¤§å°æœ‰ä»€ä¹ˆå…³ç³»?</p>
<p>A: çª—å£å°äºæˆ–ç­‰äºåºå·ç©ºé—´å¤§å°çš„ä¸€åŠ</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-18-55.png"></p>
<p><strong>å¯é æ•°æ®ä¼ è¾“æœºåˆ¶åŠç”¨é€”æ€»ç»“</strong></p>
<table>
<thead>
<tr>
<th>æœºåˆ¶</th>
<th align="left">ç”¨é€”å’Œè¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>æ£€éªŒå’Œ</td>
<td align="left">ç”¨äºæ£€æµ‹åœ¨ä¸€ä¸ªä¼ è¾“åˆ†ç»„ä¸­çš„æ¯”ç‰¹é”™è¯¯ã€‚</td>
</tr>
<tr>
<td>å®šæ—¶å™¨</td>
<td align="left">ç”¨äºæ£€æµ‹è¶…æ—¶&#x2F;é‡ä¼ ä¸€ä¸ªåˆ†ç»„ï¼Œå¯èƒ½å› ä¸ºè¯¥åˆ†ç»„ï¼ˆæˆ–å…¶ACKï¼‰åœ¨ä¿¡é“ä¸­ä¸¢å¤±äº†ã€‚ç”±äºå½“ä¸€ä¸ªåˆ†ç»„è¢«æ—¶å»¶ä½†æœªä¸¢å¤±ï¼ˆè¿‡æ—©è¶…æ—¶ï¼‰ï¼Œæˆ–å½“ä¸€ä¸ªåˆ†ç»„å·²è¢«æ¥æ”¶æ–¹æ”¶åˆ°ä½†ä»æ¥æ”¶æ–¹åˆ°å‘é€æ–¹çš„ACKä¸¢å¤±æ—¶ï¼Œå¯èƒ½äº§ç”Ÿè¶…æ—¶äº‹ä»¶ï¼Œæ‰€ä»¥æ¥æ”¶æ–¹å¯èƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªåˆ†ç»„çš„å¤šä¸ªå†—ä½™æ‹·è´ã€‚</td>
</tr>
<tr>
<td>åºå·</td>
<td align="left">ç”¨äºä¸ºä»å‘é€æ–¹æµå‘æ¥æ”¶æ–¹çš„æ•°æ®åˆ†ç»„æŒ‰é¡ºåºç¼–å·ã€‚æ‰€æ¥æ”¶åˆ†ç»„çš„åºå·é—´çš„ç©ºéš™å¯ä½¿è¯¥æ¥æ”¶æ–¹æ£€æµ‹å‡ºä¸¢å¤±çš„åˆ†ç»„ã€‚å…·æœ‰ç›¸åŒåºå·çš„åˆ†ç»„å¯ä½¿æ¥æ”¶æ–¹æ£€æµ‹å‡ºä¸€ä¸ªåˆ†ç»„çš„å†—ä½™æ‹·è´ã€‚</td>
</tr>
<tr>
<td>ç¡®è®¤</td>
<td align="left">æ¥æ”¶æ–¹ç”¨äºå‘Šè¯‰å‘é€æ–¹ä¸€ä¸ªåˆ†ç»„æˆ–ä¸€ç»„åˆ†ç»„å·²è¢«æ­£ç¡®åœ°æ¥æ”¶åˆ°äº†ã€‚ç¡®è®¤æŠ¥æ–‡é€šå¸¸æºå¸¦ç€è¢«ç¡®è®¤çš„åˆ†ç»„æˆ–å¤šä¸ªåˆ†ç»„çš„åºå·ã€‚ç¡®è®¤å¯ä»¥æ˜¯é€ä¸ªçš„æˆ–ç´¯ç§¯çš„ï¼Œè¿™å–å†³äºåè®®ã€‚</td>
</tr>
<tr>
<td>å¦å®šç¡®è®¤</td>
<td align="left">æ¥æ”¶æ–¹ç”¨äºå‘Šè¯‰å‘é€æ–¹æŸä¸ªåˆ†ç»„æœªè¢«æ­£ç¡®åœ°æ¥æ”¶ã€‚å¦å®šç¡®è®¤æŠ¥æ–‡é€šå¸¸æºå¸¦ç€æœªè¢«æ­£ç¡®æ¥æ”¶çš„åˆ†ç»„çš„åºå·ã€‚</td>
</tr>
<tr>
<td>çª—å£ã€æµæ°´çº¿</td>
<td align="left">å‘é€æ–¹ä¹Ÿè®¸è¢«é™åˆ¶ä»…å‘é€é‚£äº›åºå·è½åœ¨ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„åˆ†ç»„ã€‚é€šè¿‡å…è®¸ä¸€æ¬¡å‘é€å¤šä¸ªåˆ†ç»„ä½†æœªè¢«ç¡®è®¤ï¼Œå‘é€æ–¹çš„åˆ©ç”¨ç‡å¯åœ¨åœç­‰æ“ä½œæ¨¡å¼çš„åŸºç¡€ä¸Šå¾—åˆ°å¢åŠ ã€‚æˆ‘ä»¬å¾ˆå¿«å°†ä¼šçœ‹åˆ°ï¼Œçª—å£é•¿åº¦å¯æ ¹æ®æ¥æ”¶æ–¹æ¥æ”¶å’Œç¼“å­˜æŠ¥æ–‡çš„èƒ½åŠ›æˆ–ç½‘ç»œä¸­çš„æ‹¥å¡ç¨‹åº¦ï¼Œæˆ–ä¸¤è€…æƒ…å†µæ¥è¿›è¡Œè®¾ç½®ã€‚</td>
</tr>
</tbody></table>
<p>13ã€TCPæ˜¯é¢å‘é¢å‘è¿æ¥ä¼ è¾“</p>
<ul>
<li><p>ç‚¹åˆ°ç‚¹:</p>
<ul>
<li>ä¸€ä¸ªå‘é€è€…,ä¸€ä¸ªæ¥æ”¶è€…</li>
</ul>
</li>
<li><p>å¯é æŒ‰åºçš„å­—èŠ‚æµ:</p>
<ul>
<li>æ²¡æœ‰â€œä¿¡æ¯è¾¹ç•Œâ€</li>
</ul>
</li>
<li><p>æµæ°´çº¿:</p>
<ul>
<li>TCP æ‹¥å¡å’Œæµé‡æ§åˆ¶è®¾ç½®çª—å£å¤§å°</li>
</ul>
</li>
<li><p>æ”¶å‘ç¼“å†²åŒº<br><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-19-16.png"></p>
</li>
<li><p>å…¨åŒå·¥æ•°æ®:</p>
<ul>
<li>åŒä¸€ä¸ªè¿æ¥ä¸Šçš„åŒå‘æ•°æ®æµ</li>
<li>MSS: æœ€å¤§æŠ¥æ–‡æ®µé•¿</li>
</ul>
</li>
<li><p>é¢å‘è¿æ¥: </p>
<ul>
<li>åœ¨æ•°æ®äº¤æ¢å‰æ¡æ‰‹(äº¤æ¢æ§åˆ¶ä¿¡æ¯)</li>
<li>è¿æ¥çŠ¶æ€åªåœ¨è¿æ¥çš„ä¸¤ç«¯ä¸­ç»´æŠ¤ï¼Œåœ¨æ²¿é€”èŠ‚ç‚¹ä¸­å¹¶ä¸ç»´æŠ¤çŠ¶æ€ã€‚</li>
<li>TCPè¿æ¥åŒ…æ‹¬ï¼šä¸¤å°ä¸»æœºä¸Šçš„ç¼“å­˜ã€è¿æ¥çŠ¶æ€å˜é‡ã€socketç­‰</li>
</ul>
</li>
<li><p>æµé‡æ§åˆ¶:</p>
<ul>
<li>å‘é€æ–¹ä¸ä¼šæ·¹æ²¡æ¥æ”¶æ–¹</li>
</ul>
</li>
</ul>
<p><strong>TCPæ˜¯é¢å‘å­—èŠ‚æµ</strong>ï¼Œè™½ç„¶åº”ç”¨ç¨‹åºå’ŒTCPçš„äº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½†TCPæŠŠåº”ç”¨ç¨‹åºçœ‹æˆæ˜¯ä¸€è¿ä¸²çš„æ— ç»“æ„çš„å­—èŠ‚æµã€‚TCPæœ‰ä¸€ä¸ªç¼“å†²ï¼Œå½“åº”ç”¨ç¨‹åºä¼ é€çš„æ•°æ®å—å¤ªé•¿ï¼ŒTCPå°±å¯ä»¥æŠŠå®ƒåˆ’åˆ†çŸ­ä¸€äº›å†ä¼ é€ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸€æ¬¡åªå‘é€ä¸€ä¸ªå­—èŠ‚ï¼ŒTCPä¹Ÿå¯ä»¥ç­‰å¾…ç§¯ç´¯æœ‰è¶³å¤Ÿå¤šçš„å­—èŠ‚åå†æ„æˆæŠ¥æ–‡æ®µå‘é€å‡ºå»ã€‚</p>
<p><strong>æœ‰å¯èƒ½å°†å¤šæ¡æ•°æ®å½“æˆä¸€æ¡æ•°æ®è¿›è¡Œå¤„ç†</strong>ï¼Œå› æ­¤éœ€è¦åœ¨åº”ç”¨å±‚è¿›è¡Œæ•°æ®çš„è¾¹ç•Œç®¡ç†</p>
<p>ç¼–ç¨‹å½±å“ï¼šä¸Šå±‚å¯èƒ½ä¼šå°†å¤šæ¡æ•°æ®å½“åšä¸€æ¡æ•°æ®å¤„ç†ã€‚</p>
<p>ç‰¹æ®Šå­—ç¬¦é—´éš”ï¼š ä½¿ç”¨æ­¤æ–¹æ³•åˆ™å¿…é¡»å¯¹æ•°æ®ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œå¦åˆ™ä¼šé€ æˆäºŒä¹‰</p>
<p>æ•°æ®å®šé•¿ï¼šè§„å®šå›ºå®šé•¿åº¦çš„æ•°æ®ï¼Œå®é™…æ•°æ®å°‘çš„åˆ™éœ€è¦è¿›è¡Œè¡¥ä½</p>
<p>åœ¨åº”ç”¨å±‚å¤´éƒ¨å®šä¹‰æ•°æ®é•¿åº¦ï¼ˆä¾‹å¦‚httpåè®®ï¼Œå…ˆå–å¤´éƒ¨ï¼Œå†æ ¹æ®å¤´éƒ¨ä¸­çš„æ•°æ®é•¿åº¦å–å‡ºæ•°æ®ï¼‰</p>
<p>14ã€TCPæŠ¥æ–‡æ ¼å¼ï¼ˆå­—æ®µå«ä¹‰&#x2F;ç”¨é€”ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-19-52.png"></p>
<p>15ã€ TCP å¾€è¿”æ—¶å»¶çš„ä¼°è®¡å’Œè¶…æ—¶</p>
<p>è®¾ç½®è¶…æ—¶</p>
<ul>
<li><p>EstimtedRTT åŠ ä¸Š â€œå®‰å…¨ä½™é‡â€ </p>
</li>
<li><p>EstimatedRTTå˜åŒ–å¤§ -&gt; æ›´å¤§çš„å®‰å…¨ä½™é‡</p>
</li>
</ul>
<p>SampleRTT åç¦» EstimatedRTTå¤šå°‘çš„ä¼°è®¡</p>
<ul>
<li>DevRTT &#x3D; (1-Î²)*DevRTT +Î²*| SampleRTT-EstimatedRTT |    (å…¸å‹åœ°, Î² &#x3D; 0.25)</li>
</ul>
<p>ç„¶åè®¾ç½®è¶…æ—¶æ—¶é—´é—´éš”:   </p>
<p> TimeoutInterval &#x3D; EstimatedRTT + 4*DevRTT</p>
<p>è®¾ç½®è¶…æ—¶</p>
<p>åˆå§‹æ—¶TimeoutIntervalè®¾ç½®ä¸º1ç§’</p>
<p>ç¬¬ä¸€ä¸ªæ ·æœ¬RTTè·å¾—åï¼Œ EstimatedRTT&#x3D;SampleRTTï¼ŒDevRTT&#x3D;SampleRTT&#x2F;2ï¼Œ     TimeoutInterval &#x3D;EstimatedRTT + max (G, K*DevRTT) ï¼ˆK&#x3D;4ï¼ŒGæ˜¯ç”¨æˆ·è®¾ç½®çš„æ—¶é—´ç²’åº¦ï¼‰</p>
<p>16ã€TCPå¯é æ•°æ®ä¼ è¾“</p>
<p><strong>TCP å‘é€æ–¹äº‹ä»¶</strong></p>
<ul>
<li><p>ä»åº”ç”¨ç¨‹åºæ¥æ”¶æ•°æ®:</p>
<ul>
<li>ç”¨åºå·åˆ›é€ ä¸€ä¸ªæŠ¥æ–‡</li>
<li>åºå·æ˜¯æŠ¥æ–‡ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚åœ¨å­—èŠ‚æµä¸­çš„ä½ç½®ç¼–å·</li>
<li>å¦‚æœæ²¡æœ‰å¯åŠ¨å®šæ—¶å™¨ï¼Œåˆ™å¯åŠ¨å®šæ—¶å™¨ ï¼ˆå®šæ—¶å™¨æ˜¯æœ€æ—©æ²¡æœ‰è¢«ç¡®è®¤çš„æŠ¥æ–‡å‘é€æ—¶å¯åŠ¨çš„ï¼‰</li>
<li>è®¾ç½®è¶…æ—¶é—´éš”: TimeOutInterval</li>
</ul>
</li>
<li><p>è¶…æ—¶:</p>
<ul>
<li>é‡å‘å¯¼è‡´è¶…æ—¶çš„æŠ¥æ–‡</li>
<li>é‡æ–°å¼€å§‹å®šæ—¶å™¨</li>
</ul>
</li>
<li><p>æ”¶åˆ°ç¡®è®¤:</p>
<ul>
<li>å¦‚æœACKè½åœ¨çª—å£ä¹‹å†…ï¼Œåˆ™ç¡®è®¤å¯¹åº”çš„æŠ¥æ–‡ï¼Œå¹¶ä¸”æ»‘åŠ¨çª—å£ </li>
<li>è‹¥è¿˜æœ‰æœªç¡®è®¤çš„æŠ¥æ–‡ï¼Œé‡æ–°å¼€å§‹å®šæ—¶å™¨</li>
</ul>
</li>
</ul>
<p><strong>TCP æ¥æ”¶æ–¹äº‹ä»¶</strong></p>
<table>
<thead>
<tr>
<th>æ¥æ”¶æ–¹çš„äº‹ä»¶</th>
<th>TCP æ¥æ”¶æ–¹è¡Œä¸º</th>
</tr>
</thead>
<tbody><tr>
<td>æœŸæœ›åºå·çš„æŠ¥æ–‡æ®µæŒ‰åºåˆ°è¾¾. æ‰€æœ‰åœ¨æœŸæœ›åºå·ä»¥å‰çš„æŠ¥æ–‡æ®µéƒ½è¢«ç¡®è®¤</td>
<td>å»¶è¿ŸACK. ç­‰åˆ° 500msçœ‹æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œå¦‚æœæ²¡æœ‰ï¼Œå‘é€ACK</td>
</tr>
<tr>
<td>æœŸæœ›åºå·çš„æŠ¥æ–‡æ®µæŒ‰åºåˆ°è¾¾.å¦ä¸€ä¸ªæŒ‰åºæŠ¥æ–‡æ®µç­‰å¾…å‘é€ACK</td>
<td>ç«‹å³å‘é€å•ä¸ªç´¯ç§¯ACK, ç¡®è®¤ä¸¤ä¸ªæœ‰åºçš„æŠ¥æ–‡æ®µ</td>
</tr>
<tr>
<td>æ”¶åˆ°ä¸€ä¸ªå¤±åºçš„æŠ¥æ–‡æ®µï¼Œé«˜äºæœŸæœ›çš„åºå·ï¼Œæ£€æµ‹åˆ°ç¼éš™</td>
<td>ç«‹å³å‘é€é‡å¤ ACK, æŒ‡å‡ºæœŸæœ›çš„åºå·</td>
</tr>
<tr>
<td>åˆ°è¾¾çš„æŠ¥æ–‡æ®µéƒ¨åˆ†åœ°æˆ–è€…å®Œå…¨åœ°å¡«å……æ¥æ”¶æ•°æ®é—´éš”</td>
<td>ç«‹å³å‘é€ ACK, è¯å®ç¼éš™ä½ç«¯çš„æŠ¥æ–‡æ®µå·²ç»æ”¶åˆ°</td>
</tr>
</tbody></table>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-21-16.png"></p>
<p><strong>è¶…æ—¶é—´éš”åŠ å€</strong></p>
<ul>
<li><p>TCPæ¯æ¬¡é‡ä¼ ï¼Œéƒ½ä¼šæŠŠä¸‹ä¸€æ¬¡çš„è¶…æ—¶é—´éš”è®¾ç½®ä¸ºå…ˆå‰å€¼çš„ä¸¤å€ã€‚</p>
</li>
<li><p>ä½†æ˜¯å½“æ”¶åˆ°ä¸Šå±‚åº”ç”¨çš„æ•°æ®å’Œæ”¶åˆ°ACKä¸¤ä¸ªäº‹ä»¶ä¸­çš„ä»»ä½•ä¸€ä¸ªå‘ç”Ÿæ—¶ï¼Œå®šæ—¶å™¨çš„TimeoutIntervalå€¼æ¢å¤ä¸ºç”±è¿‘æœŸçš„EstimatedRTTå’ŒDevRTTè®¡ç®—å¾—åˆ°ã€‚</p>
</li>
<li><p>TimeoutInterval &#x3D;EstimatedRTT + max (G, K*DevRTT) ï¼ˆK&#x3D;4ï¼ŒGæ˜¯ç”¨æˆ·è®¾ç½®çš„æ—¶é—´ç²’åº¦ï¼‰</p>
</li>
</ul>
<p><strong>å¿«é€Ÿé‡ä¼ </strong></p>
<ul>
<li>å‘é€æ–¹å¯ä»¥åœ¨è¶…æ—¶ä¹‹å‰é€šè¿‡é‡å¤çš„ACKæ£€æµ‹ä¸¢å¤±æŠ¥æ–‡æ®µ</li>
<li>å‘é€æ–¹å¸¸å¸¸ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å‘é€å¾ˆå¤šæŠ¥æ–‡æ®µ</li>
<li>å¦‚æœæŠ¥æ–‡æ®µä¸¢å¤±,åˆ™å‘é€æ–¹å°†å¯èƒ½æ¥æ”¶åˆ°å¾ˆå¤šé‡å¤çš„ ACKs</li>
<li>å¦‚æœå‘é€æ–¹æ”¶åˆ°4ä¸ªå¯¹åŒæ ·æŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼Œåˆ™å‘é€æ–¹è®¤ä¸ºè¯¥æŠ¥æ–‡æ®µä¹‹åçš„æ•°æ®å·²ç»ä¸¢å¤±ã€‚</li>
<li>å¯åŠ¨<strong>å¿«é€Ÿé‡ä¼ </strong>: åœ¨å®šæ—¶å™¨è¶…æ—¶ä¹‹å‰é‡å‘ä¸¢å¤±çš„æŠ¥æ–‡æ®µ</li>
</ul>
<p>17ã€ TCP æµé‡æ§åˆ¶æœºåˆ¶</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-21-33.png"></p>
<p>(å‡è®¾ TCP æ¥æ”¶æ–¹ä¸¢å¼ƒå¤±åºçš„æŠ¥æ–‡æ®µ)</p>
<ul>
<li><p>ç¼“å†²åŒºçš„å‰©ä½™ç©ºé—´&#x3D; RcvWindow&#x3D; RcvBuffer-[LastByteRcvd - LastByteRead]</p>
</li>
<li><p>æ¥æ”¶æ–¹åœ¨æŠ¥æ–‡æ®µæ¥æ”¶çª—å£å­—æ®µä¸­é€šå‘Šå…¶æ¥æ”¶ç¼“å†²åŒºçš„å‰©ä½™ç©ºé—´</p>
</li>
<li><p>Senderé™åˆ¶è‡ªå·±å·²ç»å‘é€çš„ä½†è¿˜æœªæ”¶åˆ°ACKçš„æ•°æ®ä¸è¶…è¿‡æ¥æ”¶æ–¹çš„ç©ºé—²RcvWindowå°ºå¯¸</p>
</li>
<li><p>Receiverå‘ŠçŸ¥Senderï¼ŒRcvWindow&#x3D;0,ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-22-48.png"></p>
<p>18ã€ TCPè¿æ¥ç®¡ç†ï¼ˆåºå·ã€ç¡®è®¤åºå·ï¼‰</p>
<p><strong>å»ºç«‹è¿æ¥</strong></p>
<p>å›å¿†: TCPåœ¨äº¤æ¢æ•°æ®æŠ¥æ–‡æ®µä¹‹å‰åœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´å»ºç«‹è¿æ¥</p>
<p>åˆå§‹åŒ–TCP å˜é‡:</p>
<p>-åºå·</p>
<p>-ç¼“å†²åŒºæµæ§ä¿¡æ¯ (ä¾‹ï¼Œæ¥æ”¶çª—å£)</p>
<p>å®¢æˆ·: è¿æ¥å‘èµ·è€…  Socket clientSocket &#x3D; new   Socket(â€œhostnameâ€,â€port numberâ€); </p>
<p>æœåŠ¡å™¨: è¢«å®¢æˆ·è”ç³»  Socket connectionSocket &#x3D; welcomeSocket.accept();</p>
<p>ä¸‰æ¬¡æ¡æ‰‹ï¼š</p>
<p>Step 1: å®¢æˆ·å‘é€TCP SYNæŠ¥æ–‡æ®µåˆ°æœåŠ¡å™¨</p>
<p>-æŒ‡å®šåˆå§‹çš„åºå·</p>
<p>-æ²¡æœ‰æ•°æ®</p>
<p>Step 2: æœåŠ¡å™¨æ¥æ”¶SYN, å›å¤ SYN&#x2F;ACK æŠ¥æ–‡æ®µ</p>
<p>-æœåŠ¡å™¨åˆ†é…ç¼“å†²åŒº</p>
<p>-æŒ‡å®šæœåŠ¡å™¨çš„åˆå§‹åºå·</p>
<p>Step 3: å®¢æˆ·æ¥æ”¶ SYN&#x2F;ACK, å›å¤ ACK æŠ¥æ–‡æ®µ, å¯èƒ½åŒ…å«æ•°æ®</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-23-01.png"></p>
<p><strong>å…³é—­è¿æ¥</strong></p>
<p>å®¢æˆ·å…³é—­å¥—æ¥å­—: clientSocket.close	</p>
<p>Step 1: å®¢æˆ·å‘é€ TCP FIN æ§åˆ¶æŠ¥æ–‡æ®µåˆ°æœåŠ¡å™¨ </p>
<p>Step 2: æœåŠ¡å™¨æ¥æ”¶ FIN, å›å¤ ACK. è¿›å…¥åŠå…³é—­è¿æ¥çŠ¶æ€ï¼› </p>
<p>Step 3: æœåŠ¡å™¨å‘é€FINåˆ°å®¢æˆ·ï¼Œå®¢æˆ·æ¥æ”¶ FIN, å›å¤ ACKï¼Œè¿›å…¥ â€œtime waitâ€çŠ¶æ€ç­‰å¾…ç»“æŸæ—¶é‡Šæ”¾è¿æ¥èµ„æº</p>
<p>Step 4: æœåŠ¡å™¨æ¥æ”¶ ACK.  è¿æ¥å…³é—­. </p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-23-12.png"></p>
<p>19ã€æ‹¥å¡æ§åˆ¶çš„æ–¹æ³•</p>
<p>æ ¹æ®ç½‘è·¯å±‚æ˜¯å¦ä¸ºè¿è¾“å±‚æ‹¥å¡æ§åˆ¶æä¾›äº†æ˜¾ç¤ºå¸®åŠ©ï¼Œæ¥åŒºåˆ†æ‹¥å¡æ§åˆ¶æ–¹æ³•ã€‚åˆ†ä¸ºä¸¤ç±»æ–¹æ³•:</p>
<p>ç«¯åˆ°ç«¯æ‹¥å¡æ§åˆ¶:</p>
<ul>
<li>æ²¡æœ‰ä»ç½‘ç»œä¸­å¾—åˆ°æ˜ç¡®çš„åé¦ˆ</li>
<li>ä»ç«¯ç³»ç»Ÿè§‚å¯Ÿåˆ°çš„ä¸¢å¤±å’Œå»¶è¿Ÿæ¨æ–­å‡ºæ‹¥å¡</li>
<li>TCPé‡‡ç”¨çš„æ–¹æ³•</li>
</ul>
<p>ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶:</p>
<p>è·¯ç”±å™¨ç»™ç«¯ç³»ç»Ÿæä¾›åé¦ˆ</p>
<p>å•bitæŒ‡ç¤ºæ‹¥å¡ (SNA, DECnet, TCP&#x2F;IP ECN, ATM)</p>
<p>æŒ‡æ˜å‘é€è€…åº”è¯¥å‘é€çš„é€Ÿç‡</p>
<p>19ã€TCPæ‹¥å¡æ§åˆ¶ï¼ˆæ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ã€å¿«é€Ÿæ¢å¤ï¼›æ€»ç»“: TCP æ‹¥å¡æ§åˆ¶ï¼‰</p>
<ul>
<li><p>ç«¯åˆ°ç«¯æ§åˆ¶ (æ²¡æœ‰ç½‘ç»œè¾…åŠ©)</p>
</li>
<li><p>å‘é€æ–¹é™åˆ¶å‘é€:  LastByteSent-LastByteAcked  &lt;min( CongWin , RcvWindow )</p>
</li>
<li><p>å¤§ä½“ä¸Š,</p>
<p>rate&#x3D;CongWin &#x2F;RTT(Bytes&#x2F;sec)ï¼ŒCongWin æ˜¯åŠ¨æ€çš„, æ„ŸçŸ¥çš„ç½‘ç»œæ‹¥å¡çš„å‡½æ•°</p>
</li>
<li><p>å‘é€æ–¹å¦‚ä½•æ„ŸçŸ¥æ‹¥å¡ ?</p>
<ul>
<li>ä¸¢å¤±äº‹ä»¶ &#x3D; è¶…æ—¶æˆ–è€… 3 ä¸ªé‡å¤çš„ACKs</li>
<li>TCP å‘é€æ–¹åœ¨ä¸¢å¤±äº‹ä»¶å‘ç”Ÿåé™ä½å‘é€é€Ÿç‡ (CongWin)</li>
</ul>
</li>
<li><p>å¦‚ä½•åˆç†æ§åˆ¶å‘é€é€Ÿç‡ï¼Ÿ</p>
<ul>
<li>AIMDï¼ˆæ‹¥å¡é¿å…ï¼‰</li>
<li>æ…¢å¯åŠ¨</li>
</ul>
</li>
</ul>
<p><strong>TCP AIMD(Additive-increase,multiplicative-decrease)</strong></p>
<p><strong>åŸç†</strong>ï¼šå‘é€æ–¹å¢åŠ ä¼ è¾“é€Ÿç‡ï¼ˆçª—å£å¤§å°ï¼‰ï¼Œè°¨æ…åœ°æ¢æµ‹å¯ç”¨å¸¦å®½ï¼Œç›´åˆ°å‘ç”Ÿä¸¢åŒ…äº‹ä»¶</p>
<p><strong>æ–¹æ³•ï¼šAIMD</strong></p>
<ul>
<li>åŠ æ€§é€’å¢: æ¯ä¸ªRTTå†…å¦‚æœæ²¡æœ‰ä¸¢å¤±äº‹ä»¶å‘ç”Ÿï¼Œæ‹¥å¡çª—å£å¢åŠ 1ä¸ªMSSï¼ˆæ‹¥å¡é¿å…ï¼‰</li>
<li>ä¹˜æ€§é€’å‡: å‘ç”Ÿä¸¢åŒ…äº‹ä»¶åå°†æ‹¥å¡çª—å£å‡åŠ</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-24-05.png"></p>
<p><strong>TCP æ…¢å¯åŠ¨ï¼ˆslow  startï¼‰</strong></p>
<ul>
<li><p>è¿æ¥å¼€å§‹çš„æ—¶å€™, CongWin &#x3D; 1 MSS</p>
<ul>
<li><p>Example: MSS &#x3D; 500 bytes &amp; RTT &#x3D; 200 msec</p>
</li>
<li><p>åˆå§‹é€Ÿç‡ &#x3D; 20 kbps</p>
</li>
</ul>
</li>
<li><p>æœ‰æ•ˆå¸¦å®½å°† &gt;&gt; MSS&#x2F;RTT     </p>
<ul>
<li>å¸Œæœ›å°½å¿«è¾¾åˆ°æœŸå¾…çš„é€Ÿç‡ï¼Œæ•…å°†ä»¥2çš„æŒ‡æ•°æ–¹å¼å¢åŠ é€Ÿç‡ã€‚</li>
</ul>
</li>
<li><p>æ•…ä»¥æŒ‡æ•°æ–¹å¼å¢åŠ é€Ÿç‡ï¼Œç›´åˆ°äº§ç”Ÿä¸¢å¤±äº‹ä»¶ï¼Œæˆ–è€…è¾¾åˆ°æŸä¸ªé˜ˆå€¼ssthresh</p>
</li>
</ul>
<p><strong>ssthreshï¼ˆé˜ˆå€¼ï¼‰å˜é‡</strong></p>
<p>ï¼ˆå‘é€<strong>ä¸¢å¤±äº‹ä»¶</strong>åï¼Œssthreshè®¾ç½®ä¸º<strong>ä¸¢å¤±äº‹ä»¶</strong>äº‹ä»¶å‰çš„ CongWin çš„1&#x2F;2ï¼‰</p>
<p>ä»€ä¹ˆæ—¶å€™ä»æŒ‡æ•°å¢åŠ å˜ä¸ºçº¿æ€§å¢åŠ ï¼ˆæ‹¥å¡é¿å…ï¼‰?</p>
<ul>
<li>å½“CongWinè¾¾åˆ°ssthreshæ—¶ã€‚</li>
<li>æ¯æ”¶åˆ°1ä¸ªACK, CongWin &#x3D;CongWin + (MSS&#x2F; CongWin)*MSS</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-24-39.png"></p>
<p><strong>å¯¹æ‹¥å¡äº‹ä»¶çš„ååº”</strong></p>
<ul>
<li>å½“è¶…æ—¶äº‹ä»¶å‘ç”Ÿæ—¶:<ul>
<li>CongWin ç«‹å³è®¾ç½®ä¸º 1ä¸ª MSSï¼› </li>
<li>çª—å£å¼€å§‹æŒ‡æ•°å¢é•¿ï¼ˆè¿›å…¥æ…¢å¯åŠ¨ï¼‰</li>
<li>åˆ°è¾¾ä¸€ä¸ªé˜ˆå€¼åå†çº¿æ€§å¢é•¿</li>
</ul>
</li>
<li>æ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ç¡®è®¤æ—¶ï¼š<ul>
<li>CongWin å‡åŠ+3 (Renoç‰ˆ) </li>
<li>ç„¶åï¼Œçª—å£çº¿æ€§å¢é•¿ï¼ˆå¿«é€Ÿæ¢å¤ï¼‰</li>
</ul>
</li>
</ul>
<p>æ³¨ï¼šä¸Šè¿°ä¸ºTCP Renoç‰ˆæœ¬çš„å†…å®¹ï¼Œåœ¨TCP Tahoeç‰ˆæœ¬é‡Œï¼Œæ— è®ºè¶…æ—¶è¿˜æ˜¯ä¸‰ä¸ªé‡å¤ï¼Œéƒ½ç›´æ¥å°†CongWin ç½®ä¸º 1ä¸ª MSS</p>
<p>æ€ä¹ˆç†è§£ä¸åŒçš„ä¸¢åŒ…äº‹ä»¶ï¼Ÿ</p>
<ul>
<li>3 ä¸ªé‡å¤çš„ ACKs è¡¨æ˜ç½‘ç»œå…·æœ‰ä¼ è¾“ä¸€äº›æ•°æ®æ®µçš„èƒ½åŠ›</li>
<li>åœ¨ä¸‰ä¸ªé‡å¤çš„ç¡®è®¤ä¹‹å‰è¶…æ—¶æ˜¯â€œæ›´åŠ ä¸¥é‡çš„è­¦å‘Šâ€</li>
</ul>
<p><em>åœ¨å¿«é€Ÿæ¢å¤é˜¶æ®µï¼š</em></p>
<ul>
<li>å¯¹äºå¼•èµ·TCPè¿›å…¥å¿«é€Ÿæ¢å¤çŠ¶æ€çš„<strong>ç¼ºå¤±æŠ¥æ–‡æ®µ</strong>ï¼Œæ¯æ”¶åˆ°ä¸€ä¸ªå†—ä½™çš„ACKï¼ŒCongWinçš„å€¼å¢åŠ ä¸€ä¸ªMSSã€‚</li>
<li>æœ€ç»ˆï¼Œå½“å¯¹ä¸¢å¤±çš„æŠ¥æ–‡æ®µçš„ä¸€ä¸ªACKåˆ°è¾¾æ—¶ï¼ŒTCPåœ¨é™ä½ CongWinï¼ˆcwnd &#x3D; ssthreshï¼‰åï¼Œè¿›å…¥<strong>æ‹¥å¡é¿å…</strong>çŠ¶æ€ã€‚</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-24-39.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-22_11-25-51.png"></p>
<hr>
<p>UDP æŠ¥æ–‡å®ç°å·®é”™æ£€æµ‹æ—¶ï¼Œä¸éœ€è¦åœ¨ç½‘ç»œä¸Šä¼ è¾“çš„éƒ¨åˆ†æ˜¯ï¼ˆA ï¼‰ </p>
<p>A. ä¼ªé¦–éƒ¨ 	B. é¦–éƒ¨ 		C. æ•°æ® 		D. æ ¡éªŒå’Œ</p>
<p>è¿è¾“å±‚åè®®åœ¨ç«¯ç³»ç»Ÿå’Œè·¯ç”±å™¨ä¸­éƒ½å¯ä»¥å®ç°ã€‚(  Ã—  )</p>
<p>æ•°æ®0x9876A543çš„åå…­æ¯”ç‰¹å› ç‰¹ç½‘æ ¡éªŒå’Œä¸ºï¼ˆ C      ï¼‰</p>
<p>Aã€0x3DB9	Bã€0x3DBA	Cã€0xC245	Dã€0xC246</p>
<p>åå…­æ¯”ç‰¹å› ç‰¹ç½‘æ ¡éªŒå’Œæ˜¯é€šè¿‡å°†æ•°æ®åˆ†æˆ16ä½çš„å­—ï¼Œç„¶åå°†è¿™äº›å­—ç›¸åŠ ï¼Œå¦‚æœæœ‰æº¢å‡ºåˆ™å°†æº¢å‡ºéƒ¨åˆ†åŠ åˆ°ç»“æœä¸Šï¼Œæœ€åå¯¹ç»“æœå–åå¾—åˆ°çš„ã€‚å¯¹äºæ•°æ®0x9876A543ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†æˆä¸¤ä¸ª16ä½çš„å­—ï¼š0x9876å’Œ0xA543ã€‚å°†è¿™ä¸¤ä¸ªå­—ç›¸åŠ å¾—åˆ°0x13DB9ï¼Œç”±äºæœ‰æº¢å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æº¢å‡ºéƒ¨åˆ†åŠ åˆ°ç»“æœä¸Šï¼Œå¾—åˆ°0x3DBAã€‚æœ€åå¯¹ç»“æœå–åå¾—åˆ°æ ¡éªŒå’Œä¸º0xC245ã€‚</p>
<p>UDPæœåŠ¡å™¨ç«¯å°†ä¸ºæ¯ä¸ªå®¢æˆ·çš„è¯·æ±‚å»ºç«‹ä¸€ä¸ªæ–°çš„å¥—æ¥å­—ã€‚  ï¼ˆ  Ã—    ï¼‰</p>
<p>TCP ä¸­ï¼Œå¥—æ¥å­—æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚å¦‚è¦å‘ 10 ä¸ªå®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆé™¤äº†è´Ÿè´£ç›‘å¬çš„å¥—æ¥å­—å¤–ï¼Œè¿˜éœ€è¦åˆ›å»º 10 å¥—æ¥å­—ã€‚ä½†åœ¨ UDP ä¸­ï¼Œä¸ç®¡æ˜¯æœåŠ¡å™¨ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½åªéœ€è¦ 1 ä¸ªå¥—æ¥å­—ã€‚</p>
<p>ä¸€æ¡çº¿è·¯å¸¦å®½ä¸º1Mbpsï¼Œå¾€è¿”æ—¶å»¶ä¸º45msï¼Œå‡è®¾æ•°æ®å¸§çš„å¤§å°ä¸º1000å­—èŠ‚ã€‚è‹¥é‡‡ç”¨åœç­‰åè®®æ–¹å¼ï¼Œå®é™…çš„æ•°æ®ç‡å¤§çº¦æ˜¯ï¼ˆ  C    ï¼‰ã€‚</p>
<p>Aã€15Kbps  Bã€1.5Kbps  Cã€151Kbps  Dã€1510Kbps</p>
<p>ç”±äºå¸¦å®½ä¸º1Mbpsï¼Œæ‰€ä»¥å‘é€ä¸€ä¸ª1000å­—èŠ‚çš„æ•°æ®å¸§éœ€è¦8msã€‚åŠ ä¸Šå¾€è¿”æ—¶å»¶45msï¼Œæ€»å…±éœ€è¦53msæ‰èƒ½å‘é€ä¸€ä¸ªæ•°æ®å¸§ã€‚å› æ­¤ï¼Œå®é™…çš„æ•°æ®ç‡ä¸º1000å­—èŠ‚&#x2F;53ms &#x3D; 151.51Kbpsã€‚</p>
<p>åœ¨é€‰æ‹©é‡ä¼ åè®®ä¸­ï¼Œå‡è®¾å‘é€çª—å£å’Œæ¥æ”¶çª—å£çš„å¤§å°ç›¸ç­‰ï¼Œå¦‚æœç”¨æ¥è¡¨ç¤ºåˆ†ç»„åºå·çš„å­—æ®µé•¿åº¦ä¸º8ä¸ªæ¯”ç‰¹ï¼Œåˆ™å‘é€æ–¹çª—å£é•¿åº¦æœ€å¤§ä¸ºï¼ˆ C ï¼‰ã€‚</p>
<p>Aã€32    Bã€64    Cã€128    Dã€256</p>
<p>åœ¨é€‰æ‹©é‡ä¼ åè®®ä¸­ï¼Œå‘é€çª—å£å’Œæ¥æ”¶çª—å£çš„å¤§å°ç›¸ç­‰ï¼Œç”¨æ¥è¡¨ç¤ºåˆ†ç»„åºå·çš„å­—æ®µé•¿åº¦ä¸º8ä¸ªæ¯”ç‰¹ï¼Œé‚£ä¹ˆåºå·çš„èŒƒå›´ä¸º0-255ã€‚ç”±äºé€‰æ‹©é‡ä¼ åè®®è¦æ±‚å‘é€çª—å£çš„å¤§å°ä¸èƒ½è¶…è¿‡åºå·ç©ºé—´çš„ä¸€åŠï¼Œæ‰€ä»¥å‘é€æ–¹çª—å£é•¿åº¦æœ€å¤§ä¸º256&#x2F;2&#x3D;128ã€‚</p>
<p>æµæ°´çº¿å¯é ä¼ è¾“æŠ€æœ¯ä¸­åºå·çš„æ•°é‡åº”è¯¥å¤§äºç­‰äºå‘é€çª—å£å’Œæ¥æ”¶çª—å£ä¹‹å’Œã€‚ï¼ˆâˆšï¼‰</p>
<p>å› ä¸ºåºå·çš„æ•°é‡å†³å®šäº†å¯ä»¥åŒæ—¶å‘é€çš„æ•°æ®å¸§çš„æ•°é‡ï¼Œè€Œå‘é€çª—å£å’Œæ¥æ”¶çª—å£ä¹‹å’Œå†³å®šäº†å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶çš„æ•°æ®å¸§çš„æ•°é‡ã€‚å¦‚æœåºå·çš„æ•°é‡å°äºå‘é€çª—å£å’Œæ¥æ”¶çª—å£ä¹‹å’Œï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°åºå·é‡å¤çš„æƒ…å†µï¼Œå¯¼è‡´æ•°æ®ä¼ è¾“å‡ºé”™ã€‚å› æ­¤ï¼Œä¸ºäº†ä¿è¯æµæ°´çº¿å¯é ä¼ è¾“æŠ€æœ¯çš„æ­£ç¡®æ€§ï¼Œåºå·çš„æ•°é‡åº”è¯¥å¤§äºç­‰äºå‘é€çª—å£å’Œæ¥æ”¶çª—å£ä¹‹å’Œã€‚</p>
<p>GBNå›é€€Nå¸§å¯é ä¼ è¾“ä¸­æŸä¸€åˆ†ç»„è¶…æ—¶æ—¶ï¼Œè¦é‡ä¼ è¯¥åˆ†ç»„åŠå…¶ä»¥åçš„æ‰€æœ‰åˆ†ç»„ã€‚ï¼ˆâˆšï¼‰</p>
<p>å› ä¸ºåœ¨GBNåè®®ä¸­ï¼Œæ¥æ”¶æ–¹åªèƒ½æŒ‰åºæ¥æ”¶æ•°æ®å¸§ï¼Œå¦‚æœæŸä¸€åˆ†ç»„ä¸¢å¤±ï¼Œé‚£ä¹ˆå…¶åé¢çš„æ‰€æœ‰åˆ†ç»„éƒ½æ— æ³•è¢«æ¥æ”¶æ–¹æ­£ç¡®æ¥æ”¶ã€‚å› æ­¤ï¼Œå½“æŸä¸€åˆ†ç»„è¶…æ—¶æ—¶ï¼Œå‘é€æ–¹éœ€è¦é‡ä¼ è¯¥åˆ†ç»„åŠå…¶ä»¥åçš„æ‰€æœ‰åˆ†ç»„ï¼Œä»¥ä¿è¯æ•°æ®çš„æ­£ç¡®ä¼ è¾“ã€‚</p>
<p>åœ¨é€‰æ‹©é‡ä¼ ï¼ˆSRï¼‰åè®®ä¸­ï¼Œå‘é€æ–¹å¯èƒ½ä¼šæ”¶åˆ°è½åœ¨å…¶å½“å‰çª—å£ä¹‹å¤–çš„åˆ†ç»„çš„ACKåŒ…ã€‚ï¼ˆâˆšï¼‰</p>
<p>æ¯”å¦‚ï¼Œå¦‚æœåºå·ä¸ºsendbaseçš„åˆ†ç»„å‘é€åï¼Œæ¥æ”¶æ–¹æ­£ç¡®çš„æ”¶åˆ°äº†è¯¥åˆ†ç»„ï¼Œä½†æ˜¯å¯¹å…¶åº”ç­”çš„ackè¶…æ—¶ï¼Œæ²¡æœ‰åˆ°ï¼Œäºæ˜¯å‘é€æ–¹åˆé‡å‘äº†åºå·ä¸ºsendbaseçš„åˆ†ç»„ã€‚è€Œæ¥æ”¶æ–¹ï¼Œä¹Ÿä¼šå†æ¬¡å‘é€ackã€‚ååˆ°çš„ackå°±å¯èƒ½åœ¨çª—å£å¤–ã€‚</p>
<p>èƒ½ä¸ºè®¡ç®—æœºç½‘ç»œé€šä¿¡æä¾›åŠ å¯†é˜²æŠ¤æœåŠ¡çš„åè®®æ˜¯(  B  )ã€‚</p>
<p>Aã€ARP	Bã€SSL    Cã€SMTP     Dã€PPP </p>
<p>SSLåè®®åœ¨ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ä¹‹é—´ï¼Œä¸ºç½‘ç»œé€šä¿¡æä¾›å®‰å…¨ä¿éšœã€‚</p>
<p>ARPï¼ˆAddress Resolution Protocolï¼‰æ˜¯ä¸€ç§ç”¨äºå°†IPåœ°å€è§£æä¸ºç‰©ç†åœ°å€çš„åè®®ï¼›SMTPï¼ˆSimple Mail Transfer Protocolï¼‰æ˜¯ä¸€ç§ç”¨äºå‘é€ç”µå­é‚®ä»¶çš„åè®®ï¼›PPPï¼ˆPoint-to-Point Protocolï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨ç‚¹å¯¹ç‚¹é“¾è·¯ä¸Šè¿›è¡Œæ•°æ®ä¼ è¾“çš„åè®®ã€‚</p>
<p>TCPæ˜¯ä¸€ä¸ªç‚¹å¯¹ç‚¹çš„åè®®ï¼Œåè®®åŒæ–¹è¿æ¥çš„ç«¯ç‚¹æ˜¯åº”ç”¨è¿›ç¨‹ç«¯å£å·ï¼ˆ âˆš     ï¼‰</p>
<p>TCPæŠ¥å¤´ä¸­çš„ç¡®è®¤å·æ˜¯æŒ‡ï¼ˆ    B    ï¼‰</p>
<p>Aã€ä¼ è¾“æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨ç¼“å†²åŒºä¸­çš„ä½ç½®ç¼–å· </p>
<p>Bã€æœŸå¾…æ¥æ”¶çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„ä½ç½®ç¼–å·</p>
<p>Cã€å·²è¿ç»­æ¥æ”¶çš„æœ€åä¸€ä¸ªå­—èŠ‚åœ¨ç¼“å†²åŒºä¸­çš„ä½ç½®ç¼–å·  </p>
<p>Dã€å½“å‰æ¥æ”¶æ•°æ®çš„åºå· </p>
<p>ç¡®è®¤å·ç”¨äºå‘Šè¯‰å‘é€æ–¹ï¼Œæ¥æ”¶æ–¹å·²ç»æˆåŠŸæ¥æ”¶åˆ°äº†å“ªäº›æ•°æ®ï¼ŒæœŸå¾…æ¥æ”¶çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯å¤šå°‘ã€‚è¿™æ ·ï¼Œå‘é€æ–¹å°±å¯ä»¥æ ¹æ®ç¡®è®¤å·æ¥åˆ¤æ–­å“ªäº›æ•°æ®å·²ç»è¢«æˆåŠŸæ¥æ”¶ï¼Œå“ªäº›æ•°æ®éœ€è¦é‡ä¼ ã€‚</p>
<p>å‡è®¾ä¸»æœº A é€šè¿‡ä¸€æ¡ TCP è¿æ¥å‘ä¸»æœº B å‘é€ä¸¤ä¸ªç´§æ¥ç€çš„ TCP æŠ¥æ–‡æ®µã€‚ç¬¬ä¸€ä¸ª æŠ¥æ–‡æ®µçš„åºå·ä¸º 90ï¼Œç¬¬äºŒä¸ªæŠ¥æ–‡æ®µåºå·ä¸º 110ã€‚<br>a. ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µä¸­æœ‰å¤šå°‘æ•°æ®ï¼Ÿ20 bytes<br>b. å‡è®¾ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µä¸¢å¤±è€Œç¬¬äºŒä¸ªæŠ¥æ–‡æ®µåˆ°è¾¾ä¸»æœº Bã€‚é‚£ä¹ˆåœ¨ä¸»æœº B å‘å¾€ä¸»æœº A çš„ç¡®è®¤æŠ¥æ–‡ä¸­ï¼Œç¡®è®¤å·åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿç¡®è®¤å· &#x3D; 90</p>
<p>å‡å®šä¸»æœºAé€šè¿‡TCPè¿æ¥å‘ä¸»æœºBå‘é€ä¸€ä¸ªåºå·ä¸º20çš„20å­—èŠ‚æŠ¥æ–‡æ®µåï¼Œé‚£ä¹ˆä¸»æœºAæ”¶åˆ°çš„ç¡®è®¤å·ä¸å¯èƒ½æ˜¯ï¼ˆ B ï¼‰</p>
<p>Aã€10  Bã€39  Cã€40   Dã€æ— æ³•ç¡®å®š</p>
<p>ä¸»æœºç”²å’Œä¸»æœºä¹™é—´å·²å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼Œä¸»æœºç”²å‘ä¸»æœºä¹™å‘é€äº†ä¸¤ä¸ªè¿ç»­çš„TCPæ®µï¼Œåˆ†åˆ«åŒ…å«300å­—èŠ‚å’Œ500å­—èŠ‚çš„æœ‰æ•ˆè½½è·ï¼Œç¬¬ä¸€ä¸ªæ®µçš„åºåˆ—å·ä¸º200ï¼Œä¸»æœºä¹™æ­£ç¡®æ¥æ”¶åˆ°ä¸¤ä¸ªæ®µåï¼Œå‘é€ç»™ä¸»æœºç”²çš„ç¡®è®¤åºåˆ—å·æ˜¯  ï¼ˆ D ï¼‰</p>
<p>Aï¼500  B.700  C.800  D.1000</p>
<p>TCPåè®®ä¸­çš„ç¡®è®¤å·è¡¨ç¤ºæ¥æ”¶æ–¹æœŸå¾…æ¥æ”¶çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚ç”±äºä¸»æœºç”²å‘é€äº†ä¸¤ä¸ªè¿ç»­çš„TCPæ®µï¼Œåˆ†åˆ«åŒ…å«300å­—èŠ‚å’Œ500å­—èŠ‚çš„æœ‰æ•ˆè½½è·ï¼Œæ‰€ä»¥ä¸»æœºä¹™æœŸå¾…æ¥æ”¶çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·åº”è¯¥æ˜¯200+300+500&#x3D;1000ã€‚</p>
<p>ä¸»æœºç”²ä¸ä¸»æœºä¹™ä¹‹é—´å·²å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼Œä¸»æœºç”²å‘ä¸»æœºä¹™å‘é€äº†3ä¸ªè¿ç»­çš„TCPæ®µï¼Œåˆ†åˆ«åŒ…å«300å­—èŠ‚ã€400å­—èŠ‚å’Œ500å­—èŠ‚çš„æœ‰æ•ˆè½½è·ï¼Œç¬¬3ä¸ªæ®µçš„åºå·ä¸º900ã€‚è‹¥ä¸»æœºä¹™ä»…æ­£ç¡®æ¥æ”¶åˆ°ç¬¬1å’Œç¬¬3ä¸ªæ®µï¼Œåˆ™ä¸»æœºä¹™å‘é€ç»™ä¸»æœºç”²çš„ç¡®è®¤åºå·æ˜¯ï¼ˆB     ï¼‰    </p>
<p>Aï¼300      Bï¼500      Cï¼1200     Dï¼1400 </p>
<p>TCPä»€ä¹ˆæ—¶å€™å¯¹æŠ¥æ–‡æ®µé‡‡ç”¨å¿«é€Ÿé‡ä¼ ï¼Ÿ (C)</p>
<p>Aã€æŠ¥æ–‡æ®µçš„å®šæ—¶å™¨è¿‡æœŸ                                      </p>
<p>Bã€ä¼°è®¡å¾€è¿”æ—¶å»¶è¿‡é•¿</p>
<p>Cã€æ”¶åˆ°ä¹‹å‰å‘å‡ºçš„ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ä¸‰ä¸ªé‡å¤ACK    </p>
<p>Dã€ä»¥ä¸Šéƒ½ä¸æ˜¯</p>
<p>å¿«é€Ÿé‡ä¼ æ˜¯TCPåè®®ä¸­çš„ä¸€ç§é‡ä¼ æœºåˆ¶ï¼Œå®ƒç”¨äºåœ¨æ”¶åˆ°ä¸‰ä¸ªæˆ–ä»¥ä¸Šçš„å†—ä½™ACKï¼ˆduplicate ACKï¼‰æ—¶å¿«é€Ÿé‡ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…ã€‚å½“å‘é€æ–¹æ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ACKæ—¶ï¼Œå®ƒå¯ä»¥æ¨æ–­å‡ºæ¥æ”¶æ–¹å·²ç»æˆåŠŸæ¥æ”¶äº†ä¹‹å‰çš„æŠ¥æ–‡æ®µï¼Œä½†æ˜¯å½“å‰çš„æŠ¥æ–‡æ®µä¸¢å¤±äº†ã€‚å› æ­¤ï¼Œå‘é€æ–¹ä¼šç«‹å³é‡ä¼ è¯¥æŠ¥æ–‡æ®µï¼Œè€Œä¸æ˜¯ç­‰å¾…å®šæ—¶å™¨è¿‡æœŸã€‚</p>
<p>ç½‘ç»œä¸Šæ‰€æŠ“åˆ°çš„TCPæ•°æ®æŠ¥æ–‡æ®µä¸­ï¼Œæœ‰ä¸€ä¸ªå­—æ®µRcvWindowï¼Œå…¶å«ä¹‰å’Œä½œç”¨ä¸ºï¼ˆ A ï¼‰</p>
<p>Aã€æ¥æ”¶å¯ç”¨ç©ºé—´å¤§å°ï¼Œç”¨äºæµé‡æ§åˆ¶       </p>
<p>Bã€å‘é€å¯ç”¨ç©ºé—´å¤§å°ï¼Œç”¨äºæµé‡æ§åˆ¶</p>
<p>Cã€å‘é€å¯ç”¨ç©ºé—´å¤§å°ï¼Œç”¨äºæ‹¥å¡æ§åˆ¶       </p>
<p>Dã€æ¥æ”¶å¯ç”¨ç©ºé—´å¤§å°ï¼Œç”¨äºæ‹¥å¡æ§åˆ¶</p>
<p>æ˜¯æ¥æ”¶æ–¹å‘å‘é€æ–¹æŒ‡ç¤ºæ¥æ”¶ç¼“å­˜å¯ç”¨ç©ºé—´çš„å¤§å°ï¼Œä¸»è¦ç”¨äºå‘é€æ–¹æ§åˆ¶å…¶å‘é€çª—å£çš„å¤§å°ã€‚</p>
<p>ä¸»æœºç”²å’Œä¸»æœºä¹™ä¹‹é—´å·²å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼ŒTCPæœ€å¤§æ®µé•¿åº¦ä¸º1000å­—èŠ‚ï¼Œè‹¥ä¸»æœºç”²çš„å½“å‰æ‹¥å¡çª—å£ä¸º4000å­—èŠ‚ï¼Œåœ¨ä¸»æœºç”²å‘ä¸»æœºä¹™è¿æ¥å‘é€2ä¸ªæœ€å¤§æ®µåï¼ŒæˆåŠŸæ”¶åˆ°ä¸»æœºä¹™å‘é€çš„ç¬¬ä¸€æ®µçš„ç¡®è®¤æ®µï¼Œç¡®è®¤æ®µä¸­é€šå‘Šçš„æ¥æ”¶çª—å£å¤§å°ä¸º2000å­—èŠ‚ï¼Œåˆ™æ­¤æ—¶ä¸»æœºç”²è¿˜å¯ä»¥å‘ä¸»æœºä¹™å‘é€çš„æœ€å¤§å­—èŠ‚æ•°æ˜¯ï¼ˆAï¼‰</p>
<p>Aï¼š1000             Bï¼š2000        Cï¼š3000             Dï¼š4000</p>
<p>TCPé‡‡ç”¨åºåˆ—å·ã€ç¡®è®¤ã€æ»‘åŠ¨çª—å£åè®®ç­‰æœºåˆ¶æ¥å®ç°ç«¯åˆ°ç«¯èŠ‚ç‚¹ä¹‹é—´å¯é çš„æ•°æ®ä¼ è¾“ã€‚å…¶ä¸­ï¼Œæ»‘åŠ¨çª—å£åè®®è§„å®šæœªè¢«ç¡®è®¤çš„åˆ†ç»„æ•°æœ€å¤šä¸ºçª—å£çš„å¤§å°ï¼Œä¸”åªéœ€è¦é‡ä¼ æœªè¢«ç¡®è®¤çš„åˆ†ç»„ã€‚é€šå‘Šçš„æ¥æ”¶çª—å£å¤§å°ä¸º2000Bï¼Œåˆ™è¯´æ˜æ­¤æ—¶ä¸»æœºä¹™å…·æœ‰ä¸€ä¸ª2000Bçš„ç©ºé—²ç¼“å†²åŒºï¼Œå³æ­¤æ—¶ä¸»æœºä¹™æœ€å¤§è¿˜å¯ä»¥æ¥æ”¶2000Bçš„æ•°æ®ã€‚ç”±äºä¸»æœºä¹™è¿˜æœªå¯¹ä¸»æœºç”²å‘å‡ºç¬¬2ä¸ªæŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ï¼Œå› æ­¤è¿™2000Bçš„ç©ºé—²ç¼“å†²åŒºè¿˜éœ€é¢„ç•™å‡º1000Bç”¨äºæ¥æ”¶ç¬¬2ä¸ªæŠ¥æ–‡æ®µï¼Œå³æ­¤æ—¶ä¸»æœºç”²è¿˜å¯ä»¥å‘ä¸»æœºä¹™å‘é€çš„æœ€å¤§å­—èŠ‚æ•°åªæœ‰1000Bã€‚</p>
<p>ä¸»æœºç”²å‘ä¸»æœºä¹™å‘é€ä¸€ä¸ª(SYNï¼1ï¼Œseqï¼3210)çš„TCPæ®µï¼ŒæœŸæœ›ä¸ä¸»æœºä¹™å»ºç«‹TCPè¿æ¥ï¼Œè‹¥ä¸»æœºä¹™æ¥å—è¯¥è¿æ¥è¯·æ±‚ï¼Œåˆ™ä¸»æœºä¹™å‘ä¸»æœºç”²å‘é€çš„æ­£ç¡®çš„TCPæ®µå¯èƒ½æ˜¯ï¼ˆC ï¼‰  </p>
<p>Aï¼(SYNï¼0ï¼ŒACKï¼0ï¼Œseqï¼3211ï¼Œackï¼3211)    </p>
<p>Bï¼(SYNï¼1ï¼ŒACKï¼1ï¼Œseqï¼3210ï¼Œackï¼3210)    </p>
<p>Cï¼(SYNï¼1ï¼ŒACKï¼1ï¼Œseqï¼3211ï¼Œackï¼3211)    </p>
<p>Dï¼(SYNï¼0ï¼ŒACKï¼0ï¼Œseqï¼3210ï¼Œackï¼3210)</p>
<p>TCPæ˜¯é¢å‘è¿æ¥çš„,æ‰€è°“é¢å‘è¿æ¥,å°±æ˜¯å½“è®¡ç®—æœºåŒæ–¹ é€šä¿¡æ—¶å¿…éœ€å…ˆå»ºç«‹è¿æ¥,ç„¶åæ•°æ®ä¼ é€,æœ€åæ‹†é™¤ä¸‰ä¸ªè¿‡ç¨‹,ä¹Ÿå°±æ˜¯ å®¢æˆ·ä¸»åŠ¨æ‰“å¼€TCPä¼ è¾“,æœåŠ¡å™¨è¢«åŠ¨æ‰“å¼€ã€‚ç¬¬ä¸€æ¬¡æ¡æ‰‹:å®¢æˆ·å‘é€SYN &#x3D;1, seq &#x3D; xç»™æœåŠ¡å™¨,å³å®¢æˆ·çš„TCPå‘æœåŠ¡å™¨å‘å‡ºè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µ, å…¶é¦–éƒ¨ä¸­çš„åŒæ­¥ä½SYN&#x3D;1,å¹¶é€‰æ‹©åºå·seq &#x3D; x,è¡¨æ˜ä¼ é€æ•°æ®æ—¶çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå·æ˜¯ xã€‚ç¬¬äºŒæ¬¡æ¡æ‰‹:æœåŠ¡å™¨å‘é€ SYN&#x3D; 1, ACK &#x3D;l , seq &#x3D; y, ack &#x3D; x+1ç»™å®¢æˆ·,å³æœåŠ¡å™¨çš„TCPæ”¶åˆ°è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µå,å¦‚åŒæ„åˆ™å‘å›ç¡®è®¤ã€‚æœåŠ¡å™¨åœ¨ç¡®è®¤æŠ¥æ–‡æ®µä¸­åº”ä½¿ SYN&#x3D;1,ä½¿ACK&#x3D; 1,å…¶ç¡®è®¤å·ack &#x3D; x+1,è‡ªå·±é€‰æ‹©çš„åºå·seq &#x3D; yã€‚ç¬¬ä¸‰æ¬¡æ¡æ‰‹: å®¢æˆ·å‘é€ACK&#x3D; 1, seq &#x3D; x+1, ack &#x3D; y+1ç»™æœåŠ¡å™¨,å³å®¢æˆ·æ”¶åˆ°æ­¤æŠ¥ æ–‡æ®µåå‘æœåŠ¡å™¨ç»™å‡ºç¡®è®¤, å…¶ACK&#x3D; 1,ç¡®è®¤å·ack &#x3D; y+1ã€‚å®¢æˆ·çš„TCP é€šçŸ¥ä¸Šå±‚åº”ç”¨è¿›ç¨‹,è¿æ¥å·²ç»å»ºç«‹ã€‚æœåŠ¡å™¨çš„ TCPæ”¶åˆ°ä¸»æœºå®¢æˆ·çš„ç¡®è®¤å,ä¹Ÿé€šçŸ¥å…¶ä¸Šå±‚åº”ç”¨è¿›ç¨‹: TCPè¿æ¥å·²ç»å»ºç«‹ã€‚ å¦‚æœACKä¸º0ï¼Œé‚£ä¹ˆæ•°æ®æŠ¥ä¸åŒ…å«ç¡®è®¤ä¿¡æ¯ï¼Œç¡®è®¤å­—æ®µè¢«çœç•¥ã€‚ SYNï¼šç”¨äºå»ºç«‹è¿æ¥ã€‚ ç›®å‰è¿æ¥è¿˜åœ¨å»ºç«‹é˜¶æ®µï¼Œä¹™å‘ç”²å‘é€çš„TCPæ®µæ˜¯åŒ…å«ç¡®è®¤ä¿¡æ¯ackçš„ï¼Œ åˆ™SYN&#x3D;1ï¼ŒACK&#x3D;1ï¼› è‡³äºseqï¼Œackï¼Œä¹™å‘ç”²å‘é€çš„seqå¯ä»¥éšæ„ï¼Œä½†æ˜¯ ä¹™å‘ç”²å‘é€çš„ ackå´è¦æ±‚æ˜¯ä¹‹å‰ç”²å‘ä¹™å‘é€çš„è¯·æ±‚seqåŠ 1ã€‚</p>
<p>ä¸€ä¸ªTCPè¿æ¥æ€»æ˜¯ä»¥1KBçš„æœ€å¤§æ®µé•¿å‘é€TCPæ®µï¼Œå‘é€æ–¹æœ‰è¶³å¤Ÿå¤šçš„æ•°æ®è¦å‘é€ã€‚å½“æ‹¥å¡çª—å£ä¸º16KBæ—¶å‘ç”Ÿäº†è¶…æ—¶ï¼Œå¦‚æœæ¥ä¸‹æ¥çš„4ä¸ªRTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰æ—¶ é—´å†…çš„TCPæ®µçš„ä¼ è¾“éƒ½æ˜¯æˆåŠŸçš„ï¼Œé‚£ä¹ˆå½“ç¬¬4ä¸ªRTTæ—¶é—´å†…å‘é€çš„æ‰€æœ‰TCPæ®µ éƒ½å¾—åˆ°è‚¯å®šåº”ç­”æ—¶ï¼Œæ‹¥å¡çª—å£å¤§å°æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>æ ¹æ®æ…¢å¼€å§‹ç®—æ³•çš„åŸåˆ™,åœ¨ç¬¬4ä¸ªRTTæ—¶é—´å,æ‹¥å¡çª—å£ä¸º16,æ­¤æ—¶å‘ç”Ÿæ‹¥å¡,æ‹¥å¡çª—å£å¤§å°å˜ä¸º1KB,æ…¢å¼€å§‹é—¨é™å€¼å˜ä¸º8 KBã€‚æ¥ä¸‹æ¥3ä¸ªRTTå,æ‹¥å¡çª—å£å¤§å°å˜ä¸º8 KB,æ­¤æ—¶è¿›å…¥æ‹¥å¡é¿å…ç®—æ³•,å½“ç¬¬4ä¸ªRTTå,æ‹¥å¡çª—å£åŠ 1,æ‹¥å¡çª—å£å¤§å°å˜ä¸º9 KBã€‚</p>
<p>16KBè¶…æ—¶ï¼Œé˜ˆå€¼å˜ä¸º8KBï¼Œå®¢æˆ·ç«¯ä»1KBå¼€å§‹ç©¿ï¼ˆæ‰§è¡Œå¿«å¼€å§‹ç®—æ³•ï¼‰</p>
<p>1RTT ç»“æŸï¼Œ1KB-&gt;2KB<br>2RTT ç»“æŸï¼Œ2KB-&gt;4KB<br>3RTT ç»“æŸï¼Œ4KB-&gt;8KBï¼ˆåˆ°è¾¾é˜ˆå€¼ï¼Œæ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•ï¼‰<br>4RTT ç»“æŸï¼Œ8KB-&gt;9KB</p>
<p>ï¼ˆ1ï¼‰å°†â€œæ…¢å¼€å§‹é—¨é™å€¼â€è®¾ç½®ä¸ºå‡ºç°è¶…æ—¶æ—¶åˆ»çš„â€œæ‹¥å¡çª—å£å€¼â€çš„ä¸€åŠï¼Œä¹Ÿå°±æ˜¯16KB Ã· 2 &#x3D; 8KBï¼›</p>
<p>ï¼ˆ2ï¼‰å°†â€œæ‹¥å¡çª—å£å€¼â€è®¾ç½®ä¸º1KBï¼Œé‡æ–°å¼€å§‹â€œæ…¢å¼€å§‹â€ç®—æ³•ã€‚é¢˜ç›®è¿˜ç»™å®šè¶…æ—¶åçš„4ä¸ªRTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰æ—¶é—´å†…çš„TCPæ®µçš„ä¼ è¾“éƒ½æ˜¯æˆåŠŸï¼Œä¹Ÿå°±æ˜¯è¯´è¶…æ—¶ååˆè¿›è¡Œäº†ä»¥ä¸‹å››ä¸ªè½®æ¬¡çš„ä¼ è¾“ï¼š</p>
<p>è¶…æ—¶åçš„ç¬¬ä¸€ä¸ªä¼ è¾“è½®æ¬¡ï¼šæ‹¥å¡çª—å£å€¼ä¸º1KBï¼Œè¿›è¡Œè¶…æ—¶åçš„ç¬¬ä¸€ä¸ªä¼ è¾“è½®æ¬¡ï¼ŒæˆåŠŸåæ‹¥å¡çª—å£å€¼å¢åŠ åˆ°2KBï¼›</p>
<p>è¶…æ—¶åçš„ç¬¬äºŒä¸ªä¼ è¾“è½®æ¬¡ï¼šæ‹¥å¡çª—å£å€¼ä¸º2 KBï¼Œè¿›è¡Œè¶…æ—¶åçš„ç¬¬äºŒä¸ªä¼ è¾“è½®æ¬¡ï¼ŒæˆåŠŸåæ‹¥å¡çª—å£å€¼å¢åŠ åˆ°4 KBï¼›</p>
<p>è¶…æ—¶åçš„ç¬¬ä¸‰ä¸ªä¼ è¾“è½®æ¬¡ï¼šæ‹¥å¡çª—å£å€¼ä¸º4 KBï¼Œè¿›è¡Œè¶…æ—¶åçš„ç¬¬ä¸‰ä¸ªä¼ è¾“è½®æ¬¡ï¼ŒæˆåŠŸåæ‹¥å¡çª—å£å€¼å¢åŠ åˆ°8 KBï¼›</p>
<p>è¶…æ—¶åçš„ç¬¬å››ä¸ªä¼ è¾“è½®æ¬¡ï¼šæ‹¥å¡çª—å£å€¼ä¸º8 KBï¼Œè¿›è¡Œè¶…æ—¶åçš„ç¬¬å››ä¸ªä¼ è¾“è½®æ¬¡ï¼ŒæˆåŠŸåéœ€è¦å¢åŠ æ‹¥å¡çª—å£çš„å€¼ï¼Œç”±äºå·²ç»è¾¾åˆ°â€œæ…¢å¼€å§‹é—¨é™å€¼â€ï¼Œå› æ­¤æ‹¥å¡çª—å£çš„å€¼çº¿æ€§åŠ 1 KBå˜ä¸º9 KBï¼Œä¹‹åæ”¹ç”¨â€œæ‹¥å¡é¿å…â€ç®—æ³•ã€‚</p>
<p><strong>æ‹¥å¡é¿å…å’Œæ…¢å¯åŠ¨</strong><br>å½“æ‹¥å¡å‘ç”Ÿæ—¶ï¼ˆè¶…æ—¶æˆ–æ”¶åˆ°é‡å¤ç¡®è®¤ï¼‰ï¼Œæ…¢å¯åŠ¨é—¨é™ssthreshè¢«è®¾ç½®ä¸ºå½“å‰æ‹¥å¡çª—å£cwndå¤§å°ï¼ˆé¢˜ç›®ä¸º16ï¼‰çš„ä¸€åŠï¼Œå³8ã€‚åŒæ—¶cwndé‡ç½®ä¸º1ï¼ˆæœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼‰ã€‚æ–°çš„æ•°æ®è¢«æ¥æ”¶ï¼Œåˆ™cwndå¢åŠ ï¼Œè§„åˆ™ä¸ºssthreshä¹‹å‰ï¼Œ æ…¢å¯åŠ¨ï¼Œå³cwndæŒ‡æ•°å¢é•¿ï¼›åˆ°è¾¾ssthreshä¹‹åï¼Œ æ‹¥å¡é¿å…ï¼Œå³cwndåŠ 1ã€‚</p>
<p>TCP å¯é æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®šæ—¶å™¨è®¾ç½®ï¼Œåˆå§‹æ—¶å®šæ—¶å™¨ T è®¾ç½®ä¸º 1 ç§’ï¼Œç¬¬ 1 ä¸ªæ ·æœ¬ SampleRTT&#x3D;2 ç§’ï¼Œè·å¾—è¯¥æ ·æœ¬åä¼°ç®— EstimatedRTT&#x3D;2 ç§’ï¼Œåå·® DevRTT&#x3D;1 ç§’ï¼Œç¬¬ 2 ä¸ªæ ·æœ¬ SampleRTT&#x3D;1 ç§’ï¼Œç¬¬ 3 ä¸ªæ ·æœ¬ SampleRTT&#x3D;3 ç§’ï¼Œè®¡ç®—æ”¶åˆ°ç¬¬ä¸‰ä¸ªæ ·æœ¬å TCP ä¸ºç¬¬å››ä¸ªå¾…å‘é€åˆ† ç»„è®¾å®šçš„å®šæ—¶å™¨ T çš„å€¼ï¼Ÿï¼ˆè¦æ±‚ï¼šç»™å‡º EstimatedRTT å’Œ DevRTT çš„å‡å€¼å…¬å¼å’Œå®šæ—¶å™¨ T çš„è®¡ç®— å…¬å¼ï¼ŒEstimatedRTT å…¬å¼ä¸­ç³»æ•°æ˜¯ 0.125ï¼ŒDevRTT å…¬å¼ä¸­ç³»æ•°æ˜¯ 0.25ï¼Œç»™å‡ºæ¯æ¬¡æ”¶åˆ°æ ·æœ¬æ—¶å‡ å€¼çš„å˜åŒ–ï¼Œè®¡ç®—æ—¶å°æ•°ä¿ç•™ 3 ä½ï¼‰</p>
<p>ERTT&#x3D;ï¼ˆ1-aï¼‰ERTT+a*SRTT<br>DRTT&#x3D;ï¼ˆ1-bï¼‰DRTT+b*|SRTT-ERTT|<br>T&#x3D;ERTT+4*DRTT<br>æ”¶åˆ°ç¬¬äºŒä¸ªæ ·æœ¬åï¼šDRTT&#x3D;ï¼ˆ1-0.25ï¼‰*1+0.25*|1-2|&#x3D;1 ç§’ ï¼ŒERTT&#x3D;ï¼ˆ1-0.125ï¼‰*2+0.125*1&#x3D;1.875 ç§’<br>æ”¶åˆ°ç¬¬ä¸‰ä¸ªæ ·æœ¬åï¼šDRTT&#x3D;ï¼ˆ1-0.25ï¼‰*1+0.25*|3-1.875|&#x3D;1.031 ç§’ ï¼ŒERTT&#x3D;ï¼ˆ1-0.125ï¼‰*1.875+0.125*3&#x3D;2.016 ç§’<br>å®šæ—¶å™¨ Tï¼šï¼ˆ1 åˆ†ï¼‰ T&#x3D;2.016+4*1.031&#x3D;6.14 ç§’</p>
<p>ï¼ˆæ³¨ï¼šåœ¨è®¡ç®—DRTTæ—¶ï¼ŒERTTç”¨ä¸Šä¸€è½®çš„ï¼‰</p>
<p>åœ¨SRä¸­ï¼Œå‘é€çª—å£å¤§å°ä¸èƒ½è¶…è¿‡åºå·ç©ºé—´çš„(1&#x2F;2)ã€‚</p>
<p>å°äº(1024)çš„TCP&#x2F;UDPç«¯å£å·å·²ä¿ç•™ä¸ç°æœ‰æœåŠ¡ä¸€ä¸€å¯¹åº”ï¼Œæ­¤æ•°å­—ä»¥ä¸Šçš„ç«¯å£å·å¯è‡ªç”±åˆ†é…ã€‚</p>
<p>è®¾TCPæ‹¥å¡çª—å£çš„å½“å‰é˜ˆå€¼ä¸º8ï¼ˆå•ä½ä¸ºæŠ¥æ–‡æ®µï¼‰ï¼Œå½“æ‹¥å¡çª—å£ä¸Šå‡åˆ°12æ—¶æ”¶åˆ°3ä¸ªé‡å¤ACKï¼Œé‚£ä¹ˆä¸‹ä¸€è½®ä¼ è¾“æ—¶æ‹¥å¡çª—å£å¤§å°ä¸º( )</p>
<p>A.8	B.9	C.6	D.4</p>
<p>åœ¨ TCP æ‹¥å¡æ§åˆ¶ä¸­ï¼Œå½“æ”¶åˆ° 3 ä¸ªé‡å¤çš„ ACK æ—¶ï¼Œä¼šè§¦å‘å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤ç®—æ³•ã€‚åœ¨å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤ç®—æ³•ä¸­ï¼Œå½“æ”¶åˆ° 3 ä¸ªé‡å¤çš„ ACK æ—¶ï¼Œé˜ˆå€¼ä¼šè¢«è®¾ç½®ä¸ºå½“å‰æ‹¥å¡çª—å£å¤§å°çš„ä¸€åŠï¼Œæ‹¥å¡çª—å£å¤§å°ä¼šè¢«è®¾ç½®ä¸ºé˜ˆå€¼åŠ ä¸Š 3 ä¸ª MSSï¼ˆæœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼‰çš„å¤§å°ã€‚æ ¹æ®é¢˜ç›®ä¸­ç»™å‡ºçš„ä¿¡æ¯ï¼Œå½“å‰é˜ˆå€¼ä¸º 8ï¼Œå½“æ‹¥å¡çª—å£ä¸Šå‡åˆ° 12 æ—¶æ”¶åˆ° 3 ä¸ªé‡å¤ ACKã€‚æ­¤æ—¶ï¼Œé˜ˆå€¼ä¼šè¢«è®¾ç½®ä¸ºå½“å‰æ‹¥å¡çª—å£å¤§å°çš„ä¸€åŠï¼Œå³ 12&#x2F;2&#x3D;6ã€‚æ‹¥å¡çª—å£å¤§å°ä¼šè¢«è®¾ç½®ä¸ºé˜ˆå€¼åŠ ä¸Š 3 ä¸ª MSS çš„å¤§å°ï¼Œå³ 6+3&#x3D;9ã€‚</p>
<p>TCPé€šä¿¡æ—¶ï¼Œè‹¥æŸä¸€æ–¹å‘é€å¸¦æœ‰FINæ ‡å¿—çš„æ•°æ®æ®µï¼Œå…¶å«ä¹‰ä¸ºï¼ˆCï¼‰</p>
<p>A.å°†æ–­å¼€é€šä¿¡åŒæ–¹çš„TCPè¿æ¥</p>
<p>B.è¿æ¥è¢«é‡æ–°å»ºç«‹</p>
<p>C.å•æ–¹é¢é‡Šæ”¾è¿æ¥ï¼Œè¡¨ç¤ºæœ¬æ–¹å·²ç»æ— æ•°æ®å‘é€ï¼Œä½†å¯ä»¥æ¥æ”¶å¯¹æ–¹æ•°æ®</p>
<p>D.ç»ˆæ­¢æ•°æ®å‘é€ï¼ŒåŒæ–¹éƒ½ä¸èƒ½å‘é€æ•°æ®</p>
<p>å‡è®¾ä½¿ç”¨8ä½æ ¡éªŒå’Œå­—æ®µå¯¹æ•°æ®0x5879B432è®¡ç®—Internetæ ¡éªŒå’Œï¼Œç»“æœæ˜¯ï¼ˆCï¼‰</p>
<p>A.0xB8</p>
<p>B.0x48</p>
<p>C.0x47</p>
<p>D.0xB7</p>
<p>ä»¥ä¸‹å“ªä¸ªTCPç†ŸçŸ¥ç«¯å£å·æ˜¯é”™è¯¯çš„ï¼ˆ D ï¼‰</p>
<p>A.HTTP:80</p>
<p>B.TELENT:23</p>
<p>C.SMTP:25</p>
<p>D.FTP:24</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹,FTPä½¿ç”¨çš„ç«¯å£å·ä¸º21å’Œ20ã€‚</p>
<p>ä¸»æœºç”²å’Œä¸»æœºä¹™å·²å»ºç«‹TCPè¿æ¥ï¼Œç”²å§‹ç»ˆä»¥MSS&#x3D;1KBå¤§å°çš„æ®µå‘é€æ•°æ®ï¼Œå¹¶ä¸€ç›´æœ‰æ•°æ®å‘é€ï¼›ä¹™æ¯æ”¶åˆ°ä¸€ä¸ªæ•°æ®æ®µéƒ½ä¼šå‘å‡ºä¸€ä¸ªæ¥æ”¶çª—å£ä¸º10KBçš„ç¡®è®¤æ®µã€‚è‹¥ç”²åœ¨tæ—¶åˆ»å‘ç”Ÿè¶…æ—¶ï¼Œå…¶æ‹¥å¡çª—å£ä¸º8KBã€‚åˆ™ä»tæ—¶åˆ»å¼€å§‹ï¼Œä¸å†å‘ç”Ÿè¶…æ—¶æƒ…å†µä¸‹ï¼Œç»è¿‡10ä¸ªRTTåï¼Œç”²çš„å‘é€çª—å£æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>å½“tæ—¶åˆ»å‘ç”Ÿè¶…æ—¶æ—¶ï¼ŒæŠŠsthreshè®¾ä¸º8çš„ä¸€åŠï¼Œå³ä¸º4ï¼Œä¸”æ‹¥å¡çª—å£è®¾ä¸º1KBã€‚ç„¶åç»å†10ä¸ªRTTåï¼Œæ‹¥å¡çª—å£çš„å¤§å°ä¾æ¬¡ä¸º2ã€4ã€5ã€6ã€7ã€8ã€9ã€10ã€11ã€12ï¼Œè€Œå‘é€çª—å£å–å½“æ—¶çš„æ‹¥å¡çª—å£å’Œæ¥æ”¶çª—å£çš„æœ€å°å€¼ï¼Œè€Œæ¥æ”¶çª—å£å§‹ç»ˆä¸º10KBï¼Œæ‰€ä»¥æ­¤æ—¶çš„å‘é€çª—å£ä¸º10KBã€‚</p>
<blockquote>
<p>ç®€è¿° TCP æ‹¥å¡æ§åˆ¶ä¸­è¿›å…¥æ…¢å¯åŠ¨ã€å¿«é€Ÿæ¢å¤ã€æ‹¥å¡é¿å…ä¸‰ç§çŠ¶æ€å¯¹åº”çš„è§¦å‘äº‹ä»¶ï¼Ÿ</p>
</blockquote>
<p>æ…¢å¯åŠ¨çŠ¶æ€çš„äº‹ä»¶ï¼šå¼€å§‹ä¼ è¾“ï¼›è¶…æ—¶ï¼›ä½äºé˜ˆå€¼ï¼› </p>
<p>å¿«é€Ÿæ¢å¤çš„äº‹ä»¶ï¼šä¸‰æ¬¡åŠä»¥ä¸Šé‡å¤ç¡®è®¤ï¼› </p>
<p>æ‹¥å¡é¿å…ï¼šé«˜äºé˜ˆå€¼ï¼Œæ­£å¸¸æ”¶åˆ°åˆ†ç»„ç¡®è®¤</p>
<blockquote>
<p>å‡è®¾ä¸»æœºAé€šè¿‡ä¸€æ¡TCPè¿æ¥å‘ä¸»æœºBå‘é€ä¸€ä¸ªå¤§æ–‡ä»¶ã€‚ä¸»æœºAå‘é€ä½†æœªè¢«ç¡®è®¤çš„å­—èŠ‚æ•°ä¸ä¼š è¶…è¿‡æ¥æ”¶ç¼“å­˜çš„å¤§å°ã€‚   ï¼ˆ  âˆš ï¼‰</p>
</blockquote>
<p>æµé‡æ§åˆ¶</p>
<blockquote>
<p>å‡è®¾ä¸»æœºAé€šè¿‡TCPè¿æ¥å‘ä¸»æœºBå‘é€ä¸€ä¸ªå¤§æ–‡ä»¶ã€‚å¦‚æœæŸä¸ªæ®µ(segment)çš„Seqå·ä¸º m,é‚£ä¸‹ä¸€ä¸ªæ­£å¸¸å‘é€çš„æ®µçš„Seqå·å¿…ç„¶ä¸ºm+1ï¼ˆÃ—ï¼‰</p>
</blockquote>
<p>ä¸‹ä¸€ä¸ªæ­£å¸¸å‘é€çš„æ®µçš„åºåˆ—å·å¹¶ä¸ä¸€å®šæ˜¯m+1ï¼Œè€Œæ˜¯måŠ ä¸Šå‰ä¸€ä¸ªæ®µä¸­æ•°æ®çš„å­—èŠ‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‰ä¸€ä¸ªæ®µä¸­åŒ…å«512ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæ­£å¸¸å‘é€çš„æ®µçš„åºåˆ—å·å°†æ˜¯m+512ã€‚</p>
<blockquote>
<p>TCPæŠ¥æ–‡æ®µåœ¨å®ƒçš„é¦–éƒ¨ä¸­æœ‰ä¸€ä¸ªrwndå­—æ®µã€‚(âˆš)</p>
</blockquote>
<p>rwndå³æ¥æ”¶çª—å£ï¼ˆreceive windowï¼‰ï¼Œç”¨æ¥å‘ŠçŸ¥å‘é€æ–¹ï¼Œè‡ªå·±åœ¨è¯¥TCPè¿æ¥çš„ç¼“å­˜ä¸­è¿˜æœ‰å¤šå°‘å¯ç”¨ç©ºé—´</p>
<blockquote>
<p>å‡å®šåœ¨ä¸€æ¡TCPè¿æ¥ä¸­æœ€åçš„SampleRTTç­‰äº1ç§’ï¼Œé‚£ä¹ˆå¯¹äºè¯¥è¿æ¥çš„TimeoutIntervalçš„å½“å‰å€¼ å¿…å®šå¤§äºç­‰äº1ç§’ã€‚ ï¼ˆ Ã—  ï¼‰</p>
</blockquote>
<p>Timeout Interval&#x3D;EstimatedRTT+4Ã—DevRTTï¼Œæ‰€ä»¥TimeoutIntervalæ•°æ®å’ŒSampleRTTæ— å…³</p>
<blockquote>
<p>å‡è®¾ä¸»æœºAé€šè¿‡ä¸€æ¡TCPè¿æ¥å‘ä¸»æœºBå‘é€ä¸€ä¸ªåºå·ä¸º38çš„4ä¸ªå­—èŠ‚çš„æŠ¥æ–‡æ®µã€‚åœ¨è¿™ä¸ªç›¸åŒçš„ æŠ¥æ–‡æ®µä¸­ï¼Œç¡®è®¤å·å¿…å®šæ˜¯42ã€‚   ï¼ˆ Ã—  ï¼‰</p>
</blockquote>
<p>æŸäº›æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚è¯¥æŠ¥æ–‡æ®µå‘é€è¶…æ—¶ï¼‰æ¥æ”¶æ–¹ä¼šå‘é€ä¸€ä¸ªé‡å¤çš„ACKï¼Œå³ç¡®è®¤å·ä»ç„¶æ˜¯ 38ã€‚</p>
<blockquote>
<p>è€ƒè™‘TCPçš„æ‹¥å¡æ§åˆ¶ã€‚å½“å‘é€æ–¹å®šæ—¶å™¨è¶…æ—¶æ—¶ï¼Œå…¶ssthreshçš„å€¼å°†è¢«è®¾ç½®ä¸ºåŸæ¥å€¼çš„ ä¸€åŠã€‚ï¼ˆ x ï¼‰</p>
</blockquote>
<p>çœ‹å‡†äº†ï¼Œåº”è¯¥æ˜¯ssthreshè¢«è®¾ç½®ä¸º<code>å½“å‰æ‹¥å¡çª—å£çš„ä¸€åŠ</code>ã€‚</p>
<blockquote>
<p>è€ƒè™‘ä¸€ä¸ªGBNåè®®ï¼Œå…¶å‘é€æ–¹çª—å£ä¸º4,åºå·èŒƒå›´ä¸º1024ã€‚å‡è®¾åœ¨æ—¶åˆ»æ¥æ”¶æ–¹æœŸå¾…çš„ä¸‹ä¸€ä¸ªæœ‰åºåˆ†ç»„çš„åºå·æ˜¯kï¼Œä¸”åª’ä½“ä¸ä¼šå¯¹æŠ¥æ–‡é‡æ–°æ’åºã€‚å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p>
<p> a. åœ¨tæ—¶åˆ»ï¼Œå‘é€æ–¹çª—å£å†…çš„æŠ¥æ–‡åºå·å¯èƒ½æ˜¯å¤šå°‘ï¼Ÿè®ºè¯ä½ çš„å›ç­”ã€‚</p>
<p>b. åœ¨tæ—¶åˆ»ï¼Œåœ¨å½“å‰ä¼ æ’­å›å‘é€æ–¹çš„æ‰€æœ‰å¯èƒ½æŠ¥æ–‡ä¸­ï¼ŒACKå­—æ®µçš„æ‰€æœ‰å¯èƒ½å€¼æ˜¯å¤šå°‘ï¼Ÿè®ºè¯ä½ çš„ å›ç­”ã€‚</p>
</blockquote>
<p>GBNåè®®ç‰¹ç‚¹ï¼šGBNåè®®å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>å‘é€æ–¹æ‹¥æœ‰ä¸€ä¸ªçª—å£ï¼Œé•¿åº¦ä¸ºNï¼›</li>
<li>æ¥æ”¶æ–¹æ— çª—å£ï¼Œåªæ¥æ”¶å¸Œæœ›æ¥å—åºå·çš„æŠ¥æ–‡ï¼Œå¯¹äº<strong>å¤±åºåˆ°è¾¾</strong>çš„æŠ¥æ–‡æ®µé‡‡å–çš„æ–¹å¼æ˜¯ç›´æ¥ä¸¢å¼ƒï¼›</li>
<li>åœ¨é‡ä¼ çš„æ—¶å€™ï¼Œå°†ä¼šé‡ä¼ å½“å‰å‘é€æ–¹çª—å£ä¸­æ‰€æœ‰æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µã€‚</li>
</ul>
<p>aï¼‰åœ¨tæ—¶åˆ»ï¼Œæ¥æ”¶æ–¹èµ·åˆ°æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåˆ†ç»„åºå·ä¸ºkï¼Œè¯´æ˜æ¥æ”¶æ–¹å·²ç»æ­£ç¡®æ¥å—äº†kä¹‹å‰çš„æ‰€æœ‰åˆ†ç»„ï¼Œå¯¹äºå‘é€æ–¹è€Œè¨€ï¼Œæˆ‘ä»¬è€ƒè™‘ä¸¤ç§æœ€æç«¯çš„æƒ…å†µï¼š</p>
<p>ç¬¬ä¸€ç§æƒ…å†µï¼šå‡è®¾ä¹‹å‰æ‰€æœ‰çš„æŠ¥æ–‡éƒ½æ­£ç¡®ä¼ è¾“ï¼Œæ²¡æœ‰ä»»ä½•ä¸¢å¤±çš„é—®é¢˜ï¼Œé‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‘é€æ–¹æ­£ç¡®æ¥æ”¶äº†æ¥æ”¶æ–¹å¯¹äºå°äºkçš„æ‰€æœ‰æŠ¥æ–‡çš„ACKç¡®è®¤ï¼Œå› æ­¤çª—å£å°†ä¼šä¸æ–­å‘åç§»åŠ¨ï¼Œåºå·å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>k</th>
<th>k+1</th>
<th>k+2</th>
<th>k+3</th>
</tr>
</thead>
</table>
<p>ç¬¬äºŒç§æƒ…å†µï¼šç”±å·²çŸ¥æ¡ä»¶æˆ‘ä»¬å¯ä»¥å¾—çŸ¥åºå·ä¸ºk-1çš„æŠ¥æ–‡æ˜¯å‘é€æ–¹å‘é€çš„æœ€åä¸€ä¸ªæŠ¥æ–‡ï¼Œå‡è®¾è¯¥æŠ¥æ–‡è™½ç„¶åˆ°è¾¾äº†æ¥æ”¶æ–¹ï¼Œä½†æ˜¯æ¥æ”¶æ–¹è¿”å›çš„ACKç¡®è®¤ç”±äºä¸€äº›åŸå› æ²¡æœ‰åˆ°è¾¾å‘é€æ–¹ï¼Œåˆ™çª—å£ä¸ä¼šç§»åŠ¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å†å‡è®¾åºå·k-1ä½äºçª—å£çš„æœ€åä¸€åˆ—ï¼Œå³å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ‰€æœ‰åºå·æŠ¥æ–‡éƒ½æ²¡æœ‰åœ¨å‘é€æ–¹è¢«ç¡®è®¤ï¼Œåˆ™å¾—åˆ°äº†æˆ‘ä»¬æœ€åçš„ä¸€ç§æƒ…å†µï¼š</p>
<table>
<thead>
<tr>
<th>K-4</th>
<th>K-3</th>
<th>K-2</th>
<th>K-1</th>
</tr>
</thead>
</table>
<p>ä¸¤ç§æç«¯æƒ…å†µä¸­é—´çš„ä»»æ„ä¸€ç§æƒ…å†µéƒ½å¯èƒ½å‘ç”Ÿï¼Œå› æ­¤å‘é€æ–¹çª—å£åºå·å¯èƒ½ä¸ºk-4ã€k-3ã€k-2ã€k-1ã€kã€k+1ã€k+2ã€k+3ã€‚å¦‚æœå‘é€æ–¹çª—å£ä¸ºNï¼Œåˆ™å‘é€æ–¹çª—å£åºå·å¯èƒ½ä¸º[kï¼Œk+N-1]æˆ–[k-Nï¼Œk-1]ã€‚</p>
<p>bï¼‰å¦‚æœæ¥æ”¶æœºæ­£åœ¨ç­‰å¾…åˆ†ç»„kï¼Œåˆ™å®ƒå·²ç»æ¥æ”¶ï¼ˆå¹¶ç¡®è®¤ï¼‰äº†åˆ†ç»„k-1å’Œåœ¨æ­¤ä¹‹å‰çš„3ä¸ªåˆ†ç»„ã€‚å¦‚æœå‘é€æ–¹å°šæœªæ¥æ”¶åˆ°è¿™4ä¸ªACKä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œåˆ™å€¼ä¸º[k-4ï¼Œk-1]çš„ACKæ¶ˆæ¯å¯èƒ½ä»åœ¨ä¼ æ’­ã€‚ACKå­—æ®µçš„æ‰€æœ‰å¯èƒ½å€¼ä¸ºk-1ã€k-2ã€k-3ã€k-4ã€‚å¦‚æœå‘é€æ–¹çª—å£ä¸ºNï¼Œé‚£ä¹ˆACKå­—æ®µçš„æ‰€æœ‰å¯èƒ½å€¼ä¸º[k-Nï¼Œk-1]ã€‚</p>
<blockquote>
<p>è€ƒè™‘ä»ä¸»æœºAå‘ä¸»æœºBä¼ è¾“Lå­—èŠ‚çš„å¤§æ–‡ä»¶ï¼Œå‡è®¾MSSä¸º536å­—èŠ‚ã€‚</p>
<p>a. ä¸ºäº†ä½¿å¾—TCPåºå·ä¸è‡³äºç”¨å®Œï¼ŒLçš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿå‰é¢è®²è¿‡TCPçš„åºå·å­—æ®µä¸º4å­—èŠ‚ã€‚</p>
<p> b. å¯¹äºä½ åœ¨(a)ä¸­å¾—åˆ°çš„Lï¼Œæ±‚å‡ºä¼ è¾“æ­¤æ–‡ä»¶è¦ç”¨å¤šé•¿æ—¶é—´ï¼Ÿå‡å®šè¿è¾“å±‚ã€ç½‘ç»œå±‚å’Œæ•°æ®é“¾è·¯å±‚é¦–éƒ¨æ€»å…±ä¸º66å­—èŠ‚ï¼Œå¹¶åŠ åœ¨æ¯ä¸ªæŠ¥æ–‡æ®µä¸Šï¼Œç„¶åç»155Mbpsé“¾è·¯å‘é€å¾—åˆ°çš„åˆ†ç»„ã€‚å¿½ç•¥æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œä½¿ä¸»æœºAèƒ½å¤Ÿä¸€ä¸ªæ¥ä¸€ä¸ªè¿ç»­ä¸æ–­åœ°å‘é€è¿™äº›æŠ¥æ–‡æ®µã€‚</p>
</blockquote>
<p>a. åºå·å ç”¨ 4 å­—èŠ‚ï¼Œå³ 32 ä½ã€‚å®ƒçš„èŒƒå›´æ˜¯ [0,2^32âˆ’1]ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€å…±æœ‰ 4 294 967 296 ä¸ªåºå·ã€‚<br>L &#x3D; 2^32 &#x3D; 4294967296 byte</p>
<p>b. æŠ¥æ–‡æ®µçš„æ•°é‡ä¸ºL&#x2F;MSSå–ä¸Šæ•´ã€‚4294967296&#x2F;536 â‰ˆ 8012999ç»„<br>æ‰€æœ‰åˆ†ç»„çš„æ€»å¤´éƒ¨ä¿¡æ¯ &#x3D; 66 * 8012999 &#x3D; 528857934 byte<br>æ€»æ•°æ®é‡ 4294967296 + 528857934 &#x3D; 4823825230 byte<br>æ‰€éœ€æ—¶é—´ &#x3D; 4823825230 byte&#x2F;155Mbps â‰ˆ 249ç§’ &#x3D; 4.15åˆ†é’Ÿ</p>
<blockquote>
<p>UDPå’ŒTCPä½¿ç”¨åç æ¥è®¡ç®—å®ƒä»¬çš„æ£€éªŒå’Œã€‚å‡è®¾ä½ æœ‰ä¸‹é¢3ä¸ª8æ¯”ç‰¹å­—èŠ‚:01010011ï¼Œ01100110ï¼Œ01110100ã€‚è¿™äº›8æ¯”ç‰¹å­—èŠ‚å’Œçš„åç æ˜¯å¤šå°‘?(æ³¨æ„åˆ°å°½ç®¡UDP å’Œ TCP ä½¿ç”¨ 16 æ¯”ç‰¹çš„å­—æ¥è®¡ç®—æ£€éªŒå’Œï¼Œä½†å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä½ åº”è¯¥è€ƒè™‘8æ¯”ç‰¹å’Œã€‚)å†™å‡ºæ‰€æœ‰å·¥ä½œè¿‡ç¨‹ã€‚UDP ä¸ºä»€ä¹ˆè¦ç”¨è¯¥å’Œçš„åç ï¼Œå³ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨è¯¥å’Œå‘¢?ä½¿ç”¨è¯¥åç æ–¹æ¡ˆï¼Œæ¥æ”¶æ–¹å¦‚ä½•æ£€æµ‹å‡ºå·®é”™?1æ¯”ç‰¹çš„å·®é”™å°†å¯èƒ½æ£€æµ‹ä¸å‡ºæ¥å—?2æ¯”ç‰¹çš„å·®é”™å‘¢?</p>
</blockquote>
<p>0101 0011 + 0110 0110 &#x3D; 1011 1001<br>1011 1001 + 0111 0100 &#x3D; 1 0010 1101ï¼ˆå¤šäº†ä¸€ä½ï¼Œç¬¬ä¸€ä½1å›å·ï¼‰<br>0010 1101 + 1 &#x3D; 0010 1110 å–å…¶åç ï¼Œå¾—åˆ°1101 0001ã€‚</p>
<p>è¿ç”¨åç ç›¸åŠ ï¼Œå…¨1çš„æ£€æµ‹å¯¹äºè®¡ç®—æœºæ¥è¯´æ›´åŠ æ–¹ä¾¿ï¼Œé€Ÿåº¦ä¼šæ›´å¿«ã€‚</p>
<p>å°†åç 1101 0001 æ”¾åœ¨æ£€éªŒå’Œå¤„ï¼Œåœ¨æ¥å—æ–¹å°†å…¨éƒ¨çš„ä¼ è¾“æ•°æ®å’Œæ£€éªŒå’Œç›¸åŠ ä¸º1111 1111æ—¶ï¼Œæ— å·®é”™ï¼Œåªè¦æœ‰ä»»æ„ä¸€ä½ä¸º0ï¼Œä¼ è¾“ä¸­å°±å‡ºç°äº†å·®é”™ã€‚</p>
<p>1æ¯”ç‰¹çš„å·®é”™ä¸€å®šèƒ½å¤Ÿæ£€æŸ¥å‡ºæ¥ï¼Œ2æ¯”ç‰¹çš„å·®é”™å¦‚æœå‡ºç°åœ¨åŒä¸€ä½ä¸Šï¼Œåˆ™ä¼šè¢«å¿½ç•¥ã€‚</p>
<blockquote>
<p>ä¸»æœºAå’ŒBç»ä¸€æ¡TCPè¿æ¥é€šä¿¡ï¼Œå¹¶ä¸”ä¸»æœºBå·²ç»æ”¶åˆ°äº†æ¥è‡ªAçš„æœ€é•¿ä¸º126å­—èŠ‚çš„æ‰€æœ‰å­—èŠ‚ã€‚ å‡å®šä¸»æœºAéšåå‘ä¸»æœºBå‘é€ä¸¤ä¸ªç´§æ¥ç€çš„æŠ¥æ–‡æ®µã€‚ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæŠ¥æ–‡æ®µåˆ†åˆ«åŒ…å«äº† 80å­—èŠ‚å’Œ 40å­—èŠ‚çš„æ•°æ®ã€‚åœ¨ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µä¸­ï¼Œåºå·æ˜¯127,æºç«¯å£å·æ˜¯302,ç›®çš„åœ°ç«¯å£å·æ˜¯80ã€‚æ— è®ºä½•æ—¶ ä¸»æœºBæ¥æ”¶åˆ°æ¥è‡ªä¸»æœºAçš„æŠ¥æ–‡æ®µï¼Œå®ƒéƒ½ä¼šå‘é€ç¡®è®¤ã€‚</p>
<p>a)åœ¨ä»ä¸»æœºAå‘å¾€Bçš„ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µä¸­ï¼Œåºå·ã€æºç«¯å£å·å’Œç›®çš„ç«¯å£å·å„æ˜¯ä»€ä¹ˆï¼Ÿ </p>
<p>b)å¦‚æœç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µåœ¨ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µä¹‹å‰åˆ°è¾¾ï¼Œåœ¨ç¬¬ä¸€ä¸ªåˆ°è¾¾æŠ¥æ–‡æ®µçš„ç¡®è®¤ä¸­ï¼Œç¡®è®¤å·ã€æºç«¯å£å·å’Œç›®çš„ç«¯å£å·å„æ˜¯ä»€ä¹ˆï¼Ÿ </p>
<p>c)å¦‚æœç¬¬äºŒä¸ªæŠ¥æ–‡æ®µåœ¨ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µä¹‹å‰åˆ°è¾¾ï¼Œåœ¨ç¬¬ä¸€ä¸ªåˆ°è¾¾æŠ¥æ–‡æ®µçš„ç¡®è®¤ä¸­ï¼Œç¡®è®¤å·æ˜¯ä»€ä¹ˆï¼Ÿ </p>
<p>d)å‡å®šç”±Aå‘é€çš„ä¸¤ä¸ªæŠ¥æ–‡æ®µæŒ‰åºåˆ°è¾¾Bã€‚ç¬¬ä¸€ä¸ªç¡®è®¤ä¸¢å¤±äº†è€Œç¬¬äºŒä¸ªç¡®è®¤åœ¨ç¬¬ä¸€ä¸ªè¶…æ—¶é—´éš”ä¹‹ååˆ°è¾¾ã€‚ç”»å‡ºæ—¶åºå›¾ï¼Œæ˜¾ç¤ºè¿™äº›æŠ¥æ–‡æ®µå’Œå‘é€çš„æ‰€æœ‰å…¶ä»–æŠ¥æ–‡æ®µå’Œç¡®è®¤ã€‚ï¼ˆå‡è®¾æ²¡æœ‰å…¶ä»–åˆ†ç»„ä¸¢ å¤±ã€‚ï¼‰å¯¹äºå›¾ä¸Šæ¯ä¸ªæŠ¥æ–‡æ®µï¼Œæ ‡å‡ºåºå·å’Œæ•°æ®çš„å­—èŠ‚æ•°é‡ï¼›å¯¹äºä½ å¢åŠ çš„æ¯ä¸ªåº”ç­”ï¼Œæ ‡å‡ºç¡®è®¤å·ã€‚</p>
</blockquote>
<p>aï¼‰ åœ¨ä»ä¸»æœºAåˆ°Bçš„ç¬¬äºŒæ®µä¸­ï¼Œåºåˆ—å·ä¸º207ï¼Œæºç«¯å£å·ç æ˜¯302ï¼Œç›®çš„åœ°ç«¯å£å·æ˜¯80ã€‚</p>
<p>bï¼‰ å¦‚æœç¬¬ä¸€æ®µåœ¨ç¬¬äºŒæ®µä¹‹å‰åˆ°è¾¾ï¼Œåˆ™åœ¨å¯¹ç¬¬ä¸€æ®µçš„ç¡®è®¤ä¸­åˆ°è¾¾æ®µï¼Œç¡®è®¤å·ä¸º207ï¼Œæºç«¯å£å·ä¸º80å¹¶ä¸”ç›®çš„åœ°ç«¯å£å·æ˜¯302ã€‚</p>
<p>cï¼‰ å¦‚æœç¬¬äºŒæ®µåœ¨ç¬¬ä¸€æ®µä¹‹å‰åˆ°è¾¾ï¼Œåˆ™åœ¨å¯¹ç¬¬ä¸€ä¸ªåˆ°è¾¾çš„æ®µï¼Œç¡®è®¤å·ç æ˜¯127ï¼Œè¡¨æ˜å®ƒä»ç„¶æ˜¯ç­‰å¾…å­—èŠ‚127åŠä»¥åã€‚</p>
<p>dï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_11-30-33.png"></p>
<blockquote>
<p>å‡è®¾TCP Renoæ˜¯ä¸€ä¸ªç»å†å¦‚ä¸Šæ‰€ç¤ºè¡Œä¸ºçš„åè®®ï¼Œå›ç­”ä¸‹åˆ—é—®é¢˜ã€‚åœ¨å„ç§æƒ…å†µä¸­ï¼Œç®€è¦åœ°è®ºè¯ä½ çš„å›ç­”ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/yskztt1.png"></p>
<p>ï¼ˆ1ï¼‰æŒ‡å‡ºTCPæ…¢å¯åŠ¨è¿è¡Œæ—¶çš„æ—¶é—´é—´éš”ã€‚</p>
<p>ï¼ˆ2ï¼‰æŒ‡å‡ºTCPæ‹¥å¡é¿å…è¿è¡Œæ—¶çš„æ—¶é—´é—´éš”ã€‚</p>
<p>ï¼ˆ3ï¼‰åœ¨ç¬¬16ä¸ªä¼ è¾“è½®å›ä¹‹åï¼ŒæŠ¥æ–‡æ®µçš„ä¸¢å¤±æ˜¯æ ¹æ®3ä¸ªå†—ä½™ACKè¿˜æ˜¯æ ¹æ®è¶…æ—¶æ£€æµ‹å²€æ¥çš„ï¼Ÿ</p>
<p>ï¼ˆ4ï¼‰åœ¨ç¬¬22ä¸ªä¼ è¾“è½®å›ä¹‹åï¼ŒæŠ¥æ–‡æ®µçš„ä¸¢å¤±æ˜¯æ ¹æ®3ä¸ªå†—ä½™ACKè¿˜æ˜¯æ ¹æ®è¶…æ—¶æ£€æµ‹å‡ºæ¥çš„ï¼Ÿ</p>
<p>ï¼ˆ5ï¼‰åœ¨ç¬¬1ä¸ªä¼ è¾“è½®å›é‡Œï¼Œssthreshçš„åˆå§‹å€¼è®¾ç½®ä¸ºå¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ6ï¼‰åœ¨ç¬¬18ä¸ªä¼ è¾“è½®å›é‡Œï¼Œssthreshçš„å€¼è®¾ç½®ä¸ºå¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ7ï¼‰åœ¨ç¬¬24ä¸ªä¼ è¾“è½®å›é‡Œï¼Œssthreshçš„å€¼è®¾ç½®ä¸ºå¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ8ï¼‰åœ¨å“ªä¸ªä¼ è¾“è½®å›å†…å‘é€ç¬¬70ä¸ªæŠ¥æ–‡æ®µï¼Ÿ</p>
<p>ï¼ˆ9ï¼‰å‡å®šåœ¨ç¬¬26ä¸ªä¼ è¾“è½®å›åï¼Œé€šè¿‡æ”¶åˆ°3ä¸ªå†—ä½™ACKæ£€æµ‹å‡ºæœ‰åˆ†ç»„ä¸¢å¤±ï¼Œæ‹¥å¡çš„çª—å£é•¿åº¦å’Œ ssthreshçš„å€¼åº”å½“æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ10ï¼‰å‡å®šä½¿ç”¨TCP Tahoe ï¼ˆè€Œä¸æ˜¯TCP Renoï¼‰,å¹¶å‡å®šåœ¨ç¬¬16ä¸ªä¼ è¾“è½®å›æ”¶åˆ°3ä¸ªå†—ä½™ACKã€‚åœ¨ç¬¬19 ä¸ªä¼ è¾“è½®å›ï¼Œssthreshå’Œæ‹¥å¡çª—å£é•¿åº¦æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ï¼ˆ11ï¼‰å†æ¬¡å‡è®¾ä½¿ç”¨TCP Tahoe,åœ¨ç¬¬22ä¸ªä¼ è¾“è½®å›æœ‰ä¸€ä¸ªè¶…æ—¶äº‹ä»¶ã€‚ä»ç¬¬17ä¸ªä¼ è¾“è½®å›åˆ°ç¬¬22ä¸ªä¼  è¾“è½®å›ï¼ˆåŒ…æ‹¬è¿™ä¸¤ä¸ªä¼ è¾“è½®å›ï¼‰ï¼Œä¸€å…±å‘é€äº†å¤šå°‘åˆ†ç»„ï¼Ÿ</p>
</blockquote>
<p>(1)	[1,6] and [23,26] </p>
<p>(2)	[6,16] and [17,22]</p>
<p>(3)	3ä¸ªå†—ä½™ACK</p>
<p>(4)	è¶…æ—¶</p>
<p>(5)	32</p>
<p>(6)	21ï¼ˆåœ¨16è½®å›ï¼Œ CongWin &#x3D; 42, ssthreshè®¾ç½®ä¸ºå½“å‰æ‹¥å¡çª—å£çš„ä¸€åŠï¼‰</p>
<p>(7)	14ï¼ˆåœ¨22è½®å›ï¼Œ CongWin &#x3D; 29,å‘ä¸‹å–æ•´ï¼‰</p>
<p>(8)	7ï¼ˆ64-96ï¼‰</p>
<p>(9)	4ï¼Œ7</p>
<p>(10)	21ï¼Œ4ï¼ˆæ‹¥å¡çª—å£é•¿åº¦å˜ä¸º1ï¼Œæ…¢å¯åŠ¨ï¼Œ17ä¸º1ï¼Œ18ä¸º2ï¼Œ19ä¸º4ï¼‰</p>
<p>(11)	52&#x3D;1+2+4+8+16+21(ç¬¬17ä¸ªå‘äº†1ä¸ªï¼Œç¬¬18ä¸ªå‘äº†2ä¸ªï¼Œç¬¬19ä¸ªå‘äº†4ä¸ªï¼Œç¬¬20ä¸ªå‘äº†8ä¸ªï¼Œç¬¬21ä¸ªå‘äº†16ä¸ªï¼Œç¬¬22ä¸ªç¿»å€è¶…è¿‡ssthreshï¼Œå› æ­¤åªå‘äº†21ä¸ª,æ…¢å¯åŠ¨ä¸èƒ½è¶…é˜ˆå€¼)</p>
<blockquote>
<p>ä¸»æœºAé€šè¿‡ä¸€æ¡TCPè¿æ¥å‘ä¸»æœºBå‘é€ä¸€ä¸ªå¾ˆå¤§çš„æ–‡ä»¶ã€‚åœ¨è¿™æ¡è¿æ¥ä¸Šï¼Œä¸ä¼šå‡ºç°ä»»ä½•åˆ†ç»„ä¸¢å¤±å’Œå®šæ—¶å™¨è¶…æ—¶ã€‚ä¸»æœºAä¸å› ç‰¹ç½‘è¿æ¥é“¾è·¯çš„ä¼ è¾“é€Ÿç‡è¡¨ç¤ºä¸ºR  bpsï¼Œä¸»æœºAä¸Šçš„è¿›ç¨‹èƒ½å¤Ÿä»¥S  bps çš„é€Ÿç‡å‘TCPå¥—æ¥å­—å‘é€æ•°æ®ï¼Œå…¶ä¸­S &#x3D; 10 x Rã€‚å‡è®¾TCPçš„æ¥æ”¶ç¼“å­˜è¶³å¤Ÿå¤§ï¼Œèƒ½å¤Ÿå®¹çº³æ•´ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å‘é€ç¼“å­˜åªèƒ½å®¹çº³è¿™ä¸ªæ–‡ä»¶çš„ç™¾åˆ†ä¹‹ä¸€ã€‚å¦‚ä½•é˜²æ­¢ä¸»æœºAä¸Šçš„è¿›ç¨‹è¿ç»­åœ°å‘TCPå¥—æ¥å­—ä»¥é€Ÿç‡S  bpsä¼ é€æ•°æ®å‘¢ï¼Ÿè¿˜æ˜¯ç”¨TCPæµé‡æ§åˆ¶å‘¢ï¼Ÿè¿˜æ˜¯ç”¨TCPæ‹¥å¡æ§åˆ¶ï¼Ÿæˆ–è€…ç”¨å…¶ä»–æªæ–½ï¼Ÿé˜è¿°å…¶ç†ç”±ã€‚</p>
</blockquote>
<p>é¦–å…ˆï¼Œç”±äºæ¥æ”¶æ–¹çš„æ¥æ”¶ç¼“å­˜èƒ½å®¹çº³æ•´ä¸ªå¤§æ–‡ä»¶ï¼Œå› æ­¤ä¸ä¼šå‡ºç°æµé‡æ§åˆ¶ï¼›å¹¶ä¸”å› ä¸ºåœ¨è¿™æ¡è¿æ¥ä¸Šä¸ä¼šå‡ºç°ä»»ä½•åˆ†ç»„ä¸¢å¤±å’Œå®šæ—¶å™¨è¶…æ—¶ï¼Œå› æ­¤æ‹¥å¡æ§åˆ¶æœºåˆ¶ä¸ä¼šéåˆ¶å‘é€æ–¹çš„é€Ÿç‡ã€‚æœ€åï¼Œç”±äºå‘é€æ–¹çš„å‘é€ç¼“å­˜ä¼šå¾ˆå¿«è¢«å¡«å……æ»¡ï¼Œå› æ­¤ä¸€æ—¦å‘é€ç¼“å­˜è¢«å¡«å……æ»¡ï¼Œè¿›ç¨‹å°†æ— æ³•ç»§ç»­ä»¥ S é€Ÿç‡å‘å¥—æ¥å­—å‘é€æ•°æ®ï¼Œè€Œæ˜¯ä»¥ R å‘å¥—æ¥å­—å‘é€æ•°æ®ã€‚</p>
<blockquote>
<p><strong>æ¯”è¾ƒGBNã€SRå’ŒTCPï¼ˆæ— å»¶æ—¶çš„ACKï¼‰ã€‚å‡è®¾å¯¹æ‰€æœ‰3ä¸ªåè®®çš„è¶…æ—¶å€¼è¶³å¤Ÿé•¿ï¼Œä½¿å¾—5ä¸ªè¿ç»­çš„æ•°æ®æŠ¥æ–‡æ®µåŠå…¶å¯¹åº”çš„ACKèƒ½å¤Ÿåˆ†åˆ«ç”±æ¥æ”¶ä¸»æœºï¼ˆä¸»æœºBï¼‰å’Œå‘é€ä¸»æœºï¼ˆä¸»æœºAï¼‰æ”¶åˆ°ï¼ˆå¦‚æœåœ¨ä¿¡é“ä¸­æ— ä¸¢å¤±ï¼‰ã€‚å‡è®¾ä¸»æœºAå‘ä¸»æœºBå‘é€5ä¸ªæ•°æ®æŠ¥æ–‡æ®µï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µï¼ˆä»Aå‡ºå‘ï¼‰ä¸¢å¤±ã€‚æœ€åæ‰€æœ‰5ä¸ªæ•°æ®æŠ¥æ–‡æ®µå·²ç»è¢«ä¸»æœºBæ­£ç¡®æ¥æ”¶ã€‚</strong></p>
<p><strong>è¯·é—®ä¸»æœºAæ€»å…±å‘é€äº†å¤šå°‘ä¸ªæŠ¥æ–‡æ®µå’Œä¸»æœºBæ€»å…±å‘é€äº†å¤šå°‘ACKï¼Ÿå®ƒä»¬çš„åºå·æ˜¯å¤šå°‘ï¼Ÿå¯¹äºä¸‰ç§åè®®å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</strong></p>
</blockquote>
<p>å‡è®¾å‘é€çš„äº”ä¸ªæ•°æ®æŠ¥æ–‡æ®µçš„åºå·åˆ†åˆ«ä¸º1ã€2ã€3ã€4ã€5.</p>
<p>GBNï¼šAæ€»å…±å‘é€äº†5+4&#x3D;9ä¸ªæŠ¥æ–‡æ®µï¼Œåˆ†åˆ«ä¸º1ã€2ã€3ã€4ã€5ã€2ã€3ã€4ã€5ï¼ŒBæ€»å…±å‘é€äº†4+4&#x3D;8ä¸ªACKï¼Œåºå·åˆ†åˆ«ä¸º1ã€1ã€1ã€1ã€2ã€3ã€4ã€5ï¼›</p>
<p>SRï¼šAæ€»å…±å‘é€äº†5+1&#x3D;6ä¸ªæŠ¥æ–‡æ®µï¼Œåˆ†åˆ«ä¸º1ã€2ã€3ã€4ã€5ã€2ï¼ŒBæ€»å…±å‘é€äº†4+1&#x3D;5ä¸ªACKï¼Œåºå·åˆ†åˆ«ä¸º1ã€3ã€4ã€5ã€2ï¼›</p>
<p>TCPï¼šAæ€»å…±å‘é€äº†5+1&#x3D;6ä¸ªæŠ¥æ–‡æ®µï¼Œåˆ†åˆ«ä¸º1ã€2ã€3ã€4ã€5ã€2ï¼ŒBæ€»å…±å‘é€äº†4+1&#x3D;5ä¸ªACKï¼Œåºå·åˆ†åˆ«ä¸º2ã€2ã€2ã€2ã€6.</p>
<p><strong>å¯¹äºTCPï¼ŒGBNï¼ŒSRä¹‹é—´å…³ç³»çš„æ€»ç»“</strong>ï¼š</p>
<p><em><strong>GBN</strong></em>ï¼š</p>
<p>å‘é€æ–¹æ‹¥æœ‰ä¸€ä¸ªçª—å£ï¼Œé•¿åº¦ä¸ºNï¼›</p>
<p>æ¥æ”¶æ–¹æ— çª—å£ï¼Œåªæ¥æ”¶å¸Œæœ›æ¥å—åºå·çš„æŠ¥æ–‡ï¼Œå¯¹äºå¤±åºåˆ°è¾¾çš„æŠ¥æ–‡æ®µé‡‡å–çš„æ–¹å¼æ˜¯ç›´æ¥ä¸¢å¼ƒï¼›</p>
<p>åœ¨é‡ä¼ çš„æ—¶å€™ï¼Œå°†ä¼šé‡ä¼ å½“å‰å‘é€æ–¹çª—å£ä¸­<strong>æ‰€æœ‰æœªè¢«ç¡®è®¤</strong>çš„æŠ¥æ–‡æ®µï¼›</p>
<p>é‡‡ç”¨<strong>ç´¯è®¡åº”ç­”</strong>çš„æ–¹å¼ã€‚ä¾‹å¦‚æ¥æ”¶ç«¯è¿”å›ACK&#x3D;3ï¼Œåˆ™è¯æ˜æŠ¥æ–‡æ®µ3ä»¥åŠä¹‹å‰çš„æŠ¥æ–‡æ®µéƒ½è¢«æ­£ç¡®æ¥æ”¶ã€‚</p>
<p>æ¥æ”¶ç«¯ä¸å¯¹å¤±åºåˆ°è¾¾çš„åˆ†ç»„è¿›è¡Œç¼“å­˜ã€‚</p>
<p><em><strong>SR</strong></em>ï¼š</p>
<p>å‘é€æ–¹æ‹¥æœ‰ä¸€ä¸ªçª—å£ï¼Œé•¿åº¦ä¸ºNï¼›</p>
<p>æ¥æ”¶æ–¹æ‹¥æœ‰ä¸€ä¸ªçª—å£ï¼Œé•¿åº¦ä¸ºNï¼Œå¯¹äºå¤±åºåˆ°è¾¾çš„æŠ¥æ–‡æ®µå°†ä¼š<strong>ç¼“å­˜</strong>ä¸‹æ¥ï¼›</p>
<p>åœ¨é‡ä¼ çš„æ—¶å€™ï¼Œå°†ä¼š<strong>é‡ä¼ çª—å£ä¸­è¶…æ—¶çš„å•ä¸ªæŠ¥æ–‡</strong>ï¼Œè€Œä¸ä¼šé‡ä¼ çª—å£ä¸­æ‰€æœ‰çš„æŠ¥æ–‡ï¼›</p>
<p>æ¥æ”¶ç«¯è¿”å›ACKæ˜¯å½“å‰æ¥æ”¶æˆåŠŸæŠ¥æ–‡æ®µçš„åºå·ï¼ŒSRä¸é‡‡ç”¨ç´¯è®¡åº”ç­”çš„æ–¹å¼ï¼Œå¦‚æ¥æ”¶åˆ°åºå·ä¸º0çš„æŠ¥æ–‡æ®µï¼Œåˆ™ACKç¡®è®¤ACK&#x3D;0ã€‚</p>
<p><em><strong>TCP</strong></em>ï¼š</p>
<p>TCPä½¿ç”¨ç´¯è®¡åº”ç­”çš„æ–¹å¼ã€‚è¿™ä¸€ç‚¹ä¸GBNç±»ä¼¼ã€‚</p>
<p>TCPåœ¨æ¥æ”¶ç«¯ä¼šè®¾ç½®ç¼“å­˜ï¼Œæ¥ç¼“å­˜æ­£ç¡®æ¥æ”¶ä½†æ˜¯å¤±åºçš„åˆ†ç»„ï¼Œè¿™ç‚¹ä¸SRç±»ä¼¼ã€‚ï¼ˆå®é™…ä¸ŠTCP RFCå¹¶æ²¡æœ‰å¯¹æ¥æ”¶ç«¯è¦æ€æ ·å¤„ç†å¤±åºåˆ°è¾¾çš„åˆ†ç»„æå‡ºè¦æ±‚ï¼Œä½†æ˜¯åœ¨æ¥æ”¶ç«¯è®¾ç½®ç¼“å­˜æ˜¯å®è·µä¸­å¤§å®¶éƒ½é‡‡ç”¨çš„æ–¹æ³•ï¼‰</p>
<p>TCPä½¿ç”¨<strong>å¿«é€Ÿé‡ä¼ </strong>æœºåˆ¶ï¼šå¦‚æœæ”¶åˆ°å¯¹äºä¸€ä¸ªç‰¹å®šæŠ¥æ–‡æ®µçš„3ä¸ªå†—ä½™ACKï¼Œåˆ™åœ¨è¶…æ—¶äº‹ä»¶å‘ç”Ÿå‰å°±ä¼šå¯¹è¯¥æŠ¥æ–‡æ®µè¿›è¡Œé‡ä¼ ï¼Œè¿™å¤§å¤§èŠ‚çº¦äº†æ—¶é—´ã€‚</p>
<p>åœ¨é‡ä¼ çš„æ—¶å€™ï¼Œå°†ä¼šé‡ä¼ çª—å£ä¸­è¶…æ—¶çš„å•ä¸ªæŠ¥æ–‡ï¼Œè€Œä¸ä¼šé‡ä¼ çª—å£ä¸­æ‰€æœ‰çš„æŠ¥æ–‡ï¼›</p>
<p>æ¥æ”¶æ–¹å›å¤çš„ACKç¡®è®¤åºå·æ˜¯å¸Œæœ›æ¥æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ï¼Œå¦‚æ¥æ”¶åˆ°åºå·ä¸º0çš„æŠ¥æ–‡æ®µï¼Œåˆ™ACKç¡®è®¤ACK&#x3D;1ã€‚</p>
<p><em><strong>è¡¥å……å…³äºé€‰æ‹©é‡ä¼ çš„è¿‡ç¨‹</strong></em>ï¼š</p>
<p><strong>çª—å£ä¸‹ç•Œï¼šæœ€å·¦è¾¹ç¬¬ä¸€ä¸ªçª—å£å¯¹åº”çš„åºå·</strong></p>
<p>å‡è®¾å‘é€çª—å£å’Œæ¥æ”¶çª—å£éƒ½ä¸º4ï¼Œå‘é€æ–¹å‘é€0å¸§ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°0å¸§ï¼Œå¹¶å›å¤0å¸§ç¡®è®¤ï¼Œç”±äº0å¸§æ˜¯æ¥æ”¶çª—å£ä¸‹ç•Œï¼Œäºæ˜¯ç§»åŠ¨çª—å£ä½¿å¾—çª—å£ä¸‹ç•Œä¸ºç¬¬ä¸€ä¸ªæœªè¢«æ¥æ”¶çš„å¸§ï¼ˆ1å·å¸§ï¼‰ï¼ŒåŒæ—¶æŠŠæ–°åŠ å…¥å¸§ï¼ˆ4å·å¸§ï¼‰çš„çŠ¶æ€ç½®ä¸ºå¯æ¥æ”¶çŠ¶æ€ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_15-56-21.png"></p>
<p>å‘é€æ–¹å‘é€1å¸§ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°1å¸§ï¼Œå¹¶å›å¤1å¸§ç¡®è®¤ï¼Œç”±äº1å¸§æ˜¯æ¥æ”¶çª—å£ä¸‹ç•Œï¼Œäºæ˜¯ç§»åŠ¨çª—å£ä½¿å¾—çª—å£ä¸‹ç•Œä¸ºç¬¬ä¸€ä¸ªæœªè¢«æ¥æ”¶çš„å¸§ï¼ˆ2å·å¸§ï¼‰ï¼ŒåŒæ—¶æŠŠæ–°åŠ å…¥å¸§ï¼ˆ5å·å¸§ï¼‰çš„çŠ¶æ€ç½®ä¸ºå¯æ¥æ”¶çŠ¶æ€ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_15-56-30.png"></p>
<p>å‘é€æ–¹å‘é€2å¸§ï¼Œä½†æ˜¯2å¸§ä¸¢å¤±ï¼Œæ¥æ”¶æ–¹æœªæ”¶åˆ°2å¸§ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_15-56-44.png"></p>
<p>å‘é€æ–¹å‘é€3å¸§ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°3å¸§ï¼Œç¼“å­˜ä¸‰å¸§ï¼Œå‘é€ACK3ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_15-56-52.png"></p>
<p>å‘é€æ–¹æ”¶åˆ°ACK0ï¼Œç”±äºçª—å£ä¸‹é™è¢«ç¡®è®¤ï¼Œæ‰€ä»¥çª—å£å³ç§»ä¸€ä¸ªï¼Œå‘é€4å¸§ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°4å¸§ï¼Œç¼“å­˜ï¼Œå‘é€ACK4ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_15-57-20.png"></p>
<p>å‘é€æ–¹æ”¶åˆ°ACK1ï¼Œç”±äºçª—å£ä¸‹ç•Œè¢«ç¡®è®¤ï¼Œæ‰€ä»¥çª—å£å³ç§»1ä¸ªï¼Œå‘é€5å¸§ï¼Œæ¥æ”¶æ–¹æ¥æ”¶5å¸§ï¼Œç¼“å­˜ï¼Œå‘é€ACK5ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_15-57-27.png"></p>
<p>å‘é€æ–¹2å¸§è¶…æ—¶æœªæ”¶åˆ°2å¸§ç¡®è®¤ï¼Œé‡æ–°ä¼ 2å¸§ï¼Œè¿™æ¬¡æ¥æ”¶æ–¹æ”¶åˆ°äº†ï¼Œ2-5å¸§äº¤ä»˜ï¼ˆå‘é€ç»™ä¸Šå±‚ç½‘ç»œå±‚ï¼‰ï¼Œå‘é€ACK2ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_15-57-36.png"></p>
<p>å‘é€æ–¹æ”¶åˆ°ACK3ï¼Œä½†æ˜¯æ— å¸§å¯å‘ï¼Œç­‰å¾…ï¼Œä¸€ç›´åˆ°ACK2åˆ°è¾¾ï¼Œçª—å£ä¸‹ç•Œè¢«ç¡®è®¤ï¼Œçª—å£å³ç§»1ä¸ªã€‚</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“æœŸæœ«å¤ä¹ </title>
    <url>/2023/06/03/%E6%95%B0%E6%8D%AE%E5%BA%93/db1/</url>
    <content><![CDATA[<h2 id="ç¬¬ä¸€ç« æ•°æ®åº“ç³»ç»Ÿæ¦‚è®º"><a href="#ç¬¬ä¸€ç« æ•°æ®åº“ç³»ç»Ÿæ¦‚è®º" class="headerlink" title="ç¬¬ä¸€ç« 	æ•°æ®åº“ç³»ç»Ÿæ¦‚è®º"></a>ç¬¬ä¸€ç« 	æ•°æ®åº“ç³»ç»Ÿæ¦‚è®º</h2><ul>
<li><p>åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ä¸­ï¼Œä¸‹é¢å“ªä¸ªå±‚æ¬¡è´Ÿè´£å¯¹æ•°æ®æ–‡ä»¶è¿›è¡Œæ“ä½œè®¿é—®?<br>A.æ“ä½œç•Œé¢å±‚	B.è¯­è¨€ç¿»è¯‘å¤„ç†å±‚	C.æ•°æ®å­˜å–å±‚	<strong>D.æ•°æ®å­˜å‚¨å±‚</strong></p>
<p>  æ ¹æ®å¤„ç†å¯¹è±¡çš„ä¸åŒï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ç”±å¤–è‡³å†…ä¾æ¬¡ä¸ºåº”ç”¨å±‚ã€è¯­è¨€ç¿»è¯‘å¤„ç†å±‚ã€æ•°æ®å­˜å–å±‚ã€æ•°æ®å­˜å‚¨å±‚ã€‚</p>
<p>  (1)åº”ç”¨å±‚ï¼šæ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸ç»ˆç«¯ç”¨æˆ·å’Œåº”ç”¨ç¨‹åºçš„ç•Œé¢ï¼Œè´Ÿè´£å¤„ç†å„ç§æ•°æ®åº“åº”ç”¨ï¼Œå¦‚ä½¿ç”¨ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€<a href="https://baike.baidu.com/item/SQL?fromModule=lemma_inlink">SQL</a>å‘å‡ºçš„äº‹åŠ¡è¯·æ±‚æˆ–åµŒå…¥é€šç”¨çš„<a href="https://baike.baidu.com/item/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80?fromModule=lemma_inlink">ç¨‹åºè®¾è®¡è¯­è¨€</a>çš„åº”ç”¨ç¨‹åºå¯¹<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93?fromModule=lemma_inlink">æ•°æ®åº“</a>çš„è¯·æ±‚ã€‚</p>
<p>  (2)è¯­è¨€å¤„ç†å±‚ï¼šç”±DDLç¼–è¯‘å™¨ã€DMLç¼–è¯‘å™¨ã€DCLç¼–è¯‘å™¨ã€æŸ¥è¯¢å™¨ç­‰ç»„æˆï¼Œè´Ÿè´£å®Œæˆå¯¹<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%AD%E8%A8%80?fromModule=lemma_inlink">æ•°æ®åº“è¯­è¨€</a>çš„å„ç±»è¯­å¥è¿›è¡Œè¯æ³•åˆ†æã€<a href="https://baike.baidu.com/item/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90?fromModule=lemma_inlink">è¯­æ³•åˆ†æ</a>å’Œ<a href="https://baike.baidu.com/item/%E8%AF%AD%E4%B9%89%E5%88%86%E6%9E%90?fromModule=lemma_inlink">è¯­ä¹‰åˆ†æ</a>ï¼Œç”Ÿæˆå¯æ‰§è¡Œçš„ä»£ç ã€‚æ­¤å¤–ï¼Œè¿˜è´Ÿè´£è¿›è¡Œæˆæƒæ£€éªŒã€è§†å›¾è½¬æ¢ã€å®Œæ•´æ€§æ£€æŸ¥ã€æŸ¥è¯¢ä¼˜åŒ–ç­‰ã€‚</p>
<p>  (3)æ•°æ®å­˜å–å±‚ï¼šå°†ä¸Šå±‚çš„é›†åˆæ“ä½œè½¬æ¢ä¸ºå¯¹<strong>è®°å½•</strong>çš„æ“ä½œï¼ŒåŒ…æ‹¬æ‰«æã€æ’åºã€æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ç­‰ï¼Œå®Œæˆæ•°æ®çš„å­˜å–ã€è·¯å¾„çš„ç»´æŠ¤ä»¥åŠå¹¶å‘æ§åˆ¶ç­‰ä»»åŠ¡ã€‚</p>
<p>  (4)æ•°æ®å­˜å‚¨å±‚ï¼šç”±æ–‡ä»¶ç®¡ç†å™¨å’Œç¼“å†²åŒºç®¡ç†å™¨ç»„æˆï¼Œè´Ÿè´£å®Œæˆæ•°æ®çš„é¡µé¢å­˜å‚¨å’Œç³»ç»Ÿçš„ç¼“å†²åŒºç®¡ç†ç­‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ã€è¯»å†™é¡µé¢ã€è¯»å†™ç¼“å†²åŒºã€é¡µé¢æ·˜æ±°ã€å†…å¤–å­˜äº¤æ¢ä»¥åŠå¤–å±‚ç®¡ç†ç­‰ã€‚</p>
</li>
<li><p>åœ¨æ•°æ®åº“é¢†åŸŸæŠ€æœ¯ä¸­ï¼Œä¸‹é¢å“ªç§æŠ€æœ¯å¯ä»¥å®ç°æ•°æ®é›†æˆ?<br>A.æ•°æ®åº“æŠ€æœ¯	<strong>B.æ•°æ®ä»“åº“æŠ€æœ¯</strong>	C.æ•°æ®æŒ–æ˜æŠ€æœ¯	D.å•†ä¸šæ™ºèƒ½æŠ€æœ¯</p>
<p>æ•°æ®ä»“åº“ (Data Warehouse) ç®€ç§°DWï¼Œå­˜å‚¨å¤§é‡æ•°æ®çš„é›†æˆä¸­å¿ƒã€‚æ•°æ®ä»“åº“çš„ç›®çš„æ˜¯æ„å»ºé¢å‘åˆ†æçš„é›†æˆåŒ–æ•°æ®ç¯å¢ƒï¼Œä¸ºä¼ä¸šæä¾›å†³ç­–æ”¯æŒï¼ˆDecision-Supportï¼‰ã€‚å®ƒä¸ºä¼ä¸šæä¾›ä¸€å®šçš„BIï¼ˆå•†ä¸šæ™ºèƒ½ï¼‰èƒ½åŠ›ï¼ŒæŒ‡å¯¼ä¸šåŠ¡æµç¨‹æ”¹è¿›ã€ç›‘è§†æ—¶é—´ã€æˆæœ¬ã€è´¨é‡ä»¥åŠæ§åˆ¶ã€‚æ•°æ®åº“æŒ–æ˜å¯å»ºç«‹åœ¨æ•°æ®ä»“åº“åŸºç¡€ä¸Šè¿›è¡Œæ•°æ®åˆ†æå¤„ç†ã€‚</p>
</li>
<li><p>ä¸‹é¢å“ªç§æ•°æ®åº“ç³»ç»Ÿåº”ç”¨ç»“æ„é€‚åˆé“¶è¡Œä¸šåŠ¡ç³»ç»Ÿ?<br>A.é›†ä¸­å¼ç»“æ„    B.å®¢æˆ·&#x2F;æœåŠ¡å™¨ç»“æ„	<strong>C.åˆ†å¸ƒå¼ç»“æ„</strong>	D.ä»¥ä¸Šç»“æ„éƒ½å¯ä»¥<br>  åˆ†å¸ƒå¼æ•°æ®åº“çš„åº”ç”¨åœºæ™¯ä¸»è¦ç‰¹å¾æ˜¯æµ·é‡å¹¶å‘ï¼Œæ‰€ä»¥ç†è®ºè¯´ï¼Œä¸šåŠ¡è§„æ¨¡è¶Šå¤§ï¼Œä½¿ç”¨åˆ†å¸ƒå¼æ•°æ®åº“çš„éœ€æ±‚ä¹Ÿå°±è¶Šè¿«åˆ‡ã€‚</p>
</li>
<li><p>MySqlâ€”â€”åº”ç”¨å¹¿æ³›çš„å¼€æº<strong>å…³ç³»</strong>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œ<em>ä¸æ˜¯ä¼ä¸šçº§DBMS</em>ï¼ŒPostgreSQLâ€”â€”æŠ€æœ¯é¢†å…ˆçš„å¼€æº<strong>å¯¹è±¡-å…³ç³»</strong>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</p>
</li>
<li><p>ä¸‹é¢å“ªä¸ªç¨‹åºå®ç°PostgreSQLæœåŠ¡å™¨èµ·åœæ§åˆ¶ï¼Ÿpg_ctl</p>
<blockquote>
<p>åˆå§‹åŒ–æ•°æ®åº“<br>pg_ctl init<br>å¯åŠ¨æ•°æ®åº“<br>pg_ctl start<br>å…³é—­æ•°æ®åº“<br>pg_ctl stop<br>é‡å¯æ•°æ®åº“<br>pg_ctl restart </p>
</blockquote>
</li>
<li><p>ä¸‹é¢å“ªç±»æ•°æ®åº“æ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„æ•°æ®åº“?<br>A.MySQL	B.PostgreSQL	<strong>C.Oracle Database</strong>	D.SQL Server<br>Oracle Databaseâ€”â€”ç”²éª¨æ–‡å…¬å¸æ¨å‡ºçš„ä¼ä¸šçº§æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</p>
</li>
<li><p>SQLiteæ•°æ®åº“å¯ä»¥åœ¨æ‰‹æœºä¸­è¿è¡Œ</p>
</li>
<li><p>ç”¨æˆ·ç¨‹åºå¯ä»¥ç›´æ¥è®¿é—®æ•°æ®åº“æ–‡ä»¶å—ï¼Ÿ<br>ç”¨æˆ·ç¨‹åºé€šå¸¸ä¸èƒ½ç›´æ¥è®¿é—®æ•°æ®åº“æ–‡ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·ç¨‹åºéœ€è¦é€šè¿‡åº”ç”¨ç¨‹åºå‘æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰å‘é€è¯·æ±‚ï¼Œç„¶åç”±DBMSè§£æè¯·æ±‚å¹¶ä»æ•°æ®åº“ä¸­æ£€ç´¢æ‰€éœ€çš„æ•°æ®ï¼Œæœ€åå°†æ•°æ®è¿”å›ç»™åº”ç”¨ç¨‹åºï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚è¿™æ ·åšå¯ä»¥ä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ã€‚</p>
</li>
<li><p>NOSQLæ•°æ®åº“é€‚ç”¨äºå­˜å‚¨éç»“æ„åŒ–æˆ–åŠç»“æ„åŒ–æ•°æ®çš„åœºæ™¯ã€‚</p>
</li>
<li><p><strong>å…ƒæ•°æ®</strong>ï¼ˆ<strong>Metadata</strong>ï¼‰ï¼Œåˆç§°<strong>ä¸­ä»‹æ•°æ®</strong>ã€<strong>ä¸­ç»§æ•°æ®</strong>ï¼Œä¸ºæè¿°<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE/5947370?fromModule=lemma_inlink">æ•°æ®</a>çš„æ•°æ®ï¼ˆdata about dataï¼‰ï¼Œä¸»è¦æ˜¯æè¿°æ•°æ®<a href="https://baike.baidu.com/item/%E5%B1%9E%E6%80%A7/1405051?fromModule=lemma_inlink">å±æ€§</a>ï¼ˆpropertyï¼‰çš„<a href="https://baike.baidu.com/item/%E4%BF%A1%E6%81%AF/111163?fromModule=lemma_inlink">ä¿¡æ¯</a>ï¼Œç”¨æ¥æ”¯æŒå¦‚æŒ‡ç¤ºå­˜å‚¨ä½ç½®ã€<a href="https://baike.baidu.com/item/%E5%8E%86%E5%8F%B2/360?fromModule=lemma_inlink">å†å²</a>æ•°æ®ã€<a href="https://baike.baidu.com/item/%E8%B5%84%E6%BA%90/9089683?fromModule=lemma_inlink">èµ„æº</a>æŸ¥æ‰¾ã€æ–‡ä»¶è®°å½•ç­‰åŠŸèƒ½ã€‚ä¸šåŠ¡è§„åˆ™æ•°æ®åœ¨æ•°æ®åº“ä¸­ä¹Ÿæ˜¯ä¸€ç§å…ƒæ•°æ®ã€‚æ­£ç¡®</p>
</li>
<li><p>ä¸‹é¢å“ªç±»æ•°æ®åº“åº”ç”¨ç³»ç»Ÿéœ€è¦ä½¿ç”¨æ•°æ®åˆ†æå¤„ç†æŠ€æœ¯ï¼Ÿå†³ç­–æ”¯æŒ</p>
</li>
<li><p>è®°å½•ï¼ˆRecordï¼‰<br>è¡¨ä¸­çš„æ¯ä¸€è¡Œç§°ä¸ºä¸€ä¸ª<strong>è®°å½•</strong>ï¼Œå®ƒç”±è‹¥å¹²ä¸ªå­—æ®µç»„æˆï¼<br>å­—æ®µï¼ˆFieldï¼‰<br>ä¹Ÿç§°åŸŸï¼è¡¨ä¸­çš„æ¯ä¸€åˆ—ç§°ä¸ºä¸€ä¸ª<strong>å­—æ®µ</strong>ï¼æ¯ä¸ªå­—æ®µéƒ½æœ‰ç›¸åº”çš„æè¿°ä¿¡æ¯ï¼Œå¦‚æ•°æ®ç±»å‹ã€æ•°æ®å®½åº¦ç­‰</p>
</li>
</ul>
<h2 id="ç¬¬äºŒç« æ•°æ®åº“å…³ç³»æ¨¡å‹"><a href="#ç¬¬äºŒç« æ•°æ®åº“å…³ç³»æ¨¡å‹" class="headerlink" title="ç¬¬äºŒç« 	æ•°æ®åº“å…³ç³»æ¨¡å‹"></a>ç¬¬äºŒç« 	æ•°æ®åº“å…³ç³»æ¨¡å‹</h2><p>å®ä½“å®Œæ•´æ€§æ˜¯æŒ‡å…³ç³»è¡¨çš„å±æ€§ç»„æˆå¿…é¡»æ˜¯å®Œæ•´çš„ã€‚é”™è¯¯ï¼ï¼</p>
<p>è‡ªç„¶è¿æ¥æ˜¯ä¸€ç§ç­‰å€¼è¿æ¥ã€‚æ­£ç¡®ï¼ï¼</p>
<p>ä»£ç†é”®æ˜¯ä¸ºäº†å”¯ä¸€æ ‡è¯†å…³ç³»çš„ä¸åŒå…ƒç»„ï¼Œéœ€è¦åœ¨è¡¨å•æˆ–æŠ¥è¡¨ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚é”™è¯¯ï¼ï¼</p>
<p>å…³ç³»è¡¨ï¼š</p>
<blockquote>
<p>è¡¨ä¸­æ¯è¡Œå­˜å‚¨å®ä½“çš„ä¸€ä¸ªå®ä¾‹æ•°æ®è¡¨ä¸­æ¯åˆ—åŒ…å«å®ä½“çš„ä¸€é¡¹å±æ€§æ•°æ®è¡¨ä¸­å•å…ƒæ ¼åªèƒ½å­˜å‚¨å•ä¸ªå€¼<br>ä¸å…è®¸æœ‰é‡å¤çš„è¡Œ<br>ä¸å…è®¸æœ‰é‡å¤çš„åˆ—åˆ—<br>é¡ºåºå¯ä»»æ„<br>è¡Œé¡ºåºå¯ä»»æ„</p>
</blockquote>
<p>ç¬›å¡å°”ç§¯ï¼š</p>
<p><a href="https://smms.app/image/IGhF634XaVM19PY" target="_blank"><img src="https://s2.loli.net/2023/06/03/IGhF634XaVM19PY.png" ></a></p>
<p>åœ¨å…³ç³»ä¸­ï¼Œå¯ä»¥ç”¨æ¥å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§åˆ—ï¼Œç§°ä¸º<strong>é”®</strong>(Key)ï¼Œå…¶å®ƒå±æ€§åˆ—éƒ½ä¸ºéé”®åˆ—ã€‚</p>
<p><strong>å¤åˆé”®</strong>(Compound Key)â€”â€”æ˜¯æŒ‡å…³ç³»ä¸­ç”¨æ¥å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å¤šåˆ—ä½œä¸ºé”®ã€‚(å­¦å·,è¯¾ç¨‹ç¼–å·)å°±æ˜¯ä¸€ç»„å¤åˆé”®ã€‚</p>
<p><strong>å€™é€‰é”®</strong>(Candidate Key)â€”â€”å…³ç³»ä¸­å¯èƒ½æœ‰å¤šä¸ªåˆ—å‡é€‚åˆä½œä¸ºé”®ï¼Œå°†å…¶ä¸­æ¯ä¸ªéƒ½ç§°ä¸ºå€™é€‰é”®ã€‚</p>
<p><strong>ä¸»é”®</strong>(Primary key)æ˜¯å…³ç³»è¡¨ä¸­æœ€æœ‰ä»£è¡¨æ€§çš„ä¸€ä¸ªå€™é€‰é”®ã€‚æ¯ä¸ªå…³ç³»è¡¨ä¸­åªèƒ½å®šä¹‰ä¸€ä¸ªä¸»é”®ã€‚</p>
<p>ä¸»é”®çš„ä½œç”¨ï¼š</p>
<blockquote>
<p>å”¯ä¸€æ ‡è¯†å…³ç³»è¡¨çš„æ¯è¡Œï¼ˆå…ƒç»„)<br>ä¸å…³è”è¡¨çš„å¤–é”®å»ºç«‹è”ç³»ï¼Œå®ç°å…³ç³»è¡¨ä¹‹é—´è¿æ¥<br>æ•°æ®åº“æ–‡ä»¶ä½¿ç”¨ä¸»é”®å€¼æ¥ç»„ç»‡å…³ç³»è¡¨çš„æ•°æ®å­˜å‚¨<br>æ•°æ®åº“ä½¿ç”¨ä¸»é”®ç´¢å¼•å¿«é€Ÿæ£€ç´¢æ•°æ®</p>
</blockquote>
<p><strong>ä»£ç†é”®</strong>â€”â€”é‡‡ç”¨DBMSè‡ªåŠ¨ç”Ÿæˆçš„æ•°å­—åºåˆ—ä½œä¸ºå…³ç³»è¡¨çš„ä¸»é”®ã€‚<br>ä»£ç†é”®æœ‰ä»€ä¹ˆç”¨é€”?<br>ç”±DBMSè‡ªåŠ¨ç”Ÿæˆçš„æ•°å­—åºåˆ—ä½œä¸ºä¸»é”®ï¼Œå¯æ›¿ä»£å¤åˆä¸»é”®ï¼Œä»¥ä¾¿è·å¾—æ›´é«˜æ€§èƒ½çš„æ•°æ®è®¿	é—®æ“ä½œå¤„ç†ã€‚</p>
<p>å…³ç³»æ¨¡å¼è¯­å¥ä¸­ä¸»é”®è¡¨ç¤ºæ–¹æ³•:å…³ç³»åï¼ˆ<u>ä¸»é”®å±æ€§</u>ï¼Œå±æ€§2ï¼Œï¼Œå±æ€§x)</p>
<p><a href="https://smms.app/image/Aipa9Wvl3EJYZHb" target="_blank"><img src="https://s2.loli.net/2023/06/03/Aipa9Wvl3EJYZHb.png" ></a></p>
<p><strong>å…³ç³»æ¨¡å‹</strong>(Relation Model)â€”â€”æ˜¯ä¸€ç§åŸºäºäºŒç»´è¡¨ç»“æ„å­˜å‚¨æ•°æ®å®ä½“åŠå®ä½“é—´è”ç³»çš„æ•°æ®æ¨¡å‹ã€‚</p>
<p>é›†åˆè¿ç®—æ“ä½œåŒ…æ‹¬<strong>é€‰æ‹©</strong>(select)ã€<strong>æŠ•å½±</strong>ï¼ˆproject)ã€<strong>è¿æ¥</strong>ï¼ˆjoin) ã€<strong>äº¤</strong>(intersectionï¼‰ã€<strong>å¹¶</strong>(union)ã€<strong>å·®</strong>(differenceï¼‰ç­‰ã€‚<br>ä¸“é—¨å…³ç³»æ“ä½œåŒ…æ‹¬æ•°æ®è¡Œ<strong>æ’å…¥</strong>(Insert) ã€<strong>ä¿®æ”¹</strong>(Updateï¼‰ã€<strong>åˆ é™¤</strong>(Deleteï¼‰æ“ä½œã€‚</p>
<p><a href="https://smms.app/image/iPBg21lY8NzprSx" target="_blank"><img src="https://s2.loli.net/2023/06/03/iPBg21lY8NzprSx.png" ></a></p>
<p>ä»¥ä¸‹æ˜¯è€å¸ˆç»™çš„ç­”æ¡ˆï¼Œæœ‰äº›è®¸å°é”™è¯¯ï¼Œæä¾›ä¸ªæ€è·¯å°±å¯ä»¥å•¦~</p>
<p><a href="https://smms.app/image/oT586hL2t3Zcj7f" target="_blank"><img src="https://s2.loli.net/2023/06/03/oT586hL2t3Zcj7f.png" ></a></p>
<p>å…³ç³»æ¨¡å‹å®Œæ•´æ€§æ˜¯æŒ‡åœ¨å…³ç³»æ•°æ®æ¨¡å‹ä¸­å¯¹å…³ç³»å®æ–½çš„å®Œæ•´æ€§çº¦æŸã€‚</p>
<p>å®Œæ•´æ€§çº¦æŸä½œç”¨:</p>
<blockquote>
<p>æ¶ˆé™¤å…³ç³»è¡¨çš„å…ƒç»„é‡å¤å­˜å‚¨</p>
<p>ä¿æŒå…³è”è¡¨çš„æ•°æ®ä¸€è‡´æ€§</p>
<p>å®ç°ä¸šåŠ¡æ•°æ®è§„åˆ™</p>
</blockquote>
<p>å…³ç³»æ¨¡å‹å®Œæ•´æ€§çº¦æŸåˆ†ç±»:</p>
<ul>
<li>å®ä½“å®Œæ•´æ€§çº¦æŸ</li>
</ul>
<p><strong>å®ä½“å®Œæ•´æ€§</strong>æ˜¯æŒ‡åœ¨å…³ç³»è¡¨ä¸­å®æ–½çš„<strong>ä¸»é”®å–å€¼çº¦æŸ</strong>ï¼Œä»¥ä¿è¯å…³ç³»è¡¨ä¸­çš„æ¯ä¸ªå…ƒç»„å¯ä»¥è¢«å”¯	ä¸€æ ‡è¯†ã€‚</p>
<p>å®ä½“å®Œæ•´æ€§çº¦æŸè§„åˆ™:</p>
<p>â‘ æ¯ä¸ªå…³ç³»è¡¨ä¸­çš„ä¸»é”®å±æ€§åˆ—éƒ½<strong>ä¸å…è®¸ä¸ºç©ºå€¼</strong>(NULL)ï¼Œå¦åˆ™å°±ä¸å¯èƒ½æ ‡è¯†å®ä½“ã€‚</p>
<p>â‘¡ç°å®ä¸–ç•Œä¸­çš„å®ä½“æ˜¯é ä¸»é”®æ¥æ ‡è¯†ï¼Œ<strong>ä¸»é”®å–å€¼åº”è¯¥å”¯ä¸€</strong>ï¼Œå¹¶åŒºåˆ†å…³ç³»è¡¨ä¸­çš„æ¯ä¸ªå…ƒç»„ã€‚</p>
<ul>
<li>å‚ç…§å®Œæ•´æ€§çº¦æŸ</li>
</ul>
<p>å‚ç…§å®Œæ•´æ€§æ˜¯æŒ‡å…³ç³»è¡¨ä¹‹é—´éœ€è¦éµå®ˆçš„æ•°æ®çº¦æŸï¼Œä»¥ä¿è¯å…³ç³»ä¹‹é—´å…³è”åˆ—çš„æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<p><strong>å‚ç…§å®Œæ•´æ€§</strong>çº¦æŸè§„åˆ™:è‹¥å…³ç³»Rä¸­çš„å¤–é”®Fä¸å…³ç³»Sä¸­çš„ä¸»é”®Kç›¸å…³è”ï¼Œåˆ™Rä¸­å¤–é”®Få€¼å¿…é¡»ä¸Sä¸­ä¸»é”®Kå€¼ä¸€è‡´ã€‚</p>
<p>å¤–é”®(Foreign key)â€”â€”åœ¨å…³è”çš„ä¸¤ä¸ªå…³ç³»ä¸­ï¼Œå®ƒä»¬å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç›¸åŒå±æ€§ã€‚è‹¥å…³è”åˆ—åœ¨ç¬¬ä¸€ä¸ªå…³ç³»ä¸­ä½œä¸ºä¸»é”®ï¼Œåˆ™åœ¨ç¬¬äºŒä¸ªå…³ç³»ä¸­ä½œä¸ºå¤–é”®ã€‚</p>
<ul>
<li>ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§çº¦æŸ</li>
</ul>
<p><strong>ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§</strong>æ˜¯æŒ‡ç”¨æˆ·æ ¹æ®å…·ä½“ä¸šåŠ¡å¯¹æ•°æ®å¤„ç†è§„åˆ™è¦æ±‚æ‰€å®šä¹‰çš„æ•°æ®çº¦æŸã€‚</p>
<p>ç”¨æˆ·å¯ä»¥å®šä¹‰å¦‚ä¸‹ç±»å‹çš„å®Œæ•´æ€§çº¦æŸ:</p>
<blockquote>
<p>å®šä¹‰åˆ—çš„æ•°æ®ç±»å‹ä¸å–å€¼èŒƒå›´</p>
<p>å®šä¹‰åˆ—çš„ç¼ºçœå€¼</p>
<p>å®šä¹‰åˆ—æ˜¯å¦å…è®¸å–ç©ºå€¼</p>
<p>å®šä¹‰åˆ—å–å€¼å”¯ä¸€æ€§</p>
<p>å®šä¹‰åˆ—ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§</p>
</blockquote>
<p>ä»å…³ç³»çš„æ•°å­¦å®šä¹‰æ¥çœ‹ï¼Œå…³ç³»æ˜¯å„ä¸ªåŸŸçš„ç¬›å¡å°”é›†åˆã€‚(Ã—)</p>
<p>åº”è¯¥æ˜¯å­é›†</p>
<ol>
<li><p>å…³ç³»æ¨¡å‹ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šæ•°æ®ç»“æ„ï¼Œæ“ä½œé›†åˆå’Œå®Œæ•´æ€§çº¦æŸã€‚</p>
<p>(1)å…³ç³»æ•°æ®ç»“æ„:åœ¨å…³ç³»æ¨¡å‹ä¸­,ç°å®ä¸–ç•Œçš„å®ä½“ä»¥åŠå®ä½“é—´çš„å„ç§è”ç³»å‡ç”¨å•ä¸€çš„ç»“æ„ç±»å‹å³å…³ç³»æ¥è¡¨ç¤ºã€‚</p>
<p>(2)å…³ç³»æ“ä½œé›†åˆ:å…³ç³»æ¨¡å‹ä¸­å¸¸ç”¨çš„å…³ç³»æ“ä½œåŒ…æ‹¬æŸ¥è¯¢æ“ä½œå’Œæ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹æ“ä½œã€‚</p>
<p>(3)å…³ç³»å®Œæ•´æ€§çº¦æŸ:å…³ç³»æ¨¡å‹ä¸­æœ‰å®ä½“å®Œæ•´æ€§çº¦æŸã€å‚ç…§å®Œæ•´æ€§çº¦æŸå’Œç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§çº¦æŸä¸‰ç±»çº¦æŸã€‚</p>
</li>
<li><p>åœ¨å…³ç³»æ¨¡å‹ä¸­ï¼Œå¯¹å…³ç³»æœ‰å‡ ç§åŸºæœ¬çš„æ•°æ®æ“ä½œæ–¹å¼ï¼ŒåŒ…æ‹¬é€‰æ‹©ï¼ŒæŠ•å½±ï¼Œè¿æ¥ï¼Œé™¤æ³•ç­‰ã€‚è¿™äº›æ“ä½œå¯ä»¥ç”¨æ¥æŸ¥è¯¢ã€æ›´æ–°å’Œæ§åˆ¶å…³ç³»æ•°æ®ã€‚</p>
</li>
<li><p>å…³ç³»æ•°æ®æŸ¥è¯¢ä¸­çš„é€‰æ‹©è¿ç®—æ˜¯ä»å…³ç³»ä¸­é€‰æ‹©æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å…ƒç»„ã€‚æŠ•å½±è¿ç®—æ˜¯ä»å…³ç³»ä¸­é€‰æ‹©ç‰¹å®šå±æ€§åˆ—ã€‚è¿æ¥è¿ç®—æ˜¯æ ¹æ®ä¸¤ä¸ªå…³ç³»ä¸­å…±åŒå±æ€§çš„å€¼ç›¸ç­‰æ¥ç»„åˆä¸¤ä¸ªå…³ç³»ä¸­çš„å…ƒç»„ã€‚</p>
</li>
<li><p>Î¸è¿æ¥(å†…è¿æ¥)æ˜¯æŒ‡åœ¨ä¸¤ä¸ªå…³ç³»ä¸Šæ‰§è¡Œä¸€ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦Î¸çš„è¿æ¥æ“ä½œã€‚Î¸ä¸ºâ€œ&#x3D;â€çš„è¿æ¥è¿ç®—ç§°ä¸ºç­‰å€¼è¿æ¥ï¼Œè‡ªç„¶è¿æ¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç­‰å€¼è¿æ¥ï¼ˆä¸¤ä¸ªå…³ç³»ä¸­è¿›è¡Œæ¯”è¾ƒçš„åˆ†é‡å¿…é¡»æ˜¯ç›¸åŒçš„å±æ€§ç»„ï¼‰ï¼Œå®ƒåœ¨è¿æ¥åè‡ªåŠ¨åˆ é™¤é‡å¤çš„åˆ—ã€‚</p>
</li>
<li><p>å·¦å¤–è¿æ¥è¿”å›å·¦è¡¨ä¸­æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­åŒ¹é…è®°å½•ï¼›å¦‚æœå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…è®°å½•ï¼Œåˆ™ç»“æœä¸ºNULLã€‚å³å¤–è¿æ¥è¿”å›å³è¡¨ä¸­æ‰€æœ‰è®°å½•å’Œå·¦è¡¨ä¸­åŒ¹é…è®°å½•ï¼›å¦‚æœå·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…è®°å½•ï¼Œåˆ™ç»“æœä¸ºNULLã€‚å…¨å¤–è¿æ¥è¿”å›å·¦è¡¨å’Œå³è¡¨ä¸­æ‰€æœ‰è®°å½•ï¼›å¦‚æœå…¶ä¸­ä¸€ä¸ªè¡¨æ²¡æœ‰åŒ¹é…è®°å½•ï¼Œåˆ™ç»“æœä¸ºNULLã€‚</p>
</li>
</ol>
<h2 id="ç¬¬ä¸‰ç« æ•°æ®åº“æ“ä½œSQLè¯­è¨€"><a href="#ç¬¬ä¸‰ç« æ•°æ®åº“æ“ä½œSQLè¯­è¨€" class="headerlink" title="ç¬¬ä¸‰ç« 	æ•°æ®åº“æ“ä½œSQLè¯­è¨€"></a>ç¬¬ä¸‰ç« 	æ•°æ®åº“æ“ä½œSQLè¯­è¨€</h2><ul>
<li><p>SQLè¯­è¨€æ˜¯ä¸€ç§æ ‡å‡†çš„æ•°æ®åº“æ“ä½œè¯­è¨€ï¼Œå¯ä»¥æ”¯æŒæ‰€æœ‰æ•°æ®åº“è®¿é—®æ“ä½œï¼ˆé”™ï¼‰</p>
<p>  ä¸»æµçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå‡æ”¯æŒSQLæ ‡å‡†è¯­è¨€å®ç°æ•°æ®åº“æ“ä½œ</p>
</li>
<li><p>ä¸‹é¢å“ªç§æ•°æ®ç±»å‹ä¸æ˜¯PostgreSQLæ”¯æŒçš„æ•°æ®ç±»å‹?<br>A.json	B.line	C. macaddr	<strong>D. String</strong><br>  PostgreSQLæ”¯æŒ<code>json</code>ï¼Œ<code>line</code>å’Œ<code>macaddr</code>æ•°æ®ç±»å‹ã€‚ä½†æ˜¯ï¼Œå®ƒä¸æ”¯æŒåä¸º<code>String</code>çš„æ•°æ®ç±»å‹ã€‚åœ¨PostgreSQLä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>text</code>æˆ–<code>varchar</code>æ•°æ®ç±»å‹æ¥å­˜å‚¨å­—ä¸²ã€‚</p>
</li>
</ul>
<h3 id="æ•°æ®å®šä¹‰è¯­å¥ï¼ˆDDLï¼‰"><a href="#æ•°æ®å®šä¹‰è¯­å¥ï¼ˆDDLï¼‰" class="headerlink" title="æ•°æ®å®šä¹‰è¯­å¥ï¼ˆDDLï¼‰"></a>æ•°æ®å®šä¹‰è¯­å¥ï¼ˆDDLï¼‰</h3><p>åˆ›å»ºæ•°æ®åº“ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> databse CourseDB;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> CourseDB <span class="keyword">rename</span> <span class="keyword">to</span> courseDB;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> courseDB;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰åŸºæœ¬è¡¨ CREATE  TABLE</p>
<p>CREATE  TABLE è¡¨å();</p>
<table>
<thead>
<tr>
<th>æ•°æ®ç±»å‹</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>CHAR(n)</td>
<td>é•¿åº¦ä¸º n çš„å­—ç¬¦å‹</td>
</tr>
<tr>
<td>VARCHAR(n)</td>
<td>æœ€å¤§é•¿åº¦ä¸º n çš„å˜é•¿å­—ç¬¦å‹</td>
</tr>
<tr>
<td>NUMBER(n)</td>
<td>é•¿åº¦ä¸º n çš„æ•°å­—å‹</td>
</tr>
<tr>
<td>lNT</td>
<td>é•¿æ•´å‹(4B)</td>
</tr>
<tr>
<td>SMALLlNT</td>
<td>çŸ­æ•´å‹(2B)</td>
</tr>
<tr>
<td>BlGlNT</td>
<td>å¤§æ•´å‹(8B)</td>
</tr>
<tr>
<td>FLOAT(n)</td>
<td>ç²¾åº¦è‡³å°‘ä¸º n ä½æ•°å­—çš„æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td>DATE</td>
<td>æ—¥æœŸï¼Œ æ ¼å¼ä¸º YYYY-MM-DD</td>
</tr>
<tr>
<td>TlME</td>
<td>æ—¶é—´ï¼Œ æ ¼å¼ä¸º HH:MM:SS</td>
</tr>
</tbody></table>
<p><strong>åˆ—çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶</strong></p>
<blockquote>
<p>PRlMARY KEY	&#x2F;&#x2F;ä¸»ç :å½“åªæœ‰ä¸€ä¸ªä¸»ç æ—¶ï¼Œå¯ç›´æ¥åœ¨å¯¹åº”çš„å±æ€§åˆ—æ ‡æ³¨<br>NOT NULL	&#x2F;&#x2F;éç©º:è¡¨ç¤ºè¯¥å±æ€§åˆ—ä¸èƒ½å–ç©ºå€¼<br>UNlQUE	&#x2F;&#x2F;å”¯ä¸€å€¼: è¡¨ç¤ºè¯¥å±æ€§åˆ—åªèƒ½å–å”¯ä¸€å€¼<br>CHECK(æ¡ä»¶) 	   &#x2F;&#x2F;æ£€æŸ¥:  æ£€æŸ¥è¯¥åˆ—æ˜¯å¦æ»¡è¶³æŸä¸ªæ¡ä»¶ï¼Œå¦‚ CHECK(æŸå±æ€§&gt;20)</p>
</blockquote>
<p>åˆ—å®Œæ•´çº¦æŸ</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  Course</span><br><span class="line">( CourseID  	<span class="type">char</span>(<span class="number">4</span>)      <span class="keyword">PRIMARY  Key</span>,</span><br><span class="line">  CourseName  	<span class="type">varchar</span>(<span class="number">20</span>)  <span class="keyword">NOT</span>  <span class="keyword">NULL</span>  <span class="keyword">UNIQUE</span>,</span><br><span class="line">  CourseType  	<span class="type">varchar</span>(<span class="number">10</span>)  <span class="keyword">NULL</span> <span class="keyword">CHECK</span>(CourseType <span class="keyword">IN</span>(<span class="string">&#x27;åŸºç¡€è¯¾&#x27;</span>,<span class="string">&#x27;ä¸“ä¸šè¯¾&#x27;</span>,<span class="string">&#x27;é€‰ä¿®è¯¾&#x27;</span>)),</span><br><span class="line">  TestMethod  	<span class="type">char</span>(<span class="number">4</span>)      <span class="keyword">NOT</span>  <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span>  <span class="string">&#x27;é—­å·è€ƒè¯•&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>å¤åˆä¸»é”®</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  Plan</span><br><span class="line">( CourseID  	<span class="type">char</span>(<span class="number">4</span>)  	<span class="keyword">NOT</span>  <span class="keyword">NULL</span>,</span><br><span class="line">  TeacherID  	<span class="type">char</span>(<span class="number">4</span>)  	<span class="keyword">NOT</span>  <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span>	CoursePlan_PK	<span class="keyword">PRIMARY Key</span>(CourseID,TeacherID)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è¡¨çº¦æŸå®šä¹‰ä¸»é”®çš„ä¼˜ç‚¹:ä¾¿äºå®šä¹‰å¤åˆä¸»é”®ï¼Œå¯å‘½åä¸»é”®çº¦æŸï¼Œä¾¿äºå®šä¹‰ä»£ç†é”®ã€‚</p>
<p>ä»£ç†é”®</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  Plan</span><br><span class="line">( CoursePlanID	<span class="type">serial</span>		<span class="keyword">NOT</span>  <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span>	CoursePlan_PK	<span class="keyword">PRIMARY Key</span>(CoursePlanID)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>å¤–é”®,çº§è”åˆ é™¤</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  Register</span><br><span class="line">( CourseRegID  	<span class="type">serial</span>	<span class="keyword">NOT</span>  <span class="keyword">NULL</span>,</span><br><span class="line">  CoursePlanID  	<span class="type">Int</span>  		<span class="keyword">NOT</span>  <span class="keyword">NULL</span>,</span><br><span class="line">  StudentID  	<span class="type">char</span>(<span class="number">13</span>),</span><br><span class="line">  Note  		<span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span>	CourseRegID_PK	<span class="keyword">PRIMARY Key</span>(CourseRegID),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span>	CoursePlanID_FK	<span class="keyword">FOREIGN Key</span>(CoursePlanID)</span><br><span class="line">	<span class="keyword">REFERENCES</span>  Plan(CoursePlanID)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>è¡¨ä¿®æ”¹</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &lt;<span class="type">name</span>&gt; <span class="keyword">add</span> &lt;columnName&gt; &lt;<span class="keyword">type</span>&gt; &lt;<span class="keyword">constraint</span>&gt;;</span><br></pre></td></tr></table></figure>

<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>&lt;è¡¨å&gt; <span class="keyword">DROP</span>  <span class="keyword">COLUMN</span> &lt;åˆ—å&gt;;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>&lt;è¡¨å&gt; <span class="keyword">DROP</span>  <span class="keyword">CONSTRAINT</span> &lt;åˆ—å&gt;;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;è¡¨å&gt; <span class="keyword">RENAME</span> <span class="keyword">TO</span> &lt;æ–°è¡¨å&gt;;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;è¡¨å&gt; <span class="keyword">RENAME</span> &lt;åŸåˆ—å&gt; <span class="keyword">TO</span> &lt;æ–°åˆ—å&gt;;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;è¡¨å&gt; <span class="keyword">ALTER</span>  <span class="keyword">COLUMN</span> &lt;åˆ—å&gt; <span class="keyword">TYPE</span>&lt;æ–°çš„æ•°æ®ç±»å‹&gt;;</span><br></pre></td></tr></table></figure>

<p>ç´¢å¼•ä½œç”¨:æ”¯æŒå¯¹æ•°æ®åº“è¡¨ä¸­æ•°æ®å¿«é€ŸæŸ¥æ‰¾ï¼Œå…¶åŸç†ç±»ä¼¼å›¾ä¹¦ç›®å½•ï¼Œå¯ä»¥å¿«é€Ÿå®šä½ç« èŠ‚å†…å®¹ã€‚</p>
<p>ç´¢å¼•ä¼˜ç‚¹:</p>
<blockquote>
<p>å¯å¿«é€Ÿè¿æ¥å…³è”è¡¨<br>å‡å°‘åˆ†ç»„å’Œæ’åºæ—¶é—´<br>æé«˜å…³ç³»è¡¨æ•°æ®æ£€ç´¢é€Ÿåº¦</p>
</blockquote>
<p>ç´¢å¼•å±€é™:</p>
<blockquote>
<p>ç´¢å¼•ä¼šå ç”¨é¢å¤–å­˜å‚¨ç©ºé—´<br>åˆ›å»ºå’Œç»´æŠ¤ç´¢å¼•éƒ½éœ€è¦è¾ƒå¤§æ—¶é—´å¼€é”€											<br>æ•°æ®æ“çºµå› ç»´æŠ¤ç´¢å¼•å¸¦æ¥ç³»ç»Ÿæ€§èƒ½å¼€é”€</p>
</blockquote>
<p>åˆ›å»ºç´¢å¼•<br>ä¾‹:åœ¨å­¦ç”Ÿä¿¡æ¯è¡¨Studentä¸­ï¼Œä¸ºå‡ºç”Ÿæ—¥æœŸBirthdayåˆ—åˆ›å»ºç´¢å¼•ï¼Œä»¥ä¾¿æ”¯æŒæŒ‰å‡ºç”Ÿæ—¥æœŸå¿«	é€ŸæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> Birthday_Idx <span class="keyword">ON</span> STUDENT (Birthday) ;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ç´¢å¼•<br>ä¾‹åœ¨å­¦ç”Ÿä¿¡æ¯è¡¨Studentä¸­ï¼Œå°†åŸç´¢å¼•Birthday_ldxæ›´åä¸ºBday_ldxï¼Œå…¶ç´¢å¼•ä¿®æ”¹SQL	è¯­å¥å¦‚ä¸‹</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">INDEX</span> Birthday_Idx <span class="keyword">RENAME</span> T0 Bday_ldx ;</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤ç´¢å¼•</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span>  <span class="keyword">INDEX</span> bday_idx;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®æ“çºµè¯­å¥ï¼ˆDMLï¼‰"><a href="#æ•°æ®æ“çºµè¯­å¥ï¼ˆDMLï¼‰" class="headerlink" title="æ•°æ®æ“çºµè¯­å¥ï¼ˆDMLï¼‰"></a>æ•°æ®æ“çºµè¯­å¥ï¼ˆDMLï¼‰</h3><p>æ’å…¥</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Student <span class="keyword">VALUES</span>(<span class="string">&#x27;2017220101105&#x27;</span>,<span class="string">&#x27;èµµä¸œ&#x27;</span>,<span class="string">&#x27;å¥³&#x27;</span>,<span class="string">&#x27;1999-04-23&#x27;</span>,<span class="string">&#x27;è½¯ä»¶å·¥ç¨‹&#x27;</span>, <span class="string">&#x27;liuyin@163.com&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  Student</span><br><span class="line"><span class="keyword">SET</span>  Email=<span class="string">&#x27;zhaodong@163.com&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span>   StudentName=<span class="string">&#x27;èµµä¸œ&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> </span><br><span class="line"><span class="keyword">FROM</span>  STUDENT</span><br><span class="line"><span class="keyword">WHERE</span>   StudentName=<span class="string">&#x27;èµµä¸œ&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>æ¸…ç©º</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> STUDENT;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®æŸ¥è¯¢è¯­å¥ï¼ˆDQLï¼‰"><a href="#æ•°æ®æŸ¥è¯¢è¯­å¥ï¼ˆDQLï¼‰" class="headerlink" title="æ•°æ®æŸ¥è¯¢è¯­å¥ï¼ˆDQLï¼‰"></a>æ•°æ®æŸ¥è¯¢è¯­å¥ï¼ˆDQLï¼‰</h3><p>å…ˆåˆ†ç»„å†æ’åºï¼ï¼ï¼</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  [<span class="keyword">ALL</span>|<span class="keyword">DISTINCT</span>]  &lt;ç›®æ ‡åˆ—&gt;[ï¼Œ&lt;ç›®æ ‡åˆ—&gt;â€¦]</span><br><span class="line">[ <span class="keyword">INTO</span> &lt;æ–°è¡¨&gt; ]</span><br><span class="line"><span class="keyword">FROM</span>  &lt;è¡¨å|è§†å›¾å&gt;[ï¼Œ&lt;è¡¨å|è§†å›¾å&gt;â€¦]</span><br><span class="line">[ <span class="keyword">WHERE</span>  &lt;æ¡ä»¶è¡¨è¾¾å¼&gt; ]</span><br><span class="line">[ <span class="keyword">GROUP</span> <span class="keyword">BY</span>  &lt;åˆ—å&gt; [<span class="keyword">HAVING</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt; ]]</span><br><span class="line">[ <span class="keyword">ORDER</span> <span class="keyword">BY</span>  &lt;åˆ—å&gt; [ <span class="keyword">ASC</span> | <span class="keyword">DESC</span> ] ];</span><br></pre></td></tr></table></figure>

<p>1ï¼‰ä½¿ç”¨BETWEEN..ANDå…³é”®è¯æ¥é™å®šåˆ—å€¼èŒƒå›´ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å…³é”®è¯LIKEä¸é€šé…ç¬¦æ¥é™å®šæŸ¥è¯¢æ¡ä»¶ã€‚<br>2)ä½¿ç”¨é€šé…ç¬¦æ¥é™å®šå­—ç¬¦ä¸²æ•°æ®èŒƒå›´ã€‚ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰é€šé…ç¬¦ç”¨äºä»£è¡¨ä¸€ä¸ªæœªæŒ‡å®šçš„å­—ç¬¦ã€‚ç™¾åˆ†å·(%ï¼‰é€šé…ç¬¦ç”¨äºä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªæœªæŒ‡å®šçš„å­—ç¬¦ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> STUDENT</span><br><span class="line"><span class="keyword">WHERE</span> BirthDay <span class="keyword">BETWEEN</span> <span class="string">&#x27;2000-01-01&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;2000-12-30&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> STUDENT <span class="keyword">WHERE</span> Email <span class="keyword">LIKE</span> <span class="string">&#x27;%@163.com &#x27;</span> ;</span><br></pre></td></tr></table></figure>

<p><a href="https://smms.app/image/oiIjqcgDLa6Vud7" target="_blank"><img src="https://s2.loli.net/2023/06/03/oiIjqcgDLa6Vud7.png" ></a></p>
<p><a href="https://smms.app/image/GOKjh5RsYXb16uA" target="_blank"><img src="https://s2.loli.net/2023/06/03/GOKjh5RsYXb16uA.png" ></a></p>
<p>ä¾‹1:è‹¥è¦ç»Ÿè®¡Studentè¡¨ä¸­çš„å­¦ç”Ÿäººæ•°ï¼Œåœ¨SELECTè¯­å¥ä¸­å¯ä»¥ä½¿ç”¨COUNT )å‡½æ•°æ¥è®¡ç®—ï¼Œå…¶æŸ¥è¯¢SQLè¯­å¥å¦‚ä¸‹:</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> COUNT(*) <span class="keyword">AS</span> å­¦ç”Ÿäººæ•° <span class="keyword">FROM</span> Student;</span><br></pre></td></tr></table></figure>

<p>ä¾‹2:æ‰¾å‡ºSTUDENTè¡¨ä¸­å¹´é¾„æœ€å¤§å’Œå¹´é¾„æœ€å°çš„å­¦ç”Ÿå‡ºç”Ÿæ—¥æœŸï¼Œå…¶æŸ¥è¯¢SQLè¯­å¥å¦‚ä¸‹:</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Min (Birthday) <span class="keyword">AS</span> æœ€å¤§å¹´é¾„,Max (Birthday) <span class="keyword">AS</span> æœ€å°å¹´é¾„ <span class="keyword">FROM</span> Student;</span><br></pre></td></tr></table></figure>

<p>åˆ†ç»„ï¼š</p>
<p>having æ˜¯å¯¹äº group by çš„åˆ—çš„æ¡ä»¶çº¦æŸ,é™¤äº†groupå¤–,åˆ—åç§°ä¸èƒ½å’Œèšåˆå‡½æ•°ä¸€èµ·ç”¨</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Major  <span class="keyword">AS</span> ä¸“ä¸š,  COUNTï¼ˆStudentIDï¼‰ <span class="keyword">AS</span> å­¦ç”Ÿäººæ•°</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">WHERE</span>  StudentGender=â€™ç”·â€™</span><br><span class="line"><span class="keyword">GROUP</span>  <span class="keyword">BY</span>  Major</span><br><span class="line"><span class="keyword">HAVING</span>  COUNT(*)&gt;<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>å­æŸ¥è¯¢ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  TeacherID,  TeacherName,  TeacherTitle</span><br><span class="line"><span class="keyword">FROM</span>  Teacher</span><br><span class="line"><span class="keyword">WHERE</span>  CollegeID  <span class="keyword">IN</span></span><br><span class="line">        (<span class="keyword">SELECT</span>  CollegeID  </span><br><span class="line">     <span class="keyword">FROM</span>  College</span><br><span class="line">     <span class="keyword">WHERE</span>  CollegeName=â€™è®¡ç®—æœºå­¦é™¢â€™);</span><br></pre></td></tr></table></figure>

<p>å¤šè¡¨å…³è”æŸ¥è¯¢ï¼š</p>
<p>åœ¨é€‰è¯¾ç®¡ç†ç³»ç»Ÿæ•°æ®åº“ä¸­ï¼Œå¸Œæœ›è·å¾—å„ä¸ªå­¦é™¢çš„æ•™å¸ˆä¿¡æ¯åˆ—è¡¨ï¼ŒåŒ…æ‹¬å­¦é™¢åç§°ã€æ•™å¸ˆç¼–å·ã€æ•™å¸ˆå§“åã€æ•™å¸ˆæ€§åˆ«ã€èŒç§°ç­‰ä¿¡æ¯ã€‚è¦æ±‚æŒ‰å­¦é™¢åç§°ã€æ•™å¸ˆç¼–å·åˆ†åˆ«æ’åºè¾“å‡ºï¼Œå…¶æŸ¥è¯¢SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  B.CollegeName <span class="keyword">AS</span> å­¦é™¢åç§°,  A.TeacherID  <span class="keyword">AS</span> ç¼–å·, A.TeacherName  <span class="keyword">AS</span> å§“å,  A.TeacherGender  <span class="keyword">AS</span> æ€§åˆ«,  A. TeacherTitle  <span class="keyword">AS</span> èŒç§°</span><br><span class="line"><span class="keyword">FROM</span>  Teacher  <span class="keyword">AS</span>  Aï¼ŒCollege  <span class="keyword">AS</span>  B</span><br><span class="line"><span class="keyword">WHERE</span>  A.CollegeID=B.CollegeID </span><br><span class="line"><span class="keyword">ORDER</span>  <span class="keyword">BY</span>  B.CollegeName, A.TeacherID;</span><br></pre></td></tr></table></figure>

<p>åœ¨é€‰è¯¾ç®¡ç†æ•°æ®åº“ä¸­ï¼Œå¸Œæœ›æŸ¥è¯¢æ‰€æœ‰å¼€è®¾è¯¾ç¨‹çš„å­¦ç”Ÿé€‰è¯¾æƒ…å†µï¼ŒåŒ…æ‹¬è¯¾ç¨‹åç§°ã€ä»»è¯¾æ•™å¸ˆã€é€‰è¯¾å­¦ç”Ÿäººæ•°ã€‚è¿™éœ€è¦å…³è”è¯¾ç¨‹ä¿¡æ¯è¡¨COURSEã€æ•™å¸ˆä¿¡æ¯è¡¨TEACHERã€å¼€è¯¾è®¡åˆ’è¡¨PLANã€é€‰è¯¾æ³¨å†Œä¿¡æ¯è¡¨REGISTERã€‚å…¶è¿æ¥æŸ¥è¯¢çš„SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> C.CourseName <span class="keyword">AS</span> è¯¾ç¨‹åç§°, T.TeacherName <span class="keyword">AS</span> æ•™å¸ˆ, </span><br><span class="line">  COUNT (R.CoursePlanID)  <span class="keyword">AS</span> é€‰è¯¾äººæ•°</span><br><span class="line"><span class="keyword">FROM</span>  COURSE  <span class="keyword">AS</span>  C  <span class="keyword">JOIN</span>  PLAN  <span class="keyword">AS</span>  P  <span class="keyword">ON</span>  C.CourseID=P.CourseID </span><br><span class="line">  <span class="keyword">JOIN</span>  TEACHER  <span class="keyword">AS</span>  T  <span class="keyword">ON</span>  P.TeacherID=T.TeacherID</span><br><span class="line">  <span class="keyword">JOIN</span>  REGISTER  <span class="keyword">AS</span>  R  <span class="keyword">ON</span>  P.CoursePlanID=R.CoursePlanID</span><br><span class="line"><span class="keyword">GROUP</span>  <span class="keyword">BY</span> C.CourseName, T.TeacherName;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„å†…è¿æ¥æŸ¥è¯¢ä¸­ï¼Œåªèƒ½æ‰¾å‡ºæœ‰å­¦ç”Ÿæ³¨å†Œçš„è¯¾ç¨‹åç§°å’Œé€‰è¯¾äººæ•°ï¼Œä½†ä¸èƒ½æ‰¾å‡ºæ²¡æœ‰å­¦ç”Ÿæ³¨å†Œçš„è¯¾ç¨‹åç§°ã€‚<br>åœ¨SQLåº”ç”¨ä¸­ï¼Œæœ‰æ—¶å€™ä¹Ÿå¸Œæœ›è¾“å‡ºé‚£äº›ä¸æ»¡è¶³è¿æ¥æ¡ä»¶çš„å…ƒç»„æ•°æ®ã€‚è¿™æ—¶ï¼Œå¯ä½¿ç”¨JOINâ€“ONå¤–è¿æ¥æ–¹å¼å®ç°ã€‚å…¶å®ç°æ–¹å¼æœ‰ä¸‰ç§å½¢å¼ï¼Œå…·ä½“å¦‚ä¸‹:</p>
<blockquote>
<p><strong>LEFT JOIN</strong>:å·¦å¤–è¿æ¥ï¼Œå³ä½¿æ²¡æœ‰ä¸å³è¡¨å…³è”åˆ—å€¼åŒ¹é…ï¼Œä¹Ÿä»å·¦è¡¨è¿”å›æ‰€<br>æœ‰çš„è¡Œã€‚<br><strong>RIGHT JOIN</strong>:å³å¤–è¿æ¥ï¼Œå³ä½¿æ²¡æœ‰ä¸å·¦è¡¨å…³è”åˆ—å€¼åŒ¹é…ï¼Œä¹Ÿä»å³è¡¨è¿”å›<br>æ‰€æœ‰çš„è¡Œã€‚<br><strong>FULL JOIN</strong>:å…¨å¤–è¿æ¥ï¼ŒåŒæ—¶è¿›è¡Œå·¦è¿æ¥å’Œå³è¿æ¥ï¼Œå°±è¿”å›æ‰€æœ‰è¡Œã€‚</a></p>
</blockquote>
<p>å¯¹Aè¡¨å’ŒBè¡¨è¿›è¡Œå…³è”æŸ¥è¯¢ï¼Œå“ªç§è¿æ¥å¯ä»¥ä½¿Bè¡¨ä¸­ä¸åŒ¹é…çš„å…ƒç»„æ•°æ®å¯ä»¥å‡ºç°åœ¨ç»“æœé›†ä¸­?<br>A. left join	<strong>B. right join</strong>	C. full join	D. inner join</p>
<p>åœ¨é€‰è¯¾ç®¡ç†ç³»ç»Ÿæ•°æ®åº“ä¸­ï¼Œå¸Œæœ›èƒ½æŸ¥è¯¢æ‰€æœ‰å¼€è®¾è¯¾ç¨‹çš„å­¦ç”Ÿé€‰è¯¾æƒ…å†µï¼ŒåŒ…æ‹¬è¯¾ç¨‹åç§°ã€ä»»è¯¾æ•™å¸ˆã€é€‰è¯¾å­¦ç”Ÿäººæ•°ã€‚è¿™éœ€è¦å…³è”è¯¾ç¨‹ä¿¡æ¯è¡¨COURSEã€å¼€è¯¾è®¡åˆ’è¡¨CPLANã€æ•™å¸ˆä¿¡æ¯è¡¨TEACHERã€é€‰è¯¾æ³¨å†Œä¿¡æ¯è¡¨REGISTERã€‚è‹¥ä½¿ç”¨å·¦å¤–è¿æ¥æŸ¥è¯¢ï¼Œè¯¥JOINâ€“ONè¿æ¥æŸ¥è¯¢çš„SQLè¯­å¥å¦‚ä¸‹:</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> C.CourseName <span class="keyword">AS</span> è¯¾ç¨‹åç§°, T.TeacherName <span class="keyword">AS</span> æ•™å¸ˆ, </span><br><span class="line">COUNT  (R.CoursePlanID)  <span class="keyword">AS</span> é€‰è¯¾äººæ•°</span><br><span class="line"><span class="keyword">FROM</span>  COURSE  <span class="keyword">AS</span>  C  <span class="keyword">JOIN</span>  PLAN  <span class="keyword">AS</span>  P  </span><br><span class="line"><span class="keyword">ON</span>  C.CourseID=P.CourseID </span><br><span class="line"><span class="keyword">JOIN</span>  TEACHER  <span class="keyword">AS</span>  T  <span class="keyword">ON</span>  P.TeacherID=T.TeacherID</span><br><span class="line"><span class="keyword">LEFT  JOIN</span>  REGISTER  <span class="keyword">AS</span>  R  <span class="keyword">ON</span>  P.CoursePlanID=R.CoursePlanID</span><br><span class="line"><span class="keyword">GROUP</span>  <span class="keyword">BY</span> C.CourseName, T.TeacherName;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®æ§åˆ¶è¯­å¥ï¼ˆDCLï¼‰"><a href="#æ•°æ®æ§åˆ¶è¯­å¥ï¼ˆDCLï¼‰" class="headerlink" title="æ•°æ®æ§åˆ¶è¯­å¥ï¼ˆDCLï¼‰"></a>æ•°æ®æ§åˆ¶è¯­å¥ï¼ˆDCLï¼‰</h3><p>æˆäºˆï¼Œæ”¶å›ï¼Œæ‹’ç»æƒé™</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span>  <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span>, <span class="keyword">UPDATE</span>, <span class="keyword">DELETE</span>  <span class="keyword">ON</span>  REGISTER  <span class="keyword">TO</span>  RoleS;</span><br><span class="line"><span class="keyword">REVOKE</span>  <span class="keyword">DELETE</span>  <span class="keyword">ON</span>  REGISTER  <span class="keyword">FROM</span>  RoleS;</span><br><span class="line">DENY  <span class="keyword">DELETE</span>  <span class="keyword">ON</span>  TEACHER  <span class="keyword">TO</span>  RoleT;</span><br></pre></td></tr></table></figure>

<p>è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è¡¨ï¼Œå®ƒæ˜¯ä»ä¸€ä¸ªæˆ–å‡ ä¸ªåŸºæœ¬è¡¨ï¼ˆæˆ–è§†å›¾ï¼‰å¯¼å‡ºçš„è¡¨ã€‚å®ƒåŒ…å«è¡Œå’Œåˆ—ï¼Œå°±åƒä¸€ä¸ªçœŸå®çš„è¡¨ä¸€æ ·ã€‚è§†å›¾æœ¬èº«å¹¶ä¸åŒ…å«ä»»ä½•æ•°æ®ï¼Œå®ƒåªåŒ…å«æ˜ å°„åˆ°åŸºè¡¨çš„ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ã€‚å½“åŸºè¡¨æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾æ•°æ®ä¹Ÿéšä¹‹å˜åŒ–ã€‚æˆ‘ä»¬å¯ä»¥å‘è§†å›¾æ·»åŠ  SQL å‡½æ•°ã€WHERE ä»¥åŠ JOIN è¯­å¥ï¼Œä¹Ÿå¯ä»¥æäº¤æ•°æ®ï¼Œå°±åƒè¿™äº›æ¥è‡ªäºæŸä¸ªå•ä¸€çš„è¡¨ä¸€æ ·ã€‚æ•°æ®åº“çš„è®¾è®¡å’Œç»“æ„ä¸ä¼šå—åˆ°è§†å›¾ä¸­çš„å‡½æ•°ã€where æˆ– join è¯­å¥çš„å½±å“ã€‚</p>
<p>è§†å›¾çš„ä¼˜ç‚¹ï¼š</p>
<blockquote>
<ol>
<li>ä½¿ç”¨è§†å›¾ç®€åŒ–å¤æ‚SQLæŸ¥è¯¢æ“ä½œ</li>
<li>ä½¿ç”¨è§†å›¾æé«˜æ•°æ®è®¿é—®å®‰å…¨æ€§</li>
<li>æä¾›ä¸€å®šç¨‹åº¦çš„æ•°æ®é€»è¾‘ç‹¬ç«‹æ€§é€šè¿‡è§†å›¾ï¼Œå¯æä¾›ä¸€å®šç¨‹åº¦çš„æ•°æ®é€»è¾‘ç‹¬ç«‹æ€§ã€‚å½“æ•°æ®è¡¨ç»“æ„å‘ç”Ÿæ”¹å˜ï¼Œåªè¦è§†å›¾ç»“æ„ä¸å˜ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä¸ä½œä¿®æ”¹ã€‚</li>
<li>é›†ä¸­å±•ç¤ºç”¨æˆ·æ‰€æ„Ÿå…´è¶£çš„ç‰¹å®šæ•°æ®é€šè¿‡è§†å›¾ï¼Œå¯ä»¥å°†éƒ¨åˆ†ç”¨æˆ·ä¸å…³å¿ƒçš„æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼Œä»…ä»…æä¾›ä»–ä»¬æ‰€æ„Ÿå…´è¶£çš„æ•°æ®ã€‚</li>
</ol>
</blockquote>
<p>åˆ›å»ºè§†å›¾</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">VIEW</span>  BasicCourseView  <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span>  CourseName,  CourseCredit,  CoursePeriod,  TestMethod</span><br><span class="line"><span class="keyword">FROM</span>    COURSE</span><br><span class="line"><span class="keyword">WHERE</span>  CourseType=â€˜åŸºç¡€è¯¾â€™;</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢è§†å›¾ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> BasicTeacherInfoView <span class="keyword">ORDER</span> <span class="keyword">BY</span> æ‰€å±å­¦é™¢,æ•™å¸ˆå§“å;</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤è§†å›¾ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span>&lt;è§†å›¾å&gt;;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢å“ªé¡¹ä¸æ˜¯SQLè¯­è¨€çš„ç‰¹æ€§?<br>A.å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ<br>B.å®ç°æ§åˆ¶é€»è¾‘ç¼–ç¨‹<br>C.æ•°æ®åº“æ¸¸æ ‡æ“ä½œ<br>D.æ•°æ®åº“äº‹åŠ¡æ“ä½œ</p>
<p><code>å®ç°æ§åˆ¶é€»è¾‘ç¼–ç¨‹</code> ä¸æ˜¯ SQL è¯­è¨€çš„ç‰¹æ€§ã€‚SQL è¯­è¨€æ˜¯ä¸€ç§ç”¨äºç®¡ç†å…³ç³»æ•°æ®åº“çš„è¯­è¨€ï¼Œå®ƒå¯ä»¥ç”¨æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œã€æ•°æ®åº“æ¸¸æ ‡æ“ä½œå’Œæ•°æ®åº“äº‹åŠ¡æ“ä½œã€‚ä½†å®ƒä¸æ˜¯ä¸€ç§é€šç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸èƒ½ç”¨æ¥å®ç°æ§åˆ¶é€»è¾‘ç¼–ç¨‹ã€‚</p>
<p><strong>NUMERIC</strong>æ•°æ®ç±»å‹æ˜¯ä¸€ç§ç²¾ç¡®æ•°å­—æ•°æ®ç±»å‹ï¼Œå…¶ç²¾åº¦åœ¨ç®—æœ¯è¿ç®—åä¿ç•™åˆ°æœ€å°æœ‰æ•ˆä½ï¼Œnumericæ˜¯æ ‡å‡†sqlçš„æ•°æ®ç±»å‹ï¼Œæ ¼å¼æ˜¯numeric(mï¼Œnï¼‰ã€‚numeric(aï¼Œb)å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‰é¢ä¸€ä¸ªä¸ºæ€»çš„ä½æ•°ï¼Œåé¢ä¸€ä¸ªå‚æ•°æ˜¯å°æ•°ç‚¹åçš„ä½æ•°ï¼Œä¾‹å¦‚numericï¼ˆ5ï¼Œ2ï¼‰æ˜¯æ€»ä½æ•°ä¸º5ï¼Œå°æ•°ç‚¹åä¸º2ä½çš„æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå­—æ®µçš„æ•´æ•°ä½æœ€å¤§æ˜¯3ä½ã€‚</p>
<p>åœ¨æ•°æ®åº“ä¸­ï¼Œä½¿ç”¨æ›´å¤šç´¢å¼•å¯ä»¥åŠ å¿«æ•°æ®åº“å¤„ç†é€Ÿåº¦ã€‚ï¼ˆxï¼‰<br><em><strong>ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ä¸èƒ½åŠ å¿«å¤„ç†é€Ÿåº¦</strong></em></p>
<p><a href="https://smms.app/image/cGdF3HSLoqhszr2" target="_blank"><img src="https://s2.loli.net/2023/06/03/cGdF3HSLoqhszr2.png" alt="image.png"></a></p>
<p>é’ˆå¯¹è§†å›¾ <code>Create view stuView as select * from student;</code> å¯ä»¥è¿›è¡Œ <code>D.ä»¥ä¸Šå‡å¯</code> æ“ä½œè®¿é—®ã€‚è¿™ä¸ªè§†å›¾å®šä¹‰äº†ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œå®ƒä» <code>student</code> è¡¨ä¸­é€‰æ‹©æ‰€æœ‰åˆ—å’Œæ‰€æœ‰è¡Œã€‚å› æ­¤ï¼Œå¯ä»¥å¯¹è¿™ä¸ªè§†å›¾æ‰§è¡Œ <code>SELECT</code>ã€<code>INSERT INTO</code> å’Œ <code>DELETE</code> æ“ä½œã€‚<br>é’ˆå¯¹è§†å›¾ <code>Create view stuView as select stuname, major from student;</code> å¯ä»¥è¿›è¡Œ <code>A. Select</code>,<code>C. delete</code> æ“ä½œè®¿é—®ã€‚è¿™ä¸ªè§†å›¾å®šä¹‰äº†ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œå®ƒä» <code>student</code> è¡¨ä¸­é€‰æ‹© <code>stuname</code> å’Œ <code>major</code> åˆ—ã€‚ç”±äºè¿™ä¸ªè§†å›¾åªåŒ…å«éƒ¨åˆ†åˆ—ï¼Œå› æ­¤ä¸èƒ½å¯¹å…¶æ‰§è¡Œ <code>INSERT INTO</code> æ“ä½œã€‚</p>
<h2 id="ç¬¬å››ç« -æ•°æ®åº“è®¾è®¡ä¸å®ç°"><a href="#ç¬¬å››ç« -æ•°æ®åº“è®¾è®¡ä¸å®ç°" class="headerlink" title="ç¬¬å››ç«  æ•°æ®åº“è®¾è®¡ä¸å®ç°"></a>ç¬¬å››ç«  æ•°æ®åº“è®¾è®¡ä¸å®ç°</h2><p><strong>æ¦‚å¿µæ•°æ®æ¨¡å‹</strong>ï¼ˆConcept Data Modelï¼ŒCDMï¼‰æ˜¯ä¸€ç§<strong>é¢å‘ç”¨æˆ·</strong>çš„ç³»ç»Ÿæ•°æ®æ¨¡å‹ï¼Œå®ƒç”¨æ¥æè¿°ç°å®ä¸–ç•Œçš„ç³»ç»Ÿæ¦‚å¿µåŒ–æ•°æ®ç»“æ„ã€‚ä½¿æ•°æ®åº“è®¾è®¡äººå‘˜åœ¨ç³»ç»Ÿè®¾è®¡çš„åˆå§‹é˜¶æ®µï¼Œæ‘†è„±è®¡ç®—æœºç³»ç»ŸåŠDBMSçš„å…·ä½“æŠ€æœ¯é—®é¢˜ï¼Œé›†ä¸­ç²¾åŠ›åˆ†æä¸šåŠ¡æ•°æ®ä»¥åŠæ•°æ®ä¹‹é—´çš„è”ç³»ç­‰ï¼Œæè¿°ç³»ç»Ÿçš„æ•°æ®å¯¹è±¡åŠå…¶ç»„æˆå…³ç³»ã€‚ </p>
<p><strong>é€»è¾‘æ•°æ®æ¨¡å‹</strong> (Logic Data Modelï¼ŒLDM)æ˜¯åœ¨æ¦‚å¿µæ•°æ®æ¨¡å‹åŸºç¡€ä¸Šï¼Œä»ç³»ç»Ÿè®¾è®¡è§’åº¦æè¿°ç³»ç»Ÿçš„æ•°æ®å¯¹è±¡ç»„æˆåŠå…¶å…³è”ç»“æ„ï¼Œå¹¶è€ƒè™‘è¿™äº›æ•°æ®å¯¹è±¡ç¬¦åˆæ•°æ®åº“å¯¹è±¡çš„é€»è¾‘è¡¨ç¤ºã€‚ </p>
<p><strong>ç‰©ç†æ•°æ®æ¨¡å‹</strong>ï¼ˆPhysical Data Modelï¼ŒPDMï¼‰æ˜¯åœ¨é€»è¾‘æ•°æ®æ¨¡å‹åŸºç¡€ä¸Šï¼Œé’ˆå¯¹å…·ä½“DBMSæ‰€è®¾è®¡çš„æ•°æ®æ¨¡å‹ã€‚å®ƒç”¨äºæè¿°ç³»ç»Ÿæ•°æ®æ¨¡å‹åœ¨å…·ä½“DBMSä¸­çš„æ•°æ®å¯¹è±¡ç»„ç»‡ã€<strong>å­˜å‚¨æ–¹å¼</strong>ã€<strong>ç´¢å¼•æ–¹å¼</strong>ã€è®¿é—®è·¯å¾„ç­‰å®ç°ä¿¡æ¯ã€‚ï¼ˆé¢å‘ç¼–ç¨‹äººå‘˜ï¼‰</p>
<p>åœ¨E-Ræ¨¡å‹ä¸­ï¼ŒåŸºæœ¬å…ƒç´ åŒ…æ‹¬å®ä½“ã€å±æ€§ã€æ ‡è¯†ç¬¦å’Œè”ç³»ã€‚</p>
<p><strong>å®ä½“</strong>(Entity)æ˜¯æŒ‡é—®é¢˜åŸŸä¸­å­˜åœ¨çš„äººã€äº‹ã€ç‰©ã€åœ°ç‚¹ç­‰å®¢è§‚äº‹ç‰©åœ¨é€»è¾‘å±‚é¢çš„æ•°æ®æŠ½è±¡ã€‚å®ƒç”¨äºæè¿°äº‹ç‰©çš„æ•°æ®å¯¹è±¡ï¼Œå¦‚å®¢æˆ·ã€äº¤æ˜“ã€äº§å“ã€è®¢å•ç­‰ã€‚</p>
<p><strong>å±æ€§</strong>æ˜¯æŒ‡æè¿°å®ä½“ç‰¹å¾çš„æ•°æ®é¡¹ã€‚æ¯ä¸ªå®ä½“éƒ½å…·æœ‰1ä¸ªæˆ–å¤šä¸ªå±æ€§ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_13-51-33.png"></p>
<p>å®ä½“è”ç³»çš„å®ä¾‹æ•°é‡ç§°ä¸º<strong>åŸºæ•°</strong>(Cardinality) ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_14-19-51.png"></p>
<p><strong>è”ç³»</strong>ï¼šå®ä½“é—´çš„è”ç³»ï¼Œå…³è”çš„å®ä½“æ•°ç›®ç§°ä¸ºè”ç³»åº¦æ•°</p>
<p>å®ä½“è”ç³»ç±»å‹</p>
<ul>
<li>æ•°é‡å…³ç³»ï¼š1ï¼š1ã€1ï¼šNã€Mï¼šN</li>
<li>å¿…è¦æ€§ï¼šå¯é€‰ï¼Œå¼ºåˆ¶ã€‚</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_14-20-21.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_14-21-28.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_14-22-01.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_14-22-12.png"></p>
<p>åœ¨E-Ræ¨¡å‹ä¸­ï¼Œæ ¹æ®å¼±å®ä½“åœ¨è¯­ä¹‰ä¸Šå¯¹å¼ºå®ä½“ä¾èµ–ç¨‹åº¦çš„ä¸åŒï¼Œå¼±å®ä½“åˆåˆ†ä¸º<strong>æ ‡è¯†ç¬¦ä¾èµ–å¼±å®ä½“</strong>å’Œ<strong>éæ ‡è¯†ç¬¦ä¾èµ–å¼±å®ä½“</strong>ä¸¤ç±»ã€‚å¦‚æœå¼±å®ä½“çš„æ ‡è¯†ç¬¦ä¸­åŒ…å«äº†æ‰€ä¾èµ–å®ä½“çš„æ ‡è¯†ç¬¦ï¼Œåˆ™è¯¥å¼±å®ä½“ç§°ä¸ºæ ‡è¯†ç¬¦ä¾èµ–å¼±å®ä½“ã€‚</p>
<p>å½“ä½¿ç”¨å…³ç³»æ•°æ®åº“æ—¶ï¼Œç‰©ç†æ•°æ®æ¨¡å‹ï¼ˆPDMï¼‰å³ä¸ºå…³ç³»æ¨¡å‹ã€‚CDM&#x2F;LDMåˆ°PDMçš„è½¬æ¢å…¶å®å°±æ˜¯E-Ræ¨¡å‹å›¾åˆ°å…³ç³»æ¨¡å‹çš„è½¬æ¢ã€‚<br>E-Ræ¨¡å‹å›¾åˆ°å…³ç³»æ¨¡å‹è½¬æ¢åŸç†:</p>
<blockquote>
<p>å°†æ¯ä¸€ä¸ªå®ä½“è½¬æ¢æˆä¸€ä¸ªå…³ç³»è¡¨ï¼Œå®ä½“å±æ€§è½¬æ¢ä¸ºå…³ç³»è¡¨çš„åˆ—ï¼Œå®ä½“æ ‡è¯†ç¬¦è½¬æ¢ä¸ºå…³ç³»è¡¨çš„ä¸»é”®æˆ–å¤–é”®ã€‚å°†å®ä½“ä¹‹é—´çš„è”ç³»è½¬åŒ–ä¸ºå…³ç³»è¡¨ä¹‹é—´çš„å‚ç…§å®Œæ•´æ€§çº¦æŸã€‚</p>
</blockquote>
<p>1:1å®ä½“è”ç³»ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_19-30-41.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_19-31-07.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_19-31-22.png"></p>
<p>å½“å¸¦æœ‰å®ä½“ç»§æ‰¿è”ç³»çš„E-Ræ¨¡å‹å›¾è½¬æ¢å…³ç³»æ¨¡å‹æ—¶ï¼Œé¦–å…ˆçˆ¶å®ä½“å’Œå­å®ä½“éƒ½å„è‡ªè½¬æ¢ä¸ºè¡¨ï¼Œå…¶å±æ€§å‡è½¬æ¢ä¸ºè¡¨çš„åˆ—ã€‚åœ¨å¤„ç†å®ä½“ç»§æ‰¿è”ç³»è½¬æ¢æ—¶ï¼Œå°†çˆ¶è¡¨ä¸­çš„ä¸»é”®æ”¾ç½®åˆ°å­è¡¨ä¸­ï¼Œæ—¢åšä¸»é”®åˆåšå¤–é”®ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_19-39-02.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_19-40-14.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_19-40-27.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/cdm.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/ldm.png"><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/pdm.png">æ•°æ®åº“è§„èŒƒåŒ–è®¾è®¡ç›®çš„ï¼š</p>
<ul>
<li>å‡å°‘æ•°æ®åº“ä¸­çš„å†—ä½™æ•°æ®ï¼Œå°½é‡ä½¿åŒä¸€æ•°æ®åœ¨æ•°æ®åº“ä¸­ä»…ä¿å­˜ä¸€ä»½ï¼Œæœ‰æ•ˆé™ä½ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§çš„å·¥ä½œé‡ã€‚</li>
<li>è®¾è®¡åˆç†çš„è¡¨é—´ä¾èµ–å…³ç³»å’Œçº¦æŸå…³ç³»ï¼Œä¾¿äºå®ç°æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚</li>
<li>è®¾è®¡åˆç†çš„æ•°æ®åº“ç»“æ„ï¼Œä¾¿äºç³»ç»Ÿå¯¹æ•°æ®é«˜æ•ˆè®¿é—®å¤„ç†ã€‚</li>
</ul>
<p><strong>å®Œå…¨å‡½æ•°ä¾èµ–ä¸éƒ¨åˆ†å‡½æ•°ä¾èµ–</strong></p>
<p>ä¾‹1ï¼šå¯¹äºå…³ç³»Rï¼ˆ<u>X</u>,<u> Y</u>, N, O, Pï¼‰ï¼Œå…¶ä¸­ï¼ˆ<u>X</u>,<u> Y</u>ï¼‰ä¸ºå¤åˆä¸»é”®ï¼Œè‹¥å…¶å®ƒå±æ€§N,O,Péƒ½å®Œæ•´ä¾èµ–äºè¯¥å¤åˆä¸»é”®ï¼Œåˆ™ç§°å…³ç³»Rä¸ºå®Œå…¨å‡½æ•°ä¾èµ–ã€‚åä¹‹ï¼Œå…¶å®ƒå±æ€§N,O,Pä»…ä¾èµ–äºXï¼Œæˆ–ä»…ä¾èµ–äºYï¼Œåˆ™ç§°Rä¸ºéƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚</p>
<p><strong>å‡½æ•°ä¼ é€’ä¾èµ–</strong></p>
<p>ä¾‹2ï¼šå¯¹äºå…³ç³»Rï¼ˆ<u>X</u>, N, O, Pï¼‰ï¼Œå…¶ä¸­Xä¸ºä¸»é”®ï¼Œè‹¥å±æ€§Nä¾èµ–äºXï¼Œè€ŒXä¸ä¾èµ–äºNï¼Œå±æ€§Oä¾èµ–äºNã€‚åˆ™å±æ€§Oå‡½æ•°ä¼ é€’ä¾èµ–äºXã€‚</p>
<p><strong>å¤šå€¼å‡½æ•°ä¾èµ–</strong></p>
<p>ä¾‹3ï¼šå¯¹äºæ•™å­¦å…³ç³»Rï¼ˆè¯¾ç¨‹, æ•™å¸ˆ, è¯¾ç¨‹å‚è€ƒä¹¦ï¼‰ï¼Œä¸€é—¨è¯¾ç¨‹å¯ä»¥æœ‰å¤šä¸ªä»»è¯¾æ•™å¸ˆï¼Œä¹Ÿå¯ä»¥æœ‰å¤šæœ¬å‚è€ƒä¹¦ï¼›æ¯ä¸ªä»»è¯¾æ•™å¸ˆå¯ä»¥ä»»æ„é€‰æ‹©ä»–çš„å‚è€ƒä¹¦ã€‚è¯¥å…³ç³»å­˜åœ¨å¤šå€¼å‡½æ•°ä¾èµ–ã€‚</p>
<p>å¦‚æœXã€Yæ˜¯1:1çš„è”ç³»ï¼Œåˆ™Xâ†”Yã€‚<br>å¦‚å­¦å·è”ç³»ç”µè¯ï¼Œå³çŸ¥é“äº†å­¦å·ï¼Œå°±å¯ä»¥åœ¨è¡¨ä¸­ç¡®å®šå…¶è”ç³»ç”µè¯;åŒæ ·åœ°ï¼ŒçŸ¥é“äº†è”ç³»ç”µè¯ï¼Œä¹Ÿå¯ä»¥åœ¨è¡¨ä¸­ç¡®å®šå…¶å­¦å·ã€‚</p>
<p>å¦‚æœXï¼ŒYæ˜¯n :1çš„è”ç³»ï¼Œåˆ™Xâ†’Yã€‚<br>å¦‚å­¦å·-ç­å·ï¼Œå³çŸ¥é“äº†å­¦å·ï¼Œå°±å¯ä»¥åœ¨è¡¨ä¸­ç¡®å®šå…¶ç­å·;ç›¸ååœ°ï¼Œå¦‚æœçŸ¥é“äº†ç­å·ï¼Œå´æ— æ³•ç¡®å®šå­¦å·ã€‚</p>
<p>å¦‚æœXã€Yæ˜¯m : nçš„è”ç³»ï¼Œåˆ™Xå’ŒYä¸å­˜åœ¨å‡½æ•°ä¾èµ–å…³ç³»ã€‚<br>å¦‚å­¦å·å’Œè¯¾ç¨‹å·æ²¡æœ‰å‡½æ•°ä¾èµ–å…³ç³»ã€‚å³çŸ¥é“äº†å­¦å·ï¼Œæ— æ³•åœ¨è¡¨ä¸­ç¡®å®šè¯¾ç¨‹å·;åŒæ ·åœ°ï¼Œå¦‚æœçŸ¥é“äº†è¯¾ç¨‹å·ï¼Œä¹Ÿæ— æ³•ç¡®å®šå­¦å·ã€‚</p>
<p><strong>å…³ç³»è§„èŒƒåŒ–èŒƒå¼</strong>ï¼šå°†ä¸€ä¸ªæœ‰å¼‚å¸¸è®¿é—®çš„å…³ç³»åˆ†è§£æˆç»“æ„è‰¯å¥½çš„å…³ç³»çš„è¿‡ç¨‹ï¼Œä½¿è¿™äº›å…³ç³»æœ‰æœ€å°å†—ä½™æˆ–æ²¡æœ‰å†—ä½™ã€‚</p>
<p>ä¸€èˆ¬åœ¨æˆ‘ä»¬è®¾è®¡å…³ç³»å‹æ•°æ®åº“çš„æ—¶å€™ï¼Œ<strong>æœ€å¤šè€ƒè™‘åˆ°BCNFå°±å¤Ÿ</strong>ã€‚ç¬¦åˆé«˜ä¸€çº§èŒƒå¼çš„è®¾è®¡ï¼Œå¿…å®šç¬¦åˆä½ä¸€çº§èŒƒå¼ï¼Œä¾‹å¦‚ç¬¦åˆ2NFçš„å…³ç³»æ¨¡å¼ï¼Œå¿…å®šç¬¦åˆ1NFã€‚</p>
<p><em>å…³ç³»æ¨¡å¼â€å’Œâ€œå…³ç³»â€çš„åŒºåˆ«ï¼Œç±»ä¼¼äºé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­â€ç±»â€œä¸â€å¯¹è±¡â€œçš„åŒºåˆ«ã€‚â€å…³ç³»â€œæ˜¯â€å…³ç³»æ¨¡å¼â€œçš„ä¸€ä¸ªå®ä¾‹ï¼Œä½ å¯ä»¥æŠŠâ€å…³ç³»â€ç†è§£ä¸ºä¸€å¼ å¸¦æ•°æ®çš„è¡¨ï¼Œè€Œâ€œå…³ç³»æ¨¡å¼â€æ˜¯è¿™å¼ æ•°æ®è¡¨çš„è¡¨ç»“æ„ã€‚</em></p>
<ul>
<li><p>ç¬¬ä¸€èŒƒå¼ï¼šå…³ç³»è¡¨ä¸­å±æ€§ä¸å¯å†ç»†åˆ†ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/670f90e0d6a186d12a2a4545aea3ecd3.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/fcb526f0fae9df53625b573a822010e5.png"></p>
</li>
<li><p>ç¬¬äºŒèŒƒå¼ï¼šæ¶ˆé™¤éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œæ»¡è¶³ç¬¬ä¸€èŒƒå¼ã€‚</p>
<p>å¯¹äºå…³ç³»Rï¼ˆ<u>X</u>,<u> Y</u>, N, O, Pï¼‰ï¼Œå…¶ä¸­ï¼ˆ<u>X</u>,<u> Y</u>ï¼‰ä¸ºå¤åˆä¸»é”®ï¼ŒN,O,Pè¿™ä¸‰ä¸ªéé”®å±æ€§éƒ½ä¸å­˜åœ¨åªä¾èµ–Aæˆ–åªä¾èµ–Bæƒ…å†µï¼Œåˆ™è¯¥å…³ç³»æ»¡è¶³ç¬¬2èŒƒå¼,åä¹‹,ä¸æ»¡è¶³ç¬¬2èŒƒå¼ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/18eb762805d229aedb0c0046fceba05f.png"></p>
<p>å¯¹äº<strong>ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ â†’ å§“å</strong>ï¼Œæœ‰ <strong>å­¦å· â†’ å§“å</strong>ï¼Œå­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚<br>å¯¹äº<strong>ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ â†’ ç³»å</strong>ï¼Œæœ‰ <strong>å­¦å· â†’ ç³»å</strong>ï¼Œå­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚<br>å¯¹äº<strong>ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ â†’ ç³»ä¸»ä»»</strong>ï¼Œæœ‰ <strong>å­¦å· â†’ ç³»ä¸»ä»»</strong>ï¼Œå­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/0f18dc0ff9021cf8a32473f18065b11f.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/0dee50526984e0c559f2b29b4bff492f.png"></p>
</li>
<li><p>ç¬¬ä¸‰èŒƒå¼ï¼šåˆ‡æ–­å±æ€§ä¼ é€’ä¾èµ–ï¼Œæ»¡è¶³ç¬¬äºŒèŒƒå¼ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ä¸Šè¡¨ä¸­çš„è®¾è®¡ï¼Œæ˜¯å¦ç¬¦åˆ3NFçš„è¦æ±‚ã€‚</p>
<p>å¯¹äº<strong>é€‰è¯¾</strong>è¡¨ï¼Œä¸»ç ä¸ºï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ï¼Œä¸»å±æ€§ä¸º<strong>å­¦å·</strong>å’Œ<strong>è¯¾åï¼Œ</strong>éä¸»å±æ€§åªæœ‰ä¸€ä¸ªï¼Œä¸ºåˆ†æ•°ï¼Œä¸å¯èƒ½å­˜åœ¨ä¼ é€’å‡½æ•°ä¾èµ–ï¼Œæ‰€ä»¥<strong>é€‰è¯¾</strong>è¡¨çš„è®¾è®¡ï¼Œç¬¦åˆ3NFçš„è¦æ±‚ã€‚</p>
<p>å¯¹äº<strong>å­¦ç”Ÿ</strong>è¡¨ï¼Œä¸»ç ä¸º<strong>å­¦å·</strong>ï¼Œä¸»å±æ€§ä¸º<strong>å­¦å·</strong>ï¼Œéä¸»å±æ€§ä¸º<strong>å§“å</strong>ã€<strong>ç³»å</strong>å’Œ<strong>ç³»ä¸»ä»»</strong>ã€‚å› ä¸º å­¦å· â†’ ç³»åï¼ŒåŒæ—¶ ç³»å â†’ ç³»ä¸»ä»»ï¼Œæ‰€ä»¥å­˜åœ¨éä¸»å±æ€§<strong>ç³»ä¸»ä»»</strong>å¯¹äºç <strong>å­¦å·</strong>çš„ä¼ é€’å‡½æ•°ä¾èµ–ï¼Œæ‰€ä»¥<strong>å­¦ç”Ÿ</strong>è¡¨çš„è®¾è®¡ï¼Œä¸ç¬¦åˆ3NFçš„è¦æ±‚ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/81582f29379da3cbd33f483e3978b701.jpg"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/ebb592146a8c9226463de96b70780c2b.png"></p>
</li>
<li><p>å·´æ–¯-ç§‘å¾·èŒƒå¼(BCNF)ï¼šæ‰€æœ‰å±æ€§å‡½æ•°ä¾èµ–çš„å†³å®šå› å­éƒ½æ˜¯å€™é€‰é”®ã€‚åœ¨3NFåŸºç¡€ä¸Šï¼Œä»»ä½•<a href="https://baike.baidu.com/item/%E4%B8%BB%E5%B1%9E%E6%80%A7/120103?fromModule=lemma_inlink">ä¸»å±æ€§</a>ä¸èƒ½å¯¹ä¸»é”®å­é›†ä¾èµ–ï¼ˆåœ¨3NFåŸºç¡€ä¸Šæ¶ˆé™¤ä¸»å±æ€§å¯¹ä¸»ç å­é›†çš„ä¾èµ–ï¼‰</p>
<p>ä¸¾ä¾‹ï¼š</p>
<ol>
<li>æŸå…¬å¸æœ‰è‹¥å¹²ä¸ªä»“åº“ï¼›</li>
<li>æ¯ä¸ªä»“åº“åªèƒ½æœ‰ä¸€åç®¡ç†å‘˜ï¼Œä¸€åç®¡ç†å‘˜åªèƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­å·¥ä½œï¼›</li>
<li>ä¸€ä¸ªä»“åº“ä¸­å¯ä»¥å­˜æ”¾å¤šç§ç‰©å“ï¼Œä¸€ç§ç‰©å“ä¹Ÿå¯ä»¥å­˜æ”¾åœ¨ä¸åŒçš„ä»“åº“ä¸­ã€‚æ¯ç§ç‰©å“åœ¨æ¯ä¸ªä»“åº“ä¸­éƒ½æœ‰å¯¹åº”çš„æ•°é‡ã€‚</li>
</ol>
<p>é‚£ä¹ˆå…³ç³»æ¨¡å¼ ä»“åº“ï¼ˆä»“åº“åï¼Œç®¡ç†å‘˜ï¼Œç‰©å“åï¼Œæ•°é‡ï¼‰ å±äºå“ªä¸€çº§èŒƒå¼ï¼Ÿ</p>
<p>ç­”ï¼šå·²çŸ¥å‡½æ•°ä¾èµ–é›†ï¼šä»“åº“å â†’ ç®¡ç†å‘˜ï¼Œç®¡ç†å‘˜ â†’ ä»“åº“åï¼Œï¼ˆä»“åº“åï¼Œç‰©å“åï¼‰â†’ æ•°é‡<br>ä¸»å±æ€§ï¼šä»“åº“åã€ç®¡ç†å‘˜ã€ç‰©å“å<br>éä¸»å±æ€§ï¼šæ•°é‡<br>âˆµ ä¸å­˜åœ¨éä¸»å±æ€§å¯¹ç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–å’Œä¼ é€’å‡½æ•°ä¾èµ–ã€‚âˆ´ æ­¤å…³ç³»æ¨¡å¼å±äº3NFã€‚</p>
<p>ä½†æ˜¯å­˜åœ¨ä¸»å±æ€§ã€ä»“åº“åã€‘å¯¹äºç ï¼ˆç®¡ç†å‘˜ï¼Œç‰©å“åï¼‰çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚</p>
<p>è§£å†³åŠæ³•å°±æ˜¯è¦åœ¨ 3NF çš„åŸºç¡€ä¸Šæ¶ˆé™¤<strong>ä¸»å±æ€§</strong>å¯¹äºç çš„éƒ¨åˆ†ä¸ä¼ é€’å‡½æ•°ä¾èµ–ã€‚</p>
<p>ä»“åº“ï¼ˆä»“åº“åï¼Œç®¡ç†å‘˜ï¼‰<br>åº“å­˜ï¼ˆä»“åº“åï¼Œç‰©å“åï¼Œæ•°é‡ï¼‰</p>
</li>
<li><p>ç¬¬å››èŒƒå¼ï¼šæ¶ˆé™¤å¤šå€¼å‡½æ•°ä¾èµ–ï¼Œæ»¡è¶³å·´æ–¯-ç§‘å¾·èŒƒå¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-04_21-43-16.png"></p>
</li>
</ul>
<p>å…³ç³»çš„è§„èŒƒåŒ–ç¨‹åº¦ä¾æ¬¡æå‡:1NFâ†’2NF â†’3NFâ†’BCNFâ†’ 4NF<br>å…³ç³»çš„è§„èŒƒåŒ–ç¨‹åº¦è¶Šé«˜ï¼Œå…³ç³»æ•°æ®åº“å­˜å‚¨çš„å†—ä½™æ•°æ®å°±è¶Šå°‘ï¼Œå¯æ¶ˆé™¤çš„æ•°æ®è®¿é—®å¼‚å¸¸å°±è¶Šå¤šã€‚ä¸è¿‡å…³ç³»çš„è§„èŒƒåŒ–ç¨‹åº¦è¶Šé«˜ï¼Œåˆ†è§£å‡ºæ¥çš„å…³ç³»è¡¨å°±è¶Šå¤šï¼Œä½†åœ¨æ•°æ®æŸ¥è¯¢è®¿é—®æ—¶ï¼Œéœ€å…³è”æ›´å¤šå…³ç³»è¡¨ï¼Œå…¶æ•°æ®åº“å¤„ç†æ•ˆç‡ä¼šé™ä½ã€‚</p>
<p>ç»¼åˆä¾‹é¢˜ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-43-30.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-43-41.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-43-49.png"><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-43-59.png"><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-44-09.png"><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-44-15.png"><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-44-21.png"><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-44-28.png"><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_11-44-37.png">æ‰€è°“<strong>é€†è§„èŒƒåŒ–</strong>ï¼Œå°±æ˜¯é€‚å½“é™ä½è§„èŒƒåŒ–èŒƒå¼çº¦æŸï¼Œä¸å†è¦æ±‚ä¸€ä¸ªå…³ç³»è¡¨å¿…é¡»è¾¾åˆ°å¾ˆé«˜çš„è§„èŒƒåŒ–ç¨‹åº¦ï¼Œè€Œæ˜¯å…è®¸é€‚å½“çš„æ•°æ®å†—ä½™æ€§ï¼Œä»¥è·å–æ•°æ®è®¿é—®æ€§èƒ½ã€‚<br>é€†è§„èŒƒåŒ–å¤„ç†çš„åŸºæœ¬æ–¹æ³•:<br>(1)å¢åŠ å†—ä½™åˆ—æˆ–æ´¾ç”Ÿåˆ—<br>(2)å¤šä¸ªå…³ç³»è¡¨åˆå¹¶ä¸ºä¸€ä¸ªå…³ç³»è¡¨</p>
<p>åœ¨E-Ræ¨¡å‹ä¸­ï¼Œä¸€ä¸ªå®ä½“çš„å…¶ä»–å…³è”å®ä½“æ•°é‡ç§°ä¸ºä»€ä¹ˆï¼Ÿè”ç³»åº¦æ•°</p>
<p>åœ¨E-Ræ¨¡å‹å›¾ä¸­ï¼Œåœ¨å®šä¹‰ä¸€ä¸ªå®ä½“æ—¶ï¼Œå¿…é¡»æŒ‡å®šå®ƒçš„æ ‡è¯†ç¬¦ã€‚ é”™è¯¯ï¼ï¼</p>
<h2 id="ç¬¬äº”ç« -æ•°æ®åº“ç®¡ç†"><a href="#ç¬¬äº”ç« -æ•°æ®åº“ç®¡ç†" class="headerlink" title="ç¬¬äº”ç«  æ•°æ®åº“ç®¡ç†"></a>ç¬¬äº”ç«  æ•°æ®åº“ç®¡ç†</h2><p>æ•°æ®åº“ç®¡ç†æ¦‚è®º</p>
<p>æ˜¯æŒ‡ä¸ºä¿è¯æ•°æ®åº“ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œå’ŒæœåŠ¡è´¨é‡å¿…é¡»è¿›è¡Œçš„ç³»ç»Ÿç®¡ç†å·¥ä½œã€‚</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“ç®¡ç†?</p>
<ul>
<li>æ•°æ®åº“ç³»ç»Ÿéšè§„æ¨¡å¢å¤§,ç³»ç»Ÿä¼šå˜å¾—å¼‚å¸¸å¤æ‚</li>
<li>å¤šç”¨æˆ·æ•°æ®åº“åº”ç”¨å¸¦æ¥æ•°æ®åº“è®¿é—®å¤æ‚æ€§</li>
<li>æ•°æ®å®‰å…¨å’Œæ•°æ®éšç§å¯¹æœºæ„å’Œç”¨æˆ·éƒ½éå¸¸é‡è¦</li>
<li>æ•°æ®åº“ç³»ç»Ÿéšæ•°æ®é‡å¢åŠ å’Œä½¿ç”¨æ—¶é—´å¢é•¿å…¶æ€§èƒ½ä¼šé™ä½</li>
<li>ç³»ç»Ÿé­é‡æ„å¤–äº‹ä»¶ï¼Œæ•°æ®åº“æŸåæˆ–æ•°æ®ä¸¢å¤±</li>
</ul>
<p>æ•°æ®åº“ç®¡ç†ç›®æ ‡</p>
<ul>
<li>ä¿éšœæ•°æ®åº“ç³»ç»Ÿæ­£å¸¸ç¨³å®šè¿è¡Œ</li>
<li>å……åˆ†å‘æŒ¥æ•°æ®åº“ç³»ç»Ÿçš„è½¯ç¡¬ä»¶å¤„ç†èƒ½åŠ›</li>
<li>ç¡®ä¿æ•°æ®åº“ç³»ç»Ÿå®‰å…¨å’Œç”¨æˆ·æ•°æ®éšç§æ€§</li>
<li>æœ‰æ•ˆç®¡ç†æ•°æ®åº“ç”¨æˆ·åŠå…¶è§’è‰²æƒé™</li>
<li>è§£å†³æ•°æ®åº“ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–ã€ç³»ç»Ÿæ•…éšœä¸æ•°æ®æŸåç­‰é—®é¢˜</li>
<li>æœ€å¤§ç¨‹åº¦åœ°å‘æŒ¥æ•°æ®åº“å¯¹å…¶æ‰€å±æœºæ„çš„ä½œç”¨</li>
</ul>
<p>åœ¨æ•°æ®åº“ä¸­ï¼Œ<strong>äº‹åŠ¡</strong>(Transactionï¼‰æ˜¯æŒ‡é’ˆå¯¹<strong>å•ä¸ªä¸šåŠ¡å¤„ç†åŠŸèƒ½</strong>çš„ä¸€ç»„æ•°æ®åº“è®¿é—®æ“ä½œï¼Œè¦æ±‚å®ƒä»¬è¦ä¹ˆéƒ½æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œ<em><strong>äº‹åŠ¡æ˜¯DBMSæ‰§è¡Œçš„æœ€å°ä»»åŠ¡å•å…ƒã€‚åŒæ—¶ï¼Œäº‹åŠ¡ä¹Ÿæ˜¯DBMSæœ€å°çš„æ•…éšœæ¢å¤ä»»åŠ¡å•å…ƒå’Œå¹¶å‘æ§åˆ¶ä»»åŠ¡å•å…ƒã€‚</strong></em></p>
<p>äº‹åŠ¡<strong>ACID</strong>ç‰¹æ€§:</p>
<blockquote>
<p><strong>åŸå­æ€§</strong>ï¼ˆAtomicity):äº‹åŠ¡æ‰€æœ‰æ“ä½œåœ¨æ•°æ®åº“ä¸­è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚<br><strong>ä¸€è‡´æ€§</strong>(Consistency) :äº‹åŠ¡å¤šæ¬¡æ‰§è¡Œï¼Œå…¶ç»“æœåº”ä¸€è‡´ã€‚<br><strong>éš”ç¦»æ€§</strong>ï¼ˆlsolation):äº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´éš”ç¦»ï¼Œå¹¶å‘æ‰§è¡Œé€æ˜ã€‚<br><strong>æŒç»­æ€§</strong>(Durability ) :äº‹åŠ¡å®Œæˆåï¼Œæ•°æ®æ”¹å˜å¿…é¡»æ˜¯æ°¸ä¹…çš„ã€‚</p>
</blockquote>
<p>äº‹åŠ¡SQL</p>
<ul>
<li>BEGIN æˆ– START TRANSACTION ï¼›äº‹åŠ¡å¼€å§‹è¯­å¥</li>
<li>ROLLBACK ï¼›äº‹åŠ¡å›æ»šè¯­å¥</li>
<li>COMMIT ï¼›äº‹åŠ¡æäº¤è¯­å¥</li>
<li>SAVEPOINT ï¼›äº‹åŠ¡ä¿å­˜ç‚¹è¯­å¥</li>
</ul>
<p><a href="https://imgse.com/i/pCP9sAg"><img src="https://s1.ax1x.com/2023/06/05/pCP9sAg.png" alt="pCP9sAg.png" border="0" /></a><br>ä¾‹ï¼šåœ¨é€‰è¯¾ç®¡ç†æ•°æ®åº“CurriculaDBä¸­ï¼Œä½¿ç”¨äº‹åŠ¡ç¨‹åºå®ç°å¯¹å­¦é™¢ä¿¡æ¯è¡¨Collegeçš„æ•°æ®æ’å…¥ï¼Œå…¶äº‹åŠ¡SQLç¨‹åºå¦‚ä¸‹ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="keyword">INSERT</span>  <span class="keyword">INTO</span> college( collegeID, collegename)<span class="keyword">VALUES</span> (<span class="string">&#x27;004&#x27;</span>, <span class="string">&#x27;å¤–è¯­å­¦é™¢&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span>  <span class="keyword">INTO</span> college( collegeID, collegename)<span class="keyword">VALUES</span> (<span class="string">&#x27;005&#x27;</span>, <span class="string">&#x27;æ•°å­¦å­¦é™¢&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span>  <span class="keyword">INTO</span> college( collegeID, collegename)<span class="keyword">VALUES</span> (<span class="string">&#x27;006&#x27;</span>, <span class="string">&#x27;ä¸´åºŠåŒ»å­¦é™¢&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<p>åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­ç¦æ­¢ä½¿ç”¨çš„SQLè¯­å¥ï¼š</p>
<blockquote>
<p>åˆ›å»ºæ•°æ®åº“ CREATE  DATABASE<br>ä¿®æ”¹æ•°æ®åº“ ALTER  DATABASE<br>åˆ é™¤æ•°æ®åº“ DROP  DATABASE<br>æ¢å¤æ•°æ®åº“ RESTORE  DATABASE<br>åŠ è½½æ•°æ®åº“ LOAD  DATABASE<br>å¤‡ä»½æ—¥å¿—æ–‡ä»¶ BACKUP  LOG<br>æ¢å¤æ—¥å¿—æ–‡ä»¶ RESTORE  LOG<br>æˆæƒæ“ä½œ GRANT</p>
</blockquote>
<p>è‹¥ç”¨æˆ·æ²¡æœ‰æ˜¾å¼åœ°å®šä¹‰äº‹åŠ¡æ—¶ï¼ŒDBMSæŒ‰é»˜è®¤äº‹åŠ¡æ–¹å¼å¤„ç†ï¼Œ<strong>å³æ¯æ‰§è¡Œä¸€ä¸ªSQLè¯­å¥å°†è‡ªåŠ¨æ„æˆä¸€ä¸ªäº‹åŠ¡</strong>ã€‚è‹¥å°†å¤šæ¡SQLè¯­å¥å®šä¹‰ä¸ºä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œæ‰ä½¿ç”¨ä¸“é—¨çš„äº‹åŠ¡SQLè¯­å¥æ˜¾å¼åœ°å®šä¹‰äº‹åŠ¡ã€‚</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶ï¼Ÿ</p>
<p>å½“å¤šä¸ªäº‹åŠ¡ç¨‹åºåœ¨DBMSç³»ç»Ÿä¸­åŒæ—¶è¿è¡Œæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å¯¹ä¸€äº›å…±äº«æ•°æ®åŒæ—¶è¿›è¡Œè®¿é—®æ“ä½œï¼Œå¦‚ä¸€äº›äº‹åŠ¡ä¿®æ”¹æ•°æ®ï¼Œå¦ä¸€äº›äº‹åŠ¡è¯»å–æ•°æ®ã€‚è¿™äº›å¹¶å‘çš„å…±äº«æ•°æ®æ“ä½œï¼Œå¦‚æœåœ¨DBMSä¸­æ²¡æœ‰ä¸€å®šçš„çº¦æŸæ§åˆ¶æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¸¦æ¥<strong>æ•°æ®ä¸ä¸€è‡´æ€§</strong>æˆ–<strong>äº‹åŠ¡ç¨‹åºæ­»é”</strong>é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨å¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œæ—¶ï¼Œå¿…é¡»è¿›è¡Œå¹¶å‘æ§åˆ¶å¤„ç†ã€‚</p>
<p>å¹¶å‘æ§åˆ¶â€“äº‹åŠ¡è°ƒåº¦</p>
<p>ç›®çš„</p>
<ul>
<li>æ”¯æŒå¹¶å‘äº‹åŠ¡å¤„ç†ï¼Œä½¿æ›´å¤šç”¨æˆ·å¹¶è¡Œæ“ä½œï¼Œæé«˜ç³»ç»Ÿçš„å¹¶å‘è®¿é—®èƒ½åŠ›ã€‚</li>
<li>ä¿è¯ä¸€ä¸ªäº‹åŠ¡å·¥ä½œä¸ä¼šå¯¹å¦ä¸€ä¸ªäº‹åŠ¡å·¥ä½œäº§ç”Ÿä¸åˆç†çš„å½±å“ã€‚</li>
</ul>
<p>å¹¶å‘æ§åˆ¶éœ€è§£å†³çš„é—®é¢˜ï¼š</p>
<ul>
<li>ä¸¢å¤±æ›´æ–°æ•°æ®ï¼šå¯¹å…±äº«æ•°æ®è¿›è¡Œéé”å®šèµ„æºçš„è¯»å†™æ“ä½œã€‚</li>
<li>è„æ•°æ®è¯»å–ï¼šäº‹åŠ¡è¯»å–ä¸€ä¸ªè¢«å–æ¶ˆæŒä¹…åŒ–çš„å…±äº«æ•°æ®ã€‚ï¼ˆäº‹åŠ¡è¯»åˆ°çš„æ•°æ®æœ€åè¢«å›æ»šäº†ï¼Œè¯»åˆ°çš„æ˜¯å‡æ•°æ®ï¼‰</li>
<li>ä¸å¯é‡å¤è¯»å–ï¼šæŒ‡ä¸€ä¸ªäº‹åŠ¡å¯¹ä¸€ä¸ªå…±äº«æ•°æ®é‡å¤å¤šæ¬¡è¯»å–ï¼Œä½†å‰åè¯»å–çš„æ•°æ®ä¸ä¸€è‡´ã€‚ï¼ˆä¿®æ”¹æˆ–åˆ é™¤ï¼‰</li>
<li>å¹»åƒè¯»å–ï¼šåä¸€æ¬¡è¯»æ¯”å‰ä¸€æ¬¡è¯»å¤šäº†ä¸€äº›è®°å½•ï¼ˆæ’å…¥ï¼‰</li>
</ul>
<p><strong>å¹¶å‘äº‹åŠ¡è°ƒåº¦</strong>å°±æ˜¯æ§åˆ¶å¤šä¸ªäº‹åŠ¡çš„<strong>æ•°æ®æ“ä½œè¯­å¥æŒ‰ç…§æ°å½“çš„é¡ºåºè®¿é—®å…±äº«æ•°æ®</strong>ï¼Œä½¿è¿™äº›äº‹åŠ¡æ‰§è¡Œä¹‹åï¼Œé¿å…é€ æˆæ•°æ®çš„ä¸ä¸€è‡´æ€§ï¼Œå³è§£å†³â€œä¸¢å¤±æ›´æ–°æ•°æ®â€ã€â€œä¸å¯é‡å¤è¯»â€ã€â€œè„æ•°æ®è¯»â€ç­‰é—®é¢˜ã€‚</p>
<p><strong>äº‹åŠ¡è°ƒåº¦ç­–ç•¥</strong></p>
<p>ä¾‹ï¼šé“¶è¡Œå®¢æˆ·Açš„è´¦æˆ·å½“å‰ä½™æ¬¾ä¸º1000å…ƒï¼Œå®¢æˆ·Bçš„è´¦æˆ·å½“å‰ä½™æ¬¾ä¸º1500å…ƒã€‚ç°åœ¨æœ‰ä¸¤ä¸ªäº‹åŠ¡T1å’ŒT2ï¼Œå…¶ä¸­T1äº‹åŠ¡å°†ä»å®¢æˆ·Aè½¬è´¦200å…ƒåˆ°å®¢æˆ·Bï¼ŒT2äº‹åŠ¡ä¹Ÿå°†ä»å®¢æˆ·Aè½¬è´¦400å…ƒåˆ°å®¢æˆ·Bã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_20-18-05.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_20-18-14.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_20-18-31.png"></p>
<p>åœ¨äº‹åŠ¡å¹¶å‘æ‰§è¡Œä¸­ï¼Œåªæœ‰å½“äº‹åŠ¡ä¸­æ•°æ®æ“ä½œè°ƒåº¦é¡ºåºçš„æ‰§è¡Œç»“æœä¸äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œç»“æœä¸€æ ·æ—¶ï¼Œè¯¥å¹¶å‘äº‹åŠ¡è°ƒåº¦æ‰èƒ½ä¿è¯æ•°æ®æ“ä½œçš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚ç¬¦åˆè¿™æ ·æ•ˆæœçš„è°ƒåº¦ç§°ä¸º<strong>å¯ä¸²è¡ŒåŒ–è°ƒåº¦</strong>ã€‚<br>DBMSå¹¶å‘äº‹åŠ¡è°ƒåº¦ç›®æ ‡ï¼šä½¿å¹¶å‘äº‹åŠ¡è°ƒåº¦å®ç°çš„å¤„ç†ç»“æœä¸ä¸²è¡ŒåŒ–è°ƒåº¦å¤„ç†ç»“æœ<strong>ä¸€è‡´</strong>ã€‚</p>
<p>é”</p>
<ul>
<li><strong>æ’å®ƒé”å®š</strong>(Lock-X)â€”â€”é”å®šåï¼Œ<strong>ä¸å…è®¸</strong>å…¶å®ƒäº‹åŠ¡å¯¹å…±äº«æ•°æ®å†åŠ é”</li>
<li><strong>å…±äº«é”å®š</strong>(Lock-S)â€”â€”é”å®šåï¼Œåªå…è®¸å…¶å®ƒäº‹åŠ¡å¯¹å…±äº«æ•°æ®<strong>æ·»åŠ è¯»å–é”</strong></li>
</ul>
<p>èµ„æºé”å®šç²’åº¦</p>
<ul>
<li>æ•°æ®åº“â€”â€”ç²’åº¦æœ€å¤§</li>
<li>è¡¨â€”â€”ç²’åº¦è¾ƒå¤§</li>
<li>é¡µé¢â€”â€”ç²’åº¦ä¸­ç­‰</li>
<li>è¡Œâ€”â€”ç²’åº¦å°</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_20-28-05.png"></p>
<p>åŠ é”åè®®</p>
<p><strong>ä¸€çº§åŠ é”åè®®</strong>ï¼šä»»ä½•äº‹åŠ¡åœ¨ä¿®æ”¹å…±äº«æ•°æ®å¯¹è±¡ä¹‹å‰ï¼Œå¿…é¡»å¯¹è¯¥æ•°æ®æ‰§è¡Œæ’å®ƒé”å®šæŒ‡ä»¤ï¼Œç›´åˆ°è¯¥äº‹åŠ¡å¤„ç†å®Œæˆï¼Œæ‰è¿›è¡Œè§£é”æŒ‡ä»¤æ‰§è¡Œã€‚</p>
<p>ç‰¹ç‚¹ï¼šä½¿ç”¨ä¸€çº§åŠ é”åè®®ï¼Œå¯<strong>é¿å…å‡ºç°æ›´æ–°ä¸¢å¤±</strong>é—®é¢˜ã€‚ä½†ä¸èƒ½è§£å†³â€œä¸å¯é‡å¤è¯»å–â€ã€â€œè„è¯»â€ç­‰æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<p>ä¾‹ï¼šæŸèˆªç­å‰©ä½™æœºç¥¨æ•°æ®Açš„å½“å‰å€¼ä¸º100å¼ ã€‚ç°æœ‰åˆ†åˆ«æ¥è‡ªä¸åŒå”®ç¥¨ç‚¹çš„ä¸¤ä¸ªå¹¶å‘äº‹åŠ¡T1å’ŒT2ï¼Œå…¶ä¸­T1äº‹åŠ¡å°†å”®å‡º1å¼ æœºç¥¨ï¼ŒT2äº‹åŠ¡å°†å”®å‡º2å¼ æœºç¥¨ã€‚ä»¥ä¸‹åˆ†åˆ«ç»™å‡ºå®ƒä»¬åœ¨ä¸åŠ é”å’ŒæŒ‰ä¸€çº§åŠ é”åè®®çš„å¹¶å‘äº‹åŠ¡è°ƒåº¦æ‰§è¡Œæƒ…å†µï¼Œè§ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_20-37-29.png"></p>
<p><strong>äºŒçº§åŠ é”åè®®</strong>ï¼šåœ¨ä¸€çº§åŠ é”åè®®åŸºç¡€ä¸Šï¼Œé’ˆå¯¹å¹¶å‘äº‹åŠ¡çš„å…±äº«æ•°æ®è¯»æ“ä½œï¼Œ<strong>å¿…é¡»å¯¹è¯¥æ•°æ®æ‰§è¡Œå…±äº«é”å®šæŒ‡ä»¤</strong>ï¼Œ<strong>è¯»å®Œæ•°æ®åå³åˆ»é‡Šæ”¾å…±äº«é”å®š</strong>ã€‚</p>
<p>ç‰¹ç‚¹ï¼šè¯¥åŠ é”åè®®ä¸ä½†å¯ä»¥é˜²æ­¢â€œä¸¢å¤±æ›´æ–°â€çš„æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ï¼Œè¿˜å¯é˜²æ­¢å‡ºç°<strong>è„è¯»æ•°æ®</strong>é—®é¢˜ã€‚ä½†æœ‰å¯èƒ½ä¼šå‡ºç°â€œä¸å¯é‡å¤è¯»å–â€çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<p>ä¾‹ï¼šæŸèˆªç­å‰©ä½™æœºç¥¨æ•°æ®Açš„å½“å‰å€¼ä¸º100å¼ ã€‚ç°æœ‰åˆ†åˆ«æ¥è‡ªä¸åŒå”®ç¥¨ç‚¹çš„ä¸¤ä¸ªå¹¶å‘äº‹åŠ¡T1å’ŒT2ï¼Œå…¶ä¸­T1äº‹åŠ¡å°†å”®å‡º1å¼ æœºç¥¨ï¼ŒT2äº‹åŠ¡è¿›è¡Œæœºç¥¨ç©ºä½™æ•°æŸ¥è¯¢ã€‚ä»¥ä¸‹åˆ†åˆ«ç»™å‡ºå®ƒä»¬åœ¨æŒ‰ä¸€çº§åŠ é”åè®®æ‰§è¡Œå’ŒæŒ‰äºŒçº§åŠ é”åè®®çš„äº‹åŠ¡è°ƒåº¦æ‰§è¡Œæƒ…å†µï¼Œè§ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_20-39-03.png"></p>
<p><strong>ä¸‰çº§åŠ é”åè®®</strong>ï¼šåœ¨ä¸€çº§åŠ é”åè®®åŸºç¡€ä¸Šï¼Œå½“å¹¶å‘äº‹åŠ¡å¯¹å…±äº«æ•°æ®è¿›è¡Œè¯»æ“ä½œï¼Œå¿…é¡»å¯¹è¯¥æ•°æ®æ‰§è¡Œå…±äº«é”å®šæŒ‡ä»¤ï¼Œç›´åˆ°è¯¥<strong>äº‹åŠ¡å¤„ç†ç»“æŸæ‰é‡Šæ”¾å…±äº«é”å®š</strong>ã€‚</p>
<p>ç‰¹ç‚¹ï¼šè¯¥åŠ é”åè®®ä¸ä½†å¯ä»¥é˜²æ­¢â€œä¸¢å¤±æ›´æ–°â€ã€â€œè„è¯»â€çš„æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ï¼Œè¿˜å¯é˜²æ­¢å‡ºç°â€œä¸å¯é‡å¤è¯»å–â€çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</p>
<p>ä¾‹ï¼šæŸèˆªç­å‰©ä½™æœºç¥¨æ•°æ®Açš„å½“å‰å€¼ä¸º100å¼ ã€‚ç°æœ‰åˆ†åˆ«æ¥è‡ªä¸åŒå”®ç¥¨ç‚¹çš„ä¸¤ä¸ªå¹¶å‘äº‹åŠ¡T1å’ŒT2ï¼Œå…¶ä¸­T1äº‹åŠ¡å°†å”®å‡º1å¼ æœºç¥¨ï¼ŒT2äº‹åŠ¡è¿›è¡Œæœºç¥¨ç©ºä½™æ•°æŸ¥è¯¢ã€‚ä»¥ä¸‹åˆ†åˆ«ç»™å‡ºå®ƒä»¬åœ¨æŒ‰äºŒçº§åŠ é”åè®®æ‰§è¡Œå’ŒæŒ‰ä¸‰çº§åŠ é”åè®®çš„å¹¶å‘äº‹åŠ¡è°ƒåº¦æ‰§è¡Œæƒ…å†µï¼Œè§ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_20-39-19.png"></p>
<p>ä¸åŒçº§åˆ«é”åè®®æ¯”è¾ƒ</p>
<table>
<thead>
<tr>
<th align="left"><strong>åŠ é”åè®®çº§åˆ«</strong></th>
<th align="left"><strong>æ’å®ƒé”</strong></th>
<th align="left"><strong>å…±äº«é”</strong></th>
<th align="left"><strong>ä¸ä¸¢å¤±æ›´æ–°</strong></th>
<th align="left"><strong>ä¸è„è¯»</strong></th>
<th align="left"><strong>å¯é‡å¤è¯»</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>ä¸€çº§</strong></td>
<td align="left">å…¨ç¨‹åŠ é”</td>
<td align="left">ä¸åŠ </td>
<td align="left">æ˜¯</td>
<td align="left">å¦</td>
<td align="left">å¦</td>
</tr>
<tr>
<td align="left"><strong>äºŒçº§</strong></td>
<td align="left">å…¨ç¨‹åŠ é”</td>
<td align="left">å¼€å§‹æ—¶åŠ é”ï¼Œè¯»å®Œæ•°æ®é‡Šæ”¾é”å®š</td>
<td align="left">æ˜¯</td>
<td align="left">æ˜¯</td>
<td align="left">å¦</td>
</tr>
<tr>
<td align="left"><strong>ä¸‰çº§</strong></td>
<td align="left">å…¨ç¨‹åŠ é”</td>
<td align="left">å…¨ç¨‹åŠ é”</td>
<td align="left">æ˜¯</td>
<td align="left">æ˜¯</td>
<td align="left">æ˜¯</td>
</tr>
</tbody></table>
<p>ä¿è¯å¹¶å‘äº‹åŠ¡å¯ä¸²è¡ŒåŒ–çš„ä¸€ä¸ªåè®®æ˜¯ï¼š<strong>äºŒé˜¶æ®µé”å®šåè®®</strong></p>
<p>äºŒé˜¶æ®µé”å®šåè®®è§„å®šæ¯ä¸ªäº‹åŠ¡å¿…é¡»åˆ†ä¸¤ä¸ªé˜¶æ®µæå‡ºåŠ é”å’Œè§£é”ç”³è¯·:</p>
<blockquote>
<p>å¢é•¿é˜¶æ®µï¼Œäº‹åŠ¡åªèƒ½è·å¾—é”ï¼Œä½†ä¸èƒ½é‡Šæ”¾é”ã€‚</p>
<p>ç¼©å‡é˜¶æ®µï¼Œäº‹åŠ¡åªèƒ½é‡Šæ”¾é”ï¼Œä½†ä¸èƒ½è·å¾—æ–°é”ã€‚</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_20-58-44.png"></p>
<p>åœ¨åŸºäºé”æœºåˆ¶çš„å¹¶å‘äº‹åŠ¡æ‰§è¡Œä¸­ï¼Œå¦‚æœè¿™äº›äº‹åŠ¡åŒæ—¶é”å®šä¸¤ä¸ªä»¥åŠä»¥ä¸Šèµ„æºæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å½¼æ­¤éƒ½ä¸èƒ½ç»§ç»­æ‰§è¡Œçš„çŠ¶æ€ï¼Œå³<strong>äº‹åŠ¡æ­»é”</strong>çŠ¶æ€ã€‚</p>
<p>ä¾‹ ä¸¤ä¸ªäº‹åŠ¡T1å’ŒT2ï¼Œå®ƒä»¬éƒ½éœ€è¦åŠ é”è®¿é—®æ•°æ®åº“è¡¨Table1å’ŒTable2ï¼Œå…¶äº‹åŠ¡ç¨‹åºè§å›¾6-20aæ‰€ç¤ºã€‚å½“è¿™ä¸¤ä¸ªäº‹åŠ¡ç¨‹åºè°ƒåº¦æ‰§è¡Œæ—¶ï¼Œåªè¦ä¸æ˜¯æŒ‰å¯ä¸²è¡ŒåŒ–è°ƒåº¦æ‰§è¡Œï¼Œåˆ™å®ƒä»¬åœ¨æ‰§è¡Œæ—¶ä¼šå‡ºç°æ­»é”çŠ¶æ€ï¼Œè§å›¾6-20bæ‰€ç¤ºã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_21-01-25.png"></p>
<p>æ­»é”å‡ºç°çš„å¿…è¦æ¡ä»¶</p>
<ul>
<li><p>äº’æ–¥æ¡ä»¶</p>
</li>
<li><p>è¯·æ±‚å’Œä¿æŒæ¡ä»¶</p>
</li>
<li><p>ä¸å‰¥å¤ºæ¡ä»¶</p>
</li>
<li><p>ç¯è·¯ç­‰å¾…æ¡ä»¶</p>
</li>
</ul>
<p>é˜²èŒƒæ­»é”çš„ç­–ç•¥</p>
<ul>
<li><p>å…è®¸äº‹åŠ¡ä¸€æ¬¡å‘å‡ºå½“å‰æ‰€éœ€å…¨éƒ¨èµ„æºçš„é”å®šï¼Œä½¿ç”¨å®Œæˆåï¼Œå†é‡Šæ”¾ç»™å…¶å®ƒäº‹åŠ¡ä½¿ç”¨ã€‚</p>
</li>
<li><p>è§„å®šæ‰€æœ‰åº”ç”¨ç¨‹åºé”å®šèµ„æºçš„é¡ºåºå¿…é¡»å®Œå…¨ç›¸åŒã€‚</p>
</li>
</ul>
<p>è§£å†³æ­»é”çš„åŠæ³•ï¼šå½“å‘ç”Ÿæ­»é”æ—¶ï¼Œå›æ»šå…¶ä¸­çš„ä¸€ä¸ªäº‹åŠ¡ï¼Œå¹¶å–æ¶ˆå®ƒå¯¹æ•°æ®åº“æ‰€åšçš„æ”¹åŠ¨ã€‚<br><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_21-03-36.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_21-10-46.png"></p>
<p>ä¾‹ï¼šåˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œå…¶è´¦å·åå­—ä¸ºâ€œuserAâ€ï¼Œå¯†ç ä¸ºâ€œ123456â€ã€‚è¯¥ç”¨æˆ·å…·æœ‰ç™»å½•æƒé™(Loginï¼‰å’Œè§’è‰²ç»§æ‰¿æƒé™ï¼ˆInheritï¼‰ç³»ç»Ÿæƒé™ï¼Œä½†å®ƒä¸æ˜¯è¶…çº§ç”¨æˆ·(SuperUser)ï¼Œä¸å…·æœ‰åˆ›å»ºæ•°æ®åº“æƒé™ï¼ˆCreateDB)ã€åˆ›å»ºè§’è‰²æƒé™ï¼ˆCreateRoleï¼‰ã€æ•°æ®åº“å¤åˆ¶æƒé™ï¼ˆReplication) ,æ­¤å¤–æ•°æ®åº“è¿æ¥æ•°(Connection Limitï¼‰ä¸å—é™ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &quot;userA&quot; <span class="keyword">WITH</span></span><br><span class="line">	<span class="keyword">LOGIN</span> <span class="comment">--ç™»å½•æƒé™</span></span><br><span class="line">	<span class="keyword">NOSUPERUSER</span> <span class="comment">--ä¸æ˜¯è¶…çº§ç”¨æˆ·</span></span><br><span class="line">	<span class="keyword">NOCREATEDB</span> <span class="comment">--ä¸èƒ½åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line">	<span class="keyword">NOCREATEROLE</span> <span class="comment">--æ²¡æœ‰åˆ›å»ºè§’è‰²æƒé™</span></span><br><span class="line">	<span class="keyword">INHERIT</span> <span class="comment">--ç»§æ‰¿ç³»ç»Ÿæƒé™</span></span><br><span class="line">	<span class="keyword">NOREPLICATION</span> <span class="comment">--æ²¡æœ‰æ•°æ®åº“å¤åˆ¶æƒé™</span></span><br><span class="line">	<span class="keyword">CONNECTION</span> <span class="keyword">LIMIT</span> <span class="number">-1</span> <span class="comment">--æ•°æ®åº“è¿æ¥æ•°ä¸å—é™</span></span><br><span class="line">	<span class="keyword">PASSWORD</span> <span class="string">&#x27;123456&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹åˆ é™¤ç”¨æˆ·ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>  &lt;ç”¨æˆ·å&gt;  [ [ <span class="keyword">WITH</span> ] <span class="keyword">option</span> [ ... ] ];  	<span class="comment">--ä¿®æ”¹ç”¨æˆ·çš„å±æ€§</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>  &lt;ç”¨æˆ·å&gt;  <span class="keyword">RENAME</span> <span class="keyword">TO</span> &lt;æ–°ç”¨æˆ·å&gt;;  		<span class="comment">--ä¿®æ”¹ç”¨æˆ·çš„åç§°</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>  &lt;ç”¨æˆ·å&gt;  <span class="keyword">SET</span> &lt;å‚æ•°é¡¹&gt; &#123; <span class="keyword">TO</span> | = &#125; &#123; <span class="keyword">value</span> | <span class="keyword">DEFAULT</span> &#125;;												<span class="comment">--ä¿®æ”¹ç”¨æˆ·çš„å‚æ•°å€¼  </span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>  &lt;ç”¨æˆ·å&gt;  <span class="keyword">RESET</span> &lt;å‚æ•°é¡¹&gt;;			<span class="comment">--é‡ç½®ç”¨æˆ·å‚æ•°å€¼</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> userA;</span><br></pre></td></tr></table></figure>

<p>ä¾‹ï¼šä¿®æ”¹ç”¨æˆ·â€œuserAâ€çš„è´¦å·å¯†ç ä¸ºâ€œgres123â€ã€‚åŒæ—¶ä¹Ÿé™åˆ¶è¯¥ç”¨æˆ·çš„æ•°æ®åº“è¿æ¥æ•°ä¸º10ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> &quot;userA&quot; </span><br><span class="line">	<span class="keyword">CONNECTION</span> <span class="keyword">LIMIT</span> <span class="number">10</span></span><br><span class="line">	<span class="keyword">PASSWORD</span> <span class="string">&#x27;gres123&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>åœ¨DBMSä¸­ï¼Œä¸ºäº†æ–¹ä¾¿å¯¹ä¼—å¤šç”¨æˆ·åŠå…¶æƒé™è¿›è¡Œç®¡ç†ï¼Œé€šå¸¸å°†ä¸€ç»„å…·æœ‰ç›¸åŒæƒé™çš„ç”¨æˆ·å®šä¹‰ä¸º<strong>è§’è‰²</strong>(Role)ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">ROLE</span>  &lt;è§’è‰²å&gt; [ [ <span class="keyword">WITH</span> ] <span class="keyword">option</span> [ ... ] ]; 	 <span class="comment">--åˆ›å»ºè§’è‰²</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">ROLE</span>  &lt;è§’è‰²å&gt;  [ [ <span class="keyword">WITH</span> ] <span class="keyword">option</span> [ ... ] ]; 	 <span class="comment">--ä¿®æ”¹è§’è‰²å±æ€§</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">ROLE</span>  &lt;è§’è‰²å&gt;  <span class="keyword">RENAME</span> <span class="keyword">TO</span> &lt;æ–°è§’è‰²å&gt;; 		 <span class="comment">--ä¿®æ”¹è§’è‰²åç§° </span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">ROLE</span>  &lt;è§’è‰²å&gt;  <span class="keyword">SET</span> &lt;å‚æ•°é¡¹&gt; &#123; <span class="keyword">TO</span> | = &#125; &#123; <span class="keyword">value</span> | <span class="keyword">DEFAULT</span> &#125;; </span><br><span class="line">									 <span class="comment">--ä¿®æ”¹è§’è‰²å‚æ•°å€¼</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">ROLE</span>  &lt;è§’è‰²å&gt;  <span class="keyword">RESET</span> &lt;å‚æ•°é¡¹&gt;;			 <span class="comment">--å¤ä½è§’è‰²å‚æ•°å€¼</span></span><br><span class="line"><span class="keyword">DROP</span>  <span class="keyword">ROLE</span>  &lt;è§’è‰²å&gt;;						 <span class="comment">--åˆ é™¤æŒ‡å®šè§’è‰²</span></span><br></pre></td></tr></table></figure>

<p>ä¾‹ ï¼šåœ¨å·¥ç¨‹é¡¹ç›®ç®¡ç†ç³»ç»Ÿä¸­ï¼Œå‡å®šéœ€è¦åœ¨ProjectDBæ•°æ®åº“å†…åˆ›å»ºç»ç†è§’è‰²Role_Managerã€‚è¯¥è§’è‰²å…·æœ‰ç™»å½•æƒé™ï¼ˆLoginï¼‰å’Œè§’è‰²ç»§æ‰¿æƒé™ï¼ˆInheritï¼‰ç³»ç»Ÿæƒé™ï¼Œä½†å®ƒä¸æ˜¯è¶…çº§ç”¨æˆ·ï¼ˆSuperUserï¼‰ï¼Œä¸å…·æœ‰åˆ›å»ºæ•°æ®åº“æƒé™ï¼ˆCreateDBï¼‰ã€åˆ›å»ºè§’è‰²æƒé™ï¼ˆCreateRoleï¼‰ã€æ•°æ®åº“å¤åˆ¶æƒé™ï¼ˆReplicationï¼‰ï¼Œæ­¤å¤–æ•°æ®åº“è¿æ¥æ•°ï¼ˆConnection Limitï¼‰ä¸å—é™ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">ROLE</span>  &quot;Role_Manager&quot;  <span class="keyword">WITH</span></span><br><span class="line"> <span class="keyword">LOGIN</span></span><br><span class="line"> <span class="keyword">NOSUPERUSER</span></span><br><span class="line"> <span class="keyword">NOCREATEDB</span></span><br><span class="line"> <span class="keyword">NOCREATEROLE</span></span><br><span class="line"> <span class="keyword">INHERIT</span></span><br><span class="line"> <span class="keyword">NOREPLICATION</span></span><br><span class="line"> <span class="keyword">CONNECTION</span> <span class="keyword">LIMIT</span> <span class="number">-1</span>;</span><br></pre></td></tr></table></figure>

<p>è§’è‰²æƒé™æˆäºˆ</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>,<span class="keyword">INSERT</span>,<span class="keyword">UPDATE</span>,<span class="keyword">DELETE</span>  <span class="keyword">ON</span>  Department  <span class="keyword">TO</span> &quot;Role_Manager&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_21-26-06.png"></p>
<p><strong>æ•°æ®åº“å¤‡ä»½æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>å®Œå…¨æ•°æ®åº“å¤‡ä»½</li>
<li>å·®å¼‚æ•°æ®åº“å¤‡ä»½</li>
<li>äº‹åŠ¡æ—¥å¿—å¤‡ä»½</li>
<li>æ–‡ä»¶å¤‡ä»½</li>
</ul>
<p>ä¸‹é¢å“ªç§å¤‡ä»½æ–‡ä»¶æ˜¯æ¢å¤æ•°æ®åº“åˆ°æ•…éšœç‚¹æ—¶åˆ»çŠ¶æ€å¿…ä¸å¯å°‘çš„?</p>
<p>Aï¼æ•°æ®åº“å®Œæ•´å¤‡ä»½æ–‡ä»¶	Bï¼æ•°æ®åº“å·®å¼‚å¤‡ä»½æ–‡ä»¶</p>
<p><strong>Cï¼äº‹åŠ¡æ—¥å¿—å¤‡ä»½æ–‡ä»¶</strong>	Dï¼æ•°æ®åº“æ–‡ä»¶å¤‡ä»½</p>
<p>C. äº‹åŠ¡æ—¥å¿—å¤‡ä»½æ–‡ä»¶æ˜¯æ¢å¤æ•°æ®åº“åˆ°æ•…éšœç‚¹æ—¶åˆ»çŠ¶æ€å¿…ä¸å¯å°‘çš„ã€‚äº‹åŠ¡æ—¥å¿—æ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨æ¥è®°å½•æ•°æ®åº“ä¸­çš„æ‰€æœ‰ä¿®æ”¹æ“ä½œçš„æ–‡ä»¶ã€‚åœ¨è¿›è¡Œæ•°æ®åº“æ¢å¤æ—¶ï¼Œäº‹åŠ¡æ—¥å¿—è®°å½•çš„å˜æ›´å¯ä»¥è¢«ç”¨æ¥é‡åšæˆ–è€…æ’¤é”€ï¼Œä»è€Œå°†æ•°æ®åº“æ¢å¤åˆ°æŸä¸ªæŒ‡å®šçš„æ—¶é—´ç‚¹æˆ–è€…äº‹åŠ¡ç‚¹çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œäº‹åŠ¡æ—¥å¿—å¤‡ä»½æ–‡ä»¶éå¸¸é‡è¦ï¼Œæ˜¯è¿›è¡Œæ•°æ®åº“æ¢å¤çš„å¿…è¦æ¡ä»¶ã€‚A. æ•°æ®åº“å®Œæ•´å¤‡ä»½æ–‡ä»¶åŒ…å«æ•´ä¸ªæ•°æ®åº“çš„æ‰€æœ‰æ•°æ®ï¼Œä½†æ˜¯æ— æ³•æ¢å¤åˆ°æŸä¸ªæŒ‡å®šçš„æ—¶é—´ç‚¹æˆ–è€…äº‹åŠ¡ç‚¹çš„çŠ¶ã€‚B. æ•°æ®åº“å·®å¼‚å¤‡ä»½æ–‡ä»¶åªåŒ…å«è‡ªä¸Šæ¬¡å®Œæ•´å¤‡ä»½æˆ–å·®å¼‚å¤‡ä»½ä»¥æ¥å‘ç”Ÿçš„æ•°æ®å˜æ›´ï¼Œä¹Ÿæ— æ³•æ¢å¤åˆ°æŸä¸ªæŒ‡å®šçš„æ—¶é—´ç‚¹æˆ–è€…äº‹åŠ¡ç‚¹çš„çŠ¶æ€ï¼Œå› æ­¤ä¹Ÿä¸ä¸€å®šæ˜¯æ¢å¤åˆ°æ•…éšœç‚¹æ—¶åˆ»çŠ¶æ€å¿…ä¸å¯å°‘çš„ã€‚D. æ•°æ®åº“æ–‡ä»¶å¤‡ä»½åªæ˜¯å°†æ•°æ®åº“æ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªä½ç½®ï¼Œä¹Ÿæ— æ³•æ¢å¤åˆ°æŸä¸ªæŒ‡å®šçš„æ—¶é—´ç‚¹æˆ–è€…äº‹åŠ¡ç‚¹çš„çŠ¶æ€ã€‚</p>
<p>å¯¹äºæ„å¤–äº‹ä»¶å¯¼è‡´æ•°æ®åº“ç³»ç»ŸæŸåï¼Œæœ€å¯é çš„æŠ€æœ¯æ‰‹æ®µæ˜¯<br>A.æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤<br>B.é‡‡ç”¨åŒæœºå®¹é”™æŠ€æœ¯<br>C.è¿›è¡Œè®¿é—®æƒé™æ§åˆ¶<br>D.<strong>ç³»ç»Ÿå¼‚åœ°å®¹ç¾</strong></p>
<p>åœ¨æ•°æ®åº“ç³»ç»Ÿå®‰å…¨æ¨¡å‹ä¸­ï¼Œå“ªç§å®‰å…¨ç®¡ç†æ‰‹æ®µæ˜¯DBMSç³»ç»Ÿæä¾›çš„æ•°æ®åº“å®‰å…¨è®¿é—®æœºåˆ¶?</p>
<p>A.ç”¨æˆ·èº«ä»½è®¤è¯<br>B.<strong>ç”¨æˆ·å­˜å–æƒé™æ§åˆ¶</strong><br>C.æ–‡ä»¶å®‰å…¨è®¿é—®<br>D.æ•°æ®åŠ å¯†å­˜å‚¨</p>
<p>å“ªç§æ•°æ®åº“å¤‡ä»½æ–¹å¼å¯ä»¥æ”¯æŒç³»ç»Ÿè¿ç»­è¿è¡Œ?</p>
<p>A.å†·å¤‡ä»½<br>B.<strong>çƒ­å¤‡ä»½</strong><br>C.å®Œæ•´å¤‡ä»½<br>D.å·®å¼‚å¤‡ä»½</p>
<p>çƒ­å¤‡ä»½å¯ä»¥æ”¯æŒç³»ç»Ÿè¿ç»­è¿è¡Œã€‚çƒ­å¤‡ä»½æ˜¯ä¸€ç§åœ¨ç³»ç»Ÿè¿è¡Œæ—¶å¤‡ä»½æ•°æ®åº“çš„æ–¹æ³•ï¼Œå¤‡ä»½æœŸé—´æ•°æ®åº“å¯ä»¥ç»§ç»­æä¾›æœåŠ¡ï¼Œä¸ä¼šä¸­æ–­ç”¨æˆ·å¯¹æ•°æ®åº“çš„è®¿é—®ã€‚åœ¨çƒ­å¤‡ä»½æœŸé—´ï¼ŒDBMSç³»ç»Ÿä¼šå°†æ•°æ®åº“çš„æ´»åŠ¨æ—¥å¿—è®°å½•ä¸‹æ¥ï¼Œå¹¶å°†å¤‡ä»½ä¸æ—¥å¿—è¿›è¡ŒåŒæ­¥ï¼Œä»¥ç¡®ä¿å¤‡ä»½çš„æ•°æ®ä¸æºæ•°æ®åº“ä¿æŒä¸€è‡´ã€‚çƒ­å¤‡ä»½å¯ä»¥ä¿è¯æ•°æ®åº“ç³»ç»Ÿçš„è¿ç»­æ€§å’Œé«˜å¯ç”¨æ€§ã€‚ç›¸å¯¹è€Œè¨€ï¼Œå†·å¤‡ä»½æ˜¯åœ¨ç³»ç»Ÿåœæ­¢è¿è¡Œæ—¶å¤‡ä»½æ•°æ®åº“çš„æ–¹æ³•ï¼Œéœ€è¦åœæ­¢æ•°æ®åº“æœåŠ¡ï¼Œå°†æ•°æ®åº“ç³»ç»Ÿå®Œå…¨å…³é—­ï¼Œè¿›è¡Œå¤‡ä»½æ“ä½œï¼Œå¤‡ä»½æœŸé—´æ•°æ®åº“æ— æ³•æä¾›æœåŠ¡ã€‚å†·å¤‡ä»½ä¼šå¯¼è‡´æ•°æ®åº“ç³»ç»Ÿçš„åœæœºæ—¶é—´è¾ƒé•¿ï¼Œå¹¶ä¸”å¤‡ä»½æ•°æ®ä¸æºæ•°æ®åº“ä¹‹é—´å­˜åœ¨æ—¶é—´å·®ï¼Œæ— æ³•å®æ—¶ä¿æŒåŒæ­¥ã€‚å®Œæ•´å¤‡ä»½å’Œå·®å¼‚å¤‡ä»½éƒ½æ˜¯å¤‡ä»½æ•°æ®çš„æ–¹å¼ï¼Œå®Œæ•´å¤‡ä»½æ˜¯å°†æ•´ä¸ªæ•°æ®åº“å¤‡ä»½ï¼Œå·®å¼‚å¤‡ä»½æ˜¯åªå¤‡ä»½è‡ªä¸Šæ¬¡å¤‡ä»½åå‘ç”Ÿæ›´æ”¹çš„æ•°æ®ï¼Œä½†å®ƒä»¬å¹¶ä¸èƒ½æ”¯æŒæ•°æ®åº“ç³»ç»Ÿçš„è¿ç»­è¿è¡Œï¼Œéœ€è¦åœ¨å¤‡ä»½æœŸé—´åœæ­¢æ•°æ®åº“æœåŠ¡ã€‚</p>
<p>åœ¨å“ªä¸ªç²’åº¦ä¸Šå¯¹å…±äº«æ•°æ®è¿›è¡ŒåŠ é”è®¿é—®ï¼Œç³»ç»Ÿå¹¶å‘è®¿é—®æ€§èƒ½æœ€å¥½ï¼Ÿè¡Œï¼</p>
<p>DBMSç³»ç»Ÿå¯è‡ªåŠ¨æ¢å¤å“ªç±»æ•°æ®ï¼Ÿäº‹åŠ¡æ•…éšœçš„æ•°æ®é”™è¯¯</p>
<h2 id="ç¬¬å…­ç« -æ•°æ®åº“åº”ç”¨ç¼–ç¨‹"><a href="#ç¬¬å…­ç« -æ•°æ®åº“åº”ç”¨ç¼–ç¨‹" class="headerlink" title="ç¬¬å…­ç«  æ•°æ®åº“åº”ç”¨ç¼–ç¨‹"></a>ç¬¬å…­ç«  æ•°æ®åº“åº”ç”¨ç¼–ç¨‹</h2><p>å¼€æ”¾å¼æ•°æ®åº“äº’è¿ï¼ˆOpen DataBase Connectivityï¼‰å®ç°äº†åº”ç”¨ç¨‹åºå¯¹å¤šç§ä¸åŒDBMSçš„æ•°æ®åº“çš„è®¿é—®ï¼Œå®ç°äº†æ•°æ®åº“è¿æ¥æ–¹å¼çš„å˜é©ã€‚</p>
<p>ODBCå®šä¹‰äº†ä¸€å¥—åŸºäºSQLçš„ï¼Œå…¬å…±çš„ï¼Œä¸æ•°æ®åº“æ— å…³çš„APIï¼Œä»è€Œä½¿å¾—åº”ç”¨ç¨‹åºä¸æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¹‹é—´åœ¨é€»è¾‘ä¸Šç‹¬ç«‹ï¼Œä½¿åº”ç”¨ç¨‹åºä¸æ•°æ®åº“æ— å…³æ€§</p>
<p>ODBCåº”ç”¨ç¨‹åºæ¥å£(ODBCAPI)æ˜¯ä¸€ç§ä½¿ç”¨ODBCæŠ€æœ¯å®ç°åº”ç”¨ç¨‹åºä¸æ•°æ®åº“äº’è¿çš„æ ‡å‡†æ¥å£ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_22-26-31.png"></p>
<p>åº”ç”¨ç¨‹åºä½¿ç”¨ODBCè®¿é—®æ•°æ®åº“çš„æ­¥éª¤ï¼š</p>
<blockquote>
<p>åœ¨ODBCé©±åŠ¨ç®¡ç†å™¨ä¸­æ³¨å†Œä¸€ä¸ªæ•°æ®æº;<br>æ ¹æ®æ•°æ®æºæä¾›çš„æ•°æ®åº“ä½ç½®ã€æ•°æ®åº“åç§°åŠé©±åŠ¨ç¨‹åºç­‰ä¿¡æ¯ï¼Œé©±åŠ¨ç®¡ç†å™¨å»ºç«‹èµ·ODBCä¸å…·ä½“æ•°æ®åº“çš„è”ç³»;<br>åº”ç”¨ç¨‹åºä½¿ç”¨æ•°æ®æºå»ºç«‹ä¸ç›¸åº”æ•°æ®åº“çš„è¿æ¥;<br>åº”ç”¨ç¨‹åºé€šè¿‡é©±åŠ¨ç¨‹åºç®¡ç†å™¨ä¸æ•°æ®åº“ç®¡ç†ç³»ç»Ÿäº¤æ¢ä¿¡æ¯;<br>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ‰§è¡Œå®Œç›¸åº”çš„SQLæ“ä½œåï¼Œå°†ç»“æœé€šè¿‡é©±åŠ¨ç¨‹åºç®¡ç†å™¨è¿”å›ç»™åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<h3 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h3><p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-05_22-26-52.png"></p>
<p>(1ï¼‰åŠ è½½é©±åŠ¨<br>åŠ è½½JDBCé©±åŠ¨æ˜¯é€šè¿‡è°ƒç”¨æ–¹æ³•:</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Class</span>.forName(&quot;é©±åŠ¨åå­—&quot;)</span><br></pre></td></tr></table></figure>

<p>ä¾‹PostgreSQLæ•°æ®åº“é©±åŠ¨ç¨‹åºåŠ è½½è¯­å¥:</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Class</span>.forName (&quot;org.postgresql.Driver&quot;)</span><br></pre></td></tr></table></figure>

<p>(2ï¼‰å»ºç«‹è¿æ¥<br>è°ƒç”¨DriverManager. getConnection(String urI)æ–¹æ³•å»ºç«‹æ•°æ®åº“è¿æ¥ã€‚</p>
<p>ä¾‹ï¼šPostgreSQLæ•°æ®åº“è¿æ¥ç¨‹åº:</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line">String URL = &quot;jdbc: postgresql://localhost:5432/testdb&quot;;</span><br><span class="line">String userName = &quot;myuser &quot;;</span><br><span class="line">String <span class="keyword">passWord</span> = &quot;sa&quot;;</span><br><span class="line"><span class="keyword">connection</span> conn =</span><br><span class="line">DriverManager. getConnection(URL, userName, <span class="keyword">passWord</span>);</span><br></pre></td></tr></table></figure>

<p>(3)åˆ›å»ºStatementå¯¹è±¡<br>é‡‡ç”¨Connectionå¯¹è±¡çš„createStatement()æ–¹æ³•åˆ›å»ºStatementå¯¹è±¡ã€‚å…¶è¯­å¥å¦‚ä¸‹:<br>Statement stmt &#x3D; conn. createStatement () ;<br>(4ï¼‰æ‰§è¡ŒSQLè¯­å¥<br>åœ¨åˆ›å»ºStatementå¯¹è±¡åï¼Œå°±å¯ä»¥è°ƒç”¨Statementå¯¹è±¡çš„executeQuery()ã€executeUpdate()æ–¹æ³•æ‰§è¡ŒSQLè¯­å¥ã€‚</p>
<ul>
<li>executeQuery()ç”¨äºæ‰§è¡Œselectè¯­å¥</li>
<li>executeUpdate()ç”¨äºæ‰§è¡Œupdateã€ insertã€ deleteè¯­å¥</li>
</ul>
<p>ä¾‹:Statementå¯¹è±¡çš„SQLæ‰§è¡Œ</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Statement</span> stmt = conn.createStatement() ;</span><br><span class="line">String <span class="keyword">sql</span> = &quot;INSERT INTO public.student (sid,sname,gender,birthday,major,phone)&quot; + &quot;VALUES (&#x27;2017001&#x27;ï¼Œ&#x27;å¼ å±±&#x27;,&#x27;ç”·&#x27;,&#x27;1998-10-10&#x27;,&#x27;è½¯ä»¶å·¥ç¨‹&#x27;,&#x27;13602810001&#x27;)&quot;;</span><br><span class="line">stmt.executeUpdate(<span class="keyword">sql</span>) ;</span><br></pre></td></tr></table></figure>

<p>(5)ResultSetç»“æœé›†<br>ResultSetå¯¹è±¡ä½œä¸ºç»“æœé›†ï¼Œå®ƒå­˜æ”¾äº†æ‰§è¡ŒSQLè¯­å¥çš„è¿”å›ç»“æœæ•°æ®ã€‚é€šè¿‡getXXXæ–¹æ³•å¯ä»¥å¯¹ç»“æœé›†ä¸­çš„è®°å½•æ•°æ®è¿›è¡Œè®¿é—®ã€‚<br>ResultSetä¸­è‹¥åŒ…å«äº†å¤šè¡Œç»“æœæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨è®°å½•æŒ‡é’ˆè®¿é—®å®ƒä»¬ã€‚æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®è¡Œå«åšå½“å‰æ•°æ®è¡Œã€‚ç§»åŠ¨æŒ‡é’ˆå¯ä»¥è®¿é—®å…¶ä»–è¡Œï¼Œè¿™éœ€è¦ä½¿ç”¨ResultSetçš„next()æ–¹æ³•ã€‚<br>ç¤ºä¾‹ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line">rs = stmt.executeQuery (<span class="keyword">sql</span>) ;</span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;//ä¾æ¬¡å–å‡ºæ•°æ®</span><br><span class="line">	String <span class="type">name</span> = rs.getString(&quot;name&quot;) ; //å–å‡º<span class="type">name</span>åˆ—çš„å†…å®¹</span><br><span class="line">	<span class="type">int</span> age = rs.getlnt(&quot;age&quot;) ; //å–å‡ºageåˆ—çš„å†…å®¹</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(6ï¼‰å…³é—­è¿æ¥<br>ä½œä¸ºä¸€ç§å¥½çš„ç¼–ç¨‹é£æ ¼ï¼Œåœ¨ä¸éœ€è¦ResultSetå¯¹è±¡ã€Statementå¯¹è±¡å’ŒConnectionå¯¹è±¡æ—¶ï¼Œåº”è¯¥æ˜¾å¼åœ°å…³é—­å®ƒä»¬ã€‚å…³é—­è¿™äº›å¯¹è±¡çš„æ–¹æ³•ä¸º:close() ;<br>ç¤ºä¾‹:</p>
<blockquote>
<p>rs.close();å…³é—­ç»“æœé›†å¯¹è±¡</p>
<p>stmt.close();å…³é—­æ‰§è¡Œå¯¹è±¡</p>
<p>conn.close();å…³é—­è¿æ¥å¯¹è±¡</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_10-03-38.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_10-03-52.png"></p>
<p>Servletæ˜¯ç”¨Javaè¯­è¨€ç¼–å†™çš„æœåŠ¡å™¨ç«¯å°ç¨‹åºï¼Œé©»ç•™åœ¨webæœåŠ¡å™¨ä¸­è¿è¡Œï¼Œå®ƒæ‰©å±•äº†webæœåŠ¡å™¨çš„åŠ¨æ€å¤„ç†åŠŸèƒ½ã€‚</p>
<blockquote>
<p>1.å®¢æˆ·æœºå°†HTTPè¯·æ±‚å‘é€ç»™WebæœåŠ¡å™¨</p>
<p>2.Web æœåŠ¡å™¨å°†è¯¥è¯·æ±‚è½¬å‘ç»™Servlet</p>
<p>3.Servletå¤„ç†è¯¥è¯·æ±‚</p>
<p>4.Servletå°†å“åº”å‘é€ç»™Web æœåŠ¡å™¨</p>
<p>5.WebæœåŠ¡å™¨å°†å“åº”è½¬å‘ç»™å®¢æˆ·æœº</p>
</blockquote>
<h3 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹</h3><p>å­˜å‚¨è¿‡ç¨‹(Stored Procedureï¼‰æ˜¯æ•°æ®åº“ä¸­çš„ä¸€ç§å¯¹è±¡;ç”±ä¸€ç»„å®Œæˆç‰¹å®šæ•°æ®å¤„ç†åŠŸèƒ½çš„SQLè¯­å¥å’Œè¿‡ç¨‹è¯­å¥ç»„æˆçš„ç¨‹åº;å®ƒè¢«ç¼–è¯‘åï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­;å¤–éƒ¨ç¨‹åºå¯ä»¥è°ƒç”¨æ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œã€‚</p>
<p>PostgreSQLä½¿ç”¨CREATE FUNCTIONå‘½ä»¤åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€‚(10ç‰ˆæœ¬åå¯ä»¥ç”¨CREATE PRECEDURE)</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ <span class="keyword">OR REPLACE</span> ] <span class="keyword">FUNCTION</span>/<span class="keyword">PROCEDURE</span>  <span class="type">name</span></span><br><span class="line">    ( [ [ argmode ] [ argname ] argtype [ &#123; <span class="keyword">DEFAULT</span> | = &#125; default_expr ] [, ...] ] )</span><br><span class="line">    [ <span class="keyword">RETURNS</span> retype | <span class="keyword">RETURNS</span> <span class="keyword">TABLE</span> ( <span class="built_in">column_name</span>  column_type [, ...] ) ]</span><br><span class="line"><span class="keyword">AS</span> $$<span class="language-java">         <span class="comment">//$$</span></span>ç”¨äºå£°æ˜å­˜å‚¨è¿‡ç¨‹çš„å®é™…ä»£ç çš„å¼€å§‹</span><br><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">        <span class="comment">-- å£°æ˜æ®µ</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">        <span class="comment">--å‡½æ•°ä½“è¯­å¥</span></span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">$$<span class="language-ruby"> <span class="variable constant_">LANGUAGE</span> lang_name;  <span class="regexp">//</span><span class="variable">$$</span></span> è¡¨æ˜ä»£ç çš„ç»“æŸ, <span class="keyword">LANGUAGE</span>åé¢æŒ‡æ˜æ‰€ç”¨çš„ç¼–ç¨‹è¯­è¨€</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ1ï¼‰nameï¼šè¦åˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹åï¼›<br>ï¼ˆ2ï¼‰OR REPLACE ï¼šè¦†ç›–åŒåçš„å­˜å‚¨è¿‡ç¨‹ï¼›<br>ï¼ˆ3ï¼‰argmodeï¼šå­˜å‚¨è¿‡ç¨‹å‚æ•°çš„æ¨¡å¼å¯ä»¥ä¸ºINã€OUTæˆ–INOUTï¼Œç¼ºçœå€¼æ˜¯INã€‚<br>ï¼ˆ4ï¼‰argnameï¼šå½¢å¼å‚æ•°çš„åå­—ã€‚<br>ï¼ˆ5ï¼‰RETURNSï¼šè¿”å›å€¼ï¼›RETURNS TABLEï¼šè¿”å›äºŒç»´è¡¨</p>
<p>ä¾‹ï¼šåˆ›å»ºä¸€ä¸ªåä¸ºcountRecords()çš„è¿‡ç¨‹å‡½æ•°ç»Ÿè®¡STUDENTè¡¨çš„è®°å½•æ•°ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR REPLACE</span> <span class="keyword">FUNCTION</span> countRecords ()  </span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">integer</span> <span class="keyword">AS</span> $$<span class="language-pgsql">  </span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">declare</span>  </span></span><br><span class="line"><span class="language-pgsql">    count <span class="type">integer</span>;  </span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">BEGIN</span>  </span></span><br><span class="line"><span class="language-pgsql">   <span class="keyword">SELECT</span> count(*) <span class="keyword">into</span> count <span class="keyword">FROM</span> STUDENT;  </span></span><br><span class="line"><span class="language-pgsql">   <span class="keyword">RETURN</span> count;  </span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">END</span>;  </span></span><br><span class="line"><span class="language-pgsql">$$</span> <span class="keyword">LANGUAGE</span> plpgsql;</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ :åˆ›å»ºä¸€ä¸ªincrement(i)çš„è¿‡ç¨‹å‡½æ•°è®¡ç®—è‡ªå¢å€¼ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR REPLACE</span> <span class="keyword">FUNCTION</span> <span class="keyword">increment</span>(i integer)</span><br><span class="line">RETURNS integer AS $$</span><br><span class="line">BEGIN</span><br><span class="line">	RETURN i + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">$$<span class="language-pgsql"><span class="keyword">LANGUAGE</span> plpgsql;</span></span><br></pre></td></tr></table></figure>

<p>ä¾‹ï¼šåˆ›å»ºä¸€ä¸ªåä¸ºadd_data (a, bï¼Œcï¼‰çš„å­˜å‚¨è¿‡ç¨‹å®ç°a+bç›¸åŠ è¿ç®—ï¼Œå¹¶å°†ç»“æœæ”¾å…¥cã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR REPLACE</span> <span class="keyword">PROCEDURE</span> add_data(a <span class="type">integer</span>,b <span class="type">integer</span>,<span class="keyword">inout</span> c <span class="type">integer</span>)<span class="keyword">AS</span> $$<span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">Begin</span></span></span><br><span class="line"><span class="language-pgsql">	c=a+b;</span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">End</span>;</span></span><br><span class="line"><span class="language-pgsql">$$</span><span class="keyword">LANGUAGE</span> plpgsql;</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ :åˆ›å»ºä¸€ä¸ªincrement_pro(i)çš„å­˜å‚¨è¿‡ç¨‹è®¡ç®—è‡ªå¢å€¼ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR REPLACE</span> <span class="keyword">PROCEDURE</span> increment_pro(<span class="keyword">inout</span> i <span class="type">integer</span>)<span class="keyword">AS</span> $$<span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">BEGIN</span></span></span><br><span class="line"><span class="language-pgsql">	i=i+<span class="number">1</span>;</span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">Return</span>;</span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">END</span>;</span></span><br><span class="line"><span class="language-pgsql">$$</span><span class="keyword">LANGUAGE</span> plpgsql;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç¨‹åºå‘˜éœ€è¦è°ƒç”¨<strong>å‡½æ•°</strong>æ‰§è¡Œï¼Œå…¶è°ƒç”¨æ–¹å¼å¦‚ä¸‹:<br>select  å‡½æ•°å(å‚æ•°);<br>æˆ–è€…:select * from å‡½æ•°å(å‚æ•°);</p>
<p>å¦‚æœéœ€è¦è°ƒç”¨<strong>å­˜å‚¨è¿‡ç¨‹</strong>æ‰§è¡Œï¼Œå…¶è°ƒç”¨æ–¹å¼å¦‚ä¸‹:<br>CALLå­˜å‚¨è¿‡ç¨‹åï¼ˆå‚æ•°)</p>
<p>åˆ é™¤å­˜å‚¨è¿‡ç¨‹<br>DROP FUNCTION [ IF EXISTS ] name ( [ [ argmode ] [ argname ] argtype [, â€¦] ] ) [ CASCADE | RESTRICT ]<br>ä¸»è¦å‚æ•°ï¼š<br>ï¼ˆ1ï¼‰IF EXISTSï¼šå¦‚æœæŒ‡å®šçš„å­˜å‚¨è¿‡ç¨‹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå‘å‡ºæç¤ºä¿¡æ¯ã€‚<br>ï¼ˆ2ï¼‰name ï¼šç°å­˜çš„å­˜å‚¨è¿‡ç¨‹åç§°ã€‚<br>ï¼ˆ3ï¼‰argmodeï¼šå‚æ•°çš„æ¨¡å¼ï¼šIN(ç¼ºçœ), OUT, INOUT, VARIADICã€‚è¯·æ³¨æ„ï¼Œå®é™…å¹¶ä¸æ³¨æ˜OUTå‚æ•°ï¼Œå› ä¸ºåˆ¤æ–­å­˜å‚¨è¿‡ç¨‹çš„èº«ä»½åªéœ€è¦è¾“å…¥å‚æ•°ã€‚<br>ï¼ˆ4ï¼‰argnameï¼šå‚æ•°çš„åå­—ã€‚è¯·æ³¨æ„ï¼Œå®é™…ä¸Šå¹¶ä¸æ³¨æ˜å‚æ•°çš„åå­—ï¼Œå› ä¸ºåˆ¤æ–­å‡½æ•°çš„èº«ä»½åªéœ€è¦è¾“å…¥å‚æ•°çš„æ•°æ®ç±»å‹ã€‚<br>ï¼ˆ5ï¼‰argtypeï¼šå¦‚æœæœ‰çš„è¯ï¼Œæ˜¯å­˜å‚¨è¿‡ç¨‹å‚æ•°çš„ç±»å‹ã€‚<br>ï¼ˆ6ï¼‰CASCADEï¼šçº§è”åˆ é™¤ä¾èµ–äºå­˜å‚¨è¿‡ç¨‹çš„å¯¹è±¡(å¦‚è§¦å‘å™¨)ã€‚<br>ï¼ˆ7ï¼‰RESTRICTï¼šå¦‚æœæœ‰ä»»ä½•ä¾èµ–å¯¹è±¡å­˜åœ¨ï¼Œåˆ™æ‹’ç»åˆ é™¤è¯¥å‡½æ•°ï¼›è¿™ä¸ªæ˜¯ç¼ºçœå€¼ã€‚</p>
<p>åˆ é™¤å‰é¢å®šä¹‰çš„å‡½æ•°testExec()</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> testExec();</span><br></pre></td></tr></table></figure>

<p>ä¾‹åˆ é™¤å‰é¢å®šä¹‰çš„å­˜å‚¨è¿‡ç¨‹maintenance()</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> maintenance();</span><br></pre></td></tr></table></figure>

<h3 id="PL-pgSQLåŸºæœ¬è¯­æ³•"><a href="#PL-pgSQLåŸºæœ¬è¯­æ³•" class="headerlink" title="PL&#x2F;pgSQLåŸºæœ¬è¯­æ³•"></a>PL&#x2F;pgSQLåŸºæœ¬è¯­æ³•</h3><p>å˜é‡å£°æ˜çš„è¯­æ³•å¦‚ä¸‹ï¼š<br> declare<br>     å˜é‡å  å˜é‡ç±»å‹ï¼›<br>å¦‚æœå£°æ˜å˜é‡ä¸ºè®°å½•ç±»å‹ï¼Œå˜é‡å£°æ˜æ ¼å¼ä¸ºï¼š variable_name RECORD;<br>æ³¨ï¼šRECORDä¸æ˜¯çœŸæ­£çš„æ•°æ®ç±»å‹ï¼Œåªæ˜¯ä¸€ä¸ªå ä½ç¬¦ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> </span><br><span class="line">	count intger;</span><br><span class="line">    rec <span class="type">RECORD</span>;</span><br></pre></td></tr></table></figure>

<p>æ¡ä»¶è¯­å¥<br>åœ¨PL&#x2F;pgSQLä¸­æœ‰ä»¥ä¸‹ä¸‰ç§å½¢å¼çš„æ¡ä»¶è¯­å¥<br>1)IF-THEN </p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">IF</span> <span class="type">boolean</span>-expression <span class="keyword">THEN</span></span><br><span class="line">    statements</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>; </span><br></pre></td></tr></table></figure>

<p>2)IF-THEN-ELSE</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">IF</span> <span class="type">boolean</span>-expression <span class="keyword">THEN</span></span><br><span class="line">	statements</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">Statements</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br></pre></td></tr></table></figure>

<p> 3)IF-THEN-ELSIF-ELSE</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">IF</span> <span class="type">boolean</span>-expression <span class="keyword">THEN</span></span><br><span class="line">	statements</span><br><span class="line"><span class="keyword">ELSIF</span> <span class="type">boolean</span>-expression <span class="keyword">THEN</span></span><br><span class="line">	statements</span><br><span class="line"><span class="keyword">ELSIF</span> <span class="type">boolean</span>-expression <span class="keyword">THEN</span></span><br><span class="line">     statements</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">	statements</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>; </span><br></pre></td></tr></table></figure>

<p>å¾ªç¯è¯­å¥<br>1)LOOP è¯­å¥</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">LOOP</span></span><br><span class="line"> statements</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span> [ label ];</span><br></pre></td></tr></table></figure>

<p>2)EXIT</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">LOOP</span></span><br><span class="line">	count=count+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">EXIT</span> <span class="keyword">WHEN</span> count &gt;<span class="number">100</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br></pre></td></tr></table></figure>

<p>3)CONTINUE</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">LOOP</span></span><br><span class="line"> 	count=count+<span class="number">1</span>;</span><br><span class="line"> 	<span class="keyword">EXIT</span> <span class="keyword">WHEN</span> count &gt; <span class="number">100</span>;</span><br><span class="line"> 	<span class="keyword">CONTINUE</span> <span class="keyword">WHEN</span> count &lt; <span class="number">50</span>;</span><br><span class="line"> 	count=count+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>; </span><br></pre></td></tr></table></figure>

<p> 4)WHILE</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WHILE</span> amount_owed &gt; <span class="number">0</span> <span class="keyword">AND</span>  balance &gt; <span class="number">0</span> <span class="keyword">LOOP</span></span><br><span class="line">    <span class="comment">--do something</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br></pre></td></tr></table></figure>

<p>5)FOR</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FOR</span> i <span class="keyword">IN</span> <span class="number">1.</span>.<span class="number">.10</span> <span class="keyword">LOOP</span></span><br><span class="line">	<span class="keyword">RAISE</span> <span class="keyword">NOTICE</span> <span class="string">&#x27;i IS %&#x27;</span>,i;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br><span class="line"><span class="keyword">FOR</span> i <span class="keyword">IN</span> <span class="keyword">REVERSE</span> <span class="number">10.</span>.<span class="number">.1</span>  <span class="keyword">LOOP</span></span><br><span class="line">      <span class="comment">--do something</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br></pre></td></tr></table></figure>

<p>éå†æŸ¥è¯¢ç»“æœé›†</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FOR</span> record_or_row <span class="keyword">IN</span> query <span class="keyword">LOOP</span></span><br><span class="line">     statements</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span> ;</span><br></pre></td></tr></table></figure>

<p>FORå¾ªç¯å¯ä»¥éå†å‘½ä»¤çš„ç»“æœå¹¶æ“ä½œç›¸åº”çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼š</p>
<p>ç¼–å†™å‡½æ•°å®ç°å¯¹å­¦ç”Ÿè¡¨Studentçš„æŸ¥è¯¢ç»“æœé›†æ•°æ®è¾“å‡º</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> Out_Record() <span class="keyword">returns</span> <span class="type">RECORD</span> <span class="keyword">as</span> $$<span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">declare</span> </span></span><br><span class="line"><span class="language-pgsql">	rec <span class="type">RECORD</span>;</span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">FOR</span> rec <span class="keyword">IN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">LOOP</span></span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">raise</span> <span class="keyword">notice</span> <span class="string">&#x27;å­¦ç”Ÿæ•°æ®: %,%&#x27;</span>,rec.studentID,rec.studentName; </span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">return</span> rec;</span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">end</span>;</span></span><br><span class="line"><span class="language-pgsql">$$</span> <span class="keyword">language</span> plpgsql;</span><br></pre></td></tr></table></figure>

<h3 id="è§¦å‘å™¨"><a href="#è§¦å‘å™¨" class="headerlink" title="è§¦å‘å™¨"></a>è§¦å‘å™¨</h3><p>è§¦å‘å™¨æ˜¯ç‰¹æ®Šç±»å‹çš„å­˜å‚¨è¿‡ç¨‹ï¼Œå…¶è¿‡ç¨‹ç¨‹åºç”±äº‹ä»¶(å¦‚INSERTã€UPDATEã€DELETEæ“ä½œç­‰ï¼‰è§¦å‘è€Œè‡ªåŠ¨æ‰§è¡Œã€‚</p>
<p>è§¦å‘å™¨ç”¨é€”:å¯ä»¥å®ç°æ¯”çº¦æŸæ›´å¤æ‚çš„æ•°æ®å®Œæ•´æ€§ï¼Œç»å¸¸ç”¨äºåŠ å¼ºæ•°æ®çš„å®Œæ•´æ€§çº¦æŸå’Œ	ä¸šåŠ¡è§„åˆ™ã€‚</p>
<p>è§¦å‘å™¨ç‰¹ç‚¹</p>
<ul>
<li>ä¸æ•°æ®åº“å¯¹è±¡ç›¸å…³:åœ¨è¡¨æˆ–è§†å›¾ä¸Šæ‰§è¡ŒDMLã€DDLæ“ä½œï¼Œå…¶å®šä¹‰çš„äº‹ä»¶è§¦å‘<br>è¿‡ç¨‹ç¨‹åºæ‰§è¡Œã€‚</li>
<li>DMLäº‹ä»¶è§¦å‘:ç”±æ‰§è¡ŒINSERTã€DELETEã€UPDATEæ“ä½œæ—¶è§¦å‘ã€‚</li>
<li>DDLäº‹ä»¶è§¦å‘:ç”±æ‰§è¡ŒCRETEã€ALTERã€DROPã€SELECT INTOæ“ä½œæ—¶è§¦å‘ã€‚</li>
</ul>
<p>æŒ‰DMLæ“ä½œè¯­å¥åˆ†ç±»: INSERTè§¦å‘å™¨ã€DELETEè§¦å‘å™¨ã€UPDATEè§¦å‘å™¨<br>æŒ‰è§¦å‘å™¨æ‰§è¡Œæ¬¡æ•°åˆ†ç±»:</p>
<blockquote>
<p>(1ï¼‰è¯­å¥çº§è§¦å‘å™¨:ç”±å…³é”®å­—FOR EACH STATEMENTå£°æ˜ï¼Œåœ¨è§¦å‘å™¨ä½œç”¨çš„è¡¨ä¸Šæ‰§è¡Œä¸€æ¡SQLè¯­å¥æ—¶ï¼Œè¯¥è§¦å‘å™¨ç¨‹åºåªæ‰§è¡Œä¸€æ¬¡ï¼Œå³ä½¿æ˜¯ä¿®æ”¹äº†é›¶è¡Œæ•°æ®çš„SQLï¼Œä¹Ÿä¼šå¯¼è‡´ç›¸åº”çš„è§¦å‘å™¨æ‰§è¡Œã€‚FOR EACH STATEMENTä¸ºé»˜è®¤å€¼ã€‚</p>
<p>(2ï¼‰è¡Œçº§è§¦å‘å™¨:ç”±å…³é”®å­—FOR EACH ROWæ ‡è®°çš„è§¦å‘å™¨ï¼Œå½“è§¦å‘å™¨æ‰€åœ¨è¡¨ä¸­æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ¯å˜åŒ–ä¸€è¡Œå°±ä¼šæ‰§è¡Œä¸€æ¬¡è§¦å‘å™¨ç¨‹åºã€‚</p>
</blockquote>
<p>ä¾‹ï¼šå­¦ç”Ÿæˆç»©è¡¨ä¸Šå®šä¹‰äº†è¡Œçº§DELETEè§¦å‘å™¨ã€‚å¦‚æœè¯¥è¡¨åˆ é™¤äº†20æ¡è®°å½•ï¼Œåˆ™å°†å¯¼è‡´DELETEè§¦å‘å™¨ç¨‹åºè¢«æ‰§è¡Œ20æ¬¡ã€‚</p>
<p>æŒ‰è§¦å‘çš„æ—¶é—´åˆ†ç±»:</p>
<blockquote>
<p>(1ï¼‰BEFOREè§¦å‘å™¨:åœ¨è§¦å‘äº‹ä»¶ä¹‹å‰æ‰§è¡Œè§¦å‘å™¨ç¨‹åºã€‚<br>(2ï¼‰AFTERè§¦å‘å™¨:åœ¨è§¦å‘äº‹ä»¶ä¹‹åæ‰§è¡Œè§¦å‘å™¨ç¨‹åºã€‚<br>(3ï¼‰INSTEAD OFè§¦å‘å™¨:å½“è§¦å‘äº‹ä»¶å‘ç”Ÿåï¼Œæ‰§è¡Œè§¦å‘å™¨ä¸­æŒ‡å®šçš„è¿‡ç¨‹ç¨‹åºï¼Œè€Œä¸æ˜¯æ‰§è¡Œäº§ç”Ÿè§¦å‘äº‹ä»¶çš„SQLè¯­å¥ã€‚</p>
</blockquote>
<p>è§¦å‘å™¨ç›¸å…³çš„ç‰¹æ®Šå˜é‡</p>
<p>1ï¼‰NEW æ•°æ®ç±»å‹æ˜¯RECORDã€‚å¯¹äºè¡Œçº§è§¦å‘å™¨ï¼Œå®ƒå­˜æœ‰INSERTæˆ–UPDATEæ“ä½œäº§ç”Ÿçš„æ–°çš„æ•°æ®è¡Œã€‚å¯¹äºè¯­å¥çº§è§¦å‘å™¨ï¼Œå®ƒçš„å€¼æ˜¯NULLã€‚</p>
<p>2ï¼‰OLD æ•°æ®ç±»å‹æ˜¯RECORDã€‚å¯¹äºè¡Œçº§è§¦å‘å™¨ï¼Œå®ƒå­˜æœ‰è¢«UPDATEæˆ–DELETEæ“ä½œä¿®æ”¹æˆ–åˆ é™¤çš„æ—§çš„æ•°æ®è¡Œã€‚å¯¹äºè¯­å¥çº§è§¦å‘å™¨ï¼Œå®ƒçš„å€¼æ˜¯NULLã€‚</p>
<p>3ï¼‰TG_OP æ•°æ®ç±»å‹æ˜¯textï¼›æ˜¯å€¼ä¸ºINSERTã€UPDATEã€DELETE çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒè¯´æ˜è§¦å‘å™¨æ˜¯ä¸ºå“ªä¸ªæ“ä½œå¼•å‘ã€‚</p>
<p>åˆ›å»ºè§¦å‘å™¨çš„åŸºæœ¬è¯­æ³•</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TRIGGER</span>  è§¦å‘å™¨å   </span><br><span class="line">    &#123; <span class="keyword">BEFORE</span> | <span class="keyword">AFTER</span> | <span class="keyword">INSTEAD</span> <span class="keyword">OF</span> &#125;</span><br><span class="line">     <span class="keyword">ON</span> è¡¨å</span><br><span class="line">     [ <span class="keyword">FOR</span> [ <span class="keyword">EACH</span> ] &#123; <span class="keyword">ROW</span> | <span class="keyword">STATEMENT</span> &#125; ]</span><br><span class="line">     <span class="keyword">EXECUTE</span> <span class="keyword">PROCEDURE</span> å­˜å‚¨è¿‡ç¨‹å ( å‚æ•°åˆ—è¡¨ )</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ1ï¼‰æŒ‡æ˜æ‰€å®šä¹‰çš„è§¦å‘å™¨å<br>ï¼ˆ2ï¼‰ BEFORE | AFTER | INSTEAD OF  æŒ‡æ˜è§¦å‘å™¨è¢«è§¦å‘çš„æ—¶é—´<br>ï¼ˆ3ï¼‰ ON è¡¨å æŒ‡æ˜è§¦å‘å™¨æ‰€ä¾é™„çš„è¡¨<br>ï¼ˆ4ï¼‰ FOR  EACH  { ROW | STATEMENT }  æŒ‡æ˜è§¦å‘å™¨æ˜¯è¡Œçº§è¿˜æ˜¯åˆ—çº§<br>ï¼ˆ5ï¼‰ EXECUTE PROCEDURE å­˜å‚¨è¿‡ç¨‹å ( å‚æ•°åˆ—è¡¨ )  æŒ‡æ˜è§¦å‘æ—¶æ‰€æ‰§è¡Œçš„å­˜å‚¨è¿‡ç¨‹</p>
<p>åˆ›å»ºè§¦å‘å™¨çš„åŸºæœ¬æ­¥éª¤</p>
<p>ï¼ˆ1ï¼‰æ£€æŸ¥æ•°æ®åº“ä¸­å°†è¦åˆ›å»ºçš„è§¦å‘å™¨æ‰€ä¾é™„çš„è¡¨æˆ–è§†å›¾æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå¿…é¡»é¦–å…ˆåˆ›å»ºè¯¥è¡¨æˆ–è§†å›¾ã€‚</p>
<p>ï¼ˆ2ï¼‰åˆ›å»ºè§¦å‘å™¨è¢«è§¦å‘æ—¶æ‰€è¦æ‰§è¡Œçš„è§¦å‘å™¨å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ç±»å‹å¿…é¡»æ˜¯Triggerå‹ï¼Œæ˜¯è§¦å‘å™¨çš„æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>ï¼ˆ3ï¼‰åˆ›å»ºè§¦å‘å™¨ï¼Œå®šä¹‰è§¦å‘å™¨ä¾é™„çš„è¡¨ï¼Œè§¦å‘å™¨è¢«è§¦å‘æ‰§è¡Œçš„æ—¶é—´ï¼Œè§¦å‘å™¨æ˜¯è¡Œçº§è§¦å‘å™¨è¿˜æ˜¯è¯­å¥çº§è§¦å‘å™¨ï¼Œè§¦å‘å™¨æ‰§è¡Œéœ€è¦æ»¡è¶³çš„æ¡ä»¶ã€‚</p>
<p>ä¸ºäº†å®¡è®¡Gradeè¡¨çš„è¯¾ç¨‹æˆç»©ä¿®æ”¹ï¼Œåˆ›å»ºaudit_scoreè¡¨è®°å½•Gradeè¡¨çš„æˆç»©å˜åŒ–ï¼Œå…¶è¡¨ç»“æ„å¦‚ä¸‹:</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> audit_score( </span><br><span class="line">    changeID <span class="type">serial</span> <span class="keyword">not</span> <span class="keyword">null</span>,						<span class="comment">--ä¿®æ”¹åºåˆ—å·</span></span><br><span class="line">	username <span class="type">character</span>(<span class="number">20</span>),							<span class="comment">--æ“ä½œç”¨æˆ·</span></span><br><span class="line">	sid	<span class="type">character</span>(<span class="number">13</span>),								<span class="comment">--å­¦å·</span></span><br><span class="line">	cid	<span class="type">character</span>(<span class="number">4</span>),								<span class="comment">--è¯¾ç¨‹ç¼–å·</span></span><br><span class="line">	updatetime <span class="type">text</span>,								<span class="comment">--ä¿®æ”¹çš„æ—¶é—´</span></span><br><span class="line">	oldscore <span class="type">int</span>,									<span class="comment">--ä¿®æ”¹å‰çš„æˆç»©</span></span><br><span class="line">	newscore <span class="type">int</span>,									<span class="comment">--ä¿®æ”¹åçš„æˆç»©</span></span><br><span class="line">	<span class="keyword">constraint</span> changeID_PK <span class="keyword">primary key</span> (changeID)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºè§¦å‘å™¨å‡½æ•°</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or replace</span> <span class="keyword">function</span> score_audit() </span><br><span class="line"><span class="keyword">returns</span> <span class="type">trigger</span> <span class="keyword">as</span> $score_audit$</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">TG_OP</span> == <span class="string">&#x27;DELETE&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">insert</span> <span class="keyword">into</span> audit_score(username,sid,cid,updatetime,oldscore)</span><br><span class="line">		<span class="keyword">select</span> <span class="keyword">user</span>,<span class="built_in">old</span>.studentid,<span class="built_in">old</span>.couseid,now(),<span class="built_in">old</span>.score;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">old</span>;</span><br><span class="line">	<span class="keyword">elsif</span> (<span class="built_in">TG_OP</span> == <span class="string">&#x27;UPDATE&#x27;</span>) <span class="keyword">then</span> </span><br><span class="line">		<span class="keyword">insert</span> <span class="keyword">into</span> audit_score(username,sid,cid,updatetime,oldscore,newscore)</span><br><span class="line">		<span class="keyword">select</span> <span class="keyword">user</span>,<span class="built_in">old</span>.studentid,<span class="built_in">old</span>.couseid,now(),<span class="built_in">old</span>.score,<span class="built_in">new</span>.score</span><br><span class="line">		<span class="keyword">where</span> <span class="built_in">old</span>.studentid = <span class="built_in">new</span>.sid <span class="keyword">and</span> <span class="built_in">old</span>.courseid = <span class="built_in">new</span>.cid;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">new</span>;</span><br><span class="line">	<span class="keyword">elsif</span> (<span class="built_in">TG_OP</span> == <span class="string">&#x27;INSERT&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">insert</span> <span class="keyword">into</span> audit_score(username,sid,cid,updatetime,oldscore,newscore)</span><br><span class="line">		<span class="keyword">select</span> <span class="keyword">user</span>,<span class="built_in">new</span>.studentid,<span class="built_in">new</span>.courseid,now(),<span class="keyword">null</span>,<span class="built_in">new</span>.score;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">new</span>;</span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">$score_audit$ <span class="keyword">language</span> plpgsql</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºè§¦å‘å™¨</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> score_audit_triger</span><br><span class="line"><span class="keyword">AFTER</span> <span class="keyword">INSERT</span> <span class="keyword">OR</span> <span class="keyword">UPDATE</span> <span class="keyword">OR</span> <span class="keyword">DELETE</span> <span class="keyword">ON</span> grade</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">EXECUTE</span> <span class="keyword">PROCEDURE</span> score_audit();</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ :åœ¨å¦‚ä¸‹é›‡å‘˜è¡¨empä¸­è¢«æ’å…¥æˆ–æ›´æ–°ä¸€è¡Œæ•°æ®æ—¶ï¼Œè§¦å‘å‡½æ•°ç¨‹åºå°†å½“å‰ç”¨æˆ·åå’Œæ—¶é—´æ ‡è®°åœ¨è¯¥æ•°æ®è¡Œä¸­,å¹¶ä¸”æ£€æŸ¥é›‡å‘˜çš„å§“åä»¥åŠè–ªæ°´æ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºï¼Œè¾“å‡ºè­¦ç¤ºä¿¡æ¯ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp (</span><br><span class="line">	emplD <span class="type">char</span>(<span class="number">3</span>) <span class="keyword">primary key</span>,</span><br><span class="line">    empname <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">	salary <span class="type">integer</span>,</span><br><span class="line">	last_date <span class="type">timestamp</span>,</span><br><span class="line">    last_user <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>1.è§¦å‘å™¨å‡½æ•°ç¨‹åº</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> emp_stamp ()<span class="keyword">RETURNS</span> <span class="type">trigger</span> <span class="keyword">AS</span> $$<span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">BEGIN</span></span></span><br><span class="line"><span class="language-pgsql">		<span class="comment">--æ£€æŸ¥ç»™å‡ºäº†empnameä»¥åŠsalary</span></span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">IF</span> <span class="built_in">NEW</span>.empname <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span></span></span><br><span class="line"><span class="language-pgsql">			<span class="keyword">RAISE</span> <span class="keyword">EXCEPTION</span> <span class="string">&#x27;é›‡å‘˜åä¸èƒ½ä¸ºç©º&#x27;</span>;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">END</span> <span class="keyword">IF</span>;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">IF</span> <span class="built_in">NEW</span>.salary <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span></span></span><br><span class="line"><span class="language-pgsql">			<span class="keyword">RAISE</span> <span class="keyword">EXCEPTION</span> <span class="string">&#x27;%è–ªæ°´ä¸èƒ½ä¸ºç©º&#x27;</span>,<span class="built_in">NEW</span>.empname;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">END</span> <span class="keyword">IF</span>;</span></span><br><span class="line"><span class="language-pgsql">			<span class="comment">--è®°ä½è°åœ¨ä»€ä¹ˆæ—¶å€™æ”¹å˜äº†å·¥èµ„å•</span></span></span><br><span class="line"><span class="language-pgsql">		<span class="built_in">NEW</span>.last_date := <span class="built_in">current_timestamp</span>;</span></span><br><span class="line"><span class="language-pgsql">		<span class="built_in">NEW</span>.last_user := <span class="built_in">current_user</span>;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">RETURN</span> <span class="built_in">NEW</span>;</span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">END</span>;</span></span><br><span class="line"><span class="language-pgsql">$$</span> <span class="keyword">LANGUAGE</span> plpgsql ;</span><br></pre></td></tr></table></figure>

<p>2.è§¦å‘å™¨å®šä¹‰ç¨‹åº</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> emp_stamp</span><br><span class="line"><span class="keyword">BEFORE</span> <span class="keyword">INSERT</span> <span class="keyword">OR</span> <span class="keyword">UPDATE</span> <span class="keyword">ON</span> emp</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">EXECUTE</span> <span class="keyword">FUNCTION</span> emp_stamp();</span><br></pre></td></tr></table></figure>

<p>è§¦å‘å™¨ä¿®æ”¹</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TRIGGER</span> <span class="type">name</span> <span class="keyword">ON</span> <span class="built_in">table_name</span> <span class="keyword">RENAME</span> <span class="keyword">TO</span> new_name</span><br></pre></td></tr></table></figure>

<p>ä¸»è¦å‚æ•°è¯´æ˜ï¼š<br>ï¼ˆ1ï¼‰nameï¼šç°æœ‰è§¦å‘å™¨çš„åç§°ã€‚<br>ï¼ˆ2ï¼‰table_nameï¼šè¯¥è§¦å‘å™¨ä½œç”¨çš„è¡¨åå­—ã€‚<br>ï¼ˆ3ï¼‰new_nameï¼šè§¦å‘å™¨çš„æ–°åå­—ã€‚</p>
<p>ä¾‹å¦‚ï¼šå°†ä¸Šè¿°å®šä¹‰çš„è§¦å‘å™¨æ”¹åä¸ºscore_audit_trig</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TRIGGER</span> score_audit_trigger <span class="keyword">ON</span> stu_score  <span class="keyword">RENAME</span> <span class="keyword">TO</span> score_audit_trig;</span><br></pre></td></tr></table></figure>

<p>è§¦å‘å™¨åˆ é™¤</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> [ <span class="keyword">IF</span> <span class="keyword">EXISTS</span> ] <span class="type">name</span> <span class="keyword">ON</span> <span class="built_in">table_name</span> [ <span class="keyword">CASCADE</span> | <span class="keyword">RESTRICT</span> ]</span><br></pre></td></tr></table></figure>
<p>ä¸»è¦å‚æ•°è¯´æ˜ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰IF EXISTSï¼šå¦‚æœæŒ‡å®šçš„è§¦å‘å™¨ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå‘å‡ºæç¤ºè€Œä¸æ˜¯æŠ›å‡ºé”™è¯¯ã€‚<br>ï¼ˆ2ï¼‰nameï¼šè¦åˆ é™¤çš„è§¦å‘å™¨åã€‚<br>ï¼ˆ3ï¼‰table_nameï¼šè§¦å‘å™¨å®šä¹‰æ‰€ä¾é™„çš„è¡¨çš„åç§°ã€‚<br>ï¼ˆ5ï¼‰CASCADEï¼šçº§è”åˆ é™¤ä¾èµ–æ­¤è§¦å‘å™¨çš„å¯¹è±¡ã€‚<br>ï¼ˆ6ï¼‰RESTRICTï¼šå¦‚æœæœ‰ä¾èµ–å¯¹è±¡å­˜åœ¨ï¼Œé‚£ä¹ˆæ‹’ç»åˆ é™¤ã€‚è¯¥å‚æ•°ç¼ºçœæ˜¯æ‹’ç»åˆ é™¤ã€‚</p>
</blockquote>
<p> ä¾‹å¦‚ï¼šå°†ä¸Šè¿°è§¦å‘å™¨score_audit_trigåˆ é™¤ï¼ŒåŒæ—¶<em>çº§è”åˆ é™¤</em>ä¾èµ–è§¦å‘å™¨çš„å¯¹è±¡ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> score_audit_trig <span class="keyword">ON</span> grade <span class="keyword">CASCADE</span>;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸¸æ ‡"><a href="#æ¸¸æ ‡" class="headerlink" title="æ¸¸æ ‡"></a>æ¸¸æ ‡</h3><ul>
<li>æ¸¸æ ‡ï¼ˆCursorï¼‰æ˜¯ä¸€ç§ä¸´æ—¶çš„æ•°æ®åº“å¯¹è±¡ï¼›</li>
<li>ç”¨æ¥å­˜æ”¾ä»æ•°æ®åº“è¡¨ä¸­æŸ¥è¯¢è¿”å›çš„æ•°æ®è®°å½•ï¼›</li>
<li>æä¾›äº†ä»ç»“æœé›†ä¸­æå–å¹¶åˆ†åˆ«å¤„ç†æ¯ä¸€æ¡è®°å½•çš„æœºåˆ¶ï¼›</li>
<li>æ¸¸æ ‡æ€»æ˜¯ä¸ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥ç›¸å…³è”ï¼›</li>
<li>æ¸¸æ ‡åŒ…æ‹¬ï¼šSQLè¯­è¨€çš„æŸ¥è¯¢ç»“æœï¼ŒæŒ‡å‘ç‰¹å®šè®°å½•çš„æŒ‡é’ˆã€‚</li>
</ul>
<p>å£°æ˜æ¸¸æ ‡</p>
<blockquote>
<p>ä½¿ç”¨refcursorå…³é”®è¯å®šä¹‰çš„æ¸¸æ ‡å˜é‡</p>
<p>ä½¿ç”¨æ¸¸æ ‡å£°æ˜è¯­å¥å®šä¹‰æ¸¸æ ‡<br>æ¸¸æ ‡å	CURSOR [ ( arguments ) ] FOR query</p>
</blockquote>
<p>ä¾‹ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Declare</span></span><br><span class="line">curs	<span class="type">refcursor</span>;</span><br><span class="line">curStudent <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student;</span><br><span class="line">curStudentOne <span class="keyword">CURSOR</span> (key <span class="type">integer</span>)  <span class="keyword">IS</span> </span><br><span class="line">            <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> SID = key;</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€æ¸¸æ ‡<br>ï¼ˆ1ï¼‰OPEN FOR:<br>æ‰“å¼€æœªç»‘å®šçš„æ¸¸æ ‡å˜é‡ï¼Œå…¶queryæŸ¥è¯¢è¯­å¥æ˜¯è¿”å›è®°å½•çš„SELECTè¯­å¥ã€‚ä¾‹å¦‚ï¼š </p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">OPEN</span> curVars1 <span class="keyword">FOR</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> SID = mykey;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰OPEN FOR EXECUTE</p>
<p>æ‰“å¼€æœªç»‘å®šçš„æ¸¸æ ‡å˜é‡ã€‚EXECUTEå°†åŠ¨æ€æ‰§è¡ŒæŸ¥è¯¢å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">OPEN</span> curVars1 <span class="keyword">FOR</span> <span class="keyword">EXECUTE</span> <span class="string">&#x27;SELECT * FROM &#x27;</span> || quote_ident(<span class="meta">$1</span>);</span><br></pre></td></tr></table></figure>

<p>â€‹    æ³¨æ„ï¼š$1æ˜¯æŒ‡ç”±å­˜å‚¨è¿‡ç¨‹ä¼ é€’çš„ç¬¬1ä¸ªå‚æ•°ã€‚<br>ï¼ˆ3ï¼‰æ‰“å¼€ç»‘å®šæ¸¸æ ‡<br>ä»…é€‚ç”¨äºç»‘å®šçš„æ¸¸æ ‡å˜é‡ï¼Œåªæœ‰å½“è¯¥å˜é‡åœ¨å£°æ˜æ—¶åŒ…å«æ¥æ”¶å‚æ•°ï¼Œæ‰èƒ½ä»¥ä¼ é€’å‚æ•°çš„å½¢å¼æ‰“å¼€è¯¥æ¸¸æ ‡ï¼Œå‚æ•°å°†ä¼ å…¥åˆ°æ¸¸æ ‡å£°æ˜çš„æŸ¥è¯¢è¯­å¥ä¸­ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">OPEN</span> curStudent;</span><br><span class="line"><span class="keyword">OPEN</span> curStudentOne (<span class="string">&#x27;20160230302001&#x27;</span>); </span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ¸¸æ ‡æå–å€¼<br>FETCHå‘½ä»¤ä»æ¸¸æ ‡ä¸­è¯»å–å½“å‰æŒ‡é’ˆæ‰€æŒ‡å‘è®°å½•çš„æ•°æ®åˆ°ç›®æ ‡ä¸­ã€‚å¯é€šè¿‡PL&#x2F;pgSQLå†…ç½®çš„ç³»ç»Ÿå˜é‡FOUNDæ¥åˆ¤æ–­è¯»å–æ˜¯å¦æˆåŠŸã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FETCH</span> curVars1 <span class="keyword">INTO</span> rowvar;  <span class="comment">--rowvarä¸ºè¡Œå˜é‡</span></span><br><span class="line"><span class="keyword">FETCH</span> curStudent <span class="keyword">INTO</span> SID, Sname, sex;</span><br></pre></td></tr></table></figure>

<p>â€‹    â€“è¯·æ³¨æ„ï¼šæ¸¸æ ‡çš„å±æ€§åˆ—å¿…é¡»ä¸ ç›®æ ‡åˆ—çš„æ•°é‡ä¸€è‡´ï¼Œå¹¶ä¸”ç±»å‹å…¼å®¹ã€‚<br>å…³é—­æ¸¸æ ‡<br>å½“æ¸¸æ ‡æ•°æ®ä¸å†éœ€è¦æ—¶ï¼Œéœ€è¦å…³é—­æ¸¸æ ‡ï¼Œä»¥é‡Šæ”¾å…¶å æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œä¸»è¦æ˜¯é‡Šæ”¾æ¸¸æ ‡æ•°æ®æ‰€å ç”¨çš„å†…å­˜èµ„æº</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CLOSE</span> cursorName; </span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„ï¼šå½“æ¸¸æ ‡è¢«å…³é—­åï¼Œå¦‚æœéœ€è¦å†æ¬¡è¯»å–æ¸¸æ ‡çš„æ•°æ®ï¼Œéœ€è¦é‡æ–°ä½¿ç”¨openæ‰“å¼€æ¸¸æ ‡ï¼Œè¿™æ—¶æ¸¸æ ‡é‡æ–°æŸ¥è¯¢è¿”å›æ–°çš„ç»“æœã€‚</p>
<p>ä¾‹ï¼šåœ¨å‡½æ•°ä¸­ä½¿ç”¨æ¸¸æ ‡æŸ¥è¯¢studentè¡¨çš„å­¦å·ã€å­¦ç”Ÿå§“åå’Œæ€§åˆ«ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or replace</span> <span class="keyword">function</span> cursorDemo()</span><br><span class="line"><span class="keyword">returns</span> <span class="type">boolean</span> <span class="keyword">as</span> $$<span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">declare</span></span></span><br><span class="line"><span class="language-pgsql">	unbound_refcursor <span class="type">refcursor</span>;</span></span><br><span class="line"><span class="language-pgsql">	vsid <span class="type">varchar</span>;</span></span><br><span class="line"><span class="language-pgsql">	vsname <span class="type">varchar</span>;</span></span><br><span class="line"><span class="language-pgsql">	vsgender <span class="type">varchar</span>;</span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">begin</span></span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">open</span> unbound_refcursor <span class="keyword">for</span> <span class="keyword">execute</span> <span class="string">&#x27;select sid,sname,sex from 	student&#x27;</span>;</span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">loop</span></span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">fetch</span> unbound_refcursor <span class="keyword">into</span> vsid,vsname,vsgender;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">if</span> <span class="built_in">found</span> <span class="keyword">then</span></span></span><br><span class="line"><span class="language-pgsql">			<span class="keyword">raise</span> <span class="keyword">notice</span> <span class="string">&#x27;%,%,%&#x27;</span>,vsid,vsname,vsgender;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">else</span></span></span><br><span class="line"><span class="language-pgsql">			<span class="keyword">exit</span>;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">end</span> <span class="keyword">if</span>;</span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">end</span> <span class="keyword">loop</span>;</span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">close</span> unbound_refcursor;</span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">raise</span> <span class="keyword">notice</span> <span class="string">&#x27;å–æ•°æ®å¾ªç¯ç»“æŸ...&#x27;</span>;</span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">return</span> <span class="keyword">true</span>;</span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">end</span>;</span></span><br><span class="line"><span class="language-pgsql">$$</span> <span class="keyword">language</span> plpgsql;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> cursorDemo();</span><br></pre></td></tr></table></figure>

<p>ä¾‹ï¼šç¼–å†™å¸¦å‚æ•°çš„æ¸¸æ ‡å‡½æ•°ï¼Œä»æˆç»©è¡¨ä¸­æŸ¥è¯¢åˆ†æ•°å¤§äºæŸç»™å®šå€¼çš„å­¦å·å’Œè¯¾ç¨‹å·ã€‚</p>
<figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or replace</span> <span class="keyword">function</span> cusorGrade(myscore <span class="type">int</span>)<span class="keyword">returns</span> <span class="type">void</span> <span class="keyword">as</span> $$<span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">declare</span></span></span><br><span class="line"><span class="language-pgsql">		vstuscore Grade<span class="meta">%ROWTYPE</span>;		<span class="comment">--å£°æ˜ä¸è¡¨Gradeç»“æ„ç›¸åŒçš„è¡Œå˜é‡</span></span></span><br><span class="line"><span class="language-pgsql">		vstucursor <span class="keyword">cursor</span>(invalue <span class="type">int</span>)</span></span><br><span class="line"><span class="language-pgsql">			<span class="keyword">for</span> <span class="keyword">select</span> courseid,studentid,grade <span class="keyword">from</span> Grade <span class="keyword">where</span> 	grade&gt;=invalue <span class="keyword">order</span> <span class="keyword">by</span></span></span><br><span class="line"><span class="language-pgsql">studentid;								<span class="comment">--å£°æ˜å¸¦æœ‰è¾“å…¥å‚æ•°çš„æ¸¸æ ‡</span></span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">begin</span></span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">open</span> vstucursor (myscore);			<span class="comment">--æ‰“å¼€å¸¦æœ‰å‚æ•°çš„æ¸¸æ ‡</span></span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">loop</span></span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">fetch</span> vstucursor <span class="keyword">into</span> vstuscore;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">exit</span> <span class="keyword">when</span> <span class="keyword">not</span> <span class="built_in">found</span> ;			<span class="comment">--å‡å¦‚æ²¡æœ‰æ£€ç´¢åˆ°è®°å½•ï¼Œç»“æŸå¾ªç¯å¤„ç†</span></span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">raise</span> <span class="keyword">notice</span> <span class="string">&#x27;%,%,%&#x27;</span>, vstuscore.studentid,vstuscore.courseid,vstuscore.grade;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">end</span> <span class="keyword">loop</span>;</span></span><br><span class="line"><span class="language-pgsql">		<span class="keyword">close</span> vstucursor ;				<span class="comment">--å…³é—­æ¸¸æ ‡</span></span></span><br><span class="line"><span class="language-pgsql">	<span class="keyword">end</span>;</span></span><br><span class="line"><span class="language-pgsql">$$</span> <span class="keyword">language</span> plpgsql;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å­˜å‚¨è¿‡ç¨‹å’Œè§¦å‘å™¨çš„åŒºåˆ«æœ‰:å­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡‡ç”¨è¾“å…¥å‚æ•°è€Œè§¦å‘å™¨ä¸å¯ä»¥</p>
</li>
<li><p>HTMLè¯­å¥å’ŒJSPè¯­å¥éƒ½æ˜¯ä¸‹è½½åˆ°æµè§ˆå™¨ç«¯æ¥æ‰§è¡Œã€‚X</p>
<p>  å‡¡æ˜¯ä½¿ç”¨åˆ°äº†javaä¸­çš„è¯­è¨€éƒ¨åˆ†ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼Œè§£æåè¿”å›å®¢æˆ·ç«¯å½¢æˆæ ‡å‡†çš„html</p>
</li>
</ul>
<p>JavaåµŒå…¥SQLè¯­å¥æ‰§è¡Œåï¼Œè¿”å›ç»“æœå­˜å‚¨åœ¨ä»€ä¹ˆå¯¹è±¡ä¸­ï¼šResultSet</p>
<p>JavaåµŒå…¥SQLè¯­å¥ï¼Œèƒ½ä¼ é€’åŠ¨æ€å‚æ•°æ‰§è¡ŒSQLè¯­å¥æŸ¥è¯¢çš„æ˜¯ä»€ä¹ˆæ¥å£ï¼šPreparedStatement</p>
<p>JavaåµŒå…¥SQLè¯­å¥ï¼Œèƒ½è°ƒç”¨æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹çš„æ˜¯ä»€ä¹ˆæ¥å£ï¼šCallableStatement</p>
<p>ä»æ¸¸æ ‡ä¸­è¯»å–æ•°æ®ï¼Œä½¿ç”¨ä»€ä¹ˆå‘½ä»¤ï¼šfetch</p>
<h2 id="ç¬¬ä¸ƒç« -NoSQLæ•°æ®åº“æŠ€æœ¯"><a href="#ç¬¬ä¸ƒç« -NoSQLæ•°æ®åº“æŠ€æœ¯" class="headerlink" title="ç¬¬ä¸ƒç«  NoSQLæ•°æ®åº“æŠ€æœ¯"></a>ç¬¬ä¸ƒç«  NoSQLæ•°æ®åº“æŠ€æœ¯</h2><p>å…³ç³»æ•°æ®åº“å±€é™</p>
<blockquote>
<p>ä¸èƒ½ç›´æ¥ç®¡ç†éç»“æ„åŒ–æ•°æ®</p>
<p>å—å•æœºæœåŠ¡å™¨é™åˆ¶éš¾ä»¥æ”¯æŒæ•°æ®åº“é«˜å¹¶å‘è¯»å†™è®¿é—®</p>
<p>å—ç£ç›˜å®¹é‡é™åˆ¶ä¸èƒ½æ»¡è¶³æµ·é‡æ•°æ®çš„é«˜æ•ˆå­˜å‚¨å’Œå¤„ç†</p>
<p>éš¾ä»¥å®ç°åˆ†å¸ƒå¼æ•°æ®åº“çš„é«˜æ‰©å±•æ€§ã€é«˜å¯ç”¨æ€§</p>
</blockquote>
<p><strong>å¤§æ•°æ®</strong>(big data)ï¼ŒæŒ‡æ— æ³•åœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…ç”¨å¸¸è§„è½¯ä»¶å·¥å…·è¿›è¡Œæ•æ‰ã€ç®¡ç†å’Œå¤„ç†çš„æ•°æ®é›†åˆã€‚</p>
<h3 id="5Vç‰¹å¾"><a href="#5Vç‰¹å¾" class="headerlink" title="5Vç‰¹å¾"></a>5Vç‰¹å¾</h3><ul>
<li>å¤§é‡(Volume)</li>
<li>é«˜é€Ÿæ€§(Velocity)</li>
<li>å¤šæ ·æ€§ï¼ˆ(Variety)</li>
<li>çœŸå®æ€§(Veracity)</li>
<li>ä½ä»·å€¼(Value)</li>
</ul>
<p>(Not only SQL Databaseï¼Œ<strong>NoSQL</strong>ï¼‰æ˜¯æŒ‡ä¸€ç±»éå…³ç³»å‹ã€å¼€æºä»£ç ã€å…·æœ‰æ°´å¹³æ‰©å±•èƒ½åŠ›çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€‚</p>
<p>NoSQLæ•°æ®åº“çš„å…¬å…±ç‰¹æ€§:</p>
<blockquote>
<p>æ”¯æŒéç»“æ„åŒ–æ•°æ®å­˜å‚¨ï¼Œä¸ç”¨é¢„å…ˆå®šä¹‰æ¨¡å¼<br>åˆ†å¸ƒå¼é›†ç¾¤æ¶æ„ï¼Œæ— å…±äº«ç»“æ„<br>å¼¹æ€§å¯æ‰©å±•ï¼Œå¯åŠ¨æ€å¢å‡æ•°æ®åº“ç»“ç‚¹æ•°æ®åˆ†åŒºå­˜å‚¨ï¼Œå„åˆ†åŒºç»“ç‚¹å¹¶å‘è®¿é—®<br>ç»“ç‚¹ä¹‹é—´æ•°æ®å¼‚æ­¥å¤åˆ¶ï¼Œå®ç°æœ€ç»ˆæ•°æ®ä¸€è‡´æ€§<br>æ•°æ®å¤„ç†éµå¾ªBASEç‰¹æ€§åŸåˆ™</p>
</blockquote>
<h3 id="BASEç‰¹æ€§"><a href="#BASEç‰¹æ€§" class="headerlink" title="BASEç‰¹æ€§"></a>BASEç‰¹æ€§</h3><p>Basically Availableï¼ˆ<strong>åŸºæœ¬å¯ç”¨</strong>ï¼‰ï¼Œå…è®¸æ•°æ®åº“ç³»ç»ŸæŸäº›èŠ‚ç‚¹å‡ºç°æ•…éšœï¼Œå…¶ä½™èŠ‚ç‚¹èƒ½å¤Ÿç»§ç»­è¿è¡Œï¼Œä¸€ç›´æä¾›æœåŠ¡ã€‚<br>Soft state(<strong>è½¯çŠ¶æ€</strong>ï¼‰ï¼Œå…è®¸æ•°æ®åº“ç³»ç»Ÿå‰¯æœ¬èŠ‚ç‚¹ä¹‹é—´å­˜åœ¨æš‚æ—¶çš„æ•°æ®ä¸ä¸€è‡´ï¼Œç»è¿‡çº é”™å¤„ç†ï¼Œç³»ç»Ÿæ•°æ®æœ€ç»ˆä¿æŒä¸€è‡´æ€ã€‚<br>Eventual Consistency(<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼‰ï¼Œç³»ç»Ÿæ•°æ®åœ¨æŸä¸ªæ—¶åˆ»è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<p>åˆ†å¸ƒå¼æ•°æ®åº“ä¸€è‡´æ€§</p>
<blockquote>
<p>å¼ºä¸€è‡´æ€§:æ— è®ºæ›´æ–°æ“ä½œåœ¨å“ªä¸€ä¸ªå‰¯æœ¬æ‰§è¡Œï¼Œæ•°æ®å¤åˆ¶å¿…é¡»åŒæ­¥å®Œæˆã€‚</p>
<p>å¼±ä¸€è‡´æ€§:æ•°æ®æ›´æ–°åï¼Œå…¶æ•°æ®å¤åˆ¶æ˜¯å¼‚æ­¥å®Œæˆï¼Œéœ€è¦ç»è¿‡ä¸€å®šæ—¶é—´æ‰èƒ½è¾¾åˆ°ä¸åŒæ•°æ®åº“ç»“ç‚¹æ•°æ®ä¸€è‡´ã€‚</p>
<p>æœ€ç»ˆä¸€è‡´æ€§:å¼±ä¸€è‡´æ€§çš„ä¸€ç§ç‰¹ä¾‹ï¼Œä¿è¯ç”¨æˆ·æœ€ç»ˆèƒ½å¤Ÿè¯»å–åˆ°æ›´æ–°æ•°æ®ã€‚</p>
</blockquote>
<p>NoSQLæ•°æ®åº“å…¸å‹ç±»å‹ï¼š<br><strong>é”®å€¼æ•°æ®åº“</strong>ã€<strong>å›¾æ•°æ®åº“</strong>ã€<strong>åˆ—å¼æ•°æ®åº“</strong>ã€<strong>æ–‡æ¡£æ•°æ®åº“</strong>ã€‚</p>
<p>NoSQLæ•°æ®åº“ä¸å…³ç³»æ•°æ®åº“æ¯”è¾ƒ</p>
<blockquote>
<p>NoSQLæ•°æ®åº“é‡‡ç”¨éç»“æ„åŒ–æ•°æ®å­˜å‚¨æ¨¡å‹ï¼Œå…³ç³»æ•°æ®åº“é‡‡ç”¨ç»“æ„åŒ–æ•°æ®å­˜å‚¨æ¨¡å‹<br>NoSQLæ•°æ®åº“é‡‡ç”¨åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå…³ç³»æ•°æ®åº“ä¸€èˆ¬é‡‡ç”¨é›†ä¸­å¼éƒ¨ç½²<br>NoSQLæ•°æ®åº“ç¼–ç¨‹éµå¾ªBASEåŸåˆ™ï¼Œå…³ç³»æ•°æ®åº“ç¼–ç¨‹éµå¾ªACIDäº‹åŠ¡åŸåˆ™<br>NoSQLæ•°æ®åº“æ²¡æœ‰ç»Ÿä¸€çš„æ•°æ®æ“ä½œæ ‡å‡†ï¼Œå…³ç³»æ•°æ®åº“éµå¾ªSQLæ•°æ®æ“ä½œæ ‡å‡†<br>NoSQLæ•°æ®åº“æ”¯æŒæµ·é‡æ•°æ®å­˜å‚¨ï¼Œå…³ç³»æ•°æ®åº“æ•°æ®å­˜å‚¨å—é™äºTBçº§</p>
</blockquote>
<h3 id="CAP"><a href="#CAP" class="headerlink" title="CAP"></a>CAP</h3><p><strong>ä¸€è‡´æ€§</strong>(Consistencyï¼‰ :ä¸åŒç»“ç‚¹æ•°æ®åº“ä¿æŒä¸€è‡´<br><strong>å¯ç”¨æ€§</strong>(Availability) ï¼šæ•°æ®è®¿é—®è¯·æ±‚éšæ—¶å¯æ»¡è¶³<br><strong>åˆ†åŒºå®¹å¿æ€§</strong>(PartitionTolerance) ï¼šå½“å‡ºç°æ•…éšœç»“ç‚¹ï¼Œç³»ç»Ÿä»èƒ½å“åº”æ•°æ®è®¿é—®è¯·æ±‚</p>
<p>CAPå®šç†æ³•åˆ™:</p>
<p>ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§(C:Consistency)ã€å¯ç”¨æ€§(A: Availability)ï¼‰å’Œåˆ†åŒºå®¹é”™æ€§(P:Partition tolerance)è¿™ä¸‰ä¸ªåŸºæœ¬éœ€æ±‚ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³å…¶ä¸­ä¸¤é¡¹ã€‚</p>
<p>CAâ€”â€”æ”¾å¼ƒåˆ†åŒºå®¹é”™æ€§ï¼Œä¿è¯ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ï¼Œå³ä¼ ç»Ÿçš„å•æœºæ•°æ®åº“å¤„ç†æ–¹å¼ã€‚<br>APâ€”â€”æ”¾å¼ƒå¼ºä¸€è‡´æ€§ï¼Œè¿½æ±‚åˆ†åŒºå®¹é”™æ€§å’Œå¯ç”¨æ€§ï¼Œè¿™æ˜¯å¾ˆå¤šåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ—¶çš„é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œä¸€äº›ç”µå•†ç³»ç»Ÿé‡‡ç”¨æ­¤æ–¹æ¡ˆã€‚<br>CPâ€”â€”æ”¾å¼ƒå¯ç”¨æ€§ï¼Œè¿½æ±‚ä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™æ€§ã€‚ä¾‹å¦‚ï¼Œå¾ˆå¤šNoSQLç³»ç»Ÿé‡‡ç”¨è¿™ç§æ–¹æ¡ˆã€‚</p>
<h3 id="å››ç§NoSQL"><a href="#å››ç§NoSQL" class="headerlink" title="å››ç§NoSQL"></a>å››ç§NoSQL</h3><p><strong>åˆ—å­˜å‚¨æ•°æ®åº“</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_14-03-31.png"></p>
<p>å…³ç³»æ•°æ®åº“:æŒ‰è¡Œå­˜å‚¨ï¼Œæ¯è¡Œæ•°æ®å­˜æ”¾åœ¨ä¸€ä¸ªç£ç›˜æ•°æ®å—</p>
<p>åˆ—å­˜å‚¨æ•°æ®åº“:æŒ‰åˆ—å­˜å‚¨ï¼Œæ¯åˆ—æ•°æ®æ”¾åˆ°ä¸€ä¸ªæ•°æ®å—ä¸­</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_14-03-42.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_14-04-53.png"></p>
<p><strong>é”®å€¼æ•°æ®åº“</strong>(Key-Value Databaseï¼‰æ˜¯ä¸€ç§æŒ‰ç…§é”®å€¼æ•°æ®è¡¨ç»“æ„ç»„ç»‡å­˜å‚¨æ•°æ®çš„å†…å­˜æ•°æ®åº“ã€‚ä»£è¡¨<strong>Redis</strong>ã€‚</p>
<p><strong>æ–‡æ¡£æ•°æ®åº“</strong>ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_14-05-22.png"></p>
<p><strong>å›¾å½¢æ•°æ®åº“</strong></p>
<p>ä»£è¡¨ï¼šNeo4jå›¾å½¢æ•°æ®åº“</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-06_14-05-37.png"></p>
<p><strong>NoSQLæ•°æ®åº“çš„å››å¤§åˆ†ç±»è¡¨æ ¼åˆ†æ</strong></p>
<table>
<thead>
<tr>
<th align="center">åˆ†ç±»</th>
<th align="center">Examplesä¸¾ä¾‹</th>
<th align="center">å…¸å‹åº”ç”¨åœºæ™¯</th>
<th align="center">æ•°æ®æ¨¡å‹</th>
<th align="center">ä¼˜ç‚¹</th>
<th align="center">ç¼ºç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td align="center">é”®å€¼ï¼ˆkey-valueï¼‰</td>
<td align="center">Redis</td>
<td align="center">å†…å®¹ç¼“å­˜ï¼Œä¸»è¦ç”¨äºå¤„ç†å¤§é‡æ•°æ®çš„é«˜è®¿é—®è´Ÿè½½ï¼Œä¹Ÿç”¨äºä¸€äº›æ—¥å¿—ç³»ç»Ÿç­‰ç­‰ã€‚</td>
<td align="center">Key æŒ‡å‘ Value çš„é”®å€¼å¯¹ï¼Œé€šå¸¸ç”¨hash tableæ¥å®ç°</td>
<td align="center">æŸ¥æ‰¾é€Ÿåº¦å¿«</td>
<td align="center">æ•°æ®æ— ç»“æ„åŒ–ï¼Œé€šå¸¸åªè¢«å½“ä½œå­—ç¬¦ä¸²æˆ–è€…äºŒè¿›åˆ¶æ•°æ®</td>
</tr>
<tr>
<td align="center">åˆ—å­˜å‚¨æ•°æ®åº“</td>
<td align="center">Cassandra, HBase</td>
<td align="center">åˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿ</td>
<td align="center">ä»¥åˆ—ç°‡å¼å­˜å‚¨ï¼Œå°†åŒä¸€åˆ—æ•°æ®å­˜åœ¨ä¸€èµ·</td>
<td align="center">æŸ¥æ‰¾é€Ÿåº¦å¿«ï¼Œå¯æ‰©å±•æ€§å¼ºï¼Œæ›´å®¹æ˜“è¿›è¡Œåˆ†å¸ƒå¼æ‰©å±•</td>
<td align="center">åŠŸèƒ½ç›¸å¯¹å±€é™</td>
</tr>
<tr>
<td align="center">æ–‡æ¡£å‹æ•°æ®åº“</td>
<td align="center">CouchDB, MongoDB</td>
<td align="center">Webåº”ç”¨ï¼ˆä¸Key-Valueç±»ä¼¼ï¼ŒValueæ˜¯ç»“æ„åŒ–çš„ï¼Œä¸åŒçš„æ˜¯æ•°æ®åº“èƒ½å¤Ÿäº†è§£Valueçš„å†…å®¹ï¼‰</td>
<td align="center">Key-Valueå¯¹åº”çš„é”®å€¼å¯¹ï¼ŒValueä¸ºç»“æ„åŒ–æ•°æ®</td>
<td align="center">æ•°æ®ç»“æ„è¦æ±‚ä¸ä¸¥æ ¼ï¼Œè¡¨ç»“æ„å¯å˜ï¼Œä¸éœ€è¦åƒå…³ç³»å‹æ•°æ®åº“ä¸€æ ·éœ€è¦é¢„å…ˆå®šä¹‰è¡¨ç»“æ„</td>
<td align="center">æŸ¥è¯¢æ€§èƒ½ä¸é«˜ï¼Œè€Œä¸”ç¼ºä¹ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•ã€‚</td>
</tr>
<tr>
<td align="center">å›¾å½¢(Graph)æ•°æ®åº“</td>
<td align="center">Neo4J</td>
<td align="center">ç¤¾äº¤ç½‘ç»œï¼Œæ¨èç³»ç»Ÿç­‰ã€‚ä¸“æ³¨äºæ„å»ºå…³ç³»å›¾è°±</td>
<td align="center">å›¾ç»“æ„</td>
<td align="center">åˆ©ç”¨å›¾ç»“æ„ç›¸å…³ç®—æ³•ã€‚æ¯”å¦‚æœ€çŸ­è·¯å¾„å¯»å€ï¼ŒNåº¦å…³ç³»æŸ¥æ‰¾ç­‰</td>
<td align="center">å¾ˆå¤šæ—¶å€™éœ€è¦å¯¹æ•´ä¸ªå›¾åšè®¡ç®—æ‰èƒ½å¾—å‡ºéœ€è¦çš„ä¿¡æ¯ï¼Œè€Œä¸”è¿™ç§ç»“æ„ä¸å¤ªå¥½åšåˆ†å¸ƒå¼çš„é›†ç¾¤æ–¹æ¡ˆã€‚</td>
</tr>
</tbody></table>
<p>ä»¥ä¸‹å“ªä¸€é¡¹ä¸æ˜¯NoSQLçš„å…±åŒç‰¹å¾?(D)</p>
<p>Aï¼åˆ†åŒº Bï¼å¼‚æ­¥å¤åˆ¶	C. BASE	D.CAP</p>
<p>åœ¨Neo4Jé›†ç¾¤ä¸­ï¼Œæ•°æ®çš„å†™å…¥æ˜¯é€šè¿‡ä¸»æœåŠ¡å™¨æ¥å®Œæˆçš„ï¼Œæ•°æ®çš„è¯»å–å¯ä»¥é€šè¿‡é›†ç¾¤ä¸­çš„ä»»æ„ä¸€ä¸ªNeo4Jå®ä¾‹æ¥å®Œæˆã€‚æ­£ç¡®ï¼ï¼</p>
<p><strong>æ•°æ®åº“ç³»ç»Ÿé¢ä¸´çš„æŒ‘æˆ˜</strong>ï¼šæ•°æ®åº“é«˜å¹¶å‘è¯»å†™éœ€æ±‚ï¼›æµ·é‡æ•°æ®çš„é«˜æ•ˆå­˜å‚¨å’Œå¤„ç†ï¼›æ•°æ®åº“é«˜æ‰©å±•æ€§å’Œé«˜å¯ç”¨æ€§éœ€æ±‚ï¼›æ•°æ®åº“åœ¨å¤§æ•°æ®å¤„ç†æ–¹é¢çš„è¦æ±‚</p>
<p>ä»¥ä¸‹å“ªä¸€é¡¹ä¸æ˜¯å¤§æ•°æ®çš„ç‰¹å¾ï¼Ÿé«˜å¯†é›†ä»·å€¼æ•°æ®ã€‚ï¼ˆæ˜¯çš„æœ‰ï¼šé«˜é€Ÿäº§ç”Ÿã€è§„æ¨¡å·¨å¤§ï¼Œå¤šæ ·æ€§ï¼‰</p>
<p>HBASEä¸­è¡¨å’ŒåŒºåŸŸçš„å…³ç³»å¯ä»¥æ˜¯ä»€ä¹ˆï¼š1ï¼šN</p>
<p>ä»¥ä¸‹å“ªä¸€é¡¹ä¸æ˜¯MongoDBä¿ç•™æ•°æ®åº“ï¼šsystemï¼Œï¼ˆæ˜¯çš„æœ‰ï¼šlocalã€adminã€configï¼‰</p>
<p>CAPæ˜¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹è®¾è®¡å’Œéƒ¨ç½²ç³»ç»Ÿæ—¶çš„3ä¸ªæ ¸å¿ƒéœ€æ±‚ã€‚æ­£ç¡®ï¼ï¼</p>
<p>Rediså¤åˆ¶ä¸»è¦åŒ…æ‹¬RDBå¤åˆ¶å’ŒAOFå¤åˆ¶ã€‚æ­£ç¡®ï¼ï¼</p>
<p>HBASEä¸­çš„åŒºåŸŸå’Œè¡¨çš„å…³ç³»æ˜¯éšç€æ•°æ®çš„å¢åŠ åŠ¨æ€å˜åŒ–çš„ã€‚æ­£ç¡®ï¼ï¼</p>
<p>MongoDBçš„åˆ†ç‰‡æ˜¯å°†ä¸€ä¸ªé›†åˆçš„æ•°æ®åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šå‡è½»å•æœºå‹åŠ›ã€‚é”™è¯¯</p>
<p>Neo4jçš„æ•°æ®ç‰©ç†å­˜å‚¨ä¸»è¦åˆ†ä¸ºèŠ‚ç‚¹ã€å…³ç³»ã€èŠ‚ç‚¹æˆ–å…³ç³»ä¸Šå±æ€§è¿™ä¸‰ç±»æ•°æ®å­˜å‚¨ã€‚ï¼é”™è¯¯</p>
<p>NoSQLæ•°æ®åº“åˆ†ç±»çš„ä¾æ®æ˜¯å¯¹æ•°æ®çš„æ“ä½œæ–¹å¼ã€‚é”™è¯¯</p>
<p>Redisæ•°æ®åº“çš„åº•å±‚å®ç°æ˜¯å­—å…¸ï¼Œå¯¹äºæ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥æ“ä½œéƒ½æ˜¯é€šè¿‡å¯¹å­—å…¸è¿›è¡Œæ“ä½œæ¥å®ç°çš„ã€‚æ­£ç¡®ï¼ï¼</p>
<p>HBASEä¸­è¡¨å®šä¹‰ä¸­è¦è¯´æ˜è¡Œå¥å’Œè¡¨ä¸­åŒ…å«çš„åˆ—æ—ï¼Œåˆ—ä¸ç”¨å®šä¹‰ã€‚æ­£ç¡®ï¼ï¼</p>
<p>MongoDBå¤æ‚æ–‡æ¡£æ¨¡å‹è®¾è®¡å¯ä»¥ä½¿ç”¨å†…åµŒå’Œå¼•ç”¨çš„æ–¹æ³•æ¥è§£å†³ã€‚æ­£ç¡®ï¼ï¼</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µå­ç§‘å¤§è®¡ç½‘æœŸæœ«å¤ä¹ ä¹‹ç»å…¸å¤§é¢˜</title>
    <url>/2023/06/25/%E8%AE%A1%E7%BD%91/7/</url>
    <content><![CDATA[<blockquote>
<p>è¯•å°†TCP&#x2F;IPä¸ISO&#x2F;OSIä¸ƒå±‚æ¨¡å‹ç›¸æ¯”è¾ƒ</p>
</blockquote>
<p>ç›¸åŒç‚¹:</p>
<p>éƒ½æ˜¯ç‹¬ç«‹çš„åè®®æ ˆçš„æ¦‚å¿µï¼›å±‚çš„åŠŸèƒ½å¤§ä½“ç›¸ä¼¼ã€‚ </p>
<p>ä¸åŒç‚¹:</p>
<p>â‘ ISO&#x2F;OSIå‚è€ƒæ¨¡å‹å°†æœåŠ¡ã€æ¥å£ä¸åè®®çš„æ¦‚å¿µæ˜ç¡®åŒ–ï¼Œå› æ­¤æ¯” TCPï¼IP å…·æœ‰æ›´å¥½çš„éšè—æ€§ï¼Œèƒ½å¤Ÿæ¯”è¾ƒå®¹æ˜“åœ°è¿›è¡Œæ›¿æ¢;TCP&#x2F;IPå‚è€ƒæ¨¡å‹åœ¨æœåŠ¡ã€æ¥å£ä¸åè®®çš„åŒºåˆ«ä¸Šä¸å¾ˆæ¸…æ¥šã€‚</p>
<p>â‘¡ISO&#x2F;OSIå‚è€ƒæ¨¡å‹å…ˆæœ‰å±‚çš„åˆ’åˆ†,åæœ‰å„å±‚åè®®;TCP&#x2F;IPå‚è€ƒæ¨¡å‹å…ˆæœ‰åè®®,åæœ‰å±‚çš„åˆ’åˆ†ã€‚</p>
<p>â‘¢ISO&#x2F;OSIå‚è€ƒæ¨¡å‹åˆ’åˆ†ä¸º7å±‚;TCP&#x2F;IPå‚è€ƒæ¨¡å‹åˆ’åˆ†ä¸º4å±‚ï¼Œæ²¡æœ‰ä¼šè¯å±‚å’Œè¡¨ç¤ºå±‚</p>
<p>â‘£ISO&#x2F;OSIçš„ç½‘ç»œå±‚æ”¯æŒæ— è¿æ¥å’Œé¢å‘è¿æ¥çš„é€šä¿¡,ä¼ è¾“å±‚åªæ”¯æŒé¢å‘è¿æ¥çš„é€šä¿¡;TCP&#x2F;IPçš„ç½‘ç»œå±‚åªæ”¯æŒæ— è¿æ¥çš„é€šä¿¡,ä¼ è¾“å±‚æä¾›æ— è¿æ¥å’Œé¢å‘è¿æ¥çš„é€šä¿¡ã€‚</p>
<blockquote>
<p>TCPä¸UDPåŒºåˆ«</p>
</blockquote>
<p>1ã€TCPæ˜¯é¢å‘è¿æ¥æœåŠ¡çš„ï¼›UDPæ˜¯æ— è¿æ¥çš„<br>2ã€TCPæä¾›å¯é çš„ä¼ è¾“æœåŠ¡ï¼›UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜<br>3ã€TCPé¢å‘å­—èŠ‚æµï¼›UDPæ˜¯é¢å‘æŠ¥æ–‡æ®µçš„<br>4ã€UDPé¦–éƒ¨å¼€é”€æ¯”è¾ƒå°ï¼Œåªæœ‰8å­—èŠ‚ï¼ŒTCPæœ€å°‘é¦–éƒ¨ä¸º20å­—èŠ‚ï¼Œä¸»è¦å› ä¸ºå®ƒå®ç°çš„åŠŸèƒ½æ¯”è¾ƒå¤šï¼Œæ‹¥å¡æ§åˆ¶ã€æµé‡æ§åˆ¶ç­‰ç­‰ã€‚</p>
<blockquote>
<p>åœ¨ä½¿ç”¨TCPä¼ é€æ•°æ®æ—¶,å¦‚æœæœ‰ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡æ®µä¸¢å¤±äº†,ä¹Ÿä¸ä¸€å®šä¼šå¼•èµ·ä¸è¯¥ç¡®è®¤æŠ¥æ–‡æ®µå¯¹åº”çš„æ•°æ®çš„é‡ä¼ ã€‚è¯•è¯´æ˜ç†ç”±ã€‚</p>
</blockquote>
<p>åªè¦åœ¨è¶…æ—¶é‡ä¼ åˆ°è¾¾ä¹‹å‰ï¼Œæœ‰åç»­çš„ç¡®è®¤æŠ¥æ–‡æ®µåˆ°è¾¾ï¼Œå¹¶é€šè¿‡æ‰¹é‡ï¼ˆç´¯ç§¯ï¼‰ç¡®è®¤å¯¹æ­¤æŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ï¼Œå³ä¸éœ€è¦é‡ä¼ ã€‚ï¼ˆå¯¹æ–¹è¿˜æœªæ¥å¾—åŠé‡ä¼ ,å°±æ”¶åˆ°äº†å¯¹æ›´é«˜åºå·çš„ç¡®è®¤,ç›¸å½“äºå¯¹è¿åŒè¢«ä¸¢å¤±ç¡®è®¤çš„æŠ¥æ–‡æ®µä¸€å¹¶ç¡®è®¤ã€‚ï¼‰</p>
<blockquote>
<p>ç®€è¦æè¿°æœ‰çº¿å±€åŸŸç½‘å’Œæ— çº¿å±€åŸŸç½‘åœ¨åª’ä½“è®¿é—®æ§åˆ¶åè®®ä¸Šçš„å¼‚åŒç‚¹ã€‚</p>
</blockquote>
<p>ç­”:<strong>CSMA&#x2F;CDè½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®&#x2F;å†²çªæ£€æµ‹åè®®</strong>,æ˜¯ä¸€ç§åˆ†å¸ƒå¼ä»‹è´¨è®¿é—®æ§åˆ¶åè®®ã€‚å…¶åŸç†å¦‚ä¸‹:</p>
<p>(1)å¤šä¸ªç«™ç‚¹å¹³ç­‰çš„æ¥å…¥åˆ°å…±äº«è®¿é—®ä»‹è´¨(å¤šè·¯è®¿é—®)ã€‚</p>
<p>(2)æ¯ä¸ªç«™åœ¨å‘é€å¸§ä¹‹å‰,é¦–å…ˆè¦ç›‘å¬è®¿é—®ä»‹è´¨,åªæœ‰è®¿é—®ä»‹è´¨ç©ºé—²æ—¶,æ‰å…è®¸å‘é€å¸§(è½½æ³¢ç›‘å¬)ã€‚</p>
<p>(3)å¦‚æœä¸¤ä¸ªä»¥ä¸Šçš„ç«™åŒæ—¶ç›‘å¬åˆ°è®¿é—®ä»‹è´¨ç©ºé—²å¹¶å‘é€å¸§,åˆ™ä¼šäº§ç”Ÿå†²çªç°è±¡ã€‚å› æ­¤è¦æ±‚æ¯ä¸ªç«™åœ¨å‘é€æ•°æ®çš„åŒæ—¶,ä»ç„¶ç»§ç»­ç›‘å¬è®¿é—®ä»‹è´¨(å†²çªæ£€æµ‹)ã€‚å¦‚æœå‡ºç°å†²çª,åˆ™å‘é€ç«™è¦å‘é€å¹²æ‰°ä¿¡å·ä»¥ä½¿æ‰€æœ‰å…¶å®ƒä¸»æœºéƒ½èƒ½æ¥æ”¶åˆ°å†²çªä¿¡å·ã€‚ç„¶åæ¯ä¸€ä¸ªå‘é€ç«™éšæœºå»¶æ—¶ä¸€æ®µæ—¶é—´å,å†æ¬¡é‡æ–°å‘é€å¸§ã€‚</p>
<p><strong>CSMA&#x2F;CAè½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®&#x2F;å†²çªé¿å…åè®®</strong>å·¥ä½œåŸç†å¦‚ä¸‹:</p>
<p>(1)å‘é€ç«™åœ¨æ£€æµ‹åˆ°ä»‹è´¨ç©ºé—²å,å…ˆå‘é€ä¸€ä¸ªè¯·æ±‚å‘é€å¸§(RTS),å¸§ä¸­å­˜æ”¾äº†å®ƒéœ€è¦å ç”¨ä»‹è´¨çš„æ—¶é—´ã€‚</p>
<p>(2)æ¥æ”¶ç«™æ”¶åˆ°è¯·æ±‚RTSå,å‘é€å‡†å¤‡å‘é€å¸§(CTS),æ‰€æœ‰ç«™ç‚¹éƒ½ä¼šæ”¶åˆ°è¯¥å¸§,çŸ¥é“äº†ä»‹è´¨ä¼šè¢«å ç”¨ä¸€æ®µæ—¶é—´ã€‚</p>
<p>(3)å‘é€ç«™å‘é€æ•°æ®å¸§ã€‚</p>
<p>(4)æ¥æ”¶ç«™ç¡®è®¤æ‰€æ”¶åˆ°çš„æ•°æ®ã€‚</p>
<p><strong>åŒºåˆ«</strong></p>
<p>â‘  CSMA&#x2F;CDå¯ä»¥ä¸€è¾¹æ£€æµ‹å†²çª,ä¸€è¾¹æ”¶å‘æ•°æ®,ä¸€æ—¦æ£€æµ‹åˆ°å†²çª,ç«‹åˆ»åœæ­¢æ•°æ®æ”¶å‘ã€‚CSMA&#x2F;CAåˆ™æ˜¯å¿…é¡»å…ˆæ£€æµ‹æ˜¯å¦æœ‰å†²çª,å¾—åˆ°å¯¹ç«¯ç¡®è®¤å,å†å‘é€æ•°æ®,è€Œä¸èƒ½åŒæ—¶è¿›è¡Œ,æ˜¯æ ¹æ®æ— çº¿ç½‘ç»œçš„ç‰¹ç‚¹è®¾è®¡å‡ºæ¥çš„ã€‚</p>
<p>â‘¡ ä¸¤è€…çš„ä¼ è¾“ä»‹è´¨ä¸åŒ,CSMA&#x2F;CDç”¨äºæ€»çº¿å¼ä»¥å¤ªç½‘,è€ŒCSMA&#x2F;CAåˆ™ç”¨äºæ— çº¿å±€åŸŸç½‘ã€‚</p>
<blockquote>
<p>è€ƒè™‘ä½¿ç”¨32bitä¸»æœºåœ°å€çš„æ•°æ®æŠ¥ç½‘ç»œï¼Œå‡å®šä¸€å°ä¸»æœºå…·æœ‰4æ¡çº¿è·¯ï¼Œç¼–å·0åˆ°3ï¼Œåˆ†ç»„èƒ½è¢«è½¬å‘åˆ°é“¾è·¯æ¥å£ï¼Œæƒ…å†µå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>ç›®çš„åœ°å€èŒƒå›´</th>
<th>é“¾è·¯æ¥å£</th>
</tr>
</thead>
<tbody><tr>
<td>11100000 00000000 00000000 00000000 åˆ° 11100000 11111111 11111111 11111111</td>
<td>0</td>
</tr>
<tr>
<td>11100001 00000000 00000000 00000000 åˆ° 11100001 00000000 11111111 11111111</td>
<td>1</td>
</tr>
<tr>
<td>11100001 00000001 00000000 00000000 åˆ° 11100001 11111111 11111111 11111111</td>
<td>2</td>
</tr>
<tr>
<td>å…¶å®ƒ</td>
<td>3</td>
</tr>
</tbody></table>
<p>a&gt;æä¾›ä¸€ä¸ªå…·æœ‰4é¡¹çš„è½¬å‘è¡¨ï¼Œä½¿ç”¨æœ€é•¿åœ°å€åŒ¹é…ï¼Œè½¬å‘åˆ†ç»„åˆ°æ­£ç¡®çš„é“¾è·¯æ¥å£</p>
<p>b&gt;æ ¹æ®è½¬å‘è¡¨ï¼Œå¯¹ä¸‹åˆ—ç›®çš„åœ°å€åº”è¯¥è½¬å‘åˆ°å“ªä¸ªé“¾è·¯æ¥å£ï¼š</p>
<p>1100100 100100001 01010001 01010101</p>
<p>11100001 00000000 11000011 00111100</p>
<p>11100001 10000000 00010001 01110111</p>
</blockquote>
<p>a)</p>
<table>
<thead>
<tr>
<th>ç›®æ ‡ç½‘ç»œ</th>
<th>æ¥å£</th>
</tr>
</thead>
<tbody><tr>
<td>224.0.0.0&#x2F;8</td>
<td>0</td>
</tr>
<tr>
<td>225.0.0.0&#x2F;16</td>
<td>1</td>
</tr>
<tr>
<td>225.0.0.0&#x2F;8</td>
<td>2</td>
</tr>
<tr>
<td>Default</td>
<td>3</td>
</tr>
</tbody></table>
<p>æ³¨ï¼šç›®æ ‡ç½‘ç»œä¸èƒ½åªå¡«å†™ç½‘ç»œå·éƒ¨åˆ†ï¼Œå¿…é¡»æ˜¯å®Œæ•´çš„ï¼Œå¦åˆ™è§†ä¸ºé”™è¯¯</p>
<p>b)1100100 100100001 01010001 01010101 ä»3å·æ¥å£èµ°</p>
<p>11100001 00000000 11000011 00111100 ä»1å·æ¥å£èµ°</p>
<p>11100001 10000000 00010001 01110111 ä»2å·æ¥å£èµ°</p>
<blockquote>
<p>è€ƒè™‘åœ¨å…·æœ‰Qæ®µé“¾è·¯çš„è·¯å¾„ä¸Šå‘é€ä¸€ä¸ªåŒ…å«F bitæ¯”ç‰¹æ•°æ®çš„åˆ†ç»„ã€‚æ¯æ®µé“¾è·¯ä»¥R bit&#x2F;secé€Ÿç‡ä¼ è¾“ã€‚è¯¥ç½‘ç»œè´Ÿè½½è½»ï¼Œå› æ­¤æ²¡æœ‰æ’é˜Ÿæ—¶å»¶ã€‚ä¼ æ’­æ—¶å»¶å¯å¿½ç•¥ä¸è®¡ã€‚</p>
<p>aï¼‰å‡å®šè¯¥ç½‘æ˜¯ä¸€ä¸ªåˆ†ç»„äº¤æ¢è™šç”µè·¯ç½‘ç»œã€‚VCå»ºé“¾æ—¶é—´ä¸ºts secï¼Œå‡å®šå‘é€å±‚å¯¹æ¯ä¸ªåˆ†ç»„å¢åŠ æ€»è®¡hæ¯”ç‰¹çš„é¦–éƒ¨ã€‚ä»æºåˆ°ç›®çš„åœ°å‘é€è¯¥æ–‡ä»¶éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</p>
<p>bï¼‰å‡å®šè¯¥ç½‘ç»œæ˜¯ä¸€ä¸ªåˆ†ç»„äº¤æ¢æ•°æ®æŠ¥ç½‘ç»œï¼Œä½¿ç”¨æ— è¿æ¥æœåŠ¡ã€‚ç°åœ¨å‡å®šæ¯ä¸ªåˆ†ç»„å…·æœ‰2hæ¯”ç‰¹çš„é¦–éƒ¨ã€‚å‘é€è¯¥åˆ†ç»„éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</p>
<p>cï¼‰æœ€åï¼Œå‡å®šè¯¥ç½‘ç»œæ˜¯ç”µè·¯äº¤æ¢ç½‘ã€‚è¿›ä¸€æ­¥å‡å®šæºå’Œç›®çš„åœ°ä¹‹é—´çš„ä¼ è¾“é€Ÿç‡æ˜¯R bit&#x2F;sã€‚å‡å®štsä¸ºå»ºé“¾æ—¶é—´ï¼Œhæ¯”ç‰¹çš„é¦–éƒ¨é™„åŠ åœ¨æ•´ä¸ªæ–‡ä»¶ä¸Šï¼Œå‘é€è¯¥åˆ†ç»„éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</p>
</blockquote>
<p>aï¼‰ ts+Qï¼ˆF+hï¼‰&#x2F;R</p>
<p>bï¼‰ Qï¼ˆF+2hï¼‰&#x2F;R</p>
<p>cï¼‰ ts+ï¼ˆF+hï¼‰&#x2F;R</p>
<p>ç”µè·¯äº¤æ¢ç½‘ç»œä¸­çš„ç”µè·¯æ˜¯ä¸“ç”¨çš„ï¼Œå»ºç«‹ç”µè·¯åï¼Œæºå’Œç›®çš„åœ°ä¹‹é—´çš„ä¼ è¾“é€Ÿç‡æ˜¯R bit&#x2F;sã€‚è¿™æ„å‘³ç€ï¼Œæ— è®ºè·¯å¾„ä¸Šæœ‰å¤šå°‘æ®µé“¾è·¯ï¼Œæ•´ä¸ªæ–‡ä»¶éƒ½å°†ä»¥R bit&#x2F;sçš„é€Ÿç‡ä»æºåˆ°ç›®çš„åœ°ä¼ è¾“ã€‚å› æ­¤ï¼Œåœ¨è®¡ç®—ä¼ è¾“æ—¶é—´æ—¶ï¼Œä¸éœ€è¦è€ƒè™‘Qæ®µé“¾è·¯ã€‚ç›¸åï¼Œåœ¨åˆ†ç»„äº¤æ¢ç½‘ç»œä¸­ï¼Œæ¯ä¸ªåˆ†ç»„éƒ½éœ€è¦åœ¨æ¯æ®µé“¾è·¯ä¸Šå•ç‹¬ä¼ è¾“ï¼Œæ‰€ä»¥éœ€è¦è€ƒè™‘Qæ®µé“¾è·¯ã€‚</p>
<blockquote>
<p>åº”ç”¨å±‚åè®®èƒ½å¤Ÿä¸ºè§£å†³å„ç§ç½‘ç»œåº”ç”¨æä¾›æœåŠ¡ï¼Œè¯•å›ç­”ä¸‹é¢å’Œåº”ç”¨å±‚åè®®æœ‰å…³çš„é—®é¢˜ï¼š</p>
<p>1ã€ä½¿ç”¨HTTPåè®®è·å–ç½‘é¡µæ—¶ï¼Œä¸ºä½•ç»å¸¸ä¼šè®¾ç½®Webç¼“å­˜ï¼ˆä»£ç†æœåŠ¡å™¨ï¼‰ï¼Ÿ</p>
<p>2ã€ç®€è¦æè¿°æ¯”è¾ƒC&#x2F;Så’ŒP2Pä¸¤ç§ä½“ç³»ç»“æ„ã€‚</p>
<p>3ã€ç®€è¦æè¿°ç”µå­é‚®ä»¶çš„å·¥ä½œè¿‡ç¨‹åŠæ‰€ç”¨åˆ°çš„åè®®çš„åŠŸèƒ½ã€‚</p>
</blockquote>
<p>1ã€Webç¼“å­˜å™¨å¯ä»¥å‡å°‘å¯¹å®¢æˆ·çš„å“åº”æ—¶é—´ã€é¿å…ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ï¼Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼Œä»è€Œèƒ½ä»æ•´ä½“ä¸Šé™ä½å› ç‰¹ç½‘ä¸Šçš„webæµé‡ã€‚</p>
<p>2ã€**C&#x2F;Sä½“ç³»ç»“æ„	**</p>
<p>Serverï¼šå…·æœ‰å›ºå®šçš„ã€ä¼—æ‰€å‘¨çŸ¥çš„IPåœ°å€ï¼›æ€»æ˜¯æ‰“å¼€çš„ä¸»æœºï¼›ä¸»æœºç¾¤é›†ï¼›	</p>
<p>Clientï¼šå¯ä»¥é—´æ–­çš„åŒæœåŠ¡å™¨è¿æ¥ï¼›æ‹¥æœ‰åŠ¨æ€IPåœ°å€ï¼›å®¢æˆ·æœºç›¸äº’ä¹‹é—´ä¸ç›´æ¥é€šä¿¡</p>
<p><strong>P2Pä½“ç³»ç»“æ„</strong>	</p>
<p>æ²¡æœ‰æ€»æ˜¯æ‰“å¼€çš„æœåŠ¡å™¨ï¼›ä»»æ„ä¸€å¯¹ä¸»æœºç›´æ¥ç›¸äº’é€šä¿¡ï¼›å¯¹ç­‰æ–¹é—´æ­‡è¿æ¥å¹¶ä¸”å¯ä»¥æ”¹å˜IPåœ°å€ï¼›è‡ªæ‰©å±•æ€§ï¼›éš¾ä»¥ç®¡ç†</p>
<p>ï¼ˆåœ¨ä¼ ç»Ÿçš„â€œæœåŠ¡å™¨&#x2F;å®¢æˆ·ç«¯â€åº”ç”¨ç³»ç»Ÿä¸­,å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æœ‰æ˜ç¡®çš„åˆ†ç•Œ,è€Œä½¿ç”¨P2PæŠ€æœ¯å®ç°çš„æ¯ä¸ªè®¡ç®—æœºèŠ‚ç‚¹æ—¢æ˜¯å®¢æˆ·ç«¯,ä¹Ÿæ˜¯æœåŠ¡å™¨ã€‚ï¼‰</p>
<p>3ã€å½“ç”¨æˆ·æ’°å†™ä¸€å°ç”µå­é‚®ä»¶å¹¶ç‚¹å‡»å‘é€æŒ‰é’®æ—¶ï¼Œé‚®ä»¶å®¢æˆ·ç«¯ä¼šä½¿ç”¨SMTPï¼ˆç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰å°†é‚®ä»¶å‘é€åˆ°SMTPæœåŠ¡å™¨ã€‚SMTPæœåŠ¡å™¨è´Ÿè´£å°†é‚®ä»¶ä¼ è¾“åˆ°æ”¶ä»¶äººçš„é‚®ä»¶æœåŠ¡å™¨ã€‚æ”¶ä»¶äººçš„é‚®ä»¶æœåŠ¡å™¨ä¼šå°†é‚®ä»¶å­˜å‚¨åœ¨æ”¶ä»¶äººçš„é‚®ç®±ä¸­ã€‚å½“æ”¶ä»¶äººæ£€æŸ¥é‚®ç®±æ—¶ï¼Œä»–çš„é‚®ä»¶å®¢æˆ·ç«¯ä¼šä½¿ç”¨POP3ï¼ˆé‚®å±€åè®®ï¼‰æˆ–IMAPï¼ˆäº’è”ç½‘æ¶ˆæ¯è®¿é—®åè®®ï¼‰ä»é‚®ä»¶æœåŠ¡å™¨è·å–é‚®ä»¶ã€‚POP3å…è®¸ç”¨æˆ·ä»é‚®ä»¶æœåŠ¡å™¨ä¸‹è½½é‚®ä»¶åˆ°æœ¬åœ°è®¡ç®—æœºï¼Œå¹¶åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šé˜…è¯»å’Œç®¡ç†é‚®ä»¶ã€‚IMAPåˆ™å…è®¸ç”¨æˆ·åœ¨é‚®ä»¶æœåŠ¡å™¨ä¸Šç›´æ¥ç®¡ç†é‚®ä»¶ï¼Œæ”¯æŒç¦»çº¿é˜…è¯»å’Œå¤šè®¾å¤‡åŒæ­¥ç­‰åŠŸèƒ½ã€‚</p>
<blockquote>
<p>è€ƒè™‘å›¾2æ‰€ç¤ºç½‘ç»œã€‚å¯¹äºè¡¨æ˜çš„é“¾è·¯è´¹ç”¨ï¼Œç”¨Dijkstraçš„æœ€çŸ­è·¯å¾„ç®—æ³•è®¡ç®—å‡ºä»xåˆ°æ‰€æœ‰ç½‘ç»œèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ï¼ˆç»™å‡ºè®¡ç®—æ­¥éª¤ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-25_21-59-23.png"></p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>æ­¥ éª¤</td>
<td>Nâ€™</td>
<td>D(s), P(s)</td>
<td>D(t), P(t)</td>
<td>D(u), P(u)</td>
<td>D(v), P(v)</td>
<td>D(w), P(w)</td>
<td>D(y), P(y)</td>
<td>D(z), P(z)</td>
</tr>
<tr>
<td>0</td>
<td>x</td>
<td>âˆ</td>
<td>âˆ</td>
<td>âˆ</td>
<td>3,x</td>
<td>1,x</td>
<td>6,x</td>
<td>âˆ</td>
</tr>
<tr>
<td>1</td>
<td>xw</td>
<td>âˆ</td>
<td>âˆ</td>
<td>4,w</td>
<td>2,w</td>
<td></td>
<td>6,x</td>
<td>âˆ</td>
</tr>
<tr>
<td>2</td>
<td>xwv</td>
<td>âˆ</td>
<td>11,v</td>
<td>3,v</td>
<td></td>
<td></td>
<td>3,v</td>
<td>âˆ</td>
</tr>
<tr>
<td>3</td>
<td>xwvu</td>
<td>7,u</td>
<td>5,u</td>
<td></td>
<td></td>
<td></td>
<td>3,v</td>
<td>âˆ</td>
</tr>
<tr>
<td>4</td>
<td>xwvuy</td>
<td>7,u</td>
<td>5,u</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>17,y</td>
</tr>
<tr>
<td>5</td>
<td>xwvuyt</td>
<td>6,t</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>7,t</td>
</tr>
<tr>
<td>6</td>
<td>xwvuyts</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>7,t</td>
</tr>
<tr>
<td>7</td>
<td>xwvuytsz</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>æˆ–</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>æ­¥ éª¤</td>
<td>Nâ€™</td>
<td>D(s), P(s)</td>
<td>D(t), P(t)</td>
<td>D(u), P(u)</td>
<td>D(v), P(v)</td>
<td>D(w), P(w)</td>
<td>D(y), P(y)</td>
<td>D(z), P(z)</td>
</tr>
<tr>
<td>0</td>
<td>x</td>
<td>âˆ</td>
<td>âˆ</td>
<td>âˆ</td>
<td>3,x</td>
<td>1,x</td>
<td>6,x</td>
<td>âˆ</td>
</tr>
<tr>
<td>1</td>
<td>xw</td>
<td>âˆ</td>
<td>âˆ</td>
<td>4,w</td>
<td>2,w</td>
<td></td>
<td>6,x</td>
<td>âˆ</td>
</tr>
<tr>
<td>2</td>
<td>xwv</td>
<td>âˆ</td>
<td>11,v</td>
<td>3,v</td>
<td></td>
<td></td>
<td>3,v</td>
<td>âˆ</td>
</tr>
<tr>
<td>3</td>
<td>xwvy</td>
<td>âˆ</td>
<td>7,v</td>
<td>3,v</td>
<td></td>
<td></td>
<td></td>
<td>17,y</td>
</tr>
<tr>
<td>4</td>
<td>xwvyu</td>
<td>7,u</td>
<td>5,u</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>17,y</td>
</tr>
<tr>
<td>5</td>
<td>xwvyut</td>
<td>6,t</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>7,t</td>
</tr>
<tr>
<td>6</td>
<td>xwvyuts</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>7,t</td>
</tr>
<tr>
<td>7</td>
<td>xwvyutsz</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>æµè§ˆç½‘é¡µçš„æ—¶å€™ï¼Œè¯·è¿ç”¨TCP&#x2F;IPã€DNSã€HTTPã€HTMLã€URLã€MIMEç­‰æœ¯è¯­æè¿°æµè§ˆç½‘é¡µçš„æ•´ä¸ªé€»è¾‘è¿‡ç¨‹ã€‚</p>
</blockquote>
<p>ä½¿ç”¨æµè§ˆå™¨æµè§ˆç½‘é¡µçš„è¿‡ç¨‹å¦‚ä¸‹ã€‚</p>
<p>(1)åœ¨åœ°å€æ è¾“å…¥è¦è®¿é—®çš„URLåœ°å€ã€‚</p>
<p>(2)æµè§ˆå™¨ä»URLåœ°å€ä¸­ï¼Œåˆ†ç¦»å‡ºè¦è®¿é—®æœåŠ¡å™¨çš„åŸŸåã€‚</p>
<p>(3)æµè§ˆå™¨è°ƒç”¨DNSåè®®å¯¹åˆ†ç¦»å‡ºçš„åŸŸåè¿›è¡Œè§£æï¼Œè¿‡ç¨‹å¦‚ä¸‹ã€‚<br>â‘ é¦–å…ˆæŸ¥æ‰¾æœ¬æœºDNSé«˜é€Ÿç¼“å­˜ï¼Œå¦‚æœæœ‰ä»¥å‰è®¿é—®çš„è®°å½•ï¼Œå°†åŸŸåå¯¹åº”çš„IPè¿”å›ç»™æµè§ˆå™¨;å¦‚æœæ²¡æœ‰è®°å½•ï¼Œè½¬â‘¡;<br>â‘¡å‘æœ¬åœ°æˆæƒDNSæœåŠ¡å™¨æäº¤è§£æè¯·æ±‚ï¼Œå¦‚æœè§£ææˆåŠŸï¼Œå°†IPæäº¤ç»™æµè§ˆå™¨ï¹”å¦‚æœæœ¬åœ°æˆæƒDNSæœåŠ¡å™¨ä¸èƒ½è§£æï¼Œå°±å°†è¯¥è§£æè¯·æ±‚è½¬å‘ç»™æ ¹DNSæœåŠ¡å™¨ï¼Œè½¬â‘¢;<br>â‘¢è‹¥å¤–éƒ¨DNSè§£ææˆåŠŸï¼Œåˆ™å°†IPè¿”å›ç»™æµè§ˆå™¨ï¹”å¦åˆ™å‘æµè§ˆå™¨æŠ¥å‘ŠDNSè§£æå¤±è´¥ã€‚</p>
<p>(4)æµè§ˆå™¨ä½¿ç”¨DNSè§£æå‡ºçš„IPåœ°å€ï¼Œä¸ç½‘é¡µæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ã€‚</p>
<p>(5)åŸºäºå»ºç«‹çš„TCPè¿æ¥ï¼Œæµè§ˆå™¨ä»URLä¸­åˆ†ç¦»å‡ºè¦è®¿é—®çš„ç½‘é¡µèµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ä¿¡æ¯ï¼Œæ„é€ HTTPè¯·æ±‚æŠ¥æ–‡ï¼Œå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚<br>( 6 ) æœåŠ¡å™¨æ ¹æ®è¯·æ±‚ç½‘é¡µçš„è·¯å¾„åœ¨æœ¬åœ°æŸ¥æ‰¾ï¼Œç½‘é¡µä»¥HTMLæ ‡è®°è¯­è¨€å½¢å¼ç¼–å†™ã€‚å¦‚æœæ‰¾åˆ°è¦è®¿é—®çš„ç½‘é¡µï¼Œä½¿ç”¨HTTPå“åº”æŠ¥æ–‡å‘æµè§ˆå™¨ä¼ é€’ç½‘é¡µæ•°æ®ï¼›å¦åˆ™ï¼Œåœ¨HTTPå“åº”æŠ¥æ–‡ä¸­ç»™å‡ºé”™è¯¯ä¿¡æ¯ã€‚<br>(7ï¼‰æµè§ˆå™¨æ ¹æ®æ”¶åˆ°çš„å“åº”æŠ¥æ–‡ä¸­çš„çŠ¶æ€ç åˆ¤æ–­ç½‘é¡µè¯·æ±‚æ˜¯å¦æˆåŠŸã€‚å¦‚æœè¯·æ±‚æˆåŠŸï¼Œå°±æŒ‰HTMLä¸­æ ‡è®°æŒ‡ç¤ºçš„æ ¼å¼åœ¨çª—å£ä¸­æ˜¾ç¤ºå†…å®¹;å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œåˆ™åœ¨çª—å£ä¸­æ˜¾ç¤ºç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚<br>(8 )å¦‚æœè®¿é—®çš„èµ„æºä¸æ˜¯é™æ€çš„HTMLæ–‡æ¡£ï¼Œè€Œæ˜¯æ´»åŠ¨ç½‘é¡µï¼Œå°±éœ€è¦ä½¿ç”¨MIMEå¯¹éæ–‡æœ¬çš„å†…å®¹è¿›è¡Œå¤„ç†ã€‚<br>æ•´ä¸ªè®¿é—®è¿‡ç¨‹çš„æ•°æ®ä¼ è¾“ç”±TCP&#x2F;IPåè®®æ ˆæ¥å®ç°ã€‚</p>
<blockquote>
<p>æŸä¸€ç½‘ç»œçš„ä¸€å°ä¸»æœºäº§ç”Ÿäº†ä¸€ä¸ªPæ•°æ®æŠ¥ï¼Œå¤´éƒ¨é•¿åº¦ä¸º20å­—èŠ‚ï¼Œæ•°æ®éƒ¨åˆ†é•¿åº¦ä¸º2000å­—èŠ‚ã€‚è¯¥æ•°æ®æŠ¥éœ€è¦ç»è¿‡ä¸¤ä¸ªç½‘ç»œåˆ°è¾¾ç›®çš„ä¸»æœºï¼Œè¿™ä¸¤ä¸ªç½‘ç»œæ‰€å…è®¸çš„æœ€å¤§ä¼ è¾“å•ä½MTUåˆ†åˆ«ä¸º1500å­—èŠ‚å’Œ576å­—èŠ‚ã€‚è¯·é—®åŸIPæ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœºæ—¶åˆ†æˆäº†å‡ ä¸ªIPå°æŠ¥æ–‡ï¼Ÿæ¯ä¸ªæŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†é•¿åº¦åˆ†åˆ«æ˜¯å¤šå°‘?</p>
</blockquote>
<p>åœ¨IPå±‚ä¸‹é¢çš„æ¯ä¸€ç§æ•°æ®é“¾è·¯å±‚éƒ½æœ‰è‡ªå·±çš„å¸§æ ¼å¼ï¼Œå…¶ä¸­åŒ…æ‹¬å¸§æ ¼å¼ä¸­çš„æ•°æ®å­—æ®µçš„æœ€å¤§é•¿åº¦ï¼Œè¿™ç§°ä¸ºæœ€å¤§ä¼ è¾“å•ä½MTUã€‚1500-20&#x3D;1480,2000-1480&#x3D;520ã€‚æ‰€ä»¥åŸIPæ•°æ®æŠ¥ç»è¿‡ç¬¬1ä¸ªç½‘ç»œååˆ†æˆäº†ä¸¤ä¸ªIPå°æŠ¥æ–‡ï¼Œç¬¬ä¸€ä¸ªæŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†é•¿åº¦æ˜¯1480B,ç¬¬äºŒä¸ªæŠ¥æ–‡çš„æ•°æ®éƒ¨åˆ†é•¿åº¦æ˜¯520Bã€‚<br>æ‰€æœ‰æŠ¥ç‰‡ï¼ˆé™¤æœ€åä¸€ä¸ªæŠ¥ç‰‡ï¼‰çš„æœ‰æ•ˆè½½è·éƒ½æ˜¯8Bçš„å€æ•°ã€‚576-20&#x3D;556,ä½†556ä¸èƒ½è¢«8æ•´é™¤.æ‰€ä»¥åˆ†ç‰‡æ—¶çš„æ•°æ®éƒ¨åˆ†æœ€å¤§åªèƒ½å–552ã€‚ç¬¬ä¸€ä¸ªæŠ¥æ–‡ç»è¿‡ç¬¬2ä¸ªç½‘ç»œå1480-552x2&#x3D;376&lt;576ï¼Œå˜æˆæ•°æ®é•¿åº¦åˆ†åˆ«ä¸º552Bã€552Bã€376Bçš„3ä¸ªPå°æŠ¥æ–‡;ç¬¬2ä¸ªæŠ¥æ–‡520&lt;552ï¼Œæ•…ä¸ç”¨åˆ†ç‰‡ã€‚å› æ­¤åˆ°è¾¾ç›®çš„ä¸»æœºæ—¶ï¼ŒåŸ2000Bçš„æ•°æ®è¢«åˆ†æˆæ•°æ®é•¿åº¦åˆ†åˆ«ä¸º552Bã€552Bã€376Bã€520Bå››ä¸ªå°æŠ¥æ–‡ã€‚</p>
<blockquote>
<p>åœ¨è®¿é—®ç½‘é¡µçš„æ—¶å€™ï¼Œç»å¸¸ä¼šçœ‹åˆ°ä¸€äº›æŒ‡å‘å…¶ä»–ç½‘ç«™çš„é“¾æ¥ã€‚è‹¥ç”¨æˆ·åœ¨è®¿é—®æŸç½‘é¡µçš„æ—¶å€™ï¼Œå‘ç°è¿™ä¸ªç½‘é¡µæœ‰ä¸€ä¸ªæŒ‡å‘<a href="http://www.126.com/">www.126.com</a> çš„é“¾æ¥ã€‚è¯·ä½ è§£é‡Šä¸€ä¸‹ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿™ä¸ªé”®æŒ‰ä»¥åå‹ç”Ÿäº†ä»€ä¹ˆäº‹ä»¶?</p>
</blockquote>
<p>ç”¨æˆ·å•å‡»é¼ æ ‡ä¹‹åï¼Œå‘ç”Ÿäº†ä»¥ä¸‹äº‹ä»¶ã€‚<br>â‘ æµè§ˆå™¨åˆ†æè¶…é“¾æ¥æŒ‡å‘çš„é¡µé¢çš„URL(å‡è®¾URLä¸º<a href="http://www.126.com/index.html">www.126.com/index.html</a>  ) </p>
<p>â‘¡æµè§ˆå™¨å‘DNSè¯·æ±‚è§£æåŸŸå<a href="http://www.126.com/">www.126.com</a> çš„IPåœ°å€ã€‚</p>
<p>â‘¢åŸŸåç³»ç»ŸDNSè§£æå‡ºç½‘æ˜“æœåŠ¡å™¨çš„Påœ°å€ã€‚</p>
<p>â‘£æµè§ˆå™¨åˆ©ç”¨åŸŸåç³»ç»ŸDNSè§£æåˆ°çš„IPåœ°å€ï¼Œä¸<a href="http://www.126.com/">www.126.com</a> çš„æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ã€‚</p>
<p>â‘¤æµè§ˆå™¨å‘å‡ºè¯»å–index.htmå–æ–‡ä»¶å‘½ä»¤çš„HTTPè¯·æ±‚ï¼šGET &#x2F;index.htmlã€‚</p>
<p>â‘¥æœåŠ¡å™¨ç»™å‡ºå“åº”ï¼ŒæŠŠæ–‡ä»¶index.htmlè¿”å›ç»™æµè§ˆå™¨ã€‚</p>
<p>â‘¦TCPè¿æ¥é‡Šæ”¾ã€‚</p>
<p>â‘§æµè§ˆå™¨å¯¹index.htmlæ–‡æ¡£è¿›è¡Œè§£é‡Šï¼Œå¹¶æŠŠç»“æœæ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸Šï¼Œä¾›ç”¨æˆ·æŸ¥çœ‹ã€‚</p>
<blockquote>
<p>å‡å®šä¸¤ä¸ªä¸»æœºAå’ŒBç›¸éš”10000kmï¼Œç”±ä¸€æ¡ç›´æ¥çš„R&#x3D;1Mb&#x2F;sçš„é“¾è·¯ç›¸è¿ã€‚å‡å®šè·¨è¶Šè¯¥é“¾è·¯çš„ä¼ æ’­é€Ÿåº¦æ˜¯2.5Ã—108m&#x2F;sã€‚</p>
<p>ï¼ˆ1ï¼‰è®¡ç®—â€œå¸¦å®½æ—¶å»¶â€ç§¯RÃ—tprop</p>
<p>ï¼ˆ2ï¼‰åœ¨è¯¥é“¾è·¯ä¸Šä¸€ä¸ªæ¯”ç‰¹çš„å®½åº¦ï¼ˆä»¥mè®¡ï¼‰æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ3ï¼‰æ ¹æ®ä¼ æ’­é€Ÿåº¦sã€å¸¦å®½Rå’Œé“¾è·¯mçš„é•¿åº¦ï¼Œæ¨å¯¼å‡ºæ¯”ç‰¹å®½åº¦çš„ä¸€èˆ¬è¡¨è¾¾å¼ã€‚</p>
</blockquote>
<p>(1)	40kb</p>
<p>(2)	10^7m&#x2F;40kb&#x3D;250m&#x2F;b</p>
<p>(3)	s&#x2F;R</p>
<blockquote>
<p>è¡¨1æ˜¯æŸå°è·¯ç”±å™¨ä¸­çš„è·¯ç”±è¡¨ï¼Œç°è¯¥è·¯ç”±æ”¶åˆ°äº†4ä¸ªæ•°æ®æŠ¥ï¼Œå…¶ç›®æ ‡IPåœ°å€åˆ†åˆ«å¦‚ä¸‹ï¼Œè¯·ç»™å‡ºæ¯ä¸ªæ•°æ®æŠ¥çš„ä¸‹ä¸€è·³ã€‚</p>
<p>è¡¨1 è·¯ç”±è¡¨</p>
<table>
<thead>
<tr>
<th>ç½‘ç»œ&#x2F;æ©ç é•¿åº¦</th>
<th>ä¸‹ä¸€è·³ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>C4.50.0.0&#x2F;12</td>
<td>A</td>
</tr>
<tr>
<td>C4.50.0.0&#x2F;12</td>
<td>B</td>
</tr>
<tr>
<td>C4.60.0.0&#x2F;12</td>
<td>C</td>
</tr>
<tr>
<td>C4.68.0.0&#x2F;14</td>
<td>D</td>
</tr>
<tr>
<td>80.0.0.0&#x2F;1</td>
<td>E</td>
</tr>
<tr>
<td>40.0.0.0&#x2F;2</td>
<td>F</td>
</tr>
<tr>
<td>0.0.0.0&#x2F;2</td>
<td>G</td>
</tr>
</tbody></table>
<p>1ï¼‰C4.5E.13.87</p>
<p>2ï¼‰C4.5E.22.09</p>
<p>3ï¼‰C3.41.80.02</p>
<p>4ï¼‰5E.43.91.12</p>
<p>5ï¼‰C4.6D.31.2E</p>
<p>6ï¼‰C4.6B.31.2E</p>
</blockquote>
<p>(1)B</p>
<p>(2)A</p>
<p>(3)E</p>
<p>(4)F</p>
<p>(5)C</p>
<p>(6)D</p>
<blockquote>
<p>åœ¨é€‰æ‹©é‡ä¼ åè®®å’ŒGBNåè®®ä¸­ï¼Œå‘é€æ–¹å¯èƒ½ä¼šæ”¶åˆ°è½åœ¨å…¶å½“å‰çª—å£ä¹‹å¤–çš„ACKæŠ¥æ–‡å—ï¼Ÿè¯·ç®€è¦è¯å®ä½ çš„ç»“è®ºã€‚</p>
</blockquote>
<p>å‡è®¾å‘é€æ–¹çª—å£å¤§å°ä¸º3ï¼Œåœ¨t0æ—¶åˆ»å‘é€åŒ…1ã€2ã€3ï¼›åœ¨t1æ—¶åˆ»ï¼Œæ¥æ”¶æ–¹ç¡®è®¤åŒ…1ã€2ã€3å‘é€å¯¹åº”çš„ACKï¼›åœ¨t2æ—¶åˆ»å‘é€æ–¹è¶…æ—¶ï¼Œå†æ¬¡å‘é€åŒ…1ã€2ã€3ï¼›åœ¨t3æ—¶åˆ»æ¥æ”¶æ–¹æ¥åˆ°é‡å¤æ•°æ®å†æ¬¡å‘é€å¯¹åº”çš„ç¡®è®¤åŒ…ï¼›åœ¨t4æ—¶åˆ»å‘é€æ–¹æ¥åˆ°æ¥æ”¶æ–¹åœ¨t1æ—¶åˆ»å‘é€çš„ç¡®è®¤æŠ¥æ–‡ï¼ŒåŒæ—¶ç§»åŠ¨çª—å£åˆ°åŒ…4ã€5ã€6ï¼›åœ¨t5æ—¶åˆ»å‘é€æ–¹åˆæ¥å—åˆ°1ã€2ã€3çš„ç¡®è®¤æŠ¥æ–‡ï¼Œè¿™äº›ACKåœ¨å‘é€æ–¹çš„çª—å£å¤–ã€‚</p>
<blockquote>
<p>åœ¨å¦‚å›¾æ‰€ç¤ºçš„ç½‘ç»œæ‹“æ‰‘ä¸­ï¼Œå·²çŸ¥ï¼š</p>
<p>HA1å’ŒHA2åˆ†åˆ«æ˜¯ä¸»æœºH1å’Œä¸»æœºH2çš„ç¡¬ä»¶åœ°å€ï¼›IP1å’ŒIP2åˆ†åˆ«æ˜¯å„è‡ªçš„IPåœ°å€ï¼›HA3ï½HA6åˆ†åˆ«æ˜¯è·¯ç”±å™¨å„ç«¯å£çš„ç¡¬ä»¶åœ°å€ï¼›IP3ï½IP6åˆ†åˆ«æ˜¯è·¯ç”±å™¨å„ç«¯å£çš„IPåœ°å€ã€‚</p>
<p>å…¶ä¸­IP1å’ŒIP3æ˜¯<strong>ç§æœ‰åœ°å€</strong>ï¼Œå…¶ä»–çš„IPåœ°å€æ˜¯<strong>å…¬ç½‘åœ°å€</strong>ï¼ŒH1å’ŒH2é€šä¿¡ã€‚</p>
<p>é€šä¿¡çš„è·¯å¾„æ˜¯ï¼šH1â†’ç»è¿‡R1è·¯ç”±è½¬å‘â†’å†ç»è¿‡R2è·¯ç”±è½¬å‘â†’H2ã€‚</p>
<p>è¯·å¡«å†™è¡¨1ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-26_13-25-40.png"></p>
</blockquote>
<table>
<thead>
<tr>
<th>IP1</th>
<th>IP2</th>
<th>HA1</th>
<th>HA3</th>
</tr>
</thead>
<tbody><tr>
<td>IP4</td>
<td>IP2</td>
<td>HA4</td>
<td>HA5</td>
</tr>
<tr>
<td>IP4</td>
<td>IP2</td>
<td>HA6</td>
<td>HA2</td>
</tr>
</tbody></table>
<blockquote>
<p>è¯·ç®€è¿°é›†çº¿å™¨å’Œç½‘æ¡¥çš„å¼‚åŒç‚¹ã€‚</p>
</blockquote>
<p>ç›¸åŒç‚¹ï¼šéƒ½æ˜¯å±€åŸŸç½‘ç»„ç½‘è®¾å¤‡ã€‚</p>
<p>ä¸åŒç‚¹ï¼šé›†çº¿å™¨å…·ä½“å®ç°åœ¨ç‰©ç†å±‚ï¼›ç½‘æ¡¥å…·ä½“å®ç°åœ¨æ•°æ®é“¾è·¯å±‚ã€‚</p>
<p>é›†çº¿å™¨ä»…å…·æœ‰ç®€å•çš„ä¿¡å·æ•´å½¢å’Œæ”¾å¤§çš„åŠŸèƒ½ï¼›ç½‘æ¡¥åˆ™æä¾›ä¿¡å·çš„å­˜å‚¨&#x2F;è½¬å‘ã€æ•°æ®è¿‡æ»¤ç­‰èƒ½åŠ›ã€‚</p>
<p>é›†çº¿å™¨ä»…æ˜¯ä¸€ç§ç¡¬è®¾å¤‡ï¼Œè€Œç½‘æ¡¥æ—¢åŒ…æ‹¬ç¡¬ä»¶åˆåŒ…æ‹¬è½¯ä»¶ã€‚</p>
<p>é›†çº¿å™¨ä»…åªèƒ½äº’è¿åŒç­‰é€Ÿç‡çš„LANï¼Œè€Œç½‘æ¡¥å¯æ”¯æŒä¸åŒé€Ÿç‡çš„LANäº’è¿ã€‚</p>
<blockquote>
<p>å‡å®šä¸€ä¸ªISPæ‹¥æœ‰å½¢ä¸º101.101.100.0&#x2F;23çš„åœ°å€å—ï¼Œè¦åˆ†é…ç»™å››ä¸ªå•ä½ä½¿ç”¨ï¼ŒAå•ä½éœ€è¦115ä¸ªIPåœ°å€ï¼ŒBå•ä½éœ€è¦238ä¸ªåœ°å€ï¼ŒCå•ä½éœ€è¦50ä¸ªIPåœ°å€ï¼ŒDå•ä½éœ€è¦29ä¸ªIPåœ°å€ã€‚è¯·æä¾›æ»¡è¶³å››ä¸ªå•ä½éœ€è¦çš„åœ°å€å—åˆ’åˆ†ï¼ˆå½¢å¼ä¸ºa.b.c.d&#x2F;xï¼‰ã€‚</p>
</blockquote>
<p>Aå•ä½ï¼š101.101.101.0&#x2F;25 </p>
<p>Bå•ä½ï¼š101.101.100.0&#x2F;24</p>
<p>Cå•ä½ï¼š101.101.101.128&#x2F;26 </p>
<p>Då•ä½ï¼š101.101.101.192&#x2F;26</p>
<blockquote>
<p>æŸä¸€ä¸ªæ•°æ®é€šä¿¡ç³»ç»Ÿé‡‡ç”¨CRCæ ¡éªŒæ–¹å¼ï¼Œè¦å‘é€çš„æ•°æ®f(x)çš„å€¼ä¸º10010011011ï¼Œç”Ÿæˆå¤šé¡¹å¼G(x)çš„äºŒè¿›åˆ¶æ¯”ç‰¹åºåˆ—ä¸º10111ï¼Œè¯·é—®ï¼š</p>
<p>(1)å‘é€æ–¹å®é™…å‘å‡ºçš„æ•°æ®fâ€™(x)æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>(2)æ¥æ”¶æ–¹æ”¶åˆ°çš„fâ€™(x)çš„ç¬¬ä¸‰ä¸ªæ¯”ç‰¹ç”±0å˜ä¸º1ï¼Œè¯·é—®æ¥æ”¶æ–¹èƒ½å¦æ£€æµ‹å‡ºè¯¥é”™è¯¯ï¼Ÿæ˜¯å¦‚ä½•æ£€æµ‹çš„ï¼Ÿ</p>
</blockquote>
<p>ï¼ˆ1ï¼‰100100110111100</p>
<p>ï¼ˆ2)	èƒ½æ£€æµ‹å‡ºæ¥ï¼Œä½™æ•°ä¸ä¸º0(æ–°å¸§100100110111100å†ç”¨ä¸Šé¢é€‰å®šçš„é™¤æ•°10111ä»¥â€œæ¨¡2é™¤æ³•â€æ–¹å¼å»é™¤ï¼ŒéªŒè¯ä½™æ•°æ˜¯å¦ä¸º0)</p>
<blockquote>
<p>ä¸€ä¸ªCSMAï¼CDåŸºå¸¦æ€»çº¿ç½‘é•¿åº¦ä¸º1000ç±³ï¼Œä¿¡å·ä¼ æ’­é€Ÿåº¦ä¸º200ç±³ï¼å¾®ç§’ï¼Œå‡å¦‚ä½äºæ€»çº¿ä¸¤ç«¯çš„èŠ‚ç‚¹ï¼Œåœ¨å‘é€æ•°æ®å¸§æ—¶å‘ç”Ÿäº†å†²çªï¼Œè¯•é—®ï¼š</p>
<p>ï¼ˆ1ï¼‰ä¸¤èŠ‚ç‚¹é—´çš„ä¿¡å·ä¼ æ’­å»¶è¿Ÿæ˜¯å¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ2ï¼‰æœ€å¤šç»è¿‡å¤šé•¿æ—¶é—´æ‰èƒ½æ£€æµ‹åˆ°å†²çªï¼Ÿ</p>
</blockquote>
<p>ï¼ˆ1ï¼‰ä¸¤èŠ‚ç‚¹é—´çš„ä¿¡å·ä¼ æ’­å»¶è¿Ÿï¼ša&#x3D;1000ï¼200&#x3D;5å¾®ç§’</p>
<p>ï¼ˆ2ï¼‰å†²çªæ£€æµ‹æœ€é•¿æ—¶é—´ï¼š2a&#x3D;10å¾®ç§’</p>
<blockquote>
<p>ç®€è¿°TCPå»ºç«‹è¿æ¥çš„è¿‡ç¨‹, è¯•ç”¨å…·ä½“ä¾‹å­è¯´æ˜ä¸ºä»€ä¹ˆåœ¨è¿è¾“è¿æ¥å»ºç«‹æ—¶è¦ä½¿ç”¨ä¸‰æ¬¡æ¡æ‰‹ã€‚è¯´æ˜å¦‚ä¸è¿™æ ·åšå¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µã€‚ï¼ˆç”»å‡ºä¸‰æ¬¡æ¡æ‰‹è¿æ¥å»ºç«‹å›¾ï¼‰</p>
</blockquote>
<p>ä¸‰æ¬¡æ¡æ‰‹å®Œæˆä¸¤ä¸ªé‡è¦åŠŸèƒ½ï¼Œæ—¢è¦åŒæ–¹åšå¥½å‘é€æ•°æ®çš„å‡†å¤‡å·¥ä½œï¼ˆåŒæ–¹éƒ½çŸ¥é“å½¼æ­¤å·²å‡†å¤‡å¥½ï¼‰ï¼Œä¹Ÿè¦å…è®¸åŒæ–¹å°±åˆå§‹åºåˆ—å·è¿›è¡Œåå•†ï¼Œè¿™ä¸ªåºåˆ—å·åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­è¢«å‘é€ä¸ç¡®è®¤ã€‚</p>
<p>ç°åœ¨æŠŠä¸‰æ¬¡æ¡æ‰‹æ”¹æˆä»…éœ€è¦ä¸¤æ¬¡æ¡æ‰‹ï¼Œæ­»é”æ˜¯å¯èƒ½å‘ç”Ÿçš„ã€‚ä¸¾ä¸ªä¾‹å­ã€‚è€ƒè™‘è®¡ç®—æœºAå’ŒB ä¹‹é—´çš„é€šä¿¡ã€‚å‡å®šB ç»™A å‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚åˆ†ç»„ï¼ŒA æ”¶åˆ°äº†è¿™ä¸ªåˆ†ç»„ï¼Œå¹¶å‘é€äº†ç¡®è®¤åº”ç­”åˆ†ç»„ã€‚æŒ‰ç…§ä¸¤æ¬¡æ¡æ‰‹çš„åå®šï¼ŒA è®¤ä¸ºè¿æ¥å·²ç»æˆåŠŸçš„å»ºç«‹äº†ï¼Œå¯ä»¥å¼€å§‹å‘é€æ•°æ®åˆ†ç»„ã€‚å¯æ˜¯ï¼ŒB åœ¨A çš„åº”ç­”åˆ†ç»„åœ¨ä¼ è¾“ä¸­è¢«ä¸¢å¤±çš„æƒ…å†µä¸‹ï¼Œå°†ä¸çŸ¥é“A æ˜¯å¦å·²ç»å‡†å¤‡å¥½ï¼Œä¸çŸ¥é“A å»ºè®®ä»€ä¹ˆæ ·çš„åºåˆ—å·ç”¨äºA åˆ°B çš„äº¤é€šï¼Œä¹Ÿä¸çŸ¥é“A æ˜¯å¦åŒæ„Bæ‰€å»ºè®®çš„ç”¨äºB åˆ°Aäº¤é€šçš„åˆå§‹åºåˆ—å·ï¼ŒB ç”šè‡³æ€€ç–‘A æ˜¯å¦æ”¶åˆ°è‡ªå·±çš„è¿æ¥è¯·æ±‚åˆ†ç»„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒB è®¤ä¸ºè¿æ¥è¿˜æœªå»ºç«‹æˆåŠŸï¼Œå°†å¿½ç•¥A å‘æ¥çš„ä»»ä½•æ•°æ®åˆ†ç»„ï¼Œåªç­‰å¾…æ¥æ”¶è¿æ¥ç¡®è®¤åº”ç­”åˆ†ç»„ã€‚è€ŒAåœ¨å‘å‡ºçš„åˆ†ç»„è¶…æ—¶åï¼Œé‡å¤å‘é€åŒæ ·çš„åˆ†ç»„ã€‚è¿™æ ·å°±å½¢æˆäº†æ­»é”ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-26_14-55-51.png"></p>
<blockquote>
<p>é‡‡ç”¨ç”Ÿæˆå¤šé¡¹å¼ xâ¶+xâ´+x+1 å‘é€çš„æŠ¥æ–‡åˆ°è¾¾æ¥æ”¶æ–¹ä¸º101011000110ï¼Œæ‰€æ¥æ”¶çš„æŠ¥æ–‡æ˜¯å¦æ­£ç¡®ï¼Ÿè¯•è¯´æ˜ç†ç”±ã€‚ï¼ˆè¦æ±‚å†™å‡ºè¿ç®—è¿‡ç¨‹ã€‚ï¼‰</p>
</blockquote>
<p>å¤šé¡¹å¼ xâ¶+xâ´+x+1 å¯¹åº”çš„ä½ä¸²æ˜¯1010011ï¼Œç”¨å®ƒæ¥é™¤æ¥æ”¶åˆ°çš„æŠ¥æ–‡ï¼Œè‹¥èƒ½æ•´é™¤åˆ™æ‰€æ¥æ”¶æŠ¥æ–‡æ­£ç¡®ã€‚èƒ½å¤Ÿæ•´é™¤ï¼Œæ‰€ä»¥æ”¶åˆ°çš„æŠ¥æ–‡æ˜¯æ­£ç¡®çš„ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-26_15-09-44.png"></p>
<p>ç”±æ­¤åˆ¤æ–­æ¥æ”¶åˆ°çš„æŠ¥æ–‡æ˜¯æ­£ç¡®çš„ã€‚</p>
<blockquote>
<p>æŸå•ä½åˆ†é…åˆ°ä¸€ä¸ªCç±»IPåœ°å€ï¼Œå…¶ç½‘ç»œåœ°å€ä¸º202.33.23.0ã€‚ä¸ºäº†ä½¿è¯¥å•ä½çš„ä¸»æœºä¾¿äºç®¡ç†ï¼Œæ‹Ÿå°†è¯¥å•ä½æ‰€å±ä¸»æœºåˆ’åˆ†ä¸º12ä¸ªå­ç½‘ã€‚è¯•è®¡ç®—(è¦æ±‚å†™å‡ºè¿ç®—è¿‡ç¨‹)</p>
<p>(1)è¯¥ç½‘ç»œçš„å­ç½‘ä½å å‡ ä½ï¼Ÿ</p>
<p>(2)æ±‚è¯¥å•ä½è¿™12ä¸ªå­ç½‘æœ€å¤šå¯ä»¥æ‹¥æœ‰çš„ä¸»æœºå°æ•°ï¼Ÿ</p>
<p>(3)å†™å‡ºå­ç½‘æ©ç ï¼Œåˆ—å‡ºæ¯ä¸ªå­ç½‘çš„åœ°å€ï¼Œä»»é€‰å…¶ä¸­1ä¸ªå¯ç”¨çš„å­ç½‘ï¼Œå†™å‡ºè¿™ä¸ªå­ç½‘ç»œçš„ç½‘ç»œæ ‡è¯†ï¼Œå¯åˆ†é…ç»™ä¸»æœºçš„åœ°å€èŒƒå›´å’Œå¹¿æ’­åœ°å€ã€‚</p>
</blockquote>
<p>(1)	C ç±» IP åœ°å€çš„é»˜è®¤å­ç½‘æ©ç ä¸º 255.255.255.0ï¼Œå³å‰ 24 ä½ä¸ºç½‘ç»œä½ï¼Œå 8 ä½ä¸ºä¸»æœºä½ã€‚ç”±äºè¦å°†è¯¥å•ä½æ‰€å±ä¸»æœºåˆ’åˆ†ä¸º 12 ä¸ªå­ç½‘ï¼Œæ‰€ä»¥éœ€è¦å°†ä¸»æœºä½ä¸­çš„è‹¥å¹²ä½åˆ’åˆ†ä¸ºå­ç½‘ä½ã€‚ç”±äº 2^3 &lt; 12 &lt;&#x3D; 2^4ï¼Œæ‰€ä»¥éœ€è¦å°†ä¸»æœºä½ä¸­çš„å‰ 4 ä½åˆ’åˆ†ä¸ºå­ç½‘ä½ã€‚å› æ­¤ï¼Œè¯¥ç½‘ç»œçš„å­ç½‘ä½å  4 ä½ã€‚</p>
<p>(2)	ç”±äºå­ç½‘ä½å äº†ä¸»æœºä½ä¸­çš„å‰ 4 ä½ï¼Œæ‰€ä»¥æ¯ä¸ªå­ç½‘ä¸­å‰©ä½™çš„ä¸»æœºä½æœ‰ 8-4&#x3D;4 ä½ã€‚å› æ­¤ï¼Œæ¯ä¸ªå­ç½‘æœ€å¤šå¯ä»¥æ‹¥æœ‰çš„ä¸»æœºå°æ•°ä¸º 2^4-2&#x3D;14 å°ã€‚</p>
<table>
<thead>
<tr>
<th>å­ç½‘ç¼–å·</th>
<th>å­ç½‘åœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>202.33.23.16</td>
</tr>
<tr>
<td>2</td>
<td>202.33.23.32</td>
</tr>
<tr>
<td>3</td>
<td>202.33.23.48</td>
</tr>
<tr>
<td>4</td>
<td>202.33.23.64</td>
</tr>
<tr>
<td>5</td>
<td>202.33.23.80</td>
</tr>
<tr>
<td>6</td>
<td>202.33.23.96</td>
</tr>
<tr>
<td>7</td>
<td>202.33.23.112</td>
</tr>
<tr>
<td>8</td>
<td>202.33.23.128</td>
</tr>
<tr>
<td>9</td>
<td>202.33.23.144</td>
</tr>
<tr>
<td>10</td>
<td>202.33.23.160</td>
</tr>
<tr>
<td>11</td>
<td>202.33.23.176</td>
</tr>
<tr>
<td>12</td>
<td>202.33.23.192</td>
</tr>
</tbody></table>
<p>é€‰æ‹©å­ç½‘1ï¼Œå¦‚æœé€‰æ‹©å­ç½‘0001,ä¸»æœºåœ°å€èŒƒå›´ä¸º202.33.23.17â€”202.33.23.30ï¼Œ å¹¿æ’­åœ°å€ä¸ºï¼š202.33.23.31ã€‚</p>
<blockquote>
<p>ç®€è¿°TCP&#x2F;IPçš„5å±‚ä½“ç³»ç»“æ„åŠå„å±‚çš„åŠŸèƒ½æœåŠ¡?</p>
</blockquote>
<p>åº”ç”¨å±‚application layer:æ”¯æŒç½‘ç»œåº”ç”¨ï¼ŒæŠ¥æ–‡ä¼ é€</p>
<p>ä¼ è¾“å±‚transport layer:ä¸»æœºè¿›ç¨‹é—´æŠ¥æ–‡æ®µä¼ é€</p>
<p>ç½‘ç»œå±‚network layer:ä¸»æœº(æºç›®æ ‡èŠ‚ç‚¹)é—´åˆ†ç»„ä¼ é€</p>
<p>é“¾è·¯å±‚link layer:ç›¸é‚»ç½‘ç»œèŠ‚ç‚¹é—´çš„æ•°æ®å¸§ä¼ é€</p>
<p>ç‰©ç†å±‚physical layer:ç‰©ç†ä»‹è´¨ä¸Šçš„æ¯”ç‰¹ä¼ é€</p>
<blockquote>
<p>IPæ•°æ®æŠ¥æºå¸¦5000å­—èŠ‚æ•°æ®ï¼Œå®ƒä¸‹ä¸€æ­¥ç»ç”±MTUä¸º1500å­—èŠ‚çš„ä»¥å¤ªç½‘ï¼Œæ•°æ®æŠ¥åˆ†å‡ ç‰‡?å¦‚ä½•åˆ†ç‰‡?å¹¶æ ‡æ˜æ¯ä¸ªåˆ†ç‰‡çš„ç‰‡å¤´ä¸­â€œç‰‡åç§»â€å­—æ®µçš„æ•°å€¼</p>
</blockquote>
<table>
<thead>
<tr>
<th>ç‰‡å¤´</th>
<th>åç§»</th>
<th>æ•°æ®å¤§å°</th>
</tr>
</thead>
<tbody><tr>
<td>ç‰‡1å¤´ï¼ˆæ ‡è¯†&#x3D;xï¼Œæ ‡å¿—ç­‰äº001ï¼Œåç§»0ï¼‰</td>
<td>0</td>
<td>1480å­—èŠ‚</td>
</tr>
<tr>
<td>ç‰‡2å¤´ï¼ˆæ ‡è¯†&#x3D;xï¼Œæ ‡å¿—ç­‰äº001ï¼Œåç§»185ï¼‰</td>
<td>185</td>
<td>1480å­—èŠ‚</td>
</tr>
<tr>
<td>ç‰‡3å¤´ï¼ˆæ ‡è¯†&#x3D;xï¼Œæ ‡å¿—ç­‰äº001ï¼Œåç§»370ï¼‰</td>
<td>370</td>
<td>1480å­—èŠ‚</td>
</tr>
<tr>
<td>ç‰‡4å¤´ï¼ˆæ ‡è¯†&#x3D;xï¼Œæ ‡å¿—ç­‰äº001ï¼Œåç§»555ï¼‰</td>
<td>555</td>
<td>560å­—èŠ‚</td>
</tr>
</tbody></table>
<p>å½“ä¸€ä¸ª IP æ•°æ®æŠ¥æºå¸¦çš„æ•°æ®é•¿åº¦è¶…è¿‡ä¸‹ä¸€è·³ç½‘ç»œçš„ MTU æ—¶ï¼Œå°±éœ€è¦å¯¹æ•°æ®æŠ¥è¿›è¡Œåˆ†ç‰‡ã€‚åœ¨æœ¬é¢˜ä¸­ï¼ŒIP æ•°æ®æŠ¥æºå¸¦ 5000 å­—èŠ‚æ•°æ®ï¼Œè€Œä¸‹ä¸€æ­¥ç»ç”± MTU ä¸º 1500 å­—èŠ‚çš„ä»¥å¤ªç½‘ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•°æ®æŠ¥è¿›è¡Œåˆ†ç‰‡ã€‚ç”±äº IP å¤´éƒ¨é•¿åº¦ä¸º 20 å­—èŠ‚ï¼Œæ‰€ä»¥æ¯ä¸ªåˆ†ç‰‡ä¸­æœ€å¤šå¯ä»¥æºå¸¦ 1500-20&#x3D;1480 å­—èŠ‚çš„æ•°æ®ã€‚å› æ­¤ï¼Œ5000 å­—èŠ‚çš„æ•°æ®éœ€è¦åˆ†æˆ 5000&#x2F;1480&#x3D;3.38 ä¸ªåˆ†ç‰‡ï¼Œå³è‡³å°‘éœ€è¦ 4 ä¸ªåˆ†ç‰‡ã€‚</p>
<p>â€œç‰‡åç§»â€ï¼ˆFragment Offsetï¼‰æ˜¯ IP å¤´éƒ¨ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œå®ƒè¡¨ç¤ºåˆ†ç‰‡åœ¨åŸå§‹æ•°æ®æŠ¥ä¸­çš„åç§»é‡ã€‚ç‰‡åç§»çš„å•ä½æ˜¯ 8 å­—èŠ‚ï¼Œå³<strong>æ¯ä¸ªåˆ†ç‰‡çš„æ•°æ®é•¿åº¦éƒ½å¿…é¡»æ˜¯ 8 çš„å€æ•°</strong>ï¼ˆæœ€åä¸€ä¸ªåˆ†ç‰‡é™¤å¤–ï¼‰ã€‚å‰ä¸¤ä¸ªåˆ†ç‰‡ä¸­æ¯ä¸ªåˆ†ç‰‡éƒ½æºå¸¦ 1480 å­—èŠ‚çš„æ•°æ®ï¼Œæœ€åä¸€ä¸ªåˆ†ç‰‡æºå¸¦å‰©ä½™çš„ 1040 å­—èŠ‚æ•°æ®ã€‚æ¯ä¸ªåˆ†ç‰‡éƒ½æœ‰è‡ªå·±çš„ IP å¤´éƒ¨ï¼Œå…¶ä¸­â€œç‰‡åç§»â€å­—æ®µè¡¨ç¤ºè¯¥åˆ†ç‰‡åœ¨åŸå§‹æ•°æ®æŠ¥ä¸­çš„åç§»é‡ï¼ˆä»¥ 8 å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚å› æ­¤ï¼Œä¸‰ä¸ªåˆ†ç‰‡çš„â€œç‰‡åç§»â€å­—æ®µçš„æ•°å€¼åˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªåˆ†ç‰‡ï¼š0</li>
<li>ç¬¬äºŒä¸ªåˆ†ç‰‡ï¼š1480&#x2F;8&#x3D;185</li>
<li>ç¬¬ä¸‰ä¸ªåˆ†ç‰‡ï¼š(1480+1480)&#x2F;8&#x3D;370</li>
<li>ç¬¬å››ä¸ªåˆ†ç‰‡ï¼š(1480+1480+1480)&#x2F;8&#x3D;555</li>
</ul>
<blockquote>
<p>ç®€è¿°æ‹¥å¡æ§åˆ¶ä¸æµé‡æ§åˆ¶äº§ç”Ÿçš„åŸå› å’Œè§£å†³çš„é—®é¢˜ã€‚å®ƒä»¬è§£å†³é—®é¢˜çš„æ ¹æœ¬é€”å¾„æ˜¯ä»€ä¹ˆ?</p>
</blockquote>
<p> å¦‚æœæ¥æ”¶æ–¹çš„æ¥æ”¶ç¼“å­˜åŒºå°å’Œå¤„ç†èƒ½åŠ›ä½éƒ½ä¼šé€ æˆå‘æ–¹çš„æ•°æ®æµâ€œæ·¹æ²¡â€æ”¶æ–¹çš„æ¥æ”¶ç¼“å†²åŒºï¼Œä½¿æ•°æ®ä¸¢å¤±ï¼Œæµé‡æ§åˆ¶ç”¨æ¥ä¿è¯å‘é€æ•°æ®åœ¨ä»»ä½•æƒ…å†µä¸‹ä¸éƒ½ä¸â€œæ·¹æ²¡â€æ”¶æ–¹çš„æ¥æ”¶ç¼“å†²åŒºã€‚</p>
<p>æ‹¥å¡æ˜¯åˆ†ç»„äº¤æ¢ç½‘ç»œå…±åŒçš„é—®é¢˜ã€‚äº§ç”Ÿæ‹¥å¡çš„åŸå› æ˜¯ç½‘ç»œä¸­ä¸€ä¸ªæˆ–å¤šä¸ªè·¯ç”±å™¨çš„æ•°æ®æŠ¥è´Ÿè½½ç›¸å¯¹å®ƒçš„å¤„ç†èƒ½åŠ›è¿‡é‡ï¼Œè·¯ç”±å™¨ä¸å¾—ä¸å°†è¿‡å¤šçš„æ•°æ®æŠ¥æ”¾åœ¨ç¼“å†²é˜Ÿåˆ—ä¸­è¿›è¡Œæ’é˜Ÿå¤„ç†ï¼Œé€ æˆä¼ è¾“æ—¶å»¶ã€‚ä¸¥é‡æƒ…å†µä¸‹ï¼Œè·¯ç”±å™¨ä¸¢å¤±æ•°æ®æŠ¥ã€‚</p>
<p>TCPæµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶çš„æ ¹æ®æªæ–½æ˜¯å‡æ…¢æºç‚¹çš„å‘é€é€Ÿç‡ï¼Œå³æºæŠ‘åˆ¶ã€‚</p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯è®¡ç®—æœºç½‘ç»œåè®®ï¼Œå…¶åŸºæœ¬è¦ç´ æœ‰å“ªäº›?</p>
</blockquote>
<p>ç½‘ç»œåè®®æ˜¯æŒ‡é€šä¿¡åŒæ–¹å¿…é¡»éµå®ˆçš„æŠ¥æ–‡æ ¼å¼ã€è§„åˆ™å’ŒåŠ¨ä½œçš„é›†åˆ<br>åŸºæœ¬è¦ç´ ï¸°è¯­æ³•ã€è¯­ä¹‰å’ŒåŒæ­¥</p>
<blockquote>
<p>é€šå¸¸è·¯ç”±å™¨å¤„ç†å› ç‰¹ç½‘åè®®æ ˆçš„å“ªäº›å±‚æ¬¡?2å±‚äº¤æ¢æœºå¤„ç†å“ªäº›å±‚æ¬¡?ä¸»æœºå¤„ç†å“ªäº›å±‚æ¬¡?é›†çº¿å™¨å¤„ç†å“ªäº›å±‚æ¬¡?</p>
</blockquote>
<p>è·¯ç”±å™¨å¤„ç†ç¬¬ä¸€å±‚åˆ°ç¬¬ä¸‰å±‚</p>
<p>é“¾è·¯äº¤æ¢æœºå¤„ç†ç¬¬ä¸€å±‚å’Œç¬¬äºŒå±‚</p>
<p>ä¸»æœºå¤„ç†æ‰€æœ‰çš„5å±‚</p>
<p>é›†çº¿å™¨å¤„ç†ç¬¬ä¸€å±‚</p>
<ul>
<li>è·¯ç”±å™¨ï¼šè·¯ç”±å™¨æ˜¯ä¸€ç§ç½‘ç»œå±‚è®¾å¤‡ï¼Œå®ƒè´Ÿè´£åœ¨ä¸åŒç½‘ç»œä¹‹é—´è½¬å‘æ•°æ®åŒ…ã€‚å› æ­¤ï¼Œè·¯ç”±å™¨å¤„ç†å› ç‰¹ç½‘åè®®æ ˆçš„ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ã€‚</li>
<li>2å±‚äº¤æ¢æœºï¼š2å±‚äº¤æ¢æœºæ˜¯ä¸€ç§æ•°æ®é“¾è·¯å±‚è®¾å¤‡ï¼Œå®ƒè´Ÿè´£åœ¨åŒä¸€ç½‘ç»œå†…è½¬å‘æ•°æ®å¸§ã€‚å› æ­¤ï¼Œ2å±‚äº¤æ¢æœºå¤„ç†å› ç‰¹ç½‘åè®®æ ˆçš„æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ã€‚</li>
<li>ä¸»æœºï¼šä¸»æœºæ˜¯ä¸€ç§ç»ˆç«¯è®¾å¤‡ï¼Œå®ƒéœ€è¦å¤„ç†å› ç‰¹ç½‘åè®®æ ˆçš„æ‰€æœ‰å±‚æ¬¡ï¼ŒåŒ…æ‹¬åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ã€‚</li>
<li>é›†çº¿å™¨ï¼šé›†çº¿å™¨æ˜¯ä¸€ç§ç‰©ç†å±‚è®¾å¤‡ï¼Œå®ƒè´Ÿè´£åœ¨ç‰©ç†åª’ä»‹ä¸Šä¼ è¾“æ¯”ç‰¹æµã€‚å› æ­¤ï¼Œé›†çº¿å™¨ä»…å¤„ç†å› ç‰¹ç½‘åè®®æ ˆçš„ç‰©ç†å±‚ã€‚</li>
</ul>
<blockquote>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ‹“æ‰‘ç»“æ„å›¾ï¼Œå¡«å†™èŠ‚ç‚¹zçš„è·ç¦»å‘é‡è¡¨ï¼ˆä¸è€ƒè™‘æ¯’æ€§é€†è½¬)</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-26_16-30-16.png"></p>
<p>åˆå§‹åŒ–ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>z</th>
<th>x</th>
<th>y</th>
<th>v</th>
</tr>
</thead>
<tbody><tr>
<td>z</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ç¬¬ä¸€è½®è¿­ä»£ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>z</th>
<th>x</th>
<th>y</th>
<th>v</th>
</tr>
</thead>
<tbody><tr>
<td>z</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ç¬¬äºŒè½®è¿­ä»£ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>z</th>
<th>x</th>
<th>y</th>
<th>v</th>
</tr>
</thead>
<tbody><tr>
<td>z</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ç¬¬ä¸‰è½®è¿­ä»£ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>z</th>
<th>x</th>
<th>y</th>
<th>v</th>
</tr>
</thead>
<tbody><tr>
<td>z</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th>z</th>
<th>x</th>
<th>y</th>
<th>v</th>
</tr>
</thead>
<tbody><tr>
<td>z</td>
<td>0</td>
<td>2</td>
<td>10</td>
<td>5</td>
</tr>
<tr>
<td>x</td>
<td>âˆ</td>
<td>âˆ</td>
<td>âˆ</td>
<td>âˆ</td>
</tr>
<tr>
<td>y</td>
<td>âˆ</td>
<td>âˆ</td>
<td>âˆ</td>
<td>âˆ</td>
</tr>
<tr>
<td>v</td>
<td>âˆ</td>
<td>âˆ</td>
<td>âˆ</td>
<td>âˆ</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th>z</th>
<th>x</th>
<th>y</th>
<th>v</th>
</tr>
</thead>
<tbody><tr>
<td>z</td>
<td>0</td>
<td>2</td>
<td>3</td>
<td><strong>5</strong></td>
</tr>
<tr>
<td>x</td>
<td>2</td>
<td>0</td>
<td>1</td>
<td>âˆ</td>
</tr>
<tr>
<td>y</td>
<td>10</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>v</td>
<td><strong>5</strong></td>
<td>âˆ</td>
<td>1</td>
<td>0</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th>z</th>
<th>x</th>
<th>y</th>
<th>v</th>
</tr>
</thead>
<tbody><tr>
<td>z</td>
<td>0</td>
<td>2</td>
<td>3</td>
<td><strong>4</strong></td>
</tr>
<tr>
<td>x</td>
<td>2</td>
<td>0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>y</td>
<td>3</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>v</td>
<td><strong>5</strong></td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th>z</th>
<th>x</th>
<th>y</th>
<th>v</th>
</tr>
</thead>
<tbody><tr>
<td>z</td>
<td>0</td>
<td>2</td>
<td>3</td>
<td><strong>4</strong></td>
</tr>
<tr>
<td>x</td>
<td>2</td>
<td>0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>y</td>
<td>3</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>v</td>
<td><strong>4</strong></td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
</tbody></table>
<p>ï¼ˆæœ‰ç‚¹éº»çƒ¦ï¼‰</p>
<blockquote>
<p>ç®€è¿°HTTPä½¿ç”¨TCPè¿æ¥çš„ä¸åŒæ–¹å¼?</p>
</blockquote>
<p>åŒ…æ‹¬éæŒä¹…HTTPè¿æ¥æŒä¹…HTTPè¿æ¥</p>
<p>éæŒä¹…HTTPè¿æ¥æ¯æ¬¡è¯·æ±‚éƒ½è¦å»ºç«‹ä¸€ä¸ªTCPè¿æ¥</p>
<p>æŒä¹…HTTPè¿æ¥æ‰€æœ‰è¯·æ±‚éƒ½ä½¿ç”¨ä¸€ä¸ªTCPè¿æ¥åŒ…æ‹¬å¸¦æµæ°´çº¿æ–¹å¼å’Œä¸å¸¦æµæ°´çº¿æ–¹å¼</p>
<p>å¸¦æµæ°´çº¿æ–¹å¼å¯ä»¥è¿ç»­å‘é€å¤šä¸ªè¯·æ±‚</p>
<p>ä¸å¸¦æµæ°´çº¿æ–¹å¼å‘é€ä¸€æ¬¡è¯·æ±‚åå¿…é¡»ç­‰å¾…å“åº”åæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚</p>
<blockquote>
<p>CSMAå¯¹ALOHAçš„æ”¹è¿›ä¸»è¦æ˜¯ä»€ä¹ˆ?ç›®çš„æ˜¯ä»€ä¹ˆ?</p>
</blockquote>
<p>è½½æ³¢ç›‘å¬å¤šç‚¹æ¥å…¥CSMAæ˜¯ä»ALOHAæ¼”å˜å‡ºçš„ä¸€ç§åè®®ï¼Œä¸»è¦æ”¹è¿›æ˜¯å¢åŠ äº†è½½æ³¢ç›‘å¬æœºåˆ¶ï¼Œå³æ¯ä¸ªç«™ç‚¹åœ¨å‘é€æ•°æ®å‰å…ˆç›‘å¬ä¿¡é“ä¸Šå…¶ä»–ç«™æ˜¯å¦åœ¨å‘é€æ•°æ®ï¼Œå¦‚æœç›‘å¬åˆ°å…¶ä»–ç«™ç‚¹åœ¨å‘é€æ•°æ®ï¼Œå°±æš‚ä¸å‘é€ã€‚</p>
<p>è¿™ä¸€æ”¹è¿›çš„ç›®çš„æ˜¯å‡å°‘å‘é€æ—¶çš„éšæ„æ€§å’Œç›²ç›®æ€§ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„å†²çªï¼Œæé«˜ç³»ç»Ÿçš„ååé‡ã€‚</p>
<p>ï¼ˆè¡¥å……ï¼šçº¯ALOHAåè®®çš„å·¥ä½œåŸç†å’Œç‰¹ç‚¹å·¥ä½œåŸç†ï¼šç«™ç‚¹åªè¦äº§ç”Ÿå¸§ï¼Œå°±ç«‹å³å‘é€åˆ°ä¿¡é“ä¸Šï¼›è§„å®šæ—¶é—´å†…è‹¥æ”¶åˆ°åº”ç­”ï¼Œè¡¨ç¤ºå‘é€æˆåŠŸï¼Œå¦åˆ™é‡å‘ã€‚ï¼‰</p>
<blockquote>
<p>ç®€è¿°ç½‘ç»œåœ°å€è½¬æ¢NATçš„å®ç°è¿‡ç¨‹?</p>
</blockquote>
<p>NAT è½¬æ¢å™¨å¯¹å±€åŸŸç½‘å†…å¤–å‡ºçš„æ•°æ®æŠ¥è¿›è¡Œå¤„ç†ï¼Œå°†æŠ¥æ–‡ä¸­çš„æºåœ°å€å’Œæºç«¯å£å·æ›¿æ¢ä¸º NAT è½¬æ¢å™¨çš„ IP åœ°å€å’Œæ–°çš„ç«¯å£å·ã€‚åŒæ—¶ï¼ŒNAT è½¬æ¢å™¨è®°å½•æ›¿æ¢çš„ IP åœ°å€å’Œæ–°çš„ç«¯å£å·ï¼Œå¹¶å°†å¯¹åº”å…³ç³»æ·»åŠ åˆ° NAT è½¬æ¢è¡¨ä¸­ã€‚å¯¹äºè¿›å…¥å±€åŸŸç½‘å†…çš„æ•°æ®ï¼ŒNAT è½¬æ¢å™¨æ ¹æ®æŠ¥æ–‡ä¸­çš„ç›®çš„åœ°å€æŸ¥æ‰¾ NAT è½¬æ¢è¡¨ï¼Œå¾—åˆ°å¯¹åº”çš„å†…éƒ¨ç½‘ç»œçš„ IP åœ°å€å’Œç«¯å£å·ï¼Œå¹¶ç”¨å†…éƒ¨çš„ IP åœ°å€å’Œç«¯å£å·æ›¿æ¢æ•°æ®æŠ¥ä¸­çš„ç›®çš„ IP å’Œç›®çš„ç«¯å£å·ã€‚</p>
<blockquote>
<p>TCPå‘ç°æ‹¥å¡çš„é€”å¾„æ˜¯ä»€ä¹ˆ?</p>
</blockquote>
<p>æŠ¥æ–‡æ®µçš„è¶…æ—¶é‡ä¼ ã€‚<br>æ¥è‡ªICMPçš„æºæŠ‘åˆ¶æŠ¥æ–‡ã€‚<br>æ”¶åˆ°3ä¸ªé‡å¤çš„ç¡®è®¤è€Œä¸å¿…ç­‰åˆ°é‡ä¼ å®šæ—¶å™¨åˆ°æ—¶ã€‚</p>
<p>ï¼ˆè¡¥å……ï¼šICMPï¼ˆInternet Control Message Protocolï¼‰Internetæ§åˆ¶æŠ¥æ–‡åè®®ã€‚å®ƒæ˜¯TCP&#x2F;IPåè®®ç°‡çš„ä¸€ä¸ªå­åè®®ï¼Œç”¨äºåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ã€‚æ§åˆ¶æ¶ˆæ¯æ˜¯æŒ‡ç½‘ç»œé€šä¸é€šã€ä¸»æœºæ˜¯å¦å¯è¾¾ã€è·¯ç”±æ˜¯å¦å¯ç”¨ç­‰ç½‘ç»œæœ¬èº«çš„æ¶ˆæ¯ã€‚è¿™äº›æ§åˆ¶æ¶ˆæ¯è™½ç„¶å¹¶ä¸ä¼ è¾“ç”¨æˆ·æ•°æ®ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·æ•°æ®çš„ä¼ é€’èµ·ç€é‡è¦çš„ä½œç”¨ã€‚ï¼‰</p>
<blockquote>
<p>åœ¨åœæ­¢ç­‰å¾…åè®®ä¸­å¦‚æœä¸ä½¿ç”¨ç¼–å·æ˜¯å¦å¯è¡Œï¼Œå¹¶è¯´æ˜?</p>
</blockquote>
<p>ç­”:ä¸å¯è¡Œã€‚å¦‚æœä¸é‡‡ç”¨ç¼–å·ï¼Œæ¥æ”¶æ–¹å¯èƒ½ä¼šæ¥æ”¶åˆ°é‡å¤çš„æ•°æ®ï¼Œå¦‚ï¼Œå‘é€æ–¹å‘é€ä¸€ä¸ªåˆ†ç»´åï¼Œæ¥æ”¶æ–¹æ”¶åˆ°è¯¥åˆ†ç»„åå‘é€ç¡®è®¤ï¼Œä½†ç¡®è®¤ä¸¢å¤±ï¼Œæ­¤æ—¶å‘é€æ–¹é‡å‘è¯¥åˆ†ç»„ï¼Œä½†æ¥æ”¶æ–¹æ— æ³•åˆ¤æ–­æ˜¯å¦å’Œå‰é¢çš„ä¸ºåŒä¸€åˆ†ç»„ã€‚</p>
<blockquote>
<p>ä¸»æœºAå‘ä¸»æœºBè¿ç»­å‘é€äº†ä¸¤ä¸ªTCPæŠ¥æ–‡æ®µï¼Œå…¶åºå·åˆ†åˆ«ä¸º70å’Œ100ã€‚ç®€è¦åˆ†æå¹¶å›ç­”å¦‚ä¸‹é—®é¢˜ï¸°<br>(1)ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µæºå¸¦äº†å¤šå°‘ä¸ªå­—èŠ‚çš„æ•°æ®?</p>
<p>(2)ä¸»æœºBæ”¶åˆ°ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µåå‘å›çš„ç¡®è®¤ä¸­çš„ç¡®è®¤å·åº”å½“æ˜¯å¤šå°‘?</p>
<p>(3)å¦‚æœä¸»æœºBæ”¶åˆ°ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µåå‘å›çš„ç¡®è®¤ä¸­çš„ç¡®è®¤å·æ˜¯180ï¼Œè¯•é—®Aå‘é€çš„ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µä¸­çš„æ•°æ®æœ‰å¤šå°‘å­—èŠ‚?</p>
<p>(4)å¦‚æœAå‘é€çš„ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µä¸¢å¤±äº†ï¼Œä½†ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µåˆ°è¾¾äº†Bã€‚Båœ¨ç¬¬äºŒä¸ªæŠ¥<br>æ–‡æ®µåˆ°è¾¾åå‘Aå‘é€ç¡®è®¤ã€‚è¯•é—®è¿™ä¸ªç¡®è®¤å·åº”ä¸ºå¤šå°‘?</p>
<p>(5)å‡å®šç”±Aå‘é€çš„ä¸¤ä¸ªæŠ¥æ–‡æ®µæŒ‰åºåˆ°è¾¾Bã€‚ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¡®è®¤ä¸¢å¤±ï¼Œè€Œç¬¬äºŒä¸ª<br>ç¡®è®¤åœ¨ç¬¬ä¸€ä¸ªè¶…æ—¶é—´éš”ä¹‹åè¾¾åˆ°ã€‚åˆ™ä¸‹ä¸€ä¸ªå‘é€æŠ¥æ–‡æ®µçš„åºå·åº”å½“æ˜¯å¤šå°‘?</p>
</blockquote>
<p>â‘´ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µçš„å¼€å§‹åºå·æ˜¯100ï¼Œè¯´æ˜ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·æ˜¯70åˆ°99ï¼Œæ•…ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µæºå¸¦äº†30ä¸ªå­—èŠ‚çš„ä¿¡æ¯ã€‚<br>(2ã€‰ç”±äºä¸»æœºå·²ç»æ”¶åˆ°äº†ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œå³æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åº”è¯¥æ˜¯99ï¼Œæ•…ä¸‹ä¸€æ¬¡åº”å½“æœŸæœ›æ”¶åˆ°ç¬¬10Oå·åºå·ï¼Œæ•…ç¡®è®¤ä¸­çš„ç¡®è®¤å·æ˜¯100ã€‚<br>(3ï¼‰ç”±äºä¸»æœºBæ”¶åˆ°ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µåå‘å›çš„ç¡®è®¤ä¸­çš„ç¡®è®¤å·æ˜¯180ï¼Œè¯´æ˜äº†å·²ç»æ”¶åˆ°äº†ç¬¬179å·å­—èŠ‚ï¼Œä¹Ÿå°±è¯´æ˜äº†ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µçš„åºå·æ˜¯ä»100åˆ°179ï¼Œæ•…ç¬¬äºŒä¸ªæŠ¥æ–‡æ®µæœ‰80ä¸ªå­—èŠ‚ã€‚<br>(4ï¼‰ç¡®è®¤æ˜¯æ¥æ”¶æ–¹æœŸæœ›æ”¶åˆ°çš„å­—èŠ‚ï¼Œåªè¦æœ‰ä¸€ä¸ªæ²¡æ”¶åˆ°ï¼Œéƒ½ä¸èƒ½å‘é€æ›´é«˜å­—èŠ‚çš„ç¡®è®¤ï¼Œæ‰€ä»¥ä¸»æœºBåº”è¯¥å‘é€ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µçš„å¼€å§‹åºå·ï¼Œå³70ã€‚<br>(5ï¼‰ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¡®è®¤ä¸¢å¤±ï¼Œè€Œç¬¬äºŒä¸ªç¡®è®¤åœ¨ç¬¬ä¸€ä¸ªè¶…æ—¶é—´éš”ä¹‹åè¾¾åˆ°ã€‚è¯´æ˜åœ¨è¶…æ—¶æ—¶ï¼Œè¿˜æ²¡æœ‰æ”¶åˆ°ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œåˆ™éœ€è¦é‡å‘ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œåºå·ä¸º70ã€‚</p>
<blockquote>
<p>åœ¨äº”å±‚åè®®çš„ç½‘ç»œä½“ç³»ç»“æ„ä¸­<br>(1)æœ‰å“ªäº›åè®®å±‚æ¬¡?<br>(2)åœ¨ä¸Šé¢å››å±‚ä¸­ï¼Œåˆ†åˆ«åˆ—ä¸¾å‡ºä¸€ä¸ªåè®®ä¾‹å­ã€‚<br>(3ï¼‰åœ¨ä¸»æœºã€è·¯ç”±å™¨ã€äº¤æ¢æœºå’Œé›†çº¿å™¨è¿™äº›è®¾å¤‡ä¸­ï¼Œåˆ†åˆ«å®ç°äº†ç½‘ç»œä½“ç³»ç»“æ„çš„å“ª<br>äº›å±‚æ¬¡?</p>
</blockquote>
<p>(1)åº”ç”¨å±‚ã€è¿è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚</p>
<p>(2)åº”ç”¨å±‚:HTTPã€DNSã€FTPç­‰<br>è¿è¾“å±‚:TCPã€UDPç­‰<br>ç½‘ç»œå±‚:IPã€ICMPç­‰<br>æ•°æ®é“¾è·¯å±‚ï¸°CSMA&#x2F;CDã€PPPç­‰</p>
<p>(3)ä¸»æœºï¸°åº”ç”¨å±‚ã€è¿è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚</p>
<p>è·¯ç”±å™¨:ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚</p>
<p>äº¤æ¢æœº:æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚</p>
<p>é›†çº¿å™¨:ç‰©ç†å±‚</p>
<blockquote>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç½‘ç»œï¼Œä¸»æœºAä¸ä¸»æœºBé—´ä¼ è¾“æ•°æ®ï¼Œè¯·å›ç­”ä»¥ä¸‹é—®é¢˜</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-26_18-34-59.png"></p>
<p>(1)ä¸»æœºAä¸ä¸»æœºBæ„æˆçš„ç½‘è·¯æ˜¯ä¸€ç§ä»€ä¹ˆç»“æ„?<br>(2)ä¸»æœºAä¸ä¸»æœºBè¿›è¡Œæ•°æ®ä¼ è¾“æ—¶ï¼Œå¯èƒ½å‘ç”Ÿå†²çªï¼Œæ˜¯å“ªç§å»¶è¿Ÿå¯¼è‡´çš„è¿™ä¸ªé—®é¢˜?ä¸ºä»€ä¹ˆ?<br>(3ï¼‰ç®€è¦å™è¿°CSMA&#x2F;CDæ˜¯å¦‚ä½•å…‹æœä»¥ä¸Šé—®é¢˜ä»¥å®ç°ä¸»æœºAä¸ä¸»æœºBé—´æ•°æ®ä¼ è¾“çš„ã€‚</p>
</blockquote>
<p>(1)æ€»çº¿ç»“æ„<br>(2)ä¼ æ’­å»¶è¿Ÿã€‚å› ä¸ºä¸»æœºAä¸ä¸»æœºBé—´çš„é“¾è·¯æœ‰ä¸€æ®µè·ç¦»ï¼Œå¯¼è‡´ä¸»æœºAä¸ä¸»æœºBéƒ½æ£€æµ‹åˆ°ç©ºé—²æ—¶ï¼Œå‘é€çš„æ•°æ®ä¿¡å·åœ¨é“¾è·¯ä¸­ç”±äºå»¶è¿Ÿè€Œå¯èƒ½å‘ç”Ÿç¢°æ’ã€‚<br>(3)å®ç°è¿‡ç¨‹å¦‚ä¸‹:<br>1)å½“ä¸€ä¸ªèŠ‚ç‚¹è¦å‘é€æ•°æ®æ—¶ï¼Œé¦–å…ˆç›‘å¬ä¿¡é“ï¼Œçœ‹æ˜¯å¦æœ‰è½½æ³¢</p>
<p>2)å¦‚æœä¿¡é“ç©ºé—²ï¼Œåˆ™å‘é€æ•°æ®</p>
<p>3)å¦‚æœä¿¡é“å¿™ï¼Œåˆ™ç»§ç»­å¯¹ä¿¡é“è¿›è¡Œç›‘å¬ã€‚ä¸€æ—¦å‘ç°ç©ºé—²ï¼Œä¾¿ç«‹å³å‘é€</p>
<p>4)å¦‚æœåœ¨å‘é€è¿‡ç¨‹ä¸­æ£€æµ‹åˆ°ç¢°æ’ï¼Œåˆ™åœæ­¢è‡ªå·±çš„æ­£å¸¸å‘é€ï¼Œè½¬è€Œå‘é€ä¸€çŸ­æš‚çš„å¹²æ‰°ä¿¡å·jamï¼Œå¼ºåŒ–å†²çªï¼Œä½¿å…¶å®ƒç«™ç‚¹éƒ½èƒ½çŸ¥é“å‡ºç°äº†å†²çª</p>
<p>5)å‘é€äº†å¹²æ‰°ä¿¡å·åï¼Œé€€é¿éšæœºæ—¶é—´ï¼Œé‡æ–°å°è¯•å‘é€</p>
<blockquote>
<p>4ã€è€ƒè™‘ä¸‹å›¾æ‰€ç¤ºçš„ç½‘ç»œã€‚å‡å®šAS3å’ŒAS2æ­£åœ¨è¿è¡Œå…¶ASå†…éƒ¨é€‰è·¯åè®®OSPFï¼ŒAS1å’ŒAS4æ­£åœ¨è¿è¡Œå…¶ASå†…éƒ¨é€‰è·¯åè®®RIPã€‚å‡å®šASé—´å¯»è·¯åè®®ä½¿ç”¨çš„æ˜¯eBGPå’ŒiBGPã€‚åˆå§‹åŒ–æ—¶ï¼Œå‡å®šAS2å’ŒAS4ä¹‹é—´ä¸å­˜åœ¨ç‰©ç†é“¾è·¯ã€‚ä¸€æ—¦è·¯ç”±å™¨1dçŸ¥é“äº†xçš„æƒ…å†µï¼Œå®ƒå°†ä¸€ä¸ªè¡¨é¡¹(x,l)æ”¾å…¥å…¶è½¬å‘è¡¨ä¸­ã€‚<br>â‘´è·¯ç”±å™¨3cã€3aåˆ†åˆ«ä»OSPFã€RIPã€eBGPæˆ–iBGPä¸­çš„å“ªä¸ªé€‰è·¯åè®®å­¦ä¹ åˆ°äº†å‰ç¼€x?</p>
<p>(2ï¼‰å¯¹è¿™ä¸ªè¡¨é¡¹è€Œè¨€ï¼Œlå°†è®¾ç½®æˆl1,è¿˜æ˜¯l2? ä¸ºä»€ä¹ˆ?</p>
<p>(3ï¼‰ç°åœ¨å‡è®¾AS2å’ŒAS4ä¹‹é—´æœ‰ä¸€æ¡ç‰©ç†é“¾è·¯ï¼Œå¦‚å›¾ä¸­çš„è™šçº¿æ‰€ç¤ºã€‚å‡å®šè·¯ç”±å™¨1dçŸ¥é“ç»AS2ä»¥åŠç»AS3éƒ½èƒ½å¤Ÿè®¿é—®åˆ°xï¼Œlå°†è®¾ç½®æˆl1,è¿˜æ˜¯l2? ä¸ºä»€ä¹ˆ?</p>
<p>(4ï¼‰å‡å®šæœ‰å¦ä¸€è‡ªæ²»ç³»ç»ŸAS5ï¼Œå®ƒä½äºAS2å’ŒAS4ä¹‹é—´ã€‚è·¯ç”±å™¨1dçŸ¥é“ç»AS2 AS5 AS4ä»¥åŠç»AS3 AS4éƒ½èƒ½å¤Ÿè®¿é—®åˆ°xï¼Œå°†è®¾ç½®æˆl1,è¿˜æ˜¯l2? ä¸ºä»€ä¹ˆ?</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-26_18-34-25.png"></p>
</blockquote>
<p>(1) 3c: eBGP ; 3a:iBGP<br>(2)l1ã€‚å› ä¸º1dåˆ°ç½‘å…³è·¯ç”±å™¨1cçš„è·¯å¾„è´¹ç”¨å€¼ç»l1æ¯”ç»l2å°ã€‚<br>(3)l2ã€‚å› ä¸ºè®¿é—®ç½‘ç»œxå…·æœ‰ç›¸åŒçš„AS-PATHï¼Œä½†æ˜¯ldåˆ°ç»l1åˆ°ç½‘å…³è·¯ç”±å™¨1cçš„è·¯å¾„è´¹ç”¨å€¼æ¯”ç»l2åˆ°1bçš„è·¯å¾„è´¹ç”¨å€¼æ›´å¤§ã€‚ä¹Ÿå°±æ˜¯è¯´1bæ˜¯æœ€è¿‘çš„NEXT-HOPè·¯ç”±å™¨ã€‚<br>(4)l1ã€‚å› ä¸ºç»l1æ¯”ç»l2æœ‰æ›´çŸ­çš„AS-PATHè·¯å¾„ã€‚</p>
<blockquote>
<p>è®¾æœ‰Aã€Bã€Cã€Då››å°ä¸»æœºï¼Œå…¶IPåœ°å€å’Œå­ç½‘æ©ç å¦‚ä¸‹è¡¨æ‰€ç¤º</p>
<table>
<thead>
<tr>
<th>ä¸»æœº</th>
<th>IPåœ°å€</th>
<th>å­ç½‘æ©ç </th>
<th>å­ç½‘åœ°å€</th>
<th>å¹¿æ’­åœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>192.155.12.112</td>
<td>255.255.255.224</td>
<td>192.155.12.96</td>
<td>192.155.12.127</td>
</tr>
<tr>
<td>B</td>
<td>192.155.12.120</td>
<td>255.255.255.224</td>
<td></td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>192.155.12.176</td>
<td>255.255.255.224</td>
<td></td>
<td>192.155.12.191</td>
</tr>
<tr>
<td>D</td>
<td>192.155.12.222</td>
<td>255.255.255.224</td>
<td>192.155.12.192</td>
<td></td>
</tr>
</tbody></table>
<p>å®Œæˆä»¥ä¸‹é—®é¢˜:<br>(1)å®Œæˆä»¥ä¸Šè¡¨æ ¼ä¸­çš„ç©ºç™½é¡¹;</p>
<p>(2)ä¸»æœºAã€Bã€Cã€Dè¿™å››å°ä¸»æœºä¹‹é—´å“ªäº›å¯ä»¥ç›´æ¥é€šä¿¡?Cã€Dæ˜¯å¦éœ€è¦é€šè¿‡è·¯ç”±å™¨è·¯ç”±åæ‰èƒ½é€šä¿¡?</p>
<p>(3)è‹¥æ–°å¢åŠ ä¸€å°ä¸»æœºEï¼Œä½¿å®ƒèƒ½å¤Ÿä¸ä¸»æœºDç›´æ¥é€šä¿¡ï¼Œåˆ™å…¶IPåœ°å€çš„è®¾å®šèŒƒå›´æ˜¯å¤šå°‘?(å»æ‰ä¸»æœºåœ°å€å…¨Oå’Œå…¨1æƒ…å†µ)</p>
</blockquote>
<table>
<thead>
<tr>
<th>ä¸»æœº</th>
<th>IPåœ°å€</th>
<th>å­ç½‘æ©ç </th>
<th>å­ç½‘åœ°å€</th>
<th>å¹¿æ’­åœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>192.155.12.112</td>
<td>255.255.255.224</td>
<td>192.155.12.96</td>
<td>192.155.12.127</td>
</tr>
<tr>
<td>B</td>
<td>192.155.12.120</td>
<td>255.255.255.224</td>
<td>192.168.12.96</td>
<td>192.168.12.127</td>
</tr>
<tr>
<td>C</td>
<td>192.155.12.176</td>
<td>255.255.255.224</td>
<td>192.168.12.160</td>
<td>192.155.12.191</td>
</tr>
<tr>
<td>D</td>
<td>192.155.12.222</td>
<td>255.255.255.224</td>
<td>192.155.12.192</td>
<td>192.155.12.223</td>
</tr>
</tbody></table>
<p>(2)Aã€Bä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡(åœ¨ä¸€ä¸ªå­ç½‘é‡Œ)ï¼ŒCã€Dä¹‹é—´éœ€è¦ç»è¿‡è·¯ç”±å™¨æ‰èƒ½é€šä¿¡(ä¸åœ¨ä¸€ä¸ªå­ç½‘é‡Œ)</p>
<p>(3)192.155.12.193 â€”192.155.12.221</p>
<blockquote>
<p>Bob (client)è¯·æ±‚è§†é¢‘:<a href="http://netcinema.com/6Y7B23V">http://netcinema.com/6Y7B23V</a> ï¼Œè§†é¢‘å­˜å‚¨åœ¨CDNä¸Šï¼Œåœ°å€ä¸º<a href="http://kingcdn.com/NetC6y&B23V">http://KingCDN.com/NetC6y&amp;B23V</a> ï¼Œè¯•å†™å‡ºæ•´ä¸ªé€»è¾‘è¿‡ç¨‹ã€‚</p>
</blockquote>
<p>1ã€Bob ä»netcinema.comçš„ç½‘é¡µå¾—åˆ°è§†é¢‘çš„URL<a href="http://netcinema.com/6Y7B23V">http://netcinema.com/6Y7B23V</a></p>
<p>2ã€é€šè¿‡Bobçš„æœ¬åœ°DNSè§£æ<a href="http://netcinema.com/6Y7B23V">http://netcinema.com/6Y7B23V</a>  </p>
<p>3ã€netcinemaçš„ DNSè¿”å›URL:<a href="http://kingcdn.com/NetC6y&B23V">http://KingCDN.com/NetC6y&amp;B23V</a>  </p>
<p>4ã€ç”±KingCDNçš„æƒå¨DNSè§£æ<a href="http://kingcdn.com/NetC6y&B23V">http://KingCDN.com/NetC6y&amp;B23V</a>  ,å…¶è¿”å›åŒ…å«äº†è§†é¢‘çš„æœåŠ¡å™¨çš„IP</p>
<p>5ã€é€šè¿‡HTTPï¼Œä»¥æµçš„æ–¹å¼ä»KINGCDNæœåŠ¡å™¨å–å¾—è§†é¢‘</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/Snipaste_2023-06-21_15-28-26.png"></p>
<blockquote>
<p>å‡è®¾ TCP Reno æ˜¯ä¸€ä¸ªç»å†å¦‚ä¸Šæ‰€ç¤ºè¡Œä¸ºçš„åè®®ï¼Œå›ç­”ä¸‹åˆ—é—®é¢˜ã€‚åœ¨å„ç§æƒ…å†µä¸­ï¼Œç®€è¦åœ°è®ºè¯ä½ çš„å›ç­”ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/uestc-wxy/blog_img/img/yskztt1.png"></p>
<p>ï¼ˆ1ï¼‰æŒ‡å‡º TCP æ…¢å¯åŠ¨è¿è¡Œæ—¶çš„æ—¶é—´é—´éš”ã€‚</p>
<p>ï¼ˆ2ï¼‰æŒ‡å‡º TCP æ‹¥å¡é¿å…è¿è¡Œæ—¶çš„æ—¶é—´é—´éš”ã€‚</p>
<p>ï¼ˆ3ï¼‰åœ¨ç¬¬ 16 ä¸ªä¼ è¾“è½®å›ä¹‹åï¼ŒæŠ¥æ–‡æ®µçš„ä¸¢å¤±æ˜¯æ ¹æ® 3 ä¸ªå†—ä½™ ACK è¿˜æ˜¯æ ¹æ®è¶…æ—¶æ£€æµ‹å²€æ¥çš„ï¼Ÿ</p>
<p>ï¼ˆ4ï¼‰åœ¨ç¬¬ 22 ä¸ªä¼ è¾“è½®å›ä¹‹åï¼ŒæŠ¥æ–‡æ®µçš„ä¸¢å¤±æ˜¯æ ¹æ® 3 ä¸ªå†—ä½™ ACK è¿˜æ˜¯æ ¹æ®è¶…æ—¶æ£€æµ‹å‡ºæ¥çš„ï¼Ÿ</p>
<p>ï¼ˆ5ï¼‰åœ¨ç¬¬ 1 ä¸ªä¼ è¾“è½®å›é‡Œï¼Œssthresh çš„åˆå§‹å€¼è®¾ç½®ä¸ºå¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ6ï¼‰åœ¨ç¬¬ 18 ä¸ªä¼ è¾“è½®å›é‡Œï¼Œssthresh çš„å€¼è®¾ç½®ä¸ºå¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ7ï¼‰åœ¨ç¬¬ 24 ä¸ªä¼ è¾“è½®å›é‡Œï¼Œssthresh çš„å€¼è®¾ç½®ä¸ºå¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ8ï¼‰åœ¨å“ªä¸ªä¼ è¾“è½®å›å†…å‘é€ç¬¬ 70 ä¸ªæŠ¥æ–‡æ®µï¼Ÿ</p>
<p>ï¼ˆ9ï¼‰å‡å®šåœ¨ç¬¬ 26 ä¸ªä¼ è¾“è½®å›åï¼Œé€šè¿‡æ”¶åˆ° 3 ä¸ªå†—ä½™ ACK æ£€æµ‹å‡ºæœ‰åˆ†ç»„ä¸¢å¤±ï¼Œæ‹¥å¡çš„çª—å£é•¿åº¦å’Œ ssthresh çš„å€¼åº”å½“æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>ï¼ˆ10ï¼‰å‡å®šä½¿ç”¨ TCP Tahoe ï¼ˆè€Œä¸æ˜¯ TCP Renoï¼‰, å¹¶å‡å®šåœ¨ç¬¬ 16 ä¸ªä¼ è¾“è½®å›æ”¶åˆ° 3 ä¸ªå†—ä½™ ACKã€‚åœ¨ç¬¬ 19 ä¸ªä¼ è¾“è½®å›ï¼Œssthresh å’Œæ‹¥å¡çª—å£é•¿åº¦æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ï¼ˆ11ï¼‰å†æ¬¡å‡è®¾ä½¿ç”¨ TCP Tahoe, åœ¨ç¬¬ 22 ä¸ªä¼ è¾“è½®å›æœ‰ä¸€ä¸ªè¶…æ—¶äº‹ä»¶ã€‚ä»ç¬¬ 17 ä¸ªä¼ è¾“è½®å›åˆ°ç¬¬ 22 ä¸ªä¼  è¾“è½®å›ï¼ˆåŒ…æ‹¬è¿™ä¸¤ä¸ªä¼ è¾“è½®å›ï¼‰ï¼Œä¸€å…±å‘é€äº†å¤šå°‘åˆ†ç»„ï¼Ÿ</p>
</blockquote>
<p>(1) [1,6] and [23,26]</p>
<p>(2) [6,16] and [17,22]</p>
<p>(3) 3 ä¸ªå†—ä½™ ACK</p>
<p>(4) è¶…æ—¶</p>
<p>(5) 32</p>
<p>(6) 21ï¼ˆåœ¨ 16 è½®å›ï¼Œ CongWin &#x3D; 42, ssthresh è®¾ç½®ä¸ºå½“å‰æ‹¥å¡çª—å£çš„ä¸€åŠï¼‰</p>
<p>(7) 14ï¼ˆåœ¨ 22 è½®å›ï¼Œ CongWin &#x3D; 29, å‘ä¸‹å–æ•´ï¼‰</p>
<p>(8) 7ï¼ˆ64-96ï¼‰</p>
<p>(9) 4ï¼Œ7</p>
<p>(10) 21ï¼Œ4ï¼ˆæ‹¥å¡çª—å£é•¿åº¦å˜ä¸º 1ï¼Œæ…¢å¯åŠ¨ï¼Œ17 ä¸º 1ï¼Œ18 ä¸º 2ï¼Œ19 ä¸º 4ï¼‰</p>
<p>(11) 52&#x3D;1+2+4+8+16+21 (ç¬¬ 17 ä¸ªå‘äº† 1 ä¸ªï¼Œç¬¬ 18 ä¸ªå‘äº† 2 ä¸ªï¼Œç¬¬ 19 ä¸ªå‘äº† 4 ä¸ªï¼Œç¬¬ 20 ä¸ªå‘äº† 8 ä¸ªï¼Œç¬¬ 21 ä¸ªå‘äº† 16 ä¸ªï¼Œç¬¬ 22 ä¸ªç¿»å€è¶…è¿‡ ssthreshï¼Œå› æ­¤åªå‘äº† 21 ä¸ªï¼Œæ…¢å¯åŠ¨ä¸èƒ½è¶…é˜ˆå€¼)</p>
]]></content>
      <categories>
        <category>å¤§äºŒä¸‹æœŸæœ«å¤ä¹ </category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
</search>
